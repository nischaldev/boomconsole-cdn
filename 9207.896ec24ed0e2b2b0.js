"use strict";(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[9207],{9207:(lt,y,d)=>{d.r(y),d.d(y,{TemplatesModule:()=>ot});var p=d(6895),u=d(7518),e=d(4650),h=d(8154),_=d(8180);const q=function(t,i){return[t,i]};function U(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"a",16),e.NdJ("click",function(){e.CHM(n);const o=e.oxw().$implicit,l=e.oxw(3);return e.KtG(l.handleAccordionClick(o.email_template.id))}),e._uU(1),e.qZA()}if(2&t){const n=i.ngIf,a=e.oxw().$implicit,o=e.oxw(3);e.Q6J("ngClass",e.WLB(2,q,o.openedEmailTemplates.includes(a.email_template.id)&&o.accordionHasElements(a.email_template.id)?"":"collapsed",o.accordionHasElements(a.email_template.id)?"":"remove-accordion-icon")),e.xp6(1),e.hij(" ",null==a||null==a.email_template||null==a.email_template.data||null==a.email_template.data[n]||null==a.email_template.data[n].data?null:a.email_template.data[n].data.title," ")}}function k(t,i){if(1&t&&e._UZ(0,"p",22),2&t){const n=i.ngIf,a=e.oxw(3).$implicit;e.Q6J("innerHTML",null==a||null==a.email_template||null==a.email_template.data||null==a.email_template.data[n]||null==a.email_template.data[n].data?null:a.email_template.data[n].data.template,e.oJD)}}function F(t,i){if(1&t&&(e.TgZ(0,"div",19)(1,"div",20),e.YNc(2,k,1,1,"p",21),e.qZA()()),2&t){const n=e.oxw(2).$implicit,a=e.oxw(3);e.xp6(2),e.Q6J("ngIf",a.getFirstAvailableType(n))}}function N(t,i){if(1&t&&(e.TgZ(0,"div",17),e.YNc(1,F,3,1,"div",18),e.qZA()),2&t){const n=e.oxw().$implicit,a=e.oxw(3);e.Q6J("id",n.email_template.id)("ngClass",a.openedEmailTemplates.includes(n.email_template.id)?"show":""),e.xp6(1),e.Q6J("ngIf",a.openedEmailTemplates.includes(n.email_template.id))}}const S=function(t){return["/templates","email","edit",t]};function J(t,i){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",8)(2,"h2",9)(3,"div",10),e.YNc(4,U,2,5,"a",11),e.TgZ(5,"div")(6,"a",12)(7,"span",13),e._uU(8," edit "),e.qZA()(),e.TgZ(9,"span",14),e.NdJ("click",function(){const l=e.CHM(n).$implicit,s=e.oxw(3);return e.KtG(s.deleteTemplate(l.email_template.id))}),e._uU(10," delete "),e.qZA()()()(),e.YNc(11,N,2,3,"div",15),e.qZA(),e.BQk()}if(2&t){const n=i.$implicit,a=e.oxw(3);e.xp6(4),e.Q6J("ngIf",a.getFirstAvailableType(n)),e.xp6(2),e.Q6J("routerLink",e.VKq(3,S,n.email_template.id)),e.xp6(5),e.Q6J("ngIf",a.accordionHasElements(n.email_template.id))}}function B(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div",6),e.YNc(2,J,12,5,"ng-container",7),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",n.emailTemplates)}}function O(t,i){1&t&&(e.TgZ(0,"h6",19),e._uU(1,"No Email Templates available"),e.qZA())}function L(t,i){if(1&t&&(e.ynx(0),e.YNc(1,B,3,1,"ng-container",3),e.YNc(2,O,2,0,"ng-template",null,5,e.W1O),e.BQk()),2&t){const n=e.MAs(3),a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.emailTemplates.length>0)("ngIfElse",n)}}function Y(t,i){1&t&&(e.TgZ(0,"div",23),e._UZ(1,"span",24),e.qZA())}let Q=(()=>{const i=class{constructor(a,o){this._itemService=a,this._snackbarService=o,this.emailTemplates=[],this.openedEmailTemplates=[],this.loader=!1}ngOnInit(){this.getEmailTemplates()}getEmailTemplates(){this._itemService.listAllWithoutAuthWithLinker([{type:"email_template",listLinkers:["email_template_linker_s"],inpage:10,page:1,logic:"or",filterSearches:[]}]).subscribe({next:o=>{this.emailTemplates=o.filter(s=>void 0!==s.email_template);const l=this.emailTemplates.map(s=>{const c=s?.email_template?.data;return c?Object.keys(c)[0]:null}).filter(s=>null!==s);this.loader=!1,this.template_types=l}})}getFirstAvailableType(a){return this.template_types.find(o=>a?.email_template?.data?.[o]?.data?.template)}handleAccordionClick(a){const o=this.openedEmailTemplates.indexOf(a);-1===o?this.openedEmailTemplates.push(a):this.openedEmailTemplates.splice(o,1)}accordionHasElements(a){return this.emailTemplates.some(o=>o.email_template.id===a)}deleteTemplate(a){confirm("Are you sure you want to delete this template?")&&(this.loader=!0,this._itemService.bulkDelete([a]).subscribe({next:()=>{this._snackbarService.openSnackBar("Successfullly delated email template","success"),this.emailTemplates=this.emailTemplates.filter(l=>l.email_template.id!==a),this.loader=!1},error:l=>{console.error(l),this._snackbarService.openSnackBar("Error deleting email template","error"),this.loader=!1}}))}};let t=i;return i.\u0275fac=function(o){return new(o||i)(e.Y36(h.e),e.Y36(_.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list"]],decls:7,vars:3,consts:[[1,"container","create-btn"],[1,"btn","btn-primary",3,"routerLink"],[1,"container","py-4"],[4,"ngIf","ngIfElse"],["loading",""],["noDataAvailable",""],[1,"accordion"],[4,"ngFor","ngForOf"],[1,"accordion-item"],[1,"accordion-header",3,"id"],[1,"d-flex","align-items-center","justify-content-between","w-100"],["role","button","class","accordion-button fw-semibold gap-2",3,"ngClass","click",4,"ngIf"],[3,"routerLink"],["title","edit",1,"material-symbols-outlined","link-warning"],["title","delete",1,"material-symbols-outlined","cursor-pointer","link-danger",3,"click"],["class","accordion-collapse collapse",3,"id","ngClass",4,"ngIf"],["role","button",1,"accordion-button","fw-semibold","gap-2",3,"ngClass","click"],[1,"accordion-collapse","collapse",3,"id","ngClass"],["class","",4,"ngIf"],[1,""],[1,"accordion-body"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"loading"],[1,"loader"]],template:function(o,l){if(1&o&&(e.TgZ(0,"div",0)(1,"button",1),e._uU(2," Create "),e.qZA()(),e.TgZ(3,"div",2),e.YNc(4,L,4,2,"ng-container",3),e.YNc(5,Y,2,0,"ng-template",null,4,e.W1O),e.qZA()),2&o){const s=e.MAs(6);e.xp6(1),e.Q6J("routerLink","/templates/email-template/create"),e.xp6(3),e.Q6J("ngIf",!l.loader)("ngIfElse",s)}},dependencies:[p.mk,p.sg,p.O5,u.rH],styles:[".list-container[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px;border:1px solid #ccc;border-radius:8px}.list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:24px;margin-bottom:10px}.list-container[_ngcontent-%COMP%]   .template-content[_ngcontent-%COMP%]{color:#666;font-size:16px}.create-btn[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:end;margin-top:5px}"]}),t})();var g=d(6844),r=d(4006),M=d(7899),m=d(9446),P=d(384),C=d(7009),A=d(9653);function j(t,i){1&t&&(e.TgZ(0,"div",18),e._UZ(1,"span",19),e.qZA())}function D(t,i){1&t&&(e.TgZ(0,"button",20)(1,"div",21)(2,"span",22),e._uU(3,"."),e.qZA()(),e._uU(4," Creating... "),e.qZA())}function E(t,i){1&t&&(e.TgZ(0,"button",23),e._uU(1,"Create"),e.qZA())}let V=(()=>{const i=class{constructor(a,o,l,s,c,v,Z,x,nt){this.formBuilder=a,this._modalService=o,this._authService=l,this._itemService=s,this.snackBar=c,this.appStore=v,this.store=Z,this.router=x,this._snackbarService=nt,this.loading=!1,this.compositionName=M.kI,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"],["image"]],this.isSubmitting=!1,this.createEmailTemplate=this.formBuilder.group({title:new r.NI("",[r.kI.required]),template_type:new r.NI("",[r.kI.required]),description:new r.NI("",[r.kI.required]),template:new r.NI("",[r.kI.required])})}ngOnInit(){this.editor=new g.ML,this.user=this._authService.loadFromLocalStorage();const a=this._authService.loadFromLocalStorage();this.userConceptId=a?.userConcept,this.getEmailTemplates()}getEmailTemplates(){this._itemService.getAll("email_template").subscribe({next:a=>{this.emailTemplates=a.data||[];const o=this.emailTemplates.map(l=>Object.keys(l.data.email_template)[0]);this.template_types=o}})}get titie(){return this.createEmailTemplate.get("title")}get description(){return this.createEmailTemplate.get("description")}get template(){return this.createEmailTemplate.get("template")}get template_type(){return this.createEmailTemplate.get("template_type")}submitEmailTemplate(){const o=this.createEmailTemplate.value,l=o.template_type;if(this.template_types.includes(l.toLowerCase()))return void this._snackbarService.openSnackBar("Invalid template type. Please choose a valid template type.","error");const s={email_template:{[l]:{title:o.title,description:o.description,template:o.template,template_type:l,timestamp:(new Date).toISOString()}}};this.createEmailTemplate.valid&&(this.isSubmitting=!0,this._itemService.create(s).subscribe({next:c=>{this.isSubmitting=!1,this._snackbarService.openSnackBar("Email template created successfully","success"),this.createEmailTemplate.reset();const Z=c?.data?.email_template?.id;this.createLink(this.userConceptId,Z,"email_template_linker"),this.router.navigate(["/email-template/list"])},error:c=>{console.error(c),this.isSubmitting=!1,this._snackbarService.openSnackBar("Error creating email template. Please try again.","error")}}))}createLink(a,o,l){this._itemService.createSemanticConnection({compositionId1:a,compositionId2:o,linker:l}).subscribe({})}};let t=i;return i.\u0275fac=function(o){return new(o||i)(e.Y36(r.qu),e.Y36(m.FF),e.Y36(P.e),e.Y36(h.e),e.Y36(C.ux),e.Y36(A.yh),e.Y36(A.yh),e.Y36(u.F0),e.Y36(_.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create"]],decls:32,vars:8,consts:[["class","loading",4,"ngIf"],[1,"container","py-4"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","title","type","title",1,"form-label"],[1,"text-danger"],["formControlName","title","type","title",1,"form-control"],["for","template_type","type","template_type",1,"form-label"],["formControlName","template_type",1,"form-control"],["for","description","type","description",1,"form-label"],["formControlName","description","type","desccription",1,"form-control"],[1,"form-group","sticky-menu-editor"],["for","template","value","template",1,"form-label"],[1,"Ngx-Editor__Wrapper"],[3,"editor","toolbar"],["value","template","formControlName","template",3,"editor","placeholder"],["type","submit","class","btn btn-primary btn-loading",4,"ngIf","ngIfElse"],["notLoading",""],[1,"loading"],[1,"loader"],["type","submit",1,"btn","btn-primary","btn-loading"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary"]],template:function(o,l){if(1&o&&(e.YNc(0,j,2,0,"div",0),e.TgZ(1,"div",1)(2,"h2"),e._uU(3,"Add Email Template"),e.qZA(),e.TgZ(4,"form",2),e.NdJ("ngSubmit",function(){return l.submitEmailTemplate()}),e.TgZ(5,"div",3)(6,"label",4),e._uU(7," Title "),e.TgZ(8,"span",5),e._uU(9,"*"),e.qZA()(),e._UZ(10,"input",6),e.qZA(),e.TgZ(11,"div",3)(12,"label",7),e._uU(13," Template type "),e.TgZ(14,"span",5),e._uU(15,"*"),e.qZA()(),e._UZ(16,"input",8),e.qZA(),e.TgZ(17,"div",3)(18,"label",9),e._uU(19," Description"),e.qZA(),e._UZ(20,"input",10),e.qZA(),e.TgZ(21,"div",11)(22,"label",12),e._uU(23,"Template "),e.TgZ(24,"span",5),e._uU(25,"*"),e.qZA()(),e.TgZ(26,"div",13),e._UZ(27,"ngx-editor-menu",14)(28,"ngx-editor",15),e.qZA()(),e.YNc(29,D,5,0,"button",16),e.YNc(30,E,2,0,"ng-template",null,17,e.W1O),e.qZA()()),2&o){const s=e.MAs(31);e.Q6J("ngIf",l.loading),e.xp6(4),e.Q6J("formGroup",l.createEmailTemplate),e.xp6(23),e.Q6J("editor",l.editor)("toolbar",l.toolbar),e.xp6(1),e.Q6J("editor",l.editor)("placeholder","Write your template detail here..."),e.xp6(1),e.Q6J("ngIf",l.isSubmitting)("ngIfElse",s)}},dependencies:[p.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g.tP,g.Mn]}),t})();function H(t,i){1&t&&(e.TgZ(0,"div",21),e._UZ(1,"span",22),e.qZA())}function z(t,i){1&t&&(e.TgZ(0,"button",23)(1,"div",24)(2,"span",25),e._uU(3,"."),e.qZA()(),e._uU(4," Updating... "),e.qZA()),2&t&&e.Q6J("disabled",!0)}function G(t,i){1&t&&(e.TgZ(0,"button",26),e._uU(1,"Update"),e.qZA())}let W=(()=>{const i=class{constructor(a,o,l,s,c){this._fb=a,this._itemService=o,this.snackBar=l,this._snapshot=s,this._snackbarService=c,this.emailTemplates=[],this.isDisabled=!0,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"],["image"]],this.loading=!1,this.templateId=this._snapshot.snapshot.params.id,this.updatetemplate=this._fb.group({title:new r.NI(""),description:new r.NI(""),template_type:new r.NI({value:"",disabled:!0},[r.kI.required]),template:new r.NI("")})}ngOnInit(){this.editor=new g.ML,this.getDataById(this.templateId)}get title(){return this.updatetemplate.get("title")}get template(){return this.updatetemplate.get("template")}getDataById(a){this._itemService.getByIdClean(a).subscribe({next:o=>{this.template_type=Object.keys(o.data.email_template)[0],this.patchValue(o)}})}update(){this.loading=!0;const o={compositionId:Number(this.templateId),patcher:{[this.template_type]:{...this.updatetemplate.value}}};this.updatetemplate.valid&&this._itemService.patchv2(o).subscribe(()=>{this.loading=!1,this._snackbarService.openSnackBar("Email Template Updated Succesfully","success")})}patchValue(a){this.updatetemplate.patchValue({title:a?.data?.email_template?.[this.template_type]?.title,template_type:this.template_type,description:a?.data?.email_template?.[this.template_type]?.description,template:a?.data?.email_template?.[this.template_type]?.template})}};let t=i;return i.\u0275fac=function(o){return new(o||i)(e.Y36(r.qu),e.Y36(h.e),e.Y36(C.ux),e.Y36(u.gz),e.Y36(_.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit"]],decls:36,vars:9,consts:[["class","loading",4,"ngIf"],[1,"container","py-4"],[1,"d-flex","align-items-center"],[1,"material-symbols-outlined","cursor-pointer",3,"routerLink"],[3,"formGroup","ngSubmit"],["createMenuFormId","ngForm"],[1,"form-group"],["for","title","type","title",1,"form-label"],[1,"text-danger"],["formControlName","title","type","title",1,"form-control"],["for","template_type","type","template_type",1,"form-label"],["formControlName","template_type",1,"form-control"],["for","description","type","description",1,"form-label"],["formControlName","description","type","desccription",1,"form-control"],[1,"form-group","sticky-menu-editor"],["for","template","value","template",1,"form-label"],[1,"Ngx-Editor__Wrapper"],[3,"editor","toolbar"],["value","template","formControlName","template",3,"editor","placeholder"],["type","button","class","btn btn-primary btn-loading",3,"disabled",4,"ngIf","ngIfElse"],["notLoading",""],[1,"loading"],[1,"loader"],["type","button",1,"btn","btn-primary","btn-loading",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary"]],template:function(o,l){if(1&o&&(e.YNc(0,H,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4," arrow_back_ios "),e.qZA(),e.TgZ(5,"h2"),e._uU(6,"Edit Template"),e.qZA()(),e.TgZ(7,"form",4,5),e.NdJ("ngSubmit",function(){return l.update()}),e.TgZ(9,"div",6)(10,"label",7),e._uU(11," Title "),e.TgZ(12,"span",8),e._uU(13,"*"),e.qZA()(),e._UZ(14,"input",9),e.qZA(),e.TgZ(15,"div",6)(16,"label",10),e._uU(17," Template type "),e.TgZ(18,"span",8),e._uU(19,"*"),e.qZA()(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"div",6)(22,"label",12),e._uU(23," Description"),e.qZA(),e._UZ(24,"input",13),e.qZA(),e.TgZ(25,"div",14)(26,"label",15),e._uU(27,"Template "),e.TgZ(28,"span",8),e._uU(29,"*"),e.qZA()(),e.TgZ(30,"div",16),e._UZ(31,"ngx-editor-menu",17)(32,"ngx-editor",18),e.qZA()(),e.YNc(33,z,5,1,"button",19),e.YNc(34,G,2,0,"ng-template",null,20,e.W1O),e.qZA()()),2&o){const s=e.MAs(35);e.Q6J("ngIf",l.loading),e.xp6(3),e.Q6J("routerLink","/templates/email/list"),e.xp6(4),e.Q6J("formGroup",l.updatetemplate),e.xp6(24),e.Q6J("editor",l.editor)("toolbar",l.toolbar),e.xp6(1),e.Q6J("editor",l.editor)("placeholder","Write your template detail here..."),e.xp6(1),e.Q6J("ngIf",l.loading)("ngIfElse",s)}},dependencies:[p.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.rH,g.tP,g.Mn]}),t})();var f=d(354);function $(t,i){1&t&&(e.TgZ(0,"div",2),e._UZ(1,"div",3),e.qZA())}const K=function(t){return{"active-category":t}};function R(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"li")(1,"a",22),e.NdJ("click",function(){const l=e.CHM(n).$implicit,s=e.oxw(3);return e.KtG(s.fetchTemplates(l.id,!0))}),e._uU(2),e.qZA()()}if(2&t){const n=i.$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(2,K,a.activeCategoryId==n.id.toString())),e.xp6(1),e.Oqu(n.name)}}function X(t,i){if(1&t&&(e.TgZ(0,"ul",20),e.YNc(1,R,3,4,"li",21),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.templateCategories)}}function ee(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"No Categories Found"),e.qZA())}const te=function(t){return["/templates","project-board",t]},ae=function(t){return["/templates","project-board","edit",t]};function ie(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",23)(6,"a",24)(7,"span",25),e._uU(8," visibility "),e.qZA()(),e.TgZ(9,"a",26)(10,"span",25),e._uU(11," edit "),e.qZA()(),e.TgZ(12,"a",27),e.NdJ("click",function(){const l=e.CHM(n).$implicit,s=e.oxw(3);return e.KtG(s.deleteTemplate(l.id))}),e.TgZ(13,"span",28),e._uU(14," delete "),e.qZA()()()()}if(2&t){const n=i.$implicit;e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.categoryId),e.xp6(2),e.Q6J("routerLink",e.VKq(4,te,n.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(6,ae,n.id))}}function oe(t,i){if(1&t&&(e.ynx(0),e.YNc(1,ie,15,8,"tr",21),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.templates)}}function ne(t,i){1&t&&(e.TgZ(0,"tr")(1,"td",29),e._uU(2,"No Template Found"),e.qZA()())}const le=function(){return["/templates","project-board","create"]};function re(t,i){if(1&t&&(e.TgZ(0,"div",4)(1,"div",5)(2,"h2"),e._uU(3,"List Project Board Templates"),e.qZA(),e.TgZ(4,"a",6),e._uU(5,"Create New Template"),e.qZA()(),e.TgZ(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10)(10,"h4",11),e._uU(11,"Categories"),e.qZA()(),e.TgZ(12,"div",12),e.YNc(13,X,2,1,"ul",13),e.YNc(14,ee,2,0,"p",14),e.qZA()()(),e.TgZ(15,"div",15)(16,"div",9)(17,"div",10)(18,"h4",11),e._uU(19,"Templates"),e.qZA()(),e.TgZ(20,"div",12)(21,"div",16)(22,"table",17)(23,"thead")(24,"tr")(25,"th"),e._uU(26,"Template Name"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Template Category"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Actions"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,oe,2,1,"ng-container",18),e.YNc(33,ne,3,0,"ng-template",null,19,e.W1O),e.qZA()()()()()()()()),2&t){const n=e.MAs(34),a=e.oxw();e.xp6(4),e.Q6J("routerLink",e.DdM(5,le)),e.xp6(9),e.Q6J("ngIf",a.templateCategories.length>0),e.xp6(1),e.Q6J("ngIf",0==a.templateCategories.length),e.xp6(18),e.Q6J("ngIf",a.templates.length>0)("ngIfElse",n)}}let se=(()=>{const i=class{constructor(a,o){this._projectService=a,this._snackbarService=o,this.loader=!0,this.templateCategories=[],this.activeCategoryId=void 0,this.templates=[]}ngOnInit(){this.fetchTemplateCategories()}fetchTemplateCategories(){this._projectService.listProjectTemplateCategory().subscribe({next:a=>{this.templateCategories=a.data,a.data?.[0]?(this.activeCategoryId=a.data?.[0].id,this.fetchTemplates(a.data?.[0].id)):this.loader=!1},error:a=>{console.error(a),this._snackbarService.openSnackBar("Failed to load templates","error")}})}fetchTemplates(a,o=!1){a==this.activeCategoryId&&o||(o&&(this.loader=!0),this.activeCategoryId=a,this._projectService.listProjectTemplateOfCategory(a).subscribe({next:l=>{this.templates=l.data,this.loader=!1},error:l=>{this.loader=!1,console.error(l),this._snackbarService.openSnackBar("Failed to load templates","error")}}))}deleteTemplate(a){this.loader=!0,this._projectService.deleteProjectTemplate(a).subscribe({next:()=>{this.templates=this.templates.filter(o=>o.id!=a),this.loader=!1},error:o=>{console.error(o),this._snackbarService.openSnackBar(o.message,"error"),this.loader=!1}})}};let t=i;return i.\u0275fac=function(o){return new(o||i)(e.Y36(f.Y),e.Y36(_.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list-board-templates"]],decls:2,vars:2,consts:[["class","loading",4,"ngIf"],["class","container",4,"ngIf"],[1,"loading"],[1,"loader"],[1,"container"],[1,"d-flex","justify-content-between","align-items-center","my-2"],[1,"btn","btn-primary",3,"routerLink"],[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],["class","list-unstyled",4,"ngIf"],[4,"ngIf"],[1,"col-md-8"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngIf","ngIfElse"],["noTemplate",""],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"d-flex","p-2","rounded","mb-1","category-item",3,"ngClass","click"],[1,"d-flex","flex-row","gap-2"],["ngbTooltip","View Board ",1,"btn-top_header","d-flex","align-items-center","justify-content-center",3,"routerLink"],[1,"material-symbols-outlined"],["ngbTooltip","Edit Board Template",1,"btn-top_header","d-flex","align-items-center","justify-content-center",3,"routerLink"],["ngbTooltip","Delete Board Template",1,"btn-top_header","d-flex","align-items-center","justify-content-center",3,"click"],[1,"material-symbols-outlined","text-danger"],["colspan","3",1,"text-center"]],template:function(o,l){1&o&&(e.YNc(0,$,2,0,"div",0),e.YNc(1,re,35,6,"div",1)),2&o&&(e.Q6J("ngIf",l.loader),e.xp6(1),e.Q6J("ngIf",!l.loader))},dependencies:[p.mk,p.sg,p.O5,m._L,u.rH],styles:[".active-category[_ngcontent-%COMP%], .category-item[_ngcontent-%COMP%]:hover{border:1px solid #eee;background:rgba(253,126,147,.2)}"]}),t})(),de=(()=>{const i=class{constructor(a,o,l){this._activeModal=a,this._snackbarService=o,this._projectService=l,this.loading=!1,this.addCategoryForm=new r.cw({name:new r.NI("",[r.kI.required]),description:new r.NI("",[r.kI.required]),coverImage:new r.NI(void 0)})}handleSaveCategory(){if(!this.addCategoryForm.valid)return void this._snackbarService.openSnackBar("Invalid form data","error");this.loading=!0;const a=new FormData;a.append("name",this.addCategoryForm.value.name||""),a.append("description",this.addCategoryForm.value.description||""),this.addCategoryForm.value.coverImage?.[0]&&a.append("coverImage",this.addCategoryForm.value.coverImage?.[0]||""),this._projectService.createProjectTemplateCategory(a).subscribe({next:o=>{this._snackbarService.openSnackBar("Added New Category","success"),this._activeModal.close({category:o.data}),this.loading=!1},error:o=>{console.error(o),this.loading=!1,this._snackbarService.openSnackBar("","error")}})}};let t=i;return i.\u0275fac=function(o){return new(o||i)(e.Y36(m.Kz),e.Y36(_.o),e.Y36(f.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-board-category"]],decls:23,vars:3,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup","submit"],[1,"modal-body"],[1,"mb-2"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Name",1,"form-control"],["for","description",1,"form-label"],["formControlName","description","placeholder","Template Description",1,"form-control"],[1,"form-label"],["type","file","formControlName","coverImage",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Add Template Category"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return l._activeModal.dismiss()}),e.qZA()(),e.TgZ(4,"form",3),e.NdJ("submit",function(){return l.handleSaveCategory()}),e.TgZ(5,"div",4)(6,"div",5)(7,"label",6),e._uU(8,"Template Name"),e.qZA(),e._UZ(9,"input",7),e.qZA(),e.TgZ(10,"div",5)(11,"label",8),e._uU(12,"Description"),e.qZA(),e._UZ(13,"textarea",9),e.qZA(),e.TgZ(14,"div",5)(15,"label",10),e._uU(16,"Cover Image"),e.qZA(),e._UZ(17,"input",11),e.qZA()(),e.TgZ(18,"div",12)(19,"button",13),e.NdJ("click",function(){return l._activeModal.dismiss()}),e._uU(20," Cancel "),e.qZA(),e.TgZ(21,"button",14),e._uU(22),e.qZA()()()),2&o&&(e.xp6(4),e.Q6J("formGroup",l.addCategoryForm),e.xp6(17),e.Q6J("disabled",l.loading),e.xp6(1),e.hij(" ",l.loading?"Creating":"Create"," "))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]}),t})();var b=d(1206),w=d(7726),T=d(4385),I=d(3238);function ce(t,i){1&t&&(e.TgZ(0,"div",57),e._UZ(1,"div",58),e.qZA())}function pe(t,i){if(1&t&&(e.TgZ(0,"option",59),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.name," ")}}function me(t,i){if(1&t&&(e.TgZ(0,"option",59),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.name," ")}}function ue(t,i){if(1&t&&(e.TgZ(0,"mat-option",60),e._uU(1),e.qZA()),2&t){const n=i.$implicit,a=e.oxw();e.Q6J("disabled",a.defaultTabs.includes(n))("value",n),e.xp6(1),e.Oqu(n)}}function ge(t,i){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"input",61),e.NdJ("change",function(o){e.CHM(n);const l=e.oxw();return e.KtG(l.onFileSelected(o))}),e.qZA(),e.BQk()}}function _e(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",64),e._UZ(1,"img",65),e.TgZ(2,"a",66),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.removeCoverImage())}),e.TgZ(3,"span",20),e._uU(4," close "),e.qZA()()()}if(2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("src",n.coverImgData,e.LSH)}}function fe(t,i){1&t&&(e.TgZ(0,"div",67),e._UZ(1,"div",68),e.qZA())}function he(t,i){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,_e,5,1,"div",62),e.YNc(2,fe,2,0,"div",63),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.coverImgData&&!n.coverImgLoading),e.xp6(1),e.Q6J("ngIf",!n.coverImgData&&n.coverImgLoading)}}function be(t,i){1&t&&(e.TgZ(0,"div",69),e._UZ(1,"input",70),e.TgZ(2,"select",71)(3,"option",72),e._uU(4,"None"),e.qZA(),e.TgZ(5,"option",73),e._uU(6,"To do"),e.qZA(),e.TgZ(7,"option",74),e._uU(8,"Done"),e.qZA()(),e._UZ(9,"div",75),e.qZA()),2&t&&e.Q6J("formGroupName",i.index)}function Te(t,i){1&t&&(e.TgZ(0,"div",76),e._uU(1," Attachments "),e.TgZ(2,"div",77)(3,"div",78)(4,"div",79)(5,"div",80),e._UZ(6,"img",81),e.TgZ(7,"span",82),e._uU(8," close "),e.qZA()(),e.TgZ(9,"div",83),e._UZ(10,"img",84),e.TgZ(11,"span",82),e._uU(12," close "),e.qZA()()()()()())}function ve(t,i){1&t&&(e.TgZ(0,"div",85)(1,"label",86),e._uU(2,"Sub Tasks"),e.qZA(),e.TgZ(3,"div",87)(4,"div",88),e._UZ(5,"input",89),e.qZA(),e.TgZ(6,"div",90)(7,"h6",91),e._uU(8," Task Title 1 "),e.qZA()(),e.TgZ(9,"div",92)(10,"a",93)(11,"span",20),e._uU(12," edit "),e.qZA()(),e.TgZ(13,"a",94)(14,"span",20),e._uU(15," close "),e.qZA()()()(),e.TgZ(16,"div",87)(17,"div",88),e._UZ(18,"input",89),e.qZA(),e.TgZ(19,"div",90)(20,"h6",91),e._uU(21," Task Title 2 "),e.qZA()(),e.TgZ(22,"div",92)(23,"a",93)(24,"span",20),e._uU(25," edit "),e.qZA()(),e.TgZ(26,"a",94)(27,"span",20),e._uU(28," close "),e.qZA()()()()())}function Ze(t,i){1&t&&(e.TgZ(0,"div",85)(1,"label",95),e._uU(2,"Web Links"),e.qZA(),e.TgZ(3,"div",96)(4,"p",97)(5,"a",98),e._uU(6,"https://boomconsole.com"),e.qZA()(),e.TgZ(7,"a",94)(8,"span",20),e._uU(9," close "),e.qZA()()(),e.TgZ(10,"div",96)(11,"p",97)(12,"a",98),e._uU(13,"boomconsole"),e.qZA()(),e.TgZ(14,"a",94)(15,"span",20),e._uU(16," close "),e.qZA()()()())}function xe(t,i){1&t&&(e.TgZ(0,"div",7)(1,"h6"),e._uU(2,"Assignee"),e.qZA(),e.TgZ(3,"div",104)(4,"button",105),e._uU(5," Add Assignee "),e.qZA(),e.TgZ(6,"div",106),e.ynx(7)(8),e.TgZ(9,"button",107)(10,"span"),e._UZ(11,"img",108),e.qZA(),e.TgZ(12,"span"),e._uU(13,"Santosh Yadav"),e.qZA()(),e.BQk()(),e.qZA()(),e.ynx(14),e.TgZ(15,"div",30)(16,"div",109)(17,"div",110)(18,"span"),e._UZ(19,"img",111),e.qZA(),e.TgZ(20,"p",97),e._uU(21,"Santosh Yadav"),e.qZA()(),e.TgZ(22,"a",112)(23,"span",113),e._uU(24," close "),e.qZA()()()(),e.BQk(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("autoClose",!0))}function ye(t,i){1&t&&(e.TgZ(0,"div",7)(1,"h6"),e._uU(2,"Labels"),e.qZA(),e._UZ(3,"input",114),e.ynx(4),e.TgZ(5,"div",115)(6,"span",116),e._uU(7," label "),e.qZA()(),e.BQk(),e.qZA())}function Ce(t,i){1&t&&(e.TgZ(0,"div",7)(1,"h6"),e._uU(2,"Sprint"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"issueSprint"),e.qZA()())}function Ae(t,i){1&t&&(e.TgZ(0,"div",7)(1,"h6"),e._uU(2,"priority"),e.qZA(),e.TgZ(3,"select",117)(4,"option",118),e._uU(5,"high"),e.qZA(),e.TgZ(6,"option",118),e._uU(7,"low"),e.qZA(),e.TgZ(8,"option",118),e._uU(9,"medium"),e.qZA(),e.TgZ(10,"option",118),e._uU(11,"highest"),e.qZA(),e.TgZ(12,"option",118),e._uU(13,"lowest"),e.qZA()()())}function we(t,i){if(1&t&&(e.TgZ(0,"div",99)(1,"div",100)(2,"h6",101),e._uU(3,"Details"),e.qZA(),e.TgZ(4,"a",94)(5,"span",20),e._uU(6," keyboard_arrow_down "),e.qZA()()(),e.TgZ(7,"div",102),e.YNc(8,xe,25,1,"div",103),e.YNc(9,ye,8,0,"div",103),e.YNc(10,Ce,5,0,"div",103),e.YNc(11,Ae,14,0,"div",103),e.qZA()()),2&t){const n=e.oxw();e.xp6(8),e.Q6J("ngIf",n.showAssigneeTemplate),e.xp6(1),e.Q6J("ngIf",n.showLabelsTemplate),e.xp6(1),e.Q6J("ngIf",n.showSprintsTemplate),e.xp6(1),e.Q6J("ngIf",n.showPriorityTemplate)}}function Ie(t,i){1&t&&(e.TgZ(0,"small"),e._uU(1,"Created At:May 27, 2024"),e.qZA())}function qe(t,i){1&t&&(e.TgZ(0,"small"),e._uU(1,"Updated At:Jun 12, 2024"),e.qZA())}function Ue(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",88)(1,"input",119),e.NdJ("click",function(){const l=e.CHM(n).$implicit,s=e.oxw();return e.KtG(s.handleIssueFieldClick(l.field))}),e.qZA(),e.TgZ(2,"label",120),e._uU(3),e.qZA()()}if(2&t){const n=i.$implicit,a=e.oxw();e.xp6(1),e.Q6J("id",n.field)("disabled",!n.optional)("checked",null==a.addTemplateForm.value.issueFields?null:a.addTemplateForm.value.issueFields.includes(n.field)),e.xp6(1),e.Q6J("for",n.field),e.xp6(1),e.hij(" ",n.field," ")}}const ke=function(){return[]};let Fe=(()=>{const i=class{get issueFields(){return this.addTemplateForm.get("issueFields")}get boardsList(){return this.addTemplateForm.get("boards")}addIssueField(a){this.issueFields.push(this._fb.control(a))}removeIssueField(a){this.issueFields.removeAt(a)}addBoardField({name:a,status:o}){this.boardsList.push(this._fb.group({name:this._fb.control(a,[r.kI.required]),status:this._fb.control(o)}))}removeBoardField(a){this.boardsList.removeAt(a)}constructor(a,o,l,s,c){this._router=a,this._fb=o,this._modalService=l,this._snackbarService=s,this._projectService=c,this.loader=!1,this.categoryLists=[],this.issueFieldsList=w.y,this.availableTabs=["Project","Board","Issues","Gantt","Report","Calendar","Documentation"],this.defaultTabs=["Project","Board"],this.boardTypes=[{name:"kanban",value:"kanban"},{name:"scrum",value:"scrum"}],this.coverImgLoading=!1,this.coverImgData="",this.addTemplateForm=this._fb.group({name:new r.NI("",[r.kI.required]),description:new r.NI("",[r.kI.required]),categoryId:new r.NI("",[r.kI.required]),boardType:new r.NI(this.boardTypes[0].name||"",[r.kI.required]),tags:new r.Oe([]),shownTabs:new r.NI(this.defaultTabs),boards:this._fb.array([]),issueFields:this._fb.array([])}),this.showAttachmentTemplate=!1,this.showSubTaskTemplate=!1,this.showWebLinksTemplate=!1,this.showAssigneeTemplate=!1,this.showLabelsTemplate=!1,this.showSprintsTemplate=!1,this.showPriorityTemplate=!1,this.showCreatedAtTemplate=!1,this.showUpdatedAtTemplate=!1}ngOnInit(){this.editor=new g.ML,this.issueFieldsList.map(a=>{a.optional||this.addIssueField(a.field)}),this.addTemplateForm.controls.boardType.valueChanges.subscribe(a=>{"scrum"==a?(this.defaultTabs=[...this.defaultTabs,"Issues"],this.addTemplateForm.controls.shownTabs.setValue(this.addTemplateForm.value.shownTabs?[...this.addTemplateForm.value.shownTabs,"Issues"]:[])):"kanban"==a&&(this.defaultTabs=this.defaultTabs.filter(o=>"Issues"!=o))}),this._projectService.listProjectTemplateCategory().subscribe({next:a=>{this.categoryLists=a.data},error:a=>console.error(a)})}ngOnDestroy(){this.editor.destroy()}onFileSelected(a){const o=a.target;if(o.files&&o.files.length>0){const l=o.files[0];if(l.size>2097152)return o.value="",void this._snackbarService.openSnackBar("File Size too large","error");const s=new FormData;s.append("image",l),this.coverImgLoading=!0,this._projectService.addProjectTemplateImage(s).subscribe({next:c=>{c.data&&(this.coverImgData=c.data),this.coverImgLoading=!1},error:c=>{console.error(c),this.coverImgLoading=!1}})}}handleCreateNewCategory(){this._modalService.open(de,{size:"md"}).result.then(o=>{o.category&&(this.categoryLists.push(o.category),this._snackbarService.openSnackBar("Added Category Successfully","success"))}).catch(()=>{})}handleCreateNewTemplate(){if(!this.addTemplateForm.valid)return void this._snackbarService.openSnackBar("Validation Failed","error");if(0==this.addTemplateForm.value.boards?.length)return void this._snackbarService.openSnackBar("Boards is Required","error");this.loader=!0;const a=this.coverImgData?{...this.addTemplateForm.value,coverImg:this.coverImgData}:this.addTemplateForm.value;this._projectService.createProjectTemplate(a).subscribe({next:o=>{this._router.navigate(["templates","project-board",o.data.id]),this.loader=!1},error:o=>{this.loader=!1,console.error(o),this._snackbarService.openSnackBar(o.message,"error")}})}handleAddBoard(){this.addBoardField({name:"",status:""})}dropBoard(a){(0,b.bA)(a.container.data,a.previousIndex,a.currentIndex)}handleIssueFieldClick(a){this.addTemplateForm.value.issueFields?.includes(a)?(this.addTemplateForm.value.issueFields.map((o,l)=>{o==a&&this.removeIssueField(l)}),this.showAttachmentTemplate=this.issueFields.value.includes("attachments"),this.showSubTaskTemplate=this.issueFields.value.includes("subTasks"),this.showWebLinksTemplate=this.issueFields.value.includes("webLinks"),this.showAssigneeTemplate=this.issueFields.value.includes("assignee"),this.showLabelsTemplate=this.issueFields.value.includes("labels"),this.showSprintsTemplate=this.issueFields.value.includes("sprints"),this.showPriorityTemplate=this.issueFields.value.includes("priority"),this.showCreatedAtTemplate=this.issueFields.value.includes("createdAt"),this.showUpdatedAtTemplate=this.issueFields.value.includes("updatedAt")):(this.addIssueField(a),this.showAttachmentTemplate=this.issueFields.value.includes("attachments"),this.showSubTaskTemplate=this.issueFields.value.includes("subTasks"),this.showWebLinksTemplate=this.issueFields.value.includes("webLinks"),this.showAssigneeTemplate=this.issueFields.value.includes("assignee"),this.showLabelsTemplate=this.issueFields.value.includes("labels"),this.showSprintsTemplate=this.issueFields.value.includes("sprints"),this.showPriorityTemplate=this.issueFields.value.includes("priority"),this.showCreatedAtTemplate=this.issueFields.value.includes("createdAt"),this.showUpdatedAtTemplate=this.issueFields.value.includes("updatedAt"))}handleBoardAdd(a){this.addTemplateForm.value.issueFields?.includes(a)?this.addTemplateForm.value.issueFields.map((o,l)=>{o==a&&this.removeIssueField(l)}):this.addIssueField(a)}removeCoverImage(){this.coverImgData="",this.coverImgLoading=!1}};let t=i;return i.\u0275fac=function(o){return new(o||i)(e.Y36(u.F0),e.Y36(r.qu),e.Y36(m.FF),e.Y36(_.o),e.Y36(f.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-board-template"]],decls:107,vars:21,consts:[["class","loading",4,"ngIf"],[1,"container","my-2"],[1,"card"],[1,"card-header"],[1,"card-title"],["enctype","multipart/form-data",3,"formGroup","submit"],[1,"card-body"],[1,"mb-2"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Name",1,"form-control"],["for","description",1,"form-label"],[1,"NgxEditor__Wrapper"],[3,"editor"],["formControlName","description","minHeight","250px","placeholder","Description ...",3,"editor","disabled"],["for","category",1,"form-label"],[1,"input-group"],["formControlName","categoryId","id","category","required","",1,"form-select"],["value","","selected","","disabled",""],["class","text-capitalize",3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","d-flex",3,"click"],[1,"material-symbols-outlined"],[1,"form-label"],["formControlName","boardType",1,"form-select","py-2"],["formControlName","shownTabs","multiple","","placeholder","Select Available Tabs",1,"form-select","py-2"],[3,"disabled","value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["image",""],["cdkDropList","","cdkDropListOrientation","horizontal",1,"board-demo",3,"cdkDropListData","cdkDropListDropped"],["formArrayName","boards"],["class","board",3,"formGroupName",4,"ngFor","ngForOf"],[1,""],["type","button",1,"btn","btn-light","p-2","d-flex",3,"click"],[1,"row","my-0"],[1,"col-lg-8"],[1,"issue-demo"],[1,"d-flex","flex-row","gap-2","mb-4"],["title","Update cover image","for","project_attachment"],["role","button","title","Add attachment",1,"btn","btn-light","btn-sm","px-2","py-1"],["role","button","title","Add Sub Task",1,"btn","btn-light","btn-sm","px-2","py-1"],["role","button","title","Add Web Link",1,"btn","btn-light","btn-sm","px-2","py-1"],[1,"row"],[1,"col-md-8","border-end"],[1,"form-group","mb-2"],["for","description fw-bold",1,"form-label"],[1,"border","rounded","px-2","py-1","innerHTML","cursor-text"],[1,"text-secondary"],["class","fw-bold",4,"ngIf"],["class","form-group mt-2",4,"ngIf"],[1,"col-md-4",2,"width","15rem"],["class","card p-0 shadow-none border mb-4",4,"ngIf"],[4,"ngIf"],[1,"col-lg-4"],[1,"border","p-3"],[1,"list-unstyled"],["class","form-check",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],[1,"btn","btn-primary",3,"disabled"],[1,"loading"],[1,"loader"],[1,"text-capitalize",3,"value"],[3,"disabled","value"],["type","file",1,"form-control",3,"change"],["class","position-relative d-inline-block",4,"ngIf"],["class","position-relative d-flex align-items-center justify-content-center border","style","height: 120px; width: 120px",4,"ngIf"],[1,"position-relative","d-inline-block"],["alt","Image",1,"border",2,"height","120px","width","120px","object-fit","contain",3,"src"],["role","button",1,"position-absolute","border","border-danger","h-25px","w-25px","bg-white","text-danger","d-flex","align-items-center","justify-content-center","rounded-circle",2,"top","-10px","right","-10px",3,"click"],[1,"position-relative","d-flex","align-items-center","justify-content-center","border",2,"height","120px","width","120px"],[1,"loader",2,"top","35px","left","35px"],[1,"board",3,"formGroupName"],["formControlName","name","placeholder","Board Name... ",1,"form-control","font-control-sm","py-2"],["formControlName","status",1,"form-select","form-select-sm","py-2"],["value","","selected",""],["value","todo","selected",""],["value","done","selected",""],[1,"board-body"],[1,"fw-bold"],[1,"card","shadow-sm"],[1,"row","no-gutters"],[1,"col-auto","d-flex"],[1,"img-container","position-relative"],["src","https://static.vecteezy.com/system/resources/previews/027/206/101/large_2x/colorful-autumn-landscape-with-hills-trees-and-sun-illustration-a-pointillism-painting-of-a-landscape-digital-art-illustration-ai-generated-free-photo.jpg","alt","File Preview",1,"img-fluid","p-2",2,"width","150px","height","150px"],[1,"material-symbols-outlined","position-absolute"],[1,"img-container","position-relative","ms-3"],["src","https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0\n                                    ","alt","File Preview",1,"img-fluid","p-2",2,"width","150px","height","150px"],[1,"form-group","mt-2"],["for","subTasks fw-bold",1,"form-label","fw-bold"],[1,"d-flex","flex-row","align-items-center","gap-2","card","border","shadow-sm","p-2","px-3","mb-2"],[1,"form-check"],["type","checkbox","name","",1,"form-check-input"],[1,"col-10"],[1,"text-capitalize","text-wrap","mw-95"],[1,"col-2"],["role","button",1,"ml-0"],["role","button"],["for","webLinks fw-bold",1,"form-label","fw-bold"],[1,"card","shadow-sm","border","card-body","py-1","d-flex","flex-row","justify-content-between","mb-1"],[1,"m-0"],["target","_blank",1,"card-title","text-black","text-break","mw-95"],[1,"card","p-0","shadow-none","border","mb-4"],[1,"card-header","p-3","border-bottom-0","d-flex","align-items-center","justify-content-between"],[1,"fw-bold","card-title","m-0"],[1,"card-body","border-top"],["class","mb-2",4,"ngIf"],["ngbDropdown","",1,"",3,"autoClose"],["type","button","id","assignee","ngbDropdownToggle","",1,"hide-dropdown-toggle","form-select","form-select-sm","px-2","py-1","shadow-none","w-full","text-start"],["ngbDropdownMenu","","aria-labelledby","assignee"],["ngbDropdownItem","",1,"px-2","d-flex","align-items-center","gap-1"],["src","https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp",1,"avatar",2,"width","40px","height","40px"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","gap-1"],["src","https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp","alt","Profile Image",1,"avatar",2,"width","40px","height","40px"],["role","button","title","Remove User",1,"p-1"],[1,"material-symbols-outlined","h6","mb-0","text-danger"],["type","button","value","label",1,"form-control","form-select-sm","px-2","py-1","shadow-none"],[1,"d-flex","flex-row","flex-wrap","gap-1","mt-1"],[1,"px-2","bg-light","rounded","border"],[1,"form-select","form-select-sm"],[1,"capitalize"],["type","checkbox",1,"form-check-input",3,"id","disabled","checked","click"],[1,"form-check-label","text-capitalize",3,"for"]],template:function(o,l){if(1&o&&(e.YNc(0,ce,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Create Board Template"),e.qZA()(),e.TgZ(6,"form",5),e.NdJ("submit",function(){return l.handleCreateNewTemplate()}),e.TgZ(7,"div",6)(8,"div",7)(9,"label",8),e._uU(10,"Template Name"),e.qZA(),e._UZ(11,"input",9),e.qZA(),e.TgZ(12,"div",7)(13,"label",10),e._uU(14,"Description"),e.qZA(),e.TgZ(15,"div",11),e._UZ(16,"ngx-editor-menu",12)(17,"ngx-editor",13),e.qZA()(),e.TgZ(18,"div",7)(19,"label",14),e._uU(20,"Category"),e.qZA(),e.TgZ(21,"div",15)(22,"select",16)(23,"option",17),e._uU(24,"Select an Category"),e.qZA(),e.YNc(25,pe,2,2,"option",18),e.qZA(),e.TgZ(26,"button",19),e.NdJ("click",function(){return l.handleCreateNewCategory()}),e.TgZ(27,"span",20),e._uU(28," add "),e.qZA()()()(),e.TgZ(29,"div",7)(30,"label",21),e._uU(31,"Board Type"),e.qZA(),e.TgZ(32,"select",22),e.YNc(33,me,2,2,"option",18),e.qZA()(),e.TgZ(34,"div",7)(35,"label",21),e._uU(36,"Shown Tabs"),e.qZA(),e.TgZ(37,"mat-select",23),e.YNc(38,ue,2,3,"mat-option",24),e.qZA()(),e.TgZ(39,"div",7)(40,"label",21),e._uU(41,"Cover Image"),e.qZA(),e.YNc(42,ge,2,0,"ng-container",25),e.YNc(43,he,3,2,"ng-template",null,26,e.W1O),e.qZA(),e.TgZ(45,"div",7)(46,"label",21),e._uU(47,"Board Information"),e.qZA(),e.TgZ(48,"div",27),e.NdJ("cdkDropListDropped",function(c){return l.dropBoard(c)}),e.ynx(49,28),e.YNc(50,be,10,1,"div",29),e.BQk(),e.TgZ(51,"div",30)(52,"a",31),e.NdJ("click",function(){return l.handleAddBoard()}),e.TgZ(53,"span",20),e._uU(54," add "),e.qZA()()()()(),e.TgZ(55,"div",7)(56,"label",21),e._uU(57,"Card Information"),e.qZA(),e.TgZ(58,"div",32)(59,"div",33)(60,"div",34)(61,"div",2)(62,"div",3)(63,"h5",4),e._uU(64,"Issue Name"),e.qZA(),e.TgZ(65,"div",35)(66,"label",36)(67,"a",37)(68,"span",20),e._uU(69," attachment "),e.qZA()()(),e.TgZ(70,"a",38)(71,"span",20),e._uU(72," event_list "),e.qZA()(),e.TgZ(73,"a",39)(74,"span",20),e._uU(75," link "),e.qZA()()()(),e.TgZ(76,"div",30)(77,"div",6)(78,"div",40)(79,"div",41)(80,"div",42)(81,"label",43),e._uU(82,"Description"),e.qZA(),e.TgZ(83,"p",44)(84,"span",45)(85,"em"),e._uU(86,"Description ..."),e.qZA()()()(),e.YNc(87,Te,13,0,"div",46),e.YNc(88,ve,29,0,"div",47),e.YNc(89,Ze,17,0,"div",47),e.qZA(),e.TgZ(90,"div",48),e.YNc(91,we,12,4,"div",49),e.TgZ(92,"p"),e.YNc(93,Ie,2,0,"small",50),e._UZ(94,"br"),e.YNc(95,qe,2,0,"small",50),e.qZA()()()()()()()(),e.TgZ(96,"div",51)(97,"div",2)(98,"div",52)(99,"h6"),e._uU(100,"Available Values"),e.qZA(),e.TgZ(101,"ul",53)(102,"li"),e.YNc(103,Ue,4,5,"div",54),e.qZA()()()()()()(),e.TgZ(104,"div",55)(105,"button",56),e._uU(106," Submit "),e.qZA()()()()()()),2&o){const s=e.MAs(44);e.Q6J("ngIf",l.loader),e.xp6(6),e.Q6J("formGroup",l.addTemplateForm),e.xp6(10),e.Q6J("editor",l.editor),e.xp6(1),e.Q6J("editor",l.editor)("disabled",!1),e.xp6(8),e.Q6J("ngForOf",l.categoryLists),e.xp6(8),e.Q6J("ngForOf",l.boardTypes),e.xp6(5),e.Q6J("ngForOf",l.availableTabs),e.xp6(4),e.Q6J("ngIf",!l.coverImgLoading&&!l.coverImgData)("ngIfElse",s),e.xp6(6),e.Q6J("cdkDropListData",e.DdM(20,ke)),e.xp6(2),e.Q6J("ngForOf",l.boardsList.controls),e.xp6(37),e.Q6J("ngIf",l.showAttachmentTemplate),e.xp6(1),e.Q6J("ngIf",l.showSubTaskTemplate),e.xp6(1),e.Q6J("ngIf",l.showWebLinksTemplate),e.xp6(2),e.Q6J("ngIf",l.showAssigneeTemplate||l.showLabelsTemplate||l.showSprintsTemplate||l.showPriorityTemplate),e.xp6(2),e.Q6J("ngIf",l.showCreatedAtTemplate),e.xp6(2),e.Q6J("ngIf",l.showUpdatedAtTemplate),e.xp6(8),e.Q6J("ngForOf",l.issueFieldsList),e.xp6(2),e.Q6J("disabled",l.loader||l.coverImgLoading)}},dependencies:[p.sg,p.O5,m.jt,m.iD,m.Vi,m.TH,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.Q7,r.sg,r.u,r.x0,r.CE,b.Wj,T.gD,I.ey,g.tP,g.Mn],styles:['.board-demo[_ngcontent-%COMP%]{background:#eee;display:flex;flex-direction:row;flex-wrap:"nowrap";gap:10px;padding:10px}.board-demo[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]{width:180px;max-width:180px;border:1px solid #aaa;padding:5px;display:flex;flex-direction:column;gap:10px}.board-demo[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]   .board-body[_ngcontent-%COMP%]{height:200px;background-color:#fff}.issue-demo[_ngcontent-%COMP%]{background-color:#eee;padding:10px}']}),t})();var Ne=d(9658);function Se(t,i){1&t&&(e.TgZ(0,"div",3),e._UZ(1,"div",4),e.qZA())}function Je(t,i){if(1&t&&(e.TgZ(0,"div",16)(1,"div",17),e._UZ(2,"img",18),e.qZA()()),2&t){const n=e.oxw(2);e.xp6(2),e.Q6J("src",n.template.coverImg,e.LSH)}}function Be(t,i){1&t&&(e.TgZ(0,"h5"),e._uU(1,"Description"),e.qZA())}function Oe(t,i){1&t&&(e.TgZ(0,"h5",19),e._uU(1,"Board Preview"),e.qZA())}function Le(t,i){if(1&t&&(e.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"span",25),e._uU(4," drag_indicator "),e.qZA(),e.TgZ(5,"div")(6,"span"),e._uU(7),e.qZA(),e.TgZ(8,"span",26)(9,"small"),e._uU(10,"(0)"),e.qZA()()(),e.TgZ(11,"div",27,28)(13,"button",29)(14,"span",30),e._uU(15,"more_vert"),e.qZA()(),e.TgZ(16,"ul",31)(17,"li")(18,"button",32),e._uU(19,"Update Title"),e.qZA()(),e.TgZ(20,"li")(21,"button",33),e._uU(22,"Delete"),e.qZA()()()()(),e.TgZ(23,"div",34)(24,"div",35)(25,"a",36)(26,"div",37)(27,"div",38)(28,"div",39),e._uU(29,"Send Mail to client"),e.qZA(),e._UZ(30,"div",40),e.qZA(),e.TgZ(31,"div",41)(32,"div",42)(33,"span",43),e._uU(34,"A"),e.qZA()()(),e.TgZ(35,"div",44)(36,"div",45)(37,"span",46),e._uU(38,"todo"),e.qZA()()()()()(),e.TgZ(39,"a",47)(40,"span",30),e._uU(41," add "),e.qZA(),e._uU(42," Add Issue "),e.qZA()()()()),2&t){const n=i.$implicit;e.xp6(7),e.Oqu(n.name)}}function Ye(t,i){if(1&t&&(e.TgZ(0,"div",20),e.YNc(1,Le,43,1,"div",21),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.template.boards)}}function Qe(t,i){1&t&&(e.TgZ(0,"h5"),e._uU(1,"Issues"),e.qZA())}function Me(t,i){if(1&t&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.Oqu(n)}}function Pe(t,i){if(1&t&&(e.TgZ(0,"div",48)(1,"h6"),e._uU(2,"Active In Issues"),e.qZA(),e.TgZ(3,"ol"),e.YNc(4,Me,2,1,"li",49),e.qZA()()),2&t){const n=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",n.template.issueFields)}}function je(t,i){if(1&t&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.field," ")}}function De(t,i){if(1&t&&(e.ynx(0),e.YNc(1,je,2,1,"li",10),e.BQk()),2&t){const n=i.$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!(null!=a.template&&null!=a.template.issueFields&&a.template.issueFields.includes(n.field)))}}function Ee(t,i){if(1&t&&(e.TgZ(0,"div",48)(1,"h6"),e._uU(2,"Inactive In Issues"),e.qZA(),e.TgZ(3,"ol"),e.YNc(4,De,2,1,"ng-container",49),e.qZA()()),2&t){const n=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",n.issueFields)}}function Ve(t,i){1&t&&(e.TgZ(0,"h5"),e._uU(1,"Folders"),e.qZA())}function He(t,i){if(1&t&&(e.TgZ(0,"div",50),e._UZ(1,"app-folder-tree",51),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("folders",n.folders)}}function ze(t,i){if(1&t&&(e.TgZ(0,"small")(1,"b"),e._uU(2,"Category: "),e.qZA(),e._uU(3),e.qZA()),2&t){const n=e.oxw(2);e.xp6(3),e.hij(" ",null==n.template||null==n.template.category?null:n.template.category.name,"")}}function Ge(t,i){if(1&t&&(e.TgZ(0,"div",5)(1,"div",6)(2,"h5",7),e._uU(3),e.qZA()(),e.TgZ(4,"div",8),e.YNc(5,Je,3,1,"div",9),e.YNc(6,Be,2,0,"h5",10),e._UZ(7,"p",11),e.YNc(8,Oe,2,0,"h5",12),e.YNc(9,Ye,2,1,"div",13),e.YNc(10,Qe,2,0,"h5",10),e.YNc(11,Pe,5,1,"div",14),e.YNc(12,Ee,5,1,"div",14),e.YNc(13,Ve,2,0,"h5",10),e.YNc(14,He,2,1,"div",15),e.TgZ(15,"p"),e.YNc(16,ze,4,1,"small",10),e._UZ(17,"br"),e.TgZ(18,"small")(19,"b"),e._uU(20,"Created Date: "),e.qZA(),e._uU(21),e.ALo(22,"date"),e.qZA(),e._UZ(23,"br"),e.TgZ(24,"small")(25,"b"),e._uU(26,"Updated Date: "),e.qZA(),e._uU(27),e.ALo(28,"date"),e.qZA(),e._UZ(29,"br"),e.qZA()()()),2&t){const n=e.oxw();e.xp6(3),e.Oqu(n.template.name),e.xp6(2),e.Q6J("ngIf",n.template.coverImg),e.xp6(1),e.Q6J("ngIf",!n.folders),e.xp6(1),e.Q6J("innerHTML",n.template.description,e.oJD),e.xp6(1),e.Q6J("ngIf",!n.folders),e.xp6(1),e.Q6J("ngIf",!n.folders),e.xp6(1),e.Q6J("ngIf",!n.folders),e.xp6(1),e.Q6J("ngIf",!n.folders),e.xp6(1),e.Q6J("ngIf",!n.folders),e.xp6(1),e.Q6J("ngIf",n.folders),e.xp6(1),e.Q6J("ngIf",n.folders),e.xp6(2),e.Q6J("ngIf",!n.folders),e.xp6(5),e.hij(" ",e.lcZ(22,14,null==n.template?null:n.template.createdAt),""),e.xp6(6),e.hij(" ",e.lcZ(28,16,null==n.template?null:n.template.updatedAt),"")}}let We=(()=>{const i=class{constructor(a,o,l,s){this._projectService=a,this._snackbarService=o,this._activeRoute=l,this.router=s,this.loader=!1,this.templateId=this._activeRoute.snapshot.params.id,this.issueFields=w.y}ngOnInit(){this.loader=!0,this._projectService.getProjectTemplate(parseInt(this.templateId||"")).subscribe({next:a=>{function o(l){l.isOpen=!0,l.isFolder=!0,l.children&&l.children.length>0&&l.children.forEach(s=>o(s))}this.template=a.data,this.loader=!1,this.template?.folders.forEach(l=>o(l)),this.folders=this.template.folders},error:a=>{console.error(a),404==a.status?this.router.navigate(["/not-found"]):this._snackbarService.openSnackBar("Failed to get template","error"),this.loader=!1}})}};let t=i;return i.\u0275fac=function(o){return new(o||i)(e.Y36(f.Y),e.Y36(_.o),e.Y36(u.gz),e.Y36(u.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-board-template"]],decls:5,vars:2,consts:[[1,"container","my-4"],["class","loading",4,"ngIf"],["class","card",4,"ngIf"],[1,"loading"],[1,"loader"],[1,"card"],[1,"card-header"],[1,"card-title","text-capitalize"],[1,"card-body"],["class","d-flex justify-content-center",4,"ngIf"],[4,"ngIf"],[1,"text-secondary","mb-3",3,"innerHTML"],["class","mb-3",4,"ngIf"],["class","boards d-flex flex-row gap-4 overflow-auto",4,"ngIf"],["class","mb-2",4,"ngIf"],["class","container border rounded p-2 mb-3",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-md-8","col-lg-6"],["alt","cover Image",3,"src"],[1,"mb-3"],[1,"boards","d-flex","flex-row","gap-4","overflow-auto"],["class","board-single",4,"ngFor","ngForOf"],[1,"board-single"],[1,"board-single-data",2,"width","250px"],[1,"board-title","d-flex","align-items-center","gap-2"],[1,"material-symbols-outlined","text-link-secondary","cursor-move"],[1,"text-muted","fw-normal","ms-2"],["ngbDropdown","","placement","left",1,"dropdown","ms-auto"],["dropdown","ngbDropdown"],["id","dropdownMenuButton","ngbDropdownToggle","",1,"text-dark","border-0","bg-transparent","dropdown-toggle","hide-dropdown-toggle"],[1,"material-symbols-outlined"],["ngbDropdownMenu","","aria-labelledby","dropdownMenuButton",1,"dropdown-menu","mt-2"],[1,"dropdown-item"],[1,"dropdown-item","text-danger"],[1,"board-cards"],[1,"board-cards-dragarea"],[1,"board-card-details"],[1,"card-list-item"],[1,"d-flex","flex-row","justify-content-between"],[1,"card-item-title"],[1,"card-item-badges"],[1,"d-flex","justify-content-end","mt-1"],[1,"d-flex","flex-row"],["title","User Name",1,"rounded-circle","border","border-2","h-25px","w-25px","bg-primary","text-white","text-center","text-capitalize"],[1,"d-flex","justify-content-start","mt-1"],[1,"d-flex","flex-row","ga-1"],[1,"bg-light","rounded","px-2","border","shadow-sm"],[1,"btn","btn-add-card"],[1,"mb-2"],[4,"ngFor","ngForOf"],[1,"container","border","rounded","p-2","mb-3"],[3,"folders"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Preview Template"),e.qZA(),e.YNc(3,Se,2,0,"div",1),e.YNc(4,Ge,30,18,"div",2),e.qZA()),2&o&&(e.xp6(3),e.Q6J("ngIf",l.loader),e.xp6(1),e.Q6J("ngIf",!l.loader))},dependencies:[p.sg,p.O5,m.jt,m.iD,m.Vi,Ne.Y,p.uU],styles:[".cursor-move[_ngcontent-%COMP%]{cursor:move}.board-custom-placeholder[_ngcontent-%COMP%], .issue-custom-placeholder[_ngcontent-%COMP%]{background:#eee;border:dotted 3px #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}.board-custom-placeholder[_ngcontent-%COMP%]{min-width:250px}.card-head[_ngcontent-%COMP%]{padding:20px 0 0}.info[_ngcontent-%COMP%]{font-size:14px}.card-item-title[_ngcontent-%COMP%]{width:90%}.boards[_ngcontent-%COMP%]{font-size:14px}.boards[_ngcontent-%COMP%]   .board-single[_ngcontent-%COMP%]{margin-bottom:25px}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]{background-color:#f1f2f475;box-shadow:#11111a0d 0 4px 16px,#11111a0d 0 8px 32px;border:1px solid #dfdfdf;border-radius:10px;height:500px}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]   .board-title[_ngcontent-%COMP%]{font-size:14px;padding:20px;font-weight:700}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]   .board-cards[_ngcontent-%COMP%]{min-height:200px;padding:0 10px 10px;max-height:440px;overflow-y:auto}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]   .board-cards[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:10px;box-shadow:#0000000d 0 0 0 1px;padding:8px 10px}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]   .board-cards[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px;width:100%}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]   .board-card-details[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dfdfdf;display:block;padding:10px;margin:8px 0;border:1px solid #eee;border-radius:5px;position:relative}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]   .board-card-details[_ngcontent-%COMP%]:hover{background-color:#f1f2f475;border:1px solid #dfdfdf;color:inherit}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]   .board-card-details[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:absolute;right:10px;top:7px;color:#777;font-size:20px}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]   .btn-add-card[_ngcontent-%COMP%]{display:block;position:relative}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]   .btn-add-card[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:relative;top:4px}.boards[_ngcontent-%COMP%]   .board-single-data[_ngcontent-%COMP%]   .btn-add-card[_ngcontent-%COMP%]:hover{background-color:#eee}"]}),t})();var $e=d(5861),Ke=d(9402);function Re(t,i){1&t&&(e.TgZ(0,"div",11),e._UZ(1,"div",12),e.qZA())}function Xe(t,i){if(1&t&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&t){const n=i.$implicit,a=e.oxw();e.Q6J("disabled",a.defaultTabs.includes(n))("value",n),e.xp6(1),e.hij(" ",n," ")}}const et=[{component:Q,path:"email/list"},{component:V,path:"email-template/create"},{component:W,path:"email/edit/:id"},{path:"project-board",component:se},{path:"project-board/create",component:Fe},{path:"project-board/edit/:id",component:(()=>{const i=class{constructor(a,o,l,s,c){this._router=a,this._fb=o,this._snackbarService=l,this._projectService=s,this.route=c,this.templateId="",this.templateType=null,this.loader=!1,this.availableTabs=["Project","Board","Issues","Gantt","Report","Calendar","Documentation"],this.defaultTabs=["Project","Board"],this.shownTabs=[],this.editTemplateForm=this._fb.group({shownTabs:new r.NI(this.defaultTabs)})}ngOnInit(){this.editor=new g.ML,this.route.params.subscribe(a=>{this.templateId=a.id}),this.updateDefaultTabs()}ngOnDestroy(){this.editor.destroy()}updateDefaultTabs(){var a=this;return(0,$e.Z)(function*(){const o=yield(0,Ke.lDJ)(Number(a.templateId));a.shownTabs=o?.data?.projectTemplate?.shownTabs,a.templateType=o?.data?.projectTemplate?.boardType,"scrum"==a.templateType?a.defaultTabs.includes("Issues")||a.defaultTabs.push("Issues"):"kanban"==a.templateType&&(a.defaultTabs=a.defaultTabs.filter(l=>"Issues"!=l)),a.editTemplateForm.get("shownTabs")?.setValue(a.shownTabs)})()}handleEditTemplate(){if(!this.editTemplateForm.valid)return void this._snackbarService.openSnackBar("Validation Failed","error");this.loader=!0;const a=this.editTemplateForm.value;this._projectService.updateProjectTemplate(Number(this.templateId),a).subscribe({next:o=>{this._router.navigate(["templates","project-board",o.data.id]),this.loader=!1},error:o=>{this.loader=!1,console.error(o),this._snackbarService.openSnackBar(o.message,"error")}})}};let t=i;return i.\u0275fac=function(o){return new(o||i)(e.Y36(u.F0),e.Y36(r.qu),e.Y36(_.o),e.Y36(f.Y),e.Y36(u.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-board-template"]],decls:14,vars:3,consts:[["class","loading",4,"ngIf"],[1,"container","my-2"],[1,"card"],[1,"card-header","ps-0"],[1,"card-title"],["enctype","multipart/form-data",3,"formGroup","ngSubmit"],[1,"mb-2"],[1,"form-label"],["formControlName","shownTabs","multiple","",1,"form-select","py-2"],[3,"disabled","value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary"],[1,"loading"],[1,"loader"],[3,"disabled","value"]],template:function(o,l){1&o&&(e.YNc(0,Re,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Edit Shown Tabs In Project Board Template"),e.qZA()(),e.TgZ(6,"form",5),e.NdJ("ngSubmit",function(){return l.handleEditTemplate()}),e.TgZ(7,"div",6)(8,"label",7),e._uU(9,"Shown Tabs"),e.qZA(),e.TgZ(10,"mat-select",8),e.YNc(11,Xe,2,3,"mat-option",9),e.qZA()(),e.TgZ(12,"button",10),e._uU(13,"Save Template"),e.qZA()()()()),2&o&&(e.Q6J("ngIf",l.loader),e.xp6(6),e.Q6J("formGroup",l.editTemplateForm),e.xp6(5),e.Q6J("ngForOf",l.availableTabs))},dependencies:[p.sg,p.O5,r._Y,r.JJ,r.JL,r.sg,r.u,T.gD,I.ey],styles:[".justify-content-start[_ngcontent-%COMP%]{justify-content:flex-start}.justify-content-end[_ngcontent-%COMP%]{justify-content:flex-end}"]}),t})()},{path:"project-board/:id",component:We}];let tt=(()=>{const i=class{};let t=i;return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.Bz.forChild(et),u.Bz]}),t})();var at=d(9549),it=d(2271);let ot=(()=>{const i=class{};let t=i;return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,m.IJ,r.u5,m.IJ,r.UX,b._t,at.lN,T.LD,tt,g.FP.forRoot({locals:{bold:"Bold",italic:"Italic",code:"Code",blockquote:"Blockquote",underline:"Underline",strike:"Strike",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"}}),it.m]}),t})()}}]);