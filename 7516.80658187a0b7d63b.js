"use strict";(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[7516],{1666:(R,Z,p)=>{p.d(Z,{I:()=>g,K:()=>U});var x=p(9653);const g=(0,x.PH)("[Subscription API] Invoke Subscription Fetch API"),U=(0,x.PH)("[Subscription API] Fetch API Success",(0,x.Ky)())},8211:(R,Z,p)=>{p.d(Z,{g:()=>H});var x=p(493),g=p(9653),U=p(1365),C=p(5577),i=p(515),r=p(4004),L=p(262),N=p(2843),t=p(1666),Y=p(7429),J=p(2902),w=p(7899),E=p(4650),z=p(8154),G=p(384);let H=(()=>{const F=class{constructor(q,K,V,X){this.actions$=q,this.apiServices=K,this.store=V,this.authService=X,this.loadAllItems$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(t.I),(0,U.M)(this.store.pipe((0,g.Ys)(Y.P))),(0,C.z)(([,tt])=>{if(tt.length>0)return i.E;let et=this.authService.loadFromLocalStorage();return this.userConceptId=et.userConcept,this.apiServices.getSemanticConnection({compositionId:this.userConceptId,linker:J.PJ+"_s"}).pipe((0,r.U)(k=>{let B={};return B=k.count&&k.output.length?k?.output?.sort((it,ot)=>{const at=new Date(it?.data[w.LI].timestamp).getTime(),st=new Date(ot?.data[w.LI].timestamp).getTime();return Number(st)-Number(at)})[0]?.data[w.LI]:{name:"Free",price:0,expireDate:"Never",id:""},this.subscriptionInfo=B,(0,t.K)({allSubscription:this.subscriptionInfo})}),(0,L.K)(k=>(0,N._)(()=>k?.message)))})))}};let W=F;return F.\u0275fac=function(K){return new(K||F)(E.LFG(x.eX),E.LFG(z.e),E.LFG(g.yh),E.LFG(G.e))},F.\u0275prov=E.Yz7({token:F,factory:F.\u0275fac}),W})()},7746:(R,Z,p)=>{p.d(Z,{k:()=>C});var x=p(9653),g=p(1666);const C=(0,x.Lq)([],(0,x.on)(g.K,(i,{allSubscription:r})=>r))},7429:(R,Z,p)=>{p.d(Z,{P:()=>g});const g=(0,p(9653).ZF)("mySubscription")},7516:(R,Z,p)=>{p.r(Z),p.d(Z,{SubscriptionModule:()=>Lt});var x=p(6895),g=p(4006),U=p(7518),C=p(5861),i=p(7899),r=p(2902),L=p(2588),N=p(2340),t=p(4650),Y=p(8154),J=p(384),w=p(9402),E=p(8180);function z(a,s){1&a&&(t.TgZ(0,"div",10),t._UZ(1,"span",11),t.qZA())}function G(a,s){if(1&a&&(t.ynx(0),t.TgZ(1,"option",17),t._uU(2),t.qZA(),t.BQk()),2&a){const c=s.$implicit;t.xp6(1),t.Q6J("value",null==c?null:c.CoupounCode),t.xp6(1),t.AsE(" ",null==c?null:c.CoupounCode," - ",c.PercentOff,"% off ")}}function H(a,s){if(1&a){const c=t.EpF();t.TgZ(0,"div",12)(1,"label",13),t._uU(2," Coupons you have "),t.qZA(),t.TgZ(3,"select",14),t.NdJ("input",function(n){t.CHM(c);const e=t.oxw(2);return t.KtG(e.selectCouponCodeToApply(n))}),t.TgZ(4,"option",15),t._uU(5,"Select coupon..."),t.qZA(),t.YNc(6,G,3,3,"ng-container",16),t.qZA()()}if(2&a){const c=t.oxw(2);t.xp6(6),t.Q6J("ngForOf",c.myCoupons)}}function W(a,s){if(1&a&&(t.TgZ(0,"div",18)(1,"p",19),t._uU(2,"You have "),t.TgZ(3,"code"),t._uU(4),t.qZA(),t._uU(5," coupon code, apply before it expires."),t.qZA(),t.TgZ(6,"h5",20),t._uU(7,"Will apply "),t.TgZ(8,"strong"),t._uU(9),t.qZA(),t._uU(10," on purchase"),t.qZA(),t.TgZ(11,"p",21),t._uU(12,"Buy Now to grab discount."),t.qZA()()),2&a){const c=t.oxw(2);t.xp6(4),t.Oqu(null==c.myApplyingCoupon?null:c.myApplyingCoupon.CoupounCode),t.xp6(5),t.hij("",null==c.myApplyingCoupon?null:c.myApplyingCoupon.PercentOff,"% off")}}function F(a,s){1&a&&(t.TgZ(0,"div",32)(1,"h3"),t._uU(2,"Monthly Plan"),t.qZA(),t.TgZ(3,"p",33)(4,"small"),t._uU(5,"1 month to cancel free"),t.qZA()()())}function pt(a,s){1&a&&(t.TgZ(0,"div",32)(1,"h3"),t._uU(2,"Yearly Plan"),t.qZA(),t.TgZ(3,"p",33)(4,"small"),t._uU(5,"3 free months and 1 month to cancel"),t.qZA()()())}function q(a,s){1&a&&(t.TgZ(0,"div",32)(1,"h3"),t._uU(2,"4 Yearly Plan"),t.qZA(),t.TgZ(3,"p",33)(4,"small"),t._uU(5,"1 month to cancel"),t.qZA()()())}function K(a,s){if(1&a&&(t.TgZ(0,"span")(1,"h2"),t._uU(2),t.qZA()()),2&a){const c=s.ngIf,o=t.oxw(2).$implicit;t.xp6(2),t.hij("Only $",((null==o?null:o.price)-(null==o?null:o.price)*((null==c?null:c.PercentOff)/100)).toFixed(2),".00")}}function V(a,s){if(1&a&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&a){const c=t.oxw(2).$implicit;t.xp6(1),t.hij("Only $",null==c?null:c.price,".00")}}function X(a,s){if(1&a&&(t.TgZ(0,"div",34),t.YNc(1,K,3,1,"span",35),t.YNc(2,V,2,1,"ng-template",null,36,t.W1O),t.qZA()),2&a){const c=t.MAs(3),o=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.duration==(null==o?null:o.duration)&&(null==n.appliedCoupon||null==n.appliedCoupon[0]?null:n.appliedCoupon[0].CoupounData))("ngIfElse",c)}}function tt(a,s){if(1&a&&(t.TgZ(0,"span")(1,"h2"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&a){const c=s.ngIf,o=t.oxw(2).$implicit;t.xp6(2),t.hij("Only $",((null==o?null:o.price)-(null==o?null:o.price)*((null==c?null:c.PercentOff)/100)).toFixed(2),""),t.xp6(1),t.hij(" Only $",((null==o?null:o.price)-(null==o?null:o.price)*((null==c?null:c.PercentOff)/100)).toFixed(2)," per Month ")}}function et(a,s){if(1&a&&(t.TgZ(0,"h2"),t._uU(1),t.qZA(),t._uU(2)),2&a){const c=t.oxw(2).$implicit;t.xp6(1),t.hij("Only $",null==c?null:c.price,".00"),t.xp6(1),t.hij(" Only $",((null==c?null:c.price)/12).toFixed(2)," per Month ")}}function nt(a,s){if(1&a&&(t.TgZ(0,"div",34),t.YNc(1,tt,4,2,"span",35),t.YNc(2,et,3,2,"ng-template",null,36,t.W1O),t.qZA()),2&a){const c=t.MAs(3),o=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.duration==(null==o?null:o.duration)&&(null==n.appliedCoupon||null==n.appliedCoupon[0]?null:n.appliedCoupon[0].CoupounData))("ngIfElse",c)}}function k(a,s){if(1&a&&(t.TgZ(0,"span")(1,"h2"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&a){const c=s.ngIf,o=t.oxw(2).$implicit;t.xp6(2),t.hij(" Only $",((null==o?null:o.price)-(null==o?null:o.price)*((null==c?null:c.PercentOff)/100)).toFixed(2),""),t.xp6(1),t.hij(" Only $",((null==o?null:o.price)-(null==o?null:o.price)*((null==c?null:c.PercentOff)/100)).toFixed(2)," per Month ")}}function B(a,s){if(1&a&&(t.TgZ(0,"h2"),t._uU(1),t.qZA(),t._uU(2)),2&a){const c=t.oxw(2).$implicit;t.xp6(1),t.hij("Only $",null==c?null:c.price,".00"),t.xp6(1),t.hij(" Only $",((null==c?null:c.price)/48).toFixed(2)," per Month ")}}function lt(a,s){if(1&a&&(t.TgZ(0,"div",34),t.YNc(1,k,4,2,"span",35),t.YNc(2,B,3,2,"ng-template",null,36,t.W1O),t.qZA()),2&a){const c=t.MAs(3),o=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.duration==(null==o?null:o.duration)&&(null==n.appliedCoupon||null==n.appliedCoupon[0]?null:n.appliedCoupon[0].CoupounData))("ngIfElse",c)}}function it(a,s){if(1&a){const c=t.EpF();t.TgZ(0,"span",37),t.NdJ("click",function(){t.CHM(c);const n=t.oxw().$implicit,e=t.oxw(2);return t.KtG(e.showApplyCoupon(null==n?null:n.duration))}),t._uU(1," Apply Coupon "),t.TgZ(2,"span",27),t._uU(3," arrow_forward "),t.qZA()()}}function ot(a,s){1&a&&(t.TgZ(0,"button",48)(1,"span",27),t._uU(2," arrow_forward "),t.qZA()())}function at(a,s){1&a&&(t.TgZ(0,"button",49)(1,"div",50)(2,"span",51),t._uU(3,"."),t.qZA()()()),2&a&&t.Q6J("disabled",!0)}function st(a,s){1&a&&(t.TgZ(0,"small",52),t._uU(1," Please enter coupon code. "),t.qZA())}function _t(a,s){1&a&&(t.TgZ(0,"small",52),t._uU(1," Coupon code does not exist for this plan. "),t.qZA())}function mt(a,s){1&a&&(t.TgZ(0,"small",52),t._uU(1," This coupon has already expired. "),t.qZA())}function ht(a,s){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&a){const c=t.oxw().ngIf;t.xp6(1),t.hij(" ",null==c?null:c.TrialDays," Day Trial and ")}}function gt(a,s){if(1&a&&(t.TgZ(0,"div",53)(1,"h5",20),t._uU(2," Enjoy "),t.YNc(3,ht,3,1,"span",30),t._uU(4),t.qZA(),t.TgZ(5,"p",54),t._uU(6,"Buy Now to grab discount."),t.qZA()()),2&a){const c=s.ngIf,o=t.oxw(3).ngIf;t.xp6(3),t.Q6J("ngIf",null==c?null:c.TrialDays),t.xp6(1),t.AsE(" ",null==c?null:c.PercentOff,"% off Boomconsole ",null==o?null:o.name," Plan ")}}function ft(a,s){if(1&a){const c=t.EpF();t.TgZ(0,"div")(1,"form",38,39),t.NdJ("ngSubmit",function(){t.CHM(c);const n=t.MAs(2),e=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.applyCoupon(n,null==e?null:e.duration))}),t.TgZ(3,"div",40)(4,"input",41),t.NdJ("input",function(n){t.CHM(c);const e=t.oxw(3);return t.KtG(e.onChangeCoupon(n))}),t.qZA(),t.YNc(5,ot,3,0,"button",42),t.YNc(6,at,4,1,"ng-template",null,43,t.W1O),t.qZA(),t.TgZ(8,"div",44)(9,"div",45),t.YNc(10,st,2,0,"small",46),t.YNc(11,_t,2,0,"small",46),t.YNc(12,mt,2,0,"small",46),t.qZA()(),t.YNc(13,gt,7,3,"div",47),t.qZA()()}if(2&a){const c=t.MAs(2),o=t.MAs(7),n=t.oxw(3);t.xp6(1),t.Q6J("formGroup",n.couponForm),t.xp6(4),t.Q6J("ngIf",!n.isCouponApplying)("ngIfElse",o),t.xp6(5),t.Q6J("ngIf",n.coupon&&n.coupon.invalid&&(n.coupon.touched||c.submitted)),t.xp6(1),t.Q6J("ngIf",n.coupon&&!n.coupon.invalid&&!n.isCouponExist&&!n.isCouponExpired),t.xp6(1),t.Q6J("ngIf",n.coupon&&!n.coupon.invalid&&!n.isCouponExist&&n.isCouponExpired),t.xp6(1),t.Q6J("ngIf",(null==n.appliedCoupon?null:n.appliedCoupon.length)&&n.isCouponValid&&n.coupon&&(n.coupon.touched||c.submitted)&&(null==n.appliedCoupon||null==n.appliedCoupon[0]?null:n.appliedCoupon[0].CoupounData))}}function yt(a,s){if(1&a){const c=t.EpF();t.TgZ(0,"div",22),t.YNc(1,F,6,0,"div",23),t.YNc(2,pt,6,0,"div",23),t.YNc(3,q,6,0,"div",23),t.TgZ(4,"div",24),t.YNc(5,X,4,2,"div",25),t.YNc(6,nt,4,2,"div",25),t.YNc(7,lt,4,2,"div",25),t.TgZ(8,"button",26),t.NdJ("click",function(){const e=t.CHM(c).$implicit,u=t.oxw().ngIf,l=t.oxw();return t.KtG(l.makePayment(null==e?null:e.duration,u))}),t._uU(9," BUY NOW "),t.TgZ(10,"span",27),t._uU(11,"expand_circle_right"),t.qZA()(),t.TgZ(12,"div",28),t.YNc(13,it,4,0,"span",29),t.YNc(14,ft,14,7,"div",30),t.qZA(),t._UZ(15,"img",31),t.qZA()()}if(2&a){const c=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf","month"===(null==c?null:c.duration)),t.xp6(1),t.Q6J("ngIf","year"===(null==c?null:c.duration)),t.xp6(1),t.Q6J("ngIf","fouryear"===(null==c?null:c.duration)),t.xp6(2),t.Q6J("ngIf","month"===(null==c?null:c.duration)),t.xp6(1),t.Q6J("ngIf","year"===(null==c?null:c.duration)),t.xp6(1),t.Q6J("ngIf","fouryear"===(null==c?null:c.duration)),t.xp6(6),t.Q6J("ngIf",!o.isApplyCoupon),t.xp6(1),t.Q6J("ngIf",o.isApplyCoupon&&o.selectedDuration===(null==c?null:c.duration))}}function Pt(a,s){if(1&a&&(t.TgZ(0,"div",1),t.YNc(1,z,2,0,"div",2),t.TgZ(2,"div",3)(3,"div",4)(4,"h1",5),t._uU(5),t.qZA(),t.YNc(6,H,7,1,"div",6),t.TgZ(7,"div",7),t.YNc(8,W,13,2,"div",8),t.YNc(9,yt,16,8,"div",9),t.qZA()()()()),2&a){const c=s.ngIf,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(4),t.hij("Boomconsole ",null==c?null:c.name," Plan"),t.xp6(1),t.Q6J("ngIf",null==o.myCoupons?null:o.myCoupons.length),t.xp6(2),t.Q6J("ngIf",o.myApplyingCoupon),t.xp6(1),t.Q6J("ngForOf",null==c?null:c.price)}}let ct=(()=>{const s=class{constructor(o,n,e,u,l){this._itemService=o,this.authService=n,this.formBuilder=e,this._snackbarService=u,this._router=l,this.productPriceInfo=r.O7,this.priceDurationLinkers=[],this.boomconsoleProducts=[],this.isProductDetailFetching=!0,this.isLoading=!1,this.isProductSelected=!1,this.selectedPlanType="Free",this.selectedProductId=0,this.timelyPlan="monthly",this.selectedAmount=1,this.totalPrice=1,this.stripePublishableKey=N.N.STRIPE_PUBLISHABLE_KEY,this.isCouponApplying=!1,this.isCouponExist=!0,this.isCouponValid=!0,this.appliedCoupon=[],this.validAppliedCoupon=[],this.myCoupons=[],this.isApplyCoupon=!1,this.inputNotCleared=!1,this.couponForm=this.formBuilder.group({coupon:new g.NI("",[g.kI.required])})}get coupon(){return this.couponForm.get("coupon")}ngOnInit(){const o=this.authService.loadFromLocalStorage();this.userConceptId=o?.userConcept,this.userEmail=o?.email,this.packageDetails(),this.getMySubscriptionPlan()}getMyCoupons(){var o=this;return(0,C.Z)(function*(){const n=yield(0,w.ECb)("onboarding_email",o.userEmail,!1,999,4,999),e=yield(0,w.oKR)(n?.id,"assinged_coupon_s",10,1),u=o.packagePlan?.[0]?.id,l=e?.filter(m=>{if(m?.data?.onboardingData?.couponInfo?.products?.includes(u.toString()))return m});o.myCoupons=l.map(m=>m?.data?.onboardingData?.couponInfo)})()}selectCouponCodeToApply(o){const n=o?.target?.value,e=this.myCoupons?.filter(u=>u?.CoupounCode===n);this.myApplyingCoupon=e?.[0],this.validAppliedCoupon=[{CoupounData:this.myApplyingCoupon}]}getMySubscriptionPlan(){this._itemService.getMySubscription().subscribe({next:o=>{this.mySubscriptionId=o?.subscriptions?.[0]?.subscriptionId}})}packageDetails(){this.priceDurationLinkers=this.productPriceInfo.map(n=>`stripe_price_${n.value}ly_s`);const o=[{type:"internal_product",listLinkers:[`${r.G_}_s`,`${r.$t}_s`,`${r.Rs}_s`,`${r.qJ}_s`,`${r.Nq}_s`,`${r.Yt}_s`,`${r._j}_s`,`${r.aJ}_s`,`${r.r}_s`,`${r.nE}_s`,`${r.yh}_s`,`${r._C}_s`,`${r.Jl}_s`,`${r.e$}_s`,...this.priceDurationLinkers],inpage:100,page:1,logic:"or",filterSearches:[]}];this._itemService.listAllWithoutAuthWithLinker(o).subscribe({next:n=>{this.packageDetailsWithNewSystem=n,this.getBoomconsoleProductList()}})}getBoomconsoleProductList(){this.isProductDetailFetching=!0,this._itemService.listProductsWithFilter({typeKey:"type",serachKey:"Service"}).subscribe({next:n=>{this.boomconsoleProducts=n,this.boomconsoleProducts.sort((e,u)=>Number(e.data.internal_product.price)-Number(u.data.internal_product.price)),this.boomconsoleProducts=this.boomconsoleProducts.map((e,u)=>{const l=this.packageDetailsWithNewSystem?.filter(_=>_?.internal_product?.id===e?.id);let m=[],d=[];if(l&&Object.keys(l[0]?.internal_product).length>2){d=[];const _=l[0]?.internal_product?.[`internal_product_s_${r.G_}_s`],h=l[0]?.internal_product?.[`internal_product_s_${r.$t}_s`],y=l[0]?.internal_product?.[`internal_product_s_${r.Rs}_s`],b=l[0]?.internal_product?.[`internal_product_s_${r.qJ}_s`],f=l[0]?.internal_product?.[`internal_product_s_${r.Nq}_s`],v=l[0]?.internal_product?.[`internal_product_s_${r.Yt}_s`],I=l[0]?.internal_product?.[`internal_product_s_${r._j}_s`],D=l[0]?.internal_product?.[`internal_product_s_${r.aJ}_s`],M=l?.[0]?.internal_product?.[`internal_product_s_${r.r}_s`],A=l[0]?.internal_product?.[`internal_product_s_${r.nE}_s`],T=l[0]?.internal_product?.[`internal_product_s_${r.yh}_s`],S=l[0]?.internal_product?.[`internal_product_s_${r._C}_s`],O=l[0]?.internal_product?.[`internal_product_s_${r.Jl}_s`],$=l[0]?.internal_product?.[`internal_product_s_${r.e$}_s`];m=this.priceDurationLinkers.map(Q=>l[0]?.internal_product?.[`internal_product_s_${Q}`]?.[0]?.pricingData?.data),_&&_?.[0]?.[i.DI]?.data?.limit&&d.push({id:1,detail:_?.[0]?.[i.DI]?.data?.limit+" "+_[0]?.[i.DI]?.data?.details}),h&&h?.[0]?.[i.FK]?.data?.limit&&d.push({id:2,detail:h?.[0]?.[i.FK]?.data?.limit+" "+h[0]?.[i.FK]?.data?.details}),y&&y?.[0]?.[i.eA]?.data?.limit&&d.push({id:3,detail:y?.[0]?.[i.eA]?.data?.limit+" "+y[0]?.[i.eA]?.data?.details}),b&&b?.[0]?.[i.UB]?.data?.limit&&d.push({id:4,detail:b?.[0]?.[i.UB]?.data?.limit+" "+b[0]?.[i.UB]?.data?.details}),f&&f?.[0]?.[i.Ri]?.data?.limit&&d.push({id:5,detail:f?.[0]?.[i.Ri]?.data?.limit+" "+f[0]?.[i.Ri]?.data?.details}),v&&v?.[0]?.[i.Os]?.data?.limit&&d.push({id:6,detail:v?.[0]?.[i.Os]?.data?.limit+" "+v[0]?.[i.Os]?.data?.details}),I&&I?.[0]?.[i.xz]?.data?.limit&&d.push({id:7,detail:I?.[0]?.[i.xz]?.data?.limit+" "+I[0]?.[i.xz]?.data?.details}),D&&D?.[0]?.[i.aK]?.data?.limit&&d.push({id:8,detail:D?.[0]?.[i.aK]?.data?.limit+" "+D[0]?.[i.aK]?.data?.details}),M&&M?.[0]?.[i.s$]?.data?.limit&&d.push({id:8,detail:M?.[0]?.[i.s$]?.data?.limit+" "+M[0]?.[i.s$]?.data?.details}),A&&A?.[0]?.[i.Nd]?.data?.limit&&d.push({id:9,detail:A?.[0]?.[i.Nd]?.data?.limit+" "+A[0]?.[i.Nd]?.data?.details}),T&&T?.[0]?.[i.JQ]?.data?.limit&&d.push({id:10,detail:T?.[0]?.[i.JQ]?.data?.limit+" "+T[0]?.[i.JQ]?.data?.details}),S&&S?.[0]?.[i.n5]?.data?.limit&&d.push({id:11,detail:S?.[0]?.[i.n5]?.data?.limit+" "+S[0]?.[i.n5]?.data?.details}),O&&O?.[0]?.[i.$W]?.data?.limit&&d.push({id:12,detail:O?.[0]?.[i.$W]?.data?.limit+" "+O[0]?.[i.$W]?.data?.details}),$&&$?.[0]?.[i.sU]?.data?.limit&&d.push({id:13,detail:$?.[0]?.[i.sU]?.data?.limit+" "+$[0]?.[i.sU]?.data?.details})}return 0==e?.data?.internal_product?.price&&(e.id=0),{id:e?.id,name:e?.data?.internal_product?.name,price:m,class:`subscription-${u}`,coupon:"",features:d,remainingStock:e?.data?.internal_product?.internal_product_s_inventory_s?.[0]?.internal_inventory?.quantity}}),this.packagePlan=this.boomconsoleProducts.filter(e=>"Personalized"===e?.name),console.log("this.packagePlan",this.packagePlan),this.getMyCoupons(),this.isProductDetailFetching=!1},error:n=>{console.log("err")},complete:()=>{}})}onChangeCoupon(o){this.isCouponExist=!0,this.isCouponValid=!1,""==o.target?.value&&(this.inputNotCleared=!0),this.validAppliedCoupon=[]}applyCoupon(o,n){var e=this;return(0,C.Z)(function*(){e.isCouponApplying=!0,e.isCouponExist=!0;const u=e.couponForm.value;if(!e.couponForm.valid)return void(e.isCouponApplying=!1);const l=u?.coupon;e.appliedCoupon=yield e.searchCoupon(l),e.appliedCoupon=e.appliedCoupon?.filter(f=>f?.CoupounData?.CoupounCode===l);const m=e.appliedCoupon?.[0]?.CoupounData?.products,d=e.packagePlan?.[0]?.id,P=e.packagePlan?.[0]?.id;let _;e.duration=n,m&&(_=m.includes(P.toString()));let h=!1;const b=e.appliedCoupon?.[0]?.CoupounData?.RedeemBy;if(b){const f=new Date(b).getTime();h=Date.now()>f}return h?(e.isCouponExist=!1,e.isCouponValid=!1,e.isCouponApplying=!1,e.isCouponExpired=!0,void(e.appliedCoupon="")):_&&(m||e.appliedCoupon?.length&&m.includes(d.toString()))?(e.isCouponExist=!0,e.isCouponValid=!0,e.validAppliedCoupon=e.appliedCoupon,void(e.isCouponApplying=!1)):(e.isCouponExist=!1,e.isCouponValid=!1,e.isCouponApplying=!1,void(e.appliedCoupon=""))})()}searchCoupon(o){return new Promise((n,e)=>{this._itemService.searchAPIClean({compositionName:"CoupounData",searchKey:o,type:"CoupounCode"}).subscribe({next:l=>{n(l)},error:l=>{console.log(l),e(l)}})})}makePayment(o,n){var e=this;return(0,C.Z)(function*(){e.isLoading=!0,e.isProductSelected=!1,e.selectedPlanType=n.name,e.selectedProductId=n.id,e.timelyPlan=o;const u=n?.price?.filter(h=>h?.duration+"ly"==o+"ly");e.selectedAmount=Number(u?.[0]?.price),e.totalPrice=Number(u?.[0]?.price);const l=u?.[0]?.pricingId,m=u?.[0]?.trialDays,P=e.validAppliedCoupon?.[0]?.CoupounData?.PercentOff,_=e.validAppliedCoupon?.[0]?.CoupounData?.CoupounCode;var f;if("100"!==P)if(e.mySubscriptionId&&"direct_discount"!==e.mySubscriptionId&&"one_time_payment"!==e.mySubscriptionId&&"fouryear"!==o)e.updateMySubscription({subscriptionId:e.mySubscriptionId,pricingId:l});else{const h=window.location.origin+"/subscription";e._itemService.createCheckoutSession({successUrl:h+"/thankyou",cancelUrl:`${h}`,trialDays:m,AllowPromotionalCodes:!_,coupounCode:_||"",mode:"fouryear"===o?"payment":"subscription",isRecurring:"fouryear"!==o,prices:[{pricingData:l,quantity:1}]}).subscribe({next:(f=(0,C.Z)(function*(v){e.isLoading=!1,(yield(0,L.J)(e.stripePublishableKey))?.redirectToCheckout({sessionId:v.id})}),function(I){return f.apply(this,arguments)}),error:f=>{console.log(f),e._snackbarService.openSnackBar(f.error.error,"error"),e.isLoading=!1}})}else e.applyFullDiscount(l,_)})()}applyFullDiscount(o,n){const e=new FormData;e.append("pricingId",o),e.append("CoupounCode",n),this._itemService.directDiscount(e).subscribe({next:u=>{this.isLoading=!1,this._snackbarService.openSnackBar("Congratulations! You are subscribed the plan with 100% off!","success"),this._router.navigate(["/subscription"])},error:u=>{this.isLoading=!1,this._snackbarService.openSnackBar(u.error.Msg,"error"),console.log(u)}})}updateMySubscription(o){var e,n=this;this._itemService.updateMySubscription(o).subscribe({next:(e=(0,C.Z)(function*(u){n.isLoading=!1,n._snackbarService.openSnackBar("Congratulations! You have updated plan successfully!","success"),n._router.navigate(["/subscription"])}),function(l){return e.apply(this,arguments)}),error:e=>{console.log(e),this.isLoading=!1,this._snackbarService.openSnackBar("There is some error currently!","error")},complete:()=>{}})}getUserPackageData(){return new Promise((o,n)=>{const e=new Date,u=e.toISOString();let l="";var d;"monthly"===this.timelyPlan?l=new Date(e.setMonth(e.getMonth()+1)).toISOString():"yearly"===this.timelyPlan?l=new Date(e.setFullYear(e.getFullYear()+1)).toISOString():"fouryearly"===this.timelyPlan&&(l=new Date(e.setFullYear(e.getFullYear()+4)).toISOString()),this._itemService.create({[i.LI]:{id:this.selectedProductId,name:this.selectedPlanType,time:this.timelyPlan,price:this.selectedAmount,timestamp:u,expireDate:l}}).subscribe({next:(d=(0,C.Z)(function*(P){const _=P?.data?.[i.LI]?.id;o(_)}),function(_){return d.apply(this,arguments)}),error:d=>{console.log(d)},complete:()=>{}})})}showApplyCoupon(o){this.selectedDuration=o,this.isApplyCoupon=!this.isApplyCoupon}};let a=s;return s.\u0275fac=function(n){return new(n||s)(t.Y36(Y.e),t.Y36(J.e),t.Y36(g.qu),t.Y36(E.o),t.Y36(U.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["main-plan"]],inputs:{selectedPlan:"selectedPlan",planDetails:"planDetails"},decls:1,vars:1,consts:[["class","container-fluid",4,"ngIf"],[1,"container-fluid"],["class","loading",4,"ngIf"],[1,"row","mt-5","mx-auto"],[1,"col-md-12","mx-auto"],[1,"text-center","mb-3"],["class","col-md-6 mx-auto my-2 mb-3",4,"ngIf"],[1,"row"],["class","col-md-12 mx-auto mb-5 border rounded p-5 coupon-section",4,"ngIf"],["class","col-md-4 text-center mb-5",4,"ngFor","ngForOf"],[1,"loading"],[1,"loader","position-fixed"],[1,"col-md-6","mx-auto","my-2","mb-3"],["for","couponCodes",1,"form-label"],["id","couponCodes","required","",1,"form-select","py-2","shadow-none",3,"input"],["value","","selected","",1,"text-secondary"],[4,"ngFor","ngForOf"],[3,"value"],[1,"col-md-12","mx-auto","mb-5","border","rounded","p-5","coupon-section"],[1,"text-center","mb-4"],[1,"text-success","text-center"],[1,"text-center","mb-0"],[1,"col-md-4","text-center","mb-5"],["class","border-bottom border-dark pb-3 mb-4",4,"ngIf"],[1,"price-details"],["class","fw-bold",4,"ngIf"],[1,"btn-buy-now",3,"click"],[1,"material-symbols-outlined"],[1,"w-fit-content","buy_btn","mt-2"],["class","buy_text",3,"click",4,"ngIf"],[4,"ngIf"],["src","../assets/stripe-badge-transparent.png","alt","stripe secure badge",1,"img-fluid","px-4"],[1,"border-bottom","border-dark","pb-3","mb-4"],[1,"mb-0"],[1,"fw-bold"],[4,"ngIf","ngIfElse"],["regPrice",""],[1,"buy_text",3,"click"],[1,"mb-3","px-3",3,"formGroup","ngSubmit"],["couponFormId","ngForm"],[1,"input-group","mt-3"],["type","text","placeholder","COUPON CODE","required","","formControlName","coupon",1,"form-control","shadow-none","p-2",3,"input"],["class","btn btn-primary buy-btn","type","submit",4,"ngIf","ngIfElse"],["couponApplying",""],[1,"row","mt-2","mb-0","pb-0"],[1,"col-md-12","text-left"],["class","err_msg",4,"ngIf"],["class","my-3",4,"ngIf"],["type","submit",1,"btn","btn-primary","buy-btn"],[1,"btn","btn-primary","buy-btn","btn-disabled",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],[1,"err_msg"],[1,"my-3"],[1,"text-center","mb-0","fw-bold"]],template:function(n,e){1&n&&t.YNc(0,Pt,10,5,"div",0),2&n&&t.Q6J("ngIf",null==e.packagePlan?null:e.packagePlan[0])},dependencies:[x.sg,x.O5,g._Y,g.YN,g.Kr,g.Fj,g.JJ,g.JL,g.Q7,g.sg,g.u],styles:['.payment-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;list-style:none;position:relative}.payment-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\e86c";font-family:Material Symbols Outlined;display:block;position:absolute;right:100%;font-size:1.25rem;color:#0d6efd;margin-right:.75rem;top:5px}.price-details[_ngcontent-%COMP%]{padding:2rem 1rem;border-radius:.375rem;border:1px solid #ddd}.price-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#900}.btn-buy-now[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;font-size:2rem;color:#0b2447;padding:.5rem 2rem;margin:2rem auto 1rem;border:2px solid #aaa;border-radius:50px;box-shadow:0 2px 5px #09c;display:flex;align-items:center;gap:.5rem;transition:all .3s}.btn-buy-now[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:2.5rem;font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 24}.btn-buy-now[_ngcontent-%COMP%]:hover, .btn-buy-now[_ngcontent-%COMP%]:focus{transform:scale(1.05)}.coupon-section[_ngcontent-%COMP%]{background-color:#ffc2d6}.buy_btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:auto}.buy_btn[_ngcontent-%COMP%]   .buy_text[_ngcontent-%COMP%]{font-size:18px;color:#ff9472;font-weight:700;cursor:pointer;display:flex;gap:10px}.buy_btn[_ngcontent-%COMP%]   .buy_text[_ngcontent-%COMP%]:hover{border-bottom:2px solid #FF9472;transition:all ease-in-out .5s}.buy-btn[_ngcontent-%COMP%]{padding:10px;border-radius:0 5px 5px 0;display:flex;align-items:center;justify-content:center}']}),a})(),bt=(()=>{const s=class{constructor(o,n){this._itemService=o,this.authService=n,this.selectedPlan="Personal",this.productPriceInfo=r.O7,this.priceDurationLinkers=[],this.boomconsoleProducts=[],this.isProductDetailFetching=!0,this.isLoading=!1,this.isProductSelected=!1,this.selectedPlanType="Free",this.selectedProductId=0,this.timelyPlan="monthly",this.selectedAmount=1,this.totalPrice=1,this.stripePublishableKey=N.N.STRIPE_PUBLISHABLE_KEY}ngOnInit(){}getMySubscriptionPlan(){this._itemService.getMySubscription().subscribe({next:o=>{console.log("getMySubscriptionPlan response",o),this.mySubscription=o?.subscriptions?.[0]?.subscriptionId,console.log("subscriptionId",this.mySubscription)}})}packageDetails(){this.priceDurationLinkers=this.productPriceInfo.map(n=>`stripe_price_${n.value}ly_s`);const o=[{type:"internal_product",listLinkers:[`${r.G_}_s`,`${r.$t}_s`,`${r.Rs}_s`,`${r.qJ}_s`,`${r.Nq}_s`,`${r.Yt}_s`,`${r._j}_s`,`${r.aJ}_s`,`${r.r}_s`,`${r.nE}_s`,`${r.yh}_s`,`${r._C}_s`,`${r.Jl}_s`,`${r.e$}_s`,...this.priceDurationLinkers],inpage:100,page:1,logic:"or",filterSearches:[]}];this._itemService.listAllWithoutAuthWithLinker(o).subscribe({next:n=>{this.packageDetailsWithNewSystem=n,this.getBoomconsoleProductList()}})}getBoomconsoleProductList(){this.isProductDetailFetching=!0,this._itemService.listProductsWithFilter({typeKey:"type",serachKey:"Service"}).subscribe({next:n=>{this.boomconsoleProducts=n,this.boomconsoleProducts.sort((e,u)=>Number(e.data.internal_product.price)-Number(u.data.internal_product.price)),this.boomconsoleProducts=this.boomconsoleProducts.map((e,u)=>{const l=this.packageDetailsWithNewSystem?.filter(_=>_?.internal_product?.id===e?.id);let m=[],d=[];if(l&&Object.keys(l[0]?.internal_product).length>2){d=[];const _=l[0]?.internal_product?.[`internal_product_s_${r.G_}_s`],h=l[0]?.internal_product?.[`internal_product_s_${r.$t}_s`],y=l[0]?.internal_product?.[`internal_product_s_${r.Rs}_s`],b=l[0]?.internal_product?.[`internal_product_s_${r.qJ}_s`],f=l[0]?.internal_product?.[`internal_product_s_${r.Nq}_s`],v=l[0]?.internal_product?.[`internal_product_s_${r.Yt}_s`],I=l[0]?.internal_product?.[`internal_product_s_${r._j}_s`],D=l[0]?.internal_product?.[`internal_product_s_${r.aJ}_s`],M=l?.[0]?.internal_product?.[`internal_product_s_${r.r}_s`],A=l[0]?.internal_product?.[`internal_product_s_${r.nE}_s`],T=l[0]?.internal_product?.[`internal_product_s_${r.yh}_s`],S=l[0]?.internal_product?.[`internal_product_s_${r._C}_s`],O=l[0]?.internal_product?.[`internal_product_s_${r.Jl}_s`],$=l[0]?.internal_product?.[`internal_product_s_${r.e$}_s`];m=this.priceDurationLinkers.map(Q=>l[0]?.internal_product?.[`internal_product_s_${Q}`]?.[0]?.pricingData?.data),_&&_?.[0]?.[i.DI]?.data?.limit&&d.push({id:1,detail:_?.[0]?.[i.DI]?.data?.limit+" "+_[0]?.[i.DI]?.data?.details}),h&&h?.[0]?.[i.FK]?.data?.limit&&d.push({id:2,detail:h?.[0]?.[i.FK]?.data?.limit+" "+h[0]?.[i.FK]?.data?.details}),console.log("productContact?.[0]?.[productContactsComposition]?.data?.limit",y?.[0]?.[i.eA]?.data?.limit),y&&y?.[0]?.[i.eA]?.data?.limit&&d.push({id:3,detail:y?.[0]?.[i.eA]?.data?.limit+" "+y[0]?.[i.eA]?.data?.details}),b&&b?.[0]?.[i.UB]?.data?.limit&&d.push({id:4,detail:b?.[0]?.[i.UB]?.data?.limit+" "+b[0]?.[i.UB]?.data?.details}),f&&f?.[0]?.[i.Ri]?.data?.limit&&d.push({id:5,detail:f?.[0]?.[i.Ri]?.data?.limit+" "+f[0]?.[i.Ri]?.data?.details}),v&&v?.[0]?.[i.Os]?.data?.limit&&d.push({id:6,detail:v?.[0]?.[i.Os]?.data?.limit+" "+v[0]?.[i.Os]?.data?.details}),I&&I?.[0]?.[i.xz]?.data?.limit&&d.push({id:7,detail:I?.[0]?.[i.xz]?.data?.limit+" "+I[0]?.[i.xz]?.data?.details}),D&&D?.[0]?.[i.aK]?.data?.limit&&d.push({id:8,detail:D?.[0]?.[i.aK]?.data?.limit+" "+D[0]?.[i.aK]?.data?.details}),M&&M?.[0]?.[i.s$]?.data?.limit&&d.push({id:8,detail:M?.[0]?.[i.s$]?.data?.limit+" "+M[0]?.[i.s$]?.data?.details}),A&&A?.[0]?.[i.Nd]?.data?.limit&&d.push({id:9,detail:A?.[0]?.[i.Nd]?.data?.limit+" "+A[0]?.[i.Nd]?.data?.details}),T&&T?.[0]?.[i.JQ]?.data?.limit&&d.push({id:10,detail:T?.[0]?.[i.JQ]?.data?.limit+" "+T[0]?.[i.JQ]?.data?.details}),S&&S?.[0]?.[i.n5]?.data?.limit&&d.push({id:11,detail:S?.[0]?.[i.n5]?.data?.limit+" "+S[0]?.[i.n5]?.data?.details}),O&&O?.[0]?.[i.$W]?.data?.limit&&d.push({id:12,detail:O?.[0]?.[i.$W]?.data?.limit+" "+O[0]?.[i.$W]?.data?.details}),$&&$?.[0]?.[i.sU]?.data?.limit&&d.push({id:13,detail:$?.[0]?.[i.sU]?.data?.limit+" "+$[0]?.[i.sU]?.data?.details})}return 0==e?.data?.internal_product?.price&&(e.id=0),{id:e?.id,name:e?.data?.internal_product?.name,price:m,class:`subscription-${u}`,features:d,remainingStock:e?.data?.internal_product?.internal_product_s_inventory_s?.[0]?.internal_inventory?.quantity}}),console.log("this.boomconsoleProducts",this.boomconsoleProducts),this.packagePlan=this.boomconsoleProducts.filter(e=>"Personal"===e?.name),console.log("personalPlan",this.packagePlan),this.isProductDetailFetching=!1},error:n=>{console.log("err")},complete:()=>{}})}makePayment(o,n){var e=this;return(0,C.Z)(function*(){e.isLoading=!0,e.isProductSelected=!1,e.selectedPlanType=n.name,e.selectedProductId=n.id,e.timelyPlan=o;const u=n?.price?.filter(m=>m?.duration+"ly"==o+"ly");console.log("selectedPlanTime",u),e.selectedAmount=Number(u?.[0]?.price),e.totalPrice=Number(u?.[0]?.price);const l=u?.[0]?.trialDays;if(e.mySubscriptionId)e.updateMySubscription({subscriptionId:e.mySubscription,pricingId:u?.[0]?.pricingId});else{const m=yield e.getUserPackageData(),d=window.location.origin+"/subscription";e._itemService.createCheckoutSession({successUrl:`${d}`,cancelUrl:`${d}`,mode:"subscription",trialDays:l,prices:[{pricingData:u?.[0]?.pricingId,quantity:1}],MakeLinks:[{linker:"get_package",FromId:e.userConceptId,ToId:m,both:!0,count:!0},{FromId:m,linker:"package_product",ToId:e.selectedProductId,both:!0,count:!0}]}).subscribe({next:(_=(0,C.Z)(function*(h){e.isLoading=!1,(yield(0,L.J)(e.stripePublishableKey))?.redirectToCheckout({sessionId:h.id})}),function(y){return _.apply(this,arguments)}),error:_=>{console.log(_)}})}var _})()}updateMySubscription(o){var n;this._itemService.updateMySubscription(o).subscribe({next:(n=(0,C.Z)(function*(e){console.log("updateMySubscription response",e)}),function(u){return n.apply(this,arguments)}),error:n=>{console.log(n)},complete:()=>{}})}getUserPackageData(){return new Promise((o,n)=>{const e=new Date,u=e.toISOString();let l="";var d;"monthly"===this.timelyPlan?l=new Date(e.setMonth(e.getMonth()+1)).toISOString():"yearly"===this.timelyPlan&&(l=new Date(e.setFullYear(e.getFullYear()+1)).toISOString()),this._itemService.create({[i.LI]:{id:this.selectedProductId,name:this.selectedPlanType,time:this.timelyPlan,price:this.selectedAmount,timestamp:u,expireDate:l}}).subscribe({next:(d=(0,C.Z)(function*(P){const _=P?.data?.[i.LI]?.id;o(_)}),function(_){return d.apply(this,arguments)}),error:d=>{console.log(d)},complete:()=>{}})})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(t.Y36(Y.e),t.Y36(J.e))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-plan-personal"]],decls:1,vars:1,consts:[[3,"selectedPlan","planDetails"]],template:function(n,e){1&n&&t._UZ(0,"main-plan",0),2&n&&t.Q6J("selectedPlan",e.selectedPlan)},dependencies:[ct],styles:['.payment-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;list-style:none;position:relative}.payment-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\e86c";font-family:Material Symbols Outlined;display:block;position:absolute;right:100%;font-size:1.25rem;color:#0d6efd;margin-right:.75rem;top:5px}.price-details[_ngcontent-%COMP%]{padding:2rem 1rem;border-radius:.375rem;border:1px solid #ddd}.price-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#900}.btn-buy-now[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;font-size:2rem;color:#0b2447;padding:.5rem 2rem;margin:2rem auto 1rem;border:2px solid #aaa;border-radius:50px;box-shadow:0 2px 5px #09c;display:flex;align-items:center;gap:.5rem;transition:all .3s}.btn-buy-now[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:2.5rem;font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 24}.btn-buy-now[_ngcontent-%COMP%]:hover, .btn-buy-now[_ngcontent-%COMP%]:focus{transform:scale(1.05)}']}),a})(),Ct=(()=>{const s=class{constructor(o,n){this._itemService=o,this.authService=n,this.selectedPlan="Personalized",this.planDetailList="\n    <p>Upgrade your online productivity with BoomConsole's Personal Plan, tailored for students, educators, and professionals alike.</p>\n    <p>Effortlessly organize your AI chats, contacts, web pages, and more through an intuitive drag-and-drop interface.</p>\n    <p>Maximize your research efficiency and start your journey with BoomConsole's Personal Plan today.</p>\n  ",this.productPriceInfo=r.O7,this.priceDurationLinkers=[],this.boomconsoleProducts=[],this.isProductDetailFetching=!0,this.isLoading=!1,this.isProductSelected=!1,this.selectedPlanType="Free",this.selectedProductId=0,this.timelyPlan="monthly",this.selectedAmount=1,this.totalPrice=1,this.stripePublishableKey=N.N.STRIPE_PUBLISHABLE_KEY}ngOnInit(){}getMySubscriptionPlan(){this._itemService.getMySubscription().subscribe({next:o=>{console.log("getMySubscriptionPlan response",o),this.mySubscription=o?.subscriptions?.[0]?.subscriptionId,console.log("subscriptionId",this.mySubscription)}})}packageDetails(){this.priceDurationLinkers=this.productPriceInfo.map(n=>`stripe_price_${n.value}ly_s`);const o=[{type:"internal_product",listLinkers:[`${r.G_}_s`,`${r.$t}_s`,`${r.Rs}_s`,`${r.qJ}_s`,`${r.Nq}_s`,`${r.Yt}_s`,`${r._j}_s`,`${r.aJ}_s`,`${r.r}_s`,`${r.nE}_s`,`${r.yh}_s`,`${r._C}_s`,`${r.Jl}_s`,`${r.e$}_s`,...this.priceDurationLinkers],inpage:100,page:1,logic:"or",filterSearches:[]}];this._itemService.listAllWithoutAuthWithLinker(o).subscribe({next:n=>{this.packageDetailsWithNewSystem=n,this.getBoomconsoleProductList()}})}getBoomconsoleProductList(){this.isProductDetailFetching=!0,this._itemService.listProductsWithFilter({typeKey:"type",serachKey:"Service"}).subscribe({next:n=>{this.boomconsoleProducts=n,this.boomconsoleProducts.sort((e,u)=>Number(e.data.internal_product.price)-Number(u.data.internal_product.price)),this.boomconsoleProducts=this.boomconsoleProducts.map((e,u)=>{const l=this.packageDetailsWithNewSystem?.filter(_=>_?.internal_product?.id===e?.id);let m=[],d=[];if(l&&Object.keys(l[0]?.internal_product).length>2){d=[];const _=l[0]?.internal_product?.[`internal_product_s_${r.G_}_s`],h=l[0]?.internal_product?.[`internal_product_s_${r.$t}_s`],y=l[0]?.internal_product?.[`internal_product_s_${r.Rs}_s`],b=l[0]?.internal_product?.[`internal_product_s_${r.qJ}_s`],f=l[0]?.internal_product?.[`internal_product_s_${r.Nq}_s`],v=l[0]?.internal_product?.[`internal_product_s_${r.Yt}_s`],I=l[0]?.internal_product?.[`internal_product_s_${r._j}_s`],D=l[0]?.internal_product?.[`internal_product_s_${r.aJ}_s`],M=l?.[0]?.internal_product?.[`internal_product_s_${r.r}_s`],A=l[0]?.internal_product?.[`internal_product_s_${r.nE}_s`],T=l[0]?.internal_product?.[`internal_product_s_${r.yh}_s`],S=l[0]?.internal_product?.[`internal_product_s_${r._C}_s`],O=l[0]?.internal_product?.[`internal_product_s_${r.Jl}_s`],$=l[0]?.internal_product?.[`internal_product_s_${r.e$}_s`];m=this.priceDurationLinkers.map(Q=>l[0]?.internal_product?.[`internal_product_s_${Q}`]?.[0]?.pricingData?.data),_&&_?.[0]?.[i.DI]?.data?.limit&&d.push({id:1,detail:_?.[0]?.[i.DI]?.data?.limit+" "+_[0]?.[i.DI]?.data?.details}),h&&h?.[0]?.[i.FK]?.data?.limit&&d.push({id:2,detail:h?.[0]?.[i.FK]?.data?.limit+" "+h[0]?.[i.FK]?.data?.details}),console.log("productContact?.[0]?.[productContactsComposition]?.data?.limit",y?.[0]?.[i.eA]?.data?.limit),y&&y?.[0]?.[i.eA]?.data?.limit&&d.push({id:3,detail:y?.[0]?.[i.eA]?.data?.limit+" "+y[0]?.[i.eA]?.data?.details}),b&&b?.[0]?.[i.UB]?.data?.limit&&d.push({id:4,detail:b?.[0]?.[i.UB]?.data?.limit+" "+b[0]?.[i.UB]?.data?.details}),f&&f?.[0]?.[i.Ri]?.data?.limit&&d.push({id:5,detail:f?.[0]?.[i.Ri]?.data?.limit+" "+f[0]?.[i.Ri]?.data?.details}),v&&v?.[0]?.[i.Os]?.data?.limit&&d.push({id:6,detail:v?.[0]?.[i.Os]?.data?.limit+" "+v[0]?.[i.Os]?.data?.details}),I&&I?.[0]?.[i.xz]?.data?.limit&&d.push({id:7,detail:I?.[0]?.[i.xz]?.data?.limit+" "+I[0]?.[i.xz]?.data?.details}),D&&D?.[0]?.[i.aK]?.data?.limit&&d.push({id:8,detail:D?.[0]?.[i.aK]?.data?.limit+" "+D[0]?.[i.aK]?.data?.details}),M&&M?.[0]?.[i.s$]?.data?.limit&&d.push({id:8,detail:M?.[0]?.[i.s$]?.data?.limit+" "+M[0]?.[i.s$]?.data?.details}),A&&A?.[0]?.[i.Nd]?.data?.limit&&d.push({id:9,detail:A?.[0]?.[i.Nd]?.data?.limit+" "+A[0]?.[i.Nd]?.data?.details}),T&&T?.[0]?.[i.JQ]?.data?.limit&&d.push({id:10,detail:T?.[0]?.[i.JQ]?.data?.limit+" "+T[0]?.[i.JQ]?.data?.details}),S&&S?.[0]?.[i.n5]?.data?.limit&&d.push({id:11,detail:S?.[0]?.[i.n5]?.data?.limit+" "+S[0]?.[i.n5]?.data?.details}),O&&O?.[0]?.[i.$W]?.data?.limit&&d.push({id:12,detail:O?.[0]?.[i.$W]?.data?.limit+" "+O[0]?.[i.$W]?.data?.details}),$&&$?.[0]?.[i.sU]?.data?.limit&&d.push({id:13,detail:$?.[0]?.[i.sU]?.data?.limit+" "+$[0]?.[i.sU]?.data?.details})}return 0==e?.data?.internal_product?.price&&(e.id=0),{id:e?.id,name:e?.data?.internal_product?.name,price:m,class:`subscription-${u}`,features:d,remainingStock:e?.data?.internal_product?.internal_product_s_inventory_s?.[0]?.internal_inventory?.quantity}}),console.log("this.boomconsoleProducts",this.boomconsoleProducts),this.packagePlan=this.boomconsoleProducts.filter(e=>"Professional"===e?.name),console.log("personalPlan",this.packagePlan),this.isProductDetailFetching=!1},error:n=>{console.log("err")},complete:()=>{}})}makePayment(o,n){var e=this;return(0,C.Z)(function*(){e.isLoading=!0,e.isProductSelected=!1,e.selectedPlanType=n.name,e.selectedProductId=n.id,e.timelyPlan=o;const u=n?.price?.filter(m=>m?.duration+"ly"==o+"ly");console.log("selectedPlanTime",u),e.selectedAmount=Number(u?.[0]?.price),e.totalPrice=Number(u?.[0]?.price);const l=u?.[0]?.trialDays;if(e.mySubscriptionId)e.updateMySubscription({subscriptionId:e.mySubscription,pricingId:u?.[0]?.pricingId});else{const m=yield e.getUserPackageData(),d=window.location.origin+"/subscription";e._itemService.createCheckoutSession({successUrl:`${d}`,cancelUrl:`${d}`,mode:"subscription",trialDays:l,prices:[{pricingData:u?.[0]?.pricingId,quantity:1}],MakeLinks:[{linker:"get_package",FromId:e.userConceptId,ToId:m,both:!0,count:!0},{FromId:m,linker:"package_product",ToId:e.selectedProductId,both:!0,count:!0}]}).subscribe({next:(_=(0,C.Z)(function*(h){e.isLoading=!1,(yield(0,L.J)(e.stripePublishableKey))?.redirectToCheckout({sessionId:h.id})}),function(y){return _.apply(this,arguments)}),error:_=>{console.log(_)}})}var _})()}updateMySubscription(o){var n;this._itemService.updateMySubscription(o).subscribe({next:(n=(0,C.Z)(function*(e){console.log("updateMySubscription response",e)}),function(u){return n.apply(this,arguments)}),error:n=>{console.log(n)},complete:()=>{}})}getUserPackageData(){return new Promise((o,n)=>{const e=new Date,u=e.toISOString();let l="";var d;"monthly"===this.timelyPlan?l=new Date(e.setMonth(e.getMonth()+1)).toISOString():"yearly"===this.timelyPlan&&(l=new Date(e.setFullYear(e.getFullYear()+1)).toISOString()),this._itemService.create({[i.LI]:{id:this.selectedProductId,name:this.selectedPlanType,time:this.timelyPlan,price:this.selectedAmount,timestamp:u,expireDate:l}}).subscribe({next:(d=(0,C.Z)(function*(P){const _=P?.data?.[i.LI]?.id;o(_)}),function(_){return d.apply(this,arguments)}),error:d=>{console.log(d)},complete:()=>{}})})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(t.Y36(Y.e),t.Y36(J.e))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-plan-pro"]],decls:1,vars:2,consts:[[3,"selectedPlan","planDetails"]],template:function(n,e){1&n&&t._UZ(0,"main-plan",0),2&n&&t.Q6J("selectedPlan",e.selectedPlan)("planDetails",e.planDetailList)},dependencies:[ct],styles:['.payment-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;list-style:none;position:relative}.payment-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\e86c";font-family:Material Symbols Outlined;display:block;position:absolute;right:100%;font-size:1.25rem;color:#0d6efd;margin-right:.75rem;top:5px}.price-details[_ngcontent-%COMP%]{padding:2rem 1rem;border-radius:.375rem;border:1px solid #ddd}.price-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#900}.btn-buy-now[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;font-size:2rem;color:#0b2447;padding:.5rem 2rem;margin:2rem auto 1rem;border:2px solid #aaa;border-radius:50px;box-shadow:0 2px 5px #09c;display:flex;align-items:center;gap:.5rem;transition:all .3s}.btn-buy-now[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:2.5rem;font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 24}.btn-buy-now[_ngcontent-%COMP%]:hover, .btn-buy-now[_ngcontent-%COMP%]:focus{transform:scale(1.05)}']}),a})(),vt=(()=>{const s=class{};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-thank-you-subscription"]],decls:13,vars:0,consts:[[1,"containerr"],[1,"row"],[1,"col-md-12","pt-5","mt-5"],[1,"thank-msg"],[1,"material-symbols-outlined"],[1,"row","mx-1"],[1,"col-md-3","mx-auto"],["src","./assets/boomcosole-wide-logo.png","alt","boomconsole logo",1,"img-fluid"],[1,"mb-4"],["routerLink","/captures",1,"btn","btn-primary"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5," task_alt "),t.qZA(),t.TgZ(6,"div",5)(7,"div",6),t._UZ(8,"img",7),t.qZA()(),t.TgZ(9,"h1",8),t._uU(10,"Thank you for your subscription!"),t.qZA(),t.TgZ(11,"button",9),t._uU(12,"Explore Boomconsole"),t.qZA()()()()())},dependencies:[U.rH],styles:[".thank-container[_ngcontent-%COMP%]{height:calc(100vh - 80px);display:flex;align-items:center;justify-content:center}.thank-msg[_ngcontent-%COMP%]{text-align:center}.thank-msg[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]{font-size:3.5rem;color:#39bc63}"]}),a})();const xt=["WidgetPlaceholder"];function It(a,s){1&a&&(t.TgZ(0,"div",3),t._UZ(1,"div",4),t.qZA())}let Dt=(()=>{const s=class{constructor(){this.loading=!1,this.widget_id=103749825,this.is_logged_in=!1}ngAfterViewInit(){setTimeout(()=>{this.loading=!0,(0,w.FtU)(this.widget_id,this.widgetPlaceholder.nativeElement).then(()=>{this.loading=!1})},0)}};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-pricing"]],viewQuery:function(n,e){if(1&n&&t.Gf(xt,5),2&n){let u;t.iGM(u=t.CRH())&&(e.widgetPlaceholder=u.first)}},decls:3,vars:1,consts:[["class","loading",4,"ngIf"],[1,"widget-placeholder"],["WidgetPlaceholder",""],[1,"loading"],[1,"loader"]],template:function(n,e){1&n&&(t.YNc(0,It,2,0,"div",0),t._UZ(1,"div",1,2)),2&n&&t.Q6J("ngIf",e.loading)}}),a})();var j=p(3870),rt=p(9805);const Mt=["WidgetPlaceholder"];function At(a,s){1&a&&(t.TgZ(0,"div",3),t._UZ(1,"div",4),t.qZA())}const St=["WidgetPlaceholder"];function Ot(a,s){1&a&&(t.TgZ(0,"div",3),t._UZ(1,"div",4),t.qZA())}const Zt=[{component:Dt,path:"subscription"},{path:"subscription/personal",component:bt,canActivate:[j.a,rt.p]},{path:"subscription/personalized",component:Ct,canActivate:[j.a,rt.p]},{path:"subscription/thankyou",component:vt,canActivate:[j.a,rt.p]},{path:"payment-selection",component:(()=>{const s=class{constructor(){this.loading=!1,this.widget_id=103748454,this.is_logged_in=!1}ngAfterViewInit(){setTimeout(()=>{this.loading=!0,(0,w.FtU)(this.widget_id,this.widgetPlaceholder.nativeElement).then(()=>{this.loading=!1})},0)}};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-payment-selection"]],viewQuery:function(n,e){if(1&n&&t.Gf(Mt,5),2&n){let u;t.iGM(u=t.CRH())&&(e.widgetPlaceholder=u.first)}},decls:3,vars:1,consts:[["class","loading",4,"ngIf"],[1,"widget-placeholder"],["WidgetPlaceholder",""],[1,"loading"],[1,"loader"]],template:function(n,e){1&n&&(t.YNc(0,At,2,0,"div",0),t._UZ(1,"div",1,2)),2&n&&t.Q6J("ngIf",e.loading)}}),a})()},{path:"token-checkout",component:(()=>{const s=class{constructor(){this.loading=!1,this.widget_id=103749062,this.is_logged_in=!1}ngAfterViewInit(){setTimeout(()=>{this.loading=!0,(0,w.FtU)(this.widget_id,this.widgetPlaceholder.nativeElement).then(()=>{this.loading=!1})},0)}};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-token-checkout"]],viewQuery:function(n,e){if(1&n&&t.Gf(St,5),2&n){let u;t.iGM(u=t.CRH())&&(e.widgetPlaceholder=u.first)}},decls:3,vars:1,consts:[["class","loading",4,"ngIf"],[1,"widget-placeholder"],["WidgetPlaceholder",""],[1,"loading"],[1,"loader"]],template:function(n,e){1&n&&(t.YNc(0,Ot,2,0,"div",0),t._UZ(1,"div",1,2)),2&n&&t.Q6J("ngIf",e.loading)}}),a})(),canActivate:[j.a]}];let Ut=(()=>{const s=class{};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[U.Bz.forChild(Zt),U.Bz]}),a})();var wt=p(9653),Ft=p(493),Et=p(8211),kt=p(7746);let Lt=(()=>{const s=class{};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[x.ez,Ut,g.u5,g.UX,wt.Aw.forFeature("mySubscription",kt.k),Ft.sQ.forFeature([Et.g])]}),a})()}}]);