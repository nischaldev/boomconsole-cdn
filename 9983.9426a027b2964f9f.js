(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[9983],{4954:(Jn,Wn,St)=>{"use strict";St.d(Wn,{$:()=>Ge});var at=St(4650),Zt=St(9446);let Ge=(()=>{const rt=class{constructor(X){this._activeModal=X,this.slides=[],this.currentSlideUrl="",this.i=0}ngOnInit(){this.slides=this.imageUrl||[],this.slides.length>0&&(this.currentSlideUrl=this.slides[this.i]?.url||this.slides[this.i]?.path)}showSlide(X){this.slides&&this.slides.length>0&&X>=0&&X<this.slides.length&&(this.currentSlideUrl=this.slides[X].url||this.slides[X].path)}getPrev(){this.i>0&&(this.i=this.i-1),this.showSlide(this.i)}getNext(){this.i<this.slides.length-1&&(this.i=this.i+1),this.showSlide(this.i)}handleKeyboardEvent(X){"ArrowLeft"===X.key?this.getPrev():"ArrowRight"===X.key&&this.getNext()}};let Wt=rt;return rt.\u0275fac=function(Ct){return new(Ct||rt)(at.Y36(Zt.Kz))},rt.\u0275cmp=at.Xpm({type:rt,selectors:[["app-full-image-preview"]],hostBindings:function(Ct,Rt){1&Ct&&at.NdJ("keydown",function(be){return Rt.handleKeyboardEvent(be)},!1,at.Jf7)},inputs:{imageUrl:"imageUrl",i:"i"},decls:15,vars:3,consts:[["type","button","aria-label","Close",1,"btn-close",3,"click"],["id","carouselExampleControls",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","slide",1,"d-block","w-100",3,"src"],["role","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["role","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"carousel-index"]],template:function(Ct,Rt){1&Ct&&(at.TgZ(0,"button",0),at.NdJ("click",function(){return Rt._activeModal.dismiss()}),at.qZA(),at.TgZ(1,"div",1)(2,"div",2)(3,"div",3),at._UZ(4,"img",4),at.qZA()(),at.TgZ(5,"a",5),at.NdJ("click",function(){return Rt.getPrev()}),at._UZ(6,"span",6),at.TgZ(7,"span",7),at._uU(8,"Previous"),at.qZA()(),at.TgZ(9,"a",8),at.NdJ("click",function(){return Rt.getNext()}),at._UZ(10,"span",9),at.TgZ(11,"span",7),at._uU(12,"Next"),at.qZA()(),at.TgZ(13,"div",10),at._uU(14),at.qZA()()),2&Ct&&(at.xp6(4),at.Q6J("src",Rt.currentSlideUrl,at.LSH),at.xp6(10),at.AsE("",Rt.i+1," / ",Rt.slides.length,""))},styles:[".btn-close[_ngcontent-%COMP%]{position:absolute;right:-10px;z-index:999;top:-10px;background-color:#fff;border-radius:50%;padding:8px;opacity:1;box-shadow:0 3px 3px #0000004d}#carouselExampleControls[_ngcontent-%COMP%]{position:relative;width:100%;max-width:800px;margin:auto}.carousel-inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%]{position:absolute;top:50%;width:5%;height:50px;background-color:#00000080;color:#fff;border:none;border-radius:50%;transform:translateY(-50%);display:flex;align-items:center;justify-content:center}.carousel-control-prev[_ngcontent-%COMP%]{left:10px}.carousel-control-next[_ngcontent-%COMP%]{right:10px}.carousel-control-prev-icon[_ngcontent-%COMP%], .carousel-control-next-icon[_ngcontent-%COMP%]{background-size:100%,100%;background-repeat:no-repeat;background-position:center}.carousel-index[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:50%;transform:translate(-50%);background-color:#00000080;color:#fff;padding:5px 10px;border-radius:5px}"]}),Wt})()},3139:(Jn,Wn,St)=>{"use strict";St.d(Wn,{f:()=>Kt});var at=St(5861),Zt=St(9808),Ge=St(6251),Wt=St(7899),rt=St(4006),xt=St(6636),X=St.n(xt),Ct=St(2340),Rt=St(9402),$=St(4650),be=St(7518),Q=St(9446),Bt=St(7009),it=St(384),bt=St(8154),Lt=St(8180),qe=St(4383),oe=St(1685),ee=St(6895);function Ce(Pe,_t){1&Pe&&($.TgZ(0,"div",18),$._UZ(1,"span",19),$.qZA())}function le(Pe,_t){if(1&Pe&&($.TgZ(0,"div",20)(1,"p",21),$._uU(2),$.TgZ(3,"a",22),$._uU(4,"here"),$.qZA(),$._uU(5,". "),$.qZA()()),2&Pe){const et=$.oxw(2);$.xp6(2),$.hij(" Your quota for uploading file ",null==et.uploadFilesInfo?null:et.uploadFilesInfo.limit," has exceeded. Please upgrade your plan "),$.xp6(1),$.Q6J("routerLink","/subscription")}}function de(Pe,_t){if(1&Pe&&$._UZ(0,"img",38),2&Pe){const et=$.oxw(2).$implicit;$.Q6J("src",et.preview,$.LSH)}}function he(Pe,_t){if(1&Pe&&($.TgZ(0,"a",36),$.YNc(1,de,1,1,"img",37),$.qZA()),2&Pe){const et=$.oxw().$implicit;$.Q6J("href",et.url,$.LSH),$.xp6(1),$.Q6J("ngIf",et.preview)}}function ce(Pe,_t){1&Pe&&($.TgZ(0,"span"),$._uU(1,"\u2022 Uploading..."),$.qZA())}function Be(Pe,_t){1&Pe&&($.TgZ(0,"span"),$._uU(1,"\u2022 Uploaded"),$.qZA())}function $e(Pe,_t){if(1&Pe&&($.TgZ(0,"span"),$._uU(1),$.qZA()),2&Pe){const et=$.oxw().$implicit;$.xp6(1),$.hij("\u2022 Error: ",et.error,"")}}function st(Pe,_t){if(1&Pe&&($.TgZ(0,"a",39),$._uU(1,"Open"),$.qZA()),2&Pe){const et=$.oxw().$implicit;$.Q6J("href",et.url,$.LSH)}}function ae(Pe,_t){if(1&Pe){const et=$.EpF();$.TgZ(0,"div",25),$.YNc(1,he,2,2,"a",26),$.TgZ(2,"div",27)(3,"span",28),$._uU(4),$.qZA(),$.TgZ(5,"div",29)(6,"div",30),$._uU(7),$.qZA(),$.TgZ(8,"div",31),$._uU(9),$.YNc(10,ce,2,0,"span",32),$.YNc(11,Be,2,0,"span",32),$.YNc(12,$e,2,1,"span",32),$.qZA()(),$.TgZ(13,"div",33),$.YNc(14,st,2,1,"a",34),$.TgZ(15,"button",35),$.NdJ("click",function(){const Ft=$.CHM(et).index,on=$.oxw(3);return $.KtG(on.removeFile(Ft))}),$._uU(16," Remove "),$.qZA()()()()}if(2&Pe){const et=_t.$implicit,ye=$.oxw(3);$.xp6(1),$.Q6J("ngIf",et.url&&ye.isImageExtension(et.extension)),$.xp6(3),$.Oqu(ye.getFileIconFromExtension(et.extension)),$.xp6(2),$.s9C("title",et.file.name),$.xp6(1),$.hij(" ",et.file.name," "),$.xp6(2),$.hij(" ",ye.formatFileSize(et.file.size)," "),$.xp6(1),$.Q6J("ngIf","uploading"===et.status),$.xp6(1),$.Q6J("ngIf","done"===et.status),$.xp6(1),$.Q6J("ngIf","error"===et.status),$.xp6(2),$.Q6J("ngIf",et.url)}}function je(Pe,_t){if(1&Pe&&($.TgZ(0,"div",23),$.YNc(1,ae,17,9,"div",24),$.qZA()),2&Pe){const et=$.oxw(2);$.xp6(1),$.Q6J("ngForOf",et.uploadedFiles)}}function Ze(Pe,_t){if(1&Pe){const et=$.EpF();$.TgZ(0,"div",4)(1,"h2",5),$._uU(2,"Upload to Folder"),$.qZA(),$.TgZ(3,"div",6)(4,"label",7),$._uU(5,"Document(s)"),$.qZA(),$.YNc(6,Ce,2,0,"div",8),$.TgZ(7,"div",9)(8,"input",10),$.NdJ("change",function(Ee){$.CHM(et);const Ft=$.oxw();return $.KtG(Ft.uploadAttachments(Ee))}),$.qZA()(),$.YNc(9,le,6,2,"div",11),$.qZA(),$.YNc(10,je,2,1,"div",12),$.TgZ(11,"div",6)(12,"label",13),$._uU(13,"Description"),$.qZA(),$.TgZ(14,"textarea",14),$.NdJ("keyup",function(Ee){$.CHM(et);const Ft=$.oxw();return $.KtG(Ft.handleDescriptionChange(Ee))}),$.qZA()(),$.TgZ(15,"div",15)(16,"button",16),$.NdJ("click",function(){$.CHM(et);const Ee=$.oxw();return $.KtG(Ee.saveUploadedCaptures())}),$._uU(17," Save Data "),$.qZA(),$.TgZ(18,"button",17),$.NdJ("click",function(){$.CHM(et);const Ee=$.oxw();return $.KtG(Ee._activeModal.close())}),$._uU(19," Close "),$.qZA()()()}if(2&Pe){const et=$.oxw();$.xp6(6),$.Q6J("ngIf",et.uploadLoader),$.xp6(3),$.Q6J("ngIf",!et.isAllowedToUploadFile),$.xp6(1),$.Q6J("ngIf",et.uploadedFiles&&et.uploadedFiles.length>0),$.xp6(6),$.Q6J("disabled",et.uploadLoader||et.loader||!et.isAllowedToUploadFile||!et.hasAnyUploadedFiles())}}function Xe(Pe,_t){1&Pe&&($.TgZ(0,"div",18),$._UZ(1,"span",19),$.qZA())}function vt(Pe,_t){1&Pe&&($.TgZ(0,"div",18),$._UZ(1,"span",19),$.qZA())}function Pt(Pe,_t){1&Pe&&($.TgZ(0,"div",48),$._uU(1," Document name is required. "),$.qZA())}function It(Pe,_t){1&Pe&&($.TgZ(0,"div",48),$._uU(1," Document name cannot be longer than 10 characters. "),$.qZA())}const yt=function(Pe,_t,et){return{"ng-untouched":Pe,"ng-pristine":_t,"ng-invalid":et}};function Et(Pe,_t){if(1&Pe){const et=$.EpF();$.TgZ(0,"input",46),$.NdJ("change",function(Ee){$.CHM(et);const Ft=$.oxw(3);return $.KtG(Ft.handleFileNameChange(Ee))}),$.qZA(),$.YNc(1,Pt,2,0,"div",47),$.YNc(2,It,2,0,"div",47)}if(2&Pe){const et=$.oxw(3);let ye,Ee,Ft;$.Q6J("ngClass",$.kEZ(3,yt,null==(ye=et.myForm.get("documentName"))?null:ye.untouched,null==(ye=et.myForm.get("documentName"))?null:ye.pristine,(null==(ye=et.myForm.get("documentName"))?null:ye.invalid)&&(null==(ye=et.myForm.get("documentName"))?null:ye.touched))),$.xp6(1),$.Q6J("ngIf",(null==(Ee=et.myForm.get("documentName"))?null:Ee.hasError("required"))&&(null==(Ee=et.myForm.get("documentName"))?null:Ee.touched)),$.xp6(1),$.Q6J("ngIf",(null==(Ft=et.myForm.get("documentName"))?null:Ft.hasError("maxlength"))&&(null==(Ft=et.myForm.get("documentName"))?null:Ft.touched))}}function Qt(Pe,_t){if(1&Pe&&($.TgZ(0,"div",6)(1,"label",7),$._uU(2,"Document Name"),$.qZA(),$.YNc(3,Xe,2,0,"div",44),$.YNc(4,vt,2,0,"div",8),$.YNc(5,Et,3,7,"ng-template",null,45,$.W1O),$.qZA()),2&Pe){const et=$.MAs(6),ye=$.oxw(2);$.xp6(3),$.Q6J("ngIf",ye.uploadLoader)("ngIfElse",et),$.xp6(1),$.Q6J("ngIf",ye.loader)}}function Yt(Pe,_t){if(1&Pe){const et=$.EpF();$.TgZ(0,"button",16),$.NdJ("click",function(Ee){$.CHM(et);const Ft=$.oxw(2);return $.KtG(Ft.saveDocument(Ee))}),$._uU(1," Save Data "),$.qZA()}if(2&Pe){const et=$.oxw(2);$.Q6J("disabled",et.isSaving||et.uploadLoader||et.loader||!et.isAllowedToUploadFile)}}function Vt(Pe,_t){if(1&Pe){const et=$.EpF();$.TgZ(0,"button",16),$.NdJ("click",function(){$.CHM(et);const Ee=$.oxw(3);return $.KtG(Ee.updateDocument())}),$._uU(1," Update Data "),$.qZA()}if(2&Pe){const et=$.oxw(3);$.Q6J("disabled",et.uploadLoader||et.loader||!et.isAllowedToUploadFile)}}function nn(Pe,_t){if(1&Pe&&$.YNc(0,Vt,2,1,"button",49),2&Pe){const et=$.oxw(2);$.Q6J("ngIf",et.documentId)}}function Xt(Pe,_t){if(1&Pe){const et=$.EpF();$.TgZ(0,"div",4)(1,"h2",5),$._uU(2,"Save to Folder"),$.qZA(),$.TgZ(3,"form",40),$.YNc(4,Qt,7,3,"div",41),$.TgZ(5,"div",15),$.YNc(6,Yt,2,1,"button",42),$.YNc(7,nn,1,1,"ng-template",null,43,$.W1O),$.TgZ(9,"button",17),$.NdJ("click",function(){$.CHM(et);const Ee=$.oxw();return $.KtG(Ee._activeModal.close(!0))}),$._uU(10," Close "),$.qZA()()()()}if(2&Pe){const et=$.MAs(8),ye=$.oxw();$.xp6(3),$.Q6J("formGroup",ye.myForm),$.xp6(1),$.Q6J("ngIf",!ye.selectedFileURL),$.xp6(2),$.Q6J("ngIf",!ye.documentId)("ngIfElse",et)}}let Kt=(()=>{const _t=class{constructor(ye,Ee,Ft,on,ve,fe,Le,xe){this._snapshot=ye,this._activeModal=Ee,this._snackBar=Ft,this._auth=on,this._itemService=ve,this._snackbarService=fe,this._folder=Le,this.captureService=xe,this.upload=!1,this.isUploadFromConsole=!1,this.loader=!1,this.folderSelector="#boom-sidebar-upload",this.captureTypes=Ge.Z,this.selectedFolders=[],this.boomgptComposition=Wt.rG,this.selectedFileURL="",this.uploadedFiles=[],this.selectedDescription="",this.uploadLoader=!1,this.isAllowedToUploadFile=!0,this.isSaving=!1,this.validImageField=["png","jpeg","jpg","svg","webp"],this.validDocumentField=["pdf","txt","docx","doc","xlsx","pptx","mp4","mov","avi","wmv","mpeg"],this.getUserProfile();const Ae=this._auth.loadFromLocalStorage();this.userCompositionId=Ae.userConcept}ngOnDestroy(){this.subs.unsubscribe()}ngOnInit(){let ye=localStorage.getItem("profile");ye&&(this.userDetails=ye=JSON.parse(ye)),X()({token:ye.token,userId:ye.theUserId||ye.userId,userConcept:ye.userConcept,...Ct.d}),xt.FolderTreeModule.renderTreeSidebar({sidebarQuerySelector:this.folderSelector,navigateThroughLabel:!0,showCheckbox:!0},!0),this.myForm=new rt.cw({documentName:new rt.NI(this.docTitle,[rt.kI.required,rt.kI.maxLength(50)])}),this.subs=this._snapshot.queryParams.subscribe(Ee=>{if(Ee.s){const Ft=xt.FolderTreeModule.globalFolders;this.currentFolderId=Ee.s;const ve=Ft.filter(fe=>fe.id==Ee.s).map(fe=>({id:fe?.id,name:fe?.name}));xt.FolderTreeModule.updateSelectedFolders(this.folderSelector,ve,!0)}else this.currentFolderId=""}),this.isUploadFromConsole||(xt.FolderTreeModule.updateSelectedFolders(this.folderSelector,[{id:this.projectId,name:""}],!0),xt.FolderTreeModule.setCurrentFolderId(this.projectId,this.folderSelector))}getUserProfile(){this._auth.getUserProfile().subscribe({next:ye=>{const Ee=ye?.data?.the_user?.entity.person;this.userProfile={first_name:Ee?.first_name,last_name:Ee?.last_name,profile_img:Ee?.profile_img,userid:ye?.id}}})}getFileExtension(ye){return ye.split(".").pop()?.toLowerCase()||""}getFileIcon(ye){switch(this.getFileExtension(ye)){case"pdf":return"\u{1f4c4}";case"doc":case"docx":return"\u{1f4dd}";case"xls":case"xlsx":return"\u{1f4ca}";case"ppt":case"pptx":return"\u{1f4c8}";case"txt":return"\u{1f4c3}";case"mp4":case"mov":case"avi":case"wmv":case"mpeg":return"\u{1f3ac}";case"jpg":case"jpeg":case"png":case"gif":case"webp":return"\u{1f5bc}\ufe0f";default:return"\u{1f4c1}"}}uploadAttachment(ye){var Ee=this;return(0,at.Z)(function*(){Ee.fileUploadErrorMessage="";const Ft=["jpg","jpeg","png"],on=["doc","docx","xls","xlsx","ppt","pptx","txt","pdf","md","mp4","mov","avi","wmv","mpeg"];let ve;if(ye&&ye.target&&ye.target.files){if(!ye.target.files[0])return null;ve=ye.target.files[0]}else{if(!ye||!ye.name&&!ye.size)return null;ve=ye}if(!ve)return null;const Le=ve.name.split(".").pop()?.toLowerCase()||"",xe=ve.size/1024,Ae=yield Ee._folder.checkUserSubscription("fileSize"),ze=Ae?.isAllowedToCreate,lt=Ae?.limit;if(xe>=ze)return Ee.fileUploadErrorMessage=`File size must be less than ${lt} KB`,Ee._snackbarService.openSnackBar(Ee.fileUploadErrorMessage,"warning"),null;Ee.uploadLoader=!0;try{if(Ft.includes(Le)){const He=new FormData;He.append("image",ve);const Oe=yield(0,Zt.n)(Ee._itemService.uploadNewImage(He));return Ee.uploadLoader=!1,{url:Oe?.data,file:ve,extension:Le}}if(on.includes(Le)){const He=new FormData;He.append("file",ve);const Oe=yield(0,Zt.n)(Ee._itemService.uploadFile(He));return Ee.uploadLoader=!1,{url:Oe?.data,file:ve,extension:Le}}return Ee.uploadLoader=!1,Ee._snackbarService.openSnackBar("Invalid File Format","error"),null}catch{return Ee.uploadLoader=!1,Ee._snackbarService.openSnackBar("Sorry, couldn't upload file at the moment.","error"),null}})()}uploadAttachments(ye){var Ee=this;return(0,at.Z)(function*(){if(!ye.target.files||0===ye.target.files.length)return;const Ft=ye.target.files,on=ye.target;setTimeout(()=>on.value="",0);const ve=Array.from(Ft);ve.forEach(Le=>{const xe=(Le.name.split(".").pop()||"").toLowerCase(),Ae={file:Le,extension:xe,preview:null,url:void 0,status:"pending"};if(Ee.validImageField.includes(xe)){const ze=new FileReader;ze.onload=()=>Ae.preview=ze.result,ze.readAsDataURL(Le)}Ee.uploadedFiles.push(Ae)}),Ee.uploadLoader=!0;const fe=Ee.uploadedFiles.slice(-ve.length).map(Le=>(Le.status="uploading",Ee.uploadAttachment(Le.file).then(xe=>{xe&&xe.url?(Le.url=xe.url,Le.status="done"):(Le.status="error",Le.error="Upload failed")})));yield Promise.allSettled(fe),Ee.uploadLoader=Ee.uploadedFiles.some(Le=>"uploading"===Le.status)})()}uploadImage(ye){const Ee=new FormData;Ee.append("image",ye),this._itemService.uploadNewImage(Ee).subscribe({next:Ft=>{this.selectedFileURL=Ft.data,this.uploadLoader=!1},error:()=>{this.uploadLoader=!1,this._snackbarService.openSnackBar("Sorry, couldn't upload file at the moment.","error")}})}uploadFile(ye){const Ee=new FormData;Ee.append("file",ye),this._itemService.uploadFile(Ee).subscribe({next:Ft=>{this.selectedFileURL=Ft.data,this.uploadLoader=!1},error:()=>{this.uploadLoader=!1,this._snackbarService.openSnackBar("Sorry, couldn't upload file at the moment.","error")}})}editSelectedFolders(ye){this.selectedFolders=ye}saveUploadedCaptures(){var ye=this;return(0,at.Z)(function*(){if(ye.fileUploadErrorMessage)return void ye._snackbarService.openSnackBar(ye.fileUploadErrorMessage,"warning");if(!ye.hasAnyUploadedFiles())return void ye._snackbarService.openSnackBar("No files ready for upload","warning");let Ee;ye.loader=!0;const Ft={};for(let on=0;on<ye.uploadedFiles.length;on++){const ve=ye.uploadedFiles[on];if("done"!==ve.status)continue;Ee={title:ve.file.name,short_desc:"",data_type:ye.validImageField.includes(ve.extension)?Ge.Z.Image:Ge.Z.Document,image:ve.url,filepath:ve.url,filename:ve.file.name,boom_folder:{category_name:"",category_id:""},source_url:"",created_at:String(Date.now()),note:ye.selectedDescription},Ft[ye.boomgptComposition]=Ee;const fe=xt.FolderTreeModule.selectedFolders;ye.selectedFolders=fe.map(xe=>parseInt(xe?.id||xe.category_id));const Le=fe.map(xe=>({id:parseInt(xe?.id||xe.category_id),name:xe?.name||xe.category_name}));if(ye.selectedFolders?.length>0)for(let xe=0;xe<Le.length;xe++){const Ae=Le[xe],ze={category_name:Ae?.name||"",category_id:Ae?.id||""};Ee={...Ee,boom_folder:{...ze}},Ft[ye.boomgptComposition]=Ee,yield ye.captureService.uploadDocument(Ft,ye.userDetails.theUserId,Ae?.id||Ae?.id,ye.userDetails.userConcept)}else Ee={...Ee,boom_folder:{category_name:"",category_id:""}},Ft[ye.boomgptComposition]=Ee,yield ye.captureService.uploadDocument(Ft,ye.userDetails.theUserId,ye.userDetails.userConcept,ye.userDetails.userConcept)}ye._activeModal.close("Media Uploaded!")})()}removeFile(ye){ye>=0&&ye<this.uploadedFiles.length&&this.uploadedFiles.splice(ye,1)}hasAnyUploadedFiles(){return this.uploadedFiles.some(ye=>"done"===ye.status)}isImageExtension(ye){return this.validImageField.includes(ye)}getFileIconFromExtension(ye){switch(ye){case"pdf":return"\u{1f4c4}";case"doc":case"docx":return"\u{1f4dd}";case"xls":case"xlsx":return"\u{1f4ca}";case"ppt":case"pptx":return"\u{1f4c8}";case"txt":return"\u{1f4c3}";case"mp4":case"mov":case"avi":case"wmv":case"mpeg":return"\u{1f3ac}";case"jpg":case"jpeg":case"png":case"gif":case"webp":return"\u{1f5bc}\ufe0f";default:return"\u{1f4c1}"}}formatFileSize(ye){if(0===ye)return"0 B";const on=Math.floor(Math.log(ye)/Math.log(1024));return parseFloat((ye/Math.pow(1024,on)).toFixed(2))+" "+["B","KB","MB","GB","TB"][on]}handleFileNameChange(ye){ye.preventDefault(),this.isdocValue.docTitle=ye.target.value}saveDocument(ye){var Ee=this;return(0,at.Z)(function*(){if(ye.preventDefault(),Ee.isdocValue.folderId=xt.FolderTreeModule.selectedFolders,Ee.myForm?.valid){Ee.isSaving=!0,Ee.loader=!0;try{const Ft=localStorage.getItem("profile"),on=JSON.parse(Ft);if((yield(0,Rt.oKR)(Ee.projectId,"my_console_s")).find(Le=>Le?.data?.the_createDocument?.docTitle==Ee.isdocValue.docTitle))return Ee._snackbarService.openSnackBar("document already exist","error"),Ee.isSaving=!1,void(Ee.loader=!1);{let Le;if(yield Promise.all(Ee.isdocValue.folderId&&Ee.isdocValue.folderId?.map(function(){var xe=(0,at.Z)(function*(Ae){const ze={the_createDocument:{docTitle:Ee.isdocValue?.docTitle,folderId:parseInt(Ae?.category_id),createdByEmail:on?.email||"",created_by:on?.userConcept||"",assignUsers:Ee.isdocValue?.assignUsers||"",content:Ee.isdocValue?.content||"",types:Ee.isdocValue?.types||"",methodTypes:Ee.isdocValue?.methodTypes||"",methodUrl:Ee.isdocValue?.methodUrl||"",authType:Ee.isdocValue?.authType||"",username:Ee.isdocValue?.username||"",password:Ee.isdocValue?.password||"",bearerToken:Ee.isdocValue?.bearerToken||"",jsonList:Ee.isdocValue?.jsonList||"",languageType:Ee.isdocValue?.languageType||"",codeEditor:Ee.isdocValue?.codeEditor||"",desAboutReturnOpt:Ee.isdocValue?.desAboutReturnOpt||"",docsUrl:Ee.isdocValue?.docsUrl||"",imagesUrl:Ee.isdocValue?.imagesUrl||""}},lt=yield(0,Rt.J0M)(parseInt(Ae.category_id)),He=yield(0,Rt.joo)(ze,void 0,void 0,void 0,on.theUserId,4);yield(0,Rt.GIn)(lt,He,"my_console"),yield Rt.smK.SyncDataOnline();const Oe=yield(0,Rt.J0M)(He.id);Le={title:"Document Invitaion",body:`You are assign for ${Ee.isdocValue?.docTitle} document`,timestamp:(new Date).toISOString(),link:`projects/view/${parseInt(Ae?.category_id)}?tab=Documentation&docid=${Oe.id}`}});return function(Ae){return xe.apply(this,arguments)}}())),Ee.isdocValue?.assignUsers.length>0){const xe=Ee.isdocValue?.assignUsers?.map(Ae=>Ae.id);if(xe.length>0){const Ae={userConceptIds:xe,fs_notification:Le};(yield fetch(Ct.N.baseUrl+"/notification-bulk/send",{method:"POST",body:JSON.stringify(Ae),headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ee.userDetails.token}`}})).ok||Ee._snackbarService.openSnackBar("Unable to send notification","error")}}Ee._snackbarService.openSnackBar("document created successful","success"),Ee.isSaving=!1,Ee.loader=!1,Ee.childComponent(),Ee._activeModal.close()}}catch{Ee._snackbarService.openSnackBar("Error creating Document","error")}}})()}updateDocument(){var ye=this;return(0,at.Z)(function*(){if(ye.isSaving=!0,ye.loader=!0,ye.myForm?.valid){ye.isdocValue.folderId=xt.FolderTreeModule.selectedFolders,ye.isdocValue.docTitle=ye.myForm.value.documentName;try{let Ee;const Ft=new Rt.MYZ;if(Ft.userId=ye.userProfile?.userid,Ft.compositionId=ye.documentId,ye.isdocValue.folderId&&ye.isdocValue?.folderId?.map(on=>{Ft.patchObject={docTitle:ye.isdocValue?.docTitle||"",folderId:parseInt(on?.category_id)||"",categoryName:on&&on?.category_name||"",last_updated_by:ye.userProfile.first_name+" "+ye.userProfile.last_name||"",assignUsers:ye.isdocValue?.assignUsers||"",content:ye.isdocValue?.content||"",types:ye.isdocValue?.types||"",methodTypes:ye.isdocValue?.methodTypes||"",methodUrl:ye.isdocValue?.methodUrl||"",authType:ye.isdocValue?.authType||"",username:ye.isdocValue?.username||"",password:ye.isdocValue?.password||"",bearerToken:ye.isdocValue?.bearerToken||"",jsonList:ye.isdocValue?.jsonList||"",languageType:ye.isdocValue?.languageType||"",codeEditor:ye.isdocValue?.codeEditor||"",desAboutReturnOpt:ye.isdocValue?.desAboutReturnOpt||"",docsUrl:ye.isdocValue?.docsUrl||"",imagesUrl:ye.isdocValue?.imagesUrl||""},Ee={title:"Document Invitaion",body:`You are assign for ${ye.isdocValue?.docTitle} document`,timestamp:(new Date).toISOString(),link:`projects/view/${parseInt(on?.category_id)}?tab=Documentation&docid=${ye.documentId}`}}),yield(0,Rt.hrH)(Ft),Rt.smK.SyncDataOnline(),ye.isSaving=!1,ye.loader=!1,ye.isdocValue?.assignUsers.length>0){const on=ye.isdocValue?.assignUsers?.map(ve=>ve.id);on.length>0&&(yield fetch("https://theta.boomconcole.com/api/notification-bulk/send",{method:"POST",body:JSON.stringify({userConceptIds:on,fs_notification:Ee}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${ye.userDetails.token}`}}))}ye._snackbarService.openSnackBar("Document Update successful","success"),ye._activeModal.close()}catch{ye._snackbarService.openSnackBar("Failed to Update Document","error")}ye.childComponent()}})()}handleDescriptionChange(ye){this.selectedDescription=ye.target.value}};let Pe=_t;return _t.\u0275fac=function(Ee){return new(Ee||_t)($.Y36(be.gz),$.Y36(Q.Kz),$.Y36(Bt.ux),$.Y36(it.e),$.Y36(bt.e),$.Y36(Lt.o),$.Y36(qe.s),$.Y36(oe.F))},_t.\u0275cmp=$.Xpm({type:_t,selectors:[["app-folder-upload-modal"]],inputs:{upload:"upload",isdoc:"isdoc",isdocValue:"isdocValue",singleDocValue:"singleDocValue",projectId:"projectId",documentId:"documentId",docTitle:"docTitle",childComponent:"childComponent",isUploadFromConsole:"isUploadFromConsole"},decls:5,vars:2,consts:[[1,"modal-body","row"],[1,"col-lg-5","col-md-6","col-sm-12","sidebar_wrapper"],["id","boom-sidebar-upload",1,"sidebar","bg-white"],["class","col-lg-7 col-md-6 col-sm-12",4,"ngIf"],[1,"col-lg-7","col-md-6","col-sm-12"],[1,"mb-3"],[1,"form-group"],["for","document",1,"form-label"],["class","loading","style","position: relative; min-height: 70px",4,"ngIf"],[1,"mb-2"],["type","file","name","document","id","document","multiple","","accept","application/msword, .docx, .doc, application/vnd.ms-excel, application/vnd.ms-powerpoint, text/plain, application/pdf, image/jpeg, image/jpg, image/png, video/mp4, video/mpeg, video/quicktime, video/x-msvideo, video/x-ms-wmv",1,"form-control",3,"change"],["class","d-inline-block",4,"ngIf"],["class","uploaded-list",4,"ngIf"],["for","description",1,"form-label"],["name","description","id","description","rows","3","placeholder","Add Description",1,"form-control",3,"keyup"],[1,"d-flex","flex-row","gap-2"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-secondary",3,"click"],[1,"loading",2,"position","relative","min-height","70px"],[1,"loader",2,"position","relative"],[1,"d-inline-block"],[1,"text-danger","exceed-limit-msg"],["target","_blank",3,"routerLink"],[1,"uploaded-list"],["class","card d-flex align-items-center justify-content-start border rounded p-2 mb-2 uploaded-item",4,"ngFor","ngForOf"],[1,"card","d-flex","align-items-center","justify-content-start","border","rounded","p-2","mb-2","uploaded-item"],["target","_blank","class","d-flex align-items-center gap-2 no-decoration w-100",3,"href",4,"ngIf"],[1,"w-100","d-flex","align-items-center","gap-2"],[2,"font-size","24px","margin-right","10px"],[1,"file-meta"],[1,"file-name",3,"title"],[1,"file-sub","small","text-muted"],[4,"ngIf"],[1,"ms-auto","d-flex","gap-2"],["target","_blank","class","btn btn-sm btn-outline-secondary",3,"href",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["target","_blank",1,"d-flex","align-items-center","gap-2","no-decoration","w-100",3,"href"],["alt","Image","class","thumb",3,"src",4,"ngIf"],["alt","Image",1,"thumb",3,"src"],["target","_blank",1,"btn","btn-sm","btn-outline-secondary",3,"href"],[3,"formGroup"],["class","form-group",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateDocumentAs",""],["class","loading","style","position: relative; min-height: 70px",4,"ngIf","ngIfElse"],["loaded",""],["formControlName","documentName","type","text","name","documentName","id","document","required","",1,"form-control",3,"ngClass","change"],["style","color: red",4,"ngIf"],[2,"color","red"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"]],template:function(Ee,Ft){1&Ee&&($.TgZ(0,"div",0)(1,"div",1),$._UZ(2,"div",2),$.qZA(),$.YNc(3,Ze,20,4,"div",3),$.YNc(4,Xt,11,4,"div",3),$.qZA()),2&Ee&&($.xp6(3),$.Q6J("ngIf",!Ft.isdoc),$.xp6(1),$.Q6J("ngIf",Ft.isdoc))},dependencies:[ee.mk,ee.sg,ee.O5,be.rH,rt._Y,rt.Fj,rt.JJ,rt.JL,rt.Q7,rt.sg,rt.u],styles:[".exceed-limit-msg[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.5rem;margin-bottom:0}.exceed-limit-msg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline;color:#1f75cb}.exceed-limit-msg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .exceed-limit-msg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#ff9472}.sidebar_wrapper[_ngcontent-%COMP%]{max-height:600px;overflow:scroll}.uploaded-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.uploaded-item[_ngcontent-%COMP%]{display:flex;align-items:center}.thumb[_ngcontent-%COMP%]{width:64px;height:48px;object-fit:cover;border-radius:4px;margin-right:8px;background:#f8f9fa;border:1px solid #e9ecef}.file-meta[_ngcontent-%COMP%]{overflow:hidden}.file-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}.no-decoration[_ngcontent-%COMP%]{text-decoration:none;color:inherit}"]}),Pe})()},1685:(Jn,Wn,St)=>{"use strict";St.d(Wn,{F:()=>Bt});var at=St(5861),Zt=St(6296),Ge=St(9402),Wt=St(7899),rt=St(2902),xt=St(4650),X=St(8154),Ct=St(4383),Rt=St(8180),$=St(384),be=St(5495);let Q=(()=>{const bt=class{constructor(qe,oe){this._authService=qe,this._items=oe;const ee=this._authService.loadFromLocalStorage();ee&&(this.userConcept=ee.userConcept,this.userId=ee.theUserId)}formatDocumentation(qe){if(!qe)return[];const oe=qe?.[0]?.data?.the_documentation||[];return{isDocumentation:!0,types:oe?.the_documentation_type?.[0]?.data?.the_type,title:oe?.the_documentation_doc_title?.[0]?.data?.the_doc_title,data_type:"documentation",boom_folder:{category_name:oe.categoryName,category_id:oe.folderId},short_desc:oe?.the_documentation_doc_title?.[0]?.data?.the_doc_title,visual_text:oe?.the_documentation_content?.[0]?.data?.the_content,codeEditor:oe?.the_documentation_code_editor?.[0]?.data?.the_code_editor,desAboutReturnOpt:oe?.the_documentation_return?.[0]?.data?.the_return,methodTypes:oe?.the_documentation_method?.[0]?.data?.the_method,url:oe?.the_documentation_method_url?.[0]?.data?.the_method_url,authType:oe?.the_documentation_auth_type?.[0]?.data?.the_auth_type,jsonKeyValuePair:Array.isArray(oe?.the_documentation_s_json_list)?oe.the_documentation_s_json_list.map(ee=>{const Ce=ee.data.the_json_list.the_json_list_key?.[0],le=ee.data.the_json_list.the_json_list_value?.[0],de=Ce?.data?.the_key,he=le?.data?.the_value;return{keyValuePairs:{[de]:he}}}):[],imagesUrl:Array.isArray(oe?.the_documentation_s_image_url)?oe.the_documentation_s_image_url.map(ee=>ee?.data?.the_image_url):[],docsUrl:Array.isArray(oe?.the_documentation_s_doc_url)?oe.the_documentation_s_doc_url.map(ee=>ee?.data?.the_doc_url):[],videoLinks:Array.isArray(oe?.the_documentation_s_video_link)?oe.the_documentation_s_video_link.map(ee=>ee?.data?.the_video_link):[],bearer_token:oe?.the_documentation_bearer_token?.[0]?.data?.the_bearer_token,basicAuthUserName:oe?.the_documentation_username?.[0]?.data?.the_username,basicAuthpassword:oe?.the_documentation_password?.[0]?.data?.the_password,note:"",created_by_email:oe?.the_documentation_creator_email?.[0]?.data?.the_creator_email,source_url:"",id:qe?.[0]?.id,created_at:qe?.[0]?.created_at}}getSingleDocumentationDetails(qe){var oe=this;return(0,at.Z)(function*(){try{const ee=[{composition:qe,listLinkers:[],fullLinkers:["the_documentation_doc_title","the_documentation_type","the_documentation_created_by","the_documentation_creator_email","the_documentation_content","the_documentation_api_script","the_documentation_api_body","the_documentation_method","the_documentation_method_url","the_documentation_auth_type","the_documentation_username","the_documentation_password","the_documentation_bearer_token","the_documentation_language","the_documentation_code_editor","the_documentation_return","the_documentation_s_json_list","the_documentation_s_doc_url","the_documentation_s_video_link","the_documentation_s_image_url"],inpage:500,page:1,logic:"or",filterSearches:[]},{listLinkers:[],fullLinkers:["the_json_list_key","the_json_list_value"],inpage:1e3,page:1,logic:"or",filterSearches:[]}],Ce=yield(0,Ge.eHe)(ee);return oe.formatDocumentation([Ce])}catch(ee){return console.error("Error fetching new doc data:",ee),[]}})()}};let it=bt;return bt.\u0275fac=function(oe){return new(oe||bt)(xt.LFG($.e),xt.LFG(X.e))},bt.\u0275prov=xt.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"root"}),it})(),Bt=(()=>{const bt=class{constructor(qe,oe,ee,Ce,le,de){this._apiServices=qe,this._folderService=oe,this._snackbarService=ee,this._authService=Ce,this.crmService=le,this.documentationService=de,this.allCapturesInCurrentFolder=[],this.allFolders=[],this.userConcept=this._authService.loadFromLocalStorage().userConcept,this.entityId=this._authService.loadFromLocalStorage()?.entityId}getCaptures(qe,oe){var ee=this;return(0,at.Z)(function*(){const Ce=["the_entity_title","the_entity_type","the_entity_name","the_entity_data_type","the_entity_first_name","the_entity_last_name","the_entity_tag","the_entity_note","the_entity_source_url","the_entity_avatar","the_documentation_doc_title","the_documentation_type","the_documentation_created_by","the_documentation_creator_email","the_documentation_content","the_documentation_api_script","the_documentation_api_body","the_documentation_method","the_documentation_method_url","the_documentation_auth_type","the_documentation_username","the_documentation_password","the_documentation_bearer_token","the_documentation_language","the_documentation_code_editor","the_documentation_return","the_documentation_s_json_list","the_documentation_s_doc_url","the_documentation_s_video_link","the_documentation_s_image_url","self"];return new Promise(le=>{const de=new Ge.LtL;de.typeConnection="the_documentation_s_json_list",de.name="json",de.selectors=["the_json_list_key","the_json_list_value"];const he=new Ge.LtL;he.name="access1",he.typeConnection=rt.Oc,he.reverse=!0;const ce=new Ge.LtL;ce.name="access2",ce.typeConnection=rt.Oc,ce.reverse=!0;const Be=new Ge.LtL;Be.typeConnection=rt.u,Be.name="contain",Be.freeschemaQueries=[de,he],Be.selectors=Ce;const $e=new Ge.LtL;$e.name="folder",$e.typeConnection=rt.NF,$e.freeschemaQueries=[ce],$e.selectors=Ce;const st=new Ge.LtL;st.name="top",st.conceptIds=[Number(qe)],st.outputFormat=Ge.xY7,st.freeschemaQueries=[$e,Be],(0,Ge.og0)(st,oe).subscribe(ae=>{console.log("response",ae);const Ze=(ae?.[0]?.data?Object.keys(ae[0]?.data):[]).find(yt=>"id"!==yt);let Xe=[];const vt=ae?.[0]?.data?.boomFolder?.[rt.u];if(vt?.length){let yt=[];vt.forEach(Et=>{if(Et?.data?.the_entity){const Qt=ee.crmService.formatNewEntityContactsConsole([Et],"preview"),Yt=Pt(Et);Yt?.shared&&Qt.forEach(Vt=>{Vt.shared=Yt.shared}),yt=[...yt,...Qt]}else if(Et?.data?.[Wt.rG]?.crm_data){const Qt=ee.crmService.formatOldEntityContactsConsole([Et],"preview"),Yt=Pt(Et);Yt?.shared&&yt.push(Yt?.shared),Yt?.shared&&Qt.forEach(Vt=>{Vt.shared=Yt.shared}),yt=[...yt,...Qt]}else{const Qt=It(Et);Qt&&yt.push(Qt)}}),Xe=yt,le(Xe)}else{let yt=[];Ze===rt.TB?yt=ae?.[0]?.data?.[rt.TB]?.[rt.u]:"the_user"===Ze&&(yt=ae?.[0]?.data?.the_user?.[rt.u]),Xe=yt?.map(Et=>It(Et)),Xe=Xe?.filter(Boolean),le(Xe||[])}function Pt(yt){if(yt?.data){const Et={...yt},Qt=yt?.data?.the_entity?.the_user_s_read_access_reverse||yt?.data?.boomgpt?.the_user_s_read_access_reverse;return Qt&&(Et.shared=Qt),Et}}function It(yt){if(yt?.data?.[rt.TB]&&Object.keys(yt?.data?.[rt.TB]).length){const Vt={name:yt?.data?.[rt.TB]?.name?.data?.the_name,parent:yt?.data?.[rt.TB]?.parent?.data?.the_parent,id:yt?.id,created_at:yt?.created_on},nn=yt?.data?.[rt.TB][`${rt.Oc}_reverse`];return nn&&(Vt.shared=nn,delete yt?.data?.[rt.TB][`${rt.Oc}_reverse`]),Vt}if(yt?.data?.[Wt.rG]){const nn={...function Yt(Vt,nn,Xt){const Kt={};for(const Pe in Vt)if(Pe===`${nn}_s_${Xt}_by`)Kt.shared=Vt[Pe];else{if("comment"===Pe)continue;{const _t=Vt[Pe]?.data;if(_t&&"object"==typeof _t){const et=Object.keys(_t)[0];Kt[Pe]=_t[et]}}}return Kt}(yt.data[Wt.rG],Wt.rG,rt.Zm),id:yt.id,created_at:yt.created_on},Xt=yt?.data?.[Wt.rG][`${rt.Oc}_reverse`];return Xt&&(nn.shared=Xt,delete yt?.data?.[Wt.rG][`${rt.Oc}_reverse`]),nn}return yt?.data?.the_documentation?function Qt(Vt){if(!Vt?.data?.the_documentation)return null;const nn=Vt.data.the_documentation,Xt=function Et(Vt){const nn={};for(const Xt in Vt){const Kt=Vt[Xt];if(Kt?.data&&"object"==typeof Kt.data){const Pe=Object.keys(Kt.data)[0];nn[Xt]=Kt.data[Pe]}}return nn}(nn);return{isDocumentation:!0,data_type:"documentation",id:Vt.id,created_at:Vt.created_on,title:Xt.the_documentation_doc_title,short_desc:Xt.the_documentation_doc_title,visual_text:Xt.the_documentation_content,types:Xt.the_documentation_type,codeEditor:Xt.the_documentation_code_editor,desAboutReturnOpt:Xt.the_documentation_return,methodTypes:Xt.the_documentation_method,url:Xt.the_documentation_method_url,authType:Xt.the_documentation_auth_type,bearer_token:Xt.the_documentation_bearer_token,basicAuthUserName:Xt.the_documentation_username,basicAuthpassword:Xt.the_documentation_password,created_by_email:Xt.the_documentation_creator_email,jsonKeyValuePair:Array.isArray(nn.the_documentation_s_json_list)?nn.the_documentation_s_json_list.map(Kt=>{const Pe=Kt.data?.the_json_list?.the_json_list_key?.[0],_t=Kt.data?.the_json_list?.the_json_list_value?.[0],et=Pe?.data?.the_key,ye=_t?.data?.the_value;return{keyValuePairs:{[et]:ye}}}):[],imagesUrl:Array.isArray(nn.the_documentation_s_image_url)?nn.the_documentation_s_image_url.map(Kt=>Kt?.data?.the_image_url):[],docsUrl:Array.isArray(nn.the_documentation_s_doc_url)?nn.the_documentation_s_doc_url.map(Kt=>Kt?.data?.the_doc_url):[],videoLinks:Array.isArray(nn.the_documentation_s_video_link)?nn.the_documentation_s_video_link.map(Kt=>Kt?.data?.the_video_link):[],note:"",source_url:""}}(yt):null}le(ae)})})})()}getCategories(qe){return new Promise((oe,ee)=>{const Ce=`${rt.CH}_s`;(0,Ge.zAo)(Number(qe),[Ce]).then(le=>{let de=le?.filter(ce=>ce?.data?.[rt.TB]&&ce?.data?.[rt.TB]?.name);de=de?.map(ce=>{const Be={...ce};return{name:Be?.data?.[rt.TB]?.name,parent:Be?.data?.[rt.TB]?.parent,description:Be?.data?.[rt.TB]?.description,id:Be?.id}}),de=de?.sort(function(ce,Be){const $e=ce?.name?.toLowerCase(),st=Be?.name?.toLowerCase();return $e.localeCompare(st)}),oe({message:"success",status:200,data:de})}).catch(le=>{ee({message:"error",status:500,error:le.message})})})}getCategoriesById(qe,oe){return new Promise((ee,Ce)=>{(0,Ge.zAo)(qe,[`${rt.CH}_s`]).then(de=>{let he=de?.filter(Be=>Be?.data?.[rt.TB]&&Be?.data?.[rt.TB]?.name);he=he?.map(Be=>{const $e={...Be};return{name:$e?.data?.[rt.TB]?.name,parent:$e?.data?.[rt.TB]?.parent,description:$e?.data?.[rt.TB]?.description,id:$e?.id}}),he=he?.filter(Be=>Be?.id!==oe),he=he?.sort(function(Be,$e){const st=Be?.name?.toLowerCase(),ae=$e?.name?.toLowerCase();return st.localeCompare(ae)});let ce={};if(oe===qe)ce={count:he?.length,data:he};else{const Be=[],$e=st=>{he?.forEach(ae=>{ae?.parent==st&&(Be.push(ae),$e(ae?.id))})};$e(oe),ce={count:Be?.length,data:Be},ee(ce)}}).catch(de=>{Ce(de)})})}getSharedCaptures(qe){var oe=this;return new Promise((ee,Ce)=>{(0,Ge.$Er)(qe,rt.Oc,100,1).then(function(){var de=(0,at.Z)(function*(he){const ce=he,Be=new Map;ce.forEach((Pe,_t)=>{Be.set(Pe.id,_t)});const $e=ce?.map(Pe=>({...Pe})),st=$e?.filter(Pe=>Pe?.data?.boomgpt?.crm_data),ae=oe.crmService.formatOldEntityContacts(st,"preview"),je=ce?.filter(Pe=>null!=Pe?.data?.the_entity),Xe=(yield Promise.all(je.map(function(){var Pe=(0,at.Z)(function*(_t){return yield oe.crmService.getSingleEntityDetails(_t?.id,"sharedwithme")});return function(_t){return Pe.apply(this,arguments)}}()))).flat().map(Pe=>({...Pe,title:Pe?.profileInformation?.name?.value,data_type:Pe?.type})),vt=ce?.filter(Pe=>null!=Pe?.data?.the_documentation),It=(yield Promise.all(vt.map(function(){var Pe=(0,at.Z)(function*(_t){return yield oe.documentationService.getSingleDocumentationDetails(_t?.id)});return function(_t){return Pe.apply(this,arguments)}}()))).flat().map(Pe=>({...Pe,title:Pe?.title,data_type:Pe?.data_type}));let yt=$e?.filter(Pe=>Object.prototype.hasOwnProperty.call(Pe?.data,Wt.co));yt=yt?.map(Pe=>{let _t;return Object.prototype.hasOwnProperty.call(Pe?.data,Wt.co)&&(_t={parent:"1",name:Pe?.data?.boomFolder?.name,created_at:Pe?.created_at,id:Pe?.id}),_t});let Et=$e?.filter(Pe=>Object.prototype.hasOwnProperty.call(Pe?.data,Wt.rG));Et=Et?.map(Pe=>{let _t;return Object.prototype.hasOwnProperty.call(Pe?.data,Wt.rG)&&(_t={...Pe?.data?.[Wt.rG],created_at:Pe?.created_at,id:Pe?.id},_t.boom_folder={category_id:1,category_parent:"",category_name:"Shared With Me"}),_t}),console.warn("shared_captures",Et);const Vt=[...yt,...Et,...Xe,...It,...ae],nn=new Map;Vt.forEach(Pe=>{Pe&&Pe.id&&nn.set(Pe.id,Pe)});const Kt=Array.from(nn.values()).sort((Pe,_t)=>(Be.get(Pe.id)??1/0)-(Be.get(_t.id)??1/0));console.warn("newDataArray",Vt),console.warn("uniqueCapturesArray",Kt),ee(Kt)});return function(he){return de.apply(this,arguments)}}()).catch(de=>{Ce(de)})})}selectFilteredCaptures(qe,oe,ee,Ce,le){let de=[];if(!le)return[];const he=le?.filter(ae=>ae?.data_type),ce=le?.filter(ae=>ae?.name&&!ae?.type),$e=[...new Map(ce?.map(ae=>[ae?.id,ae])).values()].sort((ae,je)=>{const Ze=ae?.name,Xe=je?.name;return Ze?.localeCompare(Xe)});switch(qe||$e.push({id:1,name:"Shared With Me"}),de=[...$e?.map(ae=>({...ae,data_type:ae?.data_type?ae?.data_type:"1folder"})),...he].filter(ae=>"1folder"===ae?.data_type&&Ce?.folder||("extension_youchat"==ae?.data_type||"extension_poechat"==ae?.data_type||"extension_googlebard"==ae?.data_type||"extension_chatgpt"==ae?.data_type)&&Ce?.aichat||"extension_whatsapp_chat"==ae?.data_type&&Ce?.human_chat||("screenshot"==ae?.data_type||"traced_url"==ae?.data_type||"plain_text"==ae?.data_type||"visual_text"==ae?.data_type||"url"==ae?.data_type||"only_images"==ae?.data_type||"all_but_css"==ae?.data_type||"full_page"==ae?.data_type||"youtube_notes"==ae?.data_type||"all"==ae?.data_type)&&Ce?.captures||("Document"==ae?.data_type||"Image"==ae?.data_type)&&Ce?.document_image||("extension_linkedin"==ae?.data_type||"extension_whatsapp"==ae?.data_type||"individual"==ae?.data_type||"company"==ae?.data_type||"student"==ae?.data_type||"employee"==ae?.data_type||"patient"==ae?.data_type||"extension_merojob"==ae?.data_type||"government"==ae?.data_type||"extension_indeed"==ae?.data_type||"extension_maps"==ae?.data_type||"maps"==ae?.data_type||"web_crm"==ae?.data_type||"extension_monster"==ae?.data_type)&&Ce?.crm||"item_amazon"===ae?.data_type||"item_ebay"===ae?.data_type||"item_costco"===ae?.data_type||"item_kayak"===ae?.data_type||"item_expedia"===ae?.data_type||"item_agoda"===ae?.data_type||"documentation"===ae?.data_type||"sticky_note"===ae?.data_type||"widget"===ae?.data_type||"lms_chat"===ae?.data_type),oe){case"type":de.sort(ee?(ae,je)=>{const Ze=ae?.data_type,Xe=je?.data_type;return Ze?.localeCompare(Xe)}:(ae,je)=>{const Ze=ae?.data_type;return je?.data_type.localeCompare(Ze)});break;case"title":de.sort(ee?(ae,je)=>(ae?.title||ae?.name).localeCompare(je?.title||je?.name):(ae,je)=>(je?.title||je?.name).localeCompare(ae?.title||ae?.name));break;case"note":de.sort(ee?(ae,je)=>ae?.note.localeCompare(je?.note):(ae,je)=>je?.note.localeCompare(ae?.note))}return de}selectCaptureListsByIds(qe,oe){if(!qe)return;const ee=[];return oe.forEach(Ce=>{const le=qe?.filter(de=>de?.id==Ce);ee.push(le[0])}),0==oe?.length?null:ee}searchCaptures(qe,oe){return new Promise(ee=>{this._apiServices.getRecursiveSearchData(qe,[],oe).subscribe(Ce=>{let le=Ce?.map(ce=>{if(ce?.data?.data?.[Wt.rG]||ce?.data?.data?.the_entity)return{...ce?.data?.data?.[Wt.rG]||ce?.data?.data?.the_entity,id:ce?.id,parent:[...ce?.parent]}});le=le?.filter(ce=>ce);const he=(le?.length>0?[...le]:[])?.map(ce=>{let Be="",$e="",st="";if("extension_chatgpt"===ce?.data_type||"extension_googlebard"===ce?.data_type||"extension_poechat"===ce?.data_type||"extension_youchat"===ce?.data_type){const je=ce?.answer,Ze=document.createElement("div");Ze.innerHTML=je,$e=Ze?.textContent,st=Ze?.textContent?.toLowerCase()}else"item_amazon"===ce?.data_type||"item_ebay"===ce?.data_type||"item_costco"===ce?.data_type||"item_kayak"===ce?.data_type||"item_expedia"===ce?.data_type||"item_agoda"===ce?.data_type?($e=`${ce?.itemData?.description} ${ce?.itemData?.delivery}`,st=$e?.toLowerCase()):("extension_indeed"===ce?.data_type||"extension_indeed"===ce?.type||"extension_linkedin"===ce?.data_type||"extension_linkedin"===ce?.type||"extension_monster"===ce?.data_type||"extension_monster"===ce?.type||"extension_maps"===ce?.data_type||"extension_maps"===ce?.type||"web_crm"===ce?.data_type||"extension_whatsapp"===ce?.data_type||"extension_whatsapp"===ce?.type||"individual"==ce?.type||"company"==ce?.type||"student"==ce?.type||"employee"==ce?.type||"patient"==ce?.type||"extension_merojob"==ce?.type||"government"==ce?.type||"extension_whatsapp_chat"===ce?.data_type)&&($e=`${ce?.crm_data?.name} ${ce?.crm_data?.addresses?.[0]?.location||""} ${ce?.crm_data?.companyWebsite||""}  ${ce?.crm_data?.ceo||""} ${ce?.crm_data?.founded||""} ${ce?.crm_data?.companySize||""} ${ce?.crm_data?.companyRevenue||""} ${ce?.crm_data?.about} || ''`,st=$e?.toLowerCase());const ae=st?.indexOf(oe.toLowerCase());if(-1!==ae){const je=Math.max(0,ae-20),Ze=Math.min(st?.length,ae+oe?.length+20);Be=$e?.substring(je,Ze)}else Be="";return{...ce,searchedContent:Be}});if(he?.length){let ce=[];he.forEach(Be=>{let $e=[];$e=Be?.the_entity_type?this.crmService.formatNewEntityContacts([Be],"preview"):Be?.crm_data?this.crmService.formatOldEntityContacts([Be],"preview"):[{...Be}],$e=$e?.map(st=>({...st,searchedContent:Be.searchedContent,parent:Be.parent})),ce=[...ce,...$e]}),ee(ce)}else ee(he)})})}moveDataToFolder(qe,oe,ee,Ce,le){var de=this;return(0,at.Z)(function*(){let he=localStorage.getItem("profile");he&&(he=JSON.parse(he)),de.allCapturesInCurrentFolder=[...le];const ce=oe,Be=ce?.filter(st=>st?.title),$e=ce?.filter(st=>st?.name&&!st.type);qe.ctrlKey?(Be?.length>0&&(yield de.copyCapturesToNewFolder(Be,ee.id||he.userConcept)),$e?.length>0&&de.validFolderCopy($e,ee.id||he.userConcept)&&(yield de.copyFoldersToNewFolder($e,ee.id||he.userConcept)),de._snackbarService.openSnackBar("Data copied to folder!","success")):(Be?.length>0&&(yield de.moveCapturesToNewFolder(Be,Ce||he.userConcept,ee.id||he.userConcept)),$e?.length>0&&de.validFolderMove($e,ee.id||he.userConcept)&&(yield de.moveFoldersToNewFolder($e,Ce||he.userConcept,ee.id||he.userConcept)),de._snackbarService.openSnackBar("Data moved to folder!","success"))})()}moveCapturesToNewFolder(qe,oe,ee){return(0,at.Z)(function*(){var de,Ce=!1,le=!1;try{for(var ce,he=(0,Zt.Z)(qe);Ce=!(ce=yield he.next()).done;Ce=!1){const yt=ce.value;{const Et=yield(0,Ge.Mu8)(Number(yt?.id)),Qt=yield(0,Ge.J0M)(Number(yt?.id)),Yt=yield(0,Ge.Mu8)(Number(oe)),Vt=yield(0,Ge.J0M)(Number(ee)),nn=yield(0,Ge.kqu)(Yt,Et,"",rt.u,!0);var st,Be=!1,$e=!1;try{for(var je,ae=(0,Zt.Z)(nn);Be=!(je=yield ae.next()).done;Be=!1){const Xt=je.value;yield(0,Ge.TAP)(Xt?.id)}}catch(Xt){$e=!0,st=Xt}finally{try{Be&&null!=ae.return&&(yield ae.return())}finally{if($e)throw st}}if("isBoomgpt"in yt){const Xt=yield(0,Ge.kqu)(Yt,Et,"",rt.u,!0);var vt,Ze=!1,Xe=!1;try{for(var It,Pt=(0,Zt.Z)(Xt);Ze=!(It=yield Pt.next()).done;Ze=!1){const Kt=It.value;yield(0,Ge.TAP)(Kt?.id)}}catch(Kt){Xe=!0,vt=Kt}finally{try{Ze&&null!=Pt.return&&(yield Pt.return())}finally{if(Xe)throw vt}}}yield(0,Ge.KFq)(Vt,Qt,rt.u)}}}catch(yt){le=!0,de=yt}finally{try{Ce&&null!=he.return&&(yield he.return())}finally{if(le)throw de}}yield Ge.smK.SyncDataOnline()})()}moveFoldersToNewFolder(qe,oe,ee){return(0,at.Z)(function*(){try{var de,Ce=!1,le=!1;try{for(var ce,he=(0,Zt.Z)(qe);Ce=!(ce=yield he.next()).done;Ce=!1){const yt=ce.value;{const Et=yield(0,Ge.Mu8)(yt?.id),Qt=yield(0,Ge.J0M)(yt?.id),Yt=yield(0,Ge.Mu8)(oe),Vt=yield(0,Ge.J0M)(ee),nn=yield(0,Ge.kqu)(Yt,Et,"",rt.u,!0),Xt=yield(0,Ge.kqu)(Yt,Et,"",rt.NF,!0);var st,Be=!1,$e=!1;try{for(var je,ae=(0,Zt.Z)(nn);Be=!(je=yield ae.next()).done;Be=!1){const Kt=je.value;yield(0,Ge.TAP)(Kt?.id)}}catch(Kt){$e=!0,st=Kt}finally{try{Be&&null!=ae.return&&(yield ae.return())}finally{if($e)throw st}}var vt,Ze=!1,Xe=!1;try{for(var It,Pt=(0,Zt.Z)(Xt);Ze=!(It=yield Pt.next()).done;Ze=!1){const Kt=It.value;yield(0,Ge.TAP)(Kt?.id)}}catch(Kt){Xe=!0,vt=Kt}finally{try{Ze&&null!=Pt.return&&(yield Pt.return())}finally{if(Xe)throw vt}}yield(0,Ge.KFq)(Vt,Qt,rt.u),yield(0,Ge.KFq)(Vt,Qt,rt.NF)}}}catch(yt){le=!0,de=yt}finally{try{Ce&&null!=he.return&&(yield he.return())}finally{if(le)throw de}}yield Ge.smK.SyncDataOnline()}catch(yt){console.warn(yt)}})()}validFolderMove(qe,oe){return qe.some(Ce=>Ce.id==oe)?(this._snackbarService.openSnackBar("Cannot move a folder inside same folder!","error"),!1):!qe?.map(Ce=>{const le=[];return this._folderService.getAllDescendentFolders(Ce?.id,le,this.allCapturesInCurrentFolder),!le?.length||!le.includes(Number(oe))||(this._snackbarService.openSnackBar("The destination folder is a subfolder of the source folder.","error"),!1)}).includes(!1)}copyCapturesToNewFolder(qe,oe){return(0,at.Z)(function*(){var le,ee=!1,Ce=!1;try{for(var he,de=(0,Zt.Z)(qe);ee=!(he=yield de.next()).done;ee=!1){const ce=he.value;{const Be=yield(0,Ge.J0M)(ce?.id),$e=yield(0,Ge.J0M)(oe);yield(0,Ge.KFq)($e,Be,rt.u)}}}catch(ce){Ce=!0,le=ce}finally{try{ee&&null!=de.return&&(yield de.return())}finally{if(Ce)throw le}}yield Ge.smK.SyncDataOnline()})()}copyFoldersToNewFolder(qe,oe){return(0,at.Z)(function*(){try{var le,ee=!1,Ce=!1;try{for(var he,de=(0,Zt.Z)(qe);ee=!(he=yield de.next()).done;ee=!1){const ce=he.value;{const Be=yield(0,Ge.J0M)(oe),$e={};$e[Wt.co]={...ce};const st=yield(0,Ge.joo)($e);yield(0,Ge.KFq)(Be,st,rt.u),yield(0,Ge.KFq)(Be,st,rt.NF)}}}catch(ce){Ce=!0,le=ce}finally{try{ee&&null!=de.return&&(yield de.return())}finally{if(Ce)throw le}}yield Ge.smK.SyncDataOnline()}catch(ce){console.warn(ce)}})()}validFolderCopy(qe,oe){return qe.some(Ce=>Ce.id==oe)?(this._snackbarService.openSnackBar("Cannot copy a folder inside same folder!","error"),!1):!qe?.map(Ce=>{const le=[];return this._folderService.getAllDescendentFolders(Ce?.id,le,this.allCapturesInCurrentFolder),!le?.length||!le.includes(Number(oe))||(this._snackbarService.openSnackBar("The destination folder is a subfolder of the source folder.","error"),!1)}).includes(!1)}uploadDocument(qe,oe,ee,Ce){return(0,at.Z)(function*(){try{const le=yield(0,Ge.joo)(qe,null,null,null,oe,null,null),de=yield(0,Ge.J0M)(ee);yield(0,Ge.KFq)(de,le,rt.u);const he=yield(0,Ge.J0M)(Ce);yield(0,Ge.GIn)(he,le,rt.cx,!0),yield Ge.smK.SyncDataOnline();const ce=yield(0,Ge.J0M)(le?.id);return{...qe?.[Wt.rG],id:ce?.id}}catch(le){throw console.error("Error uploading document:",le),le}})()}deleteCaptureConnection(qe,oe,ee,Ce){var le=this;return(0,at.Z)(function*(){const de=yield(0,Ge.Mu8)(Number(qe)),he=[];for(const ce of oe){const Be=yield(0,Ge.Mu8)(Number(ce)),$e=yield(0,Ge.kqu)(de,Be,"",rt.u,!0),st=yield(0,Ge.Mu8)(Number(le.entityId)),ae=yield(0,Ge.kqu)(st,Be,"","the_entity_s_crm_contact_s",!0);yield Promise.all([$e?.map(function(){var Ze=(0,at.Z)(function*(Xe){yield(0,Ge.TAP)(Xe?.id)});return function(Xe){return Ze.apply(this,arguments)}}()),ae?.map(function(){var Ze=(0,at.Z)(function*(Xe){yield(0,Ge.TAP)(Xe?.id)});return function(Xe){return Ze.apply(this,arguments)}}())]);const je=["extension_indeed","extension_linkedin","extension_monster","extension_maps","extension_whatsapp","extension_merojob","web_crm"];if(Array.isArray(Ce))for(const Ze of Ce)if(je.includes(Ze)){let Xe=Ze;Xe=Xe.replace("extension_","")+"_contact";const vt=`the_entity_s_${Xe}_s`;yield le.searchAndDeleteEntityContact(ce,vt,Xe)}he.push({success:!0,id:ce})}return he})()}searchAndDeleteEntityContact(qe,oe,ee){var Ce=this;return(0,at.Z)(function*(){try{const le=new Ge.LtL;le.typeConnection=oe,le.name="entity";const de=new Ge.LtL;de.typeConnection=oe,de.isOldConnectionType=!0,de.reverse=!0,de.name="contact",de.freeschemaQueries=[le];const he=new Ge.LtL;he.conceptIds=[qe],he.name="top",he.freeschemaQueries=[de],he.selectors=["self"],he.outputFormat=Ge.xY7,(0,Ge.og0)(he,"").subscribe(function(){var ce=(0,at.Z)(function*(Be){const $e=Be?.[0].id,st=Be?.[0]?.data?.boomgpt?.[oe+"_reverse"]?.[0]?.id;if($e==qe){const ae=yield(0,Ge.J0M)(Number($e)),je=yield(0,Ge.J0M)(Number(st)),Ze=Be?.[0]?.data?.boomgpt?.[oe+"_reverse"]?.[0]?.data?.the_entity?.[oe];if((yield(0,Ge.kqu)(je,ae,ee,"",!0))?.map(function(){var vt=(0,at.Z)(function*(Pt){yield(0,Ge.TAP)(Pt?.id)});return function(Pt){return vt.apply(this,arguments)}}()),Ze&&1==Ze?.length){const vt=yield(0,Ge.J0M)(Number(Ce.userConcept));(yield(0,Ge.kqu)(vt,je,"contact","",!0))?.map(function(){var It=(0,at.Z)(function*(yt){yield(0,Ge.TAP)(yt?.id)});return function(yt){return It.apply(this,arguments)}}())}}});return function(Be){return ce.apply(this,arguments)}}())}catch{console.error("Error: search and delete Entity Contact")}})()}deleteFolderConnection(qe,oe){return(0,at.Z)(function*(){const ee=yield(0,Ge.Mu8)(Number(qe)),Ce=[];for(const le of oe){const de=yield(0,Ge.Mu8)(Number(le)),he=yield(0,Ge.kqu)(ee,de,"",rt.u,!0),ce=yield(0,Ge.kqu)(ee,de,"",rt.NF,!0);yield Promise.all(ce?.map(function(){var Be=(0,at.Z)(function*($e){yield(0,Ge.TAP)($e?.id)});return function($e){return Be.apply(this,arguments)}}())),he?.map(function(){var Be=(0,at.Z)(function*($e){yield(0,Ge.TAP)($e?.id)});return function($e){return Be.apply(this,arguments)}}()),Ce.push({success:!0,id:le})}return Ce})()}};let it=bt;return bt.\u0275fac=function(oe){return new(oe||bt)(xt.LFG(X.e),xt.LFG(Ct.s),xt.LFG(Rt.o),xt.LFG($.e),xt.LFG(be._),xt.LFG(Q))},bt.\u0275prov=xt.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"root"}),it})()},4383:(Jn,Wn,St)=>{"use strict";St.d(Wn,{s:()=>it});var at=St(5861),Zt=St(7899),Ge=St(2902),Wt=St(9653);const rt=(0,Wt.ZF)("mycategories");var be=St(4650),Q=St(384),Bt=St(8154);let it=(()=>{const Lt=class{constructor(oe,ee,Ce){this.authService=oe,this.itemService=ee,this.store=Ce,this.allCategories$=this.store.pipe((0,Wt.Ys)((0,Wt.P1)(rt,Lt=>typeof Lt>"u"?null:Lt.filter(oe=>oe?.name)))),this.allTotalFolders=[],this.canCreateFolder=!1}nest(oe,ee=""){return oe.filter(Ce=>Ce?.parent==ee).map(Ce=>({...Ce,children:this.nest(oe,Ce?.id)}))}getSiblingFolders(oe,ee){return ee.filter(le=>oe?le?.parent==oe:""==le?.parent).map(le=>le?.name)}getFolderDirectory(oe,ee,Ce=[]){if(oe){const le=ee.filter(he=>he?.id==oe)[0],de=le?.parent;Ce.unshift(le),de&&this.getFolderDirectory(de,ee,Ce)}}getNodeDirectory(oe,ee){const Ce=[];let le=[...ee];if(oe?.length>0)return oe.forEach(de=>{const he=le.filter(ce=>ce?.id==de?.id)[0];Ce.push(he),le=he?.children}),Ce}getAllDescendentFolders(oe,ee=[],Ce){const le=[...Ce];for(const de in le)le[de]?.category_parent==oe&&(ee.push(le[de]?.category_name?.toLowerCase()),this.getAllDescendentFolders(le[de]?.id,ee,Ce))}checkUserSubscription(oe){var ee=this;return(0,at.Z)(function*(){return new Promise((Ce,le)=>{ee.checkDataType=oe;const de=ee.authService.loadFromLocalStorage();var he;ee.userConceptId=de.userConcept,ee.itemService.getMySubscription().subscribe({next:(he=(0,at.Z)(function*(ce){ee.subscribedPlanId=ce?.pricings?.[0]?.productId;let Be="",$e=!1;if(!ee.subscribedPlanId){const vt=(yield ee.getFreePlanDetails())?.filter(It=>"0"===It?.internal_product?.data?.price);Be=vt[0]?.internal_product?.data?.name,ee.subscribedPlanId=Number(vt[0]?.internal_product?.id)}$e=yield ee.checkPlanLimitation();let ae=0,je=0;"folder"===ee.checkDataType?(ae=Number(ee.userFolderLimit),je=ee.allTotalFolders.length):"file"===ee.checkDataType?(ae=ee.filesUploadLimit,je=ee.uploadedFilesCount):"fileSize"===ee.checkDataType&&(ae=ee.filesUploadSizeLimit,je=0),Ce({limit:ae,createdCount:je,isAllowedToCreate:$e,subscription:Be})}),function(Be){return he.apply(this,arguments)}),error:he=>{console.error(he),le(he)},complete:()=>{}})})})()}checkPlanLimitation(){var oe=this;return(0,at.Z)(function*(){return new Promise(ee=>{var le;oe.itemService.searchLinkMultipleAll([{composition:oe.subscribedPlanId,listLinkers:[`${Ge.$t}_s`,`${Ge.aJ}_s`,`${Ge.r}_s`],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:(le=(0,at.Z)(function*(de){if(console.log("RESPONSE",de),oe.userFolderLimit=de?.internal_product?.[`internal_product_s_${Ge.$t}_s`]?.[0]?.[Zt.FK]?.data?.limit,oe.filesUploadLimit=de?.internal_product?.[`internal_product_s_${Ge.aJ}_s`]?.[0]?.[Zt.aK]?.data?.limit,oe.filesUploadSizeLimit=de?.internal_product?.[`internal_product_s_${Ge.r}_s`]?.[0]?.[Zt.s$]?.data?.limit,"folder"===oe.checkDataType){const he=yield oe.checkCreatedFolders();ee(he)}else if("file"===oe.checkDataType){const he=yield oe.checkUploadFileLimitations();ee(he)}else if("fileSize"===oe.checkDataType){const he=oe.filesUploadSizeLimit?.toLowerCase();let ce,Be;if(he&&(ce=he.includes("mb"),Be=he.includes("gb")),ce){const $e=he.split("mb"),st=1024*Number($e[0]);ee(st)}else if(Be){const $e=he.split("gb"),st=1024*Number($e[0])*1024;ee(st)}}}),function(he){return le.apply(this,arguments)})})})})()}checkUserSubscription_old(oe){var ee=this;return(0,at.Z)(function*(){return new Promise((Ce,le)=>{ee.checkDataType=oe;const de=ee.authService.loadFromLocalStorage();var ce;ee.userConceptId=de.userConcept,ee.itemService.getSemanticConnection({compositionId:ee.userConceptId,linker:Ge.PJ+"_s"}).subscribe({next:(ce=(0,at.Z)(function*(Be){let $e="",st=!1;if(Be.count&&Be.output.length){const Pt=Be?.output?.sort((yt,Et)=>{const Qt=new Date(yt?.data[Zt.LI].timestamp).getTime(),Yt=new Date(Et?.data[Zt.LI].timestamp).getTime();return Number(Yt)-Number(Qt)});ee.subscribedPlanId=Number(Pt[0]?.id),$e=Pt[0]?.data[Zt.LI]?.name,st=yield ee.checkLimitation()}else{const It=(yield ee.getFreePlanDetails())?.filter(Yt=>"0"===Yt?.internal_product?.data?.price);$e=It[0]?.internal_product?.data?.name;const Et=Number(It[0]?.internal_product?.id);st=yield ee.updateUserToFreePackage(Et)}const je={...ee.authService.loadFromLocalStorage(),pkg:$e};ee.authService.saveToLocalStorage(je);let Ze=0,Xe=0;"folder"===ee.checkDataType?(Ze=Number(ee.userFolderLimit),Xe=ee.allTotalFolders.length):"file"===ee.checkDataType&&(Ze=ee.filesUploadLimit,Xe=ee.uploadedFilesCount),Ce({limit:Ze,createdCount:Xe,isAllowedToCreate:st,subscription:$e,subscriptionId:ee.subscribedPlanId})}),function($e){return ce.apply(this,arguments)}),error:ce=>{console.error(ce),le(ce)},complete:()=>{}})})})()}updateUserToFreePackage(oe){var ee=this;return(0,at.Z)(function*(){return new Promise((Ce,le)=>{const de={compositionJsons:[{[Zt.LI]:{id:oe,name:"Free",time:"yearly",price:0,timestamp:(new Date).toISOString(),expireDate:"Never"}}],compositionToJoin:ee.userConceptId,direction:"backward",linker:Ge.PJ,both:!0,count:!0};ee.itemService.createCompositionAndLinker(de).subscribe({next:he=>{const ce=he?.data[0][Zt.LI]?.id;ee.subscribedPlanId=ce;const Be=ee.connectPackageToProductDetails(oe);Ce(Be)},error:he=>{console.error(he),le(he)},complete:()=>{}})})})()}connectPackageToProductDetails(oe){var ee=this;return(0,at.Z)(function*(){return new Promise(Ce=>{var de;ee.itemService.createSemanticConnection({compositionId1:oe,compositionId2:ee.subscribedPlanId,linker:Ge.uC}).subscribe({next:(de=(0,at.Z)(function*(){const he=yield ee.checkLimitation();Ce(he)}),function(){return de.apply(this,arguments)}),error:de=>{console.error(de)},complete:()=>{}})})})()}checkLimitation(){var oe=this;return(0,at.Z)(function*(){return new Promise(ee=>{var le;oe.itemService.searchLinkMultipleAll([{composition:oe.userConceptId,listLinkers:[`${Ge.PJ}_s`],inpage:100,page:1,logic:"or",filterSearches:[]},{listLinkers:[`${Ge.uC}_by`]},{listLinkers:[`${Ge.$t}_s`,`${Ge.aJ}_s`]}]).subscribe({next:(le=(0,at.Z)(function*(de){const he=de?.the_user?.the_user_s_get_package_s;if(he.length){let ce={};if(ce=de?.the_user?.the_user_s_get_package_s[0],he.length>1&&(ce=he?.sort((st,ae)=>{const je=new Date(st[Zt.LI]?.data?.timestamp).getTime(),Ze=new Date(ae[Zt.LI]?.data?.timestamp).getTime();return Number(Ze)-Number(je)})[0]),ce?.[Zt.LI]?.subscription_package_s_package_product_by){const $e=ce?.[Zt.LI]?.subscription_package_s_package_product_by?.[0]?.internal_product?.internal_product_s_folder_limit_s?.[0]?.[Zt.FK]?.data?.limit;oe.userFolderLimit=$e;const st=ce?.[Zt.LI]?.subscription_package_s_package_product_by?.[0]?.internal_product?.internal_product_s_upload_file_limit_s?.[0]?.[Zt.aK]?.data?.limit;oe.filesUploadLimit=st}}if("folder"===oe.checkDataType){const ce=yield oe.checkCreatedFolders();ee(ce)}if("file"===oe.checkDataType){const ce=yield oe.checkUploadFileLimitations();ee(ce)}}),function(he){return le.apply(this,arguments)})})})})()}checkCreatedFolders(){return new Promise((oe,ee)=>{this.allCategories$.subscribe({next:Ce=>{this.allTotalFolders=Ce;const le=Number(this.userFolderLimit);this.canCreateFolder=this.allTotalFolders.length<le||!0===isNaN(le),oe(this.canCreateFolder)},error:Ce=>{console.error(Ce),ee(Ce)}})})}getFreePlanDetails(){return new Promise(oe=>{this.itemService.listAllWithoutAuthWithLinker([{type:"internal_product",listLinkers:[`${Ge.$t}_s`,`${Ge.aJ}_s`],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:Ce=>{oe(Ce)}})})}checkUploadFileLimitations(){return new Promise((oe,ee)=>{this.itemService.getSemanticConnection({compositionId:this.userConceptId,linker:`${Ge.cx}_s`}).subscribe({next:le=>{const de=le?.output;this.uploadedFilesCount=de?de.length:0;let he=!1;const ce=Number(this.filesUploadLimit);he=this.uploadedFilesCount<ce||!0===isNaN(ce),oe(he)},error:le=>{console.error(le),ee(le)}})})}checkUploadFileLimitations_old(){return new Promise((oe,ee)=>{this.itemService.searchLinkMultipleAll([{composition:this.userConceptId,listLinkers:[`${Ge.cx}_s`],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:le=>{const de=le?.the_user?.[`the_user_s_${Ge.cx}_s`];this.uploadedFilesCount=de?de.length:0;let he=!1;const ce=Number(this.filesUploadLimit);he=this.uploadedFilesCount<ce||!0===isNaN(ce),oe(he)},error:le=>{console.error(le),ee(le)}})})}};let bt=Lt;return Lt.\u0275fac=function(ee){return new(ee||Lt)(be.LFG(Q.e),be.LFG(Bt.e),be.LFG(Wt.yh))},Lt.\u0275prov=be.Yz7({token:Lt,factory:Lt.\u0275fac,providedIn:"root"}),bt})()},9808:(Jn,Wn,St)=>{"use strict";St.d(Wn,{n:()=>Zt});var at=St(6805);function Zt(Ge,Wt){const rt="object"==typeof Wt;return new Promise((xt,X)=>{let Rt,Ct=!1;Ge.subscribe({next:$=>{Rt=$,Ct=!0},error:X,complete:()=>{Ct?xt(Rt):rt?xt(Wt.defaultValue):X(new at.K)}})})}},6636:(Jn,Wn,St)=>{var at=St(7156).default;self,Jn.exports=(()=>{"use strict";var Zt={26:function(xt,X,Ct){var Rt=this&&this.__createBinding||(Object.create?function(ve,fe,Le,xe){void 0===xe&&(xe=Le);var Ae=Object.getOwnPropertyDescriptor(fe,Le);(!Ae||("get"in Ae?!fe.__esModule:Ae.writable||Ae.configurable))&&(Ae={enumerable:!0,get:function(){return fe[Le]}}),Object.defineProperty(ve,xe,Ae)}:function(ve,fe,Le,xe){void 0===xe&&(xe=Le),ve[xe]=fe[Le]}),$=this&&this.__setModuleDefault||(Object.create?function(ve,fe){Object.defineProperty(ve,"default",{enumerable:!0,value:fe})}:function(ve,fe){ve.default=fe}),be=this&&this.__importStar||function(ve){if(ve&&ve.__esModule)return ve;var fe={};if(null!=ve)for(var Le in ve)"default"!==Le&&Object.prototype.hasOwnProperty.call(ve,Le)&&Rt(fe,ve,Le);return $(fe,ve),fe},Q=this&&this.__awaiter||function(ve,fe,Le,xe){return new(Le||(Le=Promise))(function(ze,lt){function He(mt){try{Ve(xe.next(mt))}catch(Ut){lt(Ut)}}function Oe(mt){try{Ve(xe.throw(mt))}catch(Ut){lt(Ut)}}function Ve(mt){mt.done?ze(mt.value):function Ae(ze){return ze instanceof Le?ze:new Le(function(lt){lt(ze)})}(mt.value).then(He,Oe)}Ve((xe=xe.apply(ve,fe||[])).next())})};Object.defineProperty(X,"__esModule",{value:!0}),X.handleAddSharedWithMeFolder=X.getPathToFolder=X.deleteFolder=X.createFolder=X.setCurrentFolderId=X.updateSelectedFolders=X.insertFolderListItem=X.handleFolderRightOption=X.getAllFolders=X.nestedInsertFolderTree=X.addEventListenerToCheckboxElement=X.folderToggler=X.createNestedTreeAndAddToDOM=X.currentFolderId=X.globalFolders=X.selectedFolders=void 0;const Bt=be(Ct(215)),it=Ct(793),bt=be(Ct(793)),Lt=Ct(726),qe=Ct(777),oe=Ct(356);X.selectedFolders=[],X.globalFolders=[];let ee=[],Ce={},le=[],de=!1,he=!1,ce=!1,Be=[],$e=[];function st(ve){return Q(this,void 0,void 0,function*(){try{const fe=ve.querySelectorAll(`#${it.myprefix}category_list_tree`);if(!fe.length)return;ve.getElementById(`${it.myprefix}loader`);const xe=yield Bt.getUser();fe?.forEach(Ae=>{for(var ze;Ae?.firstChild;)null===(ze=Ae?.firstChild)||void 0===ze||ze.remove();let lt=ve.querySelectorAll(`.${it.myprefix}root_folder`);lt?.length>0&&lt.forEach(Ve=>Ve?.remove());let He=document.createElement("div");He.classList.add(`${it.myprefix}root_folder`),He.textContent="Boom",He.addEventListener("contextmenu",Ve=>{Ve.preventDefault(),Oe?.params.disableRightClick||Qt(Ve,ve,!1)});const Oe=(0,oe.getCurrentTreeParams)(ve);Vt(He,Oe),Yt(He,Oe),Ae.before(He),console.log("Folder MS Completed Adding root listeners"),Ze(Ae,xe.userConcept,ve,Oe),console.log("Folder MS Completed Adding nested tree"),ae(ve)}),_t(ve)}catch(fe){console.error("Error in creating nested tree",fe)}})}function ae(ve){let fe=ve.querySelectorAll(`.${it.myprefix}toggler`);for(let Le=0;Le<fe.length;Le++)fe[Le].addEventListener("click",function(){this.parentElement.querySelector(`.${it.myprefix}submenuLevel`).classList.toggle(`${it.myprefix}active`);let xe=this.parentElement.querySelector(`.${it.myprefix}openFolderContent`).getAttribute("data-folder-id");ee=ee.includes(xe)?ee.filter(Ae=>Ae!==xe):[...ee,xe]})}function je(ve){ve?.addEventListener("change",fe=>{null!=X.selectedFolders&&X.selectedFolders.some(Le=>Le.id==fe.target.value)?X.selectedFolders=null==X.selectedFolders?void 0:X.selectedFolders.filter(Le=>Le.id!=fe.target.value):X.selectedFolders.push({name:fe.target.name,id:fe.target.value})})}function Ze(ve,fe,Le,xe,Ae=!1){var ze,lt,He,Oe;try{const Ve=$e.find(nt=>"the_user_s_read_access"==nt.characterValue),mt=new Map;le.filter(nt=>{var Ot,Gt;return 1==fe?Ve?.id==nt.typeId&&(null===(Gt=null===(Ot=Ce?.[nt.toTheConceptId])||void 0===Ot?void 0:Ot.data)||void 0===Gt?void 0:Gt.boomFolder):nt.ofTheConceptId==fe&&Ve?.id!=nt.typeId}).sort((nt,Ot)=>{var Gt,cn,qt,dn;if(1===nt.toTheConceptId)return 1;if(1===Ot.toTheConceptId)return-1;const In=Ce?.[nt.toTheConceptId],On=Ce?.[Ot.toTheConceptId],Jt=(null===(cn=null===(Gt=In?.data)||void 0===Gt?void 0:Gt[Lt.boomFolderComposition])||void 0===cn?void 0:cn.name)||"",Cn=(null===(dn=null===(qt=On?.data)||void 0===qt?void 0:qt[Lt.boomFolderComposition])||void 0===dn?void 0:dn.name)||"";return Jt?.localeCompare(Cn||"")}).map(nt=>{const Ot=`${nt.ofTheConceptId}-${nt.toTheConceptId}`;mt.has(Ot)||mt.set(Ot,nt)});const Ut=Array.from(mt.values());let At=0;for(let nt=0;nt<Ut.length;nt++){let Ot=Ut[nt],Gt=Ce[Ot.toTheConceptId],cn=Gt?.id,qt="";if(!(null===(ze=Gt?.data)||void 0===ze)&&ze[Lt.boomFolderComposition]&&(qt=null===(He=null===(lt=Gt?.data)||void 0===lt?void 0:lt[Lt.boomFolderComposition])||void 0===He?void 0:He.name),!qt||!cn){At+=1;continue}let dn=It(ve,cn,qt,Le,xe,Ae);null!==(Oe=xe?.params)&&void 0!==Oe&&Oe.showCheckbox&&je(dn);let In=!1;if(1==Ot.id&&le.some(On=>{var Jt,Cn;return Ve?.id==On.typeId&&(null===(Cn=null===(Jt=Ce?.[On.toTheConceptId])||void 0===Jt?void 0:Jt.data)||void 0===Cn?void 0:Cn.boomFolder)})&&(In=!0),le.some(On=>Ot.toTheConceptId==On.ofTheConceptId)||In){let On=ve.querySelectorAll(":scope > li")[nt-At];On.setAttribute("class",`${it.myprefix}has_submenu`);let Jt=document.createElement("ul"),Cn=document.createElement("span");Cn.setAttribute("class",`${it.myprefix}toggler`),Jt.setAttribute("class",`${it.myprefix}submenuLevel`),(ee.includes(Gt.id.toString())||X.currentFolderId==cn)&&Jt.classList.add(`${it.myprefix}active`),On.append(Jt);let to=On.querySelectorAll("ul")[0];On.insertBefore(Cn,to),Ze(to,Ot.toTheConceptId,Le,xe,!!In||Ae)}}}catch(Ve){console.error("FolderMS nested Intert Folder Error:",Ve)}}function Xe(ve,fe){return Q(this,void 0,void 0,function*(){qe.Logger.logfunction("getAllFolders");try{he=!0;const xe=(yield Bt.getUser())?.userConcept;let Ae=yield(0,qe.RecursiveSearchApiRaw)(xe,[],"",["the_boom_folder_s_folder","the_user_s_read_access"]);console.log("FolderMS",Ae);let ze=Ae.compositionIds,lt=Ae.internalConnections,He=Ae.externalConnections,Oe=yield(0,qe.GetCompositionFromConnectionsWithDataIdIndex)(ze,lt),Ve=yield(0,qe.GetConnectionBulk)(He),mt=[],Ut=[],At=[];Ce=Oe,le=yield Promise.all(Ve.filter(nt=>{var Ot;const Gt=`${nt.ofTheConceptId}-${nt.toTheConceptId}`,cn=`${nt.toTheConceptId}-${nt.ofTheConceptId}`;if(At.includes(Gt))return!1;At.push(Gt),At.push(cn),mt.includes(nt.typeId)||mt.push(nt.typeId);const qt=Ce?.[nt.toTheConceptId];return!!(null===(Ot=qt?.data)||void 0===Ot?void 0:Ot[Lt.boomFolderComposition])}));for(let nt=0;nt<mt.length;nt++)Ut.push((0,qe.GetTheConcept)(mt[nt]));if($e=yield Promise.all(Ut),yield Ee(xe,ve,fe),yield function Ft(ve,fe,Le){var xe,Ae,ze,lt;return Q(this,void 0,void 0,function*(){qe.Logger.logfunction("setGlobalFolders",[fe]);let He=[];for(let Oe=0;Oe<ve.length;Oe++){const Ve=ve[Oe],mt=Le[Ve.toTheConceptId];null!==(Ae=null===(xe=mt?.data)||void 0===xe?void 0:xe[Lt.boomFolderComposition])&&void 0!==Ae&&Ae.name&&He.push({id:Ve.toTheConceptId,name:(null===(lt=null===(ze=mt?.data)||void 0===ze?void 0:ze[Lt.boomFolderComposition])||void 0===lt?void 0:lt.name)||"",parent:Ve.ofTheConceptId==fe?"":Ve.ofTheConceptId.toString()})}X.globalFolders=He?.filter(Oe=>Oe&&Oe?.name),X.globalFolders=null==X.globalFolders?void 0:X.globalFolders.sort(function(Oe,Ve){var mt,Ut;let At=null===(mt=Oe?.name)||void 0===mt?void 0:mt.toLowerCase(),nt=null===(Ut=Ve?.name)||void 0===Ut?void 0:Ut.toLowerCase();return At.localeCompare(nt)})})}(Ve,xe,Oe),console.log("FolderMS fetched all folders adding to tree"),ce=!0,he=!1,ve){const nt=(0,oe.getShadowRoot)(ve);if(!nt)return X.globalFolders;yield st(nt)}else fe&&(yield st(fe));return X.globalFolders}catch(Le){console.error("Error in fetching folders",Le)}})}function vt(ve,fe,Le,xe=!1){var Ae,ze;ee=[...ee,fe.toString()];let lt=Le.querySelectorAll(`#${it.myprefix}new_category_wrapper`);lt?.length>0&&lt.forEach(Jt=>Jt?.remove());let He=document.createElement("div");He.setAttribute("id",`${it.myprefix}new_category_wrapper`);let Oe=document.createElement("input");Oe.setAttribute("type","text"),Oe.setAttribute("id",`${it.myprefix}new_category_input`),Oe.setAttribute("class",`${it.myprefix}field_input`),Oe.setAttribute("placeholder","New Folder name");const Ve="New Folder";let Ut=X.globalFolders.filter(Jt=>Jt?.parent==fe).filter(Jt=>{let Cn=Jt?.name;return Jt?.parent==fe&&Cn.match(/^New Folder \([0-9]*\)/gm)||Cn.match(/^New Folder/gm)}),At=Ut.sort((Jt,Cn)=>{var to,jo;return(null===(to=Jt?.name)||void 0===to?void 0:to.replace(/\D/g,""))-(null===(jo=Cn?.name)||void 0===jo?void 0:jo.replace(/\D/g,""))}),Ot=(null===(Ae=At[At.length-1])||void 0===Ae?void 0:Ae.name)?.replace(/\D/g,"");Oe.value=Ut.length>0?Ve+` (${Number(Ot)+1})`:Ve,xe&&(Oe.value=ve.getAttribute("data-name"));let Gt=document.createElement("div");Gt.setAttribute("class",`${it.myprefix}field_error`);let cn=document.createElement("div");cn.setAttribute("class",`${it.myprefix}field_success`);let qt=document.createElement("input");qt.setAttribute("type","button"),qt.setAttribute("id",`${it.myprefix}new_category_button`),qt.setAttribute("value","Save");let dn=document.createElement("input");if(dn.setAttribute("type","button"),dn.setAttribute("id",`${it.myprefix}small_close_button`),dn.setAttribute("value","Close"),He.append(Oe),He.append(Gt),He.append(qt),He.append(dn),xe){const Jt=X.globalFolders.find(to=>to.id.toString()==ve.getAttribute("data-id"));Le.querySelector(`[data-id="${Jt.id}"]`)?.insertAdjacentElement("afterend",He)}else ve?.append(He);Oe.focus(),Oe.select();let In=!1;Oe.addEventListener("focusout",Jt=>{In?In=!1:Pt(fe,Oe,He,Gt,cn,Le,xe)}),Oe.addEventListener("keyup",Jt=>{"Escape"==Jt.key?(In=!0,He?.remove(),setTimeout(()=>{In&&(In=!1)},200)):"Enter"==Jt.key&&Pt(fe,Oe,He,Gt,cn,Le,xe)}),null===(ze=document.querySelectorAll(`.${it.myprefix}sidebar_body`)[0])||void 0===ze||ze.append(cn),qt.addEventListener("click",Jt=>Q(this,void 0,void 0,function*(){return Pt(fe,Oe,He,Gt,cn,Le,xe)})),dn.addEventListener("click",Jt=>{He?.remove()})}function Pt(ve,fe,Le,xe,Ae,ze,lt){if(de)return;de=!0;const He=X.globalFolders.find(Ve=>Ve.id==ve);let Oe=!1;if(lt?He&&He?.name&&"Contacts"!=He.name&&"Projects"!=He.name&&"Chats"!=He.name&&(Oe=""!=fe.value.trim()&&!(null!=X.globalFolders&&X.globalFolders.some(Ve=>Ve?.name==fe.value.trim()&&Ve?.parent==He.parent))):Oe=""!=fe.value.trim()&&!(null!=X.globalFolders&&X.globalFolders.some(Ve=>Ve?.name==fe.value.trim()&&Ve?.parent==ve)),!lt&&Oe){let Ve={};Ve=ve?{name:fe.value.trim(),parent:ve}:{name:fe.value.trim(),parent:""},Le?.remove(),Q(this,void 0,void 0,function*(){yield Kt(Ve.name,""==Ve.parent?void 0:parseInt(Ve.parent),ze),Ae.innerHTML="New Folder Created!",setTimeout(()=>{Ae.remove()},2500),xe.innerHTML=""})}else lt&&Oe?Q(this,void 0,void 0,function*(){var Ve;const mt=Ce[He.id],Ut=new qe.PatcherStructure;Ut.compositionId=He.id,!(null===(Ve=mt?.data)||void 0===Ve)&&Ve.boomFolder&&(Ut.patchObject={name:fe.value.trim()},Ce[He.id].data.boomFolder.name=fe.value.trim()),X.globalFolders=X.globalFolders.map(At=>At.id==He.id?Object.assign(Object.assign({},At),{name:fe.value.trim()}):At),setTimeout(()=>{if(Le?.parentNode)try{Le?.remove()}catch(At){console.log(At)}},0),yield st(ze),yield(0,qe.UpdateCompositionLocal)(Ut),Xt({id:He.id,name:fe.value,parent:He.parent},"update"),Ae.innerHTML="Updated Folder!",setTimeout(()=>{Ae?.remove()},2500),xe.innerHTML="",setTimeout(()=>Q(this,void 0,void 0,function*(){yield Xe(void 0,ze)}),500)}):lt&&!Oe?(console.log(Le,"formwrapper not allwoed but is update"),Ae.innerHTML="",xe.innerHTML="Folder already exists or not valid."):(Ae.innerHTML="",xe.innerHTML="Folder already exists or not valid.");de=!1}function It(ve,fe,Le,xe,Ae,ze=!1){var lt,He;let Oe=document.createElement("li");Oe.setAttribute("data-id",fe),Oe.setAttribute("data-name",Le);let Ve=document.createElement("label"),mt=null;Ae.params.showCheckbox&&(mt=document.createElement("input"),mt.setAttribute("type","checkbox"),mt.setAttribute("id",it.myprefix+Le),mt.setAttribute("value",fe),mt.setAttribute("name",Le),mt.checked=function yt(ve){return!!Array.isArray(X.selectedFolders)&&!(null==X.selectedFolders||!X.selectedFolders.find(fe=>fe.id==ve))}(fe),mt.setAttribute("class",`${it.myprefix}folder_checkbox`),(null!==(lt=parseInt(fe))&&void 0!==lt?lt:0)<0&&(mt.style.display="none"),Ve.append(mt)),!(null===(He=Ae?.params)||void 0===He)&&He.onCurrentFolderChange&&X.currentFolderId==parseInt(fe)&&Ve.classList.add(`${it.myprefix}current_folder`),Vt(Ve,Ae),"1"!=fe&&Yt(Oe,Ae),Oe.append(Ve);const Ut=document.createElement("span");return Ut.innerText=Le,Ut.classList.add(it.myprefix+"openFolderContent"),Ut.setAttribute("data-folder-id",fe),Ve.append(Ut),Ve.addEventListener("contextmenu",At=>{var nt;At.preventDefault(),"1"!=fe&&(null===(nt=Ae?.params)||void 0===nt||!nt.disableRightClick)&&!ze&&Qt(At,xe)}),ve.append(Oe),mt}function Qt(ve,fe,Le=!0){var xe,Ae,ze,lt,He;null===(xe=fe.getElementById(`${it.myprefix}folder_actions`))||void 0===xe||xe.remove();const Oe=ve.currentTarget.parentElement;let Ve=Oe.getAttribute("data-id"),mt=ve.pageY+5-window.scrollY,Ut=ve.pageX+5-window.scrollX;window.innerHeight>200&&window.innerHeight-mt<115?mt-=125:window.innerWidth>300&&window.innerWidth-Ut<130&&(Ut-=125);let At=`\n  <div id="${it.myprefix}folder_actions" \n    style="top: ${mt}px; left: ${Ut}px;">\n    <ul>\n      <li><a id="${it.myprefix}folder_action_create" role="button">New Folder</a></li>\n      ${Le?`\n        <li><a id="${it.myprefix}folder_action_rename" role="button">Rename Folder</a></li>\n        <li><a id="${it.myprefix}folder_action_delete" role="button">Delete Folder</a></li>\n        `:""}\n    </ul>\n  </div>\n  `;null===(Ae=fe.querySelector(`.${it.myprefix}boom_sidebar`))||void 0===Ae||Ae.insertAdjacentHTML("beforeend",At);const nt=()=>{var Ot;null===(Ot=fe.getElementById(`${it.myprefix}folder_actions`))||void 0===Ot||Ot.remove(),window.removeEventListener("click",nt)};window.addEventListener("click",nt),fe.addEventListener("click",Ot=>{var Gt,cn;null!==(Gt=fe.querySelector(`.${it.myprefix}boom_sidebar #${it.myprefix}folder_actions`))&&void 0!==Gt&&Gt.contains(Ot.target)||null===(cn=fe.getElementById(`${it.myprefix}folder_actions`))||void 0===cn||cn.remove()}),null===(ze=fe.getElementById(`${it.myprefix}folder_action_create`))||void 0===ze||ze.addEventListener("click",()=>{var Ot;vt(Oe,Ve,fe),null===(Ot=fe.getElementById(`${it.myprefix}folder_actions`))||void 0===Ot||Ot.remove()}),null===(lt=fe.getElementById(`${it.myprefix}folder_action_rename`))||void 0===lt||lt.addEventListener("click",()=>{vt(Oe,Ve,fe,!0)}),null===(He=fe.getElementById(`${it.myprefix}folder_action_delete`))||void 0===He||He.addEventListener("click",()=>Q(this,void 0,void 0,function*(){var Ot,Gt,cn;null===(Ot=fe.getElementById(`${it.myprefix}folder_actions`))||void 0===Ot||Ot.remove();const qt=X.globalFolders.find(In=>In.id==parseInt(Ve));let dn=(0,oe.getCurrentTreeParams)(fe);null!==(Gt=dn?.params)&&void 0!==Gt&&Gt.manualDeleteFn?null===(cn=dn?.params)||void 0===cn||cn.manualDeleteFn(qt):(yield Pe(qt,fe),yield Xe(void 0,fe))}))}function Yt(ve,fe){var Le;null!=(null===(Le=fe?.params)||void 0===Le?void 0:Le.dropFn)&&(ve.addEventListener("dragover",xe=>{var Ae,ze,lt,He;if(xe.preventDefault(),null===(Ae=xe.currentTarget)||void 0===Ae||!Ae.querySelector(`.${it.myprefix}dragover`)){let Oe=document.createElement("div");null===(ze=Oe?.classList)||void 0===ze||ze.add(`${it.myprefix}dragover`),xe.currentTarget.querySelector("label")?null===(lt=xe.currentTarget.querySelector("label"))||void 0===lt||lt.insertAdjacentElement("afterend",Oe):null===(He=xe.currentTarget)||void 0===He||He.append(Oe)}}),ve.addEventListener("dragleave",xe=>{var Ae,ze;xe.preventDefault(),null===(ze=null===(Ae=xe.currentTarget)||void 0===Ae?void 0:Ae.querySelector(`.${it.myprefix}dragover`))||void 0===ze||ze.remove()}),ve.addEventListener("drop",xe=>{var Ae,ze,lt,He;xe.preventDefault(),xe.stopPropagation(),null===(ze=null===(Ae=xe.currentTarget)||void 0===Ae?void 0:Ae.querySelector(`.${it.myprefix}dragover`))||void 0===ze||ze.remove();let Oe=X.globalFolders.find(Ve=>Ve.id.toString()==xe.currentTarget.getAttribute("data-id"));Oe||(Oe={id:void 0,name:void 0}),null!==(lt=fe?.params)&&void 0!==lt&&lt.dropFn&&(null===(He=fe?.params)||void 0===He||He.dropFn(xe,Oe))}))}function Vt(ve,fe){var Le,xe,Ae,ze,lt;if(null!==(Le=fe?.params)&&void 0!==Le&&Le.onCurrentFolderChange){ve.addEventListener("click",Oe=>{var Ve,mt,Ut,At;const nt=null===(Ve=Oe?.currentTarget)||void 0===Ve?void 0:Ve.parentElement,Ot=nt?.getAttribute("data-id");if("li"==nt.tagName.toLowerCase()&&nt.querySelector(":scope > ul")){null===(mt=nt.querySelector(":scope > ul"))||void 0===mt||mt.classList.add(`${it.myprefix}active`);let Gt=nt.getAttribute("data-id");ee=[...ee,Gt]}null!==(Ut=fe?.params)&&void 0!==Ut&&Ut.onCurrentFolderChange&&(null===(At=fe?.params)||void 0===At||At.onCurrentFolderChange(Ot?parseInt(Ot):void 0))});const He=document.createElement("span");He.classList.add(`${it.myprefix}clickable_folder_icon_placeholder`),ve.prepend(He),"span"==(null===(xe=ve?.tagName)||void 0===xe?void 0:xe.toLowerCase())&&"li"==(null===(ze=null===(Ae=ve?.parentElement)||void 0===Ae?void 0:Ae.tagName)||void 0===ze?void 0:ze.toLowerCase())&&null!==(lt=ve?.parentElement)&&void 0!==lt&&lt.querySelector(":scope > ul")&&ve.parentElement.addEventListener("click",Oe=>{var Ve,mt,Ut,At;const nt=null===(Ve=Oe?.currentTarget)||void 0===Ve?void 0:Ve.parentElement,Ot=nt?.getAttribute("data-id");if("li"==nt.tagName.toLowerCase()&&nt.querySelector(":scope > ul")){null===(mt=nt.querySelector(":scope > ul"))||void 0===mt||mt.classList.add(`${it.myprefix}active`);let Gt=nt.getAttribute("data-id");ee=[...ee,Gt]}null!==(Ut=fe?.params)&&void 0!==Ut&&Ut.onCurrentFolderChange&&(null===(At=fe?.params)||void 0===At||At.onCurrentFolderChange(Ot?parseInt(Ot):void 0))})}}function Xt(ve,fe){const Le=document.createEvent("Event");Le.initEvent("onBCFolderCreated",!0,!0),Le.folder=ve,Le.actionType=fe,document.dispatchEvent(Le)}function Kt(ve,fe,Le){var xe,Ae,ze;return Q(this,void 0,void 0,function*(){const lt=new qe.LocalTransaction;try{yield lt.initialize(),Date.now();const Oe=fe||bt.config.userConcept;if(Be.some(qt=>qt.name==ve&&qt.parent==Oe))for(;Be.some(qt=>qt.name==ve&&qt.parent==Oe);)yield on(100);Be.push({name:ve,parent:Oe});let Ve=X.globalFolders.find(qt=>qt.name==ve&&qt.parent==Oe);if(Ve)return(0,qe.GetTheConceptLocal)(Ve.id);let Ut,At,mt=!1;const nt=yield Bt.getUser();if(fe){if("Projects"==(null===(Ae=null===(xe=Ce[fe]?.data)||void 0===xe?void 0:xe[Lt.boomFolderComposition])||void 0===Ae?void 0:Ae.name)&&fe==nt.userConcept){mt=!0;const dn=yield Bt.createProject({title:ve});Ut=null===(ze=dn?.data)||void 0===ze?void 0:ze.projectId,At=yield(0,qe.GetTheConceptLocal)(Ut)}}else fe=nt.userConcept;let Ot;if(!mt){const qt={[Lt.boomFolderComposition]:{name:ve,parent:nt.userConcept!=fe?fe:""}};At=yield lt.CreateTheCompositionLocal(qt),Ut=At.id;const dn=yield(0,qe.GetTheConcept)(fe||nt.userConcept);yield lt.CreateConnection(dn,At,"the_boom_folder_s_contain");const In=yield lt.CreateConnection(dn,At,"the_boom_folder_s_folder");le.push(In),Ce[At.id.toString()]={id:At.id,data:qt},Ot=lt.commitTransaction()}let Gt={id:Ut,name:ve,parent:fe||""};X.globalFolders.push(Gt),Be=Be.filter(qt=>qt.name!=ve&&qt.parent!=Oe),Le&&(yield st(Le)),null!=Ot&&(yield Ot);const cn=yield(0,qe.GetTheConceptLocal)(At.id);return cn>0&&(Gt.id=cn.id),Xt(Gt,"create"),Le&&setTimeout(()=>Q(this,void 0,void 0,function*(){yield Xe(void 0,Le)}),50),cn||void 0}catch(He){console.error("Error in creating folder",He),lt.rollbackTransaction()}})}function Pe(ve,fe){var Le,xe,Ae;return Q(this,void 0,void 0,function*(){try{let ze=ve.parent;if(ce||(yield Xe()),!ve)return;ze=ze?parseInt(ze):bt.config.userConcept;let lt=le.filter(Oe=>Oe.ofTheConceptId==ze&&Oe.toTheConceptId==ve.id);for(let Oe=0;Oe<lt.length;Oe++){const Ve=lt[Oe];yield(0,qe.DeleteConnectionById)(Ve.id)}if((yield(0,qe.GetTheConcept)(ve.id)).userId==bt.config.userId&&(yield(0,qe.DeleteConceptById)(ve.id)),yield qe.SyncData.SyncDataOnline(),X.globalFolders=X.globalFolders.filter(Oe=>Oe.id!=ve.id),Xt(ve,"delete"),fe){const Oe=fe.querySelector(`li[data-id="${ve.id}"]`);0==(null===(xe=null===(Le=Oe?.querySelector(":scope > ul"))||void 0===Le?void 0:Le.children)||void 0===xe?void 0:xe.length)&&(Oe?.querySelector(`${it.myprefix}toggler`),null===(Ae=Oe?.querySelector(":scope > ul"))||void 0===Ae||Ae.remove()),Oe?.remove()}return!0}catch(ze){console.error("Error in deleting folder",ze)}})}function _t(ve){var fe,Le,xe,Ae;if(X.currentFolderId){let ze=ve.querySelector(`[data-id="${X.currentFolderId}"]`);for(;ze?.closest("li");){null===(xe=null===(Le=null===(fe=ze?.closest("li"))||void 0===fe?void 0:fe.querySelector(":scope > ul"))||void 0===Le?void 0:Le.classList)||void 0===xe||xe.add(`${it.myprefix}active`);const lt=ze.getAttribute("data-id");lt&&(ee=[...ee,lt]),ze=(null===(Ae=ze.parentElement)||void 0===Ae?void 0:Ae.closest("li"))||null}}}function ye(ve){var fe,Le,xe;let Ae={};return!(null===(fe=ve?.data)||void 0===fe)&&fe[Lt.boomFolderComposition]&&(Ae={id:ve.id,name:null===(xe=null===(Le=ve?.data)||void 0===Le?void 0:Le[Lt.boomFolderComposition])||void 0===xe?void 0:xe.name}),Ae}function Ee(ve,fe,Le){var xe;return Q(this,void 0,void 0,function*(){let Ae;qe.Logger.logfunction("handleAddSharedWithMeFolder",[ve]),fe?Ae=(0,oe.getRenderTreeSidebarOption)(fe):Le&&(Ae=(0,oe.getCurrentTreeParams)(Le)),null!==(xe=Ae?.params)&&void 0!==xe&&xe.sharedFolder&&(Ce[1]={id:1,data:{[Lt.boomFolderComposition]:{name:"Shared With Me",parent:""}}},le.push({id:1,ofTheConceptId:ve,toTheConceptId:1,userId:0,mainKey:0,orderId:1e3,typeId:100201749,accessId:0}))})}function on(ve){return new Promise(fe=>setTimeout(fe,ve))}X.createNestedTreeAndAddToDOM=st,X.folderToggler=ae,X.addEventListenerToCheckboxElement=je,X.nestedInsertFolderTree=Ze,X.getAllFolders=Xe,X.handleFolderRightOption=vt,X.insertFolderListItem=It,X.updateSelectedFolders=function Et(ve){X.selectedFolders=ve||[]},X.setCurrentFolderId=function nn(ve,fe){var Le,xe;if(X.currentFolderId!=ve&&(X.currentFolderId=ve,fe)){const Ae=(0,oe.getShadowRoot)(fe);let ze=Ae?.querySelectorAll("[data-id]");ze?.forEach(lt=>{var He,Oe;"li"==lt.tagName.toLowerCase()&&(null===(Oe=null===(He=lt.querySelector(":scope > label"))||void 0===He?void 0:He.classList)||void 0===Oe||Oe.remove(`${it.myprefix}current_folder`))}),X.currentFolderId&&(null===(xe=null===(Le=Ae?.querySelector(`[data-id="${X.currentFolderId}"]`))||void 0===Le?void 0:Le.querySelector(":scope > label"))||void 0===xe||xe.classList.add(`${it.myprefix}current_folder`),Ae&&_t(Ae))}},X.createFolder=Kt,X.deleteFolder=Pe,X.getPathToFolder=function et(ve){var fe,Le,xe;return Q(this,void 0,void 0,function*(){try{if(!ve||ve==bt.config.userConcept)return[];ce||(yield Xe());let Ae=ve,ze=[];const lt={id:1,name:"Shared With Me"};if(1==ve||"1"==ve.toString())return[lt];for(;he;)yield on(500);for(;bt.config.userConcept&&Ae&&Ae!=bt.config.userConcept;){let He=X.globalFolders.find(Oe=>Oe.id==Ae);He&&ze.push({id:He.id,name:He.name}),Ae=He?.parent}if(ze.length>0){const He=$e.find(Ve=>"the_user_s_read_access"==Ve.characterValue);le.find(Ve=>Ve.ofTheConceptId==bt.config.userConcept&&Ve.toTheConceptId==ze?.[ze.length-1].id&&Ve.typeId==He?.id)&&ze.push(lt)}if(0==ze.length){const He=yield(0,qe.GetLink)(bt.config.userConcept,"read_access_s",100,1),Oe=He.map(At=>At.id);if(Oe.includes(ve)){const At=He.find(nt=>nt.id=ve);return[lt,{id:At.id,name:null===(Le=null===(fe=At?.data)||void 0===fe?void 0:fe.boomFolder)||void 0===Le?void 0:Le.name}]}const Ve=ye(yield(0,qe.GetCompositionWithId)(ve));if(!Ve?.id)return[];ze.push({id:Ve?.id,name:Ve?.name});let mt=ve,Ut=0;for(;mt&&Ut<10;){Ut++;const At=yield(0,qe.GetLink)(mt,"console_folder_by");if(null!==(xe=At?.[0])&&void 0!==xe&&xe.id){const nt=ye(At[0]);if(nt.id&&nt.name&&ze.push({id:nt?.id,name:nt?.name}),mt=nt?.id,Oe.includes(mt))break}else mt=void 0}ze.push(lt)}return ze.reverse()}catch(Ae){console.error("Error in getting path to folder",Ae)}})},X.handleAddSharedWithMeFolder=Ee},156:function(xt,X,Ct){var Rt=this&&this.__createBinding||(Object.create?function(ee,Ce,le,de){void 0===de&&(de=le);var he=Object.getOwnPropertyDescriptor(Ce,le);(!he||("get"in he?!Ce.__esModule:he.writable||he.configurable))&&(he={enumerable:!0,get:function(){return Ce[le]}}),Object.defineProperty(ee,de,he)}:function(ee,Ce,le,de){void 0===de&&(de=le),ee[de]=Ce[le]}),$=this&&this.__setModuleDefault||(Object.create?function(ee,Ce){Object.defineProperty(ee,"default",{enumerable:!0,value:Ce})}:function(ee,Ce){ee.default=Ce}),be=this&&this.__importStar||function(ee){if(ee&&ee.__esModule)return ee;var Ce={};if(null!=ee)for(var le in ee)"default"!==le&&Object.prototype.hasOwnProperty.call(ee,le)&&Rt(Ce,ee,le);return $(Ce,ee),Ce},Q=this&&this.__awaiter||function(ee,Ce,le,de){return new(le||(le=Promise))(function(ce,Be){function $e(je){try{ae(de.next(je))}catch(Ze){Be(Ze)}}function st(je){try{ae(de.throw(je))}catch(Ze){Be(Ze)}}function ae(je){je.done?ce(je.value):function he(ce){return ce instanceof le?ce:new le(function(Be){Be(ce)})}(je.value).then($e,st)}ae((de=de.apply(ee,Ce||[])).next())})};Object.defineProperty(X,"__esModule",{value:!0}),X.FolderTreeModule=X.hasInitialized=X.globalFolders=X.selectedFolders=void 0;const Bt=be(Ct(793)),it=Ct(777);var bt=Ct(26);Object.defineProperty(X,"selectedFolders",{enumerable:!0,get:function(){return bt.selectedFolders}});var Lt=Ct(26);Object.defineProperty(X,"globalFolders",{enumerable:!0,get:function(){return Lt.globalFolders}}),X.hasInitialized=!1,X.default=function qe(ee){return Q(this,void 0,void 0,function*(){Bt.setConfiguration({userToken:ee.token,userId:ee.userId,userConcept:ee.userConcept,apiUrl:ee.apiUrl,aiUrl:ee.aiUrl,nodeUrl:ee.nodeUrl,icons:ee?.icons||{}}),X.hasInitialized||(yield(0,it.init)(ee.apiUrl,ee.aiUrl,ee.token,ee.nodeUrl.replace("/api/v1",""),!1,"Boomconsole_FMS",ee.enableSW,ee.flags,ee.parameters)),X.hasInitialized=!0})};const oe=be(Ct(356));X.FolderTreeModule=oe,console.debug(oe)},215:function(xt,X,Ct){var Rt=this&&this.__createBinding||(Object.create?function(le,de,he,ce){void 0===ce&&(ce=he);var Be=Object.getOwnPropertyDescriptor(de,he);(!Be||("get"in Be?!de.__esModule:Be.writable||Be.configurable))&&(Be={enumerable:!0,get:function(){return de[he]}}),Object.defineProperty(le,ce,Be)}:function(le,de,he,ce){void 0===ce&&(ce=he),le[ce]=de[he]}),$=this&&this.__setModuleDefault||(Object.create?function(le,de){Object.defineProperty(le,"default",{enumerable:!0,value:de})}:function(le,de){le.default=de}),be=this&&this.__importStar||function(le){if(le&&le.__esModule)return le;var de={};if(null!=le)for(var he in le)"default"!==he&&Object.prototype.hasOwnProperty.call(le,he)&&Rt(de,le,he);return $(de,le),de},Q=this&&this.__awaiter||function(le,de,he,ce){return new(he||(he=Promise))(function($e,st){function ae(Xe){try{Ze(ce.next(Xe))}catch(vt){st(vt)}}function je(Xe){try{Ze(ce.throw(Xe))}catch(vt){st(vt)}}function Ze(Xe){Xe.done?$e(Xe.value):function Be($e){return $e instanceof he?$e:new he(function(st){st($e)})}(Xe.value).then(ae,je)}Ze((ce=ce.apply(le,de||[])).next())})};Object.defineProperty(X,"__esModule",{value:!0}),X.recursiveSearchNestedLinks=X.createLink=X.getUser=X.createProject=X.createFolder=X.getFolders=X.getToken=void 0;const Bt=be(Ct(793));function it(){return Bt.config.userToken}X.getToken=it,X.getFolders=function bt(){return Q(this,void 0,void 0,function*(){const le=it(),de=`${Bt.config.nodeUrl}/folders`;console.log("what start");const he=yield fetch(de,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+le}});return console.log(he," yay yar res"),he.json()})},X.createFolder=function Lt(le,de){return Q(this,void 0,void 0,function*(){const he=it();return le=`${Bt.config.nodeUrl}/folders`,yield(yield fetch(le,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+he},body:JSON.stringify(de)})).json()})},X.createProject=function qe(le){return Q(this,void 0,void 0,function*(){const de=it();let he=`${Bt.config.nodeUrl}/projects`;return yield(yield fetch(he,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+de},body:JSON.stringify(le)})).json()})},X.getUser=function oe(){return{theUserId:Bt.config.userId,token:Bt.config.userToken,userConcept:Bt.config.userConcept}},X.createLink=function ee(le,de,he){return Q(this,void 0,void 0,function*(){const ce=yield it();return(yield ce)?yield(yield fetch(`${Bt.config.apiUrl}/api/Connection/create-link?composition1=${le}&composition2=${de}&linker=${he}&both=true`,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:`bearer ${ce}`}})).json():[]})},X.recursiveSearchNestedLinks=function Ce(le){return Q(this,void 0,void 0,function*(){const de=yield it();return(yield de)?yield(yield fetch(`${Bt.config.apiUrl}/api/Connection/recursivesearch`,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:`bearer ${de}`},body:JSON.stringify(le)})).json():[]})}},356:function(xt,X,Ct){var Rt=this&&this.__createBinding||(Object.create?function(ae,je,Ze,Xe){void 0===Xe&&(Xe=Ze);var vt=Object.getOwnPropertyDescriptor(je,Ze);(!vt||("get"in vt?!je.__esModule:vt.writable||vt.configurable))&&(vt={enumerable:!0,get:function(){return je[Ze]}}),Object.defineProperty(ae,Xe,vt)}:function(ae,je,Ze,Xe){void 0===Xe&&(Xe=Ze),ae[Xe]=je[Ze]}),$=this&&this.__setModuleDefault||(Object.create?function(ae,je){Object.defineProperty(ae,"default",{enumerable:!0,value:je})}:function(ae,je){ae.default=je}),be=this&&this.__importStar||function(ae){if(ae&&ae.__esModule)return ae;var je={};if(null!=ae)for(var Ze in ae)"default"!==Ze&&Object.prototype.hasOwnProperty.call(ae,Ze)&&Rt(je,ae,Ze);return $(je,ae),je},Q=this&&this.__awaiter||function(ae,je,Ze,Xe){return new(Ze||(Ze=Promise))(function(Pt,It){function yt(Yt){try{Qt(Xe.next(Yt))}catch(Vt){It(Vt)}}function Et(Yt){try{Qt(Xe.throw(Yt))}catch(Vt){It(Vt)}}function Qt(Yt){Yt.done?Pt(Yt.value):function vt(Pt){return Pt instanceof Ze?Pt:new Ze(function(It){It(Pt)})}(Yt.value).then(yt,Et)}Qt((Xe=Xe.apply(ae,je||[])).next())})};Object.defineProperty(X,"__esModule",{value:!0}),X.getRenderTreeSidebarOption=X.removeShadowRoot=X.setShadowRoot=X.getCurrentTreeParams=X.getShadowRoot=X.updateSelectedFolders=X.removeRenderedTreeSidebar=X.renderTreeSidebar=X.shadowRoot=X.deleteFolder=X.getPathToFolder=X.createFolder=X.setCurrentFolderId=X.currentFolderId=X.getAllFolders=X.globalFolders=X.selectedFolders=void 0;const Bt=Ct(793),it=be(Ct(26)),bt=be(Ct(687));var Lt=Ct(26);Object.defineProperty(X,"selectedFolders",{enumerable:!0,get:function(){return Lt.selectedFolders}}),Object.defineProperty(X,"globalFolders",{enumerable:!0,get:function(){return Lt.globalFolders}}),Object.defineProperty(X,"getAllFolders",{enumerable:!0,get:function(){return Lt.getAllFolders}}),Object.defineProperty(X,"currentFolderId",{enumerable:!0,get:function(){return Lt.currentFolderId}}),Object.defineProperty(X,"setCurrentFolderId",{enumerable:!0,get:function(){return Lt.setCurrentFolderId}}),Object.defineProperty(X,"createFolder",{enumerable:!0,get:function(){return Lt.createFolder}}),Object.defineProperty(X,"getPathToFolder",{enumerable:!0,get:function(){return Lt.getPathToFolder}}),Object.defineProperty(X,"deleteFolder",{enumerable:!0,get:function(){return Lt.deleteFolder}});let qe=[];function oe(ae,je=!1){var Ze,Xe,vt;return Q(this,void 0,void 0,function*(){try{const Pt=qe.find(Et=>Et.key==ae.sidebarQuerySelector);Pt?qe=qe.map(Et=>Et.key==ae.sidebarQuerySelector?{params:ae,showHeader:je,key:Pt.key}:Et):qe.push({params:ae,showHeader:je,key:ae.sidebarQuerySelector});const It=Be(ae.sidebarQuerySelector);if(!It)return;null===(Ze=It?.querySelector(`.${Bt.myprefix}boom_sidebar`))||void 0===Ze||Ze.remove(),It.innerHTML=yield bt.sideBarHTML(!!ae.uploadFn),function le(ae){var je,Ze;const Xe=document.createElement("style");Xe.textContent=`\n        /* Reset styles for shadow DOM */\n        /* .${Bt.myprefix}boom_sidebar { */\n          /* all: unset; */\n         *:not(svg path) {\n          all: revert;\n        }\n    \n        /* Styles specific to the shadow root */\n        .${Bt.myprefix}boom_sidebar {\n            width: 100%;\n            color: black;\n            font-family: sans-serif;\n        }\n        /* Other styles */\n    `,ae.prepend(Xe),ae.getElementById(`${Bt.myprefix}generic_boomconsole_style`)&&(null===(je=ae.getElementById(`${Bt.myprefix}generic_boomconsole_style`))||void 0===je||je.remove());let vt=document.createElement("style");vt.id=Bt.myprefix+"generic_boomconsole_style",vt.textContent=bt.generic_boomconsole_style(Bt.config.icons),ae.prepend(vt),ae.getElementById(`${Bt.myprefix}dialog_styles`)&&(null===(Ze=ae.getElementById(`${Bt.myprefix}dialog_styles`))||void 0===Ze||Ze.remove());let Pt=document.createElement("style");Pt.id=Bt.myprefix+"dialog_styles",Pt.textContent=bt.dialog_styles(Bt.config.icons),ae.prepend(Pt)}(It),console.log("FolderMS creating tree with old data"),it.createNestedTreeAndAddToDOM(It),yield it.getAllFolders(ae.sidebarQuerySelector);let yt=it.globalFolders;if(console.log("FolderMS get all folders fetched and completed 123"),!(yt?.length>0)){const Et=It.querySelector(`#${Bt.myprefix}loader`);return null===(vt=Et?.classList)||void 0===vt||vt.add(`${Bt.myprefix}hide`),document.createElement("p").append("You have not created folders yet!"),yt}{let Et=It?.querySelector(`.${Bt.myprefix}boom_sidebar`);Et&&(Et.style.width="100%");const Qt=It.querySelector(`#${Bt.myprefix}loader`);null===(Xe=Qt?.classList)||void 0===Xe||Xe.add(`${Bt.myprefix}hide`);let Yt=It.querySelector(`#${Bt.myprefix}boom_sidebar_header`);je&&Yt&&(Yt.style.display="flex");const Vt=It.getElementById(`${Bt.myprefix}upload_icon`);Vt&&ae.uploadFn&&Vt.addEventListener("click",nn=>{ae.uploadFn&&ae.uploadFn(nn)})}}catch(Pt){console.error("Error occured during folder rendering",Pt)}})}function ee(ae,je=[]){var Ze,Xe,vt,Pt;return Q(this,void 0,void 0,function*(){try{const It=st(ae);null!==(Ze=It?.params)&&void 0!==Ze&&Ze.sidebarQuerySelector?null===(vt=document.querySelector(`${null===(Xe=It?.params)||void 0===Xe?void 0:Xe.sidebarQuerySelector} .${Bt.myprefix}boom_sidebar`))||void 0===vt||vt.remove():null===(Pt=document.querySelector(`.${Bt.myprefix}boom_sidebar`))||void 0===Pt||Pt.remove(),it.updateSelectedFolders(je||[])}catch(It){console.error("Error occured during folder removal",It)}})}X.renderTreeSidebar=oe,X.removeRenderedTreeSidebar=ee,X.updateSelectedFolders=function Ce(ae,je,Ze=!0){var Xe;return Q(this,void 0,void 0,function*(){try{yield it.updateSelectedFolders(je||[]);const vt=st(ae);Ze&&(yield ee(ae,je||[]),null!==(Xe=vt?.params)&&void 0!==Xe&&Xe.sidebarQuerySelector&&(yield oe(vt.params,vt.showHeader)))}catch(vt){console.error("Error occured during category update",vt)}})};let de=[];function Be(ae){let je=document.querySelector(ae);if(!je)return;const Ze=de.find(vt=>vt.domSelector==ae);if(Ze&&je.shadowRoot)return Ze.shadowRoot;de=de.filter(vt=>vt.domSelector!=ae);let Xe={domSelector:ae,shadowRoot:je.attachShadow({mode:"open"})};return de.push(Xe),Xe.shadowRoot}function st(ae){return qe?.find(je=>je.key==ae)}X.getShadowRoot=function he(ae){const je=de.find(Ze=>Ze.domSelector==ae);if(je)return je.shadowRoot},X.getCurrentTreeParams=function ce(ae){const je=de.find(Ze=>Ze.shadowRoot==ae);if(je)return st(je.domSelector)},X.setShadowRoot=Be,X.removeShadowRoot=function $e(ae){const je=document.querySelector(ae);je&&(je.innerHTML=""),de=de.filter(Ze=>Ze.domSelector!=ae)},X.getRenderTreeSidebarOption=st},687:function(xt,X,Ct){var Rt=this&&this.__awaiter||function(oe,ee,Ce,le){return new(Ce||(Ce=Promise))(function(he,ce){function Be(ae){try{st(le.next(ae))}catch(je){ce(je)}}function $e(ae){try{st(le.throw(ae))}catch(je){ce(je)}}function st(ae){ae.done?he(ae.value):function de(he){return he instanceof Ce?he:new Ce(function(ce){ce(he)})}(ae.value).then(Be,$e)}st((le=le.apply(oe,ee||[])).next())})};Object.defineProperty(X,"__esModule",{value:!0}),X.dialog_styles=X.generic_boomconsole_style=X.sideBarHTML=X.boom_theme=void 0;const $=Ct(215),be=Ct(793),Q="https://boomconcole.com/freeschema/dfe603bd-7cd0-403a-9941-d379e5acd5e8.png";X.boom_theme="light",X.sideBarHTML=(oe=!1)=>Rt(void 0,void 0,void 0,function*(){return yield(0,$.getUser)(),`\n  <div class="${be.myprefix}boom_sidebar">\n      <div id="${be.myprefix}boom_sidebar_header" class="${be.myprefix}boom_sidebar_header">\n          <h3>Folders</h3>\n          ${oe?`<span id="${be.myprefix}upload_icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M260-160q-91 0-155.5-63T40-377q0-78 47-139t123-78q25-92 100-149t170-57q117 0 198.5 81.5T760-520q69 8 114.5 59.5T920-340q0 75-52.5 127.5T740-160H520q-33 0-56.5-23.5T440-240v-206l-64 62-56-56 160-160 160 160-56 56-64-62v206h220q42 0 71-29t29-71q0-42-29-71t-71-29h-60v-80q0-83-58.5-141.5T480-720q-83 0-141.5 58.5T280-520h-20q-58 0-99 41t-41 99q0 58 41 99t99 41h100v80H260Zm220-280Z"/></svg></span>`:""}\n      </div>\n      <div class="${be.myprefix}sidebar_body" data-id=""> \n          <div class="${be.myprefix}loader" id="${be.myprefix}loader"></div>  \n          <ul id="${be.myprefix}category_list_tree"></ul>\n      </div>\n  </div>\n  `}),X.generic_boomconsole_style=(oe={})=>`\n  .${be.myprefix}root_folder {\n    font-weight: 700;\n  }\n  .${be.myprefix}current_folder {\n    font-weight: 700 !important;\n    font-size: 14px;\n  }\n  #${be.myprefix}boom_dialog label,\n  #${be.myprefix}root_folder{\n    font-size: 14px;\n    cursor: pointer;\n  }\n  a.${be.myprefix}btn_plus {\n    padding: 0;\n    position: relative;\n    left: 5px;\n    cursor: pointer;\n    background: #aaa;\n    display: inline-block;\n    width: 20px;\n    height: 20px;\n    color: #fff;\n    text-align: center;\n    line-height: 18px;\n    border-radius: 20px;\n    margin-right: 10px;\n    text-decoration: none;\n    display: inline-flex;\n    /* align-items: center; */\n    justify-content: center;\n    font-weight: 500;\n    font-size: 16px\n  }\n  a.${be.myprefix}btn_plus:hover{\n    background: #555;\n  }\n  .${be.myprefix}folder_checkbox {\n    opacity: 1 !important; \n    position: relative !important; \n    width: 14px; \n    height: 14px; \n    border-radius: 2px; \n    -webkit-appearance: checkbox;\n    color-scheme: only light;\n  }\n  #${be.myprefix}category_list_tree li,\n  .${be.myprefix}root_folder {\n    text-align: start;\n    cursor: pointer;\n    background: url(${oe?.folderIcon?oe.folderIcon:Q}) 16px 3px no-repeat;\n    background-size: 16px auto !important;\n    padding-left: 35px !important;\n    position: relative !important;\n    text-wrap: nowrap !important;\n    font-size: 13px;\n    line-height: 24px;\n  }\n  .${be.myprefix}root_folder,\n  li.${be.myprefix}has_submenu:has(> ul.${be.myprefix}active) {\n    background: url(${oe?.openIcon?oe.openIcon:"https://boomconcole.com/freeschema/60491cf1-2a5b-46b6-9aea-c1bd45e081ab.png"}) 16px 3px no-repeat !important;\n    background-size: 16px auto !important;\n  }\n  #${be.myprefix}category_list_tree li label{\n    display: inline-block !important;\n    width: auto !important;\n    cursor: pointer;\n    font-weight: 500;\n  }\n  .${be.myprefix}clickable_folder_icon_placeholder {\n    height: 16px;\n    width: 16px;\n    position: absolute;\n    left: 16px;\n    top: 3px;\n  }\n  .${be.myprefix}is_virtual > label::before {\n    background: url('http://localhost:4200/assets/app-icons/open-folder.png') 16px 3px no-repeat;\n    content: "";\n    background: mediumvioletred;\n    width: 5px;\n    height: 5px;\n    z-index: 1000;\n    position: absolute;\n    border-radius: 50%;\n    top: 3px;\n    left: 30px;\n  }\n  .${be.myprefix}is_virtual a.btn_plus {\n    display: none\n  }\n  #${be.myprefix}small_close_button,\n  #${be.myprefix}new_category_button{\n    background: #777;\n    color: #fff;\n    cursor: pointer;\n    border: none;\n    padding: 4px 10px;\n    margin-left: 10px;\n    font-size: 14px;\n    width: auto;\n    display: none;\n  }\n  #${be.myprefix}new_category_button{\n    background: #333;\n    margin: 0;\n  }\n  #${be.myprefix}new_category_wrapper{\n    margin: 5px 0;\n    cursor: pointer;\n    background: url(${oe?.folderIcon?oe.folderIcon:Q}) 16px 3px no-repeat;\n    background-size: 16px auto;\n    padding-left: 40px;\n    text-wrap: nowrap;\n    position: relative;\n    left: -15px;\n  }\n\n  /* New Folder CSS right click */\n  #${be.myprefix}folder_actions {\n    position: fixed;\n    z-index: 999999;\n    font-size: 14px;\n    line-height: 16px;\n  }\n  #${be.myprefix}folder_actions a {\n    display: block;\n    background: white;\n    color: black;\n    padding: 10px 15px;\n    border: 1px solid lightgray;\n    text-wrap: nowrap;\n    cursor: pointer;\n  }\n  .${be.myprefix}dragover {\n    background-color: rgba(0,0,0, 0.1);\n    display: block;\n    position: relative;\n    transition: all 0.4s;\n    height: 40px;\n    width: 10px;\n    margin-top: -20px;\n  }\n  #${be.myprefix}upload_icon {\n    width: 25px;\n    cursor: pointer;\n  }\n  #${be.myprefix}upload_icon svg {\n    fill: white;\n  }\n  `,X.dialog_styles=(oe={})=>(console.log("icons",oe),`\n  .${be.myprefix}boom_sidebar{\n    font-family: Arial, Helvetica, sans-serif;\n    width: 40%;\n    position: relative;\n    margin-right: 20px;\n  }\n  .${be.myprefix}sidebar_body{\n      /* max-height: 400px; */\n      overflow: auto;\n      padding: 12px 0;\n      min-height: 250px;\n      position: relative;\n      z-index: 3;\n      line-height: 22px;\n  }\n  .${be.myprefix}boom_sidebar ul{\n    margin: 0;\n    padding: 0;\n    list-style: none;\n  }\n  .${be.myprefix}submenuLevel.${be.myprefix}active {\n    position: relative;\n    left: -15px\n  }\n  .${be.myprefix}boom_dialog  *{\n    color: #333;\n    box-sizing: border-box;\n  }\n  .${be.myprefix}boom-field{\n    margin: 20px 0;\n  }\n  .${be.myprefix}boom-field select,\n  .${be.myprefix}boom-field input,\n  .${be.myprefix}boom-field textarea{\n    width: 100%;\n    background: #fff;\n  }\n  .${be.myprefix}field_input,\n  .${be.myprefix}field_select{\n    width: 100%;\n    font-size: 14px;\n    // margin: 0 0 5px;\n    border: 1px solid #aaa;\n    padding: 5px;\n    background-color: white;\n    display: block;\n    min-width: 150px;\n    color: black;\n  }\n  .${be.myprefix}boom-field textarea{\n    min-height: 130px;\n  }\n  #${be.myprefix}boom_dialog .${be.myprefix}boom_question {\n    margin-bottom: 10px;\n    border-bottom: 1px solid #ccc;\n    padding: 20px 0;   \n  }\n  .${be.myprefix}boom_answer{\n    height: 400px;\n    overflow: auto;\n    position: relative;\n  }\n  .${be.myprefix}boom-field select,\n  .${be.myprefix}boom-field input,\n  .${be.myprefix}boom-field textarea{\n      box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;\n      min-width: 250px;\n      border: 1px solid #ccc;\n      border-radius: 5px;\n      padding: 12px;\n  }\n  #${be.myprefix}closeButton {\n    background: #aaa;\n      padding: 8px 20px;\n      border-radius: 5px;\n      margin: 10px 20px 0 0;\n      color: #fff;\n  }\n  #${be.myprefix}redirect_button,button[${be.myprefix}submit_dialog],\n  button[${be.myprefix}redirect_button],\n  button[${be.myprefix}submit_boom_the_chat_dialog]\n  .${be.myprefix}boom_button{\n    background-color: initial;\n    background-image: linear-gradient(-180deg, #FF7E31, #E62C03);\n    border-radius: 6px;\n    box-shadow: rgba(0, 0, 0, 0.1) 0 2px 4px;\n    color: #FFFFFF;\n    cursor: pointer;\n    display: inline-block;\n    padding: 8px 20px;\n    pointer-events: auto;\n    position: relative;\n    text-align: center;\n    touch-action: manipulation;\n    user-select: none;\n    -webkit-user-select: none;\n    white-space: nowrap;\n    z-index: 9;\n    border: 0;\n    transition: box-shadow .2s;\n  }\n  #${be.myprefix}redirect_button,button[${be.myprefix}submit_dialog]:hover,\n  button[${be.myprefix}submit_boom_the_chat_dialog]:hover,   button[${be.myprefix}redirect_button]:hover {\n    box-shadow: rgba(253, 76, 0, 0.5) 0 3px 8px;\n  }\n  \n  #${be.myprefix}boom_dialog::backdrop{\n    background: rgba(0,0,0,0.7);\n  }\n  \n  .${be.myprefix}success_message {\n      padding: 20px;\n      color: green;\n      background: rgba(255,255,255,0.94);\n      left: 0;\n      z-index: 999;\n      top: 0;\n      width: 100%;\n      text-align: center;\n      position: fixed;\n      font-size: 30px;\n      text-transform: capitalize;\n      height: 100%;\n      padding: 50px 0;\n  }\n  \n  #${be.myprefix}dialog_form{\n    position: relative;\n    padding: 0px 20px 20px;\n  }\n  #${be.myprefix}category_results{\n    display: none;\n    box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n    position: absolute;\n    list-style: none;\n      left: 0;\n      width: 100%;\n      top: 57px;\n      border-radius: 5px;\n      z-index: 100;\n      margin: 10px 0;\n      background: #fff;\n      padding: 0;\n  }\n  #${be.myprefix}category_results.show{\n    display: block;\n  }\n  #${be.myprefix}category_results li a{\n    cursor: pointer;\n      display: block;\n      padding: 12px 20px;\n      border-bottom: 1px solid #eee;\n  }\n  #${be.myprefix}category_results li a:hover{\n    background: #f3f3f3;\n  }\n  .${be.myprefix}boom_sidebar_header{\n    color:white;\n    background: linear-gradient(132deg, rgb(36, 37, 38) 0%, rgb(65, 80, 95) 100%);\n    padding: 10px 30px;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n    display: none;\n    align-items: center;\n    justify-content: space-between;\n  }\n  .${be.myprefix}boom_sidebar_header h3 {\n      margin: 0px;\n      color: white;\n      font-weight: bold;\n      font-size: 16px;\n  }\n  .${be.myprefix}boom_category {\n    position: relative;\n  }\n  .${be.myprefix}boom_the_chat{\n    border-width: 1px;\n    padding: 0.5rem 0.75rem;\n    font-family: inherit;\n    font-weight: inherit;\n  }\n  .${be.myprefix}loader {\n    border: 5px solid #f3f3f3; /* Light grey */\n    border-top: 5px solid #E62C03; /* pink */\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    animation: ${be.myprefix}spin 2s linear infinite;\n    z-index: 12;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n  \n  @keyframes ${be.myprefix}spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n  \n  .${be.myprefix}hide{\n    display:none;\n  }\n  .${be.myprefix}submenuLevel{\n    display: none;\n    list-style: none;\n  }\n  .${be.myprefix}has_submenu {\n    user-select: none; /* Prevent text selection */\n  }\n  #${be.myprefix}category_list_tree input[type="checkbox"]{\n    margin: 0px 7px 5px 3px;\n  }\n  \n    .${be.myprefix}category_list_tree input[type="checkbox"]{\n      margin: 3px;\n      position: relative !important;\n      opacity: 1 !important;\n      pointer-events: auto;\n    }\n  \n  .${be.myprefix}has_submenu::before {\n    content: '';\n    color: black;\n    display: inline-block;\n    margin-right: 6px;\n  }\n  \n  .${be.myprefix}has_submenu_down::before {\n    transform: rotate(90deg);\n  }\n  .${be.myprefix}active {\n    display: block;\n  }\n  #${be.myprefix}category_list_tree{\n    position: relative;\n    margin-left: 20px;  \n    padding-left: 0px;\n    list-style: none;\n  }\n  \n  /* #${be.myprefix}category_list_tree li {\n    cursor: pointer;\n    background: url(${oe?.folderIcon?oe.folderIcon:Q}) 16px 3px no-repeat !important;\n    background-size: 16px auto !important;\n    padding-left: 35px !important;\n    position: relative !important;\n    text-wrap: nowrap !important;\n  } */\n  #${be.myprefix}category_list_tree li:before{\n    background: #000;\n    content: "";\n    width: 17px;\n    height: 2px;\n    position: absolute;\n    left: 0;\n    top: 9px;\n    z-index: 99\n  }\n  #${be.myprefix}category_list_tree li:after{\n    background: #000;\n    content: "";\n    width: 2px;\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100%;\n    z-index: 99\n  }\n  #${be.myprefix}category_list_tree li:last-child:after{\n    height: 10px;\n  }\n  .${be.myprefix}toggler {\n    background: url(${oe?.nextIcon?oe.nextIcon:"https://boomconcole.com/freeschema/d122f7dd-b0ec-409a-8131-d90a6c2b146a.png"}) left top no-repeat;\n      background-size: 100% auto;\n      display: block;\n      width: 18px;\n      height: 18px;\n      background-color: #fff;\n      position: absolute;\n      left: -9px;\n      top: 1px;\n      border-radius: 50%;\n      z-index: 100;\n      cursor: pointer;\n  }\n  #${be.myprefix}create_category{\n    cursor: pointer;\n      position: absolute;\n      right: 0;\n      top: 10px;\n      padding: 5px 14px;\n      background: #333;\n      color: #fff;\n      border-radius: 20px;\n  }\n  #${be.myprefix}create_category span{\n    color: #fff;\n  }\n  .${be.myprefix}toggler:has(+ .${be.myprefix}active){\n    transform: rotate(90deg);\n  }\n  .${be.myprefix}boom_form{\n    margin: 0 8px 2px;\n    border: 1px solid #ccc\n  }\n  #${be.myprefix}new_category_button{\n    background: #333;\n    color: #fff;\n    cursor: pointer;\n    border: none;\n    padding: 4px 10px;\n    \n  }\n  .${be.myprefix}field_error{\n    font-size: 14px;\n    color:red;\n  }\n  .${be.myprefix}field_success{\n    font-size: 14px;\n    color:green;\n  }\n  \n  /*\n  Theme: Dark\n  */\n  .${be.myprefix}boom_dialog.${X.boom_theme}{\n    background: linear-gradient(\n      132deg,\n      rgb(90, 115, 139) 0%,\n      rgb(66, 73, 76) 100%\n    );\n    color: #f5f5f5;\n    border: rgb(90, 115, 139);\n  }\n  .${be.myprefix}boom_dialog.${X.boom_theme} *{\n    color: #f5f5f5;\n  }\n  .${be.myprefix}boom_dialog.${X.boom_theme} input,\n  .${be.myprefix}boom_dialog.${X.boom_theme} select{\n    color: #555;\n  }\n  \n  .${be.myprefix}preview{\n    border: 1px solid #666;\n    border-radius: 5px;\n    padding: 10px;\n    max-height: 250px;\n    overflow-y: auto;\n    margin: 20px 0;\n  }\n  .${be.myprefix}preview h3{\n    font-size: 20px;\n    margin: 0 0 8px;\n  }\n  `)},726:(xt,X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.boomFolderComposition=X.captureBoomGPTComposition=void 0,X.captureBoomGPTComposition="boomgpt",X.boomFolderComposition="boomFolder"},777:(xt,X,Ct)=>{Ct.r(X),Ct.d(X,{ADMIN:()=>Bt,ALLID:()=>it,AccessTracker:()=>bt,AddGhostConcept:()=>Lt,Anomaly:()=>qe,BaseUrl:()=>oe,BinaryTree:()=>ee,BuildWidgetFromId:()=>Ce,BuilderStatefulWidget:()=>le,Composition:()=>de,CompositionBinaryTree:()=>he,CompositionNode:()=>ce,Concept:()=>Be,ConceptsData:()=>$e,Connection:()=>st,ConnectionData:()=>ae,CountInfo:()=>je,CreateComposition:()=>Ze,CreateConnection:()=>Xe,CreateConnectionBetweenEntityLocal:()=>vt,CreateConnectionBetweenTwoConcepts:()=>Pt,CreateConnectionBetweenTwoConceptsGeneral:()=>It,CreateConnectionBetweenTwoConceptsLocal:()=>yt,CreateData:()=>Et,CreateDefaultConcept:()=>Qt,CreateDefaultLConcept:()=>Yt,CreateSession:()=>Vt,CreateSessionVisit:()=>nn,CreateTheCompositionLocal:()=>Xt,CreateTheCompositionWithCache:()=>Kt,CreateTheConnection:()=>Pe,CreateTheConnectionGeneral:()=>_t,CreateTheConnectionLocal:()=>et,DATAID:()=>ye,DATAIDDATE:()=>Ee,DATAV2:()=>Ft,DelayFunctionExecution:()=>on,DeleteConceptById:()=>ve,DeleteConceptLocal:()=>fe,DeleteConnectionById:()=>Le,DeleteConnectionByIdBulk:()=>xe,DeleteConnectionByType:()=>Ae,DeleteConnectionByTypeBulk:()=>ze,DeleteUser:()=>lt,DependencyObserver:()=>He,Environments:()=>Oe,FilterSearch:()=>Ve,FormatFromConnections:()=>mt,FormatFromConnectionsAltered:()=>Ut,FreeschemaQuery:()=>At,FreeschemaQueryApi:()=>nt,GetAllConnectionsOfComposition:()=>Ot,GetAllConnectionsOfCompositionBulk:()=>Gt,GetAllTheConnectionsByTypeAndOfTheConcept:()=>cn,GetComposition:()=>qt,GetCompositionBulk:()=>dn,GetCompositionBulkWithDataId:()=>In,GetCompositionFromConnectionsWithDataId:()=>On,GetCompositionFromConnectionsWithDataIdFromConnections:()=>Jt,GetCompositionFromConnectionsWithDataIdInObject:()=>Cn,GetCompositionFromConnectionsWithDataIdIndex:()=>to,GetCompositionFromConnectionsWithIndex:()=>jo,GetCompositionFromConnectionsWithIndexFromConnections:()=>Ii,GetCompositionFromMemoryWithConnections:()=>ki,GetCompositionList:()=>ua,GetCompositionListAll:()=>ha,GetCompositionListAllWithId:()=>pa,GetCompositionListListener:()=>fa,GetCompositionListLocal:()=>ya,GetCompositionListLocalWithId:()=>ga,GetCompositionListWithId:()=>va,GetCompositionListWithIdUpdated:()=>ma,GetCompositionListener:()=>Ca,GetCompositionLocal:()=>_a,GetCompositionLocalWithId:()=>wa,GetCompositionWithAllIds:()=>Ta,GetCompositionWithCache:()=>ba,GetCompositionWithDataIdBulk:()=>Ia,GetCompositionWithDataIdWithCache:()=>ka,GetCompositionWithId:()=>Sa,GetCompositionWithIdAndDateFromMemory:()=>Aa,GetConceptBulk:()=>La,GetConceptByCharacter:()=>Na,GetConceptByCharacterAndCategoryLocal:()=>xa,GetConceptByCharacterAndType:()=>Ea,GetConnectionBetweenTwoConceptsLinker:()=>Fa,GetConnectionBulk:()=>Oa,GetConnectionById:()=>Da,GetConnectionDataPrefetch:()=>Ba,GetConnectionOfTheConcept:()=>Pa,GetConnectionTypeForCount:()=>Ua,GetFreeschemaImage:()=>Ma,GetFreeschemaImageUrl:()=>Ra,GetImageApi:()=>Ga,GetLink:()=>Wa,GetLinkListListener:()=>ja,GetLinkListener:()=>Va,GetLinkRaw:()=>$a,GetLinkerConnectionFromConcepts:()=>Ha,GetLinkerConnectionToConcepts:()=>qa,GetRelation:()=>za,GetRelationLocal:()=>Ja,GetRelationRaw:()=>Za,GetTheConcept:()=>Qa,GetTheConceptLocal:()=>Ya,GetUserGhostId:()=>Ka,JUSTDATA:()=>Xa,LConcept:()=>ec,LConnection:()=>tc,LISTNORMAL:()=>nc,LocalConceptsData:()=>oc,LocalSyncData:()=>ic,LocalTransaction:()=>rc,LogEvent:()=>sc,Logger:()=>ac,LoginToBackend:()=>cc,MakeTheInstanceConcept:()=>lc,MakeTheInstanceConceptLocal:()=>dc,MakeTheTimestamp:()=>uc,MakeTheTypeConceptApi:()=>hc,MakeTheTypeConceptLocal:()=>pc,NORMAL:()=>fc,PRIVATE:()=>yc,PUBLIC:()=>gc,PatcherStructure:()=>vc,Prototype:()=>mc,RAW:()=>Cc,RecursiveSearchApi:()=>_c,RecursiveSearchApiNewRawFullLinker:()=>wc,RecursiveSearchApiRaw:()=>Tc,RecursiveSearchApiRawFullLinker:()=>bc,RecursiveSearchApiWithInternalConnections:()=>Ic,RecursiveSearchListener:()=>kc,SchemaQuery:()=>Sc,SchemaQueryListener:()=>Ac,SearchAllConcepts:()=>Lc,SearchLinkInternal:()=>Nc,SearchLinkInternalAll:()=>xc,SearchLinkMultipleAll:()=>Ec,SearchLinkMultipleAllObservable:()=>Fc,SearchLinkMultipleApi:()=>Oc,SearchQuery:()=>Dc,SearchStructure:()=>Bc,SearchWithLinker:()=>Pc,SearchWithTypeAndLinker:()=>Uc,SearchWithTypeAndLinkerApi:()=>Mc,Selector:()=>Rc,SessionData:()=>Gc,Signin:()=>Wc,Signup:()=>jc,SignupEntity:()=>Vc,SplitStrings:()=>$c,StatefulWidget:()=>Hc,SyncData:()=>qc,TrashTheConcept:()=>zc,UpdateComposition:()=>Jc,UpdateCompositionLocal:()=>Zc,UserBinaryTree:()=>Qc,Validator:()=>Yc,ViewInternalData:()=>Kc,ViewInternalDataApi:()=>Xc,WidgetTree:()=>el,convertFromConceptToLConcept:()=>tl,convertFromLConceptToConcept:()=>nl,convertWidgetTreeToWidget:()=>ol,convertWidgetTreeToWidgetWithWrapper:()=>il,createFormFieldData:()=>rl,createPrototypeLocal:()=>sl,dispatchIdEvent:()=>al,getFromDatabaseWithType:()=>cl,getObjectsFromIndexDb:()=>ll,getUploadFileLimit:()=>dl,getUserDetails:()=>ul,getWidgetBulkFromId:()=>hl,getWidgetFromId:()=>pl,handleServiceWorkerException:()=>fl,hasActivatedSW:()=>yl,importLatestWidget:()=>gl,importRecentWidget:()=>vl,init:()=>ml,orderTheConnections:()=>Cl,recursiveFetch:()=>_l,recursiveFetchNew:()=>wl,removeAllChildren:()=>Tl,renderImportedWidget:()=>bl,renderLatestWidget:()=>Il,renderPage:()=>kl,renderWidget:()=>Sl,searchLinkMultipleListener:()=>Al,sendEmail:()=>Ll,sendMessage:()=>Nl,serviceWorker:()=>xl,setHasActivatedSW:()=>El,storeToDatabase:()=>Fl,subscribedListeners:()=>Ol,unwrapContainers:()=>Dl,updateAccessToken:()=>Bl,uploadAttachment:()=>Pl,uploadFile:()=>Ul,uploadImage:()=>Ml,uploadImageV2:()=>Rl,validDocumentFormats:()=>Gl,validImageFormats:()=>Wl});var Rt={2:(K,E,g)=>{g.d(E,{s:()=>e});var S=g(8286),N=g(9581),n=g(1412),h=g(3518),_=g(1863),I=g(5205),r=function(l,f,v,T){return new(v||(v=Promise))(function(s,a){function t(b){try{C(T.next(b))}catch(m){a(m)}}function c(b){try{C(T.throw(b))}catch(m){a(m)}}function C(b){var m;b.done?s(b.value):(m=b.value,m instanceof v?m:new v(function(L){L(m)})).then(t,c)}C((T=T.apply(l,f||[])).next())})};function e(l){var f=arguments;return r(this,void 0,void 0,function*(){const v=I.Logger.logfunction("GetAllConnectionsOfComposition",f);var T=[];if(0==(T=yield S.d.GetConnectionsOfConcept(l)).length)T=yield o(l);else{var s=yield o(l);(0,n.e)(s,T),T=s}return I.Logger.logUpdate(v),T})}function o(l){var f=arguments;return r(this,void 0,void 0,function*(){const v=I.Logger.logfunction("GetAllConnectionsOfCompositionOnline",f);var T=[];try{(0,h.Xr)("application/json");const a=new Headers,t=new FormData;t.append("composition_id",l.toString());const c=yield fetch(N.B.GetAllConnectionsOfCompositionUrl(),{method:"POST",headers:a,body:t});if(console.log("this is getting connection from online",N.B.GetAllConnectionsOfCompositionUrl(),l),!c.ok)throw(0,_.ry)(c),new Error(`Error! status: ${c.status}`);const C=yield c.json();for(var s=0;s<C.length;s++)S.d.AddConnection(C[s]),T.push(C[s]);return I.Logger.logUpdate(v),T}catch(a){a instanceof Error?console.log("Get all connection of composition error : ",a.message):console.log("Get all connection of composition error : ",a),(0,_.Mb)(a,N.B.GetAllConnectionsOfCompositionUrl()),(0,_.ey)(v,"GetAllConnectionsOfCompositionOnline",a)}})}},38:K=>{class E{constructor(S,N={}){if(this.type="warning",this.text=S,N.node&&N.node.source){let n=N.node.rangeBy(N);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in N)this[n]=N[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}K.exports=E,E.default=E},71:(K,E)=>{E.__esModule=!0,E.word=E.tilde=E.tab=E.str=E.space=E.slash=E.singleQuote=E.semicolon=E.plus=E.pipe=E.openSquare=E.openParenthesis=E.newline=E.greaterThan=E.feed=E.equals=E.doubleQuote=E.dollar=E.cr=E.comment=E.comma=E.combinator=E.colon=E.closeSquare=E.closeParenthesis=E.caret=E.bang=E.backslash=E.at=E.asterisk=E.ampersand=void 0,E.ampersand=38,E.asterisk=42,E.at=64,E.comma=44,E.colon=58,E.semicolon=59,E.openParenthesis=40,E.closeParenthesis=41,E.openSquare=91,E.closeSquare=93,E.dollar=36,E.tilde=126,E.caret=94,E.plus=43,E.equals=61,E.pipe=124,E.greaterThan=62,E.space=32,E.singleQuote=39,E.doubleQuote=34,E.slash=47,E.bang=33,E.backslash=92,E.cr=13,E.feed=12,E.newline=10,E.tab=9,E.str=39,E.comment=-1,E.word=-2,E.combinator=-3},145:(K,E,g)=>{let S,N,n=g(7793);class h extends n{constructor(I){super({type:"document",...I}),this.nodes||(this.nodes=[])}toResult(I={}){return new S(new N,this,I).stringify()}}h.registerLazyResult=_=>{S=_},h.registerProcessor=_=>{N=_},K.exports=h,h.default=h},176:(K,E,g)=>{g.d(E,{F4:()=>h,P6:()=>I,dp:()=>_});var S=g(2155),N=g(7282),n=g(6416);function h(r){var e,o;const l=(0,n.u)();return l.id=r.id,l.ghostId=r.ghostId,l.userId=r.userId,l.accessId=r.accessId,l.categoryId=r.categoryId,l.characterValue=r.characterValue,l.entryTimeStamp=r.entryTimeStamp,l.typeId=r.typeId,l.type=r.type,l.isTemp=!1,l.typeCharacter=null!==(o=null===(e=r?.type)||void 0===e?void 0:e.characterValue)&&void 0!==o?o:"",l}function _(r){const e=(0,N.o)();return e.id=r.id,e.ghostId=r.ghostId,e.userId=r.userId,e.accessId=r.accessId,e.entryTimeStamp=r.entryTimeStamp,e.typeId=r.typeId,e.categoryId=r.categoryId,e}function I(r){const e=new S.N(0,0,0,0,0,0,0);return e.id=r.id,e.ghostId=r.ghostId,e.accessId=r.accessId,e.ofTheConceptId=r.ofTheConceptId,e.toTheConceptId=r.toTheConceptId,e.entryTimeStamp=r.entryTimeStamp,e.typeId=r.typeId,e.isTemp=!1,e}},197:()=>{},205:(K,E,g)=>{g.d(E,{B:()=>S});class S{}S.isTypeLoaded=!1,S.isCharacterLoaded=!1,S.isDataLoaded=!1,S.isLocalDataLoaded=!1,S.isLocalCharacterLoaded=!1,S.isLocalTypeLoaded=!1,S.isConnectionLoaded=!1,S.isConnectionTypeLoaded=!1,S.isLocalConnectionLoaded=!1},263:(K,E)=>{E.__esModule=!0,E.default=function(g){return g.sort(function(S,N){return S-N})},K.exports=E.default},276:(K,E,g)=>{g.d(E,{y:()=>S});class S{constructor(){this.conceptId=0,this.connectionTypeId=0,this.connectionType="",this.count=0}}},339:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(3631))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.SELECTOR,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,K.exports=E.default},396:(K,E,g)=>{let S=g(7793);class N extends S{constructor(h){super(h),this.type="atrule"}append(...h){return this.proxyOf.nodes||(this.nodes=[]),super.append(...h)}prepend(...h){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...h)}}K.exports=N,N.default=N,S.registerAtRule(N)},425:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.COMMENT,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,K.exports=E.default},442:(K,E,g)=>{g.d(E,{Y:()=>o});var S=g(1167),N=g(2155),n=g(9581),h=g(3518),_=g(1863),I=g(3026),r=g(8286),e=g(5205);class o{static CheckContains(f){for(var v=!1,T=0;T<this.conceptsSyncArray.length;T++)this.conceptsSyncArray[T].id==f.id&&(v=!0);return v}static SyncDataDelete(f){for(var v=0;v<this.conceptsSyncArray.length;v++)f==this.conceptsSyncArray[v].id&&this.conceptsSyncArray.splice(v,1);for(v=0;v<this.connectionSyncArray.length;v++)this.connectionSyncArray[v].ofTheConceptId!=f&&this.connectionSyncArray[v].toTheConceptId!=f&&this.connectionSyncArray[v].typeId!=f||this.connectionSyncArray.splice(v,1)}static CheckContainsConnection(f){for(var v=!1,T=0;T<this.connectionSyncArray.length;T++)this.connectionSyncArray[T].id==f.id&&(v=!0);return v}static AddConcept(f){this.conceptsSyncArray.push(f)}static RemoveConcept(f){for(var v=0;v<this.conceptsSyncArray.length;v++)this.conceptsSyncArray[v].id==f.id&&this.conceptsSyncArray.splice(v,1)}static AddConnection(f){this.connectionSyncArray.push(f)}static RemoveConnection(f){for(var v=0;v<this.connectionSyncArray.length;v++)this.connectionSyncArray[v].id==f.id&&this.connectionSyncArray.splice(v,1)}static SyncDataOnline(){return f=this,s=function*(){if(e.serviceWorker)try{return(yield(0,e.sendMessage)("SyncData__SyncDataOnline",{})).data}catch(a){console.error("SyncData__SyncDataOnline sw error: ",a),(0,e.handleServiceWorkerException)(a)}for(let a=0;a<this.conceptsSyncArray.length;a++)I.I.AddConcept(this.conceptsSyncArray[a]);for(let a=0;a<this.connectionSyncArray.length;a++)r.d.AddConnection(this.connectionSyncArray[a]);if(this.conceptsSyncArray.length>0){let a=this.conceptsSyncArray.slice();this.conceptsSyncArray=[],(0,S.Y)(a)}if(this.connectionSyncArray.length>0){let a=this.connectionSyncArray.slice();this.connectionSyncArray=[],yield function(t){return c=this,m=function*(){let L=new N.N(0,0,0,0,0,0,0);try{var A=(0,h.Xr)(),O=JSON.stringify(t);const B=yield fetch(n.B.CreateTheConnectionUrl(),{method:"POST",headers:A,body:O});return B.ok?yield B.json():(console.log("Create the connection error message: ",B.status),(0,_.ry)(B)),L}catch(B){throw B instanceof Error?console.log("Create the connection error message: ",B.message):console.log(" Create the connection unexpected error: ",B),B}},new((b=void 0)||(b=Promise))(function(L,A){function O(R){try{G(m.next(R))}catch(M){A(M)}}function B(R){try{G(m.throw(R))}catch(M){A(M)}}function G(R){var M;R.done?L(R.value):(M=R.value,M instanceof b?M:new b(function(W){W(M)})).then(O,B)}G((m=m.apply(c,[])).next())});var c,b,m}(a)}return"done"},new((T=void 0)||(T=Promise))(function(a,t){function c(m){try{b(s.next(m))}catch(L){t(L)}}function C(m){try{b(s.throw(m))}catch(L){t(L)}}function b(m){var L;m.done?a(m.value):(L=m.value,L instanceof T?L:new T(function(A){A(L)})).then(c,C)}b((s=s.apply(f,[])).next())});var f,T,s}}o.conceptsSyncArray=[],o.connectionSyncArray=[]},490:(K,E,g)=>{function S(){var N,n,h,_;let I={entity:0,userConcept:0,userId:0,token:""};try{let r=(null==localStorage?void 0:localStorage.getItem("profile"))||"";if(r){const e=JSON.parse(r);I.entity=null!==(N=e?.entityId)&&void 0!==N?N:0,I.userConcept=null!==(n=e?.userConcept)&&void 0!==n?n:0,I.userId=null!==(h=e?.userId)&&void 0!==h?h:0,I.token=null!==(_=e?.token)&&void 0!==_?_:""}}catch{console.log("This is the exception in getting user details from local storage")}return I}g.d(E,{s:()=>S})},518:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(3631))&&S.__esModule?S:{default:S},n=g(1581);function _(r,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o})(r,e)}var I=function(r){var e,o;function l(s){var a;return(a=r.call(this,s)||this).type=n.ROOT,a}o=r,(e=l).prototype=Object.create(o.prototype),e.prototype.constructor=e,_(e,o);var f,v,T=l.prototype;return T.toString=function(){var s=this.reduce(function(a,t){return a.push(String(t)),a},[]).join(",");return this.trailingComma?s+",":s},T.error=function(s,a){return this._error?this._error(s,a):new Error(s)},f=l,(v=[{key:"errorGenerator",set:function(s){this._error=s}}])&&function h(r,e){for(var o=0;o<e.length;o++){var l=e[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}(f.prototype,v),Object.defineProperty(f,"prototype",{writable:!1}),l}(N.default);E.default=I,K.exports=E.default},628:(K,E,g)=>{g.d(E,{H:()=>T});var S=g(9581),N=g(3278),n=g(5205),h=g(1863),_=function(s,a,t,c){return new(t||(t=Promise))(function(C,b){function m(O){try{A(c.next(O))}catch(B){b(B)}}function L(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){var B;O.done?C(O.value):(B=O.value,B instanceof t?B:new t(function(G){G(B)})).then(m,L)}A((c=c.apply(s,a||[])).next())})};const I=(s,a,...t)=>_(void 0,[s,a,...t],void 0,function*(c,C,b=!0){let m={concepts:[],connections:[]};try{const L=new Headers;let A={concepts:c,connections:C};L.set("Content-Type","application/json"),L.set("Authorization","Bearer "+N.b.BearerAccessToken),L.set("Accept","application/json"),L.set("X-Session-Id",N.b.sessionId.toString()),L.set("Randomizer",S.B.getRandomizer().toString());const O=yield fetch(S.B.CreateGhostConceptApiUrl(b),{method:"POST",headers:L,body:JSON.stringify(A)});if(!O.ok)throw(0,h.ry)(O),new Error(`Error! status: ${O.status}`);const B=yield O.json();return m.concepts=B.concepts,m.connections=B.connections,m}catch(L){throw L instanceof Error?console.log("Create the concept api error message: ",L.message):console.log("Create the concept api unexpected error: ",L),L}});function r(s,a){const t=[];for(let c=0;c<s.length;c+=a){const C=s.slice(c,c+a);t.push(C)}return t}const e=(...s)=>_(void 0,[...s],void 0,function*(a=[]){return yield Promise.all(a.map(t=>{let c=JSON.parse(JSON.stringify(t));return delete c.type,delete c.ofConcept,delete c.toConcept,c}))});var o=g(9003),l=g(9736),f=g(4864),v=function(s,a,t,c){return new(t||(t=Promise))(function(C,b){function m(O){try{A(c.next(O))}catch(B){b(B)}}function L(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){var B;O.done?C(O.value):(B=O.value,B instanceof t?B:new t(function(G){G(B)})).then(m,L)}A((c=c.apply(s,a||[])).next())})};class T{static CheckContains(a){for(var t=!1,c=0;c<this.conceptsSyncArray.length;c++)this.conceptsSyncArray[c].id==a.id&&(t=!0);return t}static SyncDataDelete(a){for(var t=0;t<this.conceptsSyncArray.length;t++)a==this.conceptsSyncArray[t].id&&this.conceptsSyncArray.splice(t,1);for(t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].ofTheConceptId!=a&&this.connectionSyncArray[t].toTheConceptId!=a&&this.connectionSyncArray[t].typeId!=a||this.connectionSyncArray.splice(t,1)}static CheckContainsConnection(a){for(var t=!1,c=0;c<this.connectionSyncArray.length;c++)this.connectionSyncArray[c].id==a.id&&(t=!0);return t}static AddConcept(a){try{let t=!1;0!=T.CheckIfTheConceptIdExists(a.id,this.conceptsSyncArray).id&&(t=!0),t||this.conceptsSyncArray.push(a)}catch(t){throw t}}static RemoveConcept(a){for(var t=0;t<this.conceptsSyncArray.length;t++)this.conceptsSyncArray[t].id==a.id&&this.conceptsSyncArray.splice(t,1)}static SyncDataOnlineWithoutAuth(a,t){return v(this,arguments,void 0,function*(c,C,b=!1){return T.SyncDataOnline(c,C,b)})}static SyncDataOnline(a,t){return v(this,arguments,void 0,function*(c,C,b=!0){let m=performance.now();console.log("syncing...",c,C,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!n.serviceWorker,b),setTimeout(()=>{console.log("syncing...",c,C,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!n.serviceWorker,b)},5e3);try{if(n.serviceWorker)try{return console.log("syncing in the service worker",c,b),(yield(0,n.sendMessage)("LocalSyncData__SyncDataOnline",{transactionId:c,withAuth:b})).data}catch(M){console.error("LocalSyncData__SyncDataOnline sw error: ",M),(0,n.handleServiceWorkerException)(M)}console.log("syncing in the without service worker syncing",c,b);let L=[],A=[];if(c&&this.transactionCollections.some(M=>M.id==c)){const M=this.transactionCollections.find(W=>W.id==c);if(this.transactionCollections=this.transactionCollections.filter(W=>W.id!=c),this.transactionCollections=this.transactionCollections.filter(W=>new Date(W.createdDate).getTime()>(new Date).getTime()-6048e5),!M)return;L=M.data.concepts.slice(),A=M.data.connections.slice()}else Array.isArray(C?.concepts)&&Array.isArray(C?.connections)?(console.log("this is the concepts and connections array",C?.concepts,C?.connections),L=C.concepts.slice(),A=C.connections.slice(),console.log("this is the concepts and connections array",L,A),this.conceptsSyncArray=this.conceptsSyncArray.filter(M=>{const W=C.concepts.some(V=>M.id==V.id||M.ghostId==V.ghostId);return W||console.warn(`Concept not found in sync array: ${M.id||M.ghostId}`),W}),this.connectionSyncArray=this.connectionSyncArray.filter(M=>{const W=C.connections.some(V=>M.id==V.id||M.ghostId==V.ghostId);return W||console.warn(`Connection not found in sync array: ${M.id||M.ghostId}`),W})):(console.warn("Syncing this way has been Depreceted in service worker."),console.info("Only if serive worker is not running"),L=this.conceptsSyncArray.slice()||[],A=this.connectionSyncArray.slice()||[],this.connectionSyncArray=[],this.conceptsSyncArray=[]);console.log("syncing... inside the syncer",b);let O=[];for(let M=0;M<L.length;M++)O.push(L[M]),yield l.v.UpdateConceptSyncStatus(L[M].id);console.log("syncing... inside the syncer 2",b,L),yield this.UpdateConceptListToIncludeRelatedConcepts(A,O);let B=yield function(M,W){return _(this,arguments,void 0,function*(V,Z,te=!0){const ne=n.Logger.logfunction("CreateTheGhostConceptApi",[V.length,Z.length]);try{let H={concepts:[],connections:[]};const pe=yield e(V),ke=yield e(Z);if(V.length+Z.length<=2e3){const Te=yield I(pe,ke,te);return Array.isArray(Te?.concepts)&&(H.concepts=[...H.concepts,...Te.concepts]),Array.isArray(Te?.connections)&&(H.connections=[...H.connections,...Te.connections]),n.Logger.logUpdate(ne),H}const ie=r(pe,1e3),Y=r(ke,1e3),re=[],ue=[];console.log("This is the with auth in syncing",te);for(let Te=0;Te<ie.length;Te++)re.push(I(ie[Te],[],te));const z=yield Promise.all(re);for(let Te=0;Te<z.length;Te++){const _e=z[Te];Array.isArray(_e?.concepts)&&(H.concepts=[...H.concepts,..._e.concepts]),Array.isArray(_e?.connections)&&(H.connections=[...H.connections,..._e.connections])}for(let Te=0;Te<Y.length;Te++)ue.push(I([],Y[Te],te));const ge=yield Promise.all(ue);for(let Te=0;Te<ge.length;Te++){const _e=ge[Te];Array.isArray(_e?.concepts)&&(H.concepts=[...H.concepts,..._e.concepts]),Array.isArray(_e?.connections)&&(H.connections=[...H.connections,..._e.connections])}return n.Logger.logUpdate(ne),H}catch(me){throw console.log(me),(0,h.ey)(ne,"CreateTheGhostConceptApi",me),me}})}(O,A,b);console.log("syncing... inside the syncer 3",b);let G=B.concepts,R=B.connections;for(let M=0;M<G.length;M++)l.v.AddPermanentConcept(G[M]);for(let M=0;M<R.length;M++)f.G.AddPermanentConnection(R[M]);return L}catch(L){throw n.Logger.logError(m,"unknown",void 0,"unknown",void 0,500,L,"SyncDataOnline",[],"unknown",void 0),L}})}static ConvertGhostIdsInConnections(a){var t,c,C;for(let b=0;b<a.length;b++){let m=a[b].ofTheConceptId,L=a[b].toTheConceptId,A=a[b].typeId,O=null!==(t=T.ghostIdMap.get(m))&&void 0!==t?t:m,B=null!==(c=T.ghostIdMap.get(L))&&void 0!==c?c:L,G=null!==(C=T.ghostIdMap.get(A))&&void 0!==C?C:A;a[b].ofTheConceptId=O,a[b].toTheConceptId=B,a[b].typeId=G}}static UpdateConceptListToIncludeRelatedConcepts(a,t){return v(this,void 0,void 0,function*(){for(let c=0;c<a.length;c++){let C=a[c].ofTheConceptId,b=a[c].toTheConceptId,m=a[c].typeId;if(C<0){let L=this.CheckIfTheConceptIdExists(C,t);0==L.id&&(L=yield l.v.GetConceptByGhostId(C),0!=L.id?L.id!=L.ghostId&&(a[c].ofTheConceptId=L.id):(L=yield l.v.GetConcept(C),this.AddConceptIfDoesNotExist(L,t)))}if(b<0){let L=this.CheckIfTheConceptIdExists(b,t);0==L.id&&(L=yield l.v.GetConceptByGhostId(b),0!=L.id?L.id!=L.ghostId&&(a[c].toTheConceptId=L.id):(L=yield l.v.GetConcept(b),this.AddConceptIfDoesNotExist(L,t)))}if(m<0){let L=this.CheckIfTheConceptIdExists(m,t);0==L.id&&(L=yield l.v.GetConceptByGhostId(m),0!=L.id?L.id!=L.ghostId&&(a[c].typeId=L.id):(L=yield l.v.GetConcept(m),this.AddConceptIfDoesNotExist(L,t)))}}})}static AddConceptIfDoesNotExist(a,t=[]){let c=!1;for(let C=0;C<t.length;C++)a.ghostId==t[C].ghostId&&(c=!0);c||t.push(a)}static CheckIfTheConceptIdExists(a,t=[]){let c=(0,n.CreateDefaultLConcept)();for(let C=0;C<t.length;C++)a!=t[C].ghostId&&a!=t[C].id||(c=t[C]);return c}static AddConnection(a){this.connectionSyncArray.push(a)}static RemoveConnection(a){for(var t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].id==a.id&&this.connectionSyncArray.splice(t,1)}static RemoveConnectionById(a){for(var t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].id==a&&this.connectionSyncArray.splice(t,1)}static syncDataLocalDb(){return v(this,void 0,void 0,function*(){if(this.conceptsSyncArray.length>0){for(let a=0;a<this.conceptsSyncArray.length;a++)(0,o.kH)("localconcept",this.conceptsSyncArray[a]);this.conceptsSyncArray=[]}if(this.connectionSyncArray.length>0){for(let a=0;a<this.connectionSyncArray.length;a++)(0,o.kH)("localconnection",this.connectionSyncArray[a]);this.connectionSyncArray=[]}return"done"})}static initializeTransaction(a){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__initializeTransaction",{transactionId:a})).data}catch(t){console.error("LocalSyncData__initializeTransaction sw error: ",t),(0,n.handleServiceWorkerException)(t)}if(this.transactionCollections.some(t=>t.id==a))return;this.transactionCollections.push({id:a,data:{concepts:[],connections:[]},createdDate:(new Date).toISOString()})}catch(t){console.log("error in initializeTransaction",t)}})}static markTransactionActions(a,t){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__markTransactionActions",{transactionId:a,actions:t})).data}catch(c){console.error("LocalSyncData__markTransactionActions sw error: ",c),(0,n.handleServiceWorkerException)(c)}this.transactionCollections=this.transactionCollections.map(c=>c.id==a?Object.assign(Object.assign({},c),{data:JSON.parse(JSON.stringify(t))}):c),this.conceptsSyncArray=this.conceptsSyncArray.filter(c=>!t.concepts.some(C=>C.id==c.id||C.ghostId==c.id)),this.connectionSyncArray=this.connectionSyncArray.filter(c=>!t.connections.some(C=>C.id==c.id||C.ghostId==c.id))}catch(c){console.log("error in markTransactionActions",c)}})}static rollbackTransaction(a,t){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__rollbackTransaction",{transactionId:a,actions:t})).data}catch(c){console.error("LocalSyncData__rollbackTransaction sw error: ",c),(0,n.handleServiceWorkerException)(c)}if(this.transactionCollections.some(c=>c.id==a))return;this.transactionCollections=this.transactionCollections.filter(c=>c.id!=a)}catch(c){console.log("LocalSyncData, roll",c)}})}}T.conceptsSyncArray=[],T.connectionSyncArray=[],T.ghostIdMap=new Map,T.transactionCollections=[]},680:(K,E,g)=>{E.__esModule=!0;var S=g(1581);Object.keys(S).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in E&&E[h]===S[h]||(E[h]=S[h]))});var N=g(4451);Object.keys(N).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in E&&E[h]===N[h]||(E[h]=N[h]))});var n=g(8500);Object.keys(n).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in E&&E[h]===n[h]||(E[h]=n[h]))})},843:(K,E,g)=>{g.d(E,{Az:()=>f,Hi:()=>v});var S=g(8146),N=g(3026),n=g(9581),h=g(3518),_=g(5205),I=g(1863),r=g(7876),e=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})},o=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})},l=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};function f(T){return l(this,void 0,void 0,function*(){const s=_.Logger.logfunction("GetConceptByCharacterAndCategory",T);let a=(0,_.CreateDefaultConcept)();if("the"==T)return a.id=1,a.typeId=5,a.characterValue="the",a;let t=(0,_.SplitStrings)(T);if(t.length>1){let c=1,C=yield f(t[0]);0!=C.id&&(c=C.id),a=yield function(b,m){var L=arguments;return l(this,void 0,void 0,function*(){const A=_.Logger.logfunction("GetConceptByCharacterAndCategoryFromMemory",L);let O=yield _.ConceptsData.GetConceptByCharacterAndCategoryLocal(b,m);return 0==O.id&&(O=yield function(B,G){var R=arguments;return e(this,void 0,void 0,function*(){const M=_.Logger.logfunction("GetConceptByCharacterAndCategoryDirectApi",R);let W=(0,_.CreateDefaultConcept)();try{var V=(0,h.Xr)("application/x-www-form-urlencoded");const Z=yield fetch(n.B.GetConceptByCharacterAndCategoryDirectUrl(),{method:"POST",headers:V,body:`character_value=${B}&category_id=${G}`});Z.ok?(W=yield Z.json(),(0,r.K)(W).then(()=>{N.I.AddConcept(W)})):(console.log("This is the concept by category and character error",Z.status),(0,I.ry)(Z)),_.Logger.logUpdate(M)}catch(Z){Z instanceof Error?console.log(" This is the concept by category and character error message: ",Z.message):console.log(" This is the concept by category and character unexpected error: ",Z),(0,I.Mb)(Z,n.B.GetConceptByCharacterAndCategoryDirectUrl()),(0,I.ey)(M,"GetConceptByCharacterAndCategoryDirectApi",Z)}return W})}(b,m)),_.Logger.logUpdate(A),O})}(T,c)}else t[0]==T&&(a=yield function(c){var C=arguments;return l(this,void 0,void 0,function*(){const b=_.Logger.logfunction("GetConceptByCharacter",C);let m=yield _.ConceptsData.GetConceptByCharacterAndTypeLocal(c,51);return 0==m.id&&(m=yield(0,S.Y)(c)),_.Logger.logUpdate(b),m})}(T));return _.Logger.logUpdate(s),a})}function v(T){return l(this,void 0,void 0,function*(){let s=[];try{s=yield function(a){return o(this,void 0,void 0,function*(){let t=[];try{let c=JSON.stringify(a),C=(0,h.Xr)();const b=yield fetch(_.BaseUrl.GetTypeConceptBulk(),{method:"POST",headers:C,body:c});if(b.ok){let m=yield b.json();t=yield(0,_.GetConceptBulk)(m)}else console.log("This is the GetTypeConceptByBulk error",b.status),(0,I.ry)(b)}catch(c){c instanceof Error?console.log(" This is the GetTypeConceptByBulk error message: ",c.message):console.log(" This is the GetTypeConceptByBulk unexpected error: ",c),(0,I.Mb)(c,_.BaseUrl.GetConceptByCharacterAndCategoryDirectUrl())}return t})}(T)}catch(a){console.log(" This is the GetTypeConceptsByCharacterAndCategoryBulk error message: ",a)}return s})}},991:(K,E,g)=>{g.d(E,{H:()=>_});var S=g(5205),N=g(3996);class n extends N.i{constructor(r,e,o,l){super(r,e,o,l),this.key="",this.value=[],this.height=1,this.key=r,this.value=e,this.leftNode=o,this.rightNode=l}addNode(r,e,o){if(null==e)return r;let f=e.rightNode;if(e.key>r.key)e.leftNode=this.addNode(r,e.leftNode,o);else{if(!(e.key<r.key))return e;e.rightNode=this.addNode(r,f,o)}e.height=1+Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(this.getBalanceFactor(e.leftNode)>=0)return this.rightRotate(e);if(this.getBalanceFactor(e.leftNode)<0)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(this.getBalanceFactor(e.rightNode)<=0)return this.leftRotate(e);if(this.getBalanceFactor(e.rightNode)>0)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}}var h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};let _=(()=>{class I{static CreateCompositionKey(e,o){return e}static GetConnectionByOfTheConceptAndTypeId(e,o){let l=this.CreateCompositionKey(e,o);if(this.node){let f=this.node.getFromNode(l,this.node);if(f)return f.value}return null}static addConnection(e){if(e.id>0){let o=this.CreateCompositionKey(e.ofTheConceptId,e.typeId);if(this.node){let l=this.node.getFromNode(o,this.node);if(l){let f=l?.value;0==f.length&&(l.value=[]),f.includes(e.id)||f.push(e.id)}else{let f=[];f.push(e.id);let v=new n(o,f,null,null);this.addNodeToTree(v)}}else{let l=[];l.push(e.id);let f=new n(o,l,null,null);this.addNodeToTree(f)}new Event(`${o}`)}else console.log("cannot insert key id with  n 0 to the connection tree",e)}static addNodeToTree(e){return h(this,void 0,void 0,function*(){return null==this.node?(this.node=e,console.log("this is type dispatch in connection",e),(0,S.dispatchIdEvent)(e.key),this.node):(this.node=this.node.addNode(e,this.node,this.node.height),this.node)})}static removeNodeFromTree(e){return h(this,void 0,void 0,function*(){this.node&&(this.node=this.node.removeNode(this.node,e))})}}return I.node=null,I})()},999:(K,E,g)=>{g.d(E,{R:()=>r});var S=g(5205),N=g(1863),n=g(6416),h=g(4711),_=g(5868),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function r(e){return I(this,arguments,void 0,function*(o,l=null,f=null,v=null,T=null,s=null,a=null,t=!1,c={concepts:[],connections:[]}){var C,b,m,L;const A=S.Logger.logfunction("CreateTheCompositionLocal")||{};if(S.serviceWorker){A.serviceWorker=!0;try{const W=yield(0,S.sendMessage)("CreateTheCompositionLocal",{json:o,ofTheConceptId:l,ofTheConceptUserId:f,mainKey:v,userId:T,accessId:s,sessionInformationId:a,actions:c});return!(null===(b=null===(C=W?.actions)||void 0===C?void 0:C.concepts)||void 0===b)&&b.length&&(c.concepts=JSON.parse(JSON.stringify(W.actions.concepts))),!(null===(L=null===(m=W?.actions)||void 0===m?void 0:m.connections)||void 0===L)&&L.length&&(c.connections=JSON.parse(JSON.stringify(W.actions.connections))),S.Logger.logUpdate(A),W.data}catch(W){console.error("CreateTheCompositionLocal error sw: ",W),(0,N.ey)(A,"CreateTheCompositionLocal",W),(0,S.handleServiceWorkerException)(W)}}let O=T??999,B=s??999,G=a??999,R=v??0,M=(0,n.u)();for(const W in o)if("string"!=typeof o[W]&&"number"!=typeof o[W])if(null==l&&null==f){let V=R,Z=yield(0,_.k)(W,"",!0,O,B,G,void 0,c);M=Z,V=Z.id,R=Z.id,yield r(o[W],Z.id,Z.userId,V,T,s,a,void 0,c)}else{let V=l??999,Z=R,te=yield(0,_.k)(W,"",!0,O,B,G,void 0,c);yield(0,h.F)(V,te.id,Z,void 0,void 0,void 0,c),yield r(o[W],te.id,te.userId,Z,T,s,a,void 0,c)}else{let V=l??999,Z=R,te=yield(0,_.k)(W,o[W].toString(),!1,O,B,G,void 0,c);yield(0,h.F)(V,te.id,Z,void 0,void 0,void 0,c)}return S.Logger.logUpdate(A),M})}},1106:(K,E,g)=>{let{nanoid:S}=g(5042),{isAbsolute:N,resolve:n}=g(197),{SourceMapConsumer:h,SourceMapGenerator:_}=g(1866),{fileURLToPath:I,pathToFileURL:r}=g(2739),e=g(3614),o=g(3878),l=g(9746),f=Symbol("lineToIndexCache"),v=Boolean(h&&_),T=Boolean(n&&N);function s(t){if(t[f])return t[f];let c=t.css.split("\n"),C=new Array(c.length),b=0;for(let m=0,L=c.length;m<L;m++)C[m]=b,b+=c[m].length+1;return t[f]=C,C}class a{get from(){return this.file||this.id}constructor(c,C={}){if(null==c||"object"==typeof c&&!c.toString)throw new Error(`PostCSS received ${c} instead of CSS string`);if(this.css=c.toString(),"\ufeff"===this.css[0]||"\ufffe"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,C.document&&(this.document=C.document.toString()),C.from&&(this.file=!T||/^\w+:\/\//.test(C.from)||N(C.from)?C.from:n(C.from)),T&&v){let b=new o(this.css,C);if(b.text){this.map=b;let m=b.consumer().file;!this.file&&m&&(this.file=this.mapResolve(m))}}this.file||(this.id="<input css "+S(6)+">"),this.map&&(this.map.file=this.from)}error(c,C,b,m={}){let L,A,O,B,G;if(C&&"object"==typeof C){let M=C,W=b;if("number"==typeof M.offset){B=M.offset;let V=this.fromOffset(B);C=V.line,b=V.col}else B=this.fromLineAndColumn(C=M.line,b=M.column);if("number"==typeof W.offset){O=W.offset;let V=this.fromOffset(O);A=V.line,L=V.col}else A=W.line,L=W.column,O=this.fromLineAndColumn(W.line,W.column)}else if(b)B=this.fromLineAndColumn(C,b);else{B=C;let M=this.fromOffset(B);C=M.line,b=M.col}let R=this.origin(C,b,A,L);return G=R?new e(c,void 0===R.endLine?R.line:{column:R.column,line:R.line},void 0===R.endLine?R.column:{column:R.endColumn,line:R.endLine},R.source,R.file,m.plugin):new e(c,void 0===A?C:{column:b,line:C},void 0===A?b:{column:L,line:A},this.css,this.file,m.plugin),G.input={column:b,endColumn:L,endLine:A,endOffset:O,line:C,offset:B,source:this.css},this.file&&(r&&(G.input.url=r(this.file).toString()),G.input.file=this.file),G}fromLineAndColumn(c,C){return s(this)[c-1]+C-1}fromOffset(c){let C=s(this),b=0;if(c>=C[C.length-1])b=C.length-1;else{let m,L=C.length-2;for(;b<L;)if(m=b+(L-b>>1),c<C[m])L=m-1;else{if(!(c>=C[m+1])){b=m;break}b=m+1}}return{col:c-C[b]+1,line:b+1}}mapResolve(c){return/^\w+:\/\//.test(c)?c:n(this.map.consumer().sourceRoot||this.map.root||".",c)}origin(c,C,b,m){if(!this.map)return!1;let L,A,O=this.map.consumer(),B=O.originalPositionFor({column:C,line:c});if(!B.source)return!1;"number"==typeof b&&(L=O.originalPositionFor({column:m,line:b})),A=N(B.source)?r(B.source):new URL(B.source,this.map.consumer().sourceRoot||r(this.map.mapFile));let G={column:B.column,endColumn:L&&L.column,endLine:L&&L.line,line:B.line,url:A.toString()};if("file:"===A.protocol){if(!I)throw new Error("file: protocol is not available in this PostCSS build");G.file=I(A)}let R=O.sourceContentFor(B.source);return R&&(G.source=R),G}toJSON(){let c={};for(let C of["hasBOM","css","file","id"])null!=this[C]&&(c[C]=this[C]);return this.map&&(c.map={...this.map},c.map.consumerCache&&(c.map.consumerCache=void 0)),c}}K.exports=a,a.default=a,l&&l.registerInput&&l.registerInput(a)},1167:(K,E,g)=>{g.d(E,{Y:()=>I});var S=g(9581),N=g(3518),n=g(5205),h=g(1863),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};function I(r){return _(this,void 0,void 0,function*(){const e=n.Logger.logfunction("CreateTheConceptApi",r);let o=(0,n.CreateDefaultConcept)();try{var l=(0,N.Xr)();const f=yield fetch(S.B.CreateTheConceptUrl(),{method:"POST",headers:l,body:JSON.stringify(r)});if(!f.ok)throw(0,h.ry)(f),new Error(`Error! status: ${f.status}`);return o=yield f.json(),n.Logger.logUpdate(e),o}catch(f){f instanceof Error?console.log("Create the concept api error message: ",f.message):console.log("Create the concept api unexpected error: ",f),(0,h.Mb)(f,S.B.CreateTheConceptUrl()),(0,h.ey)(e,"CreateTheConceptApi",f)}})}},1213:(K,E,g)=>{g.d(E,{f:()=>I});var S=g(9736),N=g(7820),n=g(5205),h=g(176),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};function I(r){return _(this,void 0,void 0,function*(){let e=performance.now();try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetTheConceptLocal",{id:r})).data}catch(l){console.error("GetTheConceptLocal error sw: ",l),(0,n.handleServiceWorkerException)(l)}let o=(0,n.CreateDefaultLConcept)();if(r<0){if(o=yield S.v.GetConcept(r),0==o.id){let l=yield N.G.getNodeFromTree(r);if(l?.value){let f=l.value;f&&(o=f)}}}else{let l=yield(0,n.GetTheConcept)(r);o=(0,h.F4)(l)}return o}catch(o){throw n.Logger.logError(e,"unknown","read","unknown",void 0,200,void 0,"GetTheConceptLocal",[r],"unknown",void 0),o}})}},1218:(K,E,g)=>{g.d(E,{A:()=>I});var S=g(5205),N=g(7282),n=g(1666),h=g(8407),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};function I(r){return _(this,arguments,void 0,function*(e,o=null,l=null,f=null,v=null,T=null,s=null){if(S.serviceWorker)try{return(yield(0,S.sendMessage)("CreateTheComposition",{json:e,ofTheConceptId:o,ofTheConceptUserId:l,mainKey:f,userId:v,accessId:T,sessionInformationId:s})).data}catch(m){console.error("CreateTheComposition sw error: ",m),(0,S.handleServiceWorkerException)(m)}let a=v??999,t=T??4,c=s??999,C=f??0,b=(0,N.o)();for(const m in e)if("string"!=typeof e[m]&&"number"!=typeof e[m])if(null==o&&null==l){let L=C,A=yield(0,h.A)(m,"",!0,a,t,c);b=A,L=A.id,C=A.id,yield I(e[m],A.id,A.userId,L,v,T,s)}else{let L=o??999,A=l??999,O=C,B=yield(0,h.A)(m,"",!0,a,t,c);b=B,yield(0,n.q)(L,A,B.id,O),yield I(e[m],B.id,B.userId,O,v,T,s)}else{let L=o??999,A=l??10267,O=C,B=yield(0,h.A)(m,e[m].toString(),!1,a,t,c);yield(0,n.q)(L,A,B.id,O)}return b})}},1239:(K,E,g)=>{g.d(E,{I:()=>o,r:()=>e});var S=g(3026),N=g(9581),n=g(3518),h=g(1863),_=g(5205),I=g(1596),r=function(l,f,v,T){return new(v||(v=Promise))(function(s,a){function t(b){try{C(T.next(b))}catch(m){a(m)}}function c(b){try{C(T.throw(b))}catch(m){a(m)}}function C(b){var m;b.done?s(b.value):(m=b.value,m instanceof v?m:new v(function(L){L(m)})).then(t,c)}C((T=T.apply(l,f||[])).next())})};function e(l){return r(this,void 0,void 0,function*(){const f=_.Logger.logfunction("GetConceptBulk",[l.length])||{};let v=[],T=((new Date).getTime(),performance.now()),s=Array.from(new Set(l));try{if(_.serviceWorker){f.serviceWorker=!0;try{const a=yield(0,_.sendMessage)("GetConceptBulk",{passedConcepts:l});return _.Logger.logUpdate(f),a.data}catch(a){console.error("GetConceptBulk sw error: ",a),(0,h.ey)(f,"GetConceptBulk",a),(0,_.handleServiceWorkerException)(a)}}if(s.length>0){let a=[];for(let t=0;t<s.length;t++)if(!S.I.GetNpc(s[t])){let c=yield S.I.GetConcept(s[t]);0==c.id?a.push(s[t]):v.push(c)}if(0==a.length)return _.Logger.logfunction(f),v;{let t;const c={method:"POST",headers:(0,n.Xr)(),body:JSON.stringify(a)};try{t=yield fetch(N.B.GetConceptBulkUrl(),c)}catch{t=yield(0,I.g)(c,"/api/get_concept_bulk")}yield function(C,b,m,L,A){return r(this,void 0,void 0,function*(){if(C.ok){let O=yield C.json();if(O.length>0)for(let B=0;B<O.length;B++){let G=O[B];S.I.AddConcept(G),m.push(G)}_.Logger.logUpdate(L)}else console.log("Get Concept Bulk error",C.status),_.Logger.logError(A,"unknown","read","unknown",void 0,C.status,C,"GetConceptBulk",[b],"unknown",void 0),(0,h.ry)(C)})}(t,l,v,f,T)}}}catch(a){a instanceof Error?console.log("Get Concept Bulk  error message: ",a.message):console.log("Get Concept Bulk  unexpected error: ",a),_.Logger.logError(T,"unknown","read","unknown",void 0,500,a,"GetConceptBulk",[l],"unknown",void 0),(0,h.Mb)(a,N.B.GetConceptBulkUrl()),(0,h.ey)(f,"GetConceptBulk",a)}return v})}function o(l){return r(this,void 0,void 0,function*(){const f=[];if(l.length>0){const v={"Content-Type":"application/json"};try{const T=yield fetch(N.B.GetConceptBulkUrl(),{method:"POST",headers:v,body:JSON.stringify(l)});if(T.ok){const s=yield T.json();if(s.length>0)for(let a=0;a<s.length;a++){const t=s[a];f.push(t),S.I.AddConcept(t)}}else console.log("bulk concept getter api error: ",T.status),(0,h.ry)(T)}catch(T){T instanceof Error?console.log("bulk concept getter api error: ",T.message):console.log("bulk concept getter api error: ",T),(0,h.Mb)(T,N.B.GetConceptBulkUrl())}}return f})}},1320:(K,E,g)=>{g.d(E,{zl:()=>a,b6:()=>C,e$:()=>m,y6:()=>b,rq:()=>L,yV:()=>t,_W:()=>c});var S=g(5205),N=g(6687);function n(A){return A.startsWith("the_")?A.slice(4):A}var h=function(A,O,B,G){return new(B||(B=Promise))(function(R,M){function W(te){try{Z(G.next(te))}catch(ne){M(ne)}}function V(te){try{Z(G.throw(te))}catch(ne){M(ne)}}function Z(te){var ne;te.done?R(te.value):(ne=te.value,ne instanceof B?ne:new B(function(me){me(ne)})).then(W,V)}Z((G=G.apply(A,O||[])).next())})};function _(A,O,B){return h(this,void 0,void 0,function*(){var G,R,M,W,V,Z,te,ne;let me=[];for(let H=0;H<A.length;H++)me.push(A[H].toTheConceptId),me.push(A[H].ofTheConceptId),me.push(A[H].typeId);for(let H=0;H<A.length;H++){let pe=!1;B.includes(A[H].id)&&(pe=!0);let ke=yield(0,S.GetTheConcept)(A[H].ofTheConceptId),ie=yield(0,S.GetTheConcept)(A[H].toTheConceptId);if(1==pe&&0!=ke.id&&0!=ie.id){let Y,re=null!==(R=null===(G=ie.type)||void 0===G?void 0:G.characterValue)&&void 0!==R?R:"self";A[H].toTheConceptId in O?Y=O[A[H].toTheConceptId]:(Y={},Y[re]={},O[A[H].toTheConceptId]=Y);let ue=yield(0,S.GetTheConcept)(A[H].typeId);try{let z=null!==(W=null===(M=ke?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:"none",ge=ke.characterValue;ue.characterValue.includes("_s_")&&(ke.id in O||(O[ke.id]={}),O[ke.id][z]=ge),O[ie.id]={}}catch(z){console.log("this is error",z)}}if(0!=ke.id&&0!=ie.id){let Y,re=null!==(Z=null===(V=ke.type)||void 0===V?void 0:V.characterValue)&&void 0!==Z?Z:"self";A[H].ofTheConceptId in O?Y=O[A[H].ofTheConceptId]:(Y={},Y[re]={},O[A[H].ofTheConceptId]=Y);let ue=yield(0,S.GetTheConcept)(A[H].typeId);try{let z=null!==(ne=null===(te=ie?.type)||void 0===te?void 0:te.characterValue)&&void 0!==ne?ne:"none",ge=ie.characterValue;ue.characterValue.includes("_s_")&&(ie.id in O||(O[ie.id]={}),O[ie.id][z]=ge),O[ke.id]={}}catch(z){console.log("this is error",z)}}}return O})}var I=g(5312),r=g(7876),e=function(A,O,B,G){return new(B||(B=Promise))(function(R,M){function W(te){try{Z(G.next(te))}catch(ne){M(ne)}}function V(te){try{Z(G.throw(te))}catch(ne){M(ne)}}function Z(te){var ne;te.done?R(te.value):(ne=te.value,ne instanceof B?ne:new B(function(me){me(ne)})).then(W,V)}Z((G=G.apply(A,O||[])).next())})};function o(A,O,B){if(A in O){let G=O[A];G&&(B[G.connectionType+"_count"]=G.count)}}var l=function(A,O,B,G){return new(B||(B=Promise))(function(R,M){function W(te){try{Z(G.next(te))}catch(ne){M(ne)}}function V(te){try{Z(G.throw(te))}catch(ne){M(ne)}}function Z(te){var ne;te.done?R(te.value):(ne=te.value,ne instanceof B?ne:new B(function(me){me(ne)})).then(W,V)}Z((G=G.apply(A,O||[])).next())})},f=g(4698),v=g(6915),T=function(A,O,B,G){return new(B||(B=Promise))(function(R,M){function W(te){try{Z(G.next(te))}catch(ne){M(ne)}}function V(te){try{Z(G.throw(te))}catch(ne){M(ne)}}function Z(te){var ne;te.done?R(te.value):(ne=te.value,ne instanceof B?ne:new B(function(me){me(ne)})).then(W,V)}Z((G=G.apply(A,O||[])).next())})},s=function(A,O,B,G){return new(B||(B=Promise))(function(R,M){function W(te){try{Z(G.next(te))}catch(ne){M(ne)}}function V(te){try{Z(G.throw(te))}catch(ne){M(ne)}}function Z(te){var ne;te.done?R(te.value):(ne=te.value,ne instanceof B?ne:new B(function(me){me(ne)})).then(W,V)}Z((G=G.apply(A,O||[])).next())})};function a(A,O){return s(this,arguments,void 0,function*(B,G,R=""){let M=yield(0,S.SearchWithTypeAndLinkerApi)(B,G,R),W=M.compositionIds,V=M.internalConnections,Z=M.linkers,te=M.reverse,ne=M.mainCompositionIds,me=yield(0,N.QL)(Z),H=yield(0,N.MT)(W,V);return yield(0,I.NK)(me,H,ne,te)})}function t(A,O,B,G,R){return s(this,void 0,void 0,function*(){let M=yield(0,N.QL)(A),W=yield(0,N.rv)(O,B);return yield(0,I.Ve)(M,W,O,G,R)})}function c(A,O,B,G,R){return s(this,void 0,void 0,function*(){let M=yield(0,N.QL)(A),W=yield(0,N.D)(O,B);return yield(0,I.NK)(M,W,G,R)})}function C(A,O,B,G,R){return s(this,void 0,void 0,function*(){if(S.serviceWorker)try{return(yield(0,S.sendMessage)("formatConnections",{linkers:A,conceptIds:O,mainCompositionIds:B,reverse:G,countInfos:R})).data}catch(Z){console.error("formatConnections error sw: ",Z),(0,S.handleServiceWorkerException)(Z)}let M=yield(0,N.QL)(A);M=(0,v.X)(M);let W=[];return W=yield _(M,W,G),W=yield function(Z,te,ne){return h(this,void 0,void 0,function*(){var me,H,pe,ke,ie,Y,re,ue;let z=[];for(let ge=0;ge<Z.length;ge++)z.push(Z[ge].toTheConceptId),z.push(Z[ge].ofTheConceptId),z.push(Z[ge].typeId);Z.sort(function(ge,Te){return Te.id-ge.id});for(let ge=0;ge<Z.length;ge++){let Te=!1;ne.includes(Z[ge].id)&&(Te=!0);let _e=yield(0,S.GetTheConcept)(Z[ge].ofTheConceptId),Se=yield(0,S.GetTheConcept)(Z[ge].toTheConceptId);if(1==Te&&0!=_e.id&&0!=Se.id){let We,Je=null!==(H=null===(me=Se.type)||void 0===me?void 0:me.characterValue)&&void 0!==H?H:"self";Z[ge].toTheConceptId in te?(We=te[Z[ge].toTheConceptId],Je in We||(We[Je]={})):(We={},We[Je]={},te[Z[ge].toTheConceptId]=We);let Me=yield(0,S.GetTheConcept)(Z[ge].typeId);try{let Ye=null!==(ke=null===(pe=_e?.type)||void 0===pe?void 0:pe.characterValue)&&void 0!==ke?ke:"none",ht=_e.characterValue,De=Me.characterValue;""==De&&(De=Ye,De=n(De));let pt={[Ye]:ht},ot=De+"_reverse";Me.characterValue.includes("_s_")||("string"==typeof We[Je]&&(We[Je]={}),We[Je][ot]=pt)}catch(Ye){console.log("this is error",Ye)}}if(0!=_e.id&&0!=Se.id){let We,Je=null!==(Y=null===(ie=_e.type)||void 0===ie?void 0:ie.characterValue)&&void 0!==Y?Y:"self";Z[ge].ofTheConceptId in te?(We=te[Z[ge].ofTheConceptId],Je in We||(We[Je]={})):(We={},We[Je]={},te[Z[ge].ofTheConceptId]=We);let Me=yield(0,S.GetTheConcept)(Z[ge].typeId);try{let Ye=null!==(ue=null===(re=Se?.type)||void 0===re?void 0:re.characterValue)&&void 0!==ue?ue:"none",ht=Se.characterValue,De=Me.characterValue,pt=!1;""==De&&(De=Ye,De=n(De),pt=!0);let ot={[Ye]:ht};isNaN(Number(De))?Me.characterValue.includes("_s_")||("string"==typeof We[Je]&&(We[Je]={}),We[Je][De]=pt?ht:ot):(Array.isArray(We[Je])||(We[Je]=[]),We[Je].push(ht))}catch(Ye){console.log("this is error",Ye)}}}return te})}(M,W,G),yield function(Z,te,ne,me){return h(this,arguments,void 0,function*(H,pe,ke,ie,Y=[]){var re,ue,z,ge,Te,_e;let Se=[],We=[];for(let Je=0;Je<H.length;Je++)We.push(H[Je].toTheConceptId),We.push(H[Je].ofTheConceptId),We.push(H[Je].typeId);H.sort(function(Je,Me){return Me.id-Je.id});for(let Je=0;Je<H.length;Je++){let Me=!1;Y.includes(H[Je].id)&&(Me=!0);let Ye=yield(0,S.GetTheConcept)(H[Je].ofTheConceptId),ht=yield(0,S.GetTheConcept)(H[Je].toTheConceptId);if(1==Me&&0!=Ye.id&&0!=ht.id&&ht.id in pe){let De,pt=null!==(ue=null===(re=ht.type)||void 0===re?void 0:re.characterValue)&&void 0!==ue?ue:"self";H[Je].toTheConceptId in pe?De=pe[H[Je].toTheConceptId]:(De={},De[pt]={},pe[H[Je].toTheConceptId]=De);let ot=yield(0,S.GetTheConcept)(H[Je].typeId);try{let we=ot.characterValue+"_reverse",Qe=pe[H[Je].ofTheConceptId];Qe&&(Array.isArray(De[pt][we])?De[pt][we].push(Qe):ot.characterValue.includes("_s_")?(De[pt][we]=[],De[pt][we].push(Qe)):De[pt][we]=Qe)}catch(we){console.log("this is error",we)}}if(0!=Ye.id&&0!=ht.id&&Ye.id in pe){let De,pt=null!==(ge=null===(z=Ye.type)||void 0===z?void 0:z.characterValue)&&void 0!==ge?ge:"self";H[Je].ofTheConceptId in pe?(De=pe[H[Je].ofTheConceptId],"string"==typeof De[pt]&&(De[pt]={})):(De={},De[pt]={},pe[H[Je].ofTheConceptId]=De);let ot=!1,we=(yield(0,S.GetTheConcept)(H[Je].typeId)).characterValue;""==we&&(we=ht.characterValue,ot=!0),""==we&&(we=null!==(_e=null===(Te=ht?.type)||void 0===Te?void 0:Te.characterValue)&&void 0!==_e?_e:"");try{let Qe=pe[H[Je].toTheConceptId];Qe&&(Array.isArray(De[pt])?De[pt].push(ot?Qe[we]:Qe):Array.isArray(De[pt][we])?De[pt][we].push(Qe):we.includes("_s_")?(De[pt][we]=[],De[pt][we].push(ot?Qe[we]:Qe)):De[pt][we]=ot?Qe[we]:Qe)}catch(Qe){console.log("this is error",Qe)}}}for(let Je=0;Je<ke.length;Je++){let Me=pe[ke[Je]];Me?(Me.id=ke[Je],Se.push(Me)):0!=(yield S.ConceptsData.GetConcept(ke[Je])).id&&(Me={},Me.id=ke[Je],Se.push(Me))}return Se})}(M,W,B,[],G)})}function b(A,O,B,G,R){return s(this,arguments,void 0,function*(M,W,V,Z,te,ne="DESC"){if(S.serviceWorker)try{return(yield(0,S.sendMessage)("formatConnectionsJustId",{linkers:M,conceptIds:W,mainCompositionIds:V,reverse:Z,countInfos:te,order:ne})).data}catch(ie){console.error("formatConnectionsJustId error sw: ",ie),(0,S.handleServiceWorkerException)(ie)}let me=yield(0,N.QL)(M),H=yield(0,f.V)(te);me=(0,v.X)(me,ne);let pe=[];return pe=yield _(me,pe,Z),pe=yield function(ie,Y){return e(this,arguments,void 0,function*(re,ue,z=[]){var ge,Te,_e,Se,We,Je,Me,Ye;let ht=[];for(let De=0;De<re.length;De++)ht.push(re[De].toTheConceptId),ht.push(re[De].ofTheConceptId),ht.push(re[De].typeId);for(let De=0;De<re.length;De++){let pt=!1,ot=yield(0,r.A)(re[De].ofTheConceptId),we=yield(0,r.A)(re[De].toTheConceptId);if(z.includes(re[De].id)&&(pt=!0),1==pt&&0!=ot.id&&0!=we.id){let Qe,gt=yield(0,r.A)(re[De].typeId),dt=null!==(Te=null===(ge=we.type)||void 0===ge?void 0:ge.characterValue)&&void 0!==Te?Te:"self";re[De].toTheConceptId in ue?(Qe=ue[re[De].toTheConceptId],dt in Qe||(Qe[dt]={})):(Qe={},Qe[dt]={},ue[re[De].toTheConceptId]=Qe);try{let Ne=null!==(Se=null===(_e=ot?.type)||void 0===_e?void 0:_e.characterValue)&&void 0!==Se?Se:"none",Nt=ot.characterValue,ut=gt.characterValue;""==ut&&(ut=Ne,ut=n(ut));let wt={id:ot.id,[Ne]:Nt,created_on:re[De].entryTimeStamp},ft=ut+"_reverse";ft.includes("_s_")||("string"==typeof Qe[dt]&&(Qe[dt]={}),Qe[dt][ft]=wt)}catch(Ne){console.log("this is error",Ne)}}if(0!=ot.id&&0!=we.id){let Qe,gt=yield(0,r.A)(re[De].typeId),dt=null!==(Je=null===(We=ot.type)||void 0===We?void 0:We.characterValue)&&void 0!==Je?Je:"self";re[De].ofTheConceptId in ue?(Qe=ue[re[De].ofTheConceptId],dt in Qe||(Qe[dt]={})):(Qe={},Qe[dt]={},ue[re[De].ofTheConceptId]=Qe);try{let Ne=null!==(Ye=null===(Me=we?.type)||void 0===Me?void 0:Me.characterValue)&&void 0!==Ye?Ye:"none",Nt=we.characterValue,ut=gt.characterValue,wt=!1;""==ut&&(ut=Ne,ut=n(ut),wt=!0);let ft={};ft[Ne]={id:we.id,data:Nt,created_on:re[De].entryTimeStamp},isNaN(Number(ut))?ut.includes("_s_")||("string"==typeof Qe[dt]&&(Qe[dt]={}),Qe[dt][ut]=wt?ft[Ne]:ft):(Array.isArray(Qe[dt])||(Qe[dt]=[]),Qe[dt].push(ft[Ne]))}catch(Ne){console.log("this is error",Ne)}}}return ue})}(me,pe,Z),yield function(ie,Y,re){return e(this,arguments,void 0,function*(ue,z,ge,Te=[],_e){var Se,We,Je,Me,Ye,ht,De;(new Date).getTime();let pt=[],ot=[];for(let we=0;we<ue.length;we++)ot.push(ue[we].toTheConceptId),ot.push(ue[we].ofTheConceptId),ot.push(ue[we].typeId);for(let we=0;we<ue.length;we++){let Qe=!1,gt=yield(0,r.A)(ue[we].ofTheConceptId),dt=yield(0,r.A)(ue[we].toTheConceptId);if(Te.includes(ue[we].id)&&(Qe=!0),1==Qe&&0!=gt.id&&0!=dt.id&&dt.id in z){let Ne,Nt=yield(0,r.A)(ue[we].typeId),ut=null!==(We=null===(Se=dt.type)||void 0===Se?void 0:Se.characterValue)&&void 0!==We?We:"self",wt=!1;ue[we].toTheConceptId in z&&(wt=!0),ue[we].toTheConceptId in z?(Ne=z[ue[we].toTheConceptId],"string"==typeof Ne[ut]&&(Ne[ut]={})):(Ne={},Ne[ut]={},z[ue[we].toTheConceptId]=Ne);try{if(z[ue[we].ofTheConceptId]){let ft=z[ue[we].ofTheConceptId];ft&&(ft.id=gt.id,ft.created_on=gt.entryTimeStamp);let Tt=Nt.characterValue+"_reverse";Array.isArray(Ne[ut][Tt])?Ne[ut][Tt].push(ft):Tt.includes("_s_")?(Ne[ut][Tt]=[],Ne[ut][Tt].push(ft)):Ne[ut][Tt]=ft}}catch(ft){console.log("this is error",ft)}}if(0!=gt.id&&0!=dt.id&&gt.id in z){let Ne,Nt=yield(0,r.A)(ue[we].typeId),ut=null!==(Me=null===(Je=gt.type)||void 0===Je?void 0:Je.characterValue)&&void 0!==Me?Me:"self",wt=!1;ue[we].toTheConceptId in z&&(wt=!0),ue[we].ofTheConceptId in z?(Ne=z[ue[we].ofTheConceptId],"string"==typeof Ne[ut]&&(Ne[ut]={})):(Ne={},Ne[ut]={},z[ue[we].ofTheConceptId]=Ne),o(gt.id,_e,Ne);let ft=!1,Tt=Nt.characterValue;""==Tt&&(Tt=dt.characterValue,ft=!0),""==Tt&&(Tt=(null===(Ye=dt?.type)||void 0===Ye?void 0:Ye.characterValue)||"");try{let en=null!==(De=null===(ht=dt?.type)||void 0===ht?void 0:ht.characterValue)&&void 0!==De?De:"none",un=z[ue[we].toTheConceptId];if(un){let kn={};kn[en]={data:un[en],id:dt.id,created_on:ue[we].entryTimeStamp},Array.isArray(Ne[ut])?Ne[ut].push(ft?un[Tt]:un):Array.isArray(Ne[ut][Tt])?Ne[ut][Tt].push(kn):Tt.includes("_s_")?(Ne[ut][Tt]=[],Ne[ut][Tt].push(ft?kn[en]:kn)):Ne[ut][Tt]=ft?kn[en]:kn,o(dt.id,_e,kn)}}catch(en){console.log("this is error",en)}}}for(let we=0;we<ge.length;we++){let Qe={};Qe=z[ge[we]],Qe?Qe.id=ge[we]:0!=(yield S.ConceptsData.GetConcept(ge[we])).id&&(Qe={},Qe.id=ge[we]),pt.push(Qe)}return pt})}(me,pe,V,Z,H)})}function m(A,O,B,G,R){return s(this,arguments,void 0,function*(M,W,V,Z,te,ne="DESC"){try{if(S.serviceWorker)try{return(yield(0,S.sendMessage)("formatConnectionsDataId",{linkers:M,conceptIds:W,mainCompositionIds:V,reverse:Z,countInfos:te,order:ne})).data}catch(Y){console.error("formatConnectionsDataId error sw: ",Y),(0,S.handleServiceWorkerException)(Y)}let me,H;try{me=yield(0,N.QL)(M)}catch(Y){throw console.error("Error in GetConnectionDataPrefetch:",Y),new Error(`Failed to prefetch connections: ${Y instanceof Error?Y.message:String(Y)}`)}try{H=yield(0,f.V)(te)}catch(Y){throw console.error("Error in GetConnectionTypeForCount:",Y),new Error(`Failed to get connection type for count: ${Y instanceof Error?Y.message:String(Y)}`)}try{me=(0,v.X)(me,ne)}catch(Y){throw console.error("Error in orderTheConnections:",Y),new Error(`Failed to order connections: ${Y instanceof Error?Y.message:String(Y)}`)}let pe,ke=[],ie=[];try{ke=yield function(Y,re){var ue=arguments;return l(this,arguments,void 0,function*(z,ge,Te=[]){var _e,Se,We,Je,Me,Ye,ht,De;try{const pt=S.Logger.logfunction("FormatFunctionData",ue);let ot=[];for(let we=0;we<z.length;we++)ot.push(z[we].toTheConceptId),ot.push(z[we].ofTheConceptId),ot.push(z[we].typeId);for(let we=0;we<z.length;we++)try{let Qe=!1,gt=yield(0,S.GetTheConcept)(z[we].ofTheConceptId),dt=yield(0,S.GetTheConcept)(z[we].toTheConceptId);if(Te.includes(z[we].id)&&(Qe=!0),1==Qe&&0!=gt.id&&0!=dt.id){let Ne,Nt=yield(0,S.GetTheConcept)(z[we].typeId),ut=null!==(Se=null===(_e=dt.type)||void 0===_e?void 0:_e.characterValue)&&void 0!==Se?Se:"self";z[we].toTheConceptId in ge?Ne=ge[z[we].toTheConceptId]:(Ne={},Ne[ut]={},ge[z[we].toTheConceptId]=Ne);try{let wt=null!==(Je=null===(We=gt?.type)||void 0===We?void 0:We.characterValue)&&void 0!==Je?Je:"none",ft=gt.characterValue;(Nt.characterValue+"_reverse").includes("_s_")&&(gt.id in ge||(ge[gt.id]={}),ge[gt.id][wt]=ft),ge[dt.id]={}}catch(wt){console.log("this is error",wt)}}if(0!=gt.id&&0!=dt.id){let Ne,Nt=yield(0,S.GetTheConcept)(z[we].typeId),ut=null!==(Ye=null===(Me=gt.type)||void 0===Me?void 0:Me.characterValue)&&void 0!==Ye?Ye:"self";z[we].ofTheConceptId in ge?Ne=ge[z[we].ofTheConceptId]:(Ne={},Ne[ut]={},ge[z[we].ofTheConceptId]=Ne);try{let wt=null!==(De=null===(ht=dt?.type)||void 0===ht?void 0:ht.characterValue)&&void 0!==De?De:"none",ft=dt.characterValue;Nt.characterValue.includes("_s_")&&(dt.id in ge||(ge[dt.id]={}),ge[dt.id][wt]=ft),ge[gt.id]={}}catch(wt){console.log("this is error",wt)}}}catch(Qe){console.log("Error processing connection at index",we,Qe)}return S.Logger.logUpdate(pt),ge}catch(pt){throw console.log("Error in FormatFunctionData",pt),pt}})}(me,ke,Z)}catch(Y){throw console.error("Error in FormatFunctionData:",Y),new Error(`Failed to format function data: ${Y instanceof Error?Y.message:String(Y)}`)}try{ke=yield function(Y,re){var ue=arguments;return l(this,arguments,void 0,function*(z,ge,Te=[]){var _e,Se,We,Je,Me,Ye,ht,De;try{const pt=S.Logger.logfunction("FormatFunctionDataForData",ue);let ot=[];for(let we=0;we<z.length;we++)ot.push(z[we].toTheConceptId),ot.push(z[we].ofTheConceptId),ot.push(z[we].typeId);for(let we=0;we<z.length;we++)try{let Qe=!1,gt=yield(0,S.GetTheConcept)(z[we].ofTheConceptId),dt=yield(0,S.GetTheConcept)(z[we].toTheConceptId);if(Te.includes(z[we].id)&&(Qe=!0),1==Qe&&0!=gt.id&&0!=dt.id){let Ne,Nt=yield(0,S.GetTheConcept)(z[we].typeId),ut=null!==(Se=null===(_e=dt.type)||void 0===_e?void 0:_e.characterValue)&&void 0!==Se?Se:"self";z[we].toTheConceptId in ge?(Ne=ge[z[we].toTheConceptId],ut in Ne||(Ne[ut]={})):(Ne={},Ne[ut]={},ge[z[we].toTheConceptId]=Ne);try{let wt=null!==(Je=null===(We=gt?.type)||void 0===We?void 0:We.characterValue)&&void 0!==Je?Je:"none",ft=gt.characterValue,Tt=Nt.characterValue;""==Tt&&(Tt=wt,Tt=n(Tt));let en={id:gt.id,data:{[wt]:ft}},un=Tt+"_reverse";un.includes("_s_")||("string"==typeof Ne[ut]&&(Ne[ut]={}),Ne[ut][un]=en)}catch(wt){console.log("this is error",wt)}}if(0!=gt.id&&0!=dt.id){let Ne,Nt=yield(0,S.GetTheConcept)(z[we].typeId),ut=null!==(Ye=null===(Me=gt.type)||void 0===Me?void 0:Me.characterValue)&&void 0!==Ye?Ye:"self";z[we].ofTheConceptId in ge?(Ne=ge[z[we].ofTheConceptId],ut in Ne||(Ne[ut]={})):(Ne={},Ne[ut]={},ge[z[we].ofTheConceptId]=Ne);try{let wt=null!==(De=null===(ht=dt?.type)||void 0===ht?void 0:ht.characterValue)&&void 0!==De?De:"none",ft=dt.characterValue,Tt=Nt.characterValue,en=!1;""==Tt&&(Tt=wt,Tt=n(Tt),en=!0);let un={id:dt.id,data:{[wt]:ft}};isNaN(Number(Tt))?Tt.includes("_s_")||("string"==typeof Ne[ut]&&(Ne[ut]={}),Ne[ut][Tt]=un):(Array.isArray(Ne[ut])||(Ne[ut]=[]),Ne[ut].push(un))}catch(wt){console.log("this is error",wt)}}}catch(Qe){console.log("Error processing connection at index",we,Qe)}return S.Logger.logUpdate(pt),ge}catch(pt){throw console.log("Error in FormatFunctionDataForData",pt),pt}})}(me,ke,Z)}catch(Y){throw console.error("Error in FormatFunctionDataForData:",Y),new Error(`Failed to format function data for data: ${Y instanceof Error?Y.message:String(Y)}`)}try{pe=yield function(Y,re,ue,z){var ge=arguments;return l(this,arguments,void 0,function*(Te,_e,Se,We,Je=[],Me){var Ye,ht,De,pt,ot;try{const Qe=S.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",ge);let gt=[],dt=[];for(let Ne=0;Ne<Te.length;Ne++)dt.push(Te[Ne].toTheConceptId),dt.push(Te[Ne].ofTheConceptId),dt.push(Te[Ne].typeId);for(let Ne=0;Ne<Te.length;Ne++)try{let Nt=!1,ut=yield(0,S.GetTheConcept)(Te[Ne].ofTheConceptId),wt=yield(0,S.GetTheConcept)(Te[Ne].toTheConceptId);if(Je.includes(Te[Ne].id)&&(Nt=!0),1==Nt&&0!=ut.id&&0!=wt.id&&wt.id in _e){let ft,Tt=yield(0,S.GetTheConcept)(Te[Ne].typeId),en=null!==(ht=null===(Ye=wt.type)||void 0===Ye?void 0:Ye.characterValue)&&void 0!==ht?ht:"self",un=!1;Te[Ne].toTheConceptId in _e&&(un=!0),Te[Ne].toTheConceptId in _e?(ft=_e[Te[Ne].toTheConceptId],"string"==typeof ft[en]&&(ft[en]={})):(ft={},ft[en]={},_e[Te[Ne].toTheConceptId]=ft),o(wt.id,Me,ft);try{if(_e[Te[Ne].ofTheConceptId]){let kn={id:ut.id,data:_e[Te[Ne].ofTheConceptId],created_on:Te[Ne].entryTimeStamp},Nn=Tt.characterValue+"_reverse";Array.isArray(ft[en][Nn])?ft[en][Nn].push(kn):Nn.includes("_s_")?(ft[en][Nn]=[],ft[en][Nn].push(kn)):ft[en][Nn]=kn}}catch(kn){console.log("this is error",kn)}}if(0!=ut.id&&0!=wt.id&&ut.id in _e){let ft,Tt=yield(0,S.GetTheConcept)(Te[Ne].typeId),en=null!==(pt=null===(De=ut.type)||void 0===De?void 0:De.characterValue)&&void 0!==pt?pt:"self",un=!1;Te[Ne].toTheConceptId in _e&&(un=!0),Te[Ne].ofTheConceptId in _e?(ft=_e[Te[Ne].ofTheConceptId],"string"==typeof ft[en]&&(ft[en]={})):(ft={},ft[en]={},_e[Te[Ne].ofTheConceptId]=ft),o(ut.id,Me,ft);let kn=!0,Nn=Tt.characterValue;""==Nn&&(Nn=wt.characterValue,kn=!0),""==Nn&&(Nn=(null===(ot=wt?.type)||void 0===ot?void 0:ot.characterValue)||"");try{let mo=_e[Te[Ne].toTheConceptId];if(mo){let Co={id:wt.id,data:_e[Te[Ne].toTheConceptId],created_on:Te[Ne].entryTimeStamp};Array.isArray(ft[en])?ft[en].push(mo):Array.isArray(ft[en][Nn])?ft[en][Tt.characterValue].push(Co):Nn.includes("_s_")?(ft[en][Nn]=[],ft[en][Nn].push(Co)):ft[en][Nn]=Co,o(wt.id,Me,Co)}}catch(mo){console.log("this is error",mo)}}}catch(Nt){console.log("Error processing connection at index",Ne,Nt)}for(let Ne=0;Ne<We.length;Ne++)try{let Nt={};Nt.id=We[Ne];let ut=yield(0,S.GetTheConcept)(Nt.id);Nt.data=_e[We[Ne]],Nt.created_on=ut.entryTimeStamp,gt.push(Nt)}catch(Nt){console.log("Error processing main composition at index",Ne,Nt)}return S.Logger.logUpdate(Qe),gt}catch(Qe){throw console.log("Error in FormatFromConnectionsAlteredArrayExternal",Qe),Qe}})}(me,ke,ie,V,Z,H)}catch(Y){throw console.error("Error in FormatFromConnectionsAlteredArrayExternal:",Y),new Error(`Failed to format from connections altered array external: ${Y instanceof Error?Y.message:String(Y)}`)}return pe}catch(me){throw console.error("Error in formatConnectionsDataId:",me),me}})}function L(A,O,B,G,R){return s(this,arguments,void 0,function*(M,W,V,Z,te,ne="DESC"){if(S.serviceWorker)try{return(yield(0,S.sendMessage)("formatConnectionsV2",{linkers:M,conceptIds:W,mainCompositionIds:V,reverse:Z,countInfos:te,order:ne})).data}catch(ie){console.error("formatConnectionsV2 error sw: ",ie),(0,S.handleServiceWorkerException)(ie)}let me=yield(0,N.QL)(M),H=yield(0,f.V)(te);me=(0,v.X)(me,ne);let pe={};return pe=yield function(ie){var Y=arguments;return T(this,arguments,void 0,function*(re,ue={},z=[]){var ge,Te,_e,Se,We;const Je=S.Logger.logfunction("FormatFunctionDataV2",Y);for(const Me of re){const Ye=z.includes(Me.id),ht=yield(0,S.GetTheConcept)(Me.ofTheConceptId),De=yield(0,S.GetTheConcept)(Me.toTheConceptId),pt=yield(0,S.GetTheConcept)(Me.typeId);if(0===ht.id||0===De.id)continue;const ot=Ye?De:ht,we=Ye?ht:De,Qe=null!==(Te=null===(ge=ot.type)||void 0===ge?void 0:ge.characterValue)&&void 0!==Te?Te:"self",gt=null!==(Se=null===(_e=we.type)||void 0===_e?void 0:_e.characterValue)&&void 0!==Se?Se:"none",dt=we.characterValue;null===(We=pt.characterValue)||void 0===We||We.includes("_s_"),ue[ot.id]||(ue[ot.id]={}),ue[ot.id][Qe]||(ue[ot.id][Qe]={}),ue[we.id]||(ue[we.id]={}),ue[we.id][gt]=dt}return S.Logger.logUpdate(Je),ue})}(me,pe,Z),pe=yield function(ie){var Y=arguments;return T(this,arguments,void 0,function*(re,ue={},z=[]){var ge,Te,_e,Se,We;const Je=S.Logger.logfunction("FormatFunctionDataForDataV2",Y);for(const Me of re){const Ye=z.includes(Me.id),ht=yield(0,S.GetTheConcept)(Me.ofTheConceptId),De=yield(0,S.GetTheConcept)(Me.toTheConceptId),pt=yield(0,S.GetTheConcept)(Me.typeId);if(0===ht.id||0===De.id)continue;const ot=Ye?De:ht,we=Ye?ht:De,Qe=null!==(Te=null===(ge=ot.type)||void 0===ge?void 0:ge.characterValue)&&void 0!==Te?Te:"self",gt=null!==(Se=null===(_e=we.type)||void 0===_e?void 0:_e.characterValue)&&void 0!==Se?Se:"none",dt=we.characterValue,Ne=null!==(We=pt.characterValue)&&void 0!==We?We:"";let Nt=""===Ne?n(gt):Ne;const ut=Nt.includes("_s_"),wt=!isNaN(Number(Nt)),ft={id:we.id,data:{[gt]:dt}};ue[ot.id]||(ue[ot.id]={}),Qe in ue[ot.id]&&"string"!=typeof ue[ot.id][Qe]||(ue[ot.id][Qe]=wt?[]:{});try{if(ut)continue;wt?ue[ot.id][Qe].push(ft):ue[ot.id][Qe][Ye?`${Nt}_reverse`:Nt]=ft}catch(Tt){console.error("Error formatting concept data:",Tt)}}return S.Logger.logUpdate(Je),ue})}(me,pe,Z),yield function(ie,Y,re){var ue=arguments;return T(this,arguments,void 0,function*(z,ge,Te,_e=[],Se){var We,Je,Me;const Ye=S.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",ue),ht=[];for(const De of z){const pt=_e.includes(De.id),ot=yield(0,S.GetTheConcept)(De.ofTheConceptId),we=yield(0,S.GetTheConcept)(De.toTheConceptId),Qe=yield(0,S.GetTheConcept)(De.typeId);if(0===ot.id||0===we.id)continue;const gt=pt?we:ot,dt=pt?ot:we,Ne=gt.id,Nt=dt.id,ut=null!==(Je=null===(We=gt.type)||void 0===We?void 0:We.characterValue)&&void 0!==Je?Je:"self",wt=Qe.characterValue+"_reverse",ft=Qe.characterValue||dt.characterValue||(null===(Me=dt.type)||void 0===Me?void 0:Me.characterValue)||"";if(ge[Ne]){const Tt=ge[Ne][ut],en=ge[Nt],un={id:dt.id,data:en,created_on:De.entryTimeStamp};o(Ne,Se,ge[Ne]);try{pt?Array.isArray(Tt[wt])?Tt[wt].push(un):Tt[wt]=[un]:Array.isArray(Tt)?Tt.push(en):Array.isArray(Tt[ft])?Tt[ft].push(un):ft.includes("_s_")?(Tt[ft]=[],Tt[ft].push(un)):Tt[ft]=[un],o(Nt,Se,un)}catch(kn){console.error("Error processing connection:",kn)}}else console.log("This is the error in the source")}for(const De of Te){const pt=yield(0,S.GetTheConcept)(De);ht.push({id:De,data:ge[De],created_on:pt.entryTimeStamp})}return S.Logger.logUpdate(Ye),ht})}(me,pe,V,Z,H)})}},1412:(K,E,g)=>{function S(N=[],n=[]){}g.d(E,{e:()=>S})},1534:(K,E,g)=>{let S=g(7793),N=g(1752);class n extends S{get selectors(){return N.comma(this.selector)}set selectors(_){let I=this.selector?this.selector.match(/,\s*/):null,r=I?I[0]:","+this.raw("between","beforeOpen");this.selector=_.join(r)}constructor(_){super(_),this.type="rule",this.nodes||(this.nodes=[])}}K.exports=n,n.default=n,S.registerRule(n)},1557:(K,E)=>{E.__esModule=!0,E.default=function(g){for(var S=arguments.length,N=new Array(S>1?S-1:0),n=1;n<S;n++)N[n-1]=arguments[n];for(;N.length>0;){var h=N.shift();g[h]||(g[h]={}),g=g[h]}},K.exports=E.default},1581:(K,E)=>{E.__esModule=!0,E.UNIVERSAL=E.TAG=E.STRING=E.SELECTOR=E.ROOT=E.PSEUDO=E.NESTING=E.ID=E.COMMENT=E.COMBINATOR=E.CLASS=E.ATTRIBUTE=void 0,E.TAG="tag",E.STRING="string",E.SELECTOR="selector",E.ROOT="root",E.PSEUDO="pseudo",E.NESTING="nesting",E.ID="id",E.COMMENT="comment",E.COMBINATOR="combinator",E.CLASS="class",E.ATTRIBUTE="attribute",E.UNIVERSAL="universal"},1596:(K,E,g)=>{g.d(E,{g:()=>h});var S=g(5205),N=g(3278),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};function h(_,I){return n(this,void 0,void 0,function*(){if(typeof self<"u"&&typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)throw new Error("Cannot switch server from service worker");try{!function(){const r=S.BaseUrl.NODE_CACHE_URL;let e=S.BaseUrl.BASE_APPLICATION+"_cacheServers";if(r===S.BaseUrl.BASE_URL)throw new Error("Base Server Down");let o=sessionStorage.getItem(e);o=JSON.parse(o);const l=o.indexOf(r);S.BaseUrl.isNearestCache=!1,o.includes(r)&&-1!==l&&o.splice(l,1),sessionStorage.setItem(e,JSON.stringify(o)),S.BaseUrl.NODE_CACHE_URL=o.length?o[0]:S.BaseUrl.BASE_URL,console.log("before the payload",N.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&(0,S.sendMessage)("SESSION_DATA",{type:"SESSION_DATA",data:S.BaseUrl.NODE_CACHE_URL,session:N.b.sessionId})}();try{return yield fetch(`${S.BaseUrl.NODE_CACHE_URL}${I}`,_)}catch{return yield h(_,I)}}catch(r){throw r}})}},1666:(K,E,g)=>{g.d(E,{q:()=>h});var S=g(2155),N=g(442),n=g(1863);function h(_,I,r,e){var l=new S.N(0,_,r,I,e,1,4);if(_==r)return l.ofTheConceptId=0,l.toTheConceptId=1,l;try{l.isTemp=!0,l.id=Math.floor(1e8*Math.random()),N.Y.AddConnection(l)}catch(f){(0,n.Mb)(f)}return l}},1669:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(3295))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.UNIVERSAL,f.value="*",f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,K.exports=E.default},1704:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.COMBINATOR,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,K.exports=E.default},1735:(K,E,g)=>{g.d(E,{J:()=>_});var S,N=g(5205),n=g(3278),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};class _{static incrementConcept(r){try{r&&(this.conceptsData[r]=(this.conceptsData[r]||0)+1)}catch{console.error("Failed on increment concept")}}static incrementConnection(r){try{r&&(this.connectionsData[r]=(this.connectionsData[r]||0)+1)}catch{console.error("Failed on increment connection")}}static getTopConcepts(r){return Object.entries(this.conceptsData).map(([e,o])=>[parseInt(e),o]).sort((e,o)=>o[1]-e[1]).slice(0,r)}static getTopConnections(r){return Object.entries(this.connectionsData).map(([e,o])=>[parseInt(e),o]).sort((e,o)=>o[1]-e[1]).slice(0,r)}static saveDataToLocalStorage(){localStorage?.setItem(this.accessData,JSON.stringify({concepts:this.conceptsData,connections:this.connectionsData}))}static loadDataFromLocalStorage(){const r=null==localStorage?void 0:localStorage.getItem(this.accessData);if(r){const e=JSON.parse(r);this.conceptsData=e.concepts||{},this.connectionsData=e.connections||{}}}static sendToServer(){return h(this,void 0,void 0,function*(){try{yield this.syncToServer()}catch{console.error("Failed to process Access Tracker Sync with Server")}})}static syncToServer(){return h(this,void 0,void 0,function*(){try{if(!Object.keys(this.conceptsData).length&&!Object.keys(this.connectionsData).length)return;const r=n.b.BearerAccessToken;if(!r)return;const e=this.conceptsData&&Object.keys(this.conceptsData).length>0?this.conceptsData:{},o=this.connectionsData&&Object.keys(this.connectionsData).length>0?this.connectionsData:{},l=yield fetch(N.BaseUrl.PostPrefetchConceptConnections(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({concepts:e,connections:o})});if(!l.ok)throw new Error("Failed to sync data to the server.");yield l.json(),this.conceptsData={},this.connectionsData={},this.setNextSyncTime()}catch(r){console.error("Sync error:",r)}})}static setNextSyncTime(){this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS}static startAutoSync(){setInterval(()=>{const r=Date.now();this.nextSyncTime&&r>=this.nextSyncTime&&this.syncNow().catch(console.error)},6e4)}static syncNow(){return h(this,void 0,void 0,function*(){try{this.activateStatus?yield this.syncToServer():console.warn("Access Tracker inactive.")}catch{console.error("Error on sync access tracker")}})}static GetSuggestedConcepts(r){return h(this,void 0,void 0,function*(){try{const e=n.b.BearerAccessToken,o=new URL(N.BaseUrl.GetSuggestedConcepts());void 0!==r&&o.searchParams.append("top",r.toString());const l=yield fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!l.ok){const v=yield l.text();throw new Error(`Failed to load concepts: ${l.status} ${l.statusText}. Details: ${v}`)}const f=(yield l.json())||[];return yield this.addConceptToBinaryTree(f.data),f}catch(e){throw e instanceof Error?(console.error("Error fetching suggested concepts:",e.message),new Error("Unable to fetch suggested concepts. Please try again later.")):(console.error("An unexpected error occurred:",e),new Error("An unexpected error occurred while fetching suggested concepts."))}})}static GetSuggestedConnections(r){return h(this,void 0,void 0,function*(){try{const e=n.b.BearerAccessToken,o=new URL(N.BaseUrl.GetSuggestedConnections());void 0!==r&&o.searchParams.append("top",r.toString());const l=yield fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!l.ok){const v=yield l.text();throw new Error(`Failed to load connections: ${l.status} ${l.statusText}. Details: ${v}`)}const f=(yield l.json())||[];return yield this.addConnectionToBinaryTree(f.data),f}catch(e){throw e instanceof Error?(console.error("Error fetching suggested Connections:",e.message),new Error("Unable to fetch suggested connections. Please try again later.")):(console.error("An unexpected error occurred:",e),new Error("An unexpected error occurred while fetching suggested Connections."))}})}static addConceptToBinaryTree(r){return h(this,void 0,void 0,function*(){try{r.forEach(e=>{N.ConceptsData.AddConcept(e)})}catch{console.error("Error on adding Concepts Data into tree")}})}static addConnectionToBinaryTree(r){return h(this,void 0,void 0,function*(){try{r.forEach(e=>{N.ConnectionData.AddConnection(e)})}catch{console.error("Error on adding Connections Data into tree")}})}}S=_,_.conceptsData={},_.connectionsData={},_.SYNC_INTERVAL_MS=12e4,_.nextSyncTime=Date.now(),_.activateStatus=!1,_.accessData="Access Data",S.startAutoSync()},1752:K=>{let E={comma:g=>E.split(g,[","],!0),space:g=>E.split(g,[" ","\n","\t"]),split(g,S,N){let n=[],h="",_=!1,I=0,r=!1,e="",o=!1;for(let l of g)o?o=!1:"\\"===l?o=!0:r?l===e&&(r=!1):'"'===l||"'"===l?(r=!0,e=l):"("===l?I+=1:")"===l?I>0&&(I-=1):0===I&&S.includes(l)&&(_=!0),_?(""!==h&&n.push(h.trim()),h="",_=!1):h+=l;return(N||""!==h)&&n.push(h.trim()),n}};K.exports=E,E.default=E},1863:(K,E,g)=>{g.d(E,{ER:()=>h,Mb:()=>_,ey:()=>I,ry:()=>n});var S=g(5205),N=g(7273);function n(r){if(S.Logger.log("ERROR",r.statusText,{code:r.status,data:r.statusText}),401==r.status||406==r.status){let e=new N.z(r.statusText,!1,r.status,"");throw e.setUrl(r.url),e}if(500==r.status){let e=new N.z(r.statusText,!1,r.status,"");throw e.setUrl(r.url),e}}function h(r,e={}){if(S.Logger.log("ERROR",e.statusText,{code:r.status,data:r.status}),401==r.status||406==r.status){let o=new N.z(e.statusText,!1,r.status,"");throw o.setUrl(r.url),o}if(500==r.status){let o=new N.z(e.statusText,!1,r.status,"");throw o.setUrl(r.url),o}}function _(r,e=""){if(S.Logger.log("ERROR",r.message,{code:r.status,data:r.stack}),r.status){let o=new N.z(r.message,!1,r.status,r.stack);throw o.setUrl(e),o}{let o=new N.z(r.message,!1,500,r.stack);throw o.setUrl(e),o}}function I(r,e,o){var l;try{if(!r)return void console.error(`Error in ${e}: logData is undefined`);const f=Date.now();r.startTime=null!==(l=r.startTime)&&void 0!==l?l:f,r.responseTime=f-r.startTime+" ms",r.level="ERROR",r.errorMessage=o?.message||"Unknown error occurred",console.error(`Error in function ${e}:`,o)}catch(f){console.error("Failed to handle package function error:",f)}}},1866:()=>{},2013:(K,E,g)=>{g.d(E,{A:()=>I,w:()=>r});var S=g(8146),N=g(5205),n=g(3026),h=g(1863),_=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function I(e){var o=arguments;return _(this,void 0,void 0,function*(){const l=N.Logger.logfunction("GetConceptByCharacter",o)||{};if(N.serviceWorker){l.serviceWorker=!0;try{const T=yield(0,N.sendMessage)("GetConceptByCharacter",{characterValue:e});return N.Logger.logUpdate(l),T.data}catch(T){console.error("GetConceptByCharacter sw error: ",T),(0,h.ey)(l,"GetConceptByCharacter",T),(0,N.handleServiceWorkerException)(T)}}let f=yield n.I.GetConceptByCharacter(e);return null!=f&&0!=f?.id||!`${e}`||(yield(0,S.Y)(e),f=yield n.I.GetConceptByCharacterAndTypeLocal(e,51),0==f.id&&(f=yield n.I.GetConceptByCharacter(e))),N.Logger.logUpdate(l),f})}function r(e){var o=arguments;return _(this,void 0,void 0,function*(){const l=N.Logger.logfunction("GetConceptByCharacterUpdated",o)||{};if(N.serviceWorker){l.serviceWorker=!0;try{const T=yield(0,N.sendMessage)("GetConceptByCharacterUpdated",{characterValue:e});return N.Logger.logUpdate(l),T.data}catch(T){console.error("GetConceptByCharacterUpdated error sw: ",T),(0,h.ey)(l,"GetConceptByCharacterUpdated",T),(0,N.handleServiceWorkerException)(T)}}let f=yield n.I.GetConceptByCharacter(e);return null!=f&&0!=f?.id||!`${e}`||(yield(0,S.Y)(e),f=yield n.I.GetConceptByCharacter(e)),N.Logger.logUpdate(l),f})}},2110:(K,E,g)=>{const{AtRule:S,Rule:N}=g(2895);let n=g(7149);function h(s,a){let t;try{n(c=>{t=c}).processSync(s)}catch(c){throw s.includes(":")?a?a.error("Missed semicolon"):c:a?a.error(c.message):c}return t.at(0)}function _(s,a){let t=!1;return s.each(c=>{if("nesting"===c.type){let C=a.clone({});c.replaceWith("&"!==c.value?h(c.value.replace("&",C.toString())):C),t=!0}else"nodes"in c&&c.nodes&&_(c,a)&&(t=!0)}),t}function I(s,a){let t=[];for(let c of s.selectors){let C=h(c,s);for(let b of a.selectors){if(!b)continue;let m=h(b,a);_(m,C)||(m.prepend(n.combinator({value:" "})),m.prepend(C.clone({}))),t.push(m.toString())}}return t}function r(s,a){if("comment"!==s.prev()?.type)return a.after(s),s;let t=s.prev();return s.parent.toString().match(/[*]\/ *\n.*{/)?a.after(s).after(t):a.after(s),s}function e(s,a,t,c=!0){return a.length?(t=function(C,b,m){let L=new N({nodes:[],selector:C});return L.append(b),m.after(L),L}(s,a,t),c&&(a=[]),[t,a]):[t,a]}function o(s,a=""){let t=s.concat(a),c={};for(let C of t)c[C.replace(/^@/,"")]=!0;return c}function l(s){let a=s[v];if(a){let t,c,C,b,m=s.nodes,L=-1,A=function(O){let B=[],G=O.parent;for(;G&&G instanceof S;)B.push(G),G=G.parent;return B}(s);if(A.forEach((O,B)=>{if(a(O.name))t=O,L=B,C=b;else{let G=b;b=O.clone({nodes:[]}),G&&b.append(G),c=c||b}}),t?C?(c.append(m),t.after(C)):t.after(m):s.after(m),s.next()&&t){let O;A.slice(0,L+1).forEach((B,G,R)=>{let M=O;O=B.clone({nodes:[]}),M&&O.append(M);let W=[],V=(R[G-1]||s).next();for(;V;)W.push(V),V=V.next();O.append(W)}),O&&(C||m[m.length-1]).after(O)}}else s.after(s.nodes);s.remove()}const f=Symbol("rootRuleMergeSel"),v=Symbol("rootRuleEscapes"),T=Symbol("hasRootRule");K.exports=(s={})=>{let a=o(["media","supports","layer","container","starting-style"],s.bubble),t=(m=a,function L(A,O,B,G=B){let R=[];if(O.each(M=>{"rule"===M.type&&B?G&&(M.selectors=I(A,M)):"atrule"===M.type&&M.nodes?m[M.name]?L(A,M,G):!1!==O[f]&&R.push(M):R.push(M)}),B&&R.length){let M=A.clone({nodes:[]});for(let W of R)M.append(W);O.prepend(M)}}),c=o(["document","font-face","keyframes","-webkit-keyframes","-moz-keyframes"],s.unwrap),C=(s.rootRuleName||"at-root").replace(/^@/,""),b=s.preserveEmpty;var m;return{Once(m){m.walkAtRules(C,L=>{(function(A){let{params:O}=A,{escapes:B,selector:G,type:R}=function(M){let W=(M=M.trim()).match(/^\((.*)\)$/);if(!W)return{selector:M,type:"basic"};let V=W[1].match(/^(with(?:out)?):(.+)$/);if(V){let Z="with"===V[1],te=Object.fromEntries(V[2].trim().split(/\s+/).map(me=>[me,!0]));if(Z&&te.all)return{type:"noop"};let ne=me=>!!te[me];return te.all?ne=()=>!0:Z&&(ne=me=>"all"!==me&&!te[me]),{escapes:ne,type:"withrules"}}return{type:"unknown"}}(O);if("unknown"===R)throw A.error(`Unknown @${A.name} parameter ${JSON.stringify(O)}`);if("basic"===R&&G){let M=new N({nodes:A.nodes,selector:G});A.removeAll(),A.append(M)}A[v]=B,A[f]=B?!B("all"):"noop"===R})(L),m[T]=!0})},postcssPlugin:"postcss-nested",RootExit(m){m[T]&&(m.walkAtRules(C,l),m[T]=!1)},Rule(m){let L=!1,A=m,O=!1,B=[];m.each(G=>{switch(G.type){case"atrule":[A,B]=e(m.selector,B,A),G.name===C?(L=!0,t(m,G,!0,G[f]),A=r(G,A)):a[G.name]?(O=!0,L=!0,t(m,G,!0),A=r(G,A)):c[G.name]?(O=!0,L=!0,t(m,G,!1),A=r(G,A)):O&&B.push(G);break;case"decl":O&&B.push(G);break;case"rule":[A,B]=e(m.selector,B,A),O=!0,L=!0,G.selectors=I(m,G),A=r(G,A)}}),e(m.selector,B,A,!1),L&&!0!==b&&(m.raws.semicolon=!0,0===m.nodes.length&&m.remove())}}},K.exports.postcss=!0},2155:(K,E,g)=>{g.d(E,{N:()=>n});var S=g(7282),N=g(9581);class n{constructor(_=0,I,r,e,o,l,f){this.count=0,this.isTemp=!1,this.toUpdate=!1,this.applicationId=N.B.getRandomizer(),this.type=(0,S.o)(),this.ofConcept=(0,S.o)(),this.toConcept=(0,S.o)(),this.id=_,this.ofTheConceptId=I,this.toTheConceptId=r,this.userId=e,this.typeId=o,this.ghostId=_,this.orderId=l,this.accessId=f,this.entryTimeStamp=(0,S.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date,this.typeCharacter=""}}},2202:(K,E,g)=>{g.d(E,{W:()=>I});var S=g(6963),N=g(6731),n=g(205),h=g(5205),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};let I=(()=>{class r{static addNodeToTree(o){if(null==this.root)return this.root=o,this.root;this.root=this.root.addNode(o,this.root,this.root.height)}static waitForDataToLoad(){return _(this,void 0,void 0,function*(){return new Promise((o,l)=>{this.checkFlag(o),setTimeout(()=>{l("not")},25e3)})})}static checkFlag(o){if(n.B.isDataLoaded)return o("done");setTimeout(r.checkFlag,1e3,o)}static addConceptToTree(o){let l=new N.b(o.id,o,null,null),f=new N.b(o.characterValue,o,null,null);S.f.addNodeToTree(f),this.addNodeToTree(l)}static getNodeFromTree(o){return _(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(o,this.root):null})}static removeNodeFromTree(o){return _(this,void 0,void 0,function*(){if(this.root){let l=new Event(`${o}`);console.log("this is the fired event after delete",l),(0,h.dispatchIdEvent)(o),this.root=this.root.removeNode(this.root,o)}})}static getConceptListFromIds(o,l,f){return _(this,void 0,void 0,function*(){this.root&&this.root.checkIfIdsInNode(this.root,o,l,f)})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}return r.root=null,r})()},2212:(K,E,g)=>{g.d(E,{Ay:()=>r,N:()=>e});var S=g(1167),N=g(2615),n=g(5976),h=g(442),_=g(5205),I=function(o,l,f,v){return new(f||(f=Promise))(function(T,s){function a(C){try{c(v.next(C))}catch(b){s(b)}}function t(C){try{c(v.throw(C))}catch(b){s(b)}}function c(C){var b;C.done?T(C.value):(b=C.value,b instanceof f?b:new f(function(m){m(b)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function r(o,l,f,v,T,s,a){return I(this,void 0,void 0,function*(){let t=yield n.B.getId(),b=new N.j(t,l,v,f,T,o,s,!0,new Date,new Date,a);return b.isTemp=!1,h.Y.AddConcept(b),b})}function e(o,l,f,v,T,s,a){return I(this,void 0,void 0,function*(){let t=yield n.B.getId(),b=new N.j(t,l,v,f,T,o,s,!1,new Date,new Date,a);return _.ConceptsData.AddConcept(b),(0,S.Y)([b]),b})}},2289:(K,E,g)=>{g.d(E,{$S:()=>e,L0:()=>o,WC:()=>l});var S=g(8675),N=g(6058),n=g(5205),h=g(1863);g(3518);var _=g(843),I=g(4818),r=function(f,v,T,s){return new(T||(T=Promise))(function(a,t){function c(m){try{b(s.next(m))}catch(L){t(L)}}function C(m){try{b(s.throw(m))}catch(L){t(L)}}function b(m){var L;m.done?a(m.value):(L=m.value,L instanceof T?L:new T(function(A){A(L)})).then(c,C)}b((s=s.apply(f,v||[])).next())})};function e(f,v){var T=arguments;return r(this,void 0,void 0,function*(){const s=n.Logger.logfunction("DeleteConnectionByType",T)||{};if(n.serviceWorker){s.serviceWorker=!0;try{const m=yield(0,n.sendMessage)("DeleteConnectionByType",{id:f,linker:v});return n.Logger.logUpdate(s),m.data}catch(m){console.error("DeleteConnectionByType sw error: ",m),(0,h.ey)(s,"DeleteConnectionByType",m),(0,n.handleServiceWorkerException)(m)}}let a=yield(0,S.l)(f);for(let m=0;m<a.length;m++)n.ConnectionData.AddConnection(a[m]);let t=yield n.ConnectionData.GetConnectionsOfConcept(f),c=yield(0,n.GetConceptByCharacter)(v),C=[];for(let m=0;m<t.length;m++)t[m].typeId==c.id&&C.push(t[m]);let b=!1;for(let m=0;m<C.length;m++)b=yield(0,n.DeleteConnectionById)(C[m].id);return n.Logger.logUpdate(s),b})}function o(f,v){var T=arguments;return r(this,void 0,void 0,function*(){const s=n.Logger.logfunction("DeleteConnectionByTypeBulk",T)||{};if(n.serviceWorker){s.serviceWorker=!0;try{const b=yield(0,n.sendMessage)("DeleteConnectionByTypeBulk",{id:f,linkers:v});return n.Logger.logUpdate(s),b.data}catch(b){console.error("DeleteConnectionByTypeBulk sw error: ",b),(0,h.ey)(s,"DeleteConnectionByTypeBulk",b),(0,n.handleServiceWorkerException)(b)}}let a=yield(0,S.l)(f);for(let b=0;b<a.length;b++)n.ConnectionData.AddConnection(a[b]);let t=yield n.ConnectionData.GetConnectionsOfConcept(f),c=[];c=yield(0,_.Hi)(v);let C=[];console.log("this is all the connections for deleting taken",t,c,v);for(let b=0;b<t.length;b++)for(let m=0;m<c.length;m++)t[b].typeId==c[m].id&&C.push(t[b].id);return console.log("these are the to delete",C),n.Logger.logUpdate(s),yield(0,I.E)(C)})}function l(f,v){return r(this,arguments,void 0,function*(T,s,a=!1){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetAllTheConnectionsByTypeAndOfTheConcept",{id:T,linker:s,reverse:a})).data}catch(c){console.error("GetAllTheConnectionsByTypeAndOfTheConcept sw error: ",c),(0,n.handleServiceWorkerException)(c)}let t=[];if(a){let c=yield(0,N.W)(T),C=yield(0,n.MakeTheTypeConceptApi)(s,999);for(let b=0;b<c.length;b++)c[b].typeId==C.id&&t.push(c[b])}else{let c=yield(0,S.l)(T);for(let m=0;m<c.length;m++)n.ConnectionData.AddConnection(c[m]);let C=yield n.ConnectionData.GetConnectionsOfConcept(T),b=yield(0,n.GetConceptByCharacter)(s);for(let m=0;m<C.length;m++)C[m].typeId==b.id&&t.push(C[m])}return t})}},2299:(K,E,g)=>{g.d(E,{B:()=>S});class S{constructor(n){this.id=1,this.isOnlineSync=!1,this.isOnlineSync=n}}},2515:(K,E,g)=>{g.d(E,{x:()=>S});class S{constructor(n,h,_,I){this.variants=[],this.height=1,this.key=n,this.value=h,this.leftNode=_,this.rightNode=I,this.currentNode=null}addCurrentNode(n,h){return null==h?h=n:(n.value.typeId!=h.value.typeId&&(h.currentNode=this.addCurrentNode(n,h.currentNode)),h)}addCurrentNodeType(n,h){if(null==h)return n;var _=!1;for(let I=0;I<h.variants.length;I++)h.variants[I].value.id==n.value.id&&(_=!0);return _||h.variants.push(n),h}addNode(n,h,_){if(null==h)return n;var r=h.rightNode;if(h.key>n.key)h.leftNode=this.addNode(n,h.leftNode,_);else{if(!(h.key<n.key))return h;h.rightNode=this.addNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}return h}addCharacterNode(n,h,_){if(""!=n.value.characterValue){if(null==h)return n;var r=h.rightNode;if(h.key>n.key)h.leftNode=this.addCharacterNode(n,h.leftNode,_);else{if(!(h.key<n.key))return h.key==n.key&&""!=h.key&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),h;h.rightNode=this.addCharacterNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}addTypeNode(n,h,_){if(0!=n.value.typeId){if(null==h)return n;var r=h.rightNode;if(h.key>n.key)h.leftNode=this.addTypeNode(n,h.leftNode,_);else{if(!(h.key<n.key))return h.key==n.key&&0!=h.key&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),h;h.rightNode=this.addTypeNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}rightRotate(n){if(n){let h=n.leftNode;if(h)return n.leftNode=h.rightNode,h.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,h}return n}leftRotate(n){if(n){let h=n.rightNode;if(h){let _=h.leftNode;return h.leftNode=n,n.rightNode=_,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(n.rightNode))+1,h}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return null==n?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}getFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getFromNode(n,h.leftNode):n>h.key?this.getFromNode(n,h.rightNode):h)}updateNodeSyncStatus(n,h,_){if(_){if(n==_.key){let I=_.value;return I.isSynced=h,_.value=I,_}return n<_.key?this.updateNodeSyncStatus(n,h,_.leftNode):n>_.key?this.updateNodeSyncStatus(n,h,_.rightNode):_}return _}getCharacterFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getCharacterFromNode(n,h.leftNode):n>h.key?this.getCharacterFromNode(n,h.rightNode):h)}getFromNodeWithCharacterAndType(n,h,_){if(n=`${n}`,_){if(n==_.key){if(n==_.value.characterValue&&h==_.value.typeId)return _;for(let I=0;I<_.variants.length;I++)if(_.variants[I].value.typeId==h)return _.variants[I]}else{if(n<_.key)return this.getFromNodeWithCharacterAndType(n,h,_.leftNode);if(n>_.key)return this.getFromNodeWithCharacterAndType(n,h,_.rightNode)}return null}return _}getFromNodeWithCharacterAndCategory(n,h,_){if(n=`${n}`,_){if(n==_.key){if(n==_.value.characterValue&&h==_.value.categoryId)return _;for(let I=0;I<_.variants.length;I++)if(_.variants[I].value.categoryId==h)return _.variants[I]}else{if(n<_.key)return this.getFromNodeWithCharacterAndCategory(n,h,_.leftNode);if(n>_.key)return this.getFromNodeWithCharacterAndCategory(n,h,_.rightNode)}return null}return _}removeNode(n,h){if(null==n)return n;if(n.key>h)return n.leftNode=this.removeNode(n.leftNode,h),n;if(n.key<h)return n.rightNode=this.removeNode(n.rightNode,h),n;if(null==n.leftNode){let I=n.rightNode;return n=null,I}if(null==n.rightNode){let I=n.leftNode;return n=null,I}var _=this.inOrderSuccessor(n.rightNode);return n.value=_.value,n.key=_.key,n.variants=_.variants,n.currentNode=_.currentNode,n.rightNode=this.removeNode(n.rightNode,_.key),n}removeNodeWithVariants(n,h,_){if(null==n)return n;if(n.key>h)return n.leftNode=this.removeNodeWithVariants(n.leftNode,h,_),n;if(n.key<h)return n.rightNode=this.removeNodeWithVariants(n.rightNode,h,_),n;if(n.variants.length>0)if(n.value.id==_){var I=n.variants[0];if(I)return n.value=I.value,n.key=I.key,n.currentNode=I.currentNode,n.variants.splice(0,1),n}else for(let e=0;e<n.variants.length;e++)if(_==n.variants[e].value.id)return n.variants.splice(e,1),n;if(null==n.leftNode){let e=n.rightNode;return n=null,e}if(null==n.rightNode){let e=n.leftNode;return n=null,e}var r=this.inOrderSuccessor(n.rightNode);return n.value=r.value,n.key=r.key,n.variants=r.variants,n.currentNode=r.currentNode,n.rightNode=this.removeNodeWithVariants(n.rightNode,r.key,_),n}countNodeBelow(n){return null==n?0:1+this.countNodeBelow(n.leftNode)+this.countNodeBelow(n.rightNode)}inOrderSuccessor(n){for(;null!=n.leftNode;)n=n.leftNode;return n}}},2615:(K,E,g)=>{g.d(E,{j:()=>N});var S=g(5205);class N{constructor(h,_,I,r,e,o,l,f=!1,v,T,s){this.count=0,this.typeCharacter="",this.referent=null,this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=S.BaseUrl.getRandomizer(),this.x=0,this.y=0,this.id=h,this.userId=_,this.typeId=I,this.ghostId=h,this.categoryId=r,this.referentId=e,this.characterValue=`${o}`,this.accessId=l,this.typeCharacter=s,this.type=null,this.isNew=f,this.entryTimeStamp=v,this.updatedTimeStamp=T}getType(){console.log(this.typeId)}}},2648:(K,E,g)=>{E.__esModule=!0,E.FIELDS=void 0,E.default=function(f){var v,T,s,a,t,c,C,b,m,L,A,O,B=[],G=f.css.valueOf(),R=G.length,M=-1,W=1,V=0,Z=0;function te(ne,me){if(!f.safe)throw f.error("Unclosed "+ne,W,V-M,V);b=(G+=me).length-1}for(;V<R;){switch((v=G.charCodeAt(V))===n.newline&&(M=V,W+=1),v){case n.space:case n.tab:case n.newline:case n.cr:case n.feed:b=V;do{(v=G.charCodeAt(b+=1))===n.newline&&(M=b,W+=1)}while(v===n.space||v===n.newline||v===n.tab||v===n.cr||v===n.feed);O=n.space,s=W,T=b-M-1,Z=b;break;case n.plus:case n.greaterThan:case n.tilde:case n.pipe:b=V;do{v=G.charCodeAt(b+=1)}while(v===n.plus||v===n.greaterThan||v===n.tilde||v===n.pipe);O=n.combinator,s=W,T=V-M,Z=b;break;case n.asterisk:case n.ampersand:case n.bang:case n.comma:case n.equals:case n.dollar:case n.caret:case n.openSquare:case n.closeSquare:case n.colon:case n.semicolon:case n.openParenthesis:case n.closeParenthesis:O=v,s=W,T=V-M,Z=(b=V)+1;break;case n.singleQuote:case n.doubleQuote:A=v===n.singleQuote?"'":'"',b=V;do{for(a=!1,-1===(b=G.indexOf(A,b+1))&&te("quote",A),t=b;G.charCodeAt(t-1)===n.backslash;)t-=1,a=!a}while(a);O=n.str,s=W,T=V-M,Z=b+1;break;default:v===n.slash&&G.charCodeAt(V+1)===n.asterisk?(0===(b=G.indexOf("*/",V+2)+1)&&te("comment","*/"),(c=(C=G.slice(V,b+1).split("\n")).length-1)>0?(m=W+c,L=b-C[c].length):(m=W,L=M),O=n.comment,W=m,s=m,T=b-L):v===n.slash?(O=v,s=W,T=V-M,Z=(b=V)+1):(b=o(G,V),O=n.word,s=W,T=b-M),Z=b+1}B.push([O,W,V-M,s,T,V,Z]),L&&(M=L,L=null),V=Z}return B};var S,N,n=function(f,v){if(f&&f.__esModule)return f;if(null===f||"object"!=typeof f&&"function"!=typeof f)return{default:f};var T=h(void 0);if(T&&T.has(f))return T.get(f);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in f)if("default"!==t&&Object.prototype.hasOwnProperty.call(f,t)){var c=a?Object.getOwnPropertyDescriptor(f,t):null;c&&(c.get||c.set)?Object.defineProperty(s,t,c):s[t]=f[t]}return s.default=f,T&&T.set(f,s),s}(g(71));function h(f){if("function"!=typeof WeakMap)return null;var v=new WeakMap,T=new WeakMap;return(h=function(s){return s?T:v})(f)}for(var _=((S={})[n.tab]=!0,S[n.newline]=!0,S[n.cr]=!0,S[n.feed]=!0,S),I=((N={})[n.space]=!0,N[n.tab]=!0,N[n.newline]=!0,N[n.cr]=!0,N[n.feed]=!0,N[n.ampersand]=!0,N[n.asterisk]=!0,N[n.bang]=!0,N[n.comma]=!0,N[n.colon]=!0,N[n.semicolon]=!0,N[n.openParenthesis]=!0,N[n.closeParenthesis]=!0,N[n.openSquare]=!0,N[n.closeSquare]=!0,N[n.singleQuote]=!0,N[n.doubleQuote]=!0,N[n.plus]=!0,N[n.pipe]=!0,N[n.tilde]=!0,N[n.greaterThan]=!0,N[n.equals]=!0,N[n.dollar]=!0,N[n.caret]=!0,N[n.slash]=!0,N),r={},e=0;e<22;e++)r["0123456789abcdefABCDEF".charCodeAt(e)]=!0;function o(f,v){var T,s=v;do{if(T=f.charCodeAt(s),I[T])return s-1;T===n.backslash?s=l(f,s)+1:s++}while(s<f.length);return s-1}function l(f,v){var T=v,s=f.charCodeAt(T+1);if(!_[s])if(r[s]){var a=0;do{T++,a++,s=f.charCodeAt(T+1)}while(r[s]&&a<6);a<6&&s===n.space&&T++}else T++;return T}E.FIELDS={TYPE:0,START_LINE:1,START_COL:2,END_LINE:3,END_COL:4,START_POS:5,END_POS:6}},2739:()=>{},2803:(K,E,g)=>{g.d(E,{x:()=>I});var S=g(8286),N=g(9581),n=g(1863),h=g(5205),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};function I(r,e,o){var l=arguments;return _(this,void 0,void 0,function*(){const f=h.Logger.logfunction("GetCompositionConnectionsBetweenTwoConcepts",l)||{};var v=[];try{if(h.serviceWorker){f.serviceWorker=!0;try{const t=yield(0,h.sendMessage)("GetCompositionConnectionsBetweenTwoConcepts",{ofConceptId:r,toConcept:e,mainKey:o});return h.Logger.logUpdate(f),t.data}catch(t){console.error("GetCompositionConnectionsBetweenTwoConcepts sw error: ",t),(0,n.ey)(f,"GetCompositionConnectionsBetweenTwoConcepts",t),(0,h.handleServiceWorkerException)(t)}}var T=new FormData;T.append("ofConceptId",r.toString()),T.append("mainKey",o.toString()),T.append("toConceptId",e.toString());const a=yield fetch(N.B.GetCompositionConnectionBetweenTwoConceptsUrl(),{method:"POST",body:T,redirect:"follow"});if(a.ok){const t=yield a.json();for(var s=0;s<t.length;s++)S.d.AddConnection(t[s]),v.push(t[s]);h.Logger.logUpdate(f)}else console.log("Get composition connection between two concepts",a.status),(0,n.ry)(a)}catch(a){a instanceof Error?console.log("Get composition connection between two concepts error message: ",a.message):console.log("Get composition connection between two concepts unexpected error: ",a),(0,n.Mb)(a,N.B.GetCompositionConnectionBetweenTwoConceptsUrl()),(0,n.ey)(f,"GetCompositionConnectionsBetweenTwoConcepts",a)}return v})}},2832:(K,E,g)=>{g.d(E,{j:()=>I});var S=g(5205),N=g(9581),n=g(1863),h=g(3518),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};function I(r){var e=arguments;return _(this,arguments,void 0,function*(o,l=""){const f=S.Logger.logfunction("SearchLinkMultipleApi",e);let v=performance.now();var T=(0,h.ab)("application/json",l);const s=N.B.SearchLinkMultipleAllApiUrl(),a=JSON.stringify(o);try{const t=yield fetch(s,{method:"POST",headers:T,body:a});if(t.ok){let c=yield t.json();return S.Logger.logUpdate(f),c}return(0,n.ry)(t),console.log("This is the searching multiple error",t.status),S.Logger.logError(v,"unknown","search","unknown",void 0,t.status,t,"SearchLinkMultipleApi",[o,l],"unknown",void 0),[]}catch(t){console.log("This is the searching multiple error",t),S.Logger.logError(v,"unknown","search","unknown",void 0,500,t,"SearchLinkMultipleApi",[o,l],"unknown",void 0),(0,n.Mb)(t,s),(0,n.ey)(f,"SearchLinkMultipleApi",t)}})}},2895:(K,E,g)=>{let S=g(396),N=g(9371),n=g(7793),h=g(3614),_=g(5238),I=g(145),r=g(3438),e=g(1106),o=g(6966),l=g(1752),f=g(3152),v=g(9577),T=g(6846),s=g(3717),a=g(5644),t=g(1534),c=g(3303),C=g(38);function b(...m){return 1===m.length&&Array.isArray(m[0])&&(m=m[0]),new T(m)}b.plugin=function(m,L){let A,O=!1;function B(...G){console&&console.warn&&!O&&(O=!0,console.warn(m+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(m+": \u91cc\u9762 postcss.plugin \u88ab\u5f03\u7528. \u8fc1\u79fb\u6307\u5357:\nhttps://www.w3ctech.com/topic/2226"));let R=L(...G);return R.postcssPlugin=m,R.postcssVersion=(new T).version,R}return Object.defineProperty(B,"postcss",{get:()=>(A||(A=B()),A)}),B.process=function(G,R,M){return b([B(M)]).process(G,R)},B},b.stringify=c,b.parse=v,b.fromJSON=r,b.list=l,b.comment=m=>new N(m),b.atRule=m=>new S(m),b.decl=m=>new _(m),b.rule=m=>new t(m),b.root=m=>new a(m),b.document=m=>new I(m),b.CssSyntaxError=h,b.Declaration=_,b.Container=n,b.Processor=T,b.Document=I,b.Comment=N,b.Warning=C,b.AtRule=S,b.Result=s,b.Input=e,b.Rule=t,b.Root=a,b.Node=f,o.registerPostcss(b),K.exports=b,b.default=b},2918:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.NESTING,f.value="&",f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,K.exports=E.default},3026:(K,E,g)=>{g.d(E,{I:()=>v});var S=g(3655),N=g(2202),n=g(6963),h=g(5457),_=g(7282),I=g(5205);class r{constructor(s,a,t,c){this.height=1,this.key=s,this.value=a,this.leftNode=t,this.rightNode=c}addNode(s,a,t){if(null==a)return s;let C=a.rightNode;if(a.key>s.key)a.leftNode=this.addNode(s,a.leftNode,t);else{if(!(a.key<s.key))return a;a.rightNode=this.addNode(s,C,t)}a.height=1+Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode));let b=this.getBalanceFactor(a);if(b>1&&a.leftNode){if(s.key<a.leftNode.key)return this.rightRotate(a);if(s.key>a.leftNode.key)return a.leftNode=this.leftRotate(a.leftNode),this.rightRotate(a)}if(b<-1&&a.rightNode){if(s.key>a.rightNode.key)return this.leftRotate(a);if(s.key<a.rightNode.key)return a.rightNode=this.rightRotate(a.rightNode),this.leftRotate(a)}return a}rightRotate(s){if(s){let a=s.leftNode;if(a)return s.leftNode=a.rightNode,a.rightNode=s,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,a.height=Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode))+1,a}return s}leftRotate(s){if(s){let a=s.rightNode;if(a){let t=a.leftNode;return a.leftNode=s,s.rightNode=t,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,a.height=Math.max(this.getHeight(a.leftNode),this.getHeight(s.rightNode))+1,a}}return s}getHeight(s){return s?s.height:0}getBalanceFactor(s){return null==s?0:this.getHeight(s.leftNode)-this.getHeight(s.rightNode)}getFromNode(s,a){return a&&(s==a.key?a:s<a.key?this.getFromNode(s,a.leftNode):s>a.key?this.getFromNode(s,a.rightNode):a)}removeNode(s,a){if(null==s)return s;if(s.key>a)return s.leftNode=this.removeNode(s.leftNode,a),s;if(s.key<a)return s.rightNode=this.removeNode(s.rightNode,a),s;if(null==s.leftNode){let t=s.rightNode;return s=null,t}if(null==s.rightNode){let t=s.leftNode;return s=null,t}{let t=this.inOrderSuccessor(s.rightNode);return s.value=t.value,s.key=t.key,s.rightNode=this.removeNode(s.rightNode,t.key),s}}countNodeBelow(s){return null==s?0:1+this.countNodeBelow(s.leftNode)+this.countNodeBelow(s.rightNode)}inOrderSuccessor(s){for(;null!=s.leftNode;)s=s.leftNode;return s}}var e=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};let o=(()=>{class T{static addNodeToTree(a){if(null==this.root)return this.root=a,this.root;this.root=this.root.addNode(a,this.root,this.root.height)}static addWidgetToTree(a){let t=new r(a.widgetId,a,null,null);this.addNodeToTree(t)}static getNodeFromTree(a){return e(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(a,this.root):null})}static removeNodeFromTree(a){return e(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,a))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}return T.root=null,T})();class l{constructor(){this.widgetId=0,this.mainId=0,this.conceptIds=[],this.linkers=[],this.reverse=[],this.mainCompositionIds=[],this.countinfo=[]}}var f=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};class v{constructor(){this.name="conceptsArray"}static CheckContains(s){for(var a=!1,t=0;t<this.conceptsArray.length;t++)this.conceptsArray[t].id==s.id&&(a=!0);return a}static AddNpc(s){this.NPC.includes(s)||(this.NPC.length>10&&(this.NPC=[]),this.NPC.push(s))}static GetNpc(s){return!!this.NPC.includes(s)}static AddConceptToStorage(s){s.id>0&&(0,S.kH)("concept",s)}static GetConceptBulkData(s,a,t){return f(this,void 0,void 0,function*(){yield N.W.getConceptListFromIds(s,a,t)})}static AddWidget(s){if(I.serviceWorker)try{(0,I.sendMessage)("ConceptsData__AddWidget",{widgetDetails:s})}catch(a){console.error("Concept Data, Add Widget sw error: ",a),(0,I.handleServiceWorkerException)(a)}s.widgetId>0&&o.addWidgetToTree(s)}static AddConcept(s){if(I.serviceWorker)try{(0,I.sendMessage)("ConceptsData__AddConcept",{concept:s})}catch(a){console.error("Concept Data, Add Concpet sw error: ",a),(0,I.handleServiceWorkerException)(a)}s.id>0&&(N.W.addConceptToTree(s),h.c.addConceptToTree(s))}static AddConceptToMemory(s){s.id>0&&(N.W.addConceptToTree(s),h.c.addConceptToTree(s))}static AddConceptTemporary(s){var a=this.CheckContains(s);this.conceptDictionary[s.id]=s,a&&this.RemoveConcept(s),this.conceptsArray.push(s)}static RemoveConcept(s){for(var a=0;a<this.conceptsArray.length;a++)this.conceptsArray[a].id==s.id&&this.conceptsArray.splice(a,1);(0,S.wh)("concept",s.id)}static GetWidget(s){return f(this,void 0,void 0,function*(){let a=new l;if(I.serviceWorker)try{return(yield(0,I.sendMessage)("ConceptsData__GetWidget",{id:s})).data}catch(c){console.error("Concept Data, Get Widget sw error: ",c),(0,I.handleServiceWorkerException)(c)}let t=yield o.getNodeFromTree(s);return null!=t&&(a=t.value),a})}static RemoveWidget(s){return f(this,void 0,void 0,function*(){if(I.serviceWorker)try{return(yield(0,I.sendMessage)("ConceptsData__RemoveWidget",{id:s})).data}catch(a){console.error("Concept Data, Remove Widget sw error: ",a),(0,I.handleServiceWorkerException)(a)}yield o.removeNodeFromTree(s)})}static GetConcept(s){return f(this,void 0,void 0,function*(){if(I.serviceWorker)try{return(yield(0,I.sendMessage)("ConceptsData__GetConcept",{id:s})).data}catch(C){console.error("Concept Data, Get Concpet sw error: ",C),(0,I.handleServiceWorkerException)(C)}if(0==s||null==s||null==s)return(0,_.o)();var a=(0,_.o)(),t=yield N.W.getNodeFromTree(s);if(t?.value){var c=t.value;c&&(a=c)}return a})}static GetConceptByCharacter(s){return f(this,void 0,void 0,function*(){var a=(0,_.o)(),t=n.f.getNodeFromTree(s);return t&&(a=t.value),a})}static GetConceptByCharacterUpdated(s){return f(this,void 0,void 0,function*(){var a=(0,_.o)(),t=n.f.getNodeFromTree(s);return t&&(a=t.value),a})}static GetConceptByCharacterAndTypeLocal(s,a){return f(this,void 0,void 0,function*(){return(0,_.o)(),yield h.c.getTypeVariantsWithCharacterValueNew(s,a)})}static GetConceptByCharacterAndCategoryLocal(s,a){return f(this,void 0,void 0,function*(){var t=(0,_.o)(),c=yield n.f.getCharacterAndCategoryFromTree(s,a);return c&&(t=c.value),t})}static GetConceptsByTypeId(s){let a=[];for(var t=0;t<this.conceptsArray.length;t++)this.conceptsArray[t].typeId==s&&a.push(this.conceptsArray[t]);return a}static GetConceptsByTypeIdAndUser(s,a){var t=arguments;return f(this,void 0,void 0,function*(){if(I.Logger.logfunction("ConceptsData.GetConceptsByTypeIdAndUser",t),I.serviceWorker)try{return(yield(0,I.sendMessage)("ConceptsData__GetConceptsByTypeIdAndUser",{typeId:s,userId:a})).data}catch(C){console.error("Concept Data, Get Concpet sw error:",C),(0,I.handleServiceWorkerException)(C)}let c=[];return c=yield h.c.getTypeVariantsFromTreeWithUserIdNew(s,a),c})}static GetBinaryCharacterTree(){return n.f.characterRoot}getName(){return this.name}}v.conceptsArray=[],v.NPC=[],v.conceptDictionary=[]},3075:(K,E,g)=>{g.d(E,{Ay:()=>e,EO:()=>o,xd:()=>l});var S=g(205),N=g(9736),n=g(5257),h=g(9003),_=g(5205),I=g(1863),r=function(f,v,T,s){return new(T||(T=Promise))(function(a,t){function c(m){try{b(s.next(m))}catch(L){t(L)}}function C(m){try{b(s.throw(m))}catch(L){t(L)}}function b(m){var L;m.done?a(m.value):(L=m.value,L instanceof T?L:new T(function(A){A(L)})).then(c,C)}b((s=s.apply(f,v||[])).next())})};function e(){return r(this,void 0,void 0,function*(){const f=_.Logger.logfunction("CreateLocalBinaryTreeFromIndexDb");try{let v=[];if(Array.isArray(v))for(let T=0;T<v.length;T++)N.v.AddConceptToMemory(v[T]);S.B.isLocalDataLoaded=!0,S.B.isLocalTypeLoaded=!0,S.B.isLocalCharacterLoaded=!0,_.Logger.logUpdate(f)}catch(v){yield(0,_.DelayFunctionExecution)(2e3,e());let T={message:"Cannot create local binary tree from index db",data:v,ok:!1,status:400};throw(0,I.ey)(f,"CreateLocalBinaryTreeFromIndexDb",v),T}})}function o(){return r(this,void 0,void 0,function*(){var f;const v=_.Logger.logfunction("PopulateTheLocalConceptsToMemory");try{yield null===(f=navigator.locks)||void 0===f?void 0:f.request("dblock",T=>r(this,void 0,void 0,function*(){let s=yield(0,h.S5)("localid");if(Array.isArray(s)&&s[0]){let a=s[0].value;if(a)n.R.AddConceptId(s[0]),yield(0,h.kH)("localid",{id:0,value:a-10});else{a=-Math.floor(1e8*Math.random());let c={id:0,value:a-10};n.R.AddConceptId({id:0,value:a}),yield(0,h.kH)("localid",c)}}})),_.Logger.logUpdate(v)}catch(T){let s={message:"Cannot populate Local Ids from the Index Db",data:T,ok:!1,status:400};throw(0,I.ey)(v,"PopulateTheLocalConceptsToMemory",T),s}})}function l(){return r(this,void 0,void 0,function*(){var f;const v=_.Logger.logfunction("PopulateTheLocalConnectionToMemory");try{yield null===(f=navigator.locks)||void 0===f?void 0:f.request("dblock",T=>r(this,void 0,void 0,function*(){let s=yield(0,h.S5)("localid");if(Array.isArray(s)&&s[1]){let a=s[1].value;if(a)n.R.AddConnectionId(s[1]),yield(0,h.kH)("localid",{id:1,value:a-10});else{a=-Math.floor(1e8*Math.random());let c={id:0,value:a-10};n.R.AddConnectionId({id:0,value:a}),yield(0,h.kH)("localid",c)}}})),_.Logger.logUpdate(v)}catch(T){let s={message:"Cannot populate Local Ids from the Index Db",data:T,ok:!1,status:400};throw(0,I.ey)(v,"PopulateTheLocalConnectionToMemory",T),s}})}},3077:(K,E,g)=>{g.d(E,{A:()=>r});var S=g(5205),N=g(2615),n=g(9736),h=g(5257),_=g(9700),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function r(e,o,l,f,v,T){return I(this,arguments,void 0,function*(s,a,t,c,C,b,m=!1,L=0,A={concepts:[],connections:[]}){var O,B,G,R;let M=performance.now();try{if(S.serviceWorker)try{const me=yield(0,S.sendMessage)("CreateTheConceptLocal",{referent:s,typecharacter:a,userId:t,categoryId:c,typeId:C,accessId:b,isComposition:m,referentId:L});return!(null===(B=null===(O=me?.actions)||void 0===O?void 0:O.concepts)||void 0===B)&&B.length&&(A.concepts=JSON.parse(JSON.stringify(me.actions.concepts))),!(null===(R=null===(G=me?.actions)||void 0===G?void 0:G.connections)||void 0===R)&&R.length&&(A.connections=JSON.parse(JSON.stringify(me.actions.connections))),me.data}catch(me){console.error("CreateTheConceptLocal error sw: ",me),(0,S.handleServiceWorkerException)(me)}let W=yield h.R.getConceptId(),V=!0,Z=new Date,te=new Date;if("the"==s)return new N.j(1,999,5,5,L,s,b,V,Z,te,a);let ne=new N.j(W,t,C,c,L,s,b,V,Z,te,a);return ne.isTemp=!0,ne.isComposition=m,n.v.AddConcept(ne),A.concepts.push(ne),ne}catch(W){throw _.V.logError(M,t,"create","unknown","unknown",500,void 0,"createTheConceptLocal",[s,a,t,c,C,b,m],void 0),W}})}},3130:(K,E,g)=>{g.d(E,{BG:()=>I,SL:()=>r,XZ:()=>_,ZJ:()=>n,iw:()=>h,pU:()=>e,y0:()=>N,yv:()=>S});const S=1,N=2,n=3,h=4,_=5,I=6,r=7,e=8},3152:(K,E,g)=>{let S=g(3614),N=g(7668),n=g(3303),{isClean:h,my:_}=g(4151);function I(o,l){let f=new o.constructor;for(let v in o){if(!Object.prototype.hasOwnProperty.call(o,v)||"proxyCache"===v)continue;let T=o[v],s=typeof T;"parent"===v&&"object"===s?l&&(f[v]=l):"source"===v?f[v]=T:Array.isArray(T)?f[v]=T.map(a=>I(a,f)):("object"===s&&null!==T&&(T=I(T)),f[v]=T)}return f}function r(o,l){if(l&&void 0!==l.offset)return l.offset;let f=1,v=1,T=0;for(let s=0;s<o.length;s++){if(v===l.line&&f===l.column){T=s;break}"\n"===o[s]?(f=1,v+=1):f+=1}return T}class e{get proxyOf(){return this}constructor(l={}){this.raws={},this[h]=!1,this[_]=!0;for(let f in l)if("nodes"===f){this.nodes=[];for(let v of l[f])this.append("function"==typeof v.clone?v.clone():v)}else this[f]=l[f]}addToError(l){if(l.postcssNode=this,l.stack&&this.source&&/\n\s{4}at /.test(l.stack)){let f=this.source;l.stack=l.stack.replace(/\n\s{4}at /,`$&${f.input.from}:${f.start.line}:${f.start.column}$&`)}return l}after(l){return this.parent.insertAfter(this,l),this}assign(l={}){for(let f in l)this[f]=l[f];return this}before(l){return this.parent.insertBefore(this,l),this}cleanRaws(l){delete this.raws.before,delete this.raws.after,l||delete this.raws.between}clone(l={}){let f=I(this);for(let v in l)f[v]=l[v];return f}cloneAfter(l={}){let f=this.clone(l);return this.parent.insertAfter(this,f),f}cloneBefore(l={}){let f=this.clone(l);return this.parent.insertBefore(this,f),f}error(l,f={}){if(this.source){let{end:v,start:T}=this.rangeBy(f);return this.source.input.error(l,{column:T.column,line:T.line},{column:v.column,line:v.line},f)}return new S(l)}getProxyProcessor(){return{get:(l,f)=>"proxyOf"===f?l:"root"===f?()=>l.root().toProxy():l[f],set:(l,f,v)=>(l[f]===v||(l[f]=v,"prop"!==f&&"value"!==f&&"name"!==f&&"params"!==f&&"important"!==f&&"text"!==f||l.markDirty()),!0)}}markClean(){this[h]=!0}markDirty(){if(this[h]){this[h]=!1;let l=this;for(;l=l.parent;)l[h]=!1}}next(){if(!this.parent)return;let l=this.parent.index(this);return this.parent.nodes[l+1]}positionBy(l={}){let f=this.source.start;if(l.index)f=this.positionInside(l.index);else if(l.word){let v="document"in this.source.input?this.source.input.document:this.source.input.css,T=v.slice(r(v,this.source.start),r(v,this.source.end)).indexOf(l.word);-1!==T&&(f=this.positionInside(T))}return f}positionInside(l){let f=this.source.start.column,v=this.source.start.line,T="document"in this.source.input?this.source.input.document:this.source.input.css,s=r(T,this.source.start),a=s+l;for(let t=s;t<a;t++)"\n"===T[t]?(f=1,v+=1):f+=1;return{column:f,line:v,offset:a}}prev(){if(!this.parent)return;let l=this.parent.index(this);return this.parent.nodes[l-1]}rangeBy(l={}){let f="document"in this.source.input?this.source.input.document:this.source.input.css,v={column:this.source.start.column,line:this.source.start.line,offset:r(f,this.source.start)},T=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:"number"==typeof this.source.end.offset?this.source.end.offset:r(f,this.source.end)+1}:{column:v.column+1,line:v.line,offset:v.offset+1};if(l.word){let s=f.slice(r(f,this.source.start),r(f,this.source.end)).indexOf(l.word);-1!==s&&(v=this.positionInside(s),T=this.positionInside(s+l.word.length))}else l.start?v={column:l.start.column,line:l.start.line,offset:r(f,l.start)}:l.index&&(v=this.positionInside(l.index)),l.end?T={column:l.end.column,line:l.end.line,offset:r(f,l.end)}:"number"==typeof l.endIndex?T=this.positionInside(l.endIndex):l.index&&(T=this.positionInside(l.index+1));return(T.line<v.line||T.line===v.line&&T.column<=v.column)&&(T={column:v.column+1,line:v.line,offset:v.offset+1}),{end:T,start:v}}raw(l,f){return(new N).raw(this,l,f)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...l){if(this.parent){let f=this,v=!1;for(let T of l)T===this?v=!0:v?(this.parent.insertAfter(f,T),f=T):this.parent.insertBefore(f,T);v||this.remove()}return this}root(){let l=this;for(;l.parent&&"document"!==l.parent.type;)l=l.parent;return l}toJSON(l,f){let v={},T=null==f;f=f||new Map;let s=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||"parent"===a||"proxyCache"===a)continue;let t=this[a];if(Array.isArray(t))v[a]=t.map(c=>"object"==typeof c&&c.toJSON?c.toJSON(null,f):c);else if("object"==typeof t&&t.toJSON)v[a]=t.toJSON(null,f);else if("source"===a){if(null==t)continue;let c=f.get(t.input);null==c&&(c=s,f.set(t.input,s),s++),v[a]={end:t.end,inputId:c,start:t.start}}else v[a]=t}return T&&(v.inputs=[...f.keys()].map(a=>a.toJSON())),v}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(l=n){l.stringify&&(l=l.stringify);let f="";return l(this,v=>{f+=v}),f}warn(l,f,v={}){let T={node:this};for(let s in v)T[s]=v[s];return l.warn(f,T)}}K.exports=e,e.default=e},3278:(K,E,g)=>{g.d(E,{b:()=>S});class S{static setSession(n){n&&(S.sessionId=n)}}S.BearerAccessToken="",S.sessionId=998},3295:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S=n(g(8937)),N=g(9606);function n(r){return r&&r.__esModule?r:{default:r}}function _(r,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o})(r,e)}var I=function(r){var e,o;function l(){return r.apply(this,arguments)||this}o=r,(e=l).prototype=Object.create(o.prototype),e.prototype.constructor=e,_(e,o);var f,v,T=l.prototype;return T.qualifiedName=function(s){return this.namespace?this.namespaceString+"|"+s:s},T.valueToString=function(){return this.qualifiedName(r.prototype.valueToString.call(this))},f=l,(v=[{key:"namespace",get:function(){return this._namespace},set:function(s){if(!0===s||"*"===s||"&"===s)return this._namespace=s,void(this.raws&&delete this.raws.namespace);var a=(0,S.default)(s,{isIdentifier:!0});this._namespace=s,a!==s?((0,N.ensureObject)(this,"raws"),this.raws.namespace=a):this.raws&&delete this.raws.namespace}},{key:"ns",get:function(){return this._namespace},set:function(s){this.namespace=s}},{key:"namespaceString",get:function(){if(this.namespace){var s=this.stringifyProperty("namespace");return!0===s?"":s}return""}}])&&function h(r,e){for(var o=0;o<e.length;o++){var l=e[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}(f.prototype,v),Object.defineProperty(f,"prototype",{writable:!1}),l}(n(g(4646)).default);E.default=I,K.exports=E.default},3303:(K,E,g)=>{let S=g(7668);function N(n,h){new S(h).stringify(n)}K.exports=N,N.default=N},3438:(K,E,g)=>{let S=g(396),N=g(9371),n=g(5238),h=g(1106),_=g(3878),I=g(5644),r=g(1534);function e(o,l){if(Array.isArray(o))return o.map(T=>e(T));let{inputs:f,...v}=o;if(f){l=[];for(let T of f){let s={...T,__proto__:h.prototype};s.map&&(s.map={...s.map,__proto__:_.prototype}),l.push(s)}}if(v.nodes&&(v.nodes=o.nodes.map(T=>e(T,l))),v.source){let{inputId:T,...s}=v.source;v.source=s,null!=T&&(v.source.input=l[T])}if("root"===v.type)return new I(v);if("decl"===v.type)return new n(v);if("rule"===v.type)return new r(v);if("comment"===v.type)return new N(v);if("atrule"===v.type)return new S(v);throw new Error("Unknown node type: "+o.type)}K.exports=e,e.default=e},3518:(K,E,g)=>{g.d(E,{BZ:()=>_,Xr:()=>n,ab:()=>h});var S=g(3278),N=g(490);function n(I="application/json",r="application/json"){var e;let o={},l=null===(e=S.b.sessionId)||void 0===e?void 0:e.toString();return o=""!=S.b.BearerAccessToken?{"Content-Type":I,Authorization:"Bearer "+S.b.BearerAccessToken,Accept:r,"X-Session-id":l}:{"Content-Type":I,Accept:r,"X-Session-id":l},o}function h(I="application/json",r="",e="application/json"){var o;""==r&&(r=S.b.BearerAccessToken);let l={},f=null===(o=S.b.sessionId)||void 0===o?void 0:o.toString();return l=""!=r?{"Content-Type":I,Authorization:"Bearer "+r,Accept:e,"X-Session-id":f}:{"Content-Type":I,Accept:e,"X-Session-id":f},l}function _(){var I;let r=S.b.BearerAccessToken,e=null===(I=S.b.sessionId)||void 0===I?void 0:I.toString();if(""==r){let l=(0,N.s)();""!=l.token&&(S.b.BearerAccessToken=l.token,r=l.token)}let o=new Headers;return o.append("Authorization","Bearer "+r),o.append("X-Session-Id",e),o}},3604:(K,E,g)=>{let{dirname:S,relative:N,resolve:n,sep:h}=g(197),{SourceMapConsumer:_,SourceMapGenerator:I}=g(1866),{pathToFileURL:r}=g(2739),e=g(1106),o=Boolean(_&&I),l=Boolean(S&&n&&N&&h);K.exports=class{constructor(f,v,T,s){this.stringify=f,this.mapOpts=T.map||{},this.root=v,this.opts=T,this.css=s,this.originalCSS=s,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let f;f=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let v="\n";this.css.includes("\r\n")&&(v="\r\n"),this.css+=v+"/*# sourceMappingURL="+f+" */"}applyPrevMaps(){for(let f of this.previous()){let v,T=this.toUrl(this.path(f.file)),s=f.root||S(f.file);!1===this.mapOpts.sourcesContent?(v=new _(f.text),v.sourcesContent&&(v.sourcesContent=null)):v=f.consumer(),this.map.applySourceMap(v,T,this.toUrl(this.path(s)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let f;for(let v=this.root.nodes.length-1;v>=0;v--)f=this.root.nodes[v],"comment"===f.type&&f.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(v)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),l&&o&&this.isMap())return this.generateMap();{let f="";return this.stringify(this.root,v=>{f+=v}),[f]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let f=this.previous()[0].consumer();f.file=this.outputFile(),this.map=I.fromSourceMap(f,{ignoreInvalidMapping:!0})}else this.map=new I({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new I({file:this.outputFile(),ignoreInvalidMapping:!0});let f,v,T=1,s=1,a="<no source>",t={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(c,C,b)=>{if(this.css+=c,C&&"end"!==b&&(t.generated.line=T,t.generated.column=s-1,C.source&&C.source.start?(t.source=this.sourcePath(C),t.original.line=C.source.start.line,t.original.column=C.source.start.column-1,this.map.addMapping(t)):(t.source=a,t.original.line=1,t.original.column=0,this.map.addMapping(t))),v=c.match(/\n/g),v?(T+=v.length,f=c.lastIndexOf("\n"),s=c.length-f):s+=c.length,C&&"start"!==b){let m=C.parent||{raws:{}};("decl"===C.type||"atrule"===C.type&&!C.nodes)&&C===m.last&&!m.raws.semicolon||(C.source&&C.source.end?(t.source=this.sourcePath(C),t.original.line=C.source.end.line,t.original.column=C.source.end.column-1,t.generated.line=T,t.generated.column=s-2,this.map.addMapping(t)):(t.source=a,t.original.line=1,t.original.column=0,t.generated.line=T,t.generated.column=s-1,this.map.addMapping(t)))}})}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(f=>f.annotation))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let f=this.mapOpts.annotation;return(void 0===f||!0===f)&&(!this.previous().length||this.previous().some(v=>v.inline))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(f=>f.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(f){if(this.mapOpts.absolute||60===f.charCodeAt(0)||/^\w+:\/\//.test(f))return f;let v=this.memoizedPaths.get(f);if(v)return v;let T=this.opts.to?S(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(T=S(n(T,this.mapOpts.annotation)));let s=N(T,f);return this.memoizedPaths.set(f,s),s}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(f=>{if(f.source&&f.source.input.map){let v=f.source.input.map;this.previousMaps.includes(v)||this.previousMaps.push(v)}});else{let f=new e(this.originalCSS,this.opts);f.map&&this.previousMaps.push(f.map)}return this.previousMaps}setSourcesContent(){let f={};if(this.root)this.root.walk(v=>{if(v.source){let T=v.source.input.from;if(T&&!f[T]){f[T]=!0;let s=this.usesFileUrls?this.toFileUrl(T):this.toUrl(this.path(T));this.map.setSourceContent(s,v.source.input.css)}}});else if(this.css){let v=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(v,this.css)}}sourcePath(f){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(f.source.input.from):this.toUrl(this.path(f.source.input.from))}toBase64(f){return Buffer?Buffer.from(f).toString("base64"):window.btoa(unescape(encodeURIComponent(f)))}toFileUrl(f){let v=this.memoizedFileURLs.get(f);if(v)return v;if(r){let T=r(f).toString();return this.memoizedFileURLs.set(f,T),T}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(f){let v=this.memoizedURLs.get(f);if(v)return v;"\\"===h&&(f=f.replace(/\\/g,"/"));let T=encodeURI(f).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(f,T),T}}},3614:(K,E,g)=>{let S=g(8633),N=g(9746);class n extends Error{constructor(_,I,r,e,o,l){super(_),this.name="CssSyntaxError",this.reason=_,o&&(this.file=o),e&&(this.source=e),l&&(this.plugin=l),void 0!==I&&void 0!==r&&("number"==typeof I?(this.line=I,this.column=r):(this.line=I.line,this.column=I.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,n)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(_){if(!this.source)return"";let I=this.source;null==_&&(_=S.isColorSupported);let r=s=>s,e=s=>s,o=s=>s;if(_){let{bold:s,gray:a,red:t}=S.createColors(!0);e=c=>s(t(c)),r=c=>a(c),N&&(o=c=>N(c))}let l=I.split(/\r?\n/),f=Math.max(this.line-3,0),v=Math.min(this.line+2,l.length),T=String(v).length;return l.slice(f,v).map((s,a)=>{let t=f+1+a,c=" "+(" "+t).slice(-T)+" | ";if(t===this.line){if(s.length>160){let b=20,m=Math.max(0,this.column-b),L=Math.max(this.column+b,this.endColumn+b),A=s.slice(m,L),O=r(c.replace(/\d/g," "))+s.slice(0,Math.min(this.column-1,b-1)).replace(/[^\t]/g," ");return e(">")+r(c)+o(A)+"\n "+O+e("^")}let C=r(c.replace(/\d/g," "))+s.slice(0,this.column-1).replace(/[^\t]/g," ");return e(">")+r(c)+o(s)+"\n "+C+e("^")}return" "+r(c)+o(s)}).join("\n")}toString(){let _=this.showSourceCode();return _&&(_="\n\n"+_+"\n"),this.name+": "+this.message+_}}K.exports=n,n.default=n},3631:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=function(o,l){if(o&&o.__esModule)return o;if(null===o||"object"!=typeof o&&"function"!=typeof o)return{default:o};var f=h(void 0);if(f&&f.has(o))return f.get(o);var v={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in o)if("default"!==s&&Object.prototype.hasOwnProperty.call(o,s)){var a=T?Object.getOwnPropertyDescriptor(o,s):null;a&&(a.get||a.set)?Object.defineProperty(v,s,a):v[s]=o[s]}return v.default=o,f&&f.set(o,v),v}(g(1581));function h(o){if("function"!=typeof WeakMap)return null;var l=new WeakMap,f=new WeakMap;return(h=function(v){return v?f:l})(o)}function _(o,l){(null==l||l>o.length)&&(l=o.length);for(var f=0,v=new Array(l);f<l;f++)v[f]=o[f];return v}function r(o,l){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f})(o,l)}var e=function(o){var l,f;function v(t){var c;return(c=o.call(this,t)||this).nodes||(c.nodes=[]),c}f=o,(l=v).prototype=Object.create(f.prototype),l.prototype.constructor=l,r(l,f);var T,s,a=v.prototype;return a.append=function(t){return t.parent=this,this.nodes.push(t),this},a.prepend=function(t){for(var c in t.parent=this,this.nodes.unshift(t),this.indexes)this.indexes[c]++;return this},a.at=function(t){return this.nodes[t]},a.index=function(t){return"number"==typeof t?t:this.nodes.indexOf(t)},a.removeChild=function(t){var c;for(var C in t=this.index(t),this.at(t).parent=void 0,this.nodes.splice(t,1),this.indexes)(c=this.indexes[C])>=t&&(this.indexes[C]=c-1);return this},a.removeAll=function(){for(var t,c=function(C,b){var m=typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(m)return(m=m.call(C)).next.bind(m);if(Array.isArray(C)||(m=function(A,O){if(A){if("string"==typeof A)return _(A,O);var B=Object.prototype.toString.call(A).slice(8,-1);return"Object"===B&&A.constructor&&(B=A.constructor.name),"Map"===B||"Set"===B?Array.from(A):"Arguments"===B||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?_(A,O):void 0}}(C))){m&&(C=m);var L=0;return function(){return L>=C.length?{done:!0}:{done:!1,value:C[L++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.nodes);!(t=c()).done;)t.value.parent=void 0;return this.nodes=[],this},a.empty=function(){return this.removeAll()},a.insertAfter=function(t,c){var C;c.parent=this;for(var b,m=this.index(t),L=[],A=2;A<arguments.length;A++)L.push(arguments[A]);for(var O in(C=this.nodes).splice.apply(C,[m+1,0,c].concat(L)),c.parent=this,this.indexes)m<(b=this.indexes[O])&&(this.indexes[O]=b+arguments.length-1);return this},a.insertBefore=function(t,c){var C;c.parent=this;for(var b,m=this.index(t),L=[],A=2;A<arguments.length;A++)L.push(arguments[A]);for(var O in(C=this.nodes).splice.apply(C,[m,0,c].concat(L)),c.parent=this,this.indexes)(b=this.indexes[O])>=m&&(this.indexes[O]=b+arguments.length-1);return this},a._findChildAtPosition=function(t,c){var C=void 0;return this.each(function(b){if(b.atPosition){var m=b.atPosition(t,c);if(m)return C=m,!1}else if(b.isAtPosition(t,c))return C=b,!1}),C},a.atPosition=function(t,c){return this.isAtPosition(t,c)?this._findChildAtPosition(t,c)||this:void 0},a._inferEndPosition=function(){this.last&&this.last.source&&this.last.source.end&&(this.source=this.source||{},this.source.end=this.source.end||{},Object.assign(this.source.end,this.last.source.end))},a.each=function(t){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var c=this.lastEach;if(this.indexes[c]=0,this.length){for(var C,b;this.indexes[c]<this.length&&!1!==(b=t(this.at(C=this.indexes[c]),C));)this.indexes[c]+=1;return delete this.indexes[c],!1!==b&&void 0}},a.walk=function(t){return this.each(function(c,C){var b=t(c,C);if(!1!==b&&c.length&&(b=c.walk(t)),!1===b)return!1})},a.walkAttributes=function(t){var c=this;return this.walk(function(C){if(C.type===n.ATTRIBUTE)return t.call(c,C)})},a.walkClasses=function(t){var c=this;return this.walk(function(C){if(C.type===n.CLASS)return t.call(c,C)})},a.walkCombinators=function(t){var c=this;return this.walk(function(C){if(C.type===n.COMBINATOR)return t.call(c,C)})},a.walkComments=function(t){var c=this;return this.walk(function(C){if(C.type===n.COMMENT)return t.call(c,C)})},a.walkIds=function(t){var c=this;return this.walk(function(C){if(C.type===n.ID)return t.call(c,C)})},a.walkNesting=function(t){var c=this;return this.walk(function(C){if(C.type===n.NESTING)return t.call(c,C)})},a.walkPseudos=function(t){var c=this;return this.walk(function(C){if(C.type===n.PSEUDO)return t.call(c,C)})},a.walkTags=function(t){var c=this;return this.walk(function(C){if(C.type===n.TAG)return t.call(c,C)})},a.walkUniversals=function(t){var c=this;return this.walk(function(C){if(C.type===n.UNIVERSAL)return t.call(c,C)})},a.split=function(t){var c=this,C=[];return this.reduce(function(b,m,L){var A=t.call(c,m);return C.push(m),A?(b.push(C),C=[]):L===c.length-1&&b.push(C),b},[])},a.map=function(t){return this.nodes.map(t)},a.reduce=function(t,c){return this.nodes.reduce(t,c)},a.every=function(t){return this.nodes.every(t)},a.some=function(t){return this.nodes.some(t)},a.filter=function(t){return this.nodes.filter(t)},a.sort=function(t){return this.nodes.sort(t)},a.toString=function(){return this.map(String).join("")},T=v,(s=[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}])&&function I(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}(T.prototype,s),Object.defineProperty(T,"prototype",{writable:!1}),v}(N.default);E.default=e,K.exports=E.default},3655:(K,E,g)=>{g.d(E,{El:()=>l,b8:()=>o,kH:()=>e,qI:()=>r,wh:()=>f});var S=g(2299),N=g(9581),n=g(5205),h=g(1863);let _=10;class I{}function r(v){const T=n.Logger.logfunction("openDatabase",[v,"indexdb"]);return new Promise(function(s,a){I.db&&(n.Logger.logUpdate(T),s(I.db));let t=N.B.BASE_URL+"_FreeSchema"+N.B.BASE_APPLICATION;const c=indexedDB.open(t,_);console.log("this is the update version",_,c),c.onupgradeneeded=C=>{let b=C.target.result,m="concept",L="connection",A="settings";console.log("this is the version update for index",_),b.objectStoreNames.contains(m)&&b.deleteObjectStore(m),b.objectStoreNames.contains(L)&&b.deleteObjectStore(L),b.objectStoreNames.contains(A)&&b.deleteObjectStore(A),b.objectStoreNames.contains(m)||(b.createObjectStore(m,{keyPath:"id"}).transaction.oncomplete=O=>{}),b.objectStoreNames.contains(L)||(b.createObjectStore(L,{keyPath:"id"}).transaction.oncomplete=O=>{}),b.objectStoreNames.contains(A)||(b.createObjectStore(A,{keyPath:"id"}).transaction.oncomplete=O=>{}),n.Logger.logUpdate(T),s(b)},c.onerror=C=>{console.error("Why didn't you allow my web app to use IndexedDB?!",C),indexedDB.deleteDatabase(t),r(v),(0,h.ey)(T,"openDatabase",C),a(C)},c.onsuccess=function(C){I.db=C.target.result,n.Logger.logUpdate(T),s(I.db)}})}function e(v,T){const s=n.Logger.logfunction("UpdateToDatabase",[v,"indexdb"]);return new Promise(function(a,t){r(v).then(c=>{const C=c.transaction(v,"readwrite").objectStore(v).put(T);C.onsuccess=b=>{n.Logger.logUpdate(s),a(T)},C.onerror=b=>{let m={status:400,ok:!1,message:"Cannot Update to the database"+v,data:b,body:T};(0,h.ey)(s,"UpdateToDatabase",m),t(m)}}).catch(c=>{let C={status:400,ok:!1,message:"Cannot update to database because you cannot open the database",data:c};(0,h.ey)(s,"UpdateToDatabase",C),t(C)})})}function o(){const v=n.Logger.logfunction("GetLastSettingsFromDatabase",["indexdb"]);return new Promise(function(T,s){let a="settings";r(a).then(t=>{let c=t.transaction(a,"readwrite").objectStore(a).getAll();c.onsuccess=()=>{let C=new S.B(!1),b=c.result;for(let m=0;m<b.length;m++)C=b[m];n.Logger.logUpdate(v),T(C)},c.onerror=C=>{(0,h.ey)(v,"GetLastSettingsFromDatabase",C),s(C)}}).catch(t=>{let c={status:400,ok:!1,message:"Cannot get last object from database because you cannot open the database",data:t};(0,h.ey)(v,"GetLastSettingsFromDatabase",c),s(c)})})}function l(v){const T=n.Logger.logfunction("AiUpdateFlag",["indexdb"]);return new Promise(function(s,a){let t="settings";r(t).then(c=>{const C=c.transaction(t,"readwrite").objectStore(t).put(v);C.onsuccess=b=>{n.Logger.logUpdate(T),s(v)},C.onerror=b=>{let m={status:400,ok:!1,message:"Cannot update AI flag",data:b,body:v};(0,h.ey)(T,"AiUpdateFlag",m),a(m)}}).catch(c=>{let C={status:400,ok:!1,message:"Cannot update AI flag because you cannot open the database",data:c};(0,h.ey)(T,"AiUpdateFlag",C),a(C)})})}function f(v,T){const s=n.Logger.logfunction("removeFromDatabase",[v,"indexdb"]);return new Promise(function(a,t){r(v).then(c=>{const C=c.transaction(v,"readwrite").objectStore(v).delete(Number(T));C.onsuccess=function(b){n.Logger.logUpdate(s),a(T)},C.onerror=b=>{let m={status:400,ok:!1,message:"Cannot remove from the database"+v,data:b};(0,h.ey)(s,"removeFromDatabase",m),t(m)}}).catch(c=>{let C={status:400,ok:!1,message:"Cannot remove from the database because you cannot open the database",data:c,body:T};(0,h.ey)(s,"removeFromDatabase",C),t(C)})})}},3717:(K,E,g)=>{let S=g(38);class N{get content(){return this.css}constructor(h,_,I){this.processor=h,this.messages=[],this.root=_,this.opts=I,this.css="",this.map=void 0}toString(){return this.css}warn(h,_={}){_.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(_.plugin=this.lastPlugin.postcssPlugin);let I=new S(h,_);return this.messages.push(I),I}warnings(){return this.messages.filter(h=>"warning"===h.type)}}K.exports=N,N.default=N},3729:(K,E,g)=>{g.d(E,{D:()=>f});var S=g(9934),N=g(4485),n=g(2),h=g(7876),_=g(4818),I=g(999),r=g(5868),e=g(5205),o=g(176),l=function(v,T,s,a){return new(s||(s=Promise))(function(t,c){function C(L){try{m(a.next(L))}catch(A){c(A)}}function b(L){try{m(a.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof s?A:new s(function(O){O(A)})).then(C,b)}m((a=a.apply(v,T||[])).next())})};function f(v){return l(this,arguments,void 0,function*(T,s={concepts:[],connections:[]}){var a,t,c,C;if(performance.now(),e.serviceWorker)try{const pe=yield(0,e.sendMessage)("UpdateCompositionLocal",{patcherStructure:T,actions:s});return!(null===(t=null===(a=pe?.actions)||void 0===a?void 0:a.concepts)||void 0===t)&&t.length&&(s.concepts=JSON.parse(JSON.stringify(pe.actions.concepts))),!(null===(C=null===(c=pe?.actions)||void 0===c?void 0:c.connections)||void 0===C)&&C.length&&(s.connections=JSON.parse(JSON.stringify(pe.actions.connections))),pe.data}catch(pe){console.error("UpdateCompositionLocal error sw: ",pe),(0,e.handleServiceWorkerException)(pe)}const b=T.userId,m=T.sessionId,L=T.accessId;let A=[];const O=[];let B=(0,e.CreateDefaultLConcept)(),G=(0,e.CreateDefaultLConcept)();const R=[],M=T.compositionId,W=T.ofTheCompositionId;let V=[],Z=yield(0,n.s)(M);for(let pe=0;pe<Z.length;pe++)A.push((0,o.P6)(Z[pe]));const te=[],ne=[];let me=[];for(let pe=0;pe<A.length;pe++)(0,S.A)(ne,A[pe].ofTheConceptId),(0,S.A)(te,A[pe].ofTheConceptId),(0,S.A)(te,A[pe].toTheConceptId),me.push(A[pe].ofTheConceptId);for(let pe=0;pe<te.length;pe++){const ke=yield(0,h.A)(te[pe]);M==te[pe]&&(B=(0,o.F4)(ke)),W==te[pe]&&(G=(0,o.F4)(ke)),O.push((0,o.F4)(ke))}const H=T.patchObject;for(const pe in H){let ke=(0,e.CreateDefaultLConcept)();const ie=H[pe];let Y=B;G.id>0&&(Y=G),Array.isArray(ie)||"object"==typeof ie?(ke=yield(0,r.k)(pe,"",!0,B.userId,4,999,void 0,s),yield(0,I.R)(H[pe],ke.id,ke.userId,B.id,B.userId,4,999,void 0,s)):ke=yield(0,r.k)(pe,ie,!1,b,L,m,void 0,s);const re=(0,N.nm)(O,ke);for(let ue=0;ue<re.length;ue++)if(re[ue].id>0){const z=(0,N.gt)(A,re[ue].id);V=V.concat(z),R.push(re[ue])}yield(0,e.CreateTheConnectionLocal)(Y.id,ke.id,B.id,2,void 0,void 0,s),O.push(ke)}for(let pe=0;pe<V.length;pe++)yield(0,_.m)(V[pe].id);yield e.LocalSyncData.SyncDataOnline(void 0,s)})}},3878:(K,E,g)=>{let{existsSync:S,readFileSync:N}=g(9977),{dirname:n,join:h}=g(197),{SourceMapConsumer:_,SourceMapGenerator:I}=g(1866);class r{constructor(o,l){if(!1===l.map)return;this.loadAnnotation(o),this.inline=this.startWith(this.annotation,"data:");let v=this.loadMap(l.from,l.map?l.map.prev:void 0);!this.mapFile&&l.from&&(this.mapFile=l.from),this.mapFile&&(this.root=n(this.mapFile)),v&&(this.text=v)}consumer(){return this.consumerCache||(this.consumerCache=new _(this.text)),this.consumerCache}decodeInline(o){let l=o.match(/^data:application\/json;charset=utf-?8,/)||o.match(/^data:application\/json,/);if(l)return decodeURIComponent(o.substr(l[0].length));let f=o.match(/^data:application\/json;charset=utf-?8;base64,/)||o.match(/^data:application\/json;base64,/);if(f)return v=o.substr(f[0].length),Buffer?Buffer.from(v,"base64").toString():window.atob(v);var v;let T=o.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+T)}getAnnotationURL(o){return o.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(o){return"object"==typeof o&&("string"==typeof o.mappings||"string"==typeof o._mappings||Array.isArray(o.sections))}loadAnnotation(o){let l=o.match(/\/\*\s*# sourceMappingURL=/g);if(!l)return;let f=o.lastIndexOf(l.pop()),v=o.indexOf("*/",f);f>-1&&v>-1&&(this.annotation=this.getAnnotationURL(o.substring(f,v)))}loadFile(o){if(this.root=n(o),S(o))return this.mapFile=o,N(o,"utf-8").toString().trim()}loadMap(o,l){if(!1===l)return!1;if(l){if("string"==typeof l)return l;if("function"!=typeof l){if(l instanceof _)return I.fromSourceMap(l).toString();if(l instanceof I)return l.toString();if(this.isMap(l))return JSON.stringify(l);throw new Error("Unsupported previous source map format: "+l.toString())}{let f=l(o);if(f){let v=this.loadFile(f);if(!v)throw new Error("Unable to load previous source map: "+f.toString());return v}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let f=this.annotation;return o&&(f=h(n(o),f)),this.loadFile(f)}}}startWith(o,l){return!!o&&o.substr(0,l.length)===l}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}K.exports=r,r.default=r},3996:(K,E,g)=>{g.d(E,{i:()=>S});class S{constructor(n,h,_,I){this.key="",this.value=[],this.height=1,this.key=n,this.value=h,this.leftNode=_,this.rightNode=I}getFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getFromNode(n,h.leftNode):n>h.key?this.getFromNode(n,h.rightNode):h)}rightRotate(n){if(n){let h=n.leftNode;if(h)return n.leftNode=h.rightNode,h.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,h}return n}leftRotate(n){if(n){let h=n.rightNode;if(h){let _=h.leftNode;return h.leftNode=n,n.rightNode=_,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(n.rightNode))+1,h}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return null==n?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}removeNode(n,h){if(null==n)return n;if(n.key>h)return n.leftNode=this.removeNode(n.leftNode,h),n;if(n.key<h)return n.rightNode=this.removeNode(n.rightNode,h),n;if(null==n.leftNode){let _=n.rightNode;return n=null,_}if(null==n.rightNode){let _=n.leftNode;return n=null,_}{let _=this.inOrderSuccessor(n.rightNode);return n.value=_.value,n.key=_.key,n.variants=_.variants,n.currentNode=_.currentNode,n.rightNode=this.removeNode(n.rightNode,_.key),n}}inOrderSuccessor(n){for(;null!=n.leftNode;)n=n.leftNode;return n}}},4151:K=>{K.exports.isClean=Symbol("isClean"),K.exports.my=Symbol("my")},4195:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S=_(g(8937)),N=g(9606),n=_(g(4646)),h=g(1581);function _(o){return o&&o.__esModule?o:{default:o}}function r(o,l){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f})(o,l)}var e=function(o){var l,f,v,T;function s(a){var t;return(t=o.call(this,a)||this).type=h.CLASS,t._constructed=!0,t}return f=o,(l=s).prototype=Object.create(f.prototype),l.prototype.constructor=l,r(l,f),s.prototype.valueToString=function(){return"."+o.prototype.valueToString.call(this)},v=s,(T=[{key:"value",get:function(){return this._value},set:function(a){if(this._constructed){var t=(0,S.default)(a,{isIdentifier:!0});t!==a?((0,N.ensureObject)(this,"raws"),this.raws.value=t):this.raws&&delete this.raws.value}this._value=a}}])&&function I(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}(v.prototype,T),Object.defineProperty(v,"prototype",{writable:!1}),s}(n.default);E.default=e,K.exports=E.default},4211:(K,E,g)=>{let S=g(3604),N=g(9577);const n=g(3717);let h=g(3303);g(6156);class _{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let r,e=N;try{r=e(this._css,this._opts)}catch(o){this.error=o}if(this.error)throw this.error;return this._root=r,r}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(r,e,o){let l;e=e.toString(),this.stringified=!1,this._processor=r,this._css=e,this._opts=o,this._map=void 0;let f=h;this.result=new n(this._processor,l,this._opts),this.result.css=e;let v=this;Object.defineProperty(this.result,"root",{get:()=>v.root});let T=new S(f,l,this._opts,e);if(T.isMap()){let[s,a]=T.generate();s&&(this.result.css=s),a&&(this.result.map=a)}else T.clearAnnotation(),this.result.css=T.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(r){return this.async().catch(r)}finally(r){return this.async().then(r,r)}sync(){if(this.error)throw this.error;return this.result}then(r,e){return this.async().then(r,e)}toString(){return this._css}warnings(){return[]}}K.exports=_,_.default=_},4287:(K,E,g)=>{g.d(E,{w:()=>h});var S=g(5205),N=g(3130),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};class h{constructor(){this.subscribers=[],this.mainConcept=0,this.compositionIds=[],this.conceptIds=[],this.internalConnections=[],this.reverse=[],this.linkers=[],this.newIds=[],this.dependency=[],this.isDataLoaded=!1,this.isUpdating=!1,this.fetched=!1,this.format=N.yv,this.eventHandlers={}}listenToEventType(I){if(this.eventHandlers[I])return;const r=e=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){try{let l=e;if(!o.compositionIds.includes(l?.detail)){o.compositionIds.unshift(l?.detail),o.listenToEvent(l?.detail);let f=l?.detail,v=yield S.ConnectionData.GetConnectionByOfTheConceptAndType(f,f);for(let T=0;T<v.length;T++)yield S.ConnectionData.GetConnection(v[T]).then(s=>{s.typeId==o.mainConcept?o.internalConnections.includes(s.id)||o.internalConnections.push(s.id):o.linkers.includes(s.id)||o.linkers.push(s.id),o.conceptIds.includes(s.toTheConceptId)||o.conceptIds.push(s.toTheConceptId),o.compositionIds.includes(s.ofTheConceptId)||o.compositionIds.push(s.ofTheConceptId)})}o.isUpdating=!1,yield o.bind(),o.notify()}catch(l){throw console.error("Error in typeHandler event listener:",l),o.isUpdating=!1,l}})},200)}});this.eventHandlers[I]=r,window.addEventListener(`${I}`,r)}listenToEvent(I){if(this.eventHandlers[I])return;const r=e=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){try{let l=yield S.ConnectionData.GetConnectionByOfTheConceptAndType(I,I);for(let f=0;f<l.length;f++)yield S.ConnectionData.GetConnection(l[f]).then(v=>{v.typeId==o.mainConcept?o.internalConnections.includes(v.id)||o.internalConnections.push(v.id):o.linkers.includes(v.id)||o.linkers.push(v.id),o.conceptIds.includes(v.toTheConceptId)||o.conceptIds.push(v.toTheConceptId),o.compositionIds.includes(v.ofTheConceptId)||(o.compositionIds.push(v.ofTheConceptId),o.newIds.includes(v.ofTheConceptId)||o.newIds.push(v.ofTheConceptId))});o.isUpdating=!1,yield o.bind(),o.notify()}catch(l){throw console.error("Error in event listener for concept",I,":",l),o.isUpdating=!1,l}})},200)}});this.eventHandlers[I]=r,window.addEventListener(`${I}`,r)}removeListenToEvent(I){const r=this.eventHandlers[I];r&&(window.removeEventListener(`${I}`,r),delete this.eventHandlers[I])}listenToEventConnectionType(I,r){const e=`${I}_type_${r}`;if(this.eventHandlers[e])return;const o=l=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let f=this;setTimeout(function(){return n(this,void 0,void 0,function*(){try{let v=yield S.ConnectionData.GetConnectionByOfTheConceptAndType(I,I);for(let T=0;T<v.length;T++)v[T].typeId==r&&(yield S.ConnectionData.GetConnection(v[T]).then(s=>{s.typeId==f.mainConcept?f.internalConnections.includes(s.id)||f.internalConnections.push(s.id):f.linkers.includes(s.id)||f.linkers.push(s.id),f.conceptIds.includes(s.toTheConceptId)||f.conceptIds.push(s.toTheConceptId),f.compositionIds.includes(s.ofTheConceptId)||f.compositionIds.push(s.ofTheConceptId)}));f.isUpdating=!1,yield f.bind(),f.notify()}catch(v){throw console.error("Error in connectionType handler:",v),f.isUpdating=!1,v}})},200)}});this.eventHandlers[e]=o,window.addEventListener(`${I}`,o)}bind(){return n(this,void 0,void 0,function*(){console.log("this is the old execute data")})}run(){return n(this,void 0,void 0,function*(){console.log("this is non subscriber data")})}update(){return n(this,void 0,void 0,function*(){this.isDataLoaded=!1,yield this.bind(),this.notify()})}subscribe(I,r){return n(this,void 0,void 0,function*(){this.subscribers.push(I);try{return yield this.bind(),I(this.data,this)}catch(e){throw console.error("Error in subscribe:",e),r&&r(e),e}})}execute(){return n(this,void 0,void 0,function*(){return yield this.run()})}unsubscribe(I){return this.subscribers.filter(r=>r!=I),this.subscribers.length}notify(){this.subscribers.map(I=>{I(this.data,this)})}}},4310:(K,E,g)=>{g.d(E,{Cp:()=>f,ix:()=>s,ml:()=>T,qj:()=>v});var S=g(5205),N=g(1596),n=g(4698),h=g(1863),_=g(1320),I=g(3518),r=function(a,t,c,C){return new(c||(c=Promise))(function(b,m){function L(B){try{O(C.next(B))}catch(G){m(G)}}function A(B){try{O(C.throw(B))}catch(G){m(G)}}function O(B){var G;B.done?b(B.value):(G=B.value,G instanceof c?G:new c(function(R){R(G)})).then(L,A)}O((C=C.apply(a,t||[])).next())})};const e=new Map,o=new Map,l=new Map;function f(a){var t=arguments;return r(this,void 0,void 0,function*(){S.Logger.logfunction("BuildWidgetFromId",t);try{if(S.serviceWorker)return(yield(0,S.sendMessage)("BuildWidgetFromId",{id:a})).data}catch(b){console.error("BuildWidgetFromId error sw: ",b),(0,S.handleServiceWorkerException)(b)}let c={};if(e.has(a))return e.get(a)||c;const C=(()=>r(this,void 0,void 0,function*(){try{let b=[],m=[],L=[],A=[],O="DESC",B=[],G={},R=(0,I.Xr)("application/json"),M=S.BaseUrl.getWidgetData()+"?id="+a;const W=yield fetch(M,{method:"GET",headers:R});if(!W.ok)return(0,h.ry)(W),console.log("This is the BuildWidgetFromId error",W.status),[];G=yield W.json(),b=G.conceptIds,m=G.linkers,L=G.reverse,A=G.mainCompositionIds,B=G.countinfo;let V=(0,n.w)(B);return c=yield(0,_.e$)(m,b,A,L,V,O),c}catch(b){throw console.log("this is the error in the build widget",b),b}finally{e.delete(a)}}))();return e.set(a,C),C})}function v(a){var t=arguments;return r(this,void 0,void 0,function*(){S.Logger.logfunction("BuildWidgetFromIdForLatest",t);try{if(S.serviceWorker)return(yield(0,S.sendMessage)("BuildWidgetFromIdForLatest",{id:a})).data}catch(b){console.error("BuildWidgetFromIdForLatest error sw: ",b),(0,S.handleServiceWorkerException)(b)}let c={};if(o.has(a))return o.get(a)||c;const C=(()=>r(this,void 0,void 0,function*(){try{let b,m=[],L=[],A=[],O=[],B="DESC",G=[],R={},M=(0,I.Xr)("application/json");try{let V=S.BaseUrl.getLatestWidgetData()+"?id="+a;b=yield fetch(V,{method:"GET",headers:M})}catch{b=yield(0,N.g)({method:"GET",headers:M},"?id="+a)}if(!b.ok)return(0,h.ry)(b),console.log("This is the BuildWidgetFromId error",b.status),[];R=yield b.json(),m=R.conceptIds,L=R.linkers,A=R.reverse,O=R.mainCompositionIds,G=R.countinfo;let W=(0,n.w)(G);return c=yield(0,_.e$)(L,m,O,A,W,B),{data:c,mainId:R.mainId}}catch(b){throw console.log("this is the error in the build widget",b),b}finally{o.delete(a)}}))();return o.set(a,C),C})}function T(a){var t=arguments;return r(this,void 0,void 0,function*(){S.Logger.logfunction("BuildWidgetFromIdForRecent",t);try{if(S.serviceWorker)return(yield(0,S.sendMessage)("BuildWidgetFromIdForRecent",{id:a})).data}catch(b){console.error("BuildWidgetFromIdForRecent error sw: ",b),(0,S.handleServiceWorkerException)(b)}let c={};if(l.has(a))return l.get(a)||c;const C=(()=>r(this,void 0,void 0,function*(){try{let b,m=[],L=[],A=[],O=[],B="DESC",G=[],R={},M=(0,I.Xr)("application/json");try{let V=S.BaseUrl.getRecentWidgetData()+"?id="+a;b=yield fetch(V,{method:"GET",headers:M})}catch{b=yield(0,N.g)({method:"GET",headers:M},"?id="+a)}if(!b.ok)return(0,h.ry)(b),console.log("This is the BuildWidgetFromId error",b.status),[];R=yield b.json(),m=R.conceptIds,L=R.linkers,A=R.reverse,O=R.mainCompositionIds,G=R.countinfo;let W=(0,n.w)(G);return c=yield(0,_.e$)(L,m,O,A,W,B),{data:c,mainId:R.mainId}}catch(b){throw console.log("this is the error in the build widget",b),b}finally{l.delete(a)}}))();return l.set(a,C),C})}function s(a,t){for(let c=0;c<a.length;c++)if(a[c].id==t)return a[c]}},4364:(K,E,g)=>{g.d(E,{s:()=>h});var S=g(1239),N=g(5205),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};function h(){return n(this,arguments,void 0,function*(_=[]){const I=N.Logger.logfunction("FindConceptsFromConnections",[_.length]);let r=[];if(_.length>0){for(let e=0;e<_.length;e++)r.includes(_[e].ofTheConceptId)||r.push(_[e].ofTheConceptId),r.includes(_[e].toTheConceptId)||r.push(_[e].toTheConceptId),r.includes(_[e].typeId)||r.push(_[e].typeId);yield(0,S.r)(r)}N.Logger.logUpdate(I)})}},4402:(K,E,g)=>{g.d(E,{A:()=>e});var S=g(3026),N=g(9581),n=g(3518),h=g(1863),_=g(5205),I=g(7876),r=function(o,l,f,v){return new(f||(f=Promise))(function(T,s){function a(C){try{c(v.next(C))}catch(b){s(b)}}function t(C){try{c(v.throw(C))}catch(b){s(b)}}function c(C){var b;C.done?T(C.value):(b=C.value,b instanceof f?b:new f(function(m){m(b)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function e(o,l){var f=arguments;return r(this,void 0,void 0,function*(){const v=_.Logger.logfunction("GetConceptByCharacterAndType",f);try{if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetConceptByCharacterAndType",{characterValue:o,typeId:l})).data}catch(c){console.error("GetConceptByCharacterAndType sw error: ",c),(0,_.handleServiceWorkerException)(c)}let t=yield S.I.GetConceptByCharacterAndTypeLocal(o,l);if(null==t||0==t.id){var T={character_value:`${o}`,type_id:l},s=JSON.stringify(T),a=(0,n.Xr)();const c=yield fetch(N.B.GetConceptByCharacterAndTypeUrl(),{method:"POST",headers:a,body:s});c.ok?(t=yield c.json(),(0,I.K)(t).then(b=>{S.I.AddConcept(t)})):((0,h.ry)(c),console.log("This is the concept by type and character error",c.status))}return _.Logger.logUpdate(v),t}catch(t){t instanceof Error?console.log(" This is the concept by type and character error message: ",t.message):console.log(" This is the concept by type and character unexpected error: ",t),(0,h.Mb)(t,N.B.GetConceptByCharacterAndTypeUrl()),(0,h.ey)(v,"GetConceptByCharacterAndType",t)}})}},4451:(K,E,g)=>{E.__esModule=!0,E.universal=E.tag=E.string=E.selector=E.root=E.pseudo=E.nesting=E.id=E.comment=E.combinator=E.className=E.attribute=void 0;var S=T(g(5588)),N=T(g(4195)),n=T(g(1704)),h=T(g(425)),_=T(g(7071)),I=T(g(2918)),r=T(g(7324)),e=T(g(518)),o=T(g(339)),l=T(g(5799)),f=T(g(9720)),v=T(g(1669));function T(s){return s&&s.__esModule?s:{default:s}}E.attribute=function(s){return new S.default(s)},E.className=function(s){return new N.default(s)},E.combinator=function(s){return new n.default(s)},E.comment=function(s){return new h.default(s)},E.id=function(s){return new _.default(s)},E.nesting=function(s){return new I.default(s)},E.pseudo=function(s){return new r.default(s)},E.root=function(s){return new e.default(s)},E.selector=function(s){return new o.default(s)},E.string=function(s){return new l.default(s)},E.tag=function(s){return new f.default(s)},E.universal=function(s){return new v.default(s)}},4485:(K,E,g)=>{function S(_=[],I){var r,e;let o=[],l=null===(r=I.type)||void 0===r?void 0:r.characterValue;if(l?.startsWith("the_")||(l="the_"+l),Array.isArray(_))for(let f=0;f<_.length;f++){let v=null===(e=_[f].type)||void 0===e?void 0:e.characterValue;v?.startsWith("the_")||(v="the_"+v),I.typeId!=_[f].typeId&&l!=v||o.push(_[f])}return o}function N(_=[],I){let r=[],e=I.typeCharacter;if(e?.startsWith("the_")||(e="the_"+e),Array.isArray(_))for(let o=0;o<_.length;o++){let l=_[o].typeCharacter;l?.startsWith("the_")||(l="the_"+l),I.typeId!=_[o].typeId&&e!=l||r.push(_[o])}return r}function n(_=[],I){let r=[];if(Array.isArray(_)){const e=_.find(l=>l.toTheConceptId==I);e&&r.push(e);const o=_.find(l=>l.ofTheConceptId==I);o&&r.push(o)}return r}function h(_=[],I){let r=[];if(Array.isArray(_)){const e=_.find(l=>l.toTheConceptId==I);e&&r.push(e);const o=_.find(l=>l.ofTheConceptId==I);o&&r.push(o)}return r}g.d(E,{gt:()=>h,nm:()=>N,vo:()=>S,wS:()=>n}),g(2155),g(7282)},4643:(K,E,g)=>{function S(N){try{if(!g.g.localStorage)return!1}catch{return!1}var n=g.g.localStorage[N];return null!=n&&"true"===String(n).toLowerCase()}K.exports=function(N,n){if(S("noDeprecation"))return N;var h=!1;return function(){if(!h){if(S("throwDeprecation"))throw new Error(n);S("traceDeprecation")?console.trace(n):console.warn(n),h=!0}return N.apply(this,arguments)}}},4646:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S=g(9606),n=function _(I,r){if("object"!=typeof I||null===I)return I;var e=new I.constructor;for(var o in I)if(I.hasOwnProperty(o)){var l=I[o];"parent"===o&&"object"==typeof l?r&&(e[o]=r):e[o]=l instanceof Array?l.map(function(f){return _(f,e)}):_(l,e)}return e},h=function(){function _(o){void 0===o&&(o={}),Object.assign(this,o),this.spaces=this.spaces||{},this.spaces.before=this.spaces.before||"",this.spaces.after=this.spaces.after||""}var I,r,e=_.prototype;return e.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.replaceWith=function(){if(this.parent){for(var o in arguments)this.parent.insertBefore(this,arguments[o]);this.remove()}return this},e.next=function(){return this.parent.at(this.parent.index(this)+1)},e.prev=function(){return this.parent.at(this.parent.index(this)-1)},e.clone=function(o){void 0===o&&(o={});var l=n(this);for(var f in o)l[f]=o[f];return l},e.appendToPropertyAndEscape=function(o,l,f){this.raws||(this.raws={});var v=this[o],T=this.raws[o];this[o]=v+l,T||f!==l?this.raws[o]=(T||v)+f:delete this.raws[o]},e.setPropertyAndEscape=function(o,l,f){this.raws||(this.raws={}),this[o]=l,this.raws[o]=f},e.setPropertyWithoutEscape=function(o,l){this[o]=l,this.raws&&delete this.raws[o]},e.isAtPosition=function(o,l){if(this.source&&this.source.start&&this.source.end)return!(this.source.start.line>o||this.source.end.line<o||this.source.start.line===o&&this.source.start.column>l||this.source.end.line===o&&this.source.end.column<l)},e.stringifyProperty=function(o){return this.raws&&this.raws[o]||this[o]},e.valueToString=function(){return String(this.stringifyProperty("value"))},e.toString=function(){return[this.rawSpaceBefore,this.valueToString(),this.rawSpaceAfter].join("")},I=_,(r=[{key:"rawSpaceBefore",get:function(){var o=this.raws&&this.raws.spaces&&this.raws.spaces.before;return void 0===o&&(o=this.spaces&&this.spaces.before),o||""},set:function(o){(0,S.ensureObject)(this,"raws","spaces"),this.raws.spaces.before=o}},{key:"rawSpaceAfter",get:function(){var o=this.raws&&this.raws.spaces&&this.raws.spaces.after;return void 0===o&&(o=this.spaces.after),o||""},set:function(o){(0,S.ensureObject)(this,"raws","spaces"),this.raws.spaces.after=o}}])&&function N(_,I){for(var r=0;r<I.length;r++){var e=I[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(_,e.key,e)}}(I.prototype,r),Object.defineProperty(I,"prototype",{writable:!1}),_}();E.default=h,K.exports=E.default},4698:(K,E,g)=>{g.d(E,{V:()=>I,w:()=>_});var S=g(7139),N=g(5205),n=g(276),h=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function _(e=[]){let o=[];if(e.length>0)for(let l=0;l<e.length;l++){let f=r(e[l]);o.push(f)}return o}function I(e){var o=arguments;return h(this,void 0,void 0,function*(){const l=N.Logger.logfunction("GetConnectionTypeForCount",o);let f={};for(let v=0;v<e.length;v++){let T=yield(0,S.r)(e[v].connectionTypeId);e[v].connectionType=T.characterValue,f[e[v].conceptId]=e[v]}return N.Logger.logUpdate(l),f})}function r(e){const o=e.split("_");if(3===o.length){let l=new n.y;return l.conceptId=Number(o[0]),l.connectionTypeId=Number(o[1]),l.count=Number(o[2]),l}throw new Error("Input string must contain exactly three parts separated by underscores.")}},4711:(K,E,g)=>{g.d(E,{F:()=>r,d:()=>e});var S=g(2155),N=g(4864),n=g(5257),h=g(9700),_=g(5205),I=function(o,l,f,v){return new(f||(f=Promise))(function(T,s){function a(C){try{c(v.next(C))}catch(b){s(b)}}function t(C){try{c(v.throw(C))}catch(b){s(b)}}function c(C){var b;C.done?T(C.value):(b=C.value,b instanceof f?b:new f(function(m){m(b)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function r(o,l,f){return I(this,arguments,void 0,function*(v,T,s,a=1,t="",c=999,C={concepts:[],connections:[]}){var b,m,L,A;let O=performance.now();if(_.serviceWorker)try{const B=yield(0,_.sendMessage)("CreateTheConnectionLocal",{ofTheConceptId:v,toTheConceptId:T,typeId:s,orderId:a,typeString:t,userId:c,actions:C});return!(null===(m=null===(b=B?.actions)||void 0===b?void 0:b.concepts)||void 0===m)&&m.length&&(C.concepts=JSON.parse(JSON.stringify(B.actions.concepts))),!(null===(A=null===(L=B?.actions)||void 0===L?void 0:L.connections)||void 0===A)&&A.length&&(C.connections=JSON.parse(JSON.stringify(B.actions.connections))),B.data}catch(B){console.log("CreateTheConnectionLocal error sw: ",B),(0,_.handleServiceWorkerException)(B)}try{let B=4,G=yield n.R.getConnectionId(),R=0,M=0,W=0;R=v,M=T,W=s;let V=new S.N(0,0,0,0,0,0,0);return v!=T&&(V=new S.N(G,R,M,c,s,a,B),V.isTemp=!0,V.typeCharacter=t,_.LocalSyncData.AddConnection(V),N.G.AddConnection(V),C.connections.push(V)),V}catch(B){throw h.V.logError(O,c,"create","Unknown","Unknown",500,void 0,"CreateTheConnectionLocal",[v,T,s,a,t,c],"UnknownUserAgent",[]),B}})}function e(o,l,f){return I(this,arguments,void 0,function*(v,T,s,a={concepts:[],connections:[]}){var t,c,C,b;if(_.serviceWorker)try{const A=yield(0,_.sendMessage)("CreateConnection",{ofTheConcept:v,toTheConcept:T,connectionTypeString:s,actions:a});return!(null===(c=null===(t=A?.actions)||void 0===t?void 0:t.concepts)||void 0===c)&&c.length&&(a.concepts=JSON.parse(JSON.stringify(A.actions.concepts))),!(null===(b=null===(C=A?.actions)||void 0===C?void 0:C.connections)||void 0===b)&&b.length&&(a.connections=JSON.parse(JSON.stringify(A.actions.connections))),A.data}catch(A){console.log("CreateConnection error sw: ",A),(0,_.handleServiceWorkerException)(A)}let m=yield(0,_.MakeTheTypeConceptLocal)(s,999,999,999),L=v.userId;return yield r(v.id,T.id,m.id,1e3,s,L,a)})}},4818:(K,E,g)=>{g.d(E,{m:()=>l,E:()=>f});var S=g(5205),N=g(1863),n=g(3518),h=function(v,T,s,a){return new(s||(s=Promise))(function(t,c){function C(L){try{m(a.next(L))}catch(A){c(A)}}function b(L){try{m(a.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof s?A:new s(function(O){O(A)})).then(C,b)}m((a=a.apply(v,T||[])).next())})},_=g(9581),I=function(v,T,s,a){return new(s||(s=Promise))(function(t,c){function C(L){try{m(a.next(L))}catch(A){c(A)}}function b(L){try{m(a.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof s?A:new s(function(O){O(A)})).then(C,b)}m((a=a.apply(v,T||[])).next())})},r=g(5239),e=g(4864),o=function(v,T,s,a){return new(s||(s=Promise))(function(t,c){function C(L){try{m(a.next(L))}catch(A){c(A)}}function b(L){try{m(a.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof s?A:new s(function(O){O(A)})).then(C,b)}m((a=a.apply(v,T||[])).next())})};function l(v){var T=arguments;return o(this,void 0,void 0,function*(){const s=S.Logger.logfunction("DeleteConnectionById",T);if(S.serviceWorker)try{return(yield(0,S.sendMessage)("DeleteConnectionById",{id:v})).data}catch(t){console.error("DeleteConnectionById sw error: ",t),(0,S.handleServiceWorkerException)(t)}let a=!0;return v>0?(a=yield function(t){var c=arguments;return I(this,void 0,void 0,function*(){const C=S.Logger.logfunction("DeleteTheConnection",c);let b=!1;try{const m=new FormData;m.append("id",t.toString());let L=(0,n.BZ)();const A=yield fetch(_.B.DeleteTheConnectionUrl(),{method:"POST",headers:L,body:m,redirect:"follow"});S.Logger.logUpdate(C),A.ok?b=(yield A.json()).success:(console.log("Delete connection error status: ",A.status),(0,N.ry)(A)),b&&S.ConnectionData.AddNpConn(t)}catch(m){m instanceof Error?console.log("Delete connection error message: ",m.message):console.log("Delete connection unexpected error: ",m),(0,N.Mb)(m,_.B.DeleteTheConnectionUrl()),(0,N.ey)(C,"DeleteTheConnection",m)}return b})}(v),r.O.removeNodeFromTree(v)):e.G.RemoveConnectionById(v),S.Logger.logUpdate(s),a})}function f(v){var T=arguments;return o(this,void 0,void 0,function*(){const s=S.Logger.logfunction("DeleteConnectionByIdBulk",T);if(S.serviceWorker)try{return(yield(0,S.sendMessage)("DeleteConnectionByIdBulk",{ids:v})).data}catch(t){console.error("DeleteConnectionByIdBulk sw error: ",t),(0,S.handleServiceWorkerException)(t)}let a=yield function(t){var c=arguments;return h(this,void 0,void 0,function*(){const C=S.Logger.logfunction("DeleteTheConnectionBulkApi",c);let b=!1;try{let m=(0,n.BZ)();m.append("Content-Type","application/json");const L=yield fetch(S.BaseUrl.DeleteTheConnectionBulkUrl(),{method:"POST",headers:m,body:JSON.stringify(t)});if(S.Logger.logUpdate(C),L.ok?b=(yield L.json()).success:(console.log("Delete connection Bulk Api error status: ",L.status),(0,N.ry)(L)),b)for(let A=0;A<t.length;A++)S.ConnectionData.AddNpConn(t[A])}catch(m){m instanceof Error?console.log("Delete connection Bulk Api error message: ",m.message):console.log("Delete connection Bulk Api unexpected error: ",m),(0,N.Mb)(m,S.BaseUrl.DeleteTheConnectionUrl()),(0,N.ey)(C,"DeleteTheConnectionBulkApi",m)}return b})}(v);if(a)for(let t=0;t<v.length;t++){let c=v[t];c>0?r.O.removeNodeFromTree(c):e.G.RemoveConnectionById(c)}return S.Logger.logUpdate(s),a})}},4864:(K,E,g)=>{g.d(E,{G:()=>I});var S=g(2155),N=g(8286),n=g(205),h=g(628),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};class I{constructor(){this.name="Connection Array"}static CheckContains(e){for(var o=!1,l=0;l<this.connectionArray.length;l++)this.connectionArray[l].id==e.id&&(o=!0);return o}static AddConnection(e){this.CheckContains(e)&&this.RemoveConnection(e),this.connectionArray.push(e)}static AddConnectionToMemory(e){this.CheckContains(e)&&this.RemoveConnection(e),this.connectionArray.push(e)}static AddToDictionary(e){this.connectionDictionary[e.id]=e}static RemoveConnection(e){for(var o=0;o<this.connectionArray.length;o++)this.connectionArray[o].id==e.id&&this.connectionArray.splice(o,1)}static RemoveConnectionById(e){for(var o=0;o<this.connectionArray.length;o++)this.connectionArray[o].id==e&&this.connectionArray.splice(o,1);h.H.RemoveConnectionById(e)}static AddPermanentConnection(e){e.id>0&&N.d.AddConnection(function(o){let l=new S.N(0,0,0,0,0,0,0);return l.ofTheConceptId=o.ofTheConceptId,l.toTheConceptId=o.toTheConceptId,l.typeId=o.typeId,l.orderId=o.orderId,l.id=o.id,l}(e))}static GetConnection(e){var o;o=null;for(var l=0;l<this.connectionArray.length;l++)this.connectionArray[l].id==e&&(o=this.connectionArray[l]);return o}static waitForDataToLoad(){return _(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isLocalConnectionLoaded)return e("done");setTimeout(I.checkFlag,1e3,e)}static GetConnectionsOfCompositionLocal(e){return _(this,void 0,void 0,function*(){var o=[];try{for(var l=0;l<this.connectionArray.length;l++)this.connectionArray[l].typeId==e&&o.push(this.connectionArray[l]);return o}catch{return o}})}static GetConnectionOfCompositionAndTypeLocal(e,o){return _(this,void 0,void 0,function*(){var l=[];try{for(var f=0;f<this.connectionArray.length;f++)this.connectionArray[f].typeId==e&&this.connectionArray[f].ofTheConceptId==o&&l.push(this.connectionArray[f]);return l}catch{return l}})}getName(){return this.name}}I.connectionArray=[],I.connectionDictionary=[]},5020:(K,E,g)=>{g.d(E,{A:()=>_});var S=g(5205),N=g(3026),n=g(205),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(){return h(this,void 0,void 0,function*(){try{let I=[];if(Array.isArray(I))for(let r=0;r<I.length;r++)N.I.AddConceptToMemory(I[r]);n.B.isDataLoaded=!0,n.B.isCharacterLoaded=!0,n.B.isTypeLoaded=!0}catch(I){throw yield(0,S.DelayFunctionExecution)(2e3,_()),{message:"Cannot create Binary Tree Concept",ok:!1,status:400,data:I}}})}},5042:K=>{K.exports={nanoid:(E=21)=>{let g="",S=0|E;for(;S--;)g+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return g},customAlphabet:(E,g=21)=>(S=g)=>{let N="",n=0|S;for(;n--;)N+=E[Math.random()*E.length|0];return N}}},5170:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N,n=A(g(518)),h=A(g(339)),_=A(g(4195)),I=A(g(425)),r=A(g(7071)),e=A(g(9720)),o=A(g(5799)),l=A(g(7324)),f=L(g(5588)),v=A(g(1669)),T=A(g(1704)),s=A(g(2918)),a=A(g(263)),t=L(g(2648)),c=L(g(71)),C=L(g(1581)),b=g(9606);function m(H){if("function"!=typeof WeakMap)return null;var pe=new WeakMap,ke=new WeakMap;return(m=function(ie){return ie?ke:pe})(H)}function L(H,pe){if(!pe&&H&&H.__esModule)return H;if(null===H||"object"!=typeof H&&"function"!=typeof H)return{default:H};var ke=m(pe);if(ke&&ke.has(H))return ke.get(H);var ie={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var re in H)if("default"!==re&&Object.prototype.hasOwnProperty.call(H,re)){var ue=Y?Object.getOwnPropertyDescriptor(H,re):null;ue&&(ue.get||ue.set)?Object.defineProperty(ie,re,ue):ie[re]=H[re]}return ie.default=H,ke&&ke.set(H,ie),ie}function A(H){return H&&H.__esModule?H:{default:H}}var B=((S={})[c.space]=!0,S[c.cr]=!0,S[c.feed]=!0,S[c.newline]=!0,S[c.tab]=!0,S),G=Object.assign({},B,((N={})[c.comment]=!0,N));function R(H){return{line:H[t.FIELDS.START_LINE],column:H[t.FIELDS.START_COL]}}function M(H){return{line:H[t.FIELDS.END_LINE],column:H[t.FIELDS.END_COL]}}function W(H,pe,ke,ie){return{start:{line:H,column:pe},end:{line:ke,column:ie}}}function V(H){return W(H[t.FIELDS.START_LINE],H[t.FIELDS.START_COL],H[t.FIELDS.END_LINE],H[t.FIELDS.END_COL])}function Z(H,pe){if(H)return W(H[t.FIELDS.START_LINE],H[t.FIELDS.START_COL],pe[t.FIELDS.END_LINE],pe[t.FIELDS.END_COL])}function te(H,pe){var ke=H[pe];if("string"==typeof ke)return-1!==ke.indexOf("\\")&&((0,b.ensureObject)(H,"raws"),H[pe]=(0,b.unesc)(ke),void 0===H.raws[pe]&&(H.raws[pe]=ke)),H}function ne(H,pe){for(var ke=-1,ie=[];-1!==(ke=H.indexOf(pe,ke+1));)ie.push(ke);return ie}var me=function(){function H(Y,re){void 0===re&&(re={}),this.rule=Y,this.options=Object.assign({lossy:!1,safe:!1},re),this.position=0,this.css="string"==typeof this.rule?this.rule:this.rule.selector,this.tokens=(0,t.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var ue=Z(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new n.default({source:ue}),this.root.errorGenerator=this._errorGenerator();var z=new h.default({source:{start:{line:1,column:1}},sourceIndex:0});this.root.append(z),this.current=z,this.loop()}var pe,ke,ie=H.prototype;return ie._errorGenerator=function(){var Y=this;return function(re,ue){return"string"==typeof Y.rule?new Error(re):Y.rule.error(re,ue)}},ie.attribute=function(){var Y=[],re=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[t.FIELDS.TYPE]!==c.closeSquare;)Y.push(this.currToken),this.position++;if(this.currToken[t.FIELDS.TYPE]!==c.closeSquare)return this.expected("closing square bracket",this.currToken[t.FIELDS.START_POS]);var ue=Y.length,z={source:W(re[1],re[2],this.currToken[3],this.currToken[4]),sourceIndex:re[t.FIELDS.START_POS]};if(1===ue&&!~[c.word].indexOf(Y[0][t.FIELDS.TYPE]))return this.expected("attribute",Y[0][t.FIELDS.START_POS]);for(var ge=0,Te="",_e="",Se=null,We=!1;ge<ue;){var Je=Y[ge],Me=this.content(Je),Ye=Y[ge+1];switch(Je[t.FIELDS.TYPE]){case c.space:if(We=!0,this.options.lossy)break;if(Se){(0,b.ensureObject)(z,"spaces",Se),z.spaces[Se].after=(z.spaces[Se].after||"")+Me;var De=(0,b.getProp)(z,"raws","spaces",Se,"after")||null;De&&(z.raws.spaces[Se].after=De+Me)}else Te+=Me,_e+=Me;break;case c.asterisk:Ye[t.FIELDS.TYPE]===c.equals?(z.operator=Me,Se="operator"):z.namespace&&("namespace"!==Se||We)||!Ye||(Te&&((0,b.ensureObject)(z,"spaces","attribute"),z.spaces.attribute.before=Te,Te=""),_e&&((0,b.ensureObject)(z,"raws","spaces","attribute"),z.raws.spaces.attribute.before=Te,_e=""),z.namespace=(z.namespace||"")+Me,(0,b.getProp)(z,"raws","namespace")&&(z.raws.namespace+=Me),Se="namespace"),We=!1;break;case c.dollar:if("value"===Se){var pt=(0,b.getProp)(z,"raws","value");z.value+="$",pt&&(z.raws.value=pt+"$");break}case c.caret:Ye[t.FIELDS.TYPE]===c.equals&&(z.operator=Me,Se="operator"),We=!1;break;case c.combinator:if("~"===Me&&Ye[t.FIELDS.TYPE]===c.equals&&(z.operator=Me,Se="operator"),"|"!==Me){We=!1;break}Ye[t.FIELDS.TYPE]===c.equals?(z.operator=Me,Se="operator"):z.namespace||z.attribute||(z.namespace=!0),We=!1;break;case c.word:if(Ye&&"|"===this.content(Ye)&&Y[ge+2]&&Y[ge+2][t.FIELDS.TYPE]!==c.equals&&!z.operator&&!z.namespace)z.namespace=Me,Se="namespace";else if(!z.attribute||"attribute"===Se&&!We)Te&&((0,b.ensureObject)(z,"spaces","attribute"),z.spaces.attribute.before=Te,Te=""),_e&&((0,b.ensureObject)(z,"raws","spaces","attribute"),z.raws.spaces.attribute.before=_e,_e=""),z.attribute=(z.attribute||"")+Me,(0,b.getProp)(z,"raws","attribute")&&(z.raws.attribute+=Me),Se="attribute";else if(!z.value&&""!==z.value||"value"===Se&&!We&&!z.quoteMark){var ot=(0,b.unesc)(Me),we=(0,b.getProp)(z,"raws","value")||"",Qe=z.value||"";z.value=Qe+ot,z.quoteMark=null,(ot!==Me||we)&&((0,b.ensureObject)(z,"raws"),z.raws.value=(we||Qe)+Me),Se="value"}else{var gt="i"===Me||"I"===Me;!z.value&&""!==z.value||!z.quoteMark&&!We?(z.value||""===z.value)&&(Se="value",z.value+=Me,z.raws.value&&(z.raws.value+=Me)):(z.insensitive=gt,gt&&"I"!==Me||((0,b.ensureObject)(z,"raws"),z.raws.insensitiveFlag=Me),Se="insensitive",Te&&((0,b.ensureObject)(z,"spaces","insensitive"),z.spaces.insensitive.before=Te,Te=""),_e&&((0,b.ensureObject)(z,"raws","spaces","insensitive"),z.raws.spaces.insensitive.before=_e,_e=""))}We=!1;break;case c.str:if(!z.attribute||!z.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:Je[t.FIELDS.START_POS]});var dt=(0,f.unescapeValue)(Me),Nt=dt.quoteMark;z.value=dt.unescaped,z.quoteMark=Nt,Se="value",(0,b.ensureObject)(z,"raws"),z.raws.value=Me,We=!1;break;case c.equals:if(!z.attribute)return this.expected("attribute",Je[t.FIELDS.START_POS],Me);if(z.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:Je[t.FIELDS.START_POS]});z.operator=z.operator?z.operator+Me:Me,Se="operator",We=!1;break;case c.comment:if(Se)if(We||Ye&&Ye[t.FIELDS.TYPE]===c.space||"insensitive"===Se){var ut=(0,b.getProp)(z,"spaces",Se,"after")||"",wt=(0,b.getProp)(z,"raws","spaces",Se,"after")||ut;(0,b.ensureObject)(z,"raws","spaces",Se),z.raws.spaces[Se].after=wt+Me}else{var ft=z[Se]||"",Tt=(0,b.getProp)(z,"raws",Se)||ft;(0,b.ensureObject)(z,"raws"),z.raws[Se]=Tt+Me}else _e+=Me;break;default:return this.error('Unexpected "'+Me+'" found.',{index:Je[t.FIELDS.START_POS]})}ge++}te(z,"attribute"),te(z,"namespace"),this.newNode(new f.default(z)),this.position++},ie.parseWhitespaceEquivalentTokens=function(Y){Y<0&&(Y=this.tokens.length);var re=this.position,ue=[],z="",ge=void 0;do{if(B[this.currToken[t.FIELDS.TYPE]])this.options.lossy||(z+=this.content());else if(this.currToken[t.FIELDS.TYPE]===c.comment){var Te={};z&&(Te.before=z,z=""),ge=new I.default({value:this.content(),source:V(this.currToken),sourceIndex:this.currToken[t.FIELDS.START_POS],spaces:Te}),ue.push(ge)}}while(++this.position<Y);if(z)if(ge)ge.spaces.after=z;else if(!this.options.lossy){var _e=this.tokens[re],Se=this.tokens[this.position-1];ue.push(new o.default({value:"",source:W(_e[t.FIELDS.START_LINE],_e[t.FIELDS.START_COL],Se[t.FIELDS.END_LINE],Se[t.FIELDS.END_COL]),sourceIndex:_e[t.FIELDS.START_POS],spaces:{before:z,after:""}}))}return ue},ie.convertWhitespaceNodesToSpace=function(Y,re){var ue=this;void 0===re&&(re=!1);var z="",ge="";return Y.forEach(function(Te){var _e=ue.lossySpace(Te.spaces.before,re),Se=ue.lossySpace(Te.rawSpaceBefore,re);z+=_e+ue.lossySpace(Te.spaces.after,re&&0===_e.length),ge+=_e+Te.value+ue.lossySpace(Te.rawSpaceAfter,re&&0===Se.length)}),ge===z&&(ge=void 0),{space:z,rawSpace:ge}},ie.isNamedCombinator=function(Y){return void 0===Y&&(Y=this.position),this.tokens[Y+0]&&this.tokens[Y+0][t.FIELDS.TYPE]===c.slash&&this.tokens[Y+1]&&this.tokens[Y+1][t.FIELDS.TYPE]===c.word&&this.tokens[Y+2]&&this.tokens[Y+2][t.FIELDS.TYPE]===c.slash},ie.namedCombinator=function(){if(this.isNamedCombinator()){var Y=this.content(this.tokens[this.position+1]),re=(0,b.unesc)(Y).toLowerCase(),ue={};re!==Y&&(ue.value="/"+Y+"/");var z=new T.default({value:"/"+re+"/",source:W(this.currToken[t.FIELDS.START_LINE],this.currToken[t.FIELDS.START_COL],this.tokens[this.position+2][t.FIELDS.END_LINE],this.tokens[this.position+2][t.FIELDS.END_COL]),sourceIndex:this.currToken[t.FIELDS.START_POS],raws:ue});return this.position=this.position+3,z}this.unexpected()},ie.combinator=function(){var Y=this;if("|"===this.content())return this.namespace();var re=this.locateNextMeaningfulToken(this.position);if(!(re<0||this.tokens[re][t.FIELDS.TYPE]===c.comma||this.tokens[re][t.FIELDS.TYPE]===c.closeParenthesis)){var ue,z=this.currToken,ge=void 0;if(re>this.position&&(ge=this.parseWhitespaceEquivalentTokens(re)),this.isNamedCombinator()?ue=this.namedCombinator():this.currToken[t.FIELDS.TYPE]===c.combinator?(ue=new T.default({value:this.content(),source:V(this.currToken),sourceIndex:this.currToken[t.FIELDS.START_POS]}),this.position++):B[this.currToken[t.FIELDS.TYPE]]||ge||this.unexpected(),ue){if(ge){var Te=this.convertWhitespaceNodesToSpace(ge),Se=Te.rawSpace;ue.spaces.before=Te.space,ue.rawSpaceBefore=Se}}else{var We=this.convertWhitespaceNodesToSpace(ge,!0),Je=We.space,Me=We.rawSpace;Me||(Me=Je);var Ye={},ht={spaces:{}};Je.endsWith(" ")&&Me.endsWith(" ")?(Ye.before=Je.slice(0,Je.length-1),ht.spaces.before=Me.slice(0,Me.length-1)):Je.startsWith(" ")&&Me.startsWith(" ")?(Ye.after=Je.slice(1),ht.spaces.after=Me.slice(1)):ht.value=Me,ue=new T.default({value:" ",source:Z(z,this.tokens[this.position-1]),sourceIndex:z[t.FIELDS.START_POS],spaces:Ye,raws:ht})}return this.currToken&&this.currToken[t.FIELDS.TYPE]===c.space&&(ue.spaces.after=this.optionalSpace(this.content()),this.position++),this.newNode(ue)}var De=this.parseWhitespaceEquivalentTokens(re);if(De.length>0){var pt=this.current.last;if(pt){var ot=this.convertWhitespaceNodesToSpace(De),we=ot.space,Qe=ot.rawSpace;void 0!==Qe&&(pt.rawSpaceAfter+=Qe),pt.spaces.after+=we}else De.forEach(function(gt){return Y.newNode(gt)})}},ie.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;this.current._inferEndPosition();var Y=new h.default({source:{start:R(this.tokens[this.position+1])},sourceIndex:this.tokens[this.position+1][t.FIELDS.START_POS]});this.current.parent.append(Y),this.current=Y,this.position++},ie.comment=function(){var Y=this.currToken;this.newNode(new I.default({value:this.content(),source:V(Y),sourceIndex:Y[t.FIELDS.START_POS]})),this.position++},ie.error=function(Y,re){throw this.root.error(Y,re)},ie.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[t.FIELDS.START_POS]})},ie.missingParenthesis=function(){return this.expected("opening parenthesis",this.currToken[t.FIELDS.START_POS])},ie.missingSquareBracket=function(){return this.expected("opening square bracket",this.currToken[t.FIELDS.START_POS])},ie.unexpected=function(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[t.FIELDS.START_POS])},ie.unexpectedPipe=function(){return this.error("Unexpected '|'.",this.currToken[t.FIELDS.START_POS])},ie.namespace=function(){var Y=this.prevToken&&this.content(this.prevToken)||!0;return this.nextToken[t.FIELDS.TYPE]===c.word?(this.position++,this.word(Y)):this.nextToken[t.FIELDS.TYPE]===c.asterisk?(this.position++,this.universal(Y)):void this.unexpectedPipe()},ie.nesting=function(){if(this.nextToken&&"|"===this.content(this.nextToken))this.position++;else{var Y=this.currToken;this.newNode(new s.default({value:this.content(),source:V(Y),sourceIndex:Y[t.FIELDS.START_POS]})),this.position++}},ie.parentheses=function(){var Y=this.current.last,re=1;if(this.position++,Y&&Y.type===C.PSEUDO){var ue=new h.default({source:{start:R(this.tokens[this.position])},sourceIndex:this.tokens[this.position][t.FIELDS.START_POS]}),z=this.current;for(Y.append(ue),this.current=ue;this.position<this.tokens.length&&re;)this.currToken[t.FIELDS.TYPE]===c.openParenthesis&&re++,this.currToken[t.FIELDS.TYPE]===c.closeParenthesis&&re--,re?this.parse():(this.current.source.end=M(this.currToken),this.current.parent.source.end=M(this.currToken),this.position++);this.current=z}else{for(var ge,Te=this.currToken,_e="(";this.position<this.tokens.length&&re;)this.currToken[t.FIELDS.TYPE]===c.openParenthesis&&re++,this.currToken[t.FIELDS.TYPE]===c.closeParenthesis&&re--,ge=this.currToken,_e+=this.parseParenthesisToken(this.currToken),this.position++;Y?Y.appendToPropertyAndEscape("value",_e,_e):this.newNode(new o.default({value:_e,source:W(Te[t.FIELDS.START_LINE],Te[t.FIELDS.START_COL],ge[t.FIELDS.END_LINE],ge[t.FIELDS.END_COL]),sourceIndex:Te[t.FIELDS.START_POS]}))}if(re)return this.expected("closing parenthesis",this.currToken[t.FIELDS.START_POS])},ie.pseudo=function(){for(var Y=this,re="",ue=this.currToken;this.currToken&&this.currToken[t.FIELDS.TYPE]===c.colon;)re+=this.content(),this.position++;return this.currToken?this.currToken[t.FIELDS.TYPE]!==c.word?this.expected(["pseudo-class","pseudo-element"],this.currToken[t.FIELDS.START_POS]):void this.splitWord(!1,function(z,ge){Y.newNode(new l.default({value:re+=z,source:Z(ue,Y.currToken),sourceIndex:ue[t.FIELDS.START_POS]})),ge>1&&Y.nextToken&&Y.nextToken[t.FIELDS.TYPE]===c.openParenthesis&&Y.error("Misplaced parenthesis.",{index:Y.nextToken[t.FIELDS.START_POS]})}):this.expected(["pseudo-class","pseudo-element"],this.position-1)},ie.space=function(){var Y=this.content();0===this.position||this.prevToken[t.FIELDS.TYPE]===c.comma||this.prevToken[t.FIELDS.TYPE]===c.openParenthesis||this.current.nodes.every(function(re){return"comment"===re.type})?(this.spaces=this.optionalSpace(Y),this.position++):this.position===this.tokens.length-1||this.nextToken[t.FIELDS.TYPE]===c.comma||this.nextToken[t.FIELDS.TYPE]===c.closeParenthesis?(this.current.last.spaces.after=this.optionalSpace(Y),this.position++):this.combinator()},ie.string=function(){var Y=this.currToken;this.newNode(new o.default({value:this.content(),source:V(Y),sourceIndex:Y[t.FIELDS.START_POS]})),this.position++},ie.universal=function(Y){var re=this.nextToken;if(re&&"|"===this.content(re))return this.position++,this.namespace();var ue=this.currToken;this.newNode(new v.default({value:this.content(),source:V(ue),sourceIndex:ue[t.FIELDS.START_POS]}),Y),this.position++},ie.splitWord=function(Y,re){for(var ue=this,z=this.nextToken,ge=this.content();z&&~[c.dollar,c.caret,c.equals,c.word].indexOf(z[t.FIELDS.TYPE]);){this.position++;var Te=this.content();if(ge+=Te,Te.lastIndexOf("\\")===Te.length-1){var _e=this.nextToken;_e&&_e[t.FIELDS.TYPE]===c.space&&(ge+=this.requiredSpace(this.content(_e)),this.position++)}z=this.nextToken}var Se=ne(ge,".").filter(function(Ye){var ht="\\"===ge[Ye-1],De=/^\d+\.\d+%$/.test(ge);return!ht&&!De}),We=ne(ge,"#").filter(function(Ye){return"\\"!==ge[Ye-1]}),Je=ne(ge,"#{");Je.length&&(We=We.filter(function(Ye){return!~Je.indexOf(Ye)}));var Me=(0,a.default)(function(){var Ye=Array.prototype.concat.apply([],arguments);return Ye.filter(function(ht,De){return De===Ye.indexOf(ht)})}([0].concat(Se,We)));Me.forEach(function(Ye,ht){var De,pt=Me[ht+1]||ge.length,ot=ge.slice(Ye,pt);if(0===ht&&re)return re.call(ue,ot,Me.length);var we=ue.currToken,Qe=we[t.FIELDS.START_POS]+Me[ht],gt=W(we[1],we[2]+Ye,we[3],we[2]+(pt-1));if(~Se.indexOf(Ye)){var dt={value:ot.slice(1),source:gt,sourceIndex:Qe};De=new _.default(te(dt,"value"))}else if(~We.indexOf(Ye)){var Ne={value:ot.slice(1),source:gt,sourceIndex:Qe};De=new r.default(te(Ne,"value"))}else{var Nt={value:ot,source:gt,sourceIndex:Qe};te(Nt,"value"),De=new e.default(Nt)}ue.newNode(De,Y),Y=null}),this.position++},ie.word=function(Y){var re=this.nextToken;return re&&"|"===this.content(re)?(this.position++,this.namespace()):this.splitWord(Y)},ie.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.current._inferEndPosition(),this.root},ie.parse=function(Y){switch(this.currToken[t.FIELDS.TYPE]){case c.space:this.space();break;case c.comment:this.comment();break;case c.openParenthesis:this.parentheses();break;case c.closeParenthesis:Y&&this.missingParenthesis();break;case c.openSquare:this.attribute();break;case c.dollar:case c.caret:case c.equals:case c.word:this.word();break;case c.colon:this.pseudo();break;case c.comma:this.comma();break;case c.asterisk:this.universal();break;case c.ampersand:this.nesting();break;case c.slash:case c.combinator:this.combinator();break;case c.str:this.string();break;case c.closeSquare:this.missingSquareBracket();case c.semicolon:this.missingBackslash();default:this.unexpected()}},ie.expected=function(Y,re,ue){if(Array.isArray(Y)){var z=Y.pop();Y=Y.join(", ")+" or "+z}var ge=/^[aeiou]/.test(Y[0])?"an":"a";return this.error(ue?"Expected "+ge+" "+Y+', found "'+ue+'" instead.':"Expected "+ge+" "+Y+".",{index:re})},ie.requiredSpace=function(Y){return this.options.lossy?" ":Y},ie.optionalSpace=function(Y){return this.options.lossy?"":Y},ie.lossySpace=function(Y,re){return this.options.lossy?re?" ":"":Y},ie.parseParenthesisToken=function(Y){var re=this.content(Y);return Y[t.FIELDS.TYPE]===c.space?this.requiredSpace(re):re},ie.newNode=function(Y,re){return re&&(/^ +$/.test(re)&&(this.options.lossy||(this.spaces=(this.spaces||"")+re),re=!0),Y.namespace=re,te(Y,"namespace")),this.spaces&&(Y.spaces.before=this.spaces,this.spaces=""),this.current.append(Y)},ie.content=function(Y){return void 0===Y&&(Y=this.currToken),this.css.slice(Y[t.FIELDS.START_POS],Y[t.FIELDS.END_POS])},ie.locateNextMeaningfulToken=function(Y){void 0===Y&&(Y=this.position+1);for(var re=Y;re<this.tokens.length;){if(!G[this.tokens[re][t.FIELDS.TYPE]])return re;re++}return-1},pe=H,(ke=[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}])&&function O(H,pe){for(var ke=0;ke<pe.length;ke++){var ie=pe[ke];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(H,ie.key,ie)}}(pe.prototype,ke),Object.defineProperty(pe,"prototype",{writable:!1}),H}();E.default=me,K.exports=E.default},5205:(K,E,g)=>{g.d(E,{ADMIN:()=>os,ALLID:()=>$t.BG,AccessTracker:()=>Vo.J,AddGhostConcept:()=>qr,Anomaly:()=>pn,BaseUrl:()=>r.B,BinaryTree:()=>Si.W,BuildWidgetFromId:()=>oo.Cp,BuilderStatefulWidget:()=>Zo,Composition:()=>qo,CompositionBinaryTree:()=>wo,CompositionNode:()=>Bi,Concept:()=>ys.j,ConceptsData:()=>I.I,Connection:()=>ie.N,ConnectionData:()=>ro.d,CountInfo:()=>Fs.y,CreateComposition:()=>me.A,CreateConnection:()=>no.d,CreateConnectionBetweenEntityLocal:()=>Xi,CreateConnectionBetweenTwoConcepts:()=>Me,CreateConnectionBetweenTwoConceptsGeneral:()=>ht,CreateConnectionBetweenTwoConceptsLocal:()=>$i.h,CreateData:()=>wi,CreateDefaultConcept:()=>re.o,CreateDefaultLConcept:()=>Ri.u,CreateSession:()=>Rr,CreateSessionVisit:()=>Gr,CreateTheCompositionLocal:()=>H.R,CreateTheCompositionWithCache:()=>zo,CreateTheConnection:()=>gt.q,CreateTheConnectionGeneral:()=>Te,CreateTheConnectionLocal:()=>no.F,DATAID:()=>$t.y0,DATAIDDATE:()=>$t.iw,DATAV2:()=>$t.pU,DelayFunctionExecution:()=>ns,DeleteConceptById:()=>Ai,DeleteConceptLocal:()=>Xr,DeleteConnectionById:()=>_e.m,DeleteConnectionByIdBulk:()=>_e.E,DeleteConnectionByType:()=>Mo.$S,DeleteConnectionByTypeBulk:()=>Mo.L0,DeleteUser:()=>fr,DependencyObserver:()=>ho.w,Environments:()=>or,FilterSearch:()=>yi,FormatFromConnections:()=>To.vw,FormatFromConnectionsAltered:()=>To.y8,FreeschemaQuery:()=>Vn,FreeschemaQueryApi:()=>vi,GetAllConnectionsOfComposition:()=>ne.s,GetAllConnectionsOfCompositionBulk:()=>v.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>Mo.WC,GetComposition:()=>s.Nj,GetCompositionBulk:()=>_n.dF,GetCompositionBulkWithDataId:()=>_n.cw,GetCompositionFromConnectionsWithDataId:()=>_n.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>_n.km,GetCompositionFromConnectionsWithDataIdInObject:()=>_n.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>_n.Nt,GetCompositionFromConnectionsWithIndex:()=>_n.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>_n.hG,GetCompositionFromMemoryWithConnections:()=>s.JA,GetCompositionList:()=>C,GetCompositionListAll:()=>b,GetCompositionListAllWithId:()=>m,GetCompositionListListener:()=>ds,GetCompositionListLocal:()=>Z,GetCompositionListLocalWithId:()=>te,GetCompositionListWithId:()=>L,GetCompositionListWithIdUpdated:()=>A,GetCompositionListener:()=>cs,GetCompositionLocal:()=>R,GetCompositionLocalWithId:()=>M,GetCompositionWithAllIds:()=>s.Mb,GetCompositionWithCache:()=>Br,GetCompositionWithDataIdBulk:()=>Ur,GetCompositionWithDataIdWithCache:()=>Ui,GetCompositionWithId:()=>s.yz,GetCompositionWithIdAndDateFromMemory:()=>s.Ez,GetConceptBulk:()=>Bo.r,GetConceptByCharacter:()=>a.A,GetConceptByCharacterAndCategoryLocal:()=>t.$I,GetConceptByCharacterAndType:()=>dt.A,GetConnectionBetweenTwoConceptsLinker:()=>ts,GetConnectionBulk:()=>li.j,GetConnectionById:()=>vr,GetConnectionDataPrefetch:()=>_n.QL,GetConnectionOfTheConcept:()=>ke,GetConnectionTypeForCount:()=>zi.V,GetFreeschemaImage:()=>ra,GetFreeschemaImageUrl:()=>sa,GetImageApi:()=>rr,GetLink:()=>Nt,GetLinkListListener:()=>ps,GetLinkListener:()=>us.d,GetLinkRaw:()=>ut,GetLinkerConnectionFromConcepts:()=>Co,GetLinkerConnectionToConcepts:()=>hr,GetRelation:()=>Mi,GetRelationLocal:()=>Jr,GetRelationRaw:()=>Vr,GetTheConcept:()=>Se.A,GetTheConceptLocal:()=>Wi.f,GetUserGhostId:()=>Hr,JUSTDATA:()=>$t.ZJ,LConcept:()=>gs,LConnection:()=>vs,LISTNORMAL:()=>$t.SL,LocalConceptsData:()=>T.v,LocalSyncData:()=>bo.H,LocalTransaction:()=>Zi,LogEvent:()=>Os,Logger:()=>Ue.V,LoginToBackend:()=>Sr,MakeTheInstanceConcept:()=>We.A,MakeTheInstanceConceptLocal:()=>De.k,MakeTheTimestamp:()=>mr,MakeTheTypeConceptApi:()=>un,MakeTheTypeConceptLocal:()=>wt.$,NORMAL:()=>$t.yv,PRIVATE:()=>is,PUBLIC:()=>rs,PatcherStructure:()=>ms,Prototype:()=>na,RAW:()=>$t.XZ,RecursiveSearchApi:()=>Cr,RecursiveSearchApiNewRawFullLinker:()=>Tr,RecursiveSearchApiRaw:()=>Li,RecursiveSearchApiRawFullLinker:()=>wr,RecursiveSearchApiWithInternalConnections:()=>_r,RecursiveSearchListener:()=>hs,SchemaQuery:()=>xs,SchemaQueryListener:()=>Ro,SearchAllConcepts:()=>Fr,SearchLinkInternal:()=>Yr,SearchLinkInternalAll:()=>Kr,SearchLinkMultipleAll:()=>To.cf,SearchLinkMultipleAllObservable:()=>qi,SearchLinkMultipleApi:()=>h.j,SearchQuery:()=>_o,SearchStructure:()=>_s,SearchWithLinker:()=>Or,SearchWithTypeAndLinker:()=>po.zl,SearchWithTypeAndLinkerApi:()=>Hi,Selector:()=>Ds,SessionData:()=>Cs,Signin:()=>Nr,Signup:()=>Ar,SignupEntity:()=>Lr,SplitStrings:()=>_.f,StatefulWidget:()=>gi,SyncData:()=>Y.Y,TrashTheConcept:()=>yr,UpdateComposition:()=>Er,UpdateCompositionLocal:()=>zr.D,UserBinaryTree:()=>ui,Validator:()=>As,ViewInternalData:()=>Vi,ViewInternalDataApi:()=>ji,WidgetTree:()=>Ki,convertFromConceptToLConcept:()=>hi.F4,convertFromLConceptToConcept:()=>hi.dp,convertWidgetTreeToWidget:()=>Yo,convertWidgetTreeToWidgetWithWrapper:()=>tr,createFormFieldData:()=>Ls,createPrototypeLocal:()=>ir,dispatchIdEvent:()=>da,getFromDatabaseWithType:()=>we,getObjectsFromIndexDb:()=>Qe,getUploadFileLimit:()=>kr,getUserDetails:()=>Es.s,getWidgetBulkFromId:()=>ko,getWidgetFromId:()=>Js,handleServiceWorkerException:()=>ln,hasActivatedSW:()=>ar,importLatestWidget:()=>js,importRecentWidget:()=>Vs,init:()=>ca,orderTheConnections:()=>fs.X,recursiveFetch:()=>s.zN,recursiveFetchNew:()=>Po,removeAllChildren:()=>er,renderImportedWidget:()=>$s,renderLatestWidget:()=>Ci,renderPage:()=>Ws,renderWidget:()=>Hs,searchLinkMultipleListener:()=>ss,sendEmail:()=>ks,sendMessage:()=>tn,serviceWorker:()=>Dt,setHasActivatedSW:()=>aa,storeToDatabase:()=>ot,subscribedListeners:()=>sr,unwrapContainers:()=>nr,updateAccessToken:()=>cr,uploadAttachment:()=>br,uploadFile:()=>Fi,uploadImage:()=>Ei,uploadImageV2:()=>Ir,validDocumentFormats:()=>xi,validImageFormats:()=>Ni}),g.r(E);var S={};g.r(S),g.d(S,{ADMIN:()=>os,ALLID:()=>$t.BG,AccessTracker:()=>Vo.J,AddGhostConcept:()=>qr,Anomaly:()=>pn,BaseUrl:()=>r.B,BinaryTree:()=>Si.W,BuildWidgetFromId:()=>oo.Cp,BuilderStatefulWidget:()=>Zo,Composition:()=>qo,CompositionBinaryTree:()=>wo,CompositionNode:()=>Bi,Concept:()=>ys.j,ConceptsData:()=>I.I,Connection:()=>ie.N,ConnectionData:()=>ro.d,CountInfo:()=>Fs.y,CreateComposition:()=>me.A,CreateConnection:()=>no.d,CreateConnectionBetweenEntityLocal:()=>Xi,CreateConnectionBetweenTwoConcepts:()=>Me,CreateConnectionBetweenTwoConceptsGeneral:()=>ht,CreateConnectionBetweenTwoConceptsLocal:()=>$i.h,CreateData:()=>wi,CreateDefaultConcept:()=>re.o,CreateDefaultLConcept:()=>Ri.u,CreateSession:()=>Rr,CreateSessionVisit:()=>Gr,CreateTheCompositionLocal:()=>H.R,CreateTheCompositionWithCache:()=>zo,CreateTheConnection:()=>gt.q,CreateTheConnectionGeneral:()=>Te,CreateTheConnectionLocal:()=>no.F,DATAID:()=>$t.y0,DATAIDDATE:()=>$t.iw,DATAV2:()=>$t.pU,DelayFunctionExecution:()=>ns,DeleteConceptById:()=>Ai,DeleteConceptLocal:()=>Xr,DeleteConnectionById:()=>_e.m,DeleteConnectionByIdBulk:()=>_e.E,DeleteConnectionByType:()=>Mo.$S,DeleteConnectionByTypeBulk:()=>Mo.L0,DeleteUser:()=>fr,DependencyObserver:()=>ho.w,Environments:()=>or,FilterSearch:()=>yi,FormatFromConnections:()=>To.vw,FormatFromConnectionsAltered:()=>To.y8,FreeschemaQuery:()=>Vn,FreeschemaQueryApi:()=>vi,GetAllConnectionsOfComposition:()=>ne.s,GetAllConnectionsOfCompositionBulk:()=>v.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>Mo.WC,GetComposition:()=>s.Nj,GetCompositionBulk:()=>_n.dF,GetCompositionBulkWithDataId:()=>_n.cw,GetCompositionFromConnectionsWithDataId:()=>_n.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>_n.km,GetCompositionFromConnectionsWithDataIdInObject:()=>_n.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>_n.Nt,GetCompositionFromConnectionsWithIndex:()=>_n.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>_n.hG,GetCompositionFromMemoryWithConnections:()=>s.JA,GetCompositionList:()=>C,GetCompositionListAll:()=>b,GetCompositionListAllWithId:()=>m,GetCompositionListListener:()=>ds,GetCompositionListLocal:()=>Z,GetCompositionListLocalWithId:()=>te,GetCompositionListWithId:()=>L,GetCompositionListWithIdUpdated:()=>A,GetCompositionListener:()=>cs,GetCompositionLocal:()=>R,GetCompositionLocalWithId:()=>M,GetCompositionWithAllIds:()=>s.Mb,GetCompositionWithCache:()=>Br,GetCompositionWithDataIdBulk:()=>Ur,GetCompositionWithDataIdWithCache:()=>Ui,GetCompositionWithId:()=>s.yz,GetCompositionWithIdAndDateFromMemory:()=>s.Ez,GetConceptBulk:()=>Bo.r,GetConceptByCharacter:()=>a.A,GetConceptByCharacterAndCategoryLocal:()=>t.$I,GetConceptByCharacterAndType:()=>dt.A,GetConnectionBetweenTwoConceptsLinker:()=>ts,GetConnectionBulk:()=>li.j,GetConnectionById:()=>vr,GetConnectionDataPrefetch:()=>_n.QL,GetConnectionOfTheConcept:()=>ke,GetConnectionTypeForCount:()=>zi.V,GetFreeschemaImage:()=>ra,GetFreeschemaImageUrl:()=>sa,GetImageApi:()=>rr,GetLink:()=>Nt,GetLinkListListener:()=>ps,GetLinkListener:()=>us.d,GetLinkRaw:()=>ut,GetLinkerConnectionFromConcepts:()=>Co,GetLinkerConnectionToConcepts:()=>hr,GetRelation:()=>Mi,GetRelationLocal:()=>Jr,GetRelationRaw:()=>Vr,GetTheConcept:()=>Se.A,GetTheConceptLocal:()=>Wi.f,GetUserGhostId:()=>Hr,JUSTDATA:()=>$t.ZJ,LConcept:()=>gs,LConnection:()=>vs,LISTNORMAL:()=>$t.SL,LocalConceptsData:()=>T.v,LocalSyncData:()=>bo.H,LocalTransaction:()=>Zi,LogEvent:()=>Os,Logger:()=>Ue.V,LoginToBackend:()=>Sr,MakeTheInstanceConcept:()=>We.A,MakeTheInstanceConceptLocal:()=>De.k,MakeTheTimestamp:()=>mr,MakeTheTypeConceptApi:()=>un,MakeTheTypeConceptLocal:()=>wt.$,NORMAL:()=>$t.yv,PRIVATE:()=>is,PUBLIC:()=>rs,PatcherStructure:()=>ms,Prototype:()=>na,RAW:()=>$t.XZ,RecursiveSearchApi:()=>Cr,RecursiveSearchApiNewRawFullLinker:()=>Tr,RecursiveSearchApiRaw:()=>Li,RecursiveSearchApiRawFullLinker:()=>wr,RecursiveSearchApiWithInternalConnections:()=>_r,RecursiveSearchListener:()=>hs,SchemaQuery:()=>xs,SchemaQueryListener:()=>Ro,SearchAllConcepts:()=>Fr,SearchLinkInternal:()=>Yr,SearchLinkInternalAll:()=>Kr,SearchLinkMultipleAll:()=>To.cf,SearchLinkMultipleAllObservable:()=>qi,SearchLinkMultipleApi:()=>h.j,SearchQuery:()=>_o,SearchStructure:()=>_s,SearchWithLinker:()=>Or,SearchWithTypeAndLinker:()=>po.zl,SearchWithTypeAndLinkerApi:()=>Hi,Selector:()=>Ds,SessionData:()=>Cs,Signin:()=>Nr,Signup:()=>Ar,SignupEntity:()=>Lr,SplitStrings:()=>_.f,StatefulWidget:()=>gi,SyncData:()=>Y.Y,TrashTheConcept:()=>yr,UpdateComposition:()=>Er,UpdateCompositionLocal:()=>zr.D,UserBinaryTree:()=>ui,Validator:()=>As,ViewInternalData:()=>Vi,ViewInternalDataApi:()=>ji,WidgetTree:()=>Ki,convertFromConceptToLConcept:()=>hi.F4,convertFromLConceptToConcept:()=>hi.dp,convertWidgetTreeToWidget:()=>Yo,convertWidgetTreeToWidgetWithWrapper:()=>tr,createFormFieldData:()=>Ls,createPrototypeLocal:()=>ir,dispatchIdEvent:()=>da,getFromDatabaseWithType:()=>we,getObjectsFromIndexDb:()=>Qe,getUploadFileLimit:()=>kr,getUserDetails:()=>Es.s,getWidgetBulkFromId:()=>ko,getWidgetFromId:()=>Js,handleServiceWorkerException:()=>ln,hasActivatedSW:()=>ar,importLatestWidget:()=>js,importRecentWidget:()=>Vs,init:()=>ca,orderTheConnections:()=>fs.X,recursiveFetch:()=>s.zN,recursiveFetchNew:()=>Po,removeAllChildren:()=>er,renderImportedWidget:()=>$s,renderLatestWidget:()=>Ci,renderPage:()=>Ws,renderWidget:()=>Hs,searchLinkMultipleListener:()=>ss,sendEmail:()=>ks,sendMessage:()=>tn,serviceWorker:()=>Dt,setHasActivatedSW:()=>aa,storeToDatabase:()=>ot,subscribedListeners:()=>sr,unwrapContainers:()=>nr,updateAccessToken:()=>cr,uploadAttachment:()=>br,uploadFile:()=>Fi,uploadImage:()=>Ei,uploadImageV2:()=>Ir,validDocumentFormats:()=>xi,validImageFormats:()=>Ni});var N=g(5020),n=g(205),h=g(2832),_=g(6467),I=g(3026),r=g(9581),e=g(3518),o=g(1863),l=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function f(D,d){var i=arguments;return l(this,void 0,void 0,function*(){const p=Ue.V.logfunction("GetAllConceptsByType",i);try{var w=new URLSearchParams;w.append("type",D),w.append("user_id",d.toString());var k=(0,e.Xr)("application/x-www-form-urlencoded");const P=yield fetch(r.B.GetAllConceptsByTypeUrl(),{method:"POST",headers:k,body:w});if(P.ok){const x=yield P.json();for(var F=0;F<x.length;F++)I.I.AddConcept(x[F])}else console.log("GetAllConceptsByType error",P.status),(0,o.ry)(P)}catch(P){P instanceof Error?console.log("GetAllConceptsByType error message: ",P.message):console.log("GetAllConceptsByType unexpected error: ",P),(0,o.Mb)(P,r.B.GetAllConceptsByTypeUrl()),(0,o.ey)(p,"GetAllConceptsByType",P)}})}var v=g(8642),T=g(9736),s=g(8939),a=g(2013),t=g(8064),c=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function C(D,d){var i=arguments;return c(this,arguments,void 0,function*(p,w,k=10,F=1){const P=Ue.V.logfunction("GetCompositionList",i)||{};if(Dt){P.serviceWorker=!0;try{const u=yield tn("GetCompositionList",{compositionName:p,userId:w,inpage:k,page:F});return Ue.V.logUpdate(P),u.data}catch(u){console.error("GetCompositionList sw error: ",u),(0,o.ey)(P,"GetCompositionList",u),ln(u)}}let x=yield(0,a.A)(p),y=[];if(x){yield f(p,w);let u=yield I.I.GetConceptsByTypeIdAndUser(x.id,w),U=k*(F-1),j=[];for(let J=U;J<U+k;J++)u[J]&&j.push(u[J].id);yield(0,v.Y)(j);for(let J=U;J<U+k;J++)if(u[J]){let q=yield(0,s.kx)(u[J].id);y.push(q)}}return Ue.V.logUpdate(P),y})}function b(D,d){return c(this,arguments,void 0,function*(i,p,w=10,k=1){let F=Z(i,p),P=C(i,p),x=[];return Promise.race([F,P]).then(y=>{console.log("Promise result",y),x.push(...y)}).catch(y=>{console.log("error in handling",y)}),P.then(y=>{console.log("This is the second promise result",y),x.push(...y)}),x})}function m(D,d){return c(this,arguments,void 0,function*(i,p,w=10,k=1){if(Dt)try{return(yield tn("GetCompositionListAllWithId",{compositionName:i,userId:p,inpage:w,page:k})).data}catch(J){console.error("GetCompositionListAllWithId sw error: ",J),ln(J)}let F=yield(0,t.Ay)(i),P=yield(0,a.A)(i),x=[],y=[],u=[],U=[];0!=F.id&&(y=yield T.v.GetConceptsByTypeIdAndUser(F.id,p)),0!=P.id&&(yield f(i,p),U=yield I.I.GetConceptsByTypeIdAndUser(P.id,p),x=U);for(let J=0;J<y.length;J++){let q=!1;for(let se=0;se<U.length;se++)y[J].ghostId==U[se].ghostId&&(q=!0);q||u.push(y[J])}console.log("This is the all list",u);let j=[];return j=yield function(J,q){return c(this,arguments,void 0,function*(se,Ie,Re=10,Ke=1){let Fe=[],tt=Re*(Ke-1),kt=[],zt=Ie.length;for(let Mt=tt;Mt<tt+Re-zt;Mt++)se[Mt]&&kt.push(se[Mt].id);for(let Mt=0;Mt<Ie.length;Mt++){let ct=yield M(Ie[Mt].id);Fe.push(ct)}yield(0,v.Y)(kt);for(let Mt=tt;Mt<tt+Re-zt;Mt++)if(se[Mt]){let ct=yield(0,s.RW)(se[Mt].id);Fe.push(ct)}return Fe})}(x,u,w,k),j})}function L(D,d){return c(this,arguments,void 0,function*(i,p,w=10,k=1){if(Dt)try{return(yield tn("GetCompositionListWithId",{compositionName:i,userId:p,inpage:w,page:k})).data}catch(x){console.error("GetCompositionListWithId sw error: ",x),ln(x)}let F=yield(0,a.A)(i),P=[];if(F){yield f(i,p);let x=yield I.I.GetConceptsByTypeIdAndUser(F.id,p),y=w*(k-1),u=[];for(let U=y;U<y+w;U++)x[U]&&u.push(x[U].id);yield(0,v.Y)(u);for(let U=y;U<y+w;U++)if(x[U]){let j=yield(0,s.RW)(x[U].id);P.push(j)}}return P})}function A(D,d){return c(this,arguments,void 0,function*(i,p,w=10,k=1){let F=yield(0,a.w)(i),P=[];if(F){yield f(i,p);let x=yield I.I.GetConceptsByTypeIdAndUser(F.id,p),y=w*(k-1),u=[];for(let U=y;U<y+w;U++)x[U]&&u.push(x[U].id);yield(0,v.Y)(u);for(let U=y;U<y+w;U++)if(x[U]){let j=yield(0,s.RW)(x[U].id);P.push(j)}}return P})}var O=g(4864),B=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},G=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function R(D){return G(this,void 0,void 0,function*(){var d,i;try{if(Dt)try{return(yield tn("GetCompositionLocal",{id:D})).data}catch(x){console.error("GetCompositionLocal error sw: ",x),ln(x)}let p=[],w={};p=yield O.G.GetConnectionsOfCompositionLocal(D);let k=[];for(let x=0;x<p.length;x++)k.includes(p[x].ofTheConceptId)||k.push(p[x].ofTheConceptId);let F=yield T.v.GetConcept(D);if(0==F.id){let x=yield function(y){var u=arguments;return B(this,void 0,void 0,function*(){const U=Ue.V.logfunction("TranslateLocalToReal",u);let j=(0,re.o)();try{var J=(0,e.ab)("application/x-www-form-urlencoded");const q=yield fetch(r.B.GetRealConceptById(),{method:"POST",headers:J,body:`id=${y}`});if(q.ok)return j=yield q.json(),j.id>0&&I.I.AddConcept(j),j;console.log("Error in Getting Translating concept Error",q.status),(0,o.ry)(q),Ue.V.logUpdate(U)}catch(q){q instanceof Error?console.log("Error in Getting Translating concept error message: ",q):console.log("Error in Getting Translating concept unexpected error: ",q),(0,o.Mb)(q,r.B.GetRealConceptById()),(0,o.ey)(U,"TranslateLocalToReal",q)}return j})}(D);if(x.id>0)return yield(0,s.Nj)(x.id)}let P=yield W(D,p,k);return w[null!==(i=null===(d=F?.type)||void 0===d?void 0:d.characterValue)&&void 0!==i?i:"top"]=P,w}catch(p){throw p}})}function M(D){return G(this,void 0,void 0,function*(){var d,i;try{if(Dt)try{return(yield tn("GetCompositionLocalWithId",{id:D})).data}catch(x){console.error("GetCompositionLocalWithId error sw: ",x),ln(x)}let p=[],w={},k={};p=yield O.G.GetConnectionsOfCompositionLocal(D);let F=[];for(let x=0;x<p.length;x++)F.includes(p[x].ofTheConceptId)||F.push(p[x].ofTheConceptId);let P=yield T.v.GetConcept(D);if(0!=P.id){let x=yield W(D,p,F);w[null!==(i=null===(d=P?.type)||void 0===d?void 0:d.characterValue)&&void 0!==i?i:"top"]=x}return k.data=w,k.id=D,k}catch(p){throw p}})}function W(D,d,i){return G(this,arguments,void 0,function*(p,w,k,F=[]){var x,y;let u={},U=[],j=yield T.v.GetConcept(p);if(0!=j.id&&null==j.type){let J=j.typeId,q=yield T.v.GetConcept(J);j.type=q}if(!k.includes(p))return j?.characterValue;if(F.includes(p))return"";F.push(p);for(let J=0;J<w.length;J++)if(w[J].ofTheConceptId==p){let q=w[J].toTheConceptId,se=yield T.v.GetConcept(q);if(0!=se.id&&null==se?.type){let Ke=se.typeId,Fe=yield T.v.GetConcept(Ke);se.type=Fe}let Re=(null!==(y=null===(x=se?.type)||void 0===x?void 0:x.characterValue)&&void 0!==y?y:"top").replace("the_","");if(isNaN(Number(Re))){if(Re){const Ke=yield W(q,w,k);u[Re]=Ke}}else{const Ke=yield W(q,w,k);U[Re]=Ke,u=U}}return u})}var V=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Z(D,d){return V(this,void 0,void 0,function*(){if(Dt)try{return(yield tn("GetCompositionListLocal",{compositionName:D,userId:d})).data}catch(i){console.error("GetCompositionListLocal error sw: ",i),ln(i)}try{let i=yield(0,t.Ay)(D),p=[];if(0!=i.id){let w=yield T.v.GetConceptsByTypeIdAndUser(i.id,d);for(let k=0;k<w.length;k++){let F=yield R(w[k].id);p.push(F)}}return p}catch(i){throw i}})}function te(D,d){return V(this,void 0,void 0,function*(){if(Dt)try{return(yield tn("GetCompositionListLocalWithId",{compositionName:D,userId:d})).data}catch(i){console.error("GetCompositionListLocalWithId error sw: ",i),ln(i)}try{let i=yield(0,t.Ay)(D),p=[];if(0!=i.id){let w=yield T.v.GetConceptsByTypeIdAndUser(i.id,d);for(let k=0;k<w.length;k++){let F=yield M(w[k].id);p.push(F)}}return p}catch(i){throw i}})}var ne=g(2),me=g(1218),H=g(999),pe=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function ke(D,d,i){var p=arguments;return pe(this,arguments,void 0,function*(w,k,F,P=10,x=1){const y=Ue.V.logfunction("GetConnectionOfTheConcept",p)||{};let u=[];try{if(Dt){y.serviceWorker=!0;try{const q=yield tn("GetConnectionOfTheConcept",{typeId:w,ofTheConceptId:k,userId:F,inpage:P,page:x});return Ue.V.logUpdate(y),q.data}catch(q){console.error("GetConnectionOfTheConcept sw error: ",q),(0,o.ey)(y,"GetConnectionOfTheConcept",q),ln(q)}}let U=new URLSearchParams;U.append("typeId",`${w}`),U.append("ofTheConceptId",`${k}`),U.append("userId",`${F}`),U.append("inpage",`${P}`),U.append("page",`${x}`);let j=(0,e.Xr)("application/x-www-form-urlencoded");const J=yield fetch(r.B.GetAllConnectionsOfConceptUrl(),{method:"POST",headers:j,body:U});return J.ok?u=yield J.json():((0,o.ey)(y,"GetConnectionOfTheConcept",J.status),(0,o.ry)(J),console.log("Get connection of concept error",J.status)),Ue.V.logUpdate(y),u}catch(U){U instanceof Error?console.log("Get connection of concept  error message: ",U.message):console.log("Get connection of concept unexpected error: ",U),(0,o.Mb)(U,r.B.GetAllConnectionsOfConceptUrl()),(0,o.ey)(y,"GetConnectionOfTheConcept",U)}})}var ie=g(2155),Y=g(442),re=g(7282),ue=g(5976),z=g(7273),ge=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Te(D,d,i,p){return ge(this,arguments,void 0,function*(w,k,F,P,x=1,y=4){if(w>0&&F>0){var u=k,U=yield ue.p.getId(),j=new ie.N(U,w,F,u,P,x,y);return w==F?(j.ofTheConceptId=0,j.toTheConceptId=1,j):(j.toUpdate=!0,j.isTemp=!1,Y.Y.AddConnection(j),j)}throw new z.z("cannot create connection because id are negative ",!1,400,"")})}var _e=g(4818),Se=g(7876),We=g(8407),Je=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Me(D,d,i){return Je(this,arguments,void 0,function*(p,w,k,F=!1,P=!1){var x,y;if(Dt)try{return(yield tn("CreateConnectionBetweenTwoConcepts",{ofTheConcept:p,toTheConcept:w,linker:k,both:F,count:P})).data}catch(se){console.error("CreateConnectionBetweenTwoConcepts sw error: ",se),ln(se)}let u=p.userId;if(F){let se=k+"_by",Ie=(null===(x=w.type)||void 0===x?void 0:x.characterValue)+"_s_"+se;P&&(yield Ye(se,w,u));let Re=yield(0,We.A)("connection",Ie,!1,999,999,999),Ke=new ie.N(0,w.id,p.id,u,Re.id,1e3,4);Y.Y.AddConnection(Ke)}let U=k+"_s",j=(null===(y=p.type)||void 0===y?void 0:y.characterValue)+"_s_"+U;P&&(yield Ye(U,p,u));let J=yield(0,We.A)("connection",j,!1,999,999,999),q=new ie.N(0,p.id,w.id,u,J.id,1e3,4);return Y.Y.AddConnection(q),q})}function Ye(D,d){return Je(this,arguments,void 0,function*(i,p,w=null){var k;let F=p,P=w??p.userId,y=(null===(k=p.type)||void 0===k?void 0:k.characterValue)+"_s_"+i+"_count",u=yield(0,We.A)("connection",y,!1,P,4,999),U=yield ke(u.id,p.id,P,10,1),j=[],J=(0,re.o)();for(let se=0;se<U.length;se++){let Ie=yield(0,Se.A)(U[se].toTheConceptId);j.push(Ie)}if(j.length<1)J=yield(0,We.A)("count","1",!1,P,4,999);else{let se=j[0],Ie=0;try{Ie=Number(se.characterValue)}catch{Ie=0}Ie+=1,J=yield(0,We.A)("count",Ie.toString(),!1,P,4,999);for(let Re=0;Re<U.length;Re++)(0,_e.m)(U[Re].id)}let q=new ie.N(0,F.id,J.id,F.userId,u.id,1e3,4);yield Y.Y.AddConnection(q)})}function ht(D,d,i){return Je(this,arguments,void 0,function*(p,w,k,F=!1,P=!1){var x,y;let u=p.userId;if(F){let q=k+"_by",se=(null===(x=w.type)||void 0===x?void 0:x.characterValue)+"_s_"+q;P&&(yield Ye(q,w,u));let Ie=yield(0,We.A)("connection",se,!1,999,999,999),Re=new ie.N(0,w.id,p.id,u,Ie.id,1e3,4);Y.Y.AddConnection(Re)}let U=k+"_s",j=(null===(y=p.type)||void 0===y?void 0:y.characterValue)+"_s_"+U;P&&(yield Ye(U,p,u));let J=yield(0,We.A)("connection",j,!1,999,999,999);return yield Te(p.id,p.userId,w.id,J.id,1e3,4)})}var De=g(5868),pt=(g(3655),function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})});function ot(D,d){const i=Ue.V.logfunction("storeToDatabase",[D,"noindexdb"]);Ue.V.logUpdate(i)}function we(D,d,i){return pt(this,void 0,void 0,function*(){const p=Ue.V.logfunction("getFromDatabaseWithType",[D,"noindexdb"]);Ue.V.logUpdate(p)})}function Qe(D){return pt(this,void 0,void 0,function*(){const d=Ue.V.logfunction("getObjectsFromIndexDb",[D,"noindexdb"]);Ue.V.logUpdate(d)})}var gt=g(1666),dt=g(4402),Ne=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Nt(D,d){var i=arguments;return Ne(this,arguments,void 0,function*(p,w,k=10,F=1){var P;const x=Ue.V.logfunction("GetLink",i)||{};if(Dt){x.serviceWorker=!0;try{const J=yield tn("GetLink",{id:p,linker:w,inpage:k,page:F});return Ue.V.logUpdate(x),J.data}catch(J){console.error("GetLink sw error: ",J),(0,o.ey)(x,"GetLink",J),ln(J)}}let y=[],u=yield(0,Se.A)(p),U=(null===(P=u.type)||void 0===P?void 0:P.characterValue)+"_s_"+w,j=yield(0,dt.A)(U,16);if(j.id>0){let J=yield ke(j.id,u.id,u.userId,k,F),q=[];for(let se=0;se<J.length;se++)q.push(J[se].toTheConceptId);yield(0,v.Y)(q);for(let se=0;se<J.length;se++){let Ie=J[se].toTheConceptId,Re=yield(0,Se.A)(Ie),Ke=yield(0,s.Ez)(Re.id);y.push(Ke)}}return Ue.V.logUpdate(x),y})}function ut(D,d){var i=arguments;return Ne(this,arguments,void 0,function*(p,w,k=10,F=1){var P;const x=Ue.V.logfunction("GetLinkRaw",i);let y=[],u=yield(0,Se.A)(p),U=(null===(P=u.type)||void 0===P?void 0:P.characterValue)+"_s_"+w,j=yield(0,dt.A)(U,16);if(j.id>0){let J=yield ke(j.id,u.id,u.userId,k,F),q=[];for(let se=0;se<J.length;se++)q.push(J[se].toTheConceptId);for(let se=0;se<J.length;se++){let Ie=J[se].toTheConceptId,Re=yield(0,Se.A)(Ie);y.push(Re)}}return Ue.V.logUpdate(x),y})}var wt=g(8357),ft=g(843),Tt=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};const en=new Map;function un(D,d){var i=arguments;return Tt(this,void 0,void 0,function*(){const p=Ue.V.logfunction("MakeTheTypeConceptApi",i);let w=(0,re.o)();if(en.has(D))return en.get(D)||w;const k=(()=>Tt(this,void 0,void 0,function*(){try{if(w=yield(0,ft.Az)(D),0==w.id||4==w.typeId){let F=(0,e.Xr)("application/x-www-form-urlencoded");const P=yield fetch(r.B.MakeTheTypeConceptUrl(),{method:"POST",headers:F,body:`type=${D}`});if(!P.ok)throw(0,o.ry)(P),new Error(`Error! status: ${P.status}`);w=yield P.json(),Ue.V.logUpdate(p)}}catch(F){F instanceof Error?console.log("Make The Type Concept Api error : ",F.message):console.log("Make The Type Concept Api error : ",F),(0,o.Mb)(F,r.B.MakeTheTypeConceptUrl()),(0,o.ey)(p,"MakeTheTypeConceptApi",F)}finally{en.delete(D)}return w}))();return en.set(D,k),k})}var kn=g(8675),Nn=g(6058),mo=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Co(D){var d=arguments;return mo(this,void 0,void 0,function*(){const i=Ue.V.logfunction("GetLinkerConnectionFromConcepts",d);let p=yield(0,kn.l)(D);for(let w=0;w<p.length;w++){let k=p[w],F=k.typeId,P=yield(0,Se.A)(F);k.type=P}return Ue.V.logUpdate(i),p})}function hr(D){var d=arguments;return mo(this,void 0,void 0,function*(){const i=Ue.V.logfunction("GetLinkerConnectionToConcepts",d);let p=yield(0,Nn.W)(D);for(let w=0;w<p.length;w++){let k=p[w],F=k.typeId,P=yield(0,Se.A)(F);k.type=P}return Ue.V.logUpdate(i),p})}var jl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},Vl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},$l=g(6963),Si=g(2202),Hl=g(5457),ql=g(991),pr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Ai(D){var d=arguments;return pr(this,void 0,void 0,function*(){const i=Ue.V.logfunction("DeleteConceptById",d);if(Dt)try{return(yield tn("DeleteConceptById",{id:D})).data}catch(F){console.error("DeleteConceptById sw error: ",F),ln(F)}if(D>0){var p=yield I.I.GetConcept(D);if(p.id>0){var w=p.typeId,k=p.characterValue;yield Hl.c.removeTypeConcept(w,D),yield $l.f.removeNodeByCharacter(k,D),yield function(F){var P=arguments;return Vl(this,void 0,void 0,function*(){let x=!1;const y=Ue.V.logfunction("DeleteTheConcept",P);try{const u=new FormData;u.append("id",F.toString());let U=(0,e.BZ)();const j=yield fetch(r.B.DeleteConceptUrl(),{method:"POST",headers:U,body:u});j.ok?x=(yield j.json()).success:(console.log("Delete concept error",j.status),(0,o.ry)(j)),x&&I.I.AddNpc(F),Ue.V.logUpdate(y)}catch(u){u instanceof Error?console.log("Delete concept error message: ",u.message):console.log("Delete concept unexpected error: ",u),(0,o.Mb)(u,r.B.DeleteConceptUrl()),(0,o.ey)(y,"DeleteTheConcept",u)}return x})}(D),yield Si.W.removeNodeFromTree(D),yield ql.H.removeNodeFromTree(D)}}else T.v.RemoveConceptById(D);Ue.V.logUpdate(i)})}function fr(D){return pr(this,void 0,void 0,function*(){if(Dt)try{return(yield tn("DeleteUser",{id:D})).data}catch(d){console.error("DeleteUser sw error: ",d),ln(d)}D>0?function(d){var i=arguments;jl(this,void 0,void 0,function*(){const p=Ue.V.logfunction("DeleteUserInBackend",i);try{var w=(0,e.ab)("application/json","");let k=r.B.DeleteUserUrl();k=k+"?conceptId="+d+"&apiKey=freeschema";const F=yield fetch(k,{method:"POST",headers:w});if(F.ok){let P=yield F.json(),x=Number(P.data);return console.log("this is the delete email concept",x),Ai(x),Ue.V.logUpdate(p),x}throw(0,o.ry)(F),new Error(`Delete composition Error! status: ${F.status}`)}catch(k){k instanceof Error?console.log("Delete composition error message: ",k.message):console.log("Delete composition unexpected error: ",k),(0,o.Mb)(k,r.B.DeleteConceptUrl()),(0,o.ey)(p,"DeleteUserInBackend",k)}})}(D):T.v.RemoveConceptById(D)})}var zl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function yr(D,d){return zl(this,void 0,void 0,function*(){try{const i=new Headers;i.append("Authorization","Bearer "+d);const p=new FormData;p.append("id",D.toString());const w=yield fetch(r.B.DeleteConceptUrl(),{method:"POST",body:p,headers:i});if(!w.ok)throw(0,o.ry)(w),new Error(`Delete composition Error! status: ${w.status}`)}catch(i){i instanceof Error?console.log("Delete composition error message: ",i.message):console.log("Delete composition unexpected error: ",i),(0,o.Mb)(i,r.B.DeleteConceptUrl())}})}var Vo=g(1735),ro=g(8286),Jl=g(1596),an=g(3278),gr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},Zl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function vr(D){var d=arguments;return Zl(this,void 0,void 0,function*(){const i=Ue.V.logfunction("GetConnectionById",d);if(console.log("AccessTracker activation status from GetConnectionById"),!0===Vo.J.activateStatus)try{Vo.J.incrementConnection(D)}catch{console.error("Error adding connection in access tracker"),Ue.V.log("ERROR","Error Adding Connection")}if(Dt)try{return(yield tn("GetConnectionById",{id:D})).data}catch(w){console.error("GetConnectionById sw error: ",w),ln(w)}let p=yield ro.d.GetConnection(D);return null!=p&&0!=p.id||null==D||null==D||(p=yield function(w){var k=arguments;return gr(this,void 0,void 0,function*(){const F=Ue.V.logfunction("GetConnection",k);let P=yield ro.d.GetConnection(w);try{if(0!=P.id)return P;{const x=new FormData;x.append("id",w.toString());const y={method:"POST",headers:{Authorization:"Bearer "+an.b.BearerAccessToken},body:x};let u;try{u=yield fetch(r.B.GetConnectionUrl(),y)}catch{u=yield(0,Jl.g)(y,"/api/get-connection-by-id")}return yield function(U,j){return gr(this,void 0,void 0,function*(){U.ok?(j=yield U.json(),ro.d.AddConnection(j)):((0,o.ry)(U),console.log("Get Connection Error",U.status))})}(u,P),Ue.V.logUpdate(F),P}}catch(x){x instanceof Error?console.log("Get Connection error message: ",x.message):console.log("Get Connection unexpected error: ",x),(0,o.Mb)(x,r.B.GetConnectionUrl()),(0,o.ey)(F,"GetConnection",x)}})}(D)),Ue.V.logUpdate(i),p})}var Ql=g(2212),Yl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},Kl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function mr(D,d,i){return Kl(this,arguments,void 0,function*(p,w,k,F=4,P=999){const x=Ue.V.logfunction("MakeTheTimestamp")||{};if(Dt){x.serviceWorker=!0;try{const q=yield tn("MakeTheTimestamp",{type:p,referent:w,userId:k,accessId:F,sessionInformationId:P});return Ue.V.logUpdate(x),q.data}catch(q){console.error("MakeTheTimestamp sw error: ",q),(0,o.ey)(x,"MakeTheTimestamp",q),ln(q)}}let y,u="",U=p.startsWith("the_"),j=(0,re.o)();return u=U?p:"the_"+p,j=yield un(u,k),y=yield function(q,se,Ie,Re,Ke,Fe,tt){return Yl(this,void 0,void 0,function*(){let kt=yield(0,dt.A)(q,Re),zt=kt;return 0==zt.id&&(kt=yield(0,Ql.Ay)(q,se,4,Re,0,Fe,tt),zt=kt),zt})}(w,k,0,j.id,0,F,u),Ue.V.logUpdate(x),y})}class _o{constructor(){this.composition=0,this.type="",this.linker="",this.inpage=10,this.page=1,this.listLinkers=[],this.fullLinkers=[],this.textSearch="",this.logic="or",this.reverse=!1,this.doFilter=!1,this.filterSearches=[],this.selectors=[],this.ofCompositions=[]}}var _n=g(6687),$o=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Cr(){var D=arguments;return $o(this,arguments,void 0,function*(d=0,i=[],p="",w=[]){const k=Ue.V.logfunction("RecursiveSearchApi",D)||{};let F=[];try{if(Dt){k.serviceWorker=!0;try{const U=yield tn("RecursiveSearchApi",{composition:d,listLinkers:i,textSearch:p,fullLinkers:w});return Ue.V.logUpdate(k),U.data}catch(U){console.error("RecursiveSearchApi sw error: ",U),(0,o.ey)(k,"RecursiveSearchApi",U),ln(U)}}let P=new _o;P.composition=d,P.listLinkers=i,P.fullLinkers=w,P.textSearch=p;let x=JSON.stringify(P),y=(0,e.Xr)();const u=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:y,body:x});if(u.ok){const U=yield u.json();let j=U.compositionIds,J=U.internalConnections;F=yield(0,_n.p8)(j,J)}else console.log("recursive search error ",u.status),(0,o.ey)(k,"RecursiveSearchApi",u.status),(0,o.ry)(u);Ue.V.logUpdate(k)}catch(P){P instanceof Error?console.log("recursive search error message: ",P.message):console.log("recursive search unexpected error: ",P),(0,o.ey)(k,"RecursiveSearchApi",P),(0,o.Mb)(P,r.B.RecursiveSearchUrl())}return F})}function _r(){var D=arguments;return $o(this,arguments,void 0,function*(d=0,i=[],p=""){const w=Ue.V.logfunction("RecursiveSearchApiWithInternalConnections",D)||{};let k=[];try{if(Dt){w.serviceWorker=!0;try{const u=yield tn("RecursiveSearchApiWithInternalConnections",{composition:d,listLinkers:i,textSearch:p});return Ue.V.logUpdate(w),u.data}catch(u){console.error("RecursiveSearchApiWithInternalConnections sw error: ",u),(0,o.ey)(w,"RecursiveSearchApiWithInternalConnections",u),ln(u)}}let F=new _o;F.composition=d,F.listLinkers=i,F.textSearch=p;let P=JSON.stringify(F),x=(0,e.Xr)();const y=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:x,body:P});if(y.ok){const u=yield y.json();let U=u.compositionIds,j=u.internalConnections;k=yield(0,_n.km)(U,j),Ue.V.logUpdate(w)}else console.log("recursive search error ",y.status),(0,o.ey)(w,"GetCompositionConnectionsBetweenTwoConcepts",y.status),(0,o.ry)(y)}catch(F){F instanceof Error?console.log("recursive search error message: ",F.message):console.log("recursive search unexpected error: ",F),(0,o.ey)(w,"GetCompositionConnectionsBetweenTwoConcepts",F),(0,o.Mb)(F,r.B.RecursiveSearchUrl())}return k})}function Li(){var D=arguments;return $o(this,arguments,void 0,function*(d=0,i=[],p="",w=[]){const k=Ue.V.logfunction("RecursiveSearchApiRaw",D)||{};try{if(Dt){k.serviceWorker=!0;try{const u=yield tn("RecursiveSearchApiRaw",{composition:d,listLinkers:i,textSearch:p,fullLinkers:w});return Ue.V.logUpdate(k),u.data}catch(u){console.error("RecursiveSearchApiRaw sw error: ",u),(0,o.ey)(k,"RecursiveSearchApiRaw",u),ln(u)}}let F=new _o;F.composition=d,F.listLinkers=i,F.textSearch=p,F.fullLinkers=w;let P=JSON.stringify(F),x=(0,e.Xr)();const y=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:x,body:P});if(y.ok){const u=yield y.json();return Ue.V.logUpdate(k),u}return console.log("recursive search error ",y.status),(0,o.ey)(k,"RecursiveSearchApiRaw",y.status),(0,o.ry)(y),Ue.V.logUpdate(k),[]}catch(F){F instanceof Error?console.log("recursive search error message: ",F.message):console.log("recursive search unexpected error: ",F),(0,o.ey)(k,"RecursiveSearchApiRaw",F),(0,o.Mb)(F,r.B.RecursiveSearchUrl())}})}function wr(){var D=arguments;return $o(this,arguments,void 0,function*(d=0,i=[],p=""){const w=Ue.V.logfunction("RecursiveSearchApiRawFullLinker",D)||{};try{if(Dt){w.serviceWorker=!0;try{const y=yield tn("RecursiveSearchApiRawFullLinker",{composition:d,fullLinkers:i,textSearch:p});return Ue.V.logUpdate(w),y.data}catch(y){console.error("RecursiveSearchApiRawFullLinker sw error: ",y),(0,o.ey)(w,"RecursiveSearchApiRawFullLinker",y),ln(y)}}let k=new _o;k.composition=d,k.fullLinkers=i,k.textSearch=p;let F=JSON.stringify(k),P=(0,e.Xr)();const x=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:P,body:F});if(x.ok){const y=yield x.json();return Ue.V.logUpdate(w),y}return console.log("recursive search error ",x.status),(0,o.ey)(w,"RecursiveSearchApiRawFullLinker",x.status),(0,o.ry)(x),Ue.V.logUpdate(w),[]}catch(k){k instanceof Error?console.log("recursive search error message: ",k.message):console.log("recursive search unexpected error: ",k),(0,o.Mb)(k,r.B.RecursiveSearchUrl()),(0,o.ey)(w,"RecursiveSearchApiRawFullLinker",k)}})}function Tr(){var D=arguments;return $o(this,arguments,void 0,function*(d=0,i=[],p=""){const w=Ue.V.logfunction("RecursiveSearchApiRawFullLinker",D)||{};try{if(Dt)try{w.serviceWorker=!0;const y=yield tn("RecursiveSearchApiNewRawFullLinker",{composition:d,fullLinkers:i,textSearch:p});return Ue.V.logUpdate(w),y.data}catch(y){console.error("RecursiveSearchApiNewRawFullLinker sw error: ",y),(0,o.ey)(w,"RecursiveSearchApiNewRawFullLinker",y),ln(y)}let k=new _o;k.composition=d,k.fullLinkers=i,k.textSearch=p;let F=JSON.stringify(k),P=(0,e.Xr)();const x=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:P,body:F});if(x.ok){const y=yield x.json();return Ue.V.logUpdate(w),y}return console.log("recursive search error ",x.status),(0,o.ey)(w,"RecursiveSearchApiNewRawFullLinker",x.status),(0,o.ry)(x),Ue.V.logUpdate(w),[]}catch(k){k instanceof Error?console.log("recursive search error message: ",k.message):console.log("recursive search unexpected error: ",k),(0,o.Mb)(k,r.B.RecursiveSearchUrl()),(0,o.ey)(w,"RecursiveSearchApiNewRawFullLinker",k)}})}var Ho=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};const Ni=["image/jpeg","image/jpg","image/png","image/webp"],xi=["application/msword","application/vnd.ms-excel","application/vnd.ms-powerpoint","text/plain","application/pdf"];function br(D,d){return Ho(this,void 0,void 0,function*(){const i=Ue.V.logfunction("uploadAttachment");try{console.log("File Type",D.type);const p=new FormData;let w;if(xi.includes(D.type)||D.name.toLowerCase().endsWith(".md"))p.append("file",D,D.name),w=yield Fi(p,d);else{if(!Ni.includes(D.type))return{message:"Invalid File Format",success:!1};p.append("image",D,D.name),w=yield Ei(p,d)}return w?.data?(Ue.V.logUpdate(i),{message:"Upload Success",success:!0,url:w.data}):{message:"File Upload Failed",success:!1}}catch(p){throw console.error(p),(0,o.ey)(i,"uploadAttachment",p),p}})}function Ei(D){return Ho(this,arguments,void 0,function*(d,i=""){const p=Ue.V.logfunction("uploadImage");try{const w=yield fetch(r.B.uploadImageUrl(),{method:"POST",body:d,headers:{Authorization:`Bearer ${i}`}});if(!w.ok){const k=w.headers.get("content-type");k&&k.includes("text/plain")&&console.info(w?.text());const F=yield w?.text();return console.error(`${w.status} ${F}`),Ue.V.logUpdate(p),null}return yield w.json()}catch(w){return console.error(w),(0,o.ey)(p,"uploadImage",w),null}})}function Ir(D){return Ho(this,arguments,void 0,function*(d,i=""){const p=Ue.V.logfunction("uploadImageV2");try{const w=yield fetch(r.B.uploadImageUrlWithSmall(),{method:"POST",body:d,headers:{Authorization:`Bearer ${i}`}});if(!w.ok){const k=w.headers.get("content-type");k&&k.includes("text/plain")&&console.info(w?.text());const F=yield w?.text();return console.error(`${w.status} ${F}`),Ue.V.logUpdate(p),null}return yield w.json()}catch(w){return console.error(w),(0,o.ey)(p,"uploadImageV2",w),null}})}function Fi(D){return Ho(this,arguments,void 0,function*(d,i=""){const p=Ue.V.logfunction("uploadFile");try{const w=yield fetch(r.B.uploadFileUrl(),{method:"POST",body:d,headers:{Authorization:`Bearer ${i}`}});if(!w.ok){const k=w.headers.get("content-type");k&&k.includes("text/plain")&&console.info(w.text());const F=yield w.text();return console.error(`${w.status} ${F}`),null}return Ue.V.logUpdate(p),yield w.json()}catch(w){return console.error(w),(0,o.ey)(p,"uploadFile",w),null}})}function kr(){return Ho(this,void 0,void 0,function*(){let D=yield(0,e.Xr)(),d={};try{const i=yield fetch(r.B.UploadFileLimitUrl(),{method:"GET",headers:D});i.ok&&(d=i.json())}catch(i){throw console.error(i),i}return d})}var Bo=g(1239),li=g(7467),Xl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Sr(D,d){var i=arguments;return Xl(this,arguments,void 0,function*(p,w,k="boomconsole.com"){const F=Ue.V.logfunction("LoginToBackend",i);try{let P={email:p,password:w,application:k},x=new Headers;x.append("Content-Type","application/json");let y=JSON.stringify(P);const u=yield fetch(r.B.LoginUrl(),{method:"POST",headers:x,body:y}),U=yield u.json();if(u.ok)return an.b.BearerAccessToken=U.data.token,Ue.V.logUpdate(F),U;console.log("Login tsccs error message: ",u.status),(0,o.ER)(u,U)}catch(P){P instanceof Error?console.log("Login tsccs error message: ",P.message):console.log(" Login tsccs  unexpected error: ",P),(0,o.Mb)(P,r.B.LoginUrl()),(0,o.ey)(F,"LoginToBackend",P)}})}var Oi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Ar(D){return Oi(this,void 0,void 0,function*(){return yield function(){return Oi(this,arguments,void 0,function*(i="",p={}){let w={message:"success",status:!1,statusCode:200,data:"cannot signup"};try{const k=yield fetch(i,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(p)}),F=yield k.json();return k.ok?w={message:"success",status:!0,statusCode:200,data:F}:(0,o.ER)(k,F),w}catch(k){console.log("Signup Error: ",k),(0,o.Mb)(k,i)}})}(r.B.SignupUrl(),D)})}function Lr(D){return Oi(this,void 0,void 0,function*(){const d=r.B.NODE_URL,i=yield fetch(`${d}/api/v1/entity/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(i.ok)return i.json();{if(404===i.status)throw new Error("404, Not found");if(500===i.status)throw new Error("500, internal server error");let p=yield i.json();throw console.log("This is the error from package",p),new Error(p.message)}})}var ed=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Nr(D){return ed(this,void 0,void 0,function*(){const d=JSON.stringify({email:D.email,password:D.password});let i={message:"success",status:!1,statusCode:200,data:""};const p=new Headers;p.append("Content-Type","application/json");const w=r.B.LoginUrl();try{const k=yield fetch(w,{method:"POST",headers:p,body:d,redirect:"follow"}),F=yield k.json();return k.ok?i={message:"success",status:!0,statusCode:200,data:F?.data}:(0,o.ER)(k,F),i}catch(k){console.log("Sign in api error",k),(0,o.Mb)(k,w)}})}var Di=g(9934),di=g(4485);function td(D=[],d){Array.isArray(D)&&D.splice(D.findIndex(function(i){return i.id===d.id}),1)}function nd(D=[],d){Array.isArray(D)&&D.splice(D.findIndex(function(i){return i.id===d.id}),1)}class Bi{constructor(d,i,p,w){this.expiryTime=new Date(Date.now()+6e5),this.height=1,this.key=d,this.value=i,this.leftNode=p,this.rightNode=w}isValid(){const d=new Date(Date.now());return!(this.expiryTime<d&&(wo.removeNodeFromTree(this.key),1))}saveToCache(d){this.value.cached=d}addNode(d,i,p){if(null==i)return d;const k=i.rightNode;if(i.key>d.key)i.leftNode=this.addNode(d,i.leftNode,p);else{if(!(i.key<d.key))return this.isValid(),d;i.rightNode=this.addNode(d,k,p)}i.height=1+Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode));const F=this.getBalanceFactor(i);if(F>1&&i.leftNode){if(d.key<i.leftNode.key)return this.rightRotate(i);if(d.key>i.leftNode.key)return i.leftNode=this.leftRotate(i.leftNode),this.rightRotate(i)}if(F<-1&&i.rightNode){if(d.key>i.rightNode.key)return this.leftRotate(i);if(d.key<i.rightNode.key)return i.rightNode=this.rightRotate(i.rightNode),this.leftRotate(i)}return this.isValid(),i}rightRotate(d){if(d){const i=d.leftNode;if(i)return d.leftNode=i.rightNode,i.rightNode=d,d.height=Math.max(this.getHeight(d.leftNode),this.getHeight(d.rightNode))+1,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,i}return d}leftRotate(d){if(d){const i=d.rightNode;if(i){const p=i.leftNode;return i.leftNode=d,d.rightNode=p,d.height=Math.max(this.getHeight(d.leftNode),this.getHeight(d.rightNode))+1,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(d.rightNode))+1,i}}return d}getHeight(d){return d?d.height:0}getBalanceFactor(d){return null==d?0:this.getHeight(d.leftNode)-this.getHeight(d.rightNode)}getFromNode(d,i){return i&&(d==i.key&&i.isValid()?i:d<i.key?this.getFromNode(d,i.leftNode):d>i.key?this.getFromNode(d,i.rightNode):i)}removeNode(d,i){if(null==d)return d;if(d.key>i)return d.leftNode=this.removeNode(d.leftNode,i),d;if(d.key<i)return d.rightNode=this.removeNode(d.rightNode,i),d;if(null==d.leftNode){const p=d.rightNode;return d=null,p}if(null==d.rightNode){const p=d.leftNode;return d=null,p}{const p=this.inOrderSuccessor(d.rightNode);return d.value=p.value,d.key=p.key,d.rightNode=this.removeNode(d.rightNode,p.key),d}}countNodeBelow(d){return null==d?0:1+this.countNodeBelow(d.leftNode)+this.countNodeBelow(d.rightNode)}inOrderSuccessor(d){for(;null!=d.leftNode;)d=d.leftNode;return d}}var xr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};let wo=(()=>{class D{static addNodeToTree(i){if(null==this.root)return this.root=i,this.root;this.root=this.root.addNode(i,this.root,this.root.height)}static addCompositionToTree(i){const p=new Bi(i.id,i,null,null);this.addNodeToTree(p)}static getNodeFromTree(i){return xr(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(i,this.root):null})}static removeNodeFromTree(i){return xr(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,i))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}return D.root=null,D})();var od=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Po(D,d,i,p){return od(this,arguments,void 0,function*(w,k,F,P,x=[]){var y,u;let U={};const j=[];if(0==w)return"";let J=Pi(F,w);if(null!=J&&0!=J.id||null==w||null==w||(J=yield(0,Se.A)(w)),0!=J.id&&null==J.type){const q=J.typeId;let se=Pi(F,q);J.type=se,null==se&&null!=q&&null!=q&&(se=yield(0,Se.A)(q),J.type=se)}if(!P.includes(w))return J?.characterValue;if(x.includes(w))return"";x.push(w);for(let q=0;q<k.length;q++)if(k[q].ofTheConceptId==w){const se=k[q].toTheConceptId;if(P.includes(w)){let Ie=Pi(F,se);if(null!=Ie&&0!=Ie.id||null==se||null==se||(Ie=yield(0,Se.A)(se)),0!=Ie.id&&null==Ie?.type){const Fe=Ie.typeId;let tt=yield I.I.GetConcept(Fe);Ie.type=tt,null==tt&&null!=Fe&&null!=Fe&&(tt=yield(0,Se.A)(Fe),Ie.type=tt)}const Ke=(null!==(u=null===(y=Ie?.type)||void 0===y?void 0:y.characterValue)&&void 0!==u?u:"").replace("the_","");if(isNaN(Number(Ke))){if(Ke){const Fe=yield Po(se,k,F,P,x);U[Ke]=Fe}}else{const Fe=yield Po(se,k,F,P,x);j[Ke]=Fe,U=j}}}return U})}function Pi(D,d){let i=(0,re.o)();for(let p=0;p<D.length;p++)if(d==D[p].id)return i=D[p],i;return i}class qo{constructor(){this.id=0,this.mainConcept=(0,re.o)(),this.connections=[],this.concepts=[],this.subcompositions=[],this.cached={}}updateCache(){return d=this,w=function*(){if(0==this.mainConcept.id)for(let k=0;k<this.concepts.length;k++)this.concepts[k].id==this.id&&(this.mainConcept=this.concepts[k]);this.cached=yield Po(this.id,this.connections,this.concepts,this.subcompositions,[])},new((p=void 0)||(p=Promise))(function(k,F){function P(u){try{y(w.next(u))}catch(U){F(U)}}function x(u){try{y(w.throw(u))}catch(U){F(U)}}function y(u){var U;u.done?k(u.value):(U=u.value,U instanceof p?U:new p(function(j){j(U)})).then(P,x)}y((w=w.apply(d,[])).next())});var d,p,w}UpdateAcrossDistributedSystem(){var d,i;try{0!=this.id&&(i=null===(d=this.id)||void 0===d?void 0:d.toString(),r.B.MQTT_CONNECTION&&r.B.MQTT_CONNECTION.publish("compositionUpdate",i))}catch(p){console.log("Error while publishing message",p)}}isUpdating(){this.UpdateAcrossDistributedSystem()}GetDataCache(){var d,i,p;const w={};w[null!==(p=null===(i=null===(d=this.mainConcept)||void 0===d?void 0:d.type)||void 0===i?void 0:i.characterValue)&&void 0!==p?p:""]=this.cached;const k={};return k.data=w,k.id=this.id,k}}var id=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function zo(D){return id(this,arguments,void 0,function*(d,i=null,p=null,w=null,k=null,F=null,P=null,x=null){const y=k??999,u=F??4,U=P??999;let j=w??0,J=(0,re.o)();null==x&&(x=new qo);for(const q in d)if("object"==typeof d[q]||Array.isArray(d[q])){const se=yield(0,We.A)(q,"",!0,y,u,U);if(null==i&&null==p){let Ie=j;J=se,Ie=se.id,j=se.id,x.concepts.push(se),x.id=se.id,yield zo(d[q],se.id,se.userId,Ie,k,F,P,x)}else{const Ie=i??999,Re=p??999,Ke=j;J=se,x.concepts.push(se);const Fe=yield(0,gt.q)(Ie,Re,se.id,Ke);x.connections.push(Fe),yield zo(d[q],se.id,se.userId,Ke,k,F,P,x)}null!=d[q]&&null!=d[q]&&x.subcompositions.push(se.id)}else{const se=i??999,Ie=p??999,Re=j,Ke=yield(0,We.A)(q,d[q],!1,y,u,U);x.concepts.push(Ke);const Fe=yield(0,gt.q)(se,Ie,Ke.id,Re);x.connections.push(Fe)}return J})}var rd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Er(D){return rd(this,void 0,void 0,function*(){const d=Ue.V.logfunction("UpdateComposition")||{};if(Dt){d.serviceWorker=!0;try{const Fe=yield tn("UpdateComposition",{patcherStructure:D});return Ue.V.logUpdate(d),Fe.data}catch(Fe){console.error("UpdateComposition sw error: ",Fe),(0,o.ey)(d,"UpdateComposition",Fe),ln(Fe)}}const i=D.userId,p=D.sessionId,w=D.accessId;let k=[];const F=[];let P=(0,re.o)(),x=(0,re.o)();const y=[];let u=D.compositionId;const U=D.ofTheCompositionId;let j=[];if(u<0){let Fe=yield(0,Se.A)(u,i);if(!(Fe.id>0))return null;u=Fe.id}k=yield(0,ne.s)(u);const J=[],q=new qo,se=[];q.id=u,q.isUpdating();let Ie=[];for(let Fe=0;Fe<k.length;Fe++)(0,Di.A)(se,k[Fe].ofTheConceptId),(0,Di.A)(J,k[Fe].ofTheConceptId),(0,Di.A)(J,k[Fe].toTheConceptId),Ie.push(k[Fe].ofTheConceptId);q.subcompositions=se,q.connections=k;for(let Fe=0;Fe<J.length;Fe++){const tt=yield(0,Se.A)(J[Fe]);u==J[Fe]&&(P=tt),U==J[Fe]&&(x=tt),F.push(tt)}const Re=D.patchObject;for(const Fe in Re){let tt=(0,re.o)();const kt=Re[Fe];let zt=P;if(x.id>0&&(zt=x),Array.isArray(kt)||"object"==typeof kt){tt=yield(0,We.A)(Fe,"",!0,P.userId,4,999),q.subcompositions.push(tt.id);const ct=(0,di.vo)(F,tt);for(let hn=0;hn<ct.length;hn++)if(ct[hn].id>0){const Sn=(0,di.wS)(q.connections,ct[hn].id);j=j.concat(Sn),y.push(ct[hn])}yield zo(Re[Fe],tt.id,tt.userId,P.id,P.userId,4,999,q)}else{tt=yield(0,We.A)(Fe,kt,!1,i,w,p);const ct=(0,di.vo)(F,tt);for(let hn=0;hn<ct.length;hn++)if(ct[hn].id>0){const Sn=(0,di.wS)(q.connections,ct[hn].id);j=j.concat(Sn),y.push(ct[hn])}}const Mt=(0,gt.q)(zt.id,zt.userId,tt.id,P.id);F.push(tt),q.connections.push(Mt)}for(let Fe=0;Fe<j.length;Fe++)nd(q.connections,j[Fe]),(0,_e.m)(j[Fe].id);for(let Fe=0;Fe<y.length;Fe++)td(F,y[Fe]);q.concepts=q.concepts.concat(F),q.mainConcept=P,q.id=P.id,yield q.updateCache(),wo.addCompositionToTree(q),Y.Y.SyncDataOnline();let Ke=q.GetDataCache();return Ue.V.logUpdate(d),Ke})}var sd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Fr(D,d,i,p){return sd(this,arguments,void 0,function*(w,k,F,P,x=10,y=1){var u=(0,e.ab)("application/x-www-form-urlencoded",P),U=new URLSearchParams;U.append("type",w),U.append("search",k),U.append("composition",F),U.append("inpage",x.toString()),U.append("page",y.toString());const j=r.B.SearchCompositionsUrl()+"?"+U.toString();try{const J=yield fetch(j,{method:"GET",headers:u});return J.ok?yield J.json():((0,o.ry)(J),[])}catch(J){console.log("This is the searching error",J),(0,o.Mb)(J,j)}})}var ad=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Or(D){return ad(this,arguments,void 0,function*(d,i=""){var p=(0,e.ab)("application/json",i);const w=r.B.SearchLinkMultipleAll(),k=JSON.stringify(d);try{const F=yield fetch(w,{method:"POST",headers:p,body:k});return F.ok?yield F.json():(console.log("This is the searching error",F.status),(0,o.ry)(F),[])}catch(F){console.log("This is the searching error",F),(0,o.Mb)(F,w)}})}var Dr=g(7139),Jo=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Br(D){return Jo(this,arguments,void 0,function*(d,i=[]){var p,w;let k=[];const F=[];let P={},x={};const y=yield wo.getNodeFromTree(d),u=[];let U=yield I.I.GetConcept(d);if(0==U.id&&null!=d&&null!=d&&(U=yield(0,Dr.r)(d)),null==y){let j=[];j=i.length>0?Pr(d,i):yield(0,ne.s)(d),k=j;for(let q=0;q<k.length;q++)u.includes(k[q].ofTheConceptId)||(u.push(k[q].ofTheConceptId),F.push(k[q].ofTheConceptId)),F.includes(k[q].toTheConceptId)||F.push(k[q].toTheConceptId);Mr(U,k,F,u);let J=[];x=yield(0,s.zN)(d,k,u,J),P[null!==(w=null===(p=U?.type)||void 0===p?void 0:p.characterValue)&&void 0!==w?w:""]=x}else x=y.value.GetDataCache(),P=x;return 0==U.id?"":P})}function Pr(D,d){const i=[];for(let p=0;p<d.length;p++)d[p].typeId==D&&i.push(d[p]);return i}function Ui(D){return Jo(this,arguments,void 0,function*(d,i=[]){var p,w;let k={},F=[];const P=[];let x;const y={},u=yield wo.getNodeFromTree(d),U=[];let j=yield I.I.GetConcept(d);if(0==j.id&&null!=d&&null!=d&&(j=yield(0,Dr.r)(d)),null==u){let J=[];J=i.length>0?Pr(d,i):yield(0,ne.s)(d),F=J;for(let q=0;q<F.length;q++)U.includes(F[q].ofTheConceptId)||(U.push(F[q].ofTheConceptId),P.push(F[q].ofTheConceptId)),P.includes(F[q].toTheConceptId)||P.push(F[q].toTheConceptId);Mr(j,F,P,U),x=yield(0,s.zN)(d,F,U),y[null!==(w=null===(p=j?.type)||void 0===p?void 0:p.characterValue)&&void 0!==w?w:""]=x,k.created_at=j.entryTimeStamp,k.data=y,k.id=d}else x=u.value.GetDataCache(),k=x;return 0==j.id?"":k})}function Ur(D,d){return Jo(this,void 0,void 0,function*(){let i=[];const p=[];i=yield(0,li.j)(d);for(let w=0;w<D.length;w++){const k=yield Ui(D[w],i);k&&p.push(k)}return p})}function Mr(D,d,i,p){return Jo(this,void 0,void 0,function*(){const w=new qo,k=yield function(P){return Jo(this,void 0,void 0,function*(){let x=[];const y=[];for(let u=0;u<P?.length;u++){const U=yield I.I.GetConcept(P[u]);0==U.id?y.push(P[u]):x.push(U)}return 0==y?.length||(x=yield(0,Bo.I)(y)),x})}(i);w.connections=d,w.concepts=k,w.id=D.id,w.subcompositions=p,w.mainConcept=D;const F=yield Po(D.id,d,k,p,[]);w.cached=F,wo.addCompositionToTree(w)})}var cd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Rr(D){return cd(this,void 0,void 0,function*(){try{var d=(0,e.Xr)();const i=JSON.stringify(D),p=yield fetch(r.B.CreateSessionId(),{method:"POST",headers:d,body:i});return p.ok?p.json():(console.log("Creating session failed",yield p.json()),(0,o.ry)(p),null)}catch(i){console.log("Creating session failed",i),(0,o.Mb)(i,r.B.CreateSessionId())}})}var ld=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Gr(D,d){return ld(this,void 0,void 0,function*(){try{var i=(0,e.Xr)("application/x-www-form-urlencoded");const p=new URLSearchParams;p.append("sessionId",D.toString()),p.append("url",d);const w=yield fetch(r.B.CreateSessionVisitUrl(),{method:"POST",headers:i,body:p});return w.ok?w.json():(console.log("Creating session url failed",yield w.json()),(0,o.ry)(w),null)}catch(p){console.log("Creating session url failed",p),(0,o.Mb)(p,r.B.CreateSessionVisitUrl())}})}var dd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Wr(D,d,i){return dd(this,arguments,void 0,function*(p,w,k,F=10,P=1){let x=[];try{var y=new URLSearchParams;y.append("typeId",`${p}`),y.append("toTheConceptId",`${w}`),y.append("userId",`${k}`),y.append("inpage",`${F}`),y.append("page",`${P}`);var u=(0,e.Xr)("application/x-www-form-urlencoded");const U=yield fetch(r.B.GetAllConnectionsToConceptUrl(),{method:"POST",headers:u,body:y});return U.ok?x=yield U.json():(console.log("Get connection of concept error",U.status),(0,o.ry)(U)),x}catch(U){throw U instanceof Error?console.log("Get connection of concept  error message: ",U.message):console.log("Get connection of concept unexpected error: ",U),U}})}var jr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Mi(D,d){var i=arguments;return jr(this,arguments,void 0,function*(p,w,k=10,F=1,P=!1){const x=Ue.V.logfunction("GetRelation",i)||{};if(Dt){x.serviceWorker=!0;try{const q=yield tn("GetRelation",{id:p,relation:w,inpage:k,page:F,reverse:P});return Ue.V.logUpdate(x),q.data}catch(q){console.error("GetRelation error sw: ",q),(0,o.ey)(x,"GetRelation",q),ln(q)}}let y=[],u=yield(0,Se.A)(p),U=yield(0,ft.Az)(w),j=[];if(U.id>0)if(P){j=yield Wr(U.id,u.id,u.userId,k,F);let q=[];for(var J=0;J<j.length;J++)q.push(j[J].ofTheConceptId);yield(0,v.Y)(q);for(let se=0;se<j.length;se++){let Ie=j[se].ofTheConceptId,Re=yield(0,Se.A)(Ie),Ke=yield(0,s.Ez)(Re.id);y.push(Ke)}}else{j=yield ke(U.id,u.id,u.userId,k,F);let q=[];for(let se=0;se<j.length;se++)q.push(j[se].toTheConceptId);yield(0,v.Y)(q);for(let se=0;se<j.length;se++){let Ie=j[se].toTheConceptId,Re=yield(0,Se.A)(Ie),Ke=yield(0,s.Ez)(Re.id);y.push(Ke)}}return Ue.V.logUpdate(x),y})}function Vr(D,d){var i=arguments;return jr(this,arguments,void 0,function*(p,w,k=10,F=1,P=!1){const x=Ue.V.logfunction("GetRelationRaw",i)||{};if(Dt){x.serviceWorker=!0;try{const se=yield tn("GetRelationRaw",{id:p,relation:w,inpage:k,page:F,reverse:P});return Ue.V.logUpdate(x),se.data}catch(se){console.error("GetRelationRaw error sw: ",se),(0,o.ey)(x,"GetRelationRaw",se),ln(se)}}let y=[],u=yield(0,Se.A)(p),U=yield(0,ft.Az)(w),j=[],J=[];if(U.id>0){if(P){j=yield Wr(U.id,u.id,u.userId,k,F);for(var q=0;q<j.length;q++)J.push(j[q].ofTheConceptId)}else{j=yield ke(U.id,u.id,u.userId,k,F);for(let se=0;se<j.length;se++)J.push(j[se].toTheConceptId)}y=yield(0,Bo.r)(J)}return Ue.V.logUpdate(x),y})}var Ri=g(6416),no=g(4711);class ud{constructor(d,i,p,w){this.value=[],this.height=1,this.key=d,this.value.push(i),this.leftNode=p,this.rightNode=w}addNode(d,i,p){if(null==i)return d;var k=i.rightNode;if(i.key>d.key)i.leftNode=this.addNode(d,i.leftNode,p);else{if(!(i.key<d.key))return i.value.push(...d.value),i;i.rightNode=this.addNode(d,k,p)}i.height=1+Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode));let F=this.getBalanceFactor(i);if(F>1&&i.leftNode){if(d.key<i.leftNode.key)return this.rightRotate(i);if(d.key>i.leftNode.key)return i.leftNode=this.leftRotate(i.leftNode),this.rightRotate(i)}if(F<-1&&i.rightNode){if(d.key>i.rightNode.key)return this.leftRotate(i);if(d.key<i.rightNode.key)return i.rightNode=this.rightRotate(i.rightNode),this.leftRotate(i)}return i}rightRotate(d){if(d){let i=d.leftNode;if(i)return d.leftNode=i.rightNode,i.rightNode=d,d.height=Math.max(this.getHeight(d.leftNode),this.getHeight(d.rightNode))+1,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,i}return d}leftRotate(d){if(d){let i=d.rightNode;if(i){let p=i.leftNode;return i.leftNode=d,d.rightNode=p,d.height=Math.max(this.getHeight(d.leftNode),this.getHeight(d.rightNode))+1,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(d.rightNode))+1,i}}return d}getHeight(d){return d?d.height:0}getBalanceFactor(d){return null==d?0:this.getHeight(d.leftNode)-this.getHeight(d.rightNode)}getFromNode(d,i){return i&&(d==i.key?i:d<i.key?this.getFromNode(d,i.leftNode):d>i.key?this.getFromNode(d,i.rightNode):i)}removeNode(d,i){if(null==d)return d;if(d.key>i)return d.leftNode=this.removeNode(d.leftNode,i),d;if(d.key<i)return d.rightNode=this.removeNode(d.rightNode,i),d;if(null==d.leftNode){let w=d.rightNode;return d=null,w}if(null==d.rightNode){let w=d.leftNode;return d=null,w}var p=this.inOrderSuccessor(d.rightNode);return d.value=p.value,d.key=p.key,d.rightNode=this.removeNode(d.rightNode,p.key),d}countNodeBelow(d){return null==d?0:1+this.countNodeBelow(d.leftNode)+this.countNodeBelow(d.rightNode)}inOrderSuccessor(d){for(;null!=d.leftNode;)d=d.leftNode;return d}}var Gi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};let ui=(()=>{class D{static compositeKey(i,p){return("0000"+i.toString(16).toUpperCase()).slice(-4)+("0000"+p.toString(16).toUpperCase()).slice(-4)}static addNodeToTree(i){if(null==this.root)return this.root=i,this.root;this.root=this.root.addNode(i,this.root,this.root.height)}static waitForDataToLoad(){return Gi(this,void 0,void 0,function*(){return new Promise((i,p)=>{this.checkFlag(i),setTimeout(()=>{p("not")},25e3)})})}static checkFlag(i){if(n.B.isDataLoaded)return i("done");setTimeout(D.checkFlag,1e3,i)}static addConceptToTree(i,p,w=999){let k=this.compositeKey(p,w);var F=new ud(k,i,null,null);this.addNodeToTree(F)}static getNodeFromTree(i,p){return Gi(this,void 0,void 0,function*(){let w=this.compositeKey(i,p);return this.root?this.root.getFromNode(w,this.root):null})}static removeNodeFromTree(i){return Gi(this,arguments,void 0,function*(p,w=999){if(this.root){let k=this.compositeKey(p,w);this.root=this.root.removeNode(this.root,k)}})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}return D.root=null,D})();var $r=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Hr(D,d){return $r(this,arguments,void 0,function*(i,p,w=999){let k=yield ui.getNodeFromTree(i,w),F=(0,Ri.u)();if(k)for(let P=0;P<k.value.length;P++){let x=k.value[P];x.ghostId==p&&(F=x)}return F})}function qr(D,d){return $r(this,arguments,void 0,function*(i,p,w=999){ui.addConceptToTree(i,p,w)})}var To=g(5312),Wi=g(1213),zr=g(3729),hd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},pd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Jr(D,d,i){return pd(this,void 0,void 0,function*(){try{if(Dt)try{return(yield tn("GetRelationLocal",{id:D,relation:d,userId:i})).data}catch(F){console.error("GetRelationLocal error sw: ",F),ln(F)}let p=yield(0,t.$I)(d),w=[];0!=p.id&&(w=yield function(F,P){return hd(this,void 0,void 0,function*(){try{return yield O.G.GetConnectionOfCompositionAndTypeLocal(P,F)}catch(x){throw x}})}(D,p.id));let k=[];for(let F=0;F<w.length;F++){let P=yield R(w[F].toTheConceptId);k.push(P)}return k}catch(p){throw p}})}var fd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function ji(D){return fd(this,void 0,void 0,function*(){let d=[];try{var i=(0,e.Xr)();const p=yield fetch(r.B.ViewInternalDataUrl(),{method:"POST",headers:i,body:JSON.stringify(D)});if(p.ok){let w=yield p.json(),k={};for(let F=0;F<w.length;F++){d=w[F].connections;let x=w[F].id;(0,Bo.r)(w[F].concepts),k[x]=d}return k}return console.log("View Internal Data error",p.status),(0,o.ry)(p),d}catch(p){throw p instanceof Error?console.log(" This is the view internal data error message: ",p.message):console.log(" This is the view internal data unexpected error: ",p),p}})}var yd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Vi(D){return yd(this,void 0,void 0,function*(){var d;try{let i=yield ji(D),p=[];for(let w=0;w<D.length;w++){let k=D[w],F=i[k];if(k&&F){let P=[],x={};for(let u=0;u<F.length;u++)P.includes(F[u].ofTheConceptId)||P.push(F[u].ofTheConceptId);let y=yield(0,s.zN)(k,F,P);x.data=y,x.id=k,p.push(x)}else{let P={};P.id=k;let x=yield(0,Se.A)(k),y={};x.type&&(y[null===(d=x?.type)||void 0===d?void 0:d.characterValue]=x.characterValue,P.data=y,p.push(P))}}return p}catch(i){throw i}})}var hi=g(176),Zr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},Qr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Yr(D){return Qr(this,arguments,void 0,function*(d,i=""){try{let p=yield function(w){return Zr(this,arguments,void 0,function*(k,F=""){var P=(0,e.ab)("application/json",F);let x=r.B.SearchInternalWithAuthenticatedCcsUrl();x=x+"?composition="+k.composition+"&search="+k.search+"&internalComposition="+k.internalComposition+"&type="+k.type+"&inpage="+k.inpage+"&page="+k.page;try{const y=yield fetch(x,{method:"GET",headers:P});return y.ok?yield y.json():(console.log("This is the searching internal error",y.status),(0,o.ry)(y),[])}catch(y){console.log("This is the searching internal error",y),(0,o.Mb)(y,x)}})}(d,i);return yield Vi(p)}catch(p){throw p}})}function Kr(D){return Qr(this,arguments,void 0,function*(d,i=""){try{return yield function(p){return Zr(this,void 0,void 0,function*(){var w=(0,e.ab)("application/json","");let k=r.B.SearchInternalWithCcsUrl();k=k+"?composition="+p.composition+"&search="+p.search+"&internalComposition="+p.internalComposition+"&type="+p.type+"&inpage="+p.inpage+"&page="+p.page;try{const F=yield fetch(k,{method:"GET",headers:w});return F.ok?yield F.json():(console.log("This is the searching internal error",F.status),(0,o.ry)(F),[])}catch(F){console.log("This is the searching internal error",F),(0,o.Mb)(F,k)}})}(d)}catch(p){throw p}})}var $i=g(8095),gd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Xr(D){return gd(this,void 0,void 0,function*(){if(Dt)try{return(yield tn("DeleteConceptLocal",{id:D})).data}catch(i){console.error("DeleteConceptLocal error sw: ",i),ln(i)}let d=yield(0,Wi.f)(D);T.v.RemoveConcept(d)})}var es=g(2803),vd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function ts(D,d,i,p){return vd(this,arguments,void 0,function*(w,k,F,P,x=!0){var y,u;const U=Ue.V.logfunction("GetConnectionBetweenTwoConceptsLinker")||{};if(Dt){U.serviceWorker=!0;try{const q=yield tn("GetConnectionBetweenTwoConceptsLinker",{ofTheConcept:w,toTheConcept:k,linker:F,fullLinker:P,forward:x});return Ue.V.logUpdate(U),q.data}catch(q){console.error("GetConnectionBetweenTwoConceptsLinker sw error: ",q),(0,o.ey)(U,"GetConnectionBetweenTwoConceptsLinker",q),ln(q)}}let j=(0,re.o)();if(""!=F){let q="";q=x?(null===(y=w.type)||void 0===y?void 0:y.characterValue)+"_s_"+F+"_s":(null===(u=k.type)||void 0===u?void 0:u.characterValue)+"_s_"+F+"_by",j=yield(0,We.A)("connection",q,!1,999)}""!=P&&(j=yield un(P,999));let J=[];return J=x?yield(0,es.x)(w.id,k.id,j.id):yield(0,es.x)(k.id,w.id,j.id),Ue.V.logUpdate(U),J})}function ns(D,d){return new Promise((i,p)=>{setTimeout(()=>{i(d)},D)})}var $t=g(3130);const os=3,is=4,rs=5;var md=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Hi(D,d){return md(this,arguments,void 0,function*(i,p,w=""){let k=r.B.SearchAllTypeWithLinker(i.auth);var F=(0,e.ab)("application/json",w);k=k+"?search="+i.search+"&type="+i.type+"&inpage="+i.inpage+"&page="+i.page;const P=JSON.stringify(p);try{const x=yield fetch(k,{method:"POST",headers:F,body:P});return x.ok?yield x.json():((0,o.ry)(x),console.log("This is the searching multiple error",x.status),[])}catch(x){console.log("This is the searching SearchWithTypeAndLinker error",x),(0,o.Mb)(x,k)}})}var ho=g(4287);class qi extends ho.w{constructor(d,i,p=$t.y0){super(),this.searchQuery=[],this.format=$t.y0,this.searchQuery=d,this.format=p}bind(){return d=this,w=function*(){return this.data=yield(0,To.cf)(this.searchQuery,"",this,this.format),this.mainConcept=this.searchQuery[0].composition,this.listenToEvent(this.mainConcept),console.log("this is the data",this.data),this.data},new((p=void 0)||(p=Promise))(function(k,F){function P(u){try{y(w.next(u))}catch(U){F(U)}}function x(u){try{y(w.throw(u))}catch(U){F(U)}}function y(u){var U;u.done?k(u.value):(U=u.value,U instanceof p?U:new p(function(j){j(U)})).then(P,x)}y((w=w.apply(d,[])).next())});var d,p,w}}function ss(D,d,i=$t.y0){return new qi(D,d??"",i)}var as=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class Cd extends ho.w{constructor(d,i=$t.ZJ){super(),this.id=d,this.format=i}bind(){return as(this,void 0,void 0,function*(){if(!this.isDataLoaded){let d=yield(0,s.hL)(this.id);this.mainConcept=this.id,this.compositionIds=d.compositionList;let i=d.connectionList;for(let p=0;p<i.length;p++)this.internalConnections.push(i[p].id);this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return as(this,void 0,void 0,function*(){let d=[],i=this.internalConnections;for(let p=0;p<i.length;p++)d.push(yield ro.d.GetConnection(i[p]));return this.data=this.format==$t.ZJ?yield(0,s.ay)(this.mainConcept,d,this.compositionIds):this.format==$t.y0?yield(0,s.$V)(this.mainConcept,d,this.compositionIds):this.format==$t.yv?yield(0,s.re)(this.mainConcept,d,this.compositionIds):yield(0,s.ay)(this.mainConcept,d,this.compositionIds),this.data})}}function cs(D,d=$t.ZJ){return new Cd(D,d)}var ls=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class _d extends ho.w{constructor(d,i,p,w,k){super(),this.data=[],this.startPage=0,this.compositionName=d,this.userId=i,this.inpage=p,this.page=w,this.format=k}bind(){return ls(this,void 0,void 0,function*(){if(!this.isDataLoaded){var d=yield(0,a.A)(this.compositionName);if(d){yield f(this.compositionName,this.userId);let w=yield I.I.GetConceptsByTypeIdAndUser(d.id,this.userId);for(var i=this.inpage*(this.page-1),p=i;p<i+this.inpage;p++)w[p]&&this.compositionIds.push(w[p].id)}yield(0,v.Y)(this.compositionIds),this.isDataLoaded=!0,this.listenToEventType(d.id);for(let w=0;w<this.compositionIds.length;w++)this.listenToEvent(this.compositionIds[w])}return yield this.build()})}build(){return ls(this,void 0,void 0,function*(){if(this.data=[],this.format==$t.ZJ){for(let d=this.startPage;d<this.startPage+this.inpage;d++)if(this.compositionIds[d]){let i=yield(0,s.kx)(this.compositionIds[d]);this.data.push(i)}}else if(this.format==$t.y0){for(let d=this.startPage;d<this.startPage+this.inpage;d++)if(this.compositionIds[d]){let i=yield(0,s.RW)(this.compositionIds[d]);this.data.push(i)}}else if(this.format==$t.yv){for(let d=this.startPage;d<this.startPage+this.inpage;d++)if(this.compositionIds[d]){let i=yield(0,s.XI)(this.compositionIds[d]);this.data.push(i)}}else for(let d=this.startPage;d<this.startPage+this.inpage;d++)if(this.compositionIds[d]){let i=yield(0,s.kx)(this.compositionIds[d]);this.data.push(i)}return this.data})}}function ds(D,d,i,p,w=$t.ZJ){return new _d(D,d,i,p,w)}var po=g(1320),us=g(5328),pi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class wd extends ho.w{constructor(d,i,p="",w){super(),this.searchText="",this.connections=[],this.externalConnectionIds=[],this.data=[],this.mainConcept=d,this.searchLinkers=i,this.textSearch=p,w&&(this.format=w)}listenToEvent(d){if(this.eventHandlers[d])return;const i=p=>pi(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let w=this;setTimeout(function(){return pi(this,void 0,void 0,function*(){try{let k=yield ro.d.GetConnectionByOfTheConceptAndType(d,d);for(let F=0;F<k.length;F++)yield ro.d.GetConnection(k[F]).then(P=>{P.typeId==w.mainConcept?w.internalConnections.includes(P.id)||w.internalConnections.push(P.id):w.linkers.includes(P.id)||w.linkers.push(P.id),w.conceptIds.includes(P.toTheConceptId)||w.conceptIds.push(P.toTheConceptId),w.compositionIds.includes(P.ofTheConceptId)||w.compositionIds.push(P.ofTheConceptId),w.compositionIds.includes(P.toTheConceptId)||w.compositionIds.push(P.toTheConceptId)});w.isUpdating=!1,yield w.bind(),w.notify()}catch(k){throw console.error("Error in RecursiveSearchObservable event listener:",k),w.isUpdating=!1,k}})},200)}});this.eventHandlers[d]=i,window.addEventListener(`${d}`,i)}bind(){return pi(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;const d=yield Li(this.mainConcept,this.searchLinkers,this.textSearch);this.compositionIds=d.compositionIds||[],this.internalConnections=d.internalConnections||[],this.externalConnectionIds=d.externalConnections||[],this.linkers=this.externalConnectionIds,this.connections=yield(0,li.j)(this.externalConnectionIds);for(let i=0;i<this.compositionIds.length;i++)this.listenToEvent(this.compositionIds[i]);this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return pi(this,void 0,void 0,function*(){return this.externalConnectionIds=this.linkers,this.data=this.format&&this.format==$t.XZ?{compositionIds:this.compositionIds,internalConnections:this.internalConnections,externalConnections:this.externalConnectionIds}:yield(0,_n.p8)(this.compositionIds,this.internalConnections),this.data})}}function hs(D,d,i="",p){return new wd(D,d,i,p)}var fi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class Td extends ho.w{constructor(d,i,p,w=$t.y0){super(),this.searchQuery=[],this.format=$t.y0,this.mainCompositionIds=[],this.searchCharacter="",this.token="",this.searchStructure=d,this.searchQuery=i,this.searchQuery[0].type=d.composition,this.searchCharacter=d.composition,this.format=w,this.token=an.b.BearerAccessToken}listenToEventType(d){if(this.eventHandlers[d])return;const i=p=>fi(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let w=this;setTimeout(function(){return fi(this,void 0,void 0,function*(){try{let k=p;w.mainCompositionIds.includes(k?.detail)||(w.mainCompositionIds.unshift(k?.detail),w.conceptIds.push(k?.detail),w.listenToEvent(k?.detail),ro.d.GetConnectionsOfConcept(k?.detail).then(F=>{for(let P=0;P<F.length;P++)w.linkers.push(F[P].id)})),w.isUpdating=!1,yield w.bind(),w.notify()}catch(k){throw console.error("Error in GetLinkListObservable event listener:",k),w.isUpdating=!1,k}})},200)}});this.eventHandlers[d]=i,window.addEventListener(`${d}`,i)}bind(){return fi(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;var d=yield(0,a.A)(this.searchCharacter);let i=yield Hi(this.searchStructure,this.searchQuery,this.token);this.conceptIds=i.compositionIds,this.internalConnections=i.internalConnections,this.linkers=i.linkers,this.reverse=i.reverse,this.mainCompositionIds=i.mainCompositionIds,this.listenToEventType(d.id);for(let p=0;p<this.mainCompositionIds.length;p++)this.listenToEvent(this.mainCompositionIds[p])}return yield this.build()})}build(){return fi(this,void 0,void 0,function*(){return yield(0,Bo.r)(this.conceptIds),this.data=this.format==$t.y0?yield(0,po.yV)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse):yield(0,po._W)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse),this.data})}}function ps(D,d,i,p=$t.y0){return new Td(D,d,i,p)}var zi=g(4698),fs=g(6915),ys=g(2615);class gs{constructor(d,i,p,w,k,F,P,x=!1,y,u,U){this.structureType="lconcept",this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=r.B.getRandomizer(),this.id=d,this.userId=i,this.typeId=p,this.ghostId=d,this.categoryId=w,this.characterValue=F,this.accessId=k,this.type=null,this.isNew=x,this.typeCharacter=P,this.entryTimeStamp=y,this.updatedTimeStamp=u,this.isSynced=!1,this.referentId=U}getType(){console.log(this.typeId)}}class vs{constructor(d,i,p,w,k,F){this.isTemp=!1,this.applicationId=r.B.getRandomizer(),this.type=(0,re.o)(),this.id=d,this.ofTheConceptId=i,this.toTheConceptId=p,this.typeId=w,this.ghostId=d,this.orderId=k,this.typeCharacter="",this.accessId=F,this.typeCharacter="",this.entryTimeStamp=(0,re.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date}}class ms{constructor(){this.compositionId=0,this.userId=999,this.sessionId=999,this.accessId=4,this.ofTheCompositionId=0,this.patchObject={}}}class Cs{constructor(){this.id="0",this.remote_address="",this.server_port="",this.server_address="",this.server_name="",this.server_software="",this.http_user_agent="",this.self="",this.port="",this.userId="",this.email=""}}var bo=g(628);class yi{constructor(){this.type="",this.search="",this.logicoperator="=",this.index=0,this.composition=!0,this.name="",this.operateon=""}}class _s{constructor(){this.type="",this.search="",this.composition="",this.internalComposition="",this.userId=999,this.inpage=10,this.page=1,this.auth=!0}}var ws=g(7887),Ts=g(3075),bd=g(7869),bs=g(9635),Ue=g(9700);class Ji{static initialize(){try{console.warn("Initialized Application Monitoring for tracking errors..."),this.initGlobalErrorHandlers(),this.logCatchError(),this.logErrorEvent(),this.logUnhandledError(),this.logUserInteractions(),this.logNetworkRequests(),this.logRouteChanges()}catch(d){console.error("Error during Application Monitoring initialization:",d)}}static initGlobalErrorHandlers(){try{if(console.log("this is the window",window),void 0===typeof window)return;window.onerror=(d,i,p,w,k)=>{const P={message:d,source:i,lineno:p,colno:w,stack:k?.stack||"undefined",requestFrom:r.B.BASE_APPLICATION,sessionId:an.b.sessionId||"unknown"};Ue.V.logApplication("ERROR","Runtime Error",P),Ue.V.log("ERROR","Runtime Error",P)},window.onunhandledrejection=d=>{const i=an.b.sessionId||"unknown";Ue.V.logApplication("ERROR","Unhandled Promise Rejection",{message:d.reason?d.reason.message:d.reason,stack:d.reason?d.reason.stack:null,requestFrom:r.B.BASE_APPLICATION,sessionId:i}),Ue.V.log("ERROR","Unhandled Promise Rejection",{message:d.reason?d.reason.message:d.reason,stack:d.reason?d.reason.stack:null,requestFrom:r.B.BASE_APPLICATION,sessionId:i})}}catch(d){console.warn("Failed to initialize global error handlers:",d)}}static logCatchError(){try{const d=console.error;console.log("Inside originalConsoleError..."),console.error=function(...i){if("Intercepted Fetch Error:"==i?.[0])return;const p="Console Error",w=an.b.sessionId||"unknown",k={arguments:i.map(F=>Is(F)),requestFrom:r.B.BASE_APPLICATION,sessionId:w};Ue.V.logApplication("ERROR",p,k),Ue.V.log("ERROR",p,k),d.apply(console,i)}}catch(d){console.warn("Failed to override console.error:",d)}}static logErrorEvent(){try{window.addEventListener("error",d=>{var i;console.log("Inside error event...");const p=an.b.sessionId||"unknown",w={error:(null===(i=d.error)||void 0===i?void 0:i.message)||d.message,source:d.filename,line:d.lineno,column:d.colno,stack:d.error?Is(d.error.stack):void 0,requestFrom:r.B.BASE_APPLICATION,sessionId:p},k="Unhandled Error";Ue.V.logApplication("ERROR",k,w),Ue.V.log("ERROR",k,w)})}catch(d){console.warn("Failed to add error event listener:",d)}}static logUnhandledError(){try{window.addEventListener("unhandledrejection",d=>{var i,p;console.log("Inside unhandledrejection...");const w=an.b.sessionId||"unknown",k={reason:(null===(i=d.reason)||void 0===i?void 0:i.message)||String(d.reason),stack:(null===(p=d.reason)||void 0===p?void 0:p.stack)||"No stack trace available",requestFrom:r.B.BASE_APPLICATION,sessionId:w};Ue.V.logApplication("ERROR","Unhandled Promise Rejection",k),Ue.V.log("ERROR","Unhandled Promise Rejection",k)})}catch(d){console.warn("Failed to add unhandled rejection event listener:",d)}}static logUserInteractions(){document.addEventListener("click",d=>{var i;const p=an.b.sessionId||"unknown",w=d.target,k={element:w.tagName,id:w.id,classes:w.className,text:null===(i=w.innerText)||void 0===i?void 0:i.slice(0,50),requestFrom:r.B.BASE_APPLICATION,sessionId:p};Ue.V.logApplication("INFO","User Click",k)}),document.addEventListener("input",d=>{}),document.addEventListener("scroll",()=>{window})}static logNetworkRequests(){try{if(void 0===typeof window)return;const d=window?.fetch;if(!d)throw new Error("Original fetch is not available.");const i=[r.B.PostLogger(),r.B.PostPrefetchConceptConnections()];window.fetch=(...p)=>{return w=this,P=function*(){const x=an.b.sessionId||"unknown",[y,u]=p,U=y instanceof Request?y.url:y instanceof URL?y.toString():y;if(i.includes(U))return console.log("Ignored URLs detected : ",U),d(...p);let j={request:{type:"REQUEST",message:"Network Request",method:u?.method||"GET",url:U,body:u?.body,requestFrom:r.B.BASE_APPLICATION,sessionId:x}};try{const J=yield d(...p);return j.response={type:"RESPONSE",message:"Network Response",url:U,status:J.status,requestFrom:r.B.BASE_APPLICATION,sessionId:x},J}catch(J){throw j.response={type:"ERROR",message:"Network Request Failed",url:U,error:J instanceof Error?J.message:String(J),requestFrom:r.B.BASE_APPLICATION,sessionId:x},Ue.V.logApplication("ERROR","Failed Network Request",j),new Error(`Network request failed for ${U}: ${J.message}`)}},new((F=void 0)||(F=Promise))(function(x,y){function u(J){try{j(P.next(J))}catch(q){y(q)}}function U(J){try{j(P.throw(J))}catch(q){y(q)}}function j(J){var q;J.done?x(J.value):(q=J.value,q instanceof F?q:new F(function(se){se(q)})).then(u,U)}j((P=P.apply(w,[])).next())});var w,F,P}}catch(d){console.warn("Failed to override network requests:",d)}}static logPerformanceMetrics(){void 0!==typeof window&&window?.addEventListener("load",()=>{performance})}static logRouteChanges(){const d=history.pushState;setTimeout(()=>{Ji.logOnWindowLoad()},3e3),history.pushState=function(...i){const p=an.b.sessionId||"unknown",w={url:i[2]?new URL(i[2],location.origin).href:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:p};return Ue.V.logApplication("ROUTE","Route Change",w),d.apply(this,i)},window?.addEventListener("beforeunload",()=>{const p={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:an.b.sessionId||"unknown"};Ue.V.logApplication("ROUTE","Unload",p)}),window?.addEventListener("popstate",()=>{const p={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:an.b.sessionId||"unknown"};Ue.V.logApplication("ROUTE","Route Changed (Back/Forward)",p)})}static logOnWindowLoad(){const i={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:an.b.sessionId||"unknown"};Ue.V.logApplication("ROUTE","Initial Load",i)}static logSample(){const i={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:an.b.sessionId||"unknown"};Ue.V.logApplication("ROUTE","Sample",i)}static logWebSocketEvents(){if(void 0===typeof window)return;const d=an.b.sessionId||"unknown",i=WebSocket;window.WebSocket=class extends i{constructor(p,w){super(p,w);const k={url:p.toString(),requestFrom:r.B.BASE_APPLICATION,sessionId:d};Ue.V.logApplication("INFO","WebSocket Open",k),this.addEventListener("message",F=>{Ue.V.logApplication("INFO","WebSocket Message",{url:p,data:F.data,requestFrom:r.B.BASE_APPLICATION,sessionId:an.b.sessionId||"unknown"})}),this.addEventListener("error",F=>{const P=an.b.sessionId||"unknown",x={url:p,error:F instanceof Error?F.message:String(F),requestFrom:r.B.BASE_APPLICATION,sessionId:P};Ue.V.logApplication("ERROR","WebSocket Error",x)}),this.addEventListener("close",()=>{Ue.V.logApplication("INFO","WebSocket Closed",{url:p,requestFrom:r.B.BASE_APPLICATION,sessionId:an.b.sessionId||"unknown"})})}}}}function Is(D){try{return JSON.stringify(D,(d,i)=>i&&"object"==typeof i&&i instanceof Error?{message:i.message,stack:i.stack}:i)}catch{return"Error while serializing value"}}const ks=(D,d,...i)=>{return w=[D,d,...i],F=function*(P,x,y=!1){try{let u=r.B.sendMail();y&&(u=r.B.sendBulkMail());const U=yield fetch(u,{method:"POST",body:P instanceof FormData?P:JSON.stringify(P),headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`}}),j=U.headers.get("content-type");if(!U.ok){const q=yield U.json();return console.info(`${U.status} ${q}`),null}const J=yield U.json();return j&&j.includes("text/plain")?yield U.text():J}catch(u){return console.error(u),null}},new((k=void 0)||(k=Promise))(function(P,x){function y(j){try{U(F.next(j))}catch(J){x(J)}}function u(j){try{U(F.throw(j))}catch(J){x(J)}}function U(j){var J;j.done?P(j.value):(J=j.value,J instanceof k?J:new k(function(q){q(J)})).then(y,u)}U((F=F.apply(void 0,w||[])).next())});var w,k,F};class Id{constructor(){this.inDevelopment=!1,this.subscribers=[]}notify(d=null){this.subscribers.map(i=>{i(d||this.data)})}dataChange(d){this.subscribers.push(d)}}class kd extends Id{constructor(){super(...arguments),this.element=null,this.elementIdentifier=0,this.widgetMounted=!1}getComponent(){return this.element}getElementById(d){let i=this.getComponent(),p=document.body;if(i){let w=i.querySelector("#"+d);if(w)return p=w,p}return null}createWidgetWrapperIdentifier(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier.toString()}}class gi extends kd{constructor(){super(...arguments),this.html="",this.css="",this.js="",this.state={},this.previousState={},this.childWidgets=[],this.childWidgetElement=[],this.widgetState={},this.parentElement=""}querySelector(d){return this.element?this.element.querySelector(d):null}querySelectorAll(d){return this.element?this.element.querySelectorAll(d):null}getElement(){return this.element}setTitle(d){document.title=d}getHtml(){return this.html}UpdateChildData(d,i){let p=i;p.data=d,p.render(),p.update()}update(){}setState(d){this.previousState=Object.assign({},this),this.data=d,this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}setStateProperty(d){this.previousState=Object.assign({},this),Object.assign(this,d),this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}hasStateChanged(){return!this.isPropertyEqual(this.state,this.previousState)}isPropertyEqual(d,i){if(d===i)return!0;if("object"!=typeof d||"object"!=typeof i||null===d||null===i)return!1;const p=Object.keys(d),w=Object.keys(i);if(p.length!==w.length)return!1;for(let k of p){if(!w.includes(k))return!1;for(let F of w)if(k==F&&"state"!=k&&"previousState"!=k&&d[k]!=i[k])return!1}return!0}loadChildWidgets(){this.childWidgets.map(d=>{let i=this.getElementById(d.parentElement);i&&(i.innerHTML=""),d.mount(i)})}render(){this.element&&(this.element.innerHTML=this.getHtml()),this.loadChildWidgets(),this.after_render()}getElementByClassName(d){let i=this.getComponent();return i?i?.querySelectorAll("."+d):[]}mount_child(){}mount(d){return i=this,k=function*(){d&&(this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier(),this.element.innerHTML=this.getHtml(),this.element.classList.add("mftsccs-marking-rendered"),d.appendChild(this.element),this.parentElement=d.id,this.before_render(),this.mount_child(),this.widgetMounted=!0)},new((w=void 0)||(w=Promise))(function(F,P){function x(U){try{u(k.next(U))}catch(j){P(j)}}function y(U){try{u(k.throw(U))}catch(j){P(j)}}function u(U){var j;U.done?F(U.value):(j=U.value,j instanceof w?j:new w(function(J){J(j)})).then(x,y)}u((k=k.apply(i,[])).next())});var i,w,k}before_render(){this.render()}after_render(){console.log("this is calling the after render",this)}renderChildWidgets(){function d(i){var p;i&&(null===(p=i.childWidgets)||void 0===p||p.forEach(w=>{d(w)}),i.render())}console.log("this is the render child widget",this),this.childWidgets.forEach(i=>{d(i)})}setWidgetState(d,i){this.widgetState[d]=i,function p(w){w&&Array.isArray(w.childWidgets)&&w.childWidgets.forEach(k=>{k.widgetState=Object.assign(Object.assign({},k.widgetState),w.widgetState),p(k)})}(this),this.renderChildWidgets()}getWidgetState(d,i){return Object.keys.length&&this.widgetState[d]?this.widgetState[d]:i}}var Io=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class Zo extends gi{constructor(){super(...arguments),this.childComponents=[],this.componentMounted=!1,this.oldHtml=null,this.phonebooks=[],this.childrenData={},this.childWidgets=[],this.typeValueList=[],this.widgetType="the_element_name",this.parentConceptList=[],this.customFunctions=[],this.widgetDependenciesData=""}getUserId(){return Io(this,void 0,void 0,function*(){return(yield new Promise(i=>{let p=(null==localStorage?void 0:localStorage.getItem("profile"))||"";p?i(JSON.parse(p)):i()}))?.userId})}getTypeValueList(){return Io(this,arguments,void 0,function*(d=""){return new Promise(i=>Io(this,void 0,void 0,function*(){const p=null==(d=this.widgetType)?void 0:d.match(/^[a-z0-9]+_[a-z0-9]+/i),w=p?p[0]:"",k=d?.match(/^([a-z0-9]+).*_([a-z0-9]+)$/i),F=k?`${k[1]}_${k[2]}`:"";let P=[],x=new yi;x.type=F,x.search="1",x.logicoperator=">",x.name="emailfilter",x.operateon="entityEmail",x.composition=!1,P.push(x);let y=new Vn;y.typeConnection=d,y.name="entityEmail";let u=new Vn;u.type=w,u.filterLogic="( emailfilter )",u.filters=P,u.name="top",u.inpage=100,u.freeschemaQueries=[y],u.outputFormat=$t.y0,Ro(u,"").subscribe(U=>{if(U?.length){const j=U?.map(J=>{var q,se,Ie,Re,Ke,Fe,tt;const kt=null===(Re=null===(Ie=null===(se=null===(q=J.data)||void 0===q?void 0:q[w])||void 0===se?void 0:se[d])||void 0===Ie?void 0:Ie.data)||void 0===Re?void 0:Re[F];return{id:null===(tt=null===(Fe=null===(Ke=J.data)||void 0===Ke?void 0:Ke[w])||void 0===Fe?void 0:Fe[d])||void 0===tt?void 0:tt.id,name:kt,text:kt}});return this.typeValueList=j,i(j),j}})}))})}setTitle(d){document.title=d}getHtml(){return this.html}createRandomNumber(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier}mount_child(){return Io(this,void 0,void 0,function*(){try{new Function("tsccs",`\n        return (async function() {\n          ${this.mountChildWidgetsFunction}\n        }).call(this);\n      `).bind(this)(S)}catch(d){throw console.log("This is the error in the mount child",d),d}})}setProperty(d){return Io(this,void 0,void 0,function*(){return this.widgetType=d,this.getTypeValueList(this.widgetType).then(()=>{var i,p,w;null===(i=this.element)||void 0===i||i.setAttribute("data-type-value",this.widgetType),null===(w=null===(p=this.element)||void 0===p?void 0:p.parentElement)||void 0===w||w.setAttribute("data-type-value",this.widgetType),this.render()}),this})}createTypeEditor(d){!function(i,p){if(i){const w=document.querySelector("#widget-properties #widget-type"),k=w?.querySelectorAll("input");k?.forEach(U=>{U?.remove()});const F=i.target.closest(".added-widget-container"),P=i.target.closest("div");let x="";F?x=F?.getAttribute("data-type-value"):P&&(x=P?.getAttribute("data-type-value"));const y=document.createElement("input");y.setAttribute("type","text"),y.setAttribute("name","input-widgetTypeValue"),y.setAttribute("of",p.elementIdentifier.toString()),y.setAttribute("class","form-control"),y.setAttribute("id","widgetType"),y.setAttribute("onchange","updateWidgetTypeValue(event)"),p.widgetType?y.value=p.widgetType:y.setAttribute("placeholder","e.g. the_entity");let u=p;y.addEventListener("change",function(U){var j,J,q;const se=null===(j=U?.target)||void 0===j?void 0:j.value;u.widgetType=se,u.before_render(),u.loadChildWidgets(),null===(q=null===(J=u.element)||void 0===J?void 0:J.parentElement)||void 0===q||q.setAttribute("data-type-value",u.widgetType)}),w?.appendChild(y)}}(d,this)}mount(d){return Io(this,void 0,void 0,function*(){if(d){this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier();let i=this;this.inDevelopment?(this.element.onclick=function(p){p.preventDefault(),i.createTypeEditor(p)},this.element.className="mftsccs-marking-element"):this.element.classList.add("mftsccs-marking-rendered"),this.element.innerHTML=this.getHtml(),d?.setAttribute("data-type-value",i.widgetType),d.appendChild(this.element),this.parentElement=d.id,0==this.componentMounted||0==this.widgetMounted?(this.render_custom_functions(),this.render_widgetDependencies(),this.before_render(),this.mount_child(),this.widgetMounted=!0,this.componentMounted=!0):this.render(),this.childWidgetElement=this.getElementByClassName("added-widget-container")}})}render_widgetDependencies(){try{new Function("tsccs",`\n        return (async function() {\n          ${this.widgetDependenciesData}\n        }).call(this);\n      `).bind(this)(S)}catch(d){throw console.log("This is the error in the before render",d),d}}render_custom_functions(){var d;const i=null===(d=this.customFunctions)||void 0===d?void 0:d.map(p=>p?.code).join("");try{new Function("tsccs",`\n          return (async function() {\n            ${i}\n          }).call(this);\n        `).bind(this)(S)}catch(p){throw console.error("This is the error in the render_custom_functions",p),p}}before_render(){try{new Function("tsccs",`\n        return (async function() {\n          ${this.componentDidMountFunction}\n        }).call(this);\n      `).bind(this)(S)}catch(d){throw console.log("This is the error in the before render",d),d}}after_render(){try{new Function("tsccs",`\n        return (async function() {\n          ${this.addEventFunction}\n        }).call(this);\n      `).bind(this)(S)}catch(d){throw console.log("This is the error in the after render",d),d}}CreateConnectionBetweenEntityLocal(d,i,p){return Io(this,void 0,void 0,function*(){var w;const k=d.userId,F=(null===(w=d.type)||void 0===w?void 0:w.characterValue)+"_"+p,P=yield(0,wt.$)(F,999,999,k);return yield(0,no.F)(d.id,i.id,P.id,1e3),"connection created"})}}var Sd=g(3077),jn=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class Zi{constructor(){this.actions={concepts:[],connections:[]},this.success=!0,this.transactionId=Math.random().toString().substring(5)}initialize(){return jn(this,void 0,void 0,function*(){yield bo.H.initializeTransaction(this.transactionId)})}commitTransaction(){return jn(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield bo.H.SyncDataOnline(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}commitTransactionWithoutAuth(){return jn(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield bo.H.SyncDataOnlineWithoutAuth(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}rollbackTransaction(){return jn(this,void 0,void 0,function*(){this.success=!1,this.actions={concepts:[],connections:[]},yield bo.H.rollbackTransaction(this.transactionId,this.actions)})}markAction(){return jn(this,void 0,void 0,function*(){yield bo.H.markTransactionActions(this.transactionId,this.actions)})}MakeTheInstanceConceptLocal(d,i){return jn(this,arguments,void 0,function*(p,w,k=!1,F,P,x=999,y=0){try{if(!this.success)throw Error("Query Transaction Expired");const u=yield(0,De.k)(p,w,k,F,P,x,y,this.actions);return yield this.markAction(),u}catch(u){throw console.log(u),this.success=!1,u}})}MakeTheTypeConceptLocal(d,i,p,w){return jn(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const k=yield(0,wt.$)(d,i,p,w,this.actions);return yield this.markAction(),k}catch(k){throw console.log(k),this.success=!1,k}})}CreateTheConceptLocal(d,i,p,w,k,F){return jn(this,arguments,void 0,function*(P,x,y,u,U,j,J=!1,q=0,se={concepts:[],connections:[]}){try{if(!this.success)throw Error("Query Transaction Expired");const Ie=yield(0,Sd.A)(P,x,y,u,U,j,J,q,this.actions);return yield this.markAction(),Ie}catch(Ie){throw console.log(Ie),this.success=!1,Ie}})}CreateConnectionBetweenTwoConceptsLocal(d,i,p){return jn(this,arguments,void 0,function*(w,k,F,P=!1){try{if(!this.success)throw Error("Query Transaction Expired");const x=yield(0,$i.h)(w,k,F,P,this.actions);return yield this.markAction(),x}catch(x){throw console.log(x),this.success=!1,x}})}CreateTheConnectionLocal(d,i,p){return jn(this,arguments,void 0,function*(w,k,F,P=1,x="",y=999){try{if(!this.success)throw Error("Query Transaction Expired");const u=yield(0,no.F)(w,k,F,P,x,y,this.actions);return yield this.markAction(),u}catch(u){throw console.log(u),this.success=!1,u}})}CreateConnection(d,i,p){return jn(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const w=yield(0,no.d)(d,i,p,this.actions);return yield this.markAction(),w}catch(w){throw console.log(w),this.success=!1,w}})}CreateConnectionBetweenEntityLocal(d,i,p){return jn(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const w=yield Xi(d,i,p,this.actions);return yield this.markAction(),w}catch(w){throw console.log(w),this.success=!1,w}})}CreateTheCompositionLocal(d){return jn(this,arguments,void 0,function*(i,p=null,w=null,k=null,F=null,P=null,x=null,y=!1){try{if(!this.success)throw Error("Query Transaction Expired");const u=yield(0,H.R)(i,p,w,k,F,P,x,y,this.actions);return yield this.markAction(),u}catch(u){throw console.log(u),this.success=!1,u}})}}const Ss={number:/^\d+(\.\d+)?$/,text:/^[\s\S]*$/,textOnly:/^[A-Za-z\s]+$/,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,document:/\.(pdf|docx?|pptx?|xlsx?)$/i,sound:/\.(mp3|wav|ogg|flac)$/i,image:/\.(jpg|jpeg|png|gif|bmp|svg|webp)$/i,video:/\.(mp4|avi|mov|mkv|flv|webm)$/i,url:/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/,date:/^\d{4}-\d{2}-\d{2}$/,time:/^(?:[01]\d|2[0-3]):[0-5]\d$/,password:/^.{6,}$/,ipaddress:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$|^([0-9a-fA-F]{1,4}:){7}([0-9a-fA-F]{1,4})$/,uuid:/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/};var Uo=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class pn{constructor(){pn.cacheInitialized||pn.initializeAnomalyParameters()}static initializeAnomalyParameters(){return Uo(this,void 0,void 0,function*(){try{yield pn.getAnomalyParameters(),pn.refreshCache(),pn.cacheInitialized=!0}catch(d){console.error("Error during anomaly parameter initialization:",d)}})}static getAnomalyParameters(){return Uo(this,void 0,void 0,function*(){const d=Date.now();if(pn.anomalyParamsCache&&d-pn.lastFetchedTime<pn.cacheExpiryThreshold)return console.log("Returning cached anomaly parameters"),pn.anomalyParamsCache;try{return yield pn.fetchAnomalyParameters()}catch(i){throw console.error("Error fetching anomaly parameters:",i),i}})}static fetchAnomalyParameters(){return Uo(this,void 0,void 0,function*(){try{const d=yield fetch("https://devai.freeschema.com/v1/get-frontend-anomaly-parameters",{method:"GET",headers:{"Content-Type":"application/json"}});if(!d.ok)throw new Error("Failed to fetch anomaly parameters");const i=yield d.json();return pn.anomalyParamsCache=i.data,pn.lastFetchedTime=Date.now(),i.data}catch(d){throw console.error("API Fetch Error:",d),d}})}static refreshCache(){return Uo(this,void 0,void 0,function*(){try{Date.now()-pn.lastFetchedTime>pn.cacheExpiryThreshold&&(yield pn.getAnomalyParameters())}catch(d){console.error("Error refreshing anomaly parameters cache:",d)}})}detectDataType(d){for(const[i,p]of Object.entries(Ss))if(p.test(d))return i;return null}checkConceptAnomaly(d,i){return Uo(this,void 0,void 0,function*(){const p=[];try{if(!i)return p.push("Null value"),{valid:!1,warnings:p};const w=pn.anomalyParamsCache;d.startsWith("the_")||(d=`the_${d}`);const k=w[d];if(console.log("Concept Details : ",k),!k)return console.warn(`No concept details found for type: ${d}`),p.push(`No concept details found for type: ${d}`),{valid:!1,warnings:p};const F=i.length,{min_length:P,max_length:x,data_types:y}=k,u=F>=P&&F<=x,U=this.detectDataType(i),j=y.includes(U);return u||p.push(`Length of '${i}' is outside the allowed range (min: ${P}, max: ${x}). Current length: ${F}.`),j||p.push(`Type mismatch for '${i}'. Expected types: ${y.join(", ")}, detected type: ${U}.`),u&&j&&p.push(`Concept ${d} is valid. Length: ${F}, Type: ${U}`),{valid:u&&j,warnings:p}}catch(w){return console.error(`Error checking anomaly for ${d} with value ${i}:`,w),{valid:!1,warnings:p}}})}static checkAnomalyInBulk(d){return Uo(this,void 0,void 0,function*(){pn.cacheInitialized||(yield pn.initializeAnomalyParameters());try{const i={};for(const[p,w]of Object.entries(d)){const k=w.value,{valid:F,warnings:P}=yield(new pn).checkConceptAnomaly(p,k);i[p]={valid:F,warnings:P}}return i}catch(i){throw console.error("Bulk Anomaly Check Error:",i),i}})}static getExportedFunction(){console.log("Main : ",S);const d=Object.keys(S);return console.log("The exported List : ",d),d}static getFunctionaAnomalyParameters(){}}pn.anomalyParamsCache=null,pn.cacheInitialized=!1,pn.lastFetchedTime=0,pn.cacheExpiryThreshold=6e5;var Qi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class As{checkUniqueness(d,i){return Qi(this,void 0,void 0,function*(){const p=Ue.V.logfunction("checkUniqueness");d.startsWith("the_")||(d="the_"+d);let w=(yield un(d,999)).id,k=yield(0,dt.A)(i,w);return console.log("This is the concept for validator",k),!(k.id>0||(Ue.V.logUpdate(p),0))})}validateField(d){return Qi(this,void 0,void 0,function*(){var i;const p=Ue.V.logfunction("validateField");try{performance.now();const w={},{name:k,value:F,type:P,dataType:x,pattern:y,conceptType:u,maxLength:U,minLength:j,minValue:J,maxValue:q,accept:se,file:Ie,required:Re,isUnique:Ke}=d;if(console.log("Validation is happening on : \n",d),!Re||null!==F&&""!==F||(w.required=`The field ${k} is required.`),x&&F){let Fe=Ss[x];Fe&&""!==F&&!Fe.test(F)&&(w.dataType=`Invalid value for ${x}`)}if(y&&F){const Fe="string"==typeof y?new RegExp(y):y;""===F||Fe.test(F)||(w.pattern="Pattern doesn't match with value")}if(F&&null!=U&&F.length>U&&(w.maxLength=`Length exceeds the maximum length of ${U}`),F&&null!=j&&F.length<j&&(w.minLength=`Length must be at least ${j} characters long`),null!=J&&F&&!isNaN(Number(F))&&Number(F)<J&&(w.minValue=`Value must be greater than or equal to ${J}`),null!=q&&F&&!isNaN(Number(F))&&Number(F)>q&&(w.maxValue=`Value must be less than or equal to ${q}`),Ie&&P&&se){const Fe=se.split(",").map(kt=>kt.trim().toLowerCase()),tt=null===(i=Ie.name.split(".").pop())||void 0===i?void 0:i.toLowerCase();tt&&!Fe.includes(tt)&&(w.accept=`File must be a valid file type: ${Fe.join(", ")}`)}return u&&Ke&&F&&((yield this.checkUniqueness(u,F))||(w.unique="Value is not unique")),Ue.V.logUpdate(p),console.log("Before Validation Result : ",w),w}catch(w){throw(0,o.ey)(p,"Validator.validateField",w),w}})}validateForm(d){return Qi(this,void 0,void 0,function*(){const i=Ue.V.logfunction("validateForm");try{performance.now();const p={};for(const w in d){const k=yield this.validateField(d[w]);Object.keys(k).length>0&&(p[w]=k)}return Ue.V.logUpdate(i),p}catch(p){throw(0,o.ey)(i,"Validator.validateForm",p),p}})}validate(d){const i=Ue.V.logfunction("validate");try{let p={};return this.validateField(d).then(w=>{Object.keys(w).length>0?(p.status=!1,p.details=w):p.status=!0}),console.error("Error on validate object"),Ue.V.logUpdate(i),p}catch(p){(0,o.ey)(i,"Validator.validate",p)}}}const Ls=D=>{var d;const i=document.getElementsByName(D)[0];if(!i)return console.warn(`Element with NAME "${D}" not found.`),{name:null,value:null,type:null,dataType:null,pattern:null,conceptType:null,maxLength:null,minLength:null,minValue:null,maxValue:null,accept:null,file:null,required:!1,isUnique:!0};const p=i.hasAttribute("required")||"true"===i.getAttribute("data-required"),w=i.hasAttribute("isUnique")&&"true"===i.getAttribute("isUnique");return{name:i.name,value:i.value,type:i.type,dataType:i.getAttribute("data-type"),pattern:i.getAttribute("data-pattern"),conceptType:i.getAttribute("concept-type"),maxLength:i.getAttribute("maxlength")?parseInt(i.getAttribute("maxlength")):null,minLength:i.getAttribute("minlength")?parseInt(i.getAttribute("minlength")):null,minValue:i.getAttribute("min")?parseInt(i.getAttribute("min")):null,maxValue:i.getAttribute("max")?parseInt(i.getAttribute("max")):null,accept:i.getAttribute("accept")||null,file:"file"===i.type&&(null===(d=i.files)||void 0===d?void 0:d[0])||null,required:p,isUnique:w}};var Mo=g(2289);class Vn{constructor(){this.type="",this.inpage=10,this.page=1,this.concepts=[],this.conceptIds=[],this.selectors=[],this.freeschemaQueries=[],this.filters=[],this.filterLogic="",this.typeConnection="",this.order="DESC",this.outputFormat=$t.yv,this.name="",this.filterAncestor="",this.reverse=!1,this.limit=!1,this.isSecure=!1,this.includeInFilter=!1,this.isOldConnectionType=!1}}var Ad=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function vi(D){var d=arguments;return Ad(this,arguments,void 0,function*(i,p=""){const w=Ue.V.logfunction("FreeschemaQueryApi",d);var k=(0,e.ab)("application/json",p);const F=r.B.FreeschemaQueryUrl(),P=JSON.stringify(i);try{const x=yield fetch(F,{method:"POST",headers:k,body:P});return x.ok?yield x.json():((0,o.ry)(x),console.log("This is the freeschema query error",x.status),[])}catch(x){console.log("This is the freeschema query error others",x),(0,o.Mb)(x,F),(0,o.ey)(w,"FreeschemaQueryApi",x)}})}var Yi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class Ns extends ho.w{constructor(d,i){super(),this.query=new Vn,this.countInfoStrings=[],this.order="DESC",this.totalCount=0,this.query=d,this.format=d.outputFormat,this.order=d.order}run(){return Yi(this,void 0,void 0,function*(){var d,i;try{this.query.outputFormat=$t.BG,this.compositionIds=[];let p=yield vi(this.query,"");return this.conceptIds=p.conceptIds,this.internalConnections=null!==(d=p.internalConnections)&&void 0!==d?d:[],this.linkers=null!==(i=p.linkers)&&void 0!==i?i:[],this.reverse=p.reverse,this.compositionIds=p.mainCompositionIds,this.totalCount=p.mainCount,this.countInfoStrings=p.countinfo,yield this.build()}catch(p){throw console.error("Error in SchemaQueryObservable.run():",p),p}})}bind(){return Yi(this,void 0,void 0,function*(){var d,i;try{if(this.compositionIds.length>0)for(let w=0;w<this.compositionIds.length;w++)this.removeListenToEvent(this.compositionIds[w]);if(this.isDataLoaded)for(let w=0;w<this.compositionIds.length;w++)this.listenToEvent(this.compositionIds[w]);else{this.query.outputFormat=$t.BG,this.compositionIds=[];let w=yield vi(this.query,"");this.conceptIds=w.conceptIds,this.internalConnections=null!==(d=w.internalConnections)&&void 0!==d?d:[],this.linkers=null!==(i=w.linkers)&&void 0!==i?i:[],this.reverse=w.reverse,this.compositionIds=w.mainCompositionIds,this.totalCount=w.mainCount,this.countInfoStrings=w.countinfo}let p=yield this.build();if(!this.isDataLoaded){this.isDataLoaded=!0;for(let w=0;w<this.compositionIds.length;w++)this.listenToEvent(this.compositionIds[w]);if(""!=this.query.type){let w=yield un(this.query.type,999);w.id>0&&this.listenToEventType(w.id)}}for(let w=0;w<this.newIds.length;w++)this.listenToEvent(this.newIds[w]);return this.newIds=[],p}catch(p){throw console.error("Error in SchemaQueryObservable.bind():",p),p}})}build(){return Yi(this,void 0,void 0,function*(){try{Ue.V.logfunction("build",["schemaquery",this.compositionIds]);let d=(0,zi.w)(this.countInfoStrings);return this.format==$t.y0?this.data=yield(0,po.e$)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,d,this.order):this.format==$t.ZJ?this.data=yield(0,po.y6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,d,this.order):this.format==$t.pU?this.data=yield(0,po.rq)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,d,this.order):this.format==$t.XZ?(console.log("this is the raw format"),this.data={},this.data.linkers=this.linkers,this.data.conceptIds=this.conceptIds,this.data.compositionIds=this.compositionIds,this.data.reverse=this.reverse,this.data.countInfos=d,this.data.order=this.order):this.data=yield(0,po.b6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,d),this.data}catch(d){throw console.error("Error in SchemaQueryObservable.build():",d),d}})}}function Ro(D,d){return new Ns(D,d)}function xs(D,d){return new Ns(D,d).execute()}class Ki{constructor(){this.id=0,this.name="",this.html="",this.css="",this.js="",this.library={css:[],js:[]},this.assistant={id:"",input:"",type:""},this.timestamp="",this.widgetId=0,this.type="",this.clean="",this.after_render="",this.before_render="",this.custom_functions=[],this.update="",this.origin=0,this.version=0,this.mount_child="",this.children=[],this.wrapper="0",this.widget=new Zo,this.dependency="",this.root=0}}var Ld=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Xi(D,d,i){return Ld(this,arguments,void 0,function*(p,w,k,F={concepts:[],connections:[]}){var P,x,y,u,U;const j=Ue.V.logfunction("CreateConnectionBetweenEntityLocal",[p.id,w.id,k]);if(Dt)try{const Ie=yield tn("CreateConnectionBetweenEntityLocal",{concept1Data:p,concept2Data:w,linker:k,actions:F});return!(null===(x=null===(P=Ie?.actions)||void 0===P?void 0:P.concepts)||void 0===x)&&x.length&&(F.concepts=JSON.parse(JSON.stringify(Ie.actions.concepts))),!(null===(u=null===(y=Ie?.actions)||void 0===y?void 0:y.connections)||void 0===u)&&u.length&&(F.connections=JSON.parse(JSON.stringify(Ie.actions.connections))),Ie.data}catch(Ie){console.log("CreateConnectionBetweenEntityLocal error sw: ",Ie),ln(Ie)}const J=p.userId,q=(null===(U=p.type)||void 0===U?void 0:U.characterValue)+"_"+k,se=yield(0,wt.$)(q,999,999,J,F);console.log(yield(0,no.F)(p.id,w.id,se.id,1e3,void 0,void 0,F)),Ue.V.logUpdate(j)})}var oo=g(4310);function er(D){for(;D.firstChild;)D.removeChild(D.firstChild)}var Es=g(490),Fs=g(276);function Os(D,d,i){const w={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:an.b.sessionId||"unknown",description:d};Ue.V.logApplication("USER_EVENT",D,w)}class Ds extends gi{constructor(d,i,p,w="",k=10){super(),this.inpage=10,this.selector=i,this.mainType=d,this.filterType=w,this.inpage=k,this.parentDomElement=p,this.mount(this.parentDomElement)}before_render(){this.render()}addFilter(d){if(""!=d){let i=new yi;i.search=d,i.type=this.filterType,i.logicoperator="like",i.operateon="selector",i.name="selector_filter";let p="( selector_filter )";this.query.filters=[i],this.query.filterLogic=p}else this.query.filters=[],this.query.filterLogic="";console.log("this is the filters",this.query)}after_render(){let d=this.getElementById("selector"),i=this.getElementById("search-bar"),p=this;i.onchange=()=>{p.addFilter(i.value),p.mainDetails.update()};let w=new Vn;w.type=this.mainType,w.inpage=this.inpage;let k=new Vn;k.typeConnection=this.selector,k.name="selector",w.freeschemaQueries=[k],this.query=w,Ro(this.query,"").subscribe((F,P)=>{let x={};this.mainDetails=P;for(let y=0;y<F.length;y++){let u=F[y],U=u.id,j=u[this.mainType];if(console.log("this is the selected data myItem",j,F[y],this.mainType,u),j){let J=j[this.selector];if(J){const q=Object.values(J)[0];x[U]=q}}}er(d);for(const[y,u]of Object.entries(x)){const U=document.createElement("option");U.value=y,U.textContent=u,d.appendChild(U)}console.log("this is the output from selector",F)})}getHtml(){const d=document.createElement("style");return d.textContent="\n.search-select-wrapper {\n  width: 300px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  font-family: Arial, sans-serif;\n}\n\n#search-bar {\n  padding: 8px;\n  font-size: 14px;\n  border: 1px solid #ccc;\n  border-radius: 6px;\n}\n\n#selector {\n  padding: 6px;\n  font-size: 14px;\n  border: 1px solid #ccc;\n  border-radius: 6px;\n}\n",document.head.prepend(d),this.html='\n        <div class="search-select-wrapper">\n        <input type="text" placeholder="Select or type..." id=\'search-bar\'>\n        <select id=\'selector\'>\n        </div>',this.html}}const Bs='\n/* CKEditor content styles */\n.ck-content {\n  /* Container styles */\n  max-width: 100%;\n  margin: 0 auto;\n  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;\n  line-height: 1.5;\n  padding: 0.75rem;\n  background: #fff;\n  color: #333;\n  border: 1px solid #ccced1;\n}\n\n/* Headings */\n.ck-content h1, .ck-content h2, .ck-content h3, \n.ck-content h4, .ck-content h5, .ck-content h6 {\n  font-weight: 700;\n  line-height: 1.2;\n  margin: 1em 0 0.5em;\n}\n\n.ck-content h1 { font-size: 2.5em; }\n.ck-content h2 { font-size: 2em; }\n.ck-content h3 { font-size: 1.75em; }\n.ck-content h4 { font-size: 1.5em; }\n.ck-content h5 { font-size: 1.25em; }\n.ck-content h6 { font-size: 1em; }\n\n/* Paragraphs and spacing */\n.ck-content p {\n  margin: 1em 0;\n  line-height: 1.6;\n}\n\n/* Links */\n.ck-content a {\n  color: #1a73e8;\n  text-decoration: none;\n}\n\n.ck-content a:hover {\n  text-decoration: underline;\n}\n\n/* Lists */\n.ck-content ul,\n.ck-content ol {\n  padding-left: 2em;\n  margin: 1em 0;\n}\n\n.ck-content ul {\n  list-style: disc;\n}\n\n.ck-content ol {\n  list-style: decimal;\n}\n\n.ck-content li {\n  margin: 0.5em 0;\n}\n\n/* Blockquotes */\n.ck-content blockquote {\n  margin: 1em 0;\n  padding-left: 1em;\n  border-left: 5px solid #ccc;\n  font-style: italic;\n  color: #666;\n}\n\n/* Code blocks */\n.ck-content pre {\n  background: #f5f5f5;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  padding: 1em;\n  margin: 1em 0;\n  overflow-x: auto;\n  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;\n}\n\n.ck-content code {\n  background: #f5f5f5;\n  padding: 0.2em 0.4em;\n  border-radius: 3px;\n  font-size: 0.9em;\n  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;\n}\n\n/* Tables */\n.ck-content table {\n  border-collapse: collapse;\n  width: 100%;\n  margin: 1em 0;\n}\n\n.ck-content table th,\n.ck-content table td {\n  border: 1px solid #ddd;\n  padding: 0.75em;\n  text-align: left;\n}\n\n.ck-content table th {\n  background: #f5f5f5;\n  font-weight: bold;\n}\n\n/* Images */\n.ck-content img {\n  max-width: 100%;\n  height: auto;\n  margin: 1em 0;\n}\n\n.ck-content figure {\n  margin: 1em 0;\n  text-align: center;\n}\n\n.ck-content figure img {\n  margin: 0;\n}\n\n.ck-content figcaption {\n  color: #666;\n  font-size: 0.9em;\n  margin-top: 0.5em;\n}\n\n/* Dark mode */\n/*\n@media (prefers-color-scheme: dark) {\n  .ck-content {\n    background: #1a1a1a;\n    color: #e0e0e0;\n  }\n\n  .ck-content a {\n    color: #64b5f6;\n  }\n\n  .ck-content blockquote {\n    border-left-color: #404040;\n    color: #b0b0b0;\n  }\n\n  .ck-content pre,\n  .ck-content code {\n    background: #2d2d2d;\n    border-color: #404040;\n  }\n\n  .ck-content table th,\n  .ck-content table td {\n    border-color: #404040;\n  }\n\n  .ck-content table th {\n    background: #2d2d2d;\n  }\n\n  .ck-content figcaption {\n    color: #b0b0b0;\n  }\n}\n*/\n\n/* CUSTOM DOCUMENTATION CSS */\n\n#documentation-preview {\n  border: 1px solid #ccc;\n  padding: 1rem;\n}\n\n#documentation-preview h3 {\n  font-size: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.pre-wrapper {\n  background: #f2f5f9;\n  border: 1px solid #cecece;\n  display: block;\n  padding: 1rem;\n  border-radius: 0.25rem;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n\n.pre-wrapper pre {\n  margin: 0;\n  color: #e87aa2;\n}\n\n.widget-doc-section pre {\n  background-color: transparent;\n}\n\n.widget-doc-section p {\n  margin: 0;\n}\n\n.widget-doc-section code {\n  color: #e87aa2;\n  font-size: 0.875rem;\n}\n\n.mv-3 {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n\n.pv-3 {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n}\n\n  .widget-documentation-heading {\n    background-color: #6e757d;\n    color: #eee;\n    font-size: 1.5rem;\n    padding: 0.5rem 1rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .widget-documentation-heading h4 {\n    margin-bottom: 0;\n  }\n\n  .close-documentation-button {\n    border: none;\n    outline: none;\n    background-color: transparent;\n    line-height: 0;\n    margin: 0;\n    padding: 0;\n    cursor: pointer;\n  }\n\n  .close-documentation-button:hover,\n  .close-documentation-button:focus  {\n    background-color: transparent;\n  }\n\n  .documentation-creator {\n    text-align: right;\n    color: #666;\n    margin: 0;\n    padding-top: 0.5rem;\n    padding-bottom: 0.5rem;\n  }\n\n  .documentation-creator span {\n    font-style: italic;\n  }\n\n  .documentation-attachments {\n    display: flex;\n    flex-wrap: wrap;\n  }\n\n  .documentation-attachments img {\n    width: 25%;\n    height: auto;\n    border: 1px solid #ccc;\n    padding: 0.25rem;\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  .documentation-attachments iframe {\n    width: 50%;\n    border: 1px solid #ccc;\n    padding: 0.25rem;\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  .widget-documentation-footer {\n    text-align: right;\n    margin-top: 1rem;\n  }\n\n  .widget-documentation-footer button {\n    border-radius: 0;\n    border: none;\n    padding: 0.5rem 1.5rem;\n    text-align: center;\n    background: #6e757d;\n    color: #eee;\n  }\n\n  #widget-details {\n    position: absolute;\n    right: 0px;\n    top: 0px;\n    z-index: 9999;\n  }\n\n  #widget-details button {\n    background: #fff;\n    border: 1px solid #ccc;\n    border-radius: 0 0 0 0.25rem;\n    height: auto;\n    width: auto;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    gap: 0.25rem;\n  }\n\n  #widget-details button:hover, \n  #widget-details button:focus {\n    opacity: 0.75;\n  }\n\n  #widget-details button span {\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  #widget-details button svg {\n    pointer-events: none;\n    width: 16px;\n    height: 16px;\n    fill: #999;\n  }\n\n  #widget-documentation-preview-modal {\n    border: none;\n  }\n\n  @media (min-width: 768px) {\n    #widget-documentation-preview-modal {\n      flex: 0 0 auto;\n      width: 66.66666667%;\n    }\n  }\n\n',fo={PAGE_COMP_NAME:"page",WIDGET_COMP_NAME:"widget",PROJECT_COMP_NAME:"project"};var Ps=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class fn{static get(d,i){return Ps(this,void 0,void 0,function*(){if(fn.cache.has(d))return fn.cache.get(d);if(fn.promises.has(d))return fn.promises.get(d);const p=i().then(w=>(fn.cache.set(d,w),fn.promises.delete(d),w)).catch(w=>{throw fn.promises.delete(d),w});return fn.promises.set(d,p),p})}static has(d){return fn.cache.has(d)}static peek(d){return fn.cache.get(d)}static invalidate(d){fn.cache.delete(d),fn.promises.delete(d)}static clear(){fn.cache.clear(),fn.promises.clear()}static set(d,i){return Ps(this,void 0,void 0,function*(){return fn.promises.delete(d),fn.cache.set(d,i),i})}static stats(){return{cacheSize:fn.cache.size,pendingRequests:fn.promises.size,keys:Array.from(fn.cache.keys())}}}fn.cache=new Map,fn.promises=new Map;const Nd=g(2895);var xd=g(2110),Ed=g.n(xd),Fd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Us(D){return Fd(this,void 0,void 0,function*(){try{return(yield Nd([Ed()()]).process(D,{from:void 0})).css}catch(d){return console.error("Error processing CSS:",d),null}})}var Ms=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Qo(D){const d=document.getElementById("fspage-properties");if(!d)return;let i=d?.textContent;i=i?i.replace(new RegExp(D,"g"),""):"",d.textContent=i}function Rs(D,d){let i=document.querySelector(`meta[name="${D}"]`);i||(i=document.createElement("meta"),i.setAttribute("name",D),document.head.appendChild(i)),i.setAttribute("content",d)}var Gs=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function mi(D){return Gs(this,void 0,void 0,function*(){var d,i,p,w;!(null===(i=null===(d=D?.library)||void 0===d?void 0:d.css)||void 0===i)&&i.length&&function(k){var F;const P=null===(F=k?.library)||void 0===F?void 0:F.css,x=`vde-css-${k?.origin?k?.origin:k?.widgetId}`;(function(y){const U=document.querySelectorAll(`link.${y}`);U?.length&&U?.forEach(j=>{j.remove()})})(x),P?.length&&P?.sort((y,u)=>Number(y?.order)-Number(u?.order)),P?.forEach(y=>{const u=document.createElement("link");u.classList.add(x),u.setAttribute("rel","stylesheet"),u.setAttribute("href",y.url),document.head.appendChild(u)})}(D),null!==(w=null===(p=D?.library)||void 0===p?void 0:p.js)&&void 0!==w&&w.length&&(yield function(k){return Gs(this,void 0,void 0,function*(){var F;const P=null===(F=k?.library)||void 0===F?void 0:F.js,x=`vde-js-${k?.origin?k?.origin:k?.widgetId}`;if(function(y){const U=document.querySelectorAll(`script.${y}`);U?.length&&U?.forEach(j=>{j.remove()})}(x),P?.length){P.sort((y,u)=>Number(y?.order)-Number(u?.order));for(const y of P)y?.url?document.querySelector(`script[src="${y.url}"]`)?console.log("Library already loaded:",y.url):yield new Promise((u,U)=>{const j=document.createElement("script");j.classList.add(x),j.setAttribute("type","text/javascript"),j.setAttribute("src",y.url),j.setAttribute("crossorigin","anonymous"),j.onload=()=>{u()},j.onerror=J=>{console.error("Failed to load script:",y.url,J),U(new Error(`Failed to load script: ${y.url}`))},document.head.appendChild(j)}):console.warn("Skipping library with invalid URL:",y);console.log("All JavaScript libraries loaded successfully")}})}(D))})}var wn=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Ws(D,d,i,p){return wn(this,void 0,void 0,function*(){var w;const k=yield Mi(D,"the_page_body"),F=new Vn;F.conceptIds=[D],F.inpage=100,F.outputFormat=$t.y0,F.selectors=["the_page_body","the_page_title","the_page_slug","the_page_font_family","the_page_font_size","the_page_width","the_page_type","the_page_meta_title","the_page_meta_description","the_page_meta_keywords"],Ro(F,"").subscribe(x=>wn(this,void 0,void 0,function*(){var y,u;yield function(U){return Ms(this,void 0,void 0,function*(){var j,J,q,se,Ie,Re,Ke,Fe,tt,kt,zt,Mt,ct,hn;[{key:"meta_title",value:null===(J=null===(j=U?.[`the_${fo.PAGE_COMP_NAME}_meta_title`])||void 0===j?void 0:j.data)||void 0===J?void 0:J.the_meta_title},{key:"meta_description",value:null===(se=null===(q=U?.[`the_${fo.PAGE_COMP_NAME}_meta_description`])||void 0===q?void 0:q.data)||void 0===se?void 0:se.the_meta_description},{key:"meta_keywords",value:null===(Re=null===(Ie=U?.[`the_${fo.PAGE_COMP_NAME}_meta_keywords`])||void 0===Ie?void 0:Ie.data)||void 0===Re?void 0:Re.the_meta_keywords},{key:"width",value:null===(Fe=null===(Ke=U?.[`the_${fo.PAGE_COMP_NAME}_width`])||void 0===Ke?void 0:Ke.data)||void 0===Fe?void 0:Fe.the_width},{key:"font_size",value:null===(kt=null===(tt=U?.[`the_${fo.PAGE_COMP_NAME}_font_size`])||void 0===tt?void 0:tt.data)||void 0===kt?void 0:kt.the_font_size},{key:"font_family",value:null===(Mt=null===(zt=U?.[`the_${fo.PAGE_COMP_NAME}_font_family`])||void 0===zt?void 0:zt.data)||void 0===Mt?void 0:Mt.the_font_family},{key:"type",value:null===(hn=null===(ct=U?.[`the_${fo.PAGE_COMP_NAME}_type`])||void 0===ct?void 0:ct.data)||void 0===hn?void 0:hn.the_type}].forEach(Sn=>{Sn.value&&function(Dn,mn){Ms(this,void 0,void 0,function*(){const $n=document.getElementById("fspage-properties")||function(){const Bn=document.createElement("style");return Bn.id="fspage-properties",document.head.appendChild(Bn),Bn}();let bn="";switch(Dn){case"width":Qo(".fspage { width: [^;]+ !important; }"),bn=mn?`.fspage { width: ${mn} !important; }`:"";break;case"font_size":Qo(".fspage { font-size: [^;]+; }"),bn=mn?`.fspage { font-size: ${mn}px; }`:"";break;case"font_family":Qo(".fspage { font-family: [^;]+; }"),bn=mn?`.fspage { font-family: ${mn}; }`:"";break;case"type":Qo(".fspage { width: 1200px; margin: 0 auto; }"),Qo(".fspage { width: 100%; padding: 0; }"),bn="fixed"===mn?".fspage { width: 1200px; margin: 0 auto; }":"fluid"===mn?".fspage { width: 100%; padding: 0; }":"";break;case"meta_title":document.title=mn;break;case"meta_keywords":Rs(Dn.replace("meta_",""),mn);break;case"meta_description":return void Rs(Dn.replace("meta_",""),mn)}$n.textContent+=bn})}(Sn.key,Sn.value)})})}(null===(u=null===(y=x?.[0])||void 0===y?void 0:y.data)||void 0===u?void 0:u[`the_${fo.PAGE_COMP_NAME}`])})),document.getElementById("app").classList.add("fspage");const P=document.head.querySelectorAll("style#mystyleid");Array.from(P).forEach(x=>x.remove()),null!==(w=k?.[0])&&void 0!==w&&w.id?yield Ci(k[0].id,d,i,p):d.innerHTML="<h4>Invalid or Page doesn't exist</h4>"})}function js(D,d,i,p){return wn(this,void 0,void 0,function*(){try{let w=yield(0,oo.qj)(D),k=w.mainId,F=w.data;const P=yield _i(F,k),x=yield ko(k,[],P);return fn.cache.set(`wdgt_${k}`,x),console.log("DataCache after, widgetTree --\x3e",fn.cache,x),x}catch(w){console.error(`Error Caught Rendering Widget: ${w}`)}})}function Vs(D,d,i,p){return wn(this,void 0,void 0,function*(){try{let w=yield(0,oo.ml)(D),k=w.mainId,F=w.data;const P=yield _i(F,k);return yield ko(k,[],P)}catch(w){console.error(`Error Caught Rendering Widget: ${w}`)}})}function $s(D,d,i,p){return wn(this,void 0,void 0,function*(){let w=(yield(0,oo.qj)(D)).mainId;console.log("renderImportedWidget latestWidgetId, DataCache.cache --\x3e",w,fn.cache);const k=fn.cache.get(`wdgt_${w}`);if(console.log("renderImportedWidget widgetTree --\x3e",k),!k.name)return void(d.innerHTML="<h4>Invalid or Widget doesn't exist</h4>");const F=d;yield mi(k);const P=yield Yo(k,F,void 0,i),x=Array.from({length:32},()=>"abcdef"[Math.floor(6*Math.random())]).join("");d.classList.add(`${x}`),d.style.position="relative";const y=document.createElement("style");y.id="mystyleid",y.classList.add("mftsccs-css");const u=`\n        .${x} {\n          ${k.css+P.css+Bs} \n        }\n      `,U=(yield Us(u))||"";if(y.innerHTML=U,document.head.appendChild(y),k.children.length&&k?.children.forEach(j=>{var J;const q=j?.library;(null!==(J=q?.css)&&void 0!==J&&J.length||q?.js.length)&&mi(j)}),p){const j=document.createElement("div");j.id="widget-details",j.innerHTML="",j.innerHTML=`\n        <button class="widget-documentation-btn" widget-id="${k?.origin||k?.widgetId}" class="d-flex align-items-center gap-1" title="Documentation">\n          <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 441 512.02"><path d="M324.87 279.77c32.01 0 61.01 13.01 82.03 34.02 21.09 21 34.1 50.05 34.1 82.1 0 32.06-13.01 61.11-34.02 82.11l-1.32 1.22c-20.92 20.29-49.41 32.8-80.79 32.8-32.06 0-61.1-13.01-82.1-34.02-21.01-21-34.02-50.05-34.02-82.11s13.01-61.1 34.02-82.1c21-21.01 50.04-34.02 82.1-34.02zM243.11 38.08v54.18c.99 12.93 5.5 23.09 13.42 29.85 8.2 7.01 20.46 10.94 36.69 11.23l37.92-.04-88.03-95.22zm91.21 120.49-41.3-.04c-22.49-.35-40.21-6.4-52.9-17.24-13.23-11.31-20.68-27.35-22.19-47.23l-.11-1.74V25.29H62.87c-10.34 0-19.75 4.23-26.55 11.03-6.8 6.8-11.03 16.21-11.03 26.55v336.49c0 10.3 4.25 19.71 11.06 26.52 6.8 6.8 16.22 11.05 26.52 11.05h119.41c2.54 8.79 5.87 17.25 9.92 25.29H62.87c-17.28 0-33.02-7.08-44.41-18.46C7.08 432.37 0 416.64 0 399.36V62.87c0-17.26 7.08-32.98 18.45-44.36C29.89 7.08 45.61 0 62.87 0h173.88c4.11 0 7.76 1.96 10.07 5l109.39 118.34c2.24 2.43 3.34 5.49 3.34 8.55l.03 119.72c-8.18-1.97-16.62-3.25-25.26-3.79v-89.25zm-229.76 54.49c-6.98 0-12.64-5.66-12.64-12.64 0-6.99 5.66-12.65 12.64-12.65h150.49c6.98 0 12.65 5.66 12.65 12.65 0 6.98-5.67 12.64-12.65 12.64H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h142.52c3.71 0 7.05 1.6 9.37 4.15a149.03 149.03 0 0 0-30.54 21.14H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h86.2c-3.82 8.05-6.95 16.51-9.29 25.29h-76.91zm239.61-18.85c7.41 7.43 4.68 18.9-3.05 25.23-7.46 6.01-20.97 8.92-28.68 1.83-7.77-7.23-4.68-18.87 2.76-25.24 7.18-6.05 21.39-9.37 28.97-1.82zm-43.88 95h6.34v-41.33H294.6c0-16.37 30.05-5.74 52.18-11.32v52.65h8.37v17.58h-54.86v-17.58z"/></svg>\n        </button>\n      `,F.appendChild(j);const J=document.createElement("dialog");J.id="widget-documentation-preview-modal",J.className="col-md-8",J.innerHTML="",J.innerHTML='\n        <div class="widget-documentation-heading">\n          <h4>Documentation</h4>\n          <button class="close-documentation-button document-preview-close-button" title="Close">\n            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>\n          </button>\n        </div>\n\n        <div id="documentation-view" class="ck-content"></div>\n\n        <div class="widget-documentation-footer">\n          <button class="document-preview-close-button">Close</button>\n        </div>\n      ',F.appendChild(J),F.querySelectorAll(".widget-documentation-btn")?.forEach(Ie=>{Ie.addEventListener("click",Re=>{const Ke=Re?.target;Ys(Ke?.getAttribute("widget-id"))})}),F.querySelectorAll(".document-preview-close-button")?.forEach(Ie=>{Ie.addEventListener("click",()=>{Ks("widget-documentation-preview-modal")})})}return F.querySelectorAll(".wb-initial-empty").forEach(j=>{j.classList.remove("wb-initial-empty")}),document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(j=>{j.removeAttribute("onclick")}),P})}function Ci(D,d,i,p){return wn(this,void 0,void 0,function*(){try{let w=yield(0,oo.qj)(D),k=w.mainId,F=w.data;const P=yield _i(F,k);return yield qs(k,P,d,i,p)}catch(w){console.error(`Error Caught Rendering Widget: ${w}`),d.textContent=`Error: ${w.message}`}})}function Hs(D,d,i,p){return wn(this,void 0,void 0,function*(){try{const w=yield(0,oo.Cp)(D);return yield qs(D,w,d,i,p)}catch(w){console.error(`Error Caught Rendering Widget: ${w}`)}})}function qs(D,d,i,p){return wn(this,arguments,void 0,function*(w,k,F,P,x=!0){const y=yield ko(w,[],k);if(!y.name)return void(F.innerHTML="<h4>Invalid or Widget doesn't exist</h4>");const u=F;yield mi(y);const U=yield Yo(y,u,void 0,P),j=Array.from({length:32},()=>"abcdef"[Math.floor(6*Math.random())]).join("");F.classList.add(`${j}`),F.style.position="relative";const J=document.createElement("style");J.id="mystyleid",J.classList.add("mftsccs-css");const q=`\n        .${j} {\n          ${y.css+U.css+Bs} \n        }\n      `,se=(yield Us(q))||"";J.innerHTML=se,y.children.length&&y?.children.forEach(Re=>{var Ke;const Fe=Re?.library;(null!==(Ke=Fe?.css)&&void 0!==Ke&&Ke.length||Fe?.js.length)&&mi(Re)}),document.head.appendChild(J);const Ie=document.createElement("script");if(Ie.innerHTML=y.js,u.appendChild(Ie),x){const Re=document.createElement("div");Re.id="widget-details",Re.innerHTML="",Re.innerHTML=`\n        <button class="widget-documentation-btn" widget-id="${y?.origin||y?.widgetId}" class="d-flex align-items-center gap-1" title="Documentation">\n          <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 441 512.02"><path d="M324.87 279.77c32.01 0 61.01 13.01 82.03 34.02 21.09 21 34.1 50.05 34.1 82.1 0 32.06-13.01 61.11-34.02 82.11l-1.32 1.22c-20.92 20.29-49.41 32.8-80.79 32.8-32.06 0-61.1-13.01-82.1-34.02-21.01-21-34.02-50.05-34.02-82.11s13.01-61.1 34.02-82.1c21-21.01 50.04-34.02 82.1-34.02zM243.11 38.08v54.18c.99 12.93 5.5 23.09 13.42 29.85 8.2 7.01 20.46 10.94 36.69 11.23l37.92-.04-88.03-95.22zm91.21 120.49-41.3-.04c-22.49-.35-40.21-6.4-52.9-17.24-13.23-11.31-20.68-27.35-22.19-47.23l-.11-1.74V25.29H62.87c-10.34 0-19.75 4.23-26.55 11.03-6.8 6.8-11.03 16.21-11.03 26.55v336.49c0 10.3 4.25 19.71 11.06 26.52 6.8 6.8 16.22 11.05 26.52 11.05h119.41c2.54 8.79 5.87 17.25 9.92 25.29H62.87c-17.28 0-33.02-7.08-44.41-18.46C7.08 432.37 0 416.64 0 399.36V62.87c0-17.26 7.08-32.98 18.45-44.36C29.89 7.08 45.61 0 62.87 0h173.88c4.11 0 7.76 1.96 10.07 5l109.39 118.34c2.24 2.43 3.34 5.49 3.34 8.55l.03 119.72c-8.18-1.97-16.62-3.25-25.26-3.79v-89.25zm-229.76 54.49c-6.98 0-12.64-5.66-12.64-12.64 0-6.99 5.66-12.65 12.64-12.65h150.49c6.98 0 12.65 5.66 12.65 12.65 0 6.98-5.67 12.64-12.65 12.64H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h142.52c3.71 0 7.05 1.6 9.37 4.15a149.03 149.03 0 0 0-30.54 21.14H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h86.2c-3.82 8.05-6.95 16.51-9.29 25.29h-76.91zm239.61-18.85c7.41 7.43 4.68 18.9-3.05 25.23-7.46 6.01-20.97 8.92-28.68 1.83-7.77-7.23-4.68-18.87 2.76-25.24 7.18-6.05 21.39-9.37 28.97-1.82zm-43.88 95h6.34v-41.33H294.6c0-16.37 30.05-5.74 52.18-11.32v52.65h8.37v17.58h-54.86v-17.58z"/></svg>\n        </button>\n      `,u.appendChild(Re);const Ke=document.createElement("dialog");Ke.id="widget-documentation-preview-modal",Ke.className="col-md-8",Ke.innerHTML="",Ke.innerHTML='\n        <div class="widget-documentation-heading">\n          <h4>Documentation</h4>\n          <button class="close-documentation-button document-preview-close-button" title="Close">\n            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>\n          </button>\n        </div>\n\n        \x3c!-- <div id="documentation-preview" class="ck-content"></div> --\x3e\n        <div id="documentation-view" class="ck-content"></div>\n\n        <div class="widget-documentation-footer">\n          <button class="document-preview-close-button">Close</button>\n        </div>\n      ',u.appendChild(Ke),u.querySelectorAll(".widget-documentation-btn")?.forEach(kt=>{kt.addEventListener("click",zt=>{const Mt=zt?.target;Ys(Mt?.getAttribute("widget-id"))})}),u.querySelectorAll(".document-preview-close-button")?.forEach(kt=>{kt.addEventListener("click",()=>{Ks("widget-documentation-preview-modal")})})}return u.querySelectorAll(".wb-initial-empty").forEach(Re=>{Re.classList.remove("wb-initial-empty")}),document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(Re=>{Re.removeAttribute("onclick")}),U})}function zs(D,d){return wn(this,void 0,void 0,function*(){var i,p,w,k,F,P,x,y,u,U,j;const J=null===(p=null===(i=D?.data)||void 0===i?void 0:i.the_widget)||void 0===p?void 0:p.the_widget_s_child;if(d.push(D),J&&J.length)for(let q=0;q<J.length;q++){const se=J[q];let Ie=null===(x=null===(P=null===(F=null===(k=null===(w=se?.data.the_child_widget)||void 0===w?void 0:w.the_child_widget_info)||void 0===k?void 0:k.data)||void 0===F?void 0:F.the_widget)||void 0===P?void 0:P.the_widget_root)||void 0===x?void 0:x.id;const Re=!(null===(U=null===(u=null===(y=se?.data)||void 0===y?void 0:y.the_child_widget)||void 0===u?void 0:u.the_child_widget_use_latest)||void 0===U||!U.data);Ie=Number(Ie)||!1;let Ke=null;Re&&Ie&&(Ke=(null===(j=(yield(0,oo.qj)(Ie))?.data)||void 0===j?void 0:j[0])||[],Ke.useLatest=!0,se.data.the_child_widget.the_child_widget_info=Ke),se.data.the_child_widget.the_child_widget_info.sChildId=se.id,yield zs(se.data.the_child_widget.the_child_widget_info,d)}})}function _i(D,d){return wn(this,void 0,void 0,function*(){const i=[],p=[...D];try{const w=p.find(k=>k.id===d);yield zs(w,i)}catch(w){console.error("convert to real bulk error",w)}return i})}function Js(D){return wn(this,arguments,void 0,function*(d,i=[],p=""){let w=yield(0,oo.Cp)(d);const k=yield _i(w,d);return yield ko(d,[],k)})}function ko(D){return wn(this,arguments,void 0,function*(d,i=[],p,w=""){var k,F,P,x,y,u,U,j,J,q,se,Ie,Re,Ke,Fe,tt,kt,zt,Mt,ct,hn,Sn,Dn,mn,$n,bn,Bn,En,Zn,Qn,Yn,Kn,ao,co,lo,An,Hn,Gn,Pn,qn,Ao,Lo,No,xo,Eo,Fo,Oo,Do,Ht,yo,Xo,ei,ti,ni,oi,ii,ri,si,ai,go,ci;try{const rn=new Ki,Xn=(0,oo.ix)(p,d);i.push(d);const jt=null===(k=Xn?.data)||void 0===k?void 0:k.the_widget;rn.name=null===(P=null===(F=jt?.the_widget_name)||void 0===F?void 0:F.data)||void 0===P?void 0:P.the_name,rn.html=null===(y=null===(x=jt?.the_widget_html)||void 0===x?void 0:x.data)||void 0===y?void 0:y.the_html,rn.css=null===(U=null===(u=jt?.the_widget_css)||void 0===u?void 0:u.data)||void 0===U?void 0:U.the_css,rn.js=null===(J=null===(j=jt?.the_widget_js)||void 0===j?void 0:j.data)||void 0===J?void 0:J.the_js,rn.root=Number(null!==(se=null===(q=jt?.the_widget_root)||void 0===q?void 0:q.id)&&void 0!==se?se:0),rn.origin=0!=rn.root?rn.root:Number((null===(Re=null===(Ie=jt?.the_widget_origin)||void 0===Ie?void 0:Ie.data)||void 0===Re?void 0:Re.the_origin)||(null===(Fe=null===(Ke=jt?.the_widget_origin)||void 0===Ke?void 0:Ke.data)||void 0===Fe?void 0:Fe.the_originid)),rn.version=null===(kt=null===(tt=jt?.the_widget_version)||void 0===tt?void 0:tt.data)||void 0===kt?void 0:kt.the_version,rn.clean=null===(Mt=null===(zt=jt?.the_widget_clean)||void 0===zt?void 0:zt.data)||void 0===Mt?void 0:Mt.the_clean,rn.timestamp=null===(hn=null===(ct=jt?.the_widget_timestamp)||void 0===ct?void 0:ct.data)||void 0===hn?void 0:hn.the_timestamp,rn.id=Xn?.id;const vo=null===(Dn=null===(Sn=jt?.the_widget_type)||void 0===Sn?void 0:Sn.data)||void 0===Dn?void 0:Dn.the_type;rn.type="null"==vo||null==vo?"the_element_name":vo,rn.after_render=null===($n=null===(mn=jt?.the_widget_after_render)||void 0===mn?void 0:mn.data)||void 0===$n?void 0:$n.the_after_render,rn.before_render=null===(Bn=null===(bn=jt?.the_widget_before_render)||void 0===bn?void 0:bn.data)||void 0===Bn?void 0:Bn.the_before_render,rn.dependency=null===(Zn=null===(En=jt?.the_widget_dependency)||void 0===En?void 0:En.data)||void 0===Zn?void 0:Zn.the_dependency,rn.update=null===(Yn=null===(Qn=jt?.the_widget_update)||void 0===Qn?void 0:Qn.data)||void 0===Yn?void 0:Yn.the_update,rn.widgetId=d,rn.mount_child=null===(ao=null===(Kn=jt?.the_widget_mount_child)||void 0===Kn?void 0:Kn.data)||void 0===ao?void 0:ao.the_mount_child;const zn=jt?.the_widget_s_child;Xn?.useLatest&&(rn.useLatest=!0),Xn?.sChildId&&(rn.sChildId=Xn.sChildId);const Wo=null===(co=jt?.the_widget_s_css_library)||void 0===co?void 0:co.map(gn=>{var vn,sn,Ln,Fn,Un,Mn,Rn,xn;return{order:null===(Fn=null===(Ln=null===(sn=null===(vn=gn?.data)||void 0===vn?void 0:vn.the_css_library)||void 0===sn?void 0:sn.the_css_library_order)||void 0===Ln?void 0:Ln.data)||void 0===Fn?void 0:Fn.the_order,url:null===(xn=null===(Rn=null===(Mn=null===(Un=gn?.data)||void 0===Un?void 0:Un.the_css_library)||void 0===Mn?void 0:Mn.the_css_library_url)||void 0===Rn?void 0:Rn.data)||void 0===xn?void 0:xn.the_url}}),eo=null===(lo=jt?.the_widget_s_js_library)||void 0===lo?void 0:lo.map(gn=>{var vn,sn,Ln,Fn,Un,Mn,Rn,xn;return{order:null===(Fn=null===(Ln=null===(sn=null===(vn=gn?.data)||void 0===vn?void 0:vn.the_js_library)||void 0===sn?void 0:sn.the_js_library_order)||void 0===Ln?void 0:Ln.data)||void 0===Fn?void 0:Fn.the_order,url:null===(xn=null===(Rn=null===(Mn=null===(Un=gn?.data)||void 0===Un?void 0:Un.the_js_library)||void 0===Mn?void 0:Mn.the_js_library_url)||void 0===Rn?void 0:Rn.data)||void 0===xn?void 0:xn.the_url}});rn.library={css:Wo||[],js:eo||[]};const uo=null===(Hn=null===(An=jt?.the_widget_assistant)||void 0===An?void 0:An.data)||void 0===Hn?void 0:Hn.the_assistant;rn.assistant={id:null===(Pn=null===(Gn=uo?.the_assistant_id)||void 0===Gn?void 0:Gn.data)||void 0===Pn?void 0:Pn.the_id,input:null===(Ao=null===(qn=uo?.the_assistant_input)||void 0===qn?void 0:qn.data)||void 0===Ao?void 0:Ao.the_input,type:null===(No=null===(Lo=uo?.the_assistant_type)||void 0===Lo?void 0:Lo.data)||void 0===No?void 0:No.the_type};const bi=null===(xo=jt?.the_widget_s_custom_function)||void 0===xo?void 0:xo.map(gn=>{var vn,sn,Ln,Fn,Un,Mn,Rn;const xn=null===(vn=gn?.data)||void 0===vn?void 0:vn.the_custom_function;return{id:gn?.id,name:null===(Ln=null===(sn=xn?.the_custom_function_name)||void 0===sn?void 0:sn.data)||void 0===Ln?void 0:Ln.the_name,slug:null===(Un=null===(Fn=xn?.the_custom_function_slug)||void 0===Fn?void 0:Fn.data)||void 0===Un?void 0:Un.the_slug,code:null===(Rn=null===(Mn=xn?.the_custom_function_code)||void 0===Mn?void 0:Mn.data)||void 0===Rn?void 0:Rn.the_code}});if(rn.custom_functions=bi,zn?.length)for(let gn=0;gn<zn.length;gn++){const vn=(null===(Oo=null===(Fo=null===(Eo=zn[gn])||void 0===Eo?void 0:Eo.data.the_child_widget)||void 0===Fo?void 0:Fo.the_child_widget_info)||void 0===Oo?void 0:Oo.id)||(null===(Xo=null===(yo=null===(Ht=null===(Do=zn[gn])||void 0===Do?void 0:Do.data.the_child_widget)||void 0===Ht?void 0:Ht.the_child_widget_parent)||void 0===yo?void 0:yo.data)||void 0===Xo?void 0:Xo.the_parent),sn=yield ko(vn,i,p,w),Ln=null===(ii=null===(oi=null===(ni=null===(ti=null===(ei=zn[gn])||void 0===ei?void 0:ei.data)||void 0===ti?void 0:ti.the_child_widget)||void 0===ni?void 0:ni.the_child_widget_type)||void 0===oi?void 0:oi.data)||void 0===ii?void 0:ii.the_type,Fn=null===(ci=null===(go=null===(ai=null===(si=null===(ri=zn[gn])||void 0===ri?void 0:ri.data)||void 0===si?void 0:si.the_child_widget)||void 0===ai?void 0:ai.the_child_widget_wrapper)||void 0===go?void 0:go.data)||void 0===ci?void 0:ci.the_wrapper;sn.type="null"==Ln||null==Ln?"the_element_name":Ln,sn.wrapper=Fn,rn.children.push(sn)}return rn}catch(rn){throw rn instanceof Error&&console.error("error converting bulkwidget to widget tree",rn.message),rn}})}function Yo(D,d){return wn(this,arguments,void 0,function*(i,p,w=!0,k,F,P=null){var x,y;const u=new Zo;u.html=i.html,P&&(u.parentWidget=Zs(P)),u.widgetType=i.type,u.componentDidMountFunction=i.before_render,u.addEventFunction=i.after_render,u.mountChildWidgetsFunction=i.mount_child,u.widgetState=Object.assign({},F),u.customFunctions=i.custom_functions,u.widgetDependenciesData=i.dependency,k&&(u.data=k),p.innerHTML="";const U=p;if(U&&(yield u.mount(U),i.widget=u,i.children.length>0&&(null===(x=u.childWidgetElement)||void 0===x?void 0:x.length)>0))for(let j=0;j<(null===(y=i.children)||void 0===y?void 0:y.length);j++){const J=i.children[j];for(let q=0;q<u.childWidgetElement.length;q++){const se=u.childWidgetElement[q];if(J.wrapper===se.id){const Ie=Qs(J);J.html=`<div id="${J.wrapper}">${J.html}</div>`;const Re=yield Yo(Ie,se,!1,u.data,u.widgetState,u);u.childWidgets.push(Re),u.css=u.css+Re.css+`#${se.id} { ${J.css} }`,Re.dataChange(Ke=>{var Fe;const tt=null===(Fe=Ke?.type)||void 0===Fe?void 0:Fe.characterValue;tt&&(u.childrenData[tt]=Ke)})}}}return console.log("newWidget ->",u,i),yield nr(p,".widget_container"),u})}function Zs(D){const d={};for(const[i,p]of Object.entries(D))"object"==typeof p&&null!==p&&Array.isArray(p)||(d[i]=p);return d}function tr(D,d){return wn(this,arguments,void 0,function*(i,p,w=!0,k,F,P=null){var x,y;let u=new Zo;u.html=i.html,P&&(u.parentWidget=Zs(P)),u.widgetState=Object.assign({},k),u.widgetType=i.type,u.componentDidMountFunction=i.before_render,u.addEventFunction=i.after_render,u.mountChildWidgetsFunction=i.mount_child,u.customFunctions=i.custom_functions,u.widgetDependenciesData=i.dependency,u.inDevelopment=!1!==F,p.innerHTML="";let U=p;if(U&&(yield u.mount(U),i.widget=u,i.children.length>0&&(null===(x=u.childWidgetElement)||void 0===x?void 0:x.length)>0))for(let j=0;j<(null===(y=i.children)||void 0===y?void 0:y.length);j++){let J=i.children[j];for(let q=0;q<u.childWidgetElement.length;q++){let se=u.childWidgetElement[q];if(J.wrapper===se.id){const Ie=Qs(J),Re=yield tr(Ie,se,!1,u.widgetState,F,u);u.childWidgets.push(Re),u.css=u.css+Re.css+`#${se.id} { ${J.css} }`,Re.dataChange(Ke=>{var Fe;console.log("This is the data change in child",Ke);let tt=null===(Fe=Ke?.type)||void 0===Fe?void 0:Fe.characterValue;tt&&(u.childrenData[tt]=Ke),console.log("new child data",u.childrenData)})}}}return console.log("newWidget ->",u,i),u})}function Qs(D){return D.html=D.html.replace(/<[^>]*\bclass=["'][^"']*\bwidget_container\b[^"']*["'][^>]*>/g,d=>d.replace(/\bwidget_container\b/g,"").trim()),D.html=D.html.replace(/<[^>]*\bdraggable=["'][^"']*\btrue\b[^"']*["'][^>]*>/g,d=>d.replace(/\btrue\b/g,"false").trim()),D.html=D.html.replace(/<[^>]*\bclass=["'][^"']*\bhover-element\b[^"']*["'][^>]*>/g,d=>d.replace(/\bhover-element\b/g,"").trim()),D.html=D.html.replace(/<[^>]*\bclass=["'][^"']*\bwb-block\b[^"']*["'][^>]*>/g,d=>d.replace(/\bwb-block\b/g,"").trim()),D.html=D.html.replace(/<[^>]*onclick="widgetSelected\(event\)"\s*,?\s*ondragover="_dragService\.dragOverWidgetElement\(event\)"\s*,?\s*ondrop="_dragService\.dropWidgetElement\(event\)"\s*,?\s*ondragstart="_dragService\.dragStartWidgetElement\(event\)"\s*,?\s*ondragend="_dragService\.dragEndWidgetElement\(event\)"[^>]*>/g,d=>d.replace(/onclick="widgetSelected\(event\)"/g,'onclick=""').replace(/ondragover="_dragService\.dragOverWidgetElement\(event\)"/g,'ondragover=""').replace(/ondrop="_dragService\.dropWidgetElement\(event\)"/g,'ondrop=""').replace(/ondragstart="_dragService\.dragStartWidgetElement\(event\)"/g,'ondragstart=""').replace(/ondragend="_dragService\.dragEndWidgetElement\(event\)"/g,'ondragend=""').trim()),D.html=D.html.replace(/<[^>]*\bondragstart=["'][^"']*\b_dragService\.onWidgetDragStart\(event\)\b[^"']*["'][^>]*>/g,d=>d.replace(/\b_dragService\.onWidgetDragStart\(event\)\b/g,"").trim()),D}function Od(D,d){return wn(this,void 0,void 0,function*(){return D&&1===D.nodeType&&D.querySelectorAll(d).forEach(i=>{for(;i.firstChild;)i.parentNode.insertBefore(i.firstChild,i);i.remove()}),D})}function nr(D,d){return wn(this,void 0,void 0,function*(){const i=D.querySelectorAll(d);for(const p of i){const w=p.parentElement;if(w){for(;p.firstChild;){const k=yield Od(p.firstChild,d);w.insertBefore(k,p)}w.removeChild(p)}}})}function Ys(D){return wn(this,void 0,void 0,function*(){const d=new Vn;d.typeConnection="the_widget_documentation",d.name="documentationText",d.selectors=["the_documentation_text"];const i=new Vn;i.typeConnection="the_widget_s_documentation",i.name="documentationBlank",i.selectors=["the_documentation_text","the_documentation_content","the_documentation_language","the_documentation_doc_title","the_documentation_folder","the_documentation_creator_email","the_documentation_created_by","the_documentation_content","the_documentation_type","the_documentation_s_doc_url","the_documentation_s_image_url","the_documentation_s_video_link","the_documentation_auth_type","the_documentation_bearer_token","the_documentation_method","the_documentation_method_url","the_documentation_username","the_documentation_password","the_documentation_s_json_list","the_documentation_api_script","the_documentation_api_body","the_documentation_code_editor","the_documentation_return"];const p=new Vn;p.typeConnection="the_documentation_s_json_list",p.name="documentationJSON",p.selectors=["the_json_list_key","the_json_list_value"],i.freeschemaQueries=[p];const w=new Vn;w.conceptIds=[D],w.freeschemaQueries=[d,i],w.inpage=100,w.outputFormat=$t.y0,yield Ro(w,"").subscribe(k=>wn(this,void 0,void 0,function*(){var F,P,x,y,u,U,j,J,q,se,Ie;let Re;const Ke=(null===(J=null===(j=null===(U=null===(u=null===(y=null===(x=null===(P=null===(F=k?.[0])||void 0===F?void 0:F.data)||void 0===P?void 0:P.the_widget)||void 0===x?void 0:x.the_widget_documentation)||void 0===y?void 0:y.data)||void 0===u?void 0:u.the_documentation)||void 0===U?void 0:U.the_documentation_text)||void 0===j?void 0:j.data)||void 0===J?void 0:J.the_text)||"";Ke&&(Re=Ke);const Fe=null===(Ie=null===(se=null===(q=k?.[0])||void 0===q?void 0:q.data)||void 0===se?void 0:se.the_widget)||void 0===Ie?void 0:Ie.the_widget_s_documentation;Fe?.length&&(Re=Fe?.map(kt=>{var zt,Mt,ct,hn,Sn,Dn,mn,$n,bn,Bn,En,Zn,Qn,Yn,Kn,ao,co,lo,An,Hn,Gn,Pn,qn,Ao,Lo,No,xo,Eo,Fo,Oo,Do;const Ht=null===(zt=kt?.data)||void 0===zt?void 0:zt.the_documentation,yo=null===(ct=null===(Mt=Ht?.the_documentation_type)||void 0===Mt?void 0:Mt.data)||void 0===ct?void 0:ct.the_type,Xo=null===(Sn=null===(hn=Ht?.the_documentation_content)||void 0===hn?void 0:hn.data)||void 0===Sn?void 0:Sn.the_content,ei=null===(mn=null===(Dn=Ht?.the_documentation_creator_email)||void 0===Dn?void 0:Dn.data)||void 0===mn?void 0:mn.the_creator_email,ti=null===(bn=null===($n=Ht?.the_documentation_doc_title)||void 0===$n?void 0:$n.data)||void 0===bn?void 0:bn.the_doc_title,ni=null===(En=null===(Bn=Ht?.the_documentation_method)||void 0===Bn?void 0:Bn.data)||void 0===En?void 0:En.the_method,oi=null===(Qn=null===(Zn=Ht?.the_documentation_method_url)||void 0===Zn?void 0:Zn.data)||void 0===Qn?void 0:Qn.the_method_url,ii=null===(Kn=null===(Yn=Ht?.the_documentation_bearer_token)||void 0===Yn?void 0:Yn.data)||void 0===Kn?void 0:Kn.the_bearer_token,ri=null===(co=null===(ao=Ht?.the_documentation_username)||void 0===ao?void 0:ao.data)||void 0===co?void 0:co.the_username,si=null===(An=null===(lo=Ht?.the_documentation_password)||void 0===lo?void 0:lo.data)||void 0===An?void 0:An.the_password,ai=null===(Gn=null===(Hn=Ht?.the_documentation_auth_type)||void 0===Hn?void 0:Hn.data)||void 0===Gn?void 0:Gn.the_auth_type,go=Ht?.the_documentation_s_json_list,ci=null===(qn=null===(Pn=Ht?.the_documentation_api_script)||void 0===Pn?void 0:Pn.data)||void 0===qn?void 0:qn.the_api_script,rn=null===(Lo=null===(Ao=Ht?.the_documentation_api_body)||void 0===Ao?void 0:Ao.data)||void 0===Lo?void 0:Lo.the_api_body,Xn=null===(xo=null===(No=Ht?.the_documentation_language)||void 0===No?void 0:No.data)||void 0===xo?void 0:xo.the_language,jt=null===(Fo=null===(Eo=Ht?.the_documentation_return)||void 0===Eo?void 0:Eo.data)||void 0===Fo?void 0:Fo.the_return,lr=null===(Do=null===(Oo=Ht?.the_documentation_code_editor)||void 0===Oo?void 0:Oo.data)||void 0===Do?void 0:Do.the_code_editor,vo=Ht?.the_documentation_s_doc_url,zn=Ht?.the_documentation_s_image_url,Wo=Ht?.the_documentation_s_video_link;let eo={type:yo,content:Xo,creatorEmail:ei,title:ti};if("blank"===yo)eo=Object.assign({},eo);else if("api"===yo){const vn=[];go?.length&&go?.forEach(sn=>{var Ln,Fn,Un,Mn,Rn,xn,dr,ur;vn.push({key:null===(Mn=null===(Un=null===(Fn=null===(Ln=sn?.data)||void 0===Ln?void 0:Ln.the_json_list)||void 0===Fn?void 0:Fn.the_json_list_key)||void 0===Un?void 0:Un.data)||void 0===Mn?void 0:Mn.the_key,value:null===(ur=null===(dr=null===(xn=null===(Rn=sn?.data)||void 0===Rn?void 0:Rn.the_json_list)||void 0===xn?void 0:xn.the_json_list_value)||void 0===dr?void 0:dr.data)||void 0===ur?void 0:ur.the_value})}),eo=Object.assign(Object.assign({},eo),{method:ni,methodURL:oi,authType:ai,username:ri,password:si,bearerToken:ii,json:vn,script:ci,body:rn})}else"function"===yo&&(eo=Object.assign(Object.assign({},eo),{language:Xn,return:jt,codeEditor:lr}));const uo=[],bi=[],gn=[];return zn?.length&&zn?.forEach(vn=>{var sn;uo.push(null===(sn=vn?.data)||void 0===sn?void 0:sn.the_image_url)}),Wo?.length&&Wo?.forEach(vn=>{var sn;bi.push(null===(sn=vn?.data)||void 0===sn?void 0:sn.the_video_link)}),vo?.length&&vo?.forEach(vn=>{var sn;gn.push(null===(sn=vn.data)||void 0===sn?void 0:sn.the_doc_url)}),eo=Object.assign(Object.assign({},eo),{imageList:uo,linkList:gn,videoList:bi}),eo})),yield function(){return wn(this,void 0,void 0,function*(){document.getElementById("widget-documentation-preview-modal").showModal()})}(),function(tt,kt){wn(this,void 0,void 0,function*(){const zt=document.getElementById("documentation-view");if(0!=r.B.DOCUMENTATION_WIDGET)return void(yield Ci(r.B.DOCUMENTATION_WIDGET,zt,{currentWidgetId:kt}));const Mt=document.getElementById("documentation-preview");Mt.innerHTML="",tt&&tt?.length&&"string"!=typeof tt?tt?.forEach(ct=>{var hn,Sn,Dn,mn;const $n=document.createElement("h3");let bn="";switch(ct?.type){case"api":bn="API";break;case"function":bn="Functions and Classes";break;case"imgAndLink":bn="Images and Links";break;default:bn=""}$n.innerHTML=`\n        ${ct?.title} ${bn?"("+bn+")":""}\n      `,Mt?.appendChild($n);const Bn=document.createElement("div");Bn.classList.add("widget-doc-content"),ct?.content&&(Bn.innerHTML=ct.content,Mt?.appendChild(Bn));const En=document.createElement("div");if(En.classList.add("widget-doc-section"),"api"===ct.type){let An="";An="basicAuth"===ct.authType?`\n            <p>username: <code>${ct?.username}</code></p>\n            <p>password: <code>${ct?.password}</code></p>\n          `:"bearerToken"===ct.authType?`\n          <h6>Token: <code>${ct?.bearerToken}</code></h6>\n          `:"None";const Hn=ct.json.map(qn=>`${qn?.key}: ${qn?.value}`).join(", "),Gn=document.createElement("pre");Gn.textContent=Hn,En.innerHTML=`\n          <div class="pv-3">\n            <h6>Method Type: <code>${ct?.method.toUpperCase()}</code></h6>\n            <h6>Endpoint: <code>${ct?.methodURL}</code></h6>\n          </div>\n          <div class="pv-3">\n            <h6>Auth Type: <code>${(null===(hn=ct?.authType)||void 0===hn?void 0:hn.toUpperCase())||""}</code></h6>\n            ${An}\n          </div>\n          <div class="pv-3">\n            <h6>JSON</h6>\n            <code class="pre-wrapper" id="json-list-pre"></code>\n          </div>\n          <div class="pv-3">\n            <h6>Body</h6>\n            ${ct.body}\n          </div>\n          <div class="pv-3">\n            <h6>Scripts</h6>\n            ${ct.script}\n          </div>\n        `;const Pn=En.querySelector("#json-list-pre");Pn&&(Pn.appendChild(Gn),Pn.removeAttribute("id"))}else if("function"===ct.type){const An=document.createElement("pre");An.textContent=ct?.codeEditor;const Hn=document.createElement("pre");Hn.textContent=ct?.return,En.innerHTML=`\n          <div class="mv-3">\n            <h6>Parameter</h6>\n            <p>Language: ${ct?.language}</p>\n            <code class="pre-wrapper" id="editor-pre"></pre></code>\n            <h6>Returns</h6>\n            <code class="pre-wrapper" id="return-pre"></code>\n          </div>\n        `;const Gn=En.querySelector("#editor-pre");Gn&&(Gn.appendChild(An),Gn.removeAttribute("id"));const Pn=En.querySelector("#return-pre");Pn&&(Pn.appendChild(Hn),Pn.removeAttribute("id"))}const Zn=document.createElement("div");Zn.classList.add("mv-3");const Qn=null===(Sn=ct?.linkList)||void 0===Sn?void 0:Sn.map(An=>`\n            <p>${An}</p>\n          `).join(""),Yn=null===(Dn=ct?.imageList)||void 0===Dn?void 0:Dn.map(An=>`\n          <img src="${An}">\n        `).join(""),Kn=null===(mn=ct?.videoList)||void 0===mn?void 0:mn.map(An=>`\n            <iframe width="560" height="315" src="${An}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>\n        `).join("");Zn.innerHTML=`\n        <div class="mv-3">\n          ${Qn?.length?`\n          <div class="mv-3">\n          <h6>Web links</h6>\n          ${Qn}\n          </div>\n        `:""}\n          ${Yn?.length?`\n          <h6>Attachments</h6>\n          <div class="documentation-attachments">\n            ${Yn}\n          </div>\n        `:""}\n          ${Kn?.length?`\n            <h6>Videos</h6>\n            <div class="documentation-attachments">\n              ${Kn}\n            </div>\n            `:""}\n        </div>\n        <p class="documentation-creator">- added by: <span>${ct?.creatorEmail}</span></p>\n      `,En?.appendChild(Zn),Mt?.appendChild(En)}):void 0!==tt&&(Mt.innerHTML=tt)})}(Re,D)}))})}function Ks(D){return wn(this,void 0,void 0,function*(){const d=document.getElementById(D),i=d?.querySelector("form");i?.reset(),d?.close()})}var Dd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function wi(D){return Dd(this,arguments,void 0,function*(d,i=null,p="",w={concepts:[],connections:[]}){var k,F,P,x;if(Dt)try{const j=yield tn("CreateData",{json:d,ofConcept:i,typeConcept:p,actions:w});return!(null===(F=null===(k=j?.actions)||void 0===k?void 0:k.concepts)||void 0===F)&&F.length&&(w.concepts=JSON.parse(JSON.stringify(j.actions.concepts))),!(null===(x=null===(P=j?.actions)||void 0===P?void 0:P.connections)||void 0===x)&&x.length&&(w.connections=JSON.parse(JSON.stringify(j.actions.connections))),j.data}catch(j){console.error("CreateTheComposition sw error: ",j),ln(j)}let y=999,u=999,U=(0,re.o)();for(const j in d){let J=Bd(j);if("string"!=typeof d[j]&&"number"!=typeof d[j])if(null==i||0==i.id)U=yield(0,De.k)(J,"",!0,y,4,u,void 0,w),Array.isArray(d[j])&&(J=Xs(J)),yield wi(d[j],U,J,w);else{Array.isArray(d[j])&&(J=ea(J));let q=ea(j),se=yield(0,De.k)(J,"",!0,y,4,u,void 0,w);U=se;let Ie=ta(p,q),Re=yield(0,wt.$)(Ie,u,y,y,w);yield(0,no.F)(i.id,se.id,Re.id,1e3,Re.characterValue,y,w),Array.isArray(d[j])&&(J=Xs(J)),yield wi(d[j],se,J,w)}else{let q=ta(p,j),se=yield(0,wt.$)(q,u,y,y,w),Ie=yield(0,De.k)(j,d[j].toString(),!1,y,4,u,void 0,w);console.log("this is the type concept in down",se,Ie),null!=i&&(yield(0,no.F)(i.id,Ie.id,se.id,1e3,q,y,w))}}return U})}function Bd(D){return D.startsWith("the_")?D:"the_"+D}function Xs(D){return D.endsWith("_s")?D:D+"_s"}function ea(D){return D.replace(/_s$/,"")}const Pd=D=>/^[+-]?\d+(\.\d+)?$/.test(D);function ta(D,d){return Pd(d)?D+"_":D+"_"+((i=d).startsWith("the_")?i.slice(4):i);var i}class na{constructor(){this.prototype="",this.required=[],this.optional=[],this.field="string",this.childPrototypes=[],this.isCompositional=!1,this.options=[],this.isQueryType=!1,this.querySelector=null,this.concepts=[],this.connections=[],this.addedConcepts=[],this.addedConnections=[]}}class or{static getValue(d){return d in this.environments?this.environments[d]:null}static setValue(d,i){return this.environments[d]=i,this}}function io(D,d){if(Array.isArray(D)&&Array.isArray(d))for(let i=0;i<d.length;i++)D.push(d[i]);return D}or.environments={};var So=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function ir(D){return So(this,arguments,void 0,function*(d,i=null){let p=[],w=[],k=[],F=(0,re.o)();try{null==i&&(i=new Zi,yield i.initialize());let P=[];if(d.isCompositional){if(F=yield function(u,U,j,J){return So(this,void 0,void 0,function*(){let q=(0,re.o)(),se=yield J.MakeTheInstanceConceptLocal("the_composition","",!0,999,999,999),Ie=yield J.MakeTheTypeConceptLocal("the_composition_type",999,999,999),Re=yield J.MakeTheTypeConceptLocal(u,999,999,999),Ke=yield J.CreateTheConnectionLocal(se.id,Re.id,Ie.id,1e3,"the_composition_type");return q=se,U.push(Ie),U.push(Re),j.push(Ke),q})}(d.prototype,p,w,i),d.isQueryType){let u=yield function(j,J,q){return So(this,void 0,void 0,function*(){let se=[],Ie=[],Re="the_composition_filter_type",Ke="the_composition_selector",Fe=yield q.MakeTheTypeConceptLocal(Re,999,999,999),tt=yield q.MakeTheTypeConceptLocal(Ke,999,999,999);if(null!=j){let kt=yield q.MakeTheTypeConceptLocal(j.selector,999,999,999);se.push(kt);let zt=yield q.MakeTheTypeConceptLocal(j.filterType,999,999,999);se.push(kt),se.push(zt);let Mt=yield q.CreateTheConnectionLocal(J.id,kt.id,tt.id,1e3,Ke,999);Ie.push(Mt);let ct=yield q.CreateTheConnectionLocal(J.id,zt.id,Fe.id,1e3,Re,999);Ie.push(ct)}return{concepts:se,connections:Ie}})}(d.querySelector,F,i),U=u.concepts;io(k,u.connections),io(p,U)}if(d.options.length>0){let u=yield function(j,J,q){return So(this,void 0,void 0,function*(){let se=[],Ie=[],Re="the_composition_s_option",Ke=yield q.MakeTheTypeConceptLocal(Re,999,999,999);for(let Fe=0;Fe<j.length;Fe++){let tt=j[Fe].type,kt=j[Fe].value,zt=yield q.MakeTheInstanceConceptLocal(tt,kt,!1,999,999,999);se.push(zt);let Mt=yield q.CreateTheConnectionLocal(J.id,zt.id,Ke.id,1e3,Re,999);Ie.push(Mt)}return{concepts:se,connections:Ie}})}(d.options,F,i),U=u.concepts;io(k,u.connections),io(p,U)}}else F=yield function(u,U){return So(this,void 0,void 0,function*(){let j=yield(0,Se.A)(5124),J=yield U.MakeTheTypeConceptLocal(u,999,999,999);return yield function(se,Ie,Re,Ke){return So(this,void 0,void 0,function*(){let Fe=yield Ke.CreateTheConceptLocal("",Ie.characterValue,999,se.id,Ie.id,4,!1);return Fe.characterValue=Ie.characterValue,Fe.typeCharacter=Ie.characterValue,Fe.isComposition=!0,Fe.type=Ie,Fe})}(j,J,0,U)})}(d.prototype,i),k=yield ia(d.required,F,p,i,!0),P=yield ia(d.optional,F,p,i),p.push(F);let x=oa(F,!0,!0),y=yield i.MakeTheTypeConceptLocal(x,999,999,999);if(p.push(y),d.childPrototypes.length>0)for(let u=0;u<d.childPrototypes.length;u++){let U=yield ir(d.childPrototypes[u]),j=U.mainConcept,J=U.connections,q=U.concepts,se=yield i.CreateTheConnectionLocal(F.id,j.id,y.id,1e3,x,999);k.push(se),io(k,J),io(p,q),p.push(j)}io(k,P),io(k,w),io(p,d.addedConcepts),io(k,d.addedConnections),d.concepts=p,d.connections=k,console.log("this is the connections",k)}catch{i?.rollbackTransaction()}return{concepts:p,connections:k,mainConcept:F}})}function oa(D,d=!0,i=!1){var p;let w="the_prototype_of_"+(null===(p=D.type)||void 0===p?void 0:p.characterValue);return w+=d?"_requires":"_optional",i&&(w+="_the_composition"),w}function ia(D,d,i,p){return So(this,arguments,void 0,function*(w,k,F,P,x=!1,y=!1){let u=[],U=[],j=oa(k,x,y),J=yield P.MakeTheTypeConceptLocal(j,999,999,999);F.push(J);for(let q=0;q<w.length;q++){let se=yield P.MakeTheTypeConceptLocal(w[q],999,999,999);u.push(se)}for(let q=0;q<u.length;q++){let se=yield P.CreateTheConnectionLocal(k.id,u[q].id,J.id,1e3,j,999);U.push(se)}for(let q=0;q<u.length;q++)F.push(u[q]);return U})}var Ud=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function rr(D){return Ud(this,void 0,void 0,function*(){let d;try{const i=yield fetch(r.B.GetCachedImage(D),{method:"GET"});return i.ok?d=i.body:(console.log("Error in Getting Image",i.status),(0,o.ry)(i)),d}catch(i){throw i instanceof Error?console.log("Error in Getting Local concept by character value error message: ",i):console.log("Error in Getting Local concept by character value unexpected error: ",i),d}})}var Md=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function ra(D){return Md(this,arguments,void 0,function*(d,i="normal"){let p,w=d.split("/").pop();if("small"==i){let k=w?.split(".");k&&(w=k[0]+"_small."+k[1])}return w&&(p=yield rr(w)),p})}function sa(D,d="normal"){let i=D;try{if(D){let p=D.split("/").pop();if("small"==d){let w=p?.split(".");w&&(p=w[0]+"_small."+w[1])}p&&(i=r.B.GetCachedImage(p))}}catch{console.log("This url has error",D)}return i}var Dt,Tn=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};const Rd=Date.now().toString(36)+Math.random().toString(36).substring(2);let sr=[],so=[],ar=!1;function aa(D){ar=D}function cr(D="",d){an.b.BearerAccessToken=D,Dt&&tn("updateAccessToken",{accessToken:D,session:an.b.sessionId})}function ca(){return Tn(this,arguments,void 0,function*(D="",d="",i="",p="",w=!0,k="",F,P={},x={}){var y;try{r.B.BASE_URL=D,r.B.AI_URL=d,r.B.NODE_URL=p,r.B.BASE_APPLICATION=k,r.B.LOG_SERVER=null!==(y=x.logserver)&&void 0!==y?y:"https://logdev.freeschema.com",console.log("setting the logserver",r.B.LOG_SERVER,x.logserver),cr(i);let u=Math.floor(1e8*Math.random());r.B.setRandomizer(u);const U={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1};if(r.B.FLAGS=U,r.B.FLAGS=Object.assign(Object.assign({},U),P),function(j){const J=Ue.V.logfunction("initializeFlags",arguments);try{j.logApplication&&(Ji.initialize(),Ue.V.logApplicationActivationStatus=!0,console.warn("Application log started.")),j.logPackage&&(Ue.V.logPackageActivationStatus=!0,console.warn("Package log started.")),j.accessTracker&&(Vo.J.activateStatus=!0,console.warn("Access Tracker Activated.")),j.isTest&&(n.B.isDataLoaded=!0,n.B.isCharacterLoaded=!0,n.B.isTypeLoaded=!0,n.B.isLocalDataLoaded=!0,n.B.isLocalTypeLoaded=!0,n.B.isLocalCharacterLoaded=!0,n.B.isConnectionLoaded=!0,n.B.isConnectionTypeLoaded=!0,n.B.isLocalConnectionLoaded=!0),Ue.V.logUpdate(J)}catch(q){throw(0,o.ey)(J,"initializeFlags",q),q}}(r.B.FLAGS),!("serviceWorker"in navigator))return yield Ko(),void console.warn("Service Worker not supported in this browser.");if(yield function(){return Tn(this,void 0,void 0,function*(){var j;let J=r.B.BASE_APPLICATION+"_cacheServers",q=r.B.BASE_APPLICATION+"_config",se=r.B.BASE_APPLICATION+"_session",Ie=sessionStorage.getItem(J),Re=sessionStorage.getItem(q),Ke=null!==(j=sessionStorage.getItem(se))&&void 0!==j?j:"999",Fe=parseInt(Ke);void 0!==Ie&&"undefined"!==Ie||(r.B.NODE_CACHE_URL=r.B.BASE_URL),Ie=JSON.parse(Ie);const tt=JSON.parse(Re);Ie&&tt&&tt.documentationWidget&&999!=Fe?(r.B.NODE_CACHE_URL=Array.isArray(Ie)&&Ie.length?Ie[0]:r.B.BASE_URL,an.b.setSession(Fe),r.B.DOCUMENTATION_WIDGET=tt.documentationWidget):yield function(){return Tn(this,void 0,void 0,function*(){var kt;let zt;try{let Mt=null!==(kt=r.B.BASE_APPLICATION)&&void 0!==kt?kt:"boomconsole";if(zt=yield fetch(r.B.getAppConfig()+"?application="+Mt,{method:"POST"}),!zt.ok)throw new Error("Failed to sync data to the server.");const ct=yield zt.json();ct.success&&(sessionStorage.setItem(J,JSON.stringify(ct.servers)),sessionStorage.setItem(q,JSON.stringify(ct.config)),sessionStorage.setItem(se,ct.session),an.b.setSession(ct.session),r.B.NODE_CACHE_URL=ct.servers?ct.servers[0]:r.B.BASE_URL,ct.config&&(r.B.DOCUMENTATION_WIDGET=ct.config.documentationWidget))}catch(Mt){console.error("error getting app config from server",Mt.message)}})}(),console.log("before the payload in app",an.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&tn("SESSION_DATA",{type:"SESSION_DATA",data:r.B.NODE_CACHE_URL,session:an.b.sessionId})})}(),function(){navigator.serviceWorker.addEventListener("message",j=>Tn(this,void 0,void 0,function*(){var J,q,se,Ie;try{if(j.data&&"API_401"===j.data.type){const{requestDetails:Re}=j.data,Ke={method:Re.method,headers:new Headers(Re.headers),body:Re.body},Fe=yield fetch(Re.url,Ke),tt=yield Fe?.json();null===(q=null===(J=navigator?.serviceWorker)||void 0===J?void 0:J.controller)||void 0===q||q.postMessage({type:"API_RESPONSE",messageId:j.data.messageId,response:new Response(tt,{status:Fe.status,statusText:Fe.statusText,headers:Fe.headers})})}}catch(Re){console.error("Error during listenPostMessage",Re),null===(Ie=null===(se=navigator?.serviceWorker)||void 0===se?void 0:se.controller)||void 0===Ie||Ie.postMessage({type:"API_RESPONSE",messageId:j.data.messageId})}}))}(),function(){bs.x.addEventListener("message",j=>Tn(this,void 0,void 0,function*(){const{type:J,payload:q}=j.data;J&&(la[J]?yield la[J](q):console.warn(`Unable to handle "${J}" case in BC service worker`))}))}(),F&&F.activate&&F.manual)yield new Promise((j,J)=>{navigator.serviceWorker.ready.then(q=>Tn(this,void 0,void 0,function*(){console.log("registraions ready",q),Dt=q.active,yield Go(),j("done")})).catch(q=>{console.error("Error: Ready service worker",q),J(q)}).finally(()=>console.log("Finally service worker ready done")),setTimeout(()=>J("Timeout ready"),3e4)});else if(F&&F?.activate)try{console.log("service worker initialiing"),yield function(j){var J=arguments;return Tn(this,void 0,void 0,function*(){const q=Ue.V.logfunction("handleRegisterServiceWorker",J);yield new Promise((se,Ie)=>{var Re,Ke;let Fe=!1;navigator.serviceWorker.register(null!==(Re=j.pathToSW)&&void 0!==Re?Re:"./serviceWorker.bundle.js",{scope:null!==(Ke=j.scope)&&void 0!==Ke?Ke:"/"}).then(tt=>Tn(this,void 0,void 0,function*(){console.log("Service Worker registered:",tt),setInterval(()=>{so.length&&Ti()},2e3),console.log("update listen start"),tt.onupdatefound=()=>{const kt=tt.installing;console.log("new worker",kt),kt&&(kt.onstatechange=()=>Tn(this,void 0,void 0,function*(){console.warn("on state change triggered",kt.state,navigator.serviceWorker.controller),"installing"===kt.state&&(console.log("Service Worker installing"),Dt=void 0),"activated"!==kt.state&&"redundant"!==kt.state||!navigator.serviceWorker.controller||(Dt=kt,console.log("New Service Worker is active",tt),setTimeout(()=>{console.log("Message Processed after some time"),Ti()},5e3),yield Go(),Fe=!0,Ti(),se())}))},tt.addEventListener("controllerchange",()=>Tn(this,void 0,void 0,function*(){console.warn("controller change triggered",navigator.serviceWorker.controller),navigator.serviceWorker.controller&&(Dt=navigator.serviceWorker.controller,console.warn("Service worker has been activated; controller change"),yield Go())})),(tt.installing||tt.waiting||tt.active)&&tt.addEventListener("statechange",kt=>Tn(this,void 0,void 0,function*(){var zt;"activating"===(null===(zt=kt?.target)||void 0===zt?void 0:zt.state)&&(Dt=navigator.serviceWorker.controller,console.warn("Service Worker is activating statechange"),yield Go())})),tt.active?(console.log("active sw"),Dt=tt.active,yield Go(),Ti(),se()):setTimeout(()=>{Fe||Ie("Not Completed Initialization")},1e4)})).catch(tt=>Tn(this,void 0,void 0,function*(){yield Ko(),Ie(tt),console.error("Service Worker registration failed:",tt),(0,o.ey)(q,"handleRegisterServiceWorker",tt)}))})})}(F)}catch(j){yield Ko(),console.error("Unable to start service worker",j)}else yield Ko(),console.warn("Service Worker not activated");return!0}catch(u){yield Ko(),console.warn("Cannot initialize the system",u)}})}function tn(D,d){return Tn(this,arguments,void 0,function*(i,p,w=0){let k=!1;const F=Math.random().toString(36).substring(2);p.messageId=F,p.TABID=Rd;const P=JSON.parse(JSON.stringify(p));let x;return"checkProcess"!=i&&0==w&&(x=setInterval(()=>Tn(this,void 0,void 0,function*(){if(!k&&!(yield function(y,u){return Tn(this,void 0,void 0,function*(){var U;try{const j=yield tn("checkProcess",{checkMessageId:y});if(console.log("check interval data res for type ",u,y,j.data),null===(U=j?.data)||void 0===U?void 0:U.processing)return!0}catch(j){return console.error("error on checing executing process",u,y,j),!1}})}(F,i))&&(clearInterval(x),!k)){if(console.log("Failed to handle type "+i+" message not found "+F,"retrying: ",0==w,i),0==w&&"checkProcess"!=i)return console.log("retrying ",i,F),yield tn(i,p,w+1);console.log("Failed to handle type "+i+" "+F)}}),2e3)),new Promise((y,u)=>{if(navigator.serviceWorker.controller||Dt||console.log("",navigator.serviceWorker.controller,Dt,i),navigator.serviceWorker.controller||Dt){const U=j=>{var J,q,se,Ie,Re,Ke;(null===(J=j?.data)||void 0===J?void 0:J.messageId)==F&&(k=!0,clearInterval(x),j.data.success||(401==(null===(q=j?.data)||void 0===q?void 0:q.status)?u((0,o.ry)(new Response("Unauthorized",{status:401,statusText:null===(se=j?.data)||void 0===se?void 0:se.statusText}))):500==(null===(Ie=j?.data)||void 0===Ie?void 0:Ie.status)?u((0,o.Mb)(new Response("Internal Server Error",{status:500,statusText:null===(Re=j?.data)||void 0===Re?void 0:Re.statusText}))):(console.error("Error in the response from worker:",j),u(`Failed to handle action ${i} ${JSON.stringify(p)}, Response: ${JSON.stringify(j.data)}`))),!(null===(Ke=j.data)||void 0===Ke)&&Ke.actions&&(p.actions=JSON.parse(JSON.stringify(j.data.actions))),y(j.data),navigator.serviceWorker.removeEventListener("message",U))};if(navigator.serviceWorker.addEventListener("message",U),navigator.serviceWorker.controller)"checkProcess"!=i&&console.log("sent to sw",i,F),navigator.serviceWorker.controller.postMessage({type:i,payload:P});else if(Dt){console.warn(`controller not found but serviceWorker is available. messageId: ${F}, type: ${i}`);try{Dt.postMessage({type:i,payload:P})}catch(j){console.log("Retrying again on catch service worker",j),Dt.postMessage({type:i,payload:P})}}else console.warn(`Service Worker hasn't loaded yet. messageId: ${F}, type: ${i}`),console.info("ready",navigator.serviceWorker.ready),setTimeout(()=>{console.warn(`Re-Trying after certain time. messageId: ${F}, type: ${i}`),Dt?(console.info("This is triggered "),Dt?.postMessage({type:i,payload:p})):(console.log("not ready",i),clearInterval(x),u("Service worker not ready"))},3e4);setTimeout(()=>{clearInterval(x),u(`No response from service worker after timeout: ${i}`),navigator.serviceWorker.removeEventListener("message",U)},21e4)}else so.push({message:{type:i,payload:P}}),"init"==i&&(clearInterval(x),y(null))})})}const la={GetLinkListener:D=>Tn(void 0,void 0,void 0,function*(){return sr.find(i=>i.listenerId==D.listenerId)?.callback(D.data),{success:!0}}),dispatchEvent:D=>Tn(void 0,void 0,void 0,function*(){if(Dt){let d=new CustomEvent(D.id||"",D.data);dispatchEvent(d)}return{success:!0}}),checkInit:D=>Tn(void 0,void 0,void 0,function*(){return console.log("service worker init 0"),navigator.serviceWorker.controller&&(console.log("service worker init 1"),Dt=navigator.serviceWorker.controller),yield Go(),{success:!0}})};function Ko(){return Tn(this,void 0,void 0,function*(){yield(0,bd.A)();const D=(new Date).getTime();yield(0,N.A)().then(()=>{let d=(new Date).getTime()-D;console.log("The time taken to prepare concept  data is  ",d)}).catch(d=>{throw d}),yield(0,Ts.Ay)().then(()=>{let d=(new Date).getTime()-D;console.log("The time taken to prepare local concept  ",d)}).catch(d=>{throw d}),yield(0,ws.p)().then(()=>{n.B.isLocalConnectionLoaded=!0}).catch(d=>{throw d}),yield(0,Ts.xd)().catch(d=>{throw console.log("This is the error in populating binary tree"),d}),yield(0,ws.a)().then(()=>{n.B.isConnectionLoaded=!0,n.B.isConnectionTypeLoaded=!0;let d=(new Date).getTime()-D;console.log("The time taken to prepare connections  ",d)}).catch(d=>{throw d})})}function da(D,d={}){if(Dt||typeof window<"u"){let i=new CustomEvent(`${D}`,d);dispatchEvent(i)}else bs.x.postMessage({type:"dispatchEvent",payload:{id:D,data:d}})}function Ti(){return Tn(this,void 0,void 0,function*(){console.log("message queue",so);const D=so.find(d=>{var i;return"init"==(null===(i=d?.message)||void 0===i?void 0:i.type)});if(D){console.log("Processing Init Queue poped",D?.type,D);const d=so.indexOf(D);d>-1&&so.splice(d,1),yield tn(D?.type,D?.payload)}for(console.log("message queue while",so);so.length>0;){const{message:d}=so.shift();console.log("Queue poped",d.type,d),yield tn(d.type,d.payload)}})}const ln=D=>{if(D instanceof z.z)throw console.error("FreeSchemaResponse Error",D),D;console.error("Service Worker Error",D)};function Go(){return Tn(this,void 0,void 0,function*(){yield tn("init",{url:r.B.BASE_URL,aiurl:r.B.AI_URL,accessToken:an.b.BearerAccessToken,nodeUrl:r.B.NODE_URL,enableAi:!1,applicationName:r.B.BASE_APPLICATION,flags:r.B.FLAGS})})}},5238:(K,E,g)=>{let S=g(3152);class N extends S{get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}constructor(h){h&&void 0!==h.value&&"string"!=typeof h.value&&(h={...h,value:String(h.value)}),super(h),this.type="decl"}}K.exports=N,N.default=N},5239:(K,E,g)=>{g.d(E,{O:()=>_});var S=g(205),N=g(5205);class n{constructor(r,e,o,l){this.leftNode=null,this.rightNode=null,this.variants=[],this.height=1,this.key=r,this.value=e,this.leftNode=o,this.rightNode=l,this.currentNode=null}addCurrentNode(r,e){return null==e?e=r:(r.value.typeId!=e.value.typeId&&(e.currentNode=this.addCurrentNode(r,e.currentNode)),e)}addCurrentNodeType(r,e){if(null==e)return r;let o=!1;r.value.id==e.value.id&&(o=!0);for(let l=0;l<e.variants.length;l++)e.variants[l].value.id==r.value.id&&(o=!0);return o||e.variants.push(r),e}getMax(r,e){return r>e?r:e}addNode(r,e,o){if(null==e)return(0,N.dispatchIdEvent)(r.value.ofTheConceptId),r;let f=e.rightNode;if(r.key<e.key)e.leftNode=this.addNode(r,e.leftNode,o);else{if(!(r.key>e.key))return e;e.rightNode=this.addNode(r,f,o)}e.height=1+this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(this.getBalanceFactor(e.leftNode)>=0)return this.rightRotate(e);if(this.getBalanceFactor(e.leftNode)<0)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(this.getBalanceFactor(e.rightNode)<=0)return this.leftRotate(e);if(this.getBalanceFactor(e.rightNode)>0)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}addTypeNode(r,e,o){if(0!=r.value.typeId){if(null==e)return r;let f=e.rightNode;if(e.key>r.key)e.leftNode=this.addTypeNode(r,e.leftNode,o);else{if(!(e.key<r.key))return e.key==r.key&&0!=e.key&&e.addCurrentNodeType(r,e),e;e.rightNode=this.addTypeNode(r,f,o)}e.height=1+this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(r.key<e.leftNode.key)return this.rightRotate(e);if(r.key>e.leftNode.key)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(r.key>e.rightNode.key)return this.leftRotate(e);if(r.key<e.rightNode.key)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}}return e}rightRotate(r){if(r){let e=r.leftNode;if(e)return r.leftNode=e.rightNode,e.rightNode=r,r.height=this.getMax(this.getHeight(r.leftNode),this.getHeight(r.rightNode))+1,e.height=this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,e;throw console.log("this is the error in right rotation",r,e),new Error("Cannot perform right rotation: left node is null.")}return r}leftRotate(r){if(r){let e=r.rightNode;if(e){let o=e.leftNode;return e.leftNode=r,r.rightNode=o,r.height=this.getMax(this.getHeight(r.leftNode),this.getHeight(r.rightNode))+1,e.height=this.getMax(this.getHeight(e.leftNode),this.getHeight(r.rightNode))+1,e}throw console.log("this is the error in left rotation",r,e),new Error("Cannot perform left rotation: right node is null.")}return r}getHeight(r){return r?r.height:0}getBalanceFactor(r){return null==r?0:this.getHeight(r.leftNode)-this.getHeight(r.rightNode)}getFromNode(r,e){try{if(e)return r==e.key?(e.value.count?e.value.count++:e.value.count=1,e):r<e.key?this.getFromNode(r,e.leftNode):r>e.key?this.getFromNode(r,e.rightNode):e}catch{console.log("this is the exception",r,e,e?.leftNode,e?.rightNode)}return e}getCharacterFromNode(r,e){return e&&(r==e.key?e:r<e.key?this.getCharacterFromNode(r,e.leftNode):r>e.key?this.getCharacterFromNode(r,e.rightNode):e)}checkIfIdsInNode(r,e,o,l){if(r){if(e.includes(r.key)){o.push(r.value);let f=e.indexOf(r.key);e.splice(f,1)}r.leftNode&&this.checkIfIdsInNode(r.leftNode,e,o,l),r.rightNode&&this.checkIfIdsInNode(r.rightNode,e,o,l)}}traverse(r){let e=0;return r&&(e+=1,r?.leftNode&&(e+=this.traverse(r.leftNode)),r.rightNode&&(e+=this.traverse(r.rightNode))),e}removeNode(r,e){if(null==r)return r;if(r.key>e)return r.leftNode=this.removeNode(r.leftNode,e),r;if(r.key<e)return r.rightNode=this.removeNode(r.rightNode,e),r;if(new Event(`${r.value.ofTheConceptId}`),(0,N.dispatchIdEvent)(r.value.ofTheConceptId),null==r.leftNode){let o=r.rightNode;return r=null,o}if(null==r.rightNode){let o=r.leftNode;return r=null,o}{let o=this.inOrderSuccessor(r.rightNode);return r.value=o.value,r.key=o.key,r.variants=o.variants,r.currentNode=o.currentNode,r.rightNode=this.removeNode(r.rightNode,o.key),r}}removeNodeWithVariants(r,e,o){if(null==r)return r;if(r.key>e)return r.leftNode=this.removeNodeWithVariants(r.leftNode,e,o),r;if(r.key<e)return r.rightNode=this.removeNodeWithVariants(r.rightNode,e,o),r;if(r.variants.length>0)if(r.value.id==o){let l=r.variants[0];if(l)return r.value=l.value,r.key=l.key,r.currentNode=l.currentNode,r.variants.splice(0,1),r}else for(let l=0;l<r.variants.length;l++)if(o==r.variants[l].value.id)return r.variants.splice(l,1),r;if(null==r.leftNode){let l=r.rightNode;return r=null,l}if(null==r.rightNode){let l=r.leftNode;return r=null,l}{let l=this.inOrderSuccessor(r.rightNode);return r.value=l.value,r.key=l.key,r.variants=l.variants,r.currentNode=l.currentNode,r.rightNode=this.removeNodeWithVariants(r.rightNode,l.key,o),r}}inOrderSuccessor(r){for(;null!=r.leftNode;)r=r.leftNode;return r}}var h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};let _=(()=>{class I{static addNodeToTree(e){try{if(null==this.connectionroot)return this.connectionroot=e,this.connectionroot;this.connectionroot=this.connectionroot.addNode(e,this.connectionroot,this.connectionroot.height)}catch(o){throw console.log("This is the error in making the tree",o),o}}static addConnectionToTree(e){let o=new n(e.id,e,null,null);this.addNodeToTree(o)}static traverse(){var e;return null===(e=this.connectionroot)||void 0===e?void 0:e.traverse(this.connectionroot)}static waitForDataToLoad(){return h(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(S.B.isConnectionLoaded)return e("done");setTimeout(I.checkFlag,1e3,e)}static removeNodeFromTree(e){return h(this,void 0,void 0,function*(){this.connectionroot&&(this.connectionroot=this.connectionroot.removeNode(this.connectionroot,e))})}static getNodeFromTree(e){return h(this,void 0,void 0,function*(){try{return this.connectionroot?this.connectionroot.getFromNode(e,this.connectionroot):this.connectionroot}catch{console.log("this is the getNodeFromTree",e,this.connectionroot)}})}static getConnectionListFromIds(e,o,l){return h(this,void 0,void 0,function*(){this.connectionroot&&this.connectionroot.checkIfIdsInNode(this.connectionroot,e,o,l)})}}return I.connectionroot=null,I})()},5257:(K,E,g)=>{g.d(E,{R:()=>h});var S=g(9003),N=g(3075),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};class h{static AddConceptId(I){this.localId=I.value,(0,S.kH)("localid",I)}static getConceptId(){return n(this,void 0,void 0,function*(){try{if(this.localId){if(this.ReservedLocalId.length<5){yield(0,N.EO)().then(()=>{let r=this.localId;for(let e=1;e<10;e++){let o=this.localId-e;this.ReservedLocalId.push(o),r=o}this.AddConceptId({id:0,value:r})}).catch(r=>(console.log(" getid: cannot get the id from indexdb"),-Math.floor(1e8*Math.random())));let I=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),I}{let I=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),I}}return yield(0,N.EO)().then(()=>{let I=this.localId;for(let r=1;r<10;r++){let e=this.localId-r;this.ReservedLocalId.push(e),I=e}this.AddConceptId({id:0,value:I})}),this.getConceptId()}catch(I){return console.log(" getid: this is the eror in concept",I),-Math.floor(1e8*Math.random())}})}static AddConnectionId(I){this.localConnectionId=I.value}static getConnectionId(){return n(this,void 0,void 0,function*(){try{if(this.localConnectionId){if(this.ReservedConnectionId.length<5){yield(0,N.xd)().then(()=>{let r=this.localConnectionId;for(let e=1;e<10;e++){let o=this.localConnectionId-e;this.ReservedConnectionId.push(o),r=o}}).catch(r=>(console.log("this is the new event",r),-Math.floor(1e8*Math.random())));let I=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),I}{let I=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),I}}return yield(0,N.xd)().then(()=>{let I=this.localConnectionId;for(let r=1;r<10;r++){let e=this.localConnectionId-r;this.ReservedConnectionId.push(e),I=e}this.AddConnectionId({id:1,value:I})}),this.getConnectionId()}catch{return-Math.floor(1e8*Math.random())}})}}h.ReservedLocalId=[],h.ReservedConnectionId=[]},5284:(K,E,g)=>{g.d(E,{B:()=>_});var S=g(5205),N=g(8286),n=g(1863),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(){return h(this,arguments,void 0,function*(I=[]){const r=S.Logger.logfunction("FindConnectionsOfCompositionsBulkInMemory",[I.length])||{};let e=[];try{if(S.serviceWorker){r.serviceWorker=!0;try{const o=yield(0,S.sendMessage)("FindConnectionsOfCompositionsBulkInMemory",{composition_ids:I});return S.Logger.logUpdate(r),o.data}catch(o){console.error("FindConnectionsOfCompositionsBulkInMemory sw error: ",o),(0,n.ey)(r,"FindConnectionsOfCompositionsBulkInMemory",o),(0,S.handleServiceWorkerException)(o)}}for(let o=0;o<I.length;o++){let l=yield N.d.GetConnectionsOfConcept(I[o]);e.push(...l)}return S.Logger.logUpdate(r),e}catch(o){return console.error("FindConnectionsOfCompositionsBulkInMemory error: ",o),(0,n.ey)(r,"FindConnectionsOfCompositionsBulkInMemory",o),e}})}},5286:(K,E)=>{function g(N){for(var n=N.toLowerCase(),h="",_=!1,I=0;I<6&&void 0!==n[I];I++){var r=n.charCodeAt(I);if(_=32===r,!(r>=97&&r<=102||r>=48&&r<=57))break;h+=n[I]}if(0!==h.length){var e=parseInt(h,16);return e>=55296&&e<=57343||0===e||e>1114111?["\ufffd",h.length+(_?1:0)]:[String.fromCodePoint(e),h.length+(_?1:0)]}}E.__esModule=!0,E.default=function(N){if(!S.test(N))return N;for(var n="",h=0;h<N.length;h++)if("\\"!==N[h])n+=N[h];else{var _=g(N.slice(h+1,h+7));if(void 0!==_){n+=_[0],h+=_[1];continue}if("\\"===N[h+1]){n+="\\",h++;continue}N.length===h+1&&(n+=N[h])}return n};var S=/\\/;K.exports=E.default},5312:(K,E,g)=>{g.d(E,{NK:()=>l,Ve:()=>f,cf:()=>e,vw:()=>v,y8:()=>o});var S=g(2832),N=g(3130),n=g(5205),h=g(1863),_=g(6687),I=g(1320),r=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};function e(T){var s=arguments;return r(this,arguments,void 0,function*(a,t="",c=null,C=N.y0){var b,m,L,A,O,B,G,R;const M=n.Logger.logfunction("SearchLinkMultipleAll",s)||{};try{try{if(n.serviceWorker){M.serviceWorker=!0;const ke=yield(0,n.sendMessage)("SearchLinkMultipleAll",{searchQuery:a,token:t,caller:c,format:C});return n.Logger.logUpdate(M),ke.data}}catch(ke){console.error("SearchLinkMultipleAll error sw: ",ke),(0,h.ey)(M,"SearchLinkMultipleAll",ke),(0,n.handleServiceWorkerException)(ke)}let W=[],V=[],Z=[],te=[],ne=a[0].composition,me={},H={};c?.isDataLoaded?(me.compositionIds=null===(b=c.conceptIds)||void 0===b?void 0:b.slice(),me.internalConnections=null===(m=c.internalConnections)||void 0===m?void 0:m.slice(),me.linkers=null===(L=c.linkers)||void 0===L?void 0:L.slice(),me.reverse=null===(A=c.reverse)||void 0===A?void 0:A.slice(),H=me,W=H.compositionIds,Z=H.internalConnections,V=H.linkers,te=H.reverse):(me=yield(0,S.j)(a,t),c&&(c.conceptIds=null===(O=me.compositionIds)||void 0===O?void 0:O.slice(),c.internalConnections=null===(B=me.internalConnections)||void 0===B?void 0:B.slice(),c.linkers=null===(G=me.linkers)||void 0===G?void 0:G.slice(),c.reverse=null===(R=me.reverse)||void 0===R?void 0:R.slice(),c.isDataLoaded=!0),H=me,W=H.compositionIds,Z=H.internalConnections,V=H.linkers,te=H.reverse);let pe=yield function(ke,ie,Y,re,ue,z){return r(this,arguments,void 0,function*(ge,Te,_e,Se,We,Je,Me=N.y0){try{let Ye,ht,De=yield(0,_.QL)(ge);return Me==N.ZJ?(Ye=yield(0,_.MT)(Te,_e),ht=yield v(ge,Ye,We,Se)):Me==N.yv?(Ye=yield(0,_.D)(Te,_e),ht=yield v(ge,Ye,We,Se)):100==Me?(Ye=yield(0,_.nr)(Te,_e),ht=yield o(De,Ye,We,Se)):Me==N.SL?ht=yield(0,I._W)(ge,Te,_e,Je.ofCompositions,Se):(Ye=yield(0,_.rv)(Te,_e),ht=yield o(De,Ye,We,Se)),ht}catch(Ye){return void console.log("Error Occured in build layer",Ye)}})}(V,W,Z,te,ne,a[0],C);return n.Logger.logUpdate(M),pe}catch(W){throw console.log("this is the error in the search link multiple",W),(0,h.ey)(M,"SearchLinkMultipleAll",W),W}})}function o(T,s,a){return r(this,arguments,void 0,function*(t,c,C,b=[]){(new Date).getTime();let m={},L=[];for(let A=0;A<t.length;A++)L.push(t[A].toTheConceptId),L.push(t[A].ofTheConceptId),L.push(t[A].typeId);t.sort(function(A,O){return O.id-A.id});for(let A=0;A<t.length;A++){let O=!1;if(b.includes(t[A].id)&&(O=!0),1==O){if(c[t[A].ofTheConceptId]&&c[t[A].toTheConceptId]){let B=c[t[A].toTheConceptId],G=yield(0,n.GetTheConcept)(t[A].typeId),R=B?.data,M=Object.keys(R)[0];try{let W=G.characterValue+"_reverse";"string"==typeof R&&(R={}),Array.isArray(R[M][W])||("string"==typeof R[M]&&(R[M]={}),R[M][W]=[]),R[M][W].push(c[t[A].ofTheConceptId])}catch(W){console.log("this is error",W)}}}else if(c[t[A].ofTheConceptId]&&c[t[A].toTheConceptId]){let B=c[t[A].ofTheConceptId],G=yield(0,n.GetTheConcept)(t[A].typeId),R=B?.data,M=Object.keys(R)[0];try{"string"==typeof R&&(R={}),Array.isArray(R[M][G.characterValue])||("string"==typeof R[M]&&(R[M]={}),R[M][G.characterValue]=[]),R[M][G.characterValue].push(c[t[A].toTheConceptId])}catch(W){console.log("this is error",W)}}}return m=c[C],m})}function l(T,s,a){return r(this,arguments,void 0,function*(t,c,C,b=[]){let m=[],L=[];for(let A=0;A<t.length;A++)L.push(t[A].toTheConceptId),L.push(t[A].ofTheConceptId),L.push(t[A].typeId);t.sort(function(A,O){return O.id-A.id});for(let A=0;A<t.length;A++){let O=!1;if(b.includes(t[A].id)&&(O=!0),1==O){if(c[t[A].ofTheConceptId]&&c[t[A].toTheConceptId]){let B=c[t[A].toTheConceptId],G=yield(0,n.GetTheConcept)(t[A].typeId),R=Object.keys(B)[0];try{let M=G.characterValue+"_reverse";"string"==typeof B&&(B={}),Array.isArray(B[R][M])||("string"==typeof B[R]&&(B[R]={}),B[R][M]=[]),B[R][M].push(c[t[A].ofTheConceptId])}catch(M){console.log("this is error",M)}}}else if(c[t[A].ofTheConceptId]&&c[t[A].toTheConceptId]){let B=c[t[A].ofTheConceptId],G=yield(0,n.GetTheConcept)(t[A].typeId),R=Object.keys(B)[0];try{"string"==typeof B&&(B={}),Array.isArray(B[R][G.characterValue])||("string"==typeof B[R]&&(B[R]={}),B[R][G.characterValue]=[]),B[R][G.characterValue].push(c[t[A].toTheConceptId])}catch(M){console.log("this is error",M)}}}for(let A=0;A<C.length;A++){let O=c[C[A]];O&&m.push(O)}return m})}function f(T,s,a,t){return r(this,arguments,void 0,function*(c,C,b,m,L=[]){(new Date).getTime();let A=[],O=[];for(let B=0;B<c.length;B++)O.push(c[B].toTheConceptId),O.push(c[B].ofTheConceptId),O.push(c[B].typeId);c.sort(function(B,G){return G.id-B.id});for(let B=0;B<c.length;B++){let G=!1;if(L.includes(c[B].id)&&(G=!0),1==G){if(C[c[B].ofTheConceptId]&&C[c[B].toTheConceptId]){let R=C[c[B].toTheConceptId],M=yield(0,n.GetTheConcept)(c[B].typeId),W=R?.data,V=Object.keys(W)[0];try{let Z=M.characterValue+"_reverse";"string"==typeof W&&(W={}),Array.isArray(W[V][Z])||("string"==typeof W[V]&&(W[V]={}),W[V][Z]=[]),W[V][Z].push(C[c[B].ofTheConceptId])}catch(Z){console.log("this is error",Z)}}}else if(C[c[B].ofTheConceptId]&&C[c[B].toTheConceptId]){let R=C[c[B].ofTheConceptId],M=yield(0,n.GetTheConcept)(c[B].typeId),W=R?.data,V=Object.keys(W)[0];try{"string"==typeof W&&(W={}),Array.isArray(W[V][M.characterValue])||("string"==typeof W[V]&&(W[V]={}),W[V][M.characterValue]=[]),W[V][M.characterValue].push(C[c[B].toTheConceptId])}catch(Z){console.log("this is error",Z)}}}for(let B=0;B<m.length;B++){let G=C[m[B]];G&&A.push(G)}return A})}function v(T,s,a){return r(this,arguments,void 0,function*(t,c,C,b=[]){let m={},L=yield(0,n.GetConnectionBulk)(t),A=[];for(let O=0;O<L.length;O++)A.push(L[O].toTheConceptId),A.push(L[O].ofTheConceptId),A.push(L[O].typeId);yield(0,n.GetConceptBulk)(A),L.sort(function(O,B){return B.id-O.id});for(let O=0;O<L.length;O++){let B=!1;if(b.includes(L[O].id)&&(B=!0),1==B){if(c[L[O].ofTheConceptId]&&c[L[O].toTheConceptId]){let G=c[L[O].toTheConceptId],R=yield(0,n.GetTheConcept)(L[O].typeId),M=G,W=Object.keys(M)[0];try{let V=R.characterValue+"_reverse";"string"==typeof M&&(M={}),Array.isArray(M[W][V])||("string"==typeof M[W]&&(M[W]={}),M[W][V]=[]),M[W][V].push(c[L[O].ofTheConceptId])}catch(V){console.log("this is error",V)}}}else if(c[L[O].ofTheConceptId]&&c[L[O].toTheConceptId]){let G=c[L[O].ofTheConceptId],R=yield(0,n.GetTheConcept)(L[O].typeId),M=G,W=Object.keys(M)[0];try{"string"==typeof M&&(M={}),Array.isArray(M[W][R.characterValue])||("string"==typeof M[W]&&(M[W]={}),M[W][R.characterValue]=[]),M[W][R.characterValue].push(c[L[O].toTheConceptId])}catch(V){console.log("this is error",V)}}}return m=c[C],m})}},5328:(K,E,g)=>{g.d(E,{d:()=>r});var S=g(5205),N=g(3130),n=g(8939),h=g(4287),_=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};class I extends h.w{constructor(o,l,f,v,T){super(),this.connections=[],this.data=[],this.mainConcept=o,this.linker=l,this.inpage=f,this.page=v,this.format=T}bind(){return _(this,void 0,void 0,function*(){var o;if(!this.isDataLoaded){let v=yield(0,S.GetTheConcept)(this.mainConcept),T=(null===(o=v.type)||void 0===o?void 0:o.characterValue)+"_s_"+this.linker,s=yield(0,S.GetConceptByCharacterAndType)(T,16);if(s.id>0){let a=yield(0,S.GetConnectionOfTheConcept)(s.id,v.id,v.userId,this.inpage,this.page);this.connections=a;for(var l=[],f=0;f<this.connections.length;f++)l.push(this.connections[f].toTheConceptId),this.linkers.push(this.connections[f].id),this.listenToEvent(this.connections[f].toTheConceptId);yield(0,S.GetAllConnectionsOfCompositionBulk)(l)}this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return _(this,void 0,void 0,function*(){this.data=[],this.connections=yield(0,S.GetConnectionBulk)(this.linkers);for(var o=0;o<this.connections.length;o++){let l=this.connections[o].toTheConceptId,f=yield(0,S.GetTheConcept)(l);if(console.log("this is the format",this.format),this.format==N.yv){let v=yield(0,n.RW)(f.id);this.data.push(v)}else if(this.format==N.ZJ){let v=yield(0,n.kx)(f.id);this.data.push(v)}else if(this.format==N.iw){let v=yield(0,S.GetCompositionWithIdAndDateFromMemory)(f.id);this.data.push(v)}else{let v=yield(0,S.GetCompositionWithIdAndDateFromMemory)(f.id);this.data.push(v)}}return this.data})}}function r(e,o,l,f,v=N.yv){return new I(e,o,l,f,v)}},5457:(K,E,g)=>{g.d(E,{c:()=>I});var S=g(5205),N=g(7282),n=g(205);class h{constructor(e,o){this.value=[],this.height=1,this.key=e,this.value.push(o),this.leftNode=null,this.rightNode=null,this.currentNode=null}addType(e,o,l){var f,v,T,s;if(null==e)return(0,S.dispatchIdEvent)(o,{detail:l}),new h(o,l);if(o<e.key)e.leftNode=this.addType(e.leftNode,o,l);else{if(!(o>e.key))return e.value.includes(l)||((0,S.dispatchIdEvent)(o,{detail:l}),e.value.push(l)),e;e.rightNode=this.addType(e.rightNode,o,l)}e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1;const a=this.getBalanceFactor(e);return a>1&&o<(null===(f=e.leftNode)||void 0===f?void 0:f.key)?this.rightRotate(e):a<-1&&o>(null===(v=e.rightNode)||void 0===v?void 0:v.key)?this.leftRotate(e):a>1&&o>(null===(T=e.leftNode)||void 0===T?void 0:T.key)?(e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)):a<-1&&o<(null===(s=e.rightNode)||void 0===s?void 0:s.key)?(e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)):e}rightRotate(e){if(e){let o=e.leftNode;if(o)return e.leftNode=o.rightNode,o.rightNode=e,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(o.rightNode))+1,o}return e}leftRotate(e){if(e){let o=e.rightNode;if(o){let l=o.leftNode;return o.leftNode=e,e.rightNode=l,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(e.rightNode))+1,o}}return e}getHeight(e){return e?e.height:0}getBalanceFactor(e){return null==e?0:this.getHeight(e.leftNode)-this.getHeight(e.rightNode)}getFromNode(e,o){return o&&(e==o.key?o:e<o.key?this.getFromNode(e,o.leftNode):e>o.key?this.getFromNode(e,o.rightNode):o)}removeNodeWithVariants(e,o,l){if(null==e)return e;if(e.key>o)return e.leftNode=this.removeNodeWithVariants(e.leftNode,o,l),e;if(e.key<o)return e.rightNode=this.removeNodeWithVariants(e.rightNode,o,l),e;if(e.value.length>0)for(let f=0;f<e.value.length;f++)if(l==e.value[f])return e.value.splice(f,1),e;if(null==e.leftNode){let f=e.rightNode;return e=null,f}if(null==e.rightNode){let f=e.leftNode;return e=null,f}{let f=this.inOrderSuccessor(e.rightNode);return e.value=f.value,e.key=f.key,e.currentNode=f.currentNode,e.rightNode=this.removeNodeWithVariants(e.rightNode,f.key,l),e}}countNodeBelow(e){return null==e?0:1+this.countNodeBelow(e.leftNode)+this.countNodeBelow(e.rightNode)}inOrderSuccessor(e){for(;null!=e.leftNode;)e=e.leftNode;return e}}var _=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};class I{static addType(e){return _(this,void 0,void 0,function*(){return null==this.root?(this.root=e,new CustomEvent(`${e.key}`,{detail:e.value[0]}),(0,S.dispatchIdEvent)(e.key,{detail:e.value[0]}),this.root):(this.root=this.root.addType(this.root,e.key,e.value[0]),this.root)})}static addConceptToTree(e){if(0!=e.typeId){let o=new h(e.typeId,e.id);this.addType(o)}}static removeTypeConcept(e,o){this.root&&(this.root=this.root.removeNodeWithVariants(this.root,e,o))}static getNodeFromTreeNew(e){return this.root?this.root.getFromNode(e,this.root):this.root}static getTypeVariantsFromTreeNew(e){return _(this,void 0,void 0,function*(){let o=this.getNodeFromTreeNew(e),l=[],f=[];if(o){l=o.value;for(let v=0;v<l.length;v++){let T=!1;for(let s=0;s<f.length;s++)f[s].id==l[v]&&(T=!0);T||f.push(yield(0,S.GetTheConcept)(l[v]))}}return f})}static waitForDataToLoad(){return _(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isTypeLoaded)return e("done");setTimeout(I.checkFlag,1e3,e)}static getTypeVariantsFromTreeWithUserIdNew(e,o){return _(this,void 0,void 0,function*(){let l=[],f=yield this.getTypeVariantsFromTreeNew(e);console.log("these are all the concepts",f);for(let v=0;v<f.length;v++)f[v].userId==o&&l.push(f[v]);return l})}static getTypeVariantsWithCharacterValueNew(e,o){return _(this,void 0,void 0,function*(){let l=yield this.getTypeVariantsFromTreeNew(o);console.log("this is all the concepts for character",l);let f=(0,N.o)();for(let v=0;v<l.length;v++)l[v].characterValue==e&&(f=l[v]);return f})}static countNumberOfNodes(){return this.typeRoot?this.typeRoot.countNodeBelow(this.typeRoot):0}}I.typeRoot=null,I.root=null},5588:(K,E,g)=>{E.__esModule=!0,E.default=void 0,E.unescapeValue=s;var S,N=I(g(8937)),n=I(g(5286)),h=I(g(3295)),_=g(1581);function I(C){return C&&C.__esModule?C:{default:C}}function e(C,b){return(e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,L){return m.__proto__=L,m})(C,b)}var o=g(4643),l=/^('|")([^]*)\1$/,f=o(function(){},"Assigning an attribute a value containing characters that might need to be escaped is deprecated. Call attribute.setValue() instead."),v=o(function(){},"Assigning attr.quoted is deprecated and has no effect. Assign to attr.quoteMark instead."),T=o(function(){},"Constructing an Attribute selector with a value without specifying quoteMark is deprecated. Note: The value should be unescaped now.");function s(C){var b=!1,m=null,L=C,A=L.match(l);return A&&(m=A[1],L=A[2]),(L=(0,n.default)(L))!==C&&(b=!0),{deprecatedUsage:b,unescaped:L,quoteMark:m}}var a=function(C){var b,m;function L(G){var R;return void 0===G&&(G={}),(R=C.call(this,function(M){if(void 0!==M.quoteMark||void 0===M.value)return M;T();var W=s(M.value),V=W.quoteMark,Z=W.unescaped;return M.raws||(M.raws={}),void 0===M.raws.value&&(M.raws.value=M.value),M.value=Z,M.quoteMark=V,M}(G))||this).type=_.ATTRIBUTE,R.raws=R.raws||{},Object.defineProperty(R.raws,"unquoted",{get:o(function(){return R.value},"attr.raws.unquoted is deprecated. Call attr.value instead."),set:o(function(){return R.value},"Setting attr.raws.unquoted is deprecated and has no effect. attr.value is unescaped by default now.")}),R._constructed=!0,R}m=C,(b=L).prototype=Object.create(m.prototype),b.prototype.constructor=b,e(b,m);var A,O,B=L.prototype;return B.getQuotedValue=function(G){void 0===G&&(G={});var R=this._determineQuoteMark(G);return(0,N.default)(this._value,t[R])},B._determineQuoteMark=function(G){return G.smart?this.smartQuoteMark(G):this.preferredQuoteMark(G)},B.setValue=function(G,R){void 0===R&&(R={}),this._value=G,this._quoteMark=this._determineQuoteMark(R),this._syncRawValue()},B.smartQuoteMark=function(G){var R=this.value,M=R.replace(/[^']/g,"").length,W=R.replace(/[^"]/g,"").length;if(M+W===0){var V=(0,N.default)(R,{isIdentifier:!0});if(V===R)return L.NO_QUOTE;var Z=this.preferredQuoteMark(G);if(Z===L.NO_QUOTE){var te=this.quoteMark||G.quoteMark||L.DOUBLE_QUOTE;if((0,N.default)(R,t[te]).length<V.length)return te}return Z}return W===M?this.preferredQuoteMark(G):W<M?L.DOUBLE_QUOTE:L.SINGLE_QUOTE},B.preferredQuoteMark=function(G){var R=G.preferCurrentQuoteMark?this.quoteMark:G.quoteMark;return void 0===R&&(R=G.preferCurrentQuoteMark?G.quoteMark:this.quoteMark),void 0===R&&(R=L.DOUBLE_QUOTE),R},B._syncRawValue=function(){var G=(0,N.default)(this._value,t[this.quoteMark]);G===this._value?this.raws&&delete this.raws.value:this.raws.value=G},B._handleEscapes=function(G,R){if(this._constructed){var M=(0,N.default)(R,{isIdentifier:!0});M!==R?this.raws[G]=M:delete this.raws[G]}},B._spacesFor=function(G){return Object.assign({before:"",after:""},this.spaces[G]||{},this.raws.spaces&&this.raws.spaces[G]||{})},B._stringFor=function(G,R,M){void 0===R&&(R=G),void 0===M&&(M=c);var W=this._spacesFor(R);return M(this.stringifyProperty(G),W)},B.offsetOf=function(G){var R=1,M=this._spacesFor("attribute");if(R+=M.before.length,"namespace"===G||"ns"===G)return this.namespace?R:-1;if("attributeNS"===G||(R+=this.namespaceString.length,this.namespace&&(R+=1),"attribute"===G))return R;R+=this.stringifyProperty("attribute").length,R+=M.after.length;var W=this._spacesFor("operator");R+=W.before.length;var V=this.stringifyProperty("operator");if("operator"===G)return V?R:-1;R+=V.length,R+=W.after.length;var Z=this._spacesFor("value");R+=Z.before.length;var te=this.stringifyProperty("value");return"value"===G?te?R:-1:(R+=te.length,R+=Z.after.length,R+=this._spacesFor("insensitive").before.length,"insensitive"===G&&this.insensitive?R:-1)},B.toString=function(){var G=this,R=[this.rawSpaceBefore,"["];return R.push(this._stringFor("qualifiedAttribute","attribute")),this.operator&&(this.value||""===this.value)&&(R.push(this._stringFor("operator")),R.push(this._stringFor("value")),R.push(this._stringFor("insensitiveFlag","insensitive",function(M,W){return!(M.length>0)||G.quoted||0!==W.before.length||G.spaces.value&&G.spaces.value.after||(W.before=" "),c(M,W)}))),R.push("]"),R.push(this.rawSpaceAfter),R.join("")},A=L,(O=[{key:"quoted",get:function(){var G=this.quoteMark;return"'"===G||'"'===G},set:function(G){v()}},{key:"quoteMark",get:function(){return this._quoteMark},set:function(G){this._constructed?this._quoteMark!==G&&(this._quoteMark=G,this._syncRawValue()):this._quoteMark=G}},{key:"qualifiedAttribute",get:function(){return this.qualifiedName(this.raws.attribute||this.attribute)}},{key:"insensitiveFlag",get:function(){return this.insensitive?"i":""}},{key:"value",get:function(){return this._value},set:function(G){if(this._constructed){var R=s(G),W=R.unescaped,V=R.quoteMark;if(R.deprecatedUsage&&f(),W===this._value&&V===this._quoteMark)return;this._value=W,this._quoteMark=V,this._syncRawValue()}else this._value=G}},{key:"insensitive",get:function(){return this._insensitive},set:function(G){G||(this._insensitive=!1,!this.raws||"I"!==this.raws.insensitiveFlag&&"i"!==this.raws.insensitiveFlag||(this.raws.insensitiveFlag=void 0)),this._insensitive=G}},{key:"attribute",get:function(){return this._attribute},set:function(G){this._handleEscapes("attribute",G),this._attribute=G}}])&&function r(C,b){for(var m=0;m<b.length;m++){var L=b[m];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(C,L.key,L)}}(A.prototype,O),Object.defineProperty(A,"prototype",{writable:!1}),L}(h.default);E.default=a,a.NO_QUOTE=null,a.SINGLE_QUOTE="'",a.DOUBLE_QUOTE='"';var t=((S={"'":{quotes:"single",wrap:!0},'"':{quotes:"double",wrap:!0}}).null={isIdentifier:!0},S);function c(C,b){return""+b.before+C+b.after}},5644:(K,E,g)=>{let S,N,n=g(7793);class h extends n{constructor(I){super(I),this.type="root",this.nodes||(this.nodes=[])}normalize(I,r,e){let o=super.normalize(I);if(r)if("prepend"===e)this.nodes.length>1?r.raws.before=this.nodes[1].raws.before:delete r.raws.before;else if(this.first!==r)for(let l of o)l.raws.before=r.raws.before;return o}removeChild(I,r){let e=this.index(I);return!r&&0===e&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[e].raws.before),super.removeChild(I)}toResult(I={}){return new S(new N,this,I).stringify()}}h.registerLazyResult=_=>{S=_},h.registerProcessor=_=>{N=_},K.exports=h,h.default=h,n.registerRoot(h)},5781:K=>{const E="'".charCodeAt(0),g='"'.charCodeAt(0),S="\\".charCodeAt(0),N="/".charCodeAt(0),n="\n".charCodeAt(0),h=" ".charCodeAt(0),_="\f".charCodeAt(0),I="\t".charCodeAt(0),r="\r".charCodeAt(0),e="[".charCodeAt(0),o="]".charCodeAt(0),l="(".charCodeAt(0),f=")".charCodeAt(0),v="{".charCodeAt(0),T="}".charCodeAt(0),s=";".charCodeAt(0),a="*".charCodeAt(0),t=":".charCodeAt(0),c="@".charCodeAt(0),C=/[\t\n\f\r "#'()/;[\\\]{}]/g,b=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,m=/.[\r\n"'(/\\]/,L=/[\da-f]/i;K.exports=function(A,O={}){let B,G,R,M,W,V,Z,te,ne,me,H=A.css.valueOf(),pe=O.ignoreErrors,ke=H.length,ie=0,Y=[],re=[];function ue(z){throw A.error("Unclosed "+z,ie)}return{back:function(z){re.push(z)},endOfFile:function(){return 0===re.length&&ie>=ke},nextToken:function(z){if(re.length)return re.pop();if(ie>=ke)return;let ge=!!z&&z.ignoreUnclosed;switch(B=H.charCodeAt(ie),B){case n:case h:case I:case r:case _:M=ie;do{M+=1,B=H.charCodeAt(M)}while(B===h||B===n||B===I||B===r||B===_);V=["space",H.slice(ie,M)],ie=M-1;break;case e:case o:case v:case T:case t:case s:case f:{let Te=String.fromCharCode(B);V=[Te,Te,ie];break}case l:if(me=Y.length?Y.pop()[1]:"",ne=H.charCodeAt(ie+1),"url"===me&&ne!==E&&ne!==g&&ne!==h&&ne!==n&&ne!==I&&ne!==_&&ne!==r){M=ie;do{if(Z=!1,M=H.indexOf(")",M+1),-1===M){if(pe||ge){M=ie;break}ue("bracket")}for(te=M;H.charCodeAt(te-1)===S;)te-=1,Z=!Z}while(Z);V=["brackets",H.slice(ie,M+1),ie,M],ie=M}else M=H.indexOf(")",ie+1),G=H.slice(ie,M+1),-1===M||m.test(G)?V=["(","(",ie]:(V=["brackets",G,ie,M],ie=M);break;case E:case g:W=B===E?"'":'"',M=ie;do{if(Z=!1,M=H.indexOf(W,M+1),-1===M){if(pe||ge){M=ie+1;break}ue("string")}for(te=M;H.charCodeAt(te-1)===S;)te-=1,Z=!Z}while(Z);V=["string",H.slice(ie,M+1),ie,M],ie=M;break;case c:C.lastIndex=ie+1,C.test(H),M=0===C.lastIndex?H.length-1:C.lastIndex-2,V=["at-word",H.slice(ie,M+1),ie,M],ie=M;break;case S:for(M=ie,R=!0;H.charCodeAt(M+1)===S;)M+=1,R=!R;if(B=H.charCodeAt(M+1),R&&B!==N&&B!==h&&B!==n&&B!==I&&B!==r&&B!==_&&(M+=1,L.test(H.charAt(M)))){for(;L.test(H.charAt(M+1));)M+=1;H.charCodeAt(M+1)===h&&(M+=1)}V=["word",H.slice(ie,M+1),ie,M],ie=M;break;default:B===N&&H.charCodeAt(ie+1)===a?(M=H.indexOf("*/",ie+2)+1,0===M&&(pe||ge?M=H.length:ue("comment")),V=["comment",H.slice(ie,M+1),ie,M],ie=M):(b.lastIndex=ie+1,b.test(H),M=0===b.lastIndex?H.length-1:b.lastIndex-2,V=["word",H.slice(ie,M+1),ie,M],Y.push(V),ie=M)}return ie++,V},position:function(){return ie}}}},5799:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.STRING,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,K.exports=E.default},5868:(K,E,g)=>{g.d(E,{k:()=>r});var S=g(3077),N=g(8357),n=g(9736),h=g(5205),_=g(1863),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function r(e,o){var l=arguments;return I(this,arguments,void 0,function*(f,v,T=!1,s,a,t=999,c=0,C={concepts:[],connections:[]}){var b,m,L,A;const O=h.Logger.logfunction("MakeTheInstanceConceptLocal",l)||{};if(h.serviceWorker){O.serviceWorker=!0;try{const B=yield(0,h.sendMessage)("MakeTheInstanceConceptLocal",{type:f,referent:v,composition:T,userId:s,accessId:a,sessionInformationId:t,referentId:c,actions:C});return!(null===(m=null===(b=B?.actions)||void 0===b?void 0:b.concepts)||void 0===m)&&m.length&&(C.concepts=JSON.parse(JSON.stringify(B.actions.concepts))),!(null===(A=null===(L=B?.actions)||void 0===L?void 0:L.connections)||void 0===A)&&A.length&&(C.connections=JSON.parse(JSON.stringify(B.actions.connections))),h.Logger.logUpdate(O),B.data}catch(B){console.error("MakeTheInstanceConceptLocal error sw: ",B),(0,_.ey)(O,"MakeTheInstanceConceptLocal",B),(0,h.handleServiceWorkerException)(B)}}try{let B,G,R=999,M=4,W=s,V=4,Z="",te=v.length;if(Z=f.startsWith("the_")?f:"the_"+f,T)B=yield(0,N.$)(f,R,s,s,C),G=yield(0,S.A)(v,f,s,M,B.id,V,!0,c,C);else if(te>255)B=yield(0,N.$)(Z,R,W,s,C),G=yield(0,S.A)(v,Z,s,M,B.id,V,void 0,void 0,C);else{B=yield(0,N.$)(Z,R,W,s,C);let ne=yield n.v.GetConceptByCharacterAndTypeLocal(v,B.id);G=ne,0==ne.id&&0==ne.userId&&(G=yield(0,S.A)(v,Z,s,M,B.id,V,void 0,void 0,C))}return G.type=B,h.LocalSyncData.AddConcept(G),C.concepts.push(G),h.Logger.logUpdate(O),G}catch(B){throw(0,_.ey)(O,"MakeTheInstanceConceptLocal",B),B}})}},5976:(K,E,g)=>{g.d(E,{p:()=>r,B:()=>I});var S=g(9581),N=g(3518),n=g(1863),h=g(5205),_=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};let I=(()=>{class e{static getId(){return _(this,void 0,void 0,function*(){this.ids.length<5&&(yield function(){var f,T,s,a=arguments;return f=this,s=function*(){const t=h.Logger.logfunction("GetReservedIds",a);try{let c=(0,N.Xr)("application/x-www-form-urlencoded");const C=yield fetch(S.B.GetReservedIdUrl(),{method:"GET",headers:c});if(!C.ok)throw(0,n.ry)(C),new Error(`Error! status: ${C.status}`);const b=yield C.json();for(let m=0;m<b.length;m++)e.AddId(b[m]);h.Logger.logUpdate(t)}catch(c){c instanceof Error?console.log("get reserved ids error message: ",c.message):console.log("get reserved ids  unexpected error: ",c),(0,n.Mb)(c,S.B.GetReservedIdUrl()),(0,n.ey)(t,"GetReservedIds",c)}},new((T=void 0)||(T=Promise))(function(t,c){function C(L){try{m(s.next(L))}catch(A){c(A)}}function b(L){try{m(s.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof T?A:new T(function(O){O(A)})).then(C,b)}m((s=s.apply(f,[])).next())})}());var l=this.ids[0];return this.ids.shift(),l})}static AddId(l){this.ids.includes(l)||this.ids.push(l)}}return e.ids=[],e})(),r=(()=>{class e{static getId(){return _(this,void 0,void 0,function*(){this.connectionIds.length<5&&(yield function(){var f,T,s,a=arguments;return f=this,s=function*(){const t=h.Logger.logfunction("GetReservedConnectionIds",a);try{let c=(0,N.Xr)("application/x-www-form-urlencoded");const C=yield fetch(S.B.GetReservedConnectionIdUrl(),{method:"GET",headers:c});if(!C.ok)throw(0,n.ry)(C),new Error(`Error! status: ${C.status}`);const b=yield C.json();for(let m=0;m<b.length;m++)e.AddId(b[m]);h.Logger.logUpdate(t)}catch(c){c instanceof Error?console.log("get reserved connection ids error message: ",c.message):console.log("get reserved connection ids  unexpected error: ",c),(0,n.Mb)(c,S.B.GetReservedConnectionIdUrl()),(0,n.ey)(t,"GetReservedConnectionIds",c)}},new((T=void 0)||(T=Promise))(function(t,c){function C(L){try{m(s.next(L))}catch(A){c(A)}}function b(L){try{m(s.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof T?A:new T(function(O){O(A)})).then(C,b)}m((s=s.apply(f,[])).next())})}());var l=this.connectionIds[0];return this.connectionIds.shift(),l})}static AddId(l){this.connectionIds.includes(l)||this.connectionIds.push(l)}}return e.connectionIds=[],e})()},6058:(K,E,g)=>{g.d(E,{W:()=>_});var S=g(1863),N=g(3518),n=g(5205),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(I){var r=arguments;return h(this,void 0,void 0,function*(){const e=n.Logger.logfunction("GetAllLinkerConnectionsToTheConcept",r);var o=[];try{(new Date).getTime();var l=(0,N.Xr)("application/x-www-form-urlencoded");const T=yield fetch(n.BaseUrl.GetAllLinkerConnectionToConceptUrl()+`?conceptId=${I}`,{method:"GET",headers:l});if(T.ok){const s=yield T.json();for(var f=0;f<s.length;f++)o.push(s[f]);n.Logger.logUpdate(e)}else console.log("Get all linker connection To the concepts error","cannot get respone"),(0,S.ry)(T)}catch(T){T instanceof Error?console.log("Get all linker connection To the concepts error: ",T.message):console.log("Get all linker connection To the concepts error(Unexpected): ",T),(0,S.Mb)(T,n.BaseUrl.GetAllLinkerConnectionToConceptUrl()),(0,S.ey)(e,"GetAllLinkerConnectionsToTheConcept",T)}return o})}},6156:K=>{let E={};K.exports=function(g){E[g]||(E[g]=!0,typeof console<"u"&&console.warn&&console.warn(g))}},6291:(K,E)=>{E.__esModule=!0,E.default=function(g){for(var S=arguments.length,N=new Array(S>1?S-1:0),n=1;n<S;n++)N[n-1]=arguments[n];for(;N.length>0;){var h=N.shift();if(!g[h])return;g=g[h]}return g},K.exports=E.default},6416:(K,E,g)=>{g.d(E,{u:()=>N});var S=g(2615);function N(){return new S.j(0,0,0,0,0,"0",0,!1,new Date,new Date,"0")}},6467:(K,E,g)=>{function S(N){const n=N.lastIndexOf("_");let h=[];return h=n>0?[N.substring(0,n),N.substring(n+1,N.length)]:[N],h}g.d(E,{f:()=>S})},6687:(K,E,g)=>{g.d(E,{D:()=>b,MT:()=>C,Nt:()=>v,QL:()=>a,as:()=>T,cw:()=>o,dF:()=>e,hG:()=>s,km:()=>f,nr:()=>c,p8:()=>l,rv:()=>t});var S=g(8642),N=g(7467),n=g(5205),h=g(1863),_=g(5284),I=g(8939),r=function(m,L,A,O){return new(A||(A=Promise))(function(B,G){function R(V){try{W(O.next(V))}catch(Z){G(Z)}}function M(V){try{W(O.throw(V))}catch(Z){G(Z)}}function W(V){var Z;V.done?B(V.value):(Z=V.value,Z instanceof A?Z:new A(function(te){te(Z)})).then(R,M)}W((O=O.apply(m,L||[])).next())})};function e(){return r(this,arguments,void 0,function*(m=[]){yield(0,S.Y)(m);let L=[];for(let A=0;A<m.length;A++){let O=yield(0,I.kx)(m[A]);L.push(O)}return L})}function o(){return r(this,arguments,void 0,function*(m=[]){yield(0,S.Y)(m);let L=[];for(let A=0;A<m.length;A++){let O=yield(0,I.RW)(m[A]);L.push(O)}return L})}function l(){return r(this,arguments,void 0,function*(m=[],L=[]){const A=n.Logger.logfunction("GetCompositionFromConnectionsWithDataId",[m])||{};if(n.serviceWorker){A.serviceWorker=!0;try{const B=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataId",{conceptIds:m,connectionIds:L});return n.Logger.logUpdate(A),B.data}catch(B){console.error("GetCompositionFromConnectionsWithDataId error sw: ",B),(0,h.ey)(A,"GetCompositionFromConnectionsWithDataId",B),(0,n.handleServiceWorkerException)(B)}}let O=[];for(let B=0;B<m.length;B++){let G=yield(0,I.RW)(m[B]);O.push(G)}return n.Logger.logUpdate(A),O})}function f(){var m=arguments;return r(this,arguments,void 0,function*(L=[],A=[]){const O=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdFromConnections",m)||{};if(n.serviceWorker){O.serviceWorker=!0;try{const R=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataIdFromConnections",{conceptIds:L,connectionIds:A});return n.Logger.logUpdate(O),R.data}catch(R){console.error("GetCompositionFromConnectionsWithDataIdFromConnections error sw: ",R),(0,h.ey)(O,"GetCompositionFromConnectionsWithDataIdFromConnections",R),(0,n.handleServiceWorkerException)(R)}}let B=yield(0,N.j)(A),G=[];for(let R=0;R<L.length;R++){let M=yield(0,I.PT)(L[R],B);G.push(M)}return n.Logger.logUpdate(O),G})}function v(){var m=arguments;return r(this,arguments,void 0,function*(L=[],A=[]){const O=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdIndex",m)||{};if(n.serviceWorker){O.serviceWorker=!0;try{const G=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataIdIndex",{conceptIds:L,connectionIds:A});return n.Logger.logUpdate(O),G.data}catch(G){console.error("GetCompositionFromConnectionsWithDataIdIndex error sw: ",G),(0,h.ey)(O,"GetCompositionFromConnectionsWithDataIdIndex",G),(0,n.handleServiceWorkerException)(G)}}yield(0,N.j)(A),yield(0,_.B)(L);let B={};for(let G=0;G<L.length;G++){let R=yield(0,I.RW)(L[G]);B[L[G]]=R}return n.Logger.logUpdate(O),B})}function T(){return r(this,arguments,void 0,function*(m=[],L=[]){yield(0,N.j)(L),yield(0,_.B)(m);let A={};for(let O=0;O<m.length;O++){let B=yield(0,I.kx)(m[O]);A[m[O]]=B}return A})}function s(){return r(this,arguments,void 0,function*(m=[],L=[]){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetCompositionFromConnectionsWithIndexFromConnections",{conceptIds:m,connectionIds:L})).data}catch(B){console.error("GetCompositionFromConnectionsWithIndexFromConnections error sw: ",B),(0,n.handleServiceWorkerException)(B)}let A=yield(0,N.j)(L),O=[];for(let B=0;B<m.length;B++){let G=yield(0,I.JA)(m[B],A);O[m[B]]=G}return O})}function a(m){var L=arguments;return r(this,void 0,void 0,function*(){const A=n.Logger.logfunction("GetConnectionDataPrefetch",L)||{};if(n.serviceWorker){A.serviceWorker=!0;try{const W=yield(0,n.sendMessage)("GetConnectionDataPrefetch",{connectionIds:m});return n.Logger.logUpdate(A),W.data}catch(W){console.error("GetConnectionDataPrefetch error sw: ",W),(0,h.ey)(A,"GetConnectionDataPrefetch",W),(0,n.handleServiceWorkerException)(W)}}let O=[],B=[],G={};for(let W=0;W<m.length;W++){let V=yield n.ConnectionData.GetConnection(m[W]);0==V.id?O.push(m[W]):B.push(V)}for(let W=0;W<O.length;W++)G[m[W]]=!1;let R=[],M=yield(0,N.j)(O);B=[...B,...M];for(let W=0;W<B.length;W++)R.push(B[W].ofTheConceptId),R.push(B[W].toTheConceptId),R.push(B[W].typeId);return yield(0,n.GetConceptBulk)(R),n.Logger.logUpdate(A),B})}function t(){var m=arguments;return r(this,arguments,void 0,function*(L=[],A=[]){const O=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdInObject",m);yield(0,N.j)(A);let B={};for(let G=0;G<L.length;G++){let R=yield(0,I.RW)(L[G]);B[L[G]]=R}return n.Logger.logUpdate(O),B})}function c(){return r(this,arguments,void 0,function*(m=[],L=[]){yield(0,N.j)(L);let A={};for(let O=0;O<m.length;O++){let B=yield(0,I.$N)(m[O]);A[m[O]]=B}return A})}function C(){return r(this,arguments,void 0,function*(m=[],L=[]){yield(0,N.j)(L);let A={};for(let O=0;O<m.length;O++){let B=yield(0,I.kx)(m[O]);A[m[O]]=B}return A})}function b(){return r(this,arguments,void 0,function*(m=[],L=[]){yield(0,N.j)(L);let A={};for(let O=0;O<m.length;O++){let B=yield(0,I.XI)(m[O]);A[m[O]]=B,console.log("this is the normal data",m[O],B)}return A})}},6731:(K,E,g)=>{g.d(E,{b:()=>S});class S{constructor(n,h,_,I){this.variants=[],this.height=1,this.key=n,this.value=h,this.leftNode=_,this.rightNode=I,this.currentNode=null}addCurrentNode(n,h){return null==h?h=n:(n.value.typeId!=h.value.typeId&&(h.currentNode=this.addCurrentNode(n,h.currentNode)),h)}addCurrentNodeType(n,h){if(null==h)return n;let _=!1;for(let I=0;I<h.variants.length;I++)h.variants[I].value.id==n.value.id&&(_=!0);return _||h.variants.push(n),h}addNode(n,h,_){if(null==h)return n;let r=h.rightNode;if(h.key>n.key)h.leftNode=this.addNode(n,h.leftNode,_);else{if(!(h.key<n.key))return h;h.rightNode=this.addNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}return h}checkIfIdsInNode(n,h,_,I){if(n){if(h.includes(n.key)){_.push(n.value);let r=h.indexOf(n.key);h.splice(r,1)}n.leftNode&&this.checkIfIdsInNode(n.leftNode,h,_,I),n.rightNode&&this.checkIfIdsInNode(n.rightNode,h,_,I)}}addCharacterNode(n,h,_){if(""!=n.value.characterValue){if(null==h)return n;let r=h.rightNode;if(h.key>n.key)h.leftNode=this.addCharacterNode(n,h.leftNode,_);else{if(!(h.key<n.key))return h.key==n.key&&""!=h.key&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),h;h.rightNode=this.addCharacterNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}addTypeNode(n,h,_){if(0!=n.value.typeId){if(null==h)return console.log("adding the type node to the tree",n),n;let r=h.rightNode;if(h.key>n.key)h.leftNode=this.addTypeNode(n,h.leftNode,_);else{if(!(h.key<n.key))return console.log("adding the type node to the tree down",n),h.key==n.key&&0!=h.key&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),console.log("adding the type node to the tree last",h),h;h.rightNode=this.addTypeNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}rightRotate(n){if(n){let h=n.leftNode;if(h)return n.leftNode=h.rightNode,h.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,h}return n}leftRotate(n){if(n){let h=n.rightNode;if(h){let _=h.leftNode;return h.leftNode=n,n.rightNode=_,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(n.rightNode))+1,h}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return null==n?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}getFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getFromNode(n,h.leftNode):n>h.key?this.getFromNode(n,h.rightNode):h)}getCharacterFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getCharacterFromNode(n,h.leftNode):n>h.key?this.getCharacterFromNode(n,h.rightNode):h)}getCharacterFromNodeUpdated(n,h){var _;return h&&(n==h.key||51==(null===(_=h.value)||void 0===_?void 0:_.typeId)?h:n<h.key?this.getCharacterFromNode(n,h.leftNode):n>h.key?this.getCharacterFromNode(n,h.rightNode):h)}getFromNodeWithCharacterAndType(n,h,_){if(n=`${n}`,_){if(n==_.key){if(n==_.value.characterValue&&h==_.value.typeId)return _;for(let I=0;I<_.variants.length;I++)if(_.variants[I].value.typeId==h)return _.variants[I]}else{if(n<_.key)return this.getFromNodeWithCharacterAndType(n,h,_.leftNode);if(n>_.key)return this.getFromNodeWithCharacterAndType(n,h,_.rightNode)}return null}return _}getFromNodeWithCharacterAndCategory(n,h,_){if(n=`${n}`,_){if(n==_.key){if(n==_.value.characterValue&&h==_.value.categoryId)return _;for(let I=0;I<_.variants.length;I++)if(_.variants[I].value.categoryId==h)return _.variants[I]}else{if(n<_.key)return this.getFromNodeWithCharacterAndCategory(n,h,_.leftNode);if(n>_.key)return this.getFromNodeWithCharacterAndCategory(n,h,_.rightNode)}return null}return _}removeNode(n,h){if(null==n)return n;if(n.key>h)return n.leftNode=this.removeNode(n.leftNode,h),n;if(n.key<h)return n.rightNode=this.removeNode(n.rightNode,h),n;if(null==n.leftNode){let _=n.rightNode;return n=null,_}if(null==n.rightNode){let _=n.leftNode;return n=null,_}{let _=this.inOrderSuccessor(n.rightNode);return n.value=_.value,n.key=_.key,n.variants=_.variants,n.currentNode=_.currentNode,n.rightNode=this.removeNode(n.rightNode,_.key),n}}removeNodeWithVariants(n,h,_){if(null==n)return n;if(n.key>h)return n.leftNode=this.removeNodeWithVariants(n.leftNode,h,_),n;if(n.key<h)return n.rightNode=this.removeNodeWithVariants(n.rightNode,h,_),n;if(n.variants.length>0)if(n.value.id==_){let I=n.variants[0];if(I)return n.value=I.value,n.key=I.key,n.currentNode=I.currentNode,n.variants.splice(0,1),n}else for(let I=0;I<n.variants.length;I++)if(_==n.variants[I].value.id)return n.variants.splice(I,1),n;if(null==n.leftNode){let I=n.rightNode;return n=null,I}if(null==n.rightNode){let I=n.leftNode;return n=null,I}{let I=this.inOrderSuccessor(n.rightNode);return n.value=I.value,n.key=I.key,n.variants=I.variants,n.currentNode=I.currentNode,n.rightNode=this.removeNodeWithVariants(n.rightNode,I.key,_),n}}countNodeBelow(n){return null==n?0:1+this.countNodeBelow(n.leftNode)+this.countNodeBelow(n.rightNode)}inOrderSuccessor(n){for(;null!=n.leftNode;)n=n.leftNode;return n}}},6846:(K,E,g)=>{let S=g(145),N=g(6966),n=g(4211),h=g(5644);class _{constructor(r=[]){this.version="8.5.6",this.plugins=this.normalize(r)}normalize(r){let e=[];for(let o of r)if(!0===o.postcss?o=o():o.postcss&&(o=o.postcss),"object"==typeof o&&Array.isArray(o.plugins))e=e.concat(o.plugins);else if("object"==typeof o&&o.postcssPlugin)e.push(o);else if("function"==typeof o)e.push(o);else if("object"!=typeof o||!o.parse&&!o.stringify)throw new Error(o+" is not a PostCSS plugin");return e}process(r,e={}){return this.plugins.length||e.parser||e.stringifier||e.syntax?new N(this,r,e):new n(this,r,e)}use(r){return this.plugins=this.plugins.concat(this.normalize([r])),this}}K.exports=_,_.default=_,h.registerProcessor(_),S.registerProcessor(_)},6915:(K,E,g)=>{function S(N,n="DESC"){return N.sort("ASC"==n?function(h,_){return h.id-_.id}:function(h,_){return _.id-h.id}),N}g.d(E,{X:()=>S})},6963:(K,E,g)=>{g.d(E,{f:()=>h});var S=g(205),N=g(6731),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};let h=(()=>{class _{static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((r,e)=>{this.checkFlag(r),setTimeout(()=>{e("not")},25e3)})})}static checkFlag(r){if(S.B.isCharacterLoaded)return r("done");setTimeout(_.checkFlag,1e3,r)}static addNodeToTree(r){return n(this,void 0,void 0,function*(){return null==this.characterRoot?(this.characterRoot=r,this.characterRoot):(this.characterRoot=this.characterRoot.addCharacterNode(r,this.characterRoot,this.characterRoot.height),this.characterRoot)})}static removeNodeByCharacter(r,e){return n(this,void 0,void 0,function*(){this.characterRoot&&this.characterRoot.removeNodeWithVariants(this.characterRoot,r,e)})}static countNumberOfNodes(){return this.characterRoot?this.characterRoot.countNodeBelow(this.characterRoot):0}static addConceptToTree(r){if(""!=r.characterValue){var e=new N.b(r.characterValue,r,null,null);this.addNodeToTree(e)}}static getNodeFromTree(r){return this.characterRoot?this.characterRoot.getCharacterFromNode(r,this.characterRoot):this.characterRoot}static getNodeFromTreeUpdated(r){return this.characterRoot?this.characterRoot.getCharacterFromNode(r,this.characterRoot):this.characterRoot}static getCharacterAndTypeFromTree(r,e){return n(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndType(r,e,this.characterRoot):this.characterRoot})}static getCharacterAndCategoryFromTree(r,e){return n(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndCategory(r,e,this.characterRoot):this.characterRoot})}static removeConceptCharacter(r){this.characterRoot&&(this.characterRoot=this.characterRoot.removeNode(this.characterRoot,r))}}return _.characterRoot=null,_})()},6966:(K,E,g)=>{let S=g(7793),N=g(145),n=g(3604),h=g(9577),_=g(3717),I=g(5644),r=g(3303),{isClean:e,my:o}=g(4151);g(6156);const l={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},f={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},v={Once:!0,postcssPlugin:!0,prepare:!0};function T(b){return"object"==typeof b&&"function"==typeof b.then}function s(b){let m=!1,L=l[b.type];return"decl"===b.type?m=b.prop.toLowerCase():"atrule"===b.type&&(m=b.name.toLowerCase()),m&&b.append?[L,L+"-"+m,0,L+"Exit",L+"Exit-"+m]:m?[L,L+"-"+m,L+"Exit",L+"Exit-"+m]:b.append?[L,0,L+"Exit"]:[L,L+"Exit"]}function a(b){let m;return m="document"===b.type?["Document",0,"DocumentExit"]:"root"===b.type?["Root",0,"RootExit"]:s(b),{eventIndex:0,events:m,iterator:0,node:b,visitorIndex:0,visitors:[]}}function t(b){return b[e]=!1,b.nodes&&b.nodes.forEach(m=>t(m)),b}let c={};class C{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(m,L,A){let O;if(this.stringified=!1,this.processed=!1,"object"!=typeof L||null===L||"root"!==L.type&&"document"!==L.type)if(L instanceof C||L instanceof _)O=t(L.root),L.map&&(void 0===A.map&&(A.map={}),A.map.inline||(A.map.inline=!1),A.map.prev=L.map);else{let B=h;A.syntax&&(B=A.syntax.parse),A.parser&&(B=A.parser),B.parse&&(B=B.parse);try{O=B(L,A)}catch(G){this.processed=!0,this.error=G}O&&!O[o]&&S.rebuild(O)}else O=t(L);this.result=new _(m,O,A),this.helpers={...c,postcss:c,result:this.result},this.plugins=this.processor.plugins.map(B=>"object"==typeof B&&B.prepare?{...B,...B.prepare(this.result)}:B)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(m){return this.async().catch(m)}finally(m){return this.async().then(m,m)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(m,L){let A=this.result.lastPlugin;try{L&&L.addToError(m),this.error=m,"CssSyntaxError"!==m.name||m.plugin||(m.plugin=A.postcssPlugin,m.setMessage())}catch(O){console&&console.error&&console.error(O)}return m}prepareVisitors(){this.listeners={};let m=(L,A,O)=>{this.listeners[A]||(this.listeners[A]=[]),this.listeners[A].push([L,O])};for(let L of this.plugins)if("object"==typeof L)for(let A in L){if(!f[A]&&/^[A-Z]/.test(A))throw new Error(`Unknown event ${A} in ${L.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!v[A])if("object"==typeof L[A])for(let O in L[A])m(L,"*"===O?A:A+"-"+O.toLowerCase(),L[A][O]);else"function"==typeof L[A]&&m(L,A,L[A])}this.hasListener=Object.keys(this.listeners).length>0}runAsync(){var m=this;return at(function*(){m.plugin=0;for(let L=0;L<m.plugins.length;L++){let O=m.runOnRoot(m.plugins[L]);if(T(O))try{yield O}catch(B){throw m.handleError(B)}}if(m.prepareVisitors(),m.hasListener){let L=m.result.root;for(;!L[e];){L[e]=!0;let A=[a(L)];for(;A.length>0;){let O=m.visitTick(A);if(T(O))try{yield O}catch(B){throw m.handleError(B,A[A.length-1].node)}}}if(m.listeners.OnceExit)for(let[A,O]of m.listeners.OnceExit){m.result.lastPlugin=A;try{if("document"===L.type){let B=L.nodes.map(G=>O(G,m.helpers));yield Promise.all(B)}else yield O(L,m.helpers)}catch(B){throw m.handleError(B)}}}return m.processed=!0,m.stringify()})()}runOnRoot(m){this.result.lastPlugin=m;try{if("object"==typeof m&&m.Once){if("document"===this.result.root.type){let L=this.result.root.nodes.map(A=>m.Once(A,this.helpers));return T(L[0])?Promise.all(L):L}return m.Once(this.result.root,this.helpers)}if("function"==typeof m)return m(this.result.root,this.result)}catch(L){throw this.handleError(L)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let m=this.result.opts,L=r;m.syntax&&(L=m.syntax.stringify),m.stringifier&&(L=m.stringifier),L.stringify&&(L=L.stringify);let A=new n(L,this.result.root,this.result.opts).generate();return this.result.css=A[0],this.result.map=A[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let m of this.plugins)if(T(this.runOnRoot(m)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let m=this.result.root;for(;!m[e];)m[e]=!0,this.walkSync(m);if(this.listeners.OnceExit)if("document"===m.type)for(let L of m.nodes)this.visitSync(this.listeners.OnceExit,L);else this.visitSync(this.listeners.OnceExit,m)}return this.result}then(m,L){return this.async().then(m,L)}toString(){return this.css}visitSync(m,L){for(let[A,O]of m){let B;this.result.lastPlugin=A;try{B=O(L,this.helpers)}catch(G){throw this.handleError(G,L.proxyOf)}if("root"!==L.type&&"document"!==L.type&&!L.parent)return!0;if(T(B))throw this.getAsyncError()}}visitTick(m){let L=m[m.length-1],{node:A,visitors:O}=L;if("root"!==A.type&&"document"!==A.type&&!A.parent)return void m.pop();if(O.length>0&&L.visitorIndex<O.length){let[G,R]=O[L.visitorIndex];L.visitorIndex+=1,L.visitorIndex===O.length&&(L.visitors=[],L.visitorIndex=0),this.result.lastPlugin=G;try{return R(A.toProxy(),this.helpers)}catch(M){throw this.handleError(M,A)}}if(0!==L.iterator){let G,R=L.iterator;for(;G=A.nodes[A.indexes[R]];)if(A.indexes[R]+=1,!G[e])return G[e]=!0,void m.push(a(G));L.iterator=0,delete A.indexes[R]}let B=L.events;for(;L.eventIndex<B.length;){let G=B[L.eventIndex];if(L.eventIndex+=1,0===G)return void(A.nodes&&A.nodes.length&&(A[e]=!0,L.iterator=A.getIterator()));if(this.listeners[G])return void(L.visitors=this.listeners[G])}m.pop()}walkSync(m){m[e]=!0;let L=s(m);for(let A of L)if(0===A)m.nodes&&m.each(O=>{O[e]||this.walkSync(O)});else{let O=this.listeners[A];if(O&&this.visitSync(O,m.toProxy()))return}}warnings(){return this.sync().warnings()}}C.registerPostcss=b=>{c=b},K.exports=C,C.default=C,I.registerLazyResult(C),N.registerLazyResult(C)},7071:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.ID,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o.prototype.valueToString=function(){return"#"+I.prototype.valueToString.call(this)},o}(N.default);E.default=_,K.exports=E.default},7139:(K,E,g)=>{g.d(E,{r:()=>e});var S=g(3026),N=g(9581),n=g(5205),h=g(1863),_=g(1596),I=g(3278),r=function(o,l,f,v){return new(f||(f=Promise))(function(T,s){function a(C){try{c(v.next(C))}catch(b){s(b)}}function t(C){try{c(v.throw(C))}catch(b){s(b)}}function c(C){var b;C.done?T(C.value):(b=C.value,b instanceof f?b:new f(function(m){m(b)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function e(o){var l=arguments;return r(this,void 0,void 0,function*(){const f=n.Logger.logfunction("GetConcept",l)||{};let v=(0,n.CreateDefaultConcept)();const T=new FormData;T.append("id",o.toString());try{if(n.serviceWorker){f.serviceWorker=!0;try{const t=yield(0,n.sendMessage)("GetConcept",{id:o});return n.Logger.logUpdate(f),t.data}catch(t){console.error("GetConcept sw error: ",t),(0,h.ey)(f,"GetConcept",t),(0,n.handleServiceWorkerException)(t)}}if(0==o||null==o||null==o)return v;var s=yield S.I.GetConcept(o);let a=S.I.GetNpc(o);if(0!=s.id||a)return n.Logger.logUpdate(f),s;{let t;const c={method:"POST",body:T,headers:{Authorization:"Bearer "+I.b.BearerAccessToken}};try{console.log("this is the url",N.B.GetConceptUrl()),t=yield fetch(N.B.GetConceptUrl(),c)}catch{t=yield(0,_.g)(c,"/api/getConcept")}return yield function(C,b,m,L){return r(this,void 0,void 0,function*(){return C.ok?(b=yield C.json()).id>0?S.I.AddConcept(b):S.I.AddNpc(L):(console.log("Get the concept error",C.status),(0,h.ry)(C)),n.Logger.logUpdate(m),b})}(t,v,f,o)}}catch(a){a instanceof Error?console.log("Get the concept error message: ",a.message):console.log("Get the concept unexpected error: ",a),(0,h.Mb)(a,N.B.GetConceptUrl()),(0,h.ey)(f,"GetConcept",a)}})}},7149:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(8349))&&S.__esModule?S:{default:S},n=function(r,e){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var o=h(void 0);if(o&&o.has(r))return o.get(r);var l={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in r)if("default"!==v&&Object.prototype.hasOwnProperty.call(r,v)){var T=f?Object.getOwnPropertyDescriptor(r,v):null;T&&(T.get||T.set)?Object.defineProperty(l,v,T):l[v]=r[v]}return l.default=r,o&&o.set(r,l),l}(g(680));function h(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(h=function(l){return l?o:e})(r)}var _=function(r){return new N.default(r)};Object.assign(_,n),delete _.__esModule,E.default=_,K.exports=E.default},7273:(K,E,g)=>{g.d(E,{z:()=>N});var S=g(9581);class N{constructor(h,_,I,r){this.url=S.B.BASE_URL,this.message=h,this.ok=_,this.status=I,this.data=r}getMessage(){return this.message}setMessage(h){return this.message=h,this}getStatus(){return this.status}setStatus(h){return this.status=h,this}getData(){return this.data}setData(h){return this.data=h,this}getOk(){return this.ok}setOk(h){return this.ok=h,this}getUrl(){return this.url}setUrl(h){return this.url=h,this}}},7282:(K,E,g)=>{g.d(E,{Y:()=>n,o:()=>N});var S=g(2615);function N(){let h=n(new Date),_=n(new Date);return new S.j(0,0,0,0,0,"0",0,!1,h,_,"0")}function n(h){const _=h.getMonth()+1,I=h.getDate(),r=h.getFullYear();let e=h.getHours();const o=h.getMinutes(),l=h.getSeconds(),f=e>=12?"PM":"AM";e%=12,e=e||12;const v=T=>T.toString().padStart(2,"0");return`${_}/${I}/${r} ${e}:${v(o)}:${v(l)} ${f}`}},7324:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(3631))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.PSEUDO,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o.prototype.toString=function(){var l=this.length?"("+this.map(String).join(",")+")":"";return[this.rawSpaceBefore,this.stringifyProperty("value"),l,this.rawSpaceAfter].join("")},o}(N.default);E.default=_,K.exports=E.default},7467:(K,E,g)=>{g.d(E,{j:()=>o});var S=g(8286),N=g(9581),n=g(4364),h=g(3518),_=g(1863),I=g(5205),r=g(1596),e=function(l,f,v,T){return new(v||(v=Promise))(function(s,a){function t(b){try{C(T.next(b))}catch(m){a(m)}}function c(b){try{C(T.throw(b))}catch(m){a(m)}}function C(b){var m;b.done?s(b.value):(m=b.value,m instanceof v?m:new v(function(L){L(m)})).then(t,c)}C((T=T.apply(l,f||[])).next())})};function o(){return e(this,arguments,void 0,function*(l=[]){const f=I.Logger.logfunction("GetConnectionBulk",l.length)||{};let v=[];try{if(I.serviceWorker){f.serviceWorker=!0;try{const T=yield(0,I.sendMessage)("GetConnectionBulk",{connectionIds:l});return I.Logger.logUpdate(f),T.data}catch(T){console.error("GetConnectionBulk sw error: ",T),(0,_.ey)(f,"GetConnectionBulk",T),(0,I.handleServiceWorkerException)(T)}}if(l.length>0){let T=[];for(let s=0;s<l.length;s++)if(!S.d.GetNpConn(l[s])){let a=yield S.d.GetConnection(l[s]);0==a.id?T.push(l[s]):v.push(a)}if(0==T.length)return I.Logger.logUpdate(f),v;{let s;const a={method:"POST",headers:(0,h.Xr)(),body:JSON.stringify(T)};try{s=yield fetch(N.B.GetConnectionBulkUrl(),a)}catch{s=yield(0,r.g)(a,"/api/get_connection_bulk")}yield function(t,c,C){return e(this,void 0,void 0,function*(){if(t.ok){const b=yield t.json();if(b.length>0)for(let m=0;m<b.length;m++){let L=b[m];c.push(L),S.d.AddConnection(L)}}else(0,_.ey)(C,"GetConnectionBulk",t.status),(0,_.ry)(t),console.log("Get Connection Bulk error",t.status)})}(s,v,f),I.Logger.logUpdate(f)}}}catch(T){T instanceof Error?console.log("Get Connection Bulk error message: ",T):console.log("Get Connection Bulk unexpected error: ",T),(0,_.ey)(f,"GetConnectionBulk",T),(0,_.Mb)(T,N.B.GetConnectionBulkUrl())}return yield(0,n.s)(v),v})}},7668:K=>{const E={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class g{constructor(N){this.builder=N}atrule(N,n){let h="@"+N.name,_=N.params?this.rawValue(N,"params"):"";void 0!==N.raws.afterName?h+=N.raws.afterName:_&&(h+=" "),N.nodes?this.block(N,h+_):this.builder(h+_+((N.raws.between||"")+(n?";":"")),N)}beforeAfter(N,n){let h;h=this.raw(N,null,"decl"===N.type?"beforeDecl":"comment"===N.type?"beforeComment":"before"===n?"beforeRule":"beforeClose");let _=N.parent,I=0;for(;_&&"root"!==_.type;)I+=1,_=_.parent;if(h.includes("\n")){let r=this.raw(N,null,"indent");if(r.length)for(let e=0;e<I;e++)h+=r}return h}block(N,n){let h,_=this.raw(N,"between","beforeOpen");this.builder(n+_+"{",N,"start"),N.nodes&&N.nodes.length?(this.body(N),h=this.raw(N,"after")):h=this.raw(N,"after","emptyBody"),h&&this.builder(h),this.builder("}",N,"end")}body(N){let n=N.nodes.length-1;for(;n>0&&"comment"===N.nodes[n].type;)n-=1;let h=this.raw(N,"semicolon");for(let _=0;_<N.nodes.length;_++){let I=N.nodes[_],r=this.raw(I,"before");r&&this.builder(r),this.stringify(I,n!==_||h)}}comment(N){let n=this.raw(N,"left","commentLeft"),h=this.raw(N,"right","commentRight");this.builder("/*"+n+N.text+h+"*/",N)}decl(N,n){let h=this.raw(N,"between","colon"),_=N.prop+h+this.rawValue(N,"value");N.important&&(_+=N.raws.important||" !important"),n&&(_+=";"),this.builder(_,N)}document(N){this.body(N)}raw(N,n,h){let _;if(h||(h=n),n&&(_=N.raws[n],void 0!==_))return _;let I=N.parent;if("before"===h&&(!I||"root"===I.type&&I.first===N||I&&"document"===I.type))return"";if(!I)return E[h];let r=N.root();if(r.rawCache||(r.rawCache={}),void 0!==r.rawCache[h])return r.rawCache[h];if("before"===h||"after"===h)return this.beforeAfter(N,h);{let o="raw"+((e=h)[0].toUpperCase()+e.slice(1));this[o]?_=this[o](r,N):r.walk(l=>{if(_=l.raws[n],void 0!==_)return!1})}var e;return void 0===_&&(_=E[h]),r.rawCache[h]=_,_}rawBeforeClose(N){let n;return N.walk(h=>{if(h.nodes&&h.nodes.length>0&&void 0!==h.raws.after)return n=h.raws.after,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawBeforeComment(N,n){let h;return N.walkComments(_=>{if(void 0!==_.raws.before)return h=_.raws.before,h.includes("\n")&&(h=h.replace(/[^\n]+$/,"")),!1}),void 0===h?h=this.raw(n,null,"beforeDecl"):h&&(h=h.replace(/\S/g,"")),h}rawBeforeDecl(N,n){let h;return N.walkDecls(_=>{if(void 0!==_.raws.before)return h=_.raws.before,h.includes("\n")&&(h=h.replace(/[^\n]+$/,"")),!1}),void 0===h?h=this.raw(n,null,"beforeRule"):h&&(h=h.replace(/\S/g,"")),h}rawBeforeOpen(N){let n;return N.walk(h=>{if("decl"!==h.type&&(n=h.raws.between,void 0!==n))return!1}),n}rawBeforeRule(N){let n;return N.walk(h=>{if(h.nodes&&(h.parent!==N||N.first!==h)&&void 0!==h.raws.before)return n=h.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawColon(N){let n;return N.walkDecls(h=>{if(void 0!==h.raws.between)return n=h.raws.between.replace(/[^\s:]/g,""),!1}),n}rawEmptyBody(N){let n;return N.walk(h=>{if(h.nodes&&0===h.nodes.length&&(n=h.raws.after,void 0!==n))return!1}),n}rawIndent(N){if(N.raws.indent)return N.raws.indent;let n;return N.walk(h=>{let _=h.parent;if(_&&_!==N&&_.parent&&_.parent===N&&void 0!==h.raws.before){let I=h.raws.before.split("\n");return n=I[I.length-1],n=n.replace(/\S/g,""),!1}}),n}rawSemicolon(N){let n;return N.walk(h=>{if(h.nodes&&h.nodes.length&&"decl"===h.last.type&&(n=h.raws.semicolon,void 0!==n))return!1}),n}rawValue(N,n){let h=N[n],_=N.raws[n];return _&&_.value===h?_.raw:h}root(N){this.body(N),N.raws.after&&this.builder(N.raws.after)}rule(N){this.block(N,this.rawValue(N,"selector")),N.raws.ownSemicolon&&this.builder(N.raws.ownSemicolon,N,"end")}stringify(N,n){if(!this[N.type])throw new Error("Unknown AST node type "+N.type+". Maybe you need to change PostCSS stringifier.");this[N.type](N,n)}}K.exports=g,g.default=g},7793:(K,E,g)=>{let S,N,n,h,_=g(9371),I=g(5238),r=g(3152),{isClean:e,my:o}=g(4151);function l(T){return T.map(s=>(s.nodes&&(s.nodes=l(s.nodes)),delete s.source,s))}function f(T){if(T[e]=!1,T.proxyOf.nodes)for(let s of T.proxyOf.nodes)f(s)}class v extends r{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...s){for(let a of s){let t=this.normalize(a,this.last);for(let c of t)this.proxyOf.nodes.push(c)}return this.markDirty(),this}cleanRaws(s){if(super.cleanRaws(s),this.nodes)for(let a of this.nodes)a.cleanRaws(s)}each(s){if(!this.proxyOf.nodes)return;let a,t,c=this.getIterator();for(;this.indexes[c]<this.proxyOf.nodes.length&&(a=this.indexes[c],t=s(this.proxyOf.nodes[a],a),!1!==t);)this.indexes[c]+=1;return delete this.indexes[c],t}every(s){return this.nodes.every(s)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let s=this.lastEach;return this.indexes[s]=0,s}getProxyProcessor(){return{get:(s,a)=>"proxyOf"===a?s:s[a]?"each"===a||"string"==typeof a&&a.startsWith("walk")?(...t)=>s[a](...t.map(c=>"function"==typeof c?(C,b)=>c(C.toProxy(),b):c)):"every"===a||"some"===a?t=>s[a]((c,...C)=>t(c.toProxy(),...C)):"root"===a?()=>s.root().toProxy():"nodes"===a?s.nodes.map(t=>t.toProxy()):"first"===a||"last"===a?s[a].toProxy():s[a]:s[a],set:(s,a,t)=>(s[a]===t||(s[a]=t,"name"!==a&&"params"!==a&&"selector"!==a||s.markDirty()),!0)}}index(s){return"number"==typeof s?s:(s.proxyOf&&(s=s.proxyOf),this.proxyOf.nodes.indexOf(s))}insertAfter(s,a){let t,c=this.index(s),C=this.normalize(a,this.proxyOf.nodes[c]).reverse();c=this.index(s);for(let b of C)this.proxyOf.nodes.splice(c+1,0,b);for(let b in this.indexes)t=this.indexes[b],c<t&&(this.indexes[b]=t+C.length);return this.markDirty(),this}insertBefore(s,a){let t,c=this.index(s),b=this.normalize(a,this.proxyOf.nodes[c],0===c&&"prepend").reverse();c=this.index(s);for(let m of b)this.proxyOf.nodes.splice(c,0,m);for(let m in this.indexes)t=this.indexes[m],c<=t&&(this.indexes[m]=t+b.length);return this.markDirty(),this}normalize(s,a){if("string"==typeof s)s=l(N(s).nodes);else if(void 0===s)s=[];else if(Array.isArray(s)){s=s.slice(0);for(let t of s)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===s.type&&"document"!==this.type){s=s.nodes.slice(0);for(let t of s)t.parent&&t.parent.removeChild(t,"ignore")}else if(s.type)s=[s];else if(s.prop){if(void 0===s.value)throw new Error("Value field is missed in node creation");"string"!=typeof s.value&&(s.value=String(s.value)),s=[new I(s)]}else if(s.selector||s.selectors)s=[new h(s)];else if(s.name)s=[new S(s)];else{if(!s.text)throw new Error("Unknown node type in node creation");s=[new _(s)]}return s.map(t=>(t[o]||v.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[e]&&f(t),t.raws||(t.raws={}),void 0===t.raws.before&&a&&void 0!==a.raws.before&&(t.raws.before=a.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t))}prepend(...s){s=s.reverse();for(let a of s){let t=this.normalize(a,this.first,"prepend").reverse();for(let c of t)this.proxyOf.nodes.unshift(c);for(let c in this.indexes)this.indexes[c]=this.indexes[c]+t.length}return this.markDirty(),this}push(s){return s.parent=this,this.proxyOf.nodes.push(s),this}removeAll(){for(let s of this.proxyOf.nodes)s.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(s){let a;s=this.index(s),this.proxyOf.nodes[s].parent=void 0,this.proxyOf.nodes.splice(s,1);for(let t in this.indexes)a=this.indexes[t],a>=s&&(this.indexes[t]=a-1);return this.markDirty(),this}replaceValues(s,a,t){return t||(t=a,a={}),this.walkDecls(c=>{a.props&&!a.props.includes(c.prop)||a.fast&&!c.value.includes(a.fast)||(c.value=c.value.replace(s,t))}),this.markDirty(),this}some(s){return this.nodes.some(s)}walk(s){return this.each((a,t)=>{let c;try{c=s(a,t)}catch(C){throw a.addToError(C)}return!1!==c&&a.walk&&(c=a.walk(s)),c})}walkAtRules(s,a){return a?s instanceof RegExp?this.walk((t,c)=>{if("atrule"===t.type&&s.test(t.name))return a(t,c)}):this.walk((t,c)=>{if("atrule"===t.type&&t.name===s)return a(t,c)}):(a=s,this.walk((t,c)=>{if("atrule"===t.type)return a(t,c)}))}walkComments(s){return this.walk((a,t)=>{if("comment"===a.type)return s(a,t)})}walkDecls(s,a){return a?s instanceof RegExp?this.walk((t,c)=>{if("decl"===t.type&&s.test(t.prop))return a(t,c)}):this.walk((t,c)=>{if("decl"===t.type&&t.prop===s)return a(t,c)}):(a=s,this.walk((t,c)=>{if("decl"===t.type)return a(t,c)}))}walkRules(s,a){return a?s instanceof RegExp?this.walk((t,c)=>{if("rule"===t.type&&s.test(t.selector))return a(t,c)}):this.walk((t,c)=>{if("rule"===t.type&&t.selector===s)return a(t,c)}):(a=s,this.walk((t,c)=>{if("rule"===t.type)return a(t,c)}))}}v.registerParse=T=>{N=T},v.registerRule=T=>{h=T},v.registerAtRule=T=>{S=T},v.registerRoot=T=>{n=T},K.exports=v,v.default=v,v.rebuild=T=>{"atrule"===T.type?Object.setPrototypeOf(T,S.prototype):"rule"===T.type?Object.setPrototypeOf(T,h.prototype):"decl"===T.type?Object.setPrototypeOf(T,I.prototype):"comment"===T.type?Object.setPrototypeOf(T,_.prototype):"root"===T.type&&Object.setPrototypeOf(T,n.prototype),T[o]=!0,T.nodes&&T.nodes.forEach(s=>{v.rebuild(s)})}},7820:(K,E,g)=>{g.d(E,{G:()=>h});var S=g(205),N=g(2515),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};let h=(()=>{class _{static addNodeToTree(r){if(null==this.root)return this.root=r,this.root;this.root=this.root.addNode(r,this.root,this.root.height)}static addConceptToTree(r){var e=new N.x(r.ghostId,r,null,null);this.addNodeToTree(e)}static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((r,e)=>{this.checkFlag(r),setTimeout(()=>{e("not")},25e3)})})}static checkFlag(r){if(S.B.isLocalDataLoaded)return r("done");setTimeout(_.checkFlag,1e3,r)}static getNodeFromTree(r){return n(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(r,this.root):null})}static removeNodeFromTree(r){return n(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,r))})}}return _.root=null,_})()},7869:(K,E,g)=>{g.d(E,{_:()=>T,A:()=>v});var S=g(9581),N=g(3026),n=g(1863),h=g(3518),_=g(5205),I=function(s,a,t,c){return new(t||(t=Promise))(function(C,b){function m(O){try{A(c.next(O))}catch(B){b(B)}}function L(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){var B;O.done?C(O.value):(B=O.value,B instanceof t?B:new t(function(G){G(B)})).then(m,L)}A((c=c.apply(s,a||[])).next())})},r=g(2299);class e{}e.isUpdated=!1,e.isOnlineSync=!1;var o=g(3655),l=g(9003),f=function(s,a,t,c){return new(t||(t=Promise))(function(C,b){function m(O){try{A(c.next(O))}catch(B){b(B)}}function L(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){var B;O.done?C(O.value):(B=O.value,B instanceof t?B:new t(function(G){G(B)})).then(m,L)}A((c=c.apply(s,a||[])).next())})};function v(){return f(this,arguments,void 0,function*(s=!0){try{if(yield(0,o.qI)("concepts"),yield(0,l.qI)("concepts"),s){if((yield(0,o.b8)()).isOnlineSync)return!0;yield function(){return I(this,void 0,void 0,function*(){const a=_.Logger.logfunction("GetAiData");try{const C=(new Date).getTime();var t=(0,h.ab)("application/x-www-form-urlencoded");const b=yield fetch(S.B.GetAllAiData(),{method:"GET",headers:t});b.ok||(console.log("Ai Error Message: ","Cannot get response"),(0,n.ry)(b));const m=yield b.json();for(var c=0;c<m.length;c++)N.I.AddConcept(m[c]);T();let L=(new Date).getTime()-C;console.log("The time taken is ",L),_.Logger.logUpdate(a)}catch(C){C instanceof Error?console.log("Ai Error Message: ",C.message):console.log("Ai Error Message: ",C),(0,n.Mb)(C,S.B.GetAllAiData())}})}()}return!0}catch(a){return console.log({message:"cannot initlize the AI system",ok:!1,status:400,data:a}),!0}})}function T(){return f(this,void 0,void 0,function*(){e.isOnlineSync=!0;var s=new r.B(e.isOnlineSync);(0,o.El)(s)})}},7876:(K,E,g)=>{g.d(E,{A:()=>e,K:()=>o});var S=g(1735),N=g(7139),n=g(5205),h=g(3026),_=g(7282),I=function(l,f,v,T){return new(v||(v=Promise))(function(s,a){function t(b){try{C(T.next(b))}catch(m){a(m)}}function c(b){try{C(T.throw(b))}catch(m){a(m)}}function C(b){var m;b.done?s(b.value):(m=b.value,m instanceof v?m:new v(function(L){L(m)})).then(t,c)}C((T=T.apply(l,f||[])).next())})};const r=new Map;function e(l){return I(this,arguments,void 0,function*(f,v=999){let T=performance.now();if(S.J.activateStatus)try{S.J.incrementConcept(f)}catch{console.error("Error adding connection in access tracker"),n.Logger.log("ERROR","Error Adding Connection")}if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetTheConcept",{id:f,userId:v})).data}catch(t){console.error("GetTheConcept sw error: ",t),(0,n.handleServiceWorkerException)(t)}let s=(0,_.o)();if(r.has(f))return r.get(f)||s;const a=(()=>I(this,void 0,void 0,function*(){try{if(f<0)return yield n.LocalConceptsData.GetConceptByGhostId(f);if(s=yield h.I.GetConcept(f),(null==s||0==s.id)&&null!=f&&null!=f&&(s=yield(0,N.r)(f)),0!=s.id&&null==s.type&&null==(yield h.I.GetConcept(s.typeId))&&null!=s.typeId&&null!=s.typeId){let t=yield(0,N.r)(s.typeId);s.type=t}return s}catch(t){throw console.error("this is the error in the getting concept",t),n.Logger.logError(T,v,"read","unknown",void 0,500,t,"GetTheConcept",[f,v],"unknown",void 0),t}finally{r.delete(f)}}))();return r.set(f,a),a})}function o(l){return I(this,void 0,void 0,function*(){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("AddTypeConcept",{concept:l})).data}catch(f){console.error("AddTypeConcept sw error: ",f),(0,n.handleServiceWorkerException)(f)}if(null==l.type){let f=yield h.I.GetConcept(l.typeId);if(0==f.id&&0!=l.typeId&&999!=l.typeId){let v=yield(0,N.r)(l.typeId);l.type=v}else l.type=f}})}},7887:(K,E,g)=>{g.d(E,{a:()=>h,p:()=>_});var S=g(8286),N=g(4864),n=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function h(){return n(this,void 0,void 0,function*(){try{let I=[];if(Array.isArray(I))for(let r=0;r<I.length;r++)S.d.AddConnectionToMemory(I[r])}catch(I){throw{message:"Cannot create Connection Binary Tree Concept",ok:!1,status:400,data:I}}})}function _(){return n(this,void 0,void 0,function*(){try{let I=[];if(Array.isArray(I))for(let r=0;r<I.length;r++)N.G.AddConnectionToMemory(I[r])}catch(I){throw{message:"Cannot create Local Connection Binary Tree Concept",ok:!1,status:400,data:I}}})}},8064:(K,E,g)=>{g.d(E,{$I:()=>_,Ay:()=>h});var S=g(9736),N=(g(9581),g(3518),g(5205));g(1863);var n=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function h(I){return n(this,void 0,void 0,function*(){return yield S.v.GetConceptByCharacterAndTypeLocal(I,51)})}function _(I){return n(this,void 0,void 0,function*(){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("GetConceptByCharacterAndCategoryLocal",{character:I})).data}catch(o){console.error("GetConceptByCharacterAndCategoryLocal error sw: ",o),(0,N.handleServiceWorkerException)(o)}let r=(0,N.CreateDefaultLConcept)();if("the"==I)return r.id=1,r.typeId=5,r.characterValue="the",r;let e=(0,N.SplitStrings)(I);if(e.length>1){let o=1,l=yield _(e[0]);0!=l.id&&(o=l.id),r=yield function(f,v){return n(this,void 0,void 0,function*(){return S.v.GetConceptByCharacterAndCategoryLocal(f,v)})}(I,o)}else e[0]==I&&(r=yield h(I));return r})}},8095:(K,E,g)=>{g.d(E,{h:()=>_});var S=g(5205),N=g(9700),n=g(1863),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(I,r,e){var o=arguments;return h(this,arguments,void 0,function*(l,f,v,T=!1,s={concepts:[],connections:[]}){var a,t,c,C,b,m;const L=N.V.logfunction("CreateConnectionBetweenTwoConceptsLocal",o)||{};let A=performance.now();try{if(S.serviceWorker){L.serviceWorker=!0;try{const M=yield(0,S.sendMessage)("CreateConnectionBetweenTwoConceptsLocal",{ofTheConcept:l,toTheConcept:f,linker:v,both:T,actions:s});return!(null===(t=null===(a=M?.actions)||void 0===a?void 0:a.concepts)||void 0===t)&&t.length&&(s.concepts=JSON.parse(JSON.stringify(M.actions.concepts))),!(null===(C=null===(c=M?.actions)||void 0===c?void 0:c.connections)||void 0===C)&&C.length&&(s.connections=JSON.parse(JSON.stringify(M.actions.connections))),N.V.logUpdate(L),M.data}catch(M){console.error("CreateConnectionBetweenTwoConceptsLocal sw error: ",M),(0,n.ey)(L,"CreateConnectionBetweenTwoConceptsLocal",M),(0,S.handleServiceWorkerException)(M)}}if(T){let M=(null===(b=f.type)||void 0===b?void 0:b.characterValue)+"_s_"+v+"_by";var O=yield(0,S.MakeTheInstanceConceptLocal)("connection",M,!1,999,999,999,0,s);yield(0,S.CreateTheConnectionLocal)(f.id,l.id,O.id,1e3,void 0,void 0,s)}let G=(null===(m=l.type)||void 0===m?void 0:m.characterValue)+"_s_"+v+"_s";var B=yield(0,S.MakeTheInstanceConceptLocal)("connection",G,!1,999,999,999,void 0,s);let R=yield(0,S.CreateTheConnectionLocal)(l.id,f.id,B.id,1e3,void 0,void 0,s);return N.V.logUpdate(L),R}catch(G){throw N.V.logError(A,l.userId,"create",void 0,void 0,500,G,"CreateConnectionBetweenTwoConceptsLocal",[l,f,v,T],void 0,void 0),(0,n.ey)(L,"CreateConnectionBetweenTwoConceptsLocal",G),G}})}},8146:(K,E,g)=>{g.d(E,{Y:()=>r});var S=g(3026),N=g(9581),n=g(5205),h=g(1863),_=g(7876),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function r(e){var o=arguments;return I(this,void 0,void 0,function*(){const l=n.Logger.logfunction("GetConceptByCharacterValue",o);let f=(0,n.CreateDefaultConcept)();try{const v=new FormData;v.append("character_value",e);const T=yield fetch(N.B.GetConceptByCharacterValueUrl(),{method:"POST",body:v});T.ok?(f=yield T.json(),f.id>0&&(0,_.K)(f).then(s=>{S.I.AddConcept(f)}),n.Logger.logUpdate(l)):((0,h.ry)(T),console.log("Error in Getting concept by character value Error",T.status))}catch(v){v instanceof Error?console.log("Error in Getting concept by character value error message: ",v):console.log("Error in Getting concept by character value unexpected error: ",v),(0,h.Mb)(v,N.B.GetConceptByCharacterValueUrl()),(0,h.ey)(l,"GetConceptByCharacterValue",v)}return f})}},8286:(K,E,g)=>{g.d(E,{d:()=>v});var S=g(1735),N=g(5205),n=g(3655),h=g(1863),_=g(2155),I=g(5239),r=g(991),e=g(3996);class o extends e.i{constructor(s,a,t,c){super(s,a,t,c),this.key="",this.value=[],this.height=1,this.key=s,this.value=a,this.leftNode=t,this.rightNode=c}addNode(s,a,t){if(null==a)return s;let C=a.rightNode;if(a.key>s.key)a.leftNode=this.addNode(s,a.leftNode,t);else{if(!(a.key<s.key))return a;a.rightNode=this.addNode(s,C,t)}a.height=1+Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode));let b=this.getBalanceFactor(a);if(b>1&&a.leftNode){if(s.key<a.leftNode.key)return this.rightRotate(a);if(s.key>a.leftNode.key)return a.leftNode=this.leftRotate(a.leftNode),this.rightRotate(a)}if(b<-1&&a.rightNode){if(s.key>a.rightNode.key)return this.leftRotate(a);if(s.key<a.rightNode.key)return a.rightNode=this.rightRotate(a.rightNode),this.leftRotate(a)}return a}}let l=(()=>{class T{static CreateCompositionKey(a){return a}static addNodeToTree(a){return t=this,b=function*(){return null==this.connectionTypeRoot?(this.connectionTypeRoot=a,this.connectionTypeRoot):(this.connectionTypeRoot=this.connectionTypeRoot.addNode(a,this.connectionTypeRoot,this.connectionTypeRoot.height),this.connectionTypeRoot)},new((C=void 0)||(C=Promise))(function(m,L){function A(G){try{B(b.next(G))}catch(R){L(R)}}function O(G){try{B(b.throw(G))}catch(R){L(R)}}function B(G){var R;G.done?m(G.value):(R=G.value,R instanceof C?R:new C(function(M){M(R)})).then(A,O)}B((b=b.apply(t,[])).next())});var t,C,b}static addConnectionToTree(a){if(a.id>0){let t=this.CreateCompositionKey(a.typeId);if(this.connectionTypeRoot){let c=this.connectionTypeRoot.getFromNode(t,this.connectionTypeRoot);if(c){let C=c?.value;0==C.length&&(c.value=[]),C.includes(a.id)||C.push(a.id)}else{let C=[];C.push(a.id);let b=new o(t,C,null,null);this.addNodeToTree(b)}}else{let c=[];c.push(a.id);let C=new o(t,c,null,null);this.addNodeToTree(C)}}else console.log("cannot insert key id with  n 0 to the connection tree",a)}static GetConnectionByOfTheConceptAndTypeId(a,t){let c=this.CreateCompositionKey(t);if(this.connectionTypeRoot){let C=this.connectionTypeRoot.getFromNode(c,this.connectionTypeRoot);if(C)return C.value}return null}}return T.connectionTypeRoot=null,T})();var f=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};class v{constructor(){this.name="Connection Array"}static CheckContains(s){let a=!1;for(let t=0;t<this.connectionArray.length;t++)this.connectionArray[t].id==s.id&&(a=!0);return a}static AddConnectionToStorage(s){(0,n.kH)("connection",s)}static AddNpConn(s){this.deletedConnections.includes(s)||this.deletedConnections.push(s)}static GetNpConn(s){return!!this.deletedConnections.includes(s)}static AddConnection(s){try{I.O.addConnectionToTree(s),l.addConnectionToTree(s),r.H.addConnection(s)}catch(a){throw console.log("this is the error in making the connection"),a}}static AddConnectionToMemory(s){s.isTemp||(I.O.addConnectionToTree(s),l.addConnectionToTree(s),r.H.addConnection(s))}static AddToDictionary(s){this.connectionDictionary[s.id]=s}static RemoveConnection(s){0!=s.id&&((0,n.wh)("connection",s.id),I.O.removeNodeFromTree(s.id),r.H.removeNodeFromTree(s.id))}static GetConnectionTypeOfTree(){}static GetConnectionByOfTheConceptAndType(s,a){return f(this,void 0,void 0,function*(){try{if(N.serviceWorker)try{return(yield(0,N.sendMessage)("ConnectionData__GetConnectionByOfTheConceptAndType",{ofTheConceptId:s,typeId:a})).data}catch(t){console.error("GetConnectionByOfTheConceptAndType sw error: ",t),(0,N.handleServiceWorkerException)(t)}return r.H.GetConnectionByOfTheConceptAndTypeId(s,a)||[]}catch(t){return console.log("this is the error in GetConnectionByOfTheConceptAndType",t),[]}})}static GetConnectionByOfType(s,a){const t=N.Logger.logfunction("ConnectionData.GetConnectionByOfType",arguments);let c=l.GetConnectionByOfTheConceptAndTypeId(s,a);return c?(N.Logger.logUpdate(t),c):(N.Logger.logUpdate(t),[])}static GetConnectionTree(){return I.O.connectionroot}static GetConnectionTypeTree(){return l.connectionTypeRoot}static GetConnectionBulkData(s,a,t){return f(this,void 0,void 0,function*(){yield I.O.getConnectionListFromIds(s,a,t)})}static GetConnection(s){return f(this,void 0,void 0,function*(){S.J.incrementConnection(s);let a=new _.N(0,0,0,0,0,0,0);try{if(N.serviceWorker)try{return(yield(0,N.sendMessage)("ConnectionData__GetConnection",{id:s})).data}catch(c){console.error("GetConnection sw error: ",c),(0,N.handleServiceWorkerException)(c)}let t=yield I.O.getNodeFromTree(s);if(t?.value){let c=t.value;c&&(a=c)}return a}catch(t){return console.log("this is the error in GetConnection",t),a}})}static GetConnectionsOfCompositionLocal(s){var a=arguments;return f(this,void 0,void 0,function*(){const t=N.Logger.logfunction("ConnectionData.GetConnectionsOfCompositionLocal",a)||{};let c=[];try{if(N.serviceWorker){t.serviceWorker=!0;try{const b=yield(0,N.sendMessage)("ConnectionData__GetConnectionsOfCompositionLocal",{id:s});return N.Logger.logUpdate(t),b.data}catch(b){console.error("GetConnectionsOfCompositionLocal sw error: ",b),(0,h.ey)(t,"GetConnectionsOfCompositionLocal",b),(0,N.handleServiceWorkerException)(b)}}let C=[];C=v.GetConnectionByOfType(s,s);for(let b=0;b<C.length;b++){let m=yield I.O.getNodeFromTree(C[b]);m&&c.push(m.value),N.Logger.logUpdate(t)}}catch(C){console.log("this is the error GetConnectionsOfCompositionLocal",s,c),(0,h.ey)(t,"ConnectionData.GetConnectionsOfCompositionLocal",C)}return c})}static GetConnectionsOfConcept(s){return f(this,void 0,void 0,function*(){let a=[],t=[];try{if(N.serviceWorker)try{return(yield(0,N.sendMessage)("ConnectionData__GetConnectionsOfConcept",{id:s})).data}catch(c){console.error("GetConnectionsOfConcept sw error: ",c),(0,N.handleServiceWorkerException)(c)}a=yield v.GetConnectionByOfTheConceptAndType(s,s);for(let c=0;c<a.length;c++){let C=yield I.O.getNodeFromTree(a[c]);C&&t.push(C.value)}return t}catch(c){return console.log("this is the error in GetConnectionsOfConcept",c),t}})}getName(){return this.name}}v.deletedConnections=[],v.connectionArray=[],v.connectionDictionary=[]},8339:(K,E,g)=>{let S=g(396),N=g(9371),n=g(5238),h=g(5644),_=g(1534),I=g(5781);const r={empty:!0,space:!0};K.exports=class{constructor(e){this.input=e,this.root=new h,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let o,l,f,v=new S;v.name=e[1].slice(1),""===v.name&&this.unnamedAtrule(v,e),this.init(v,e[2]);let T=!1,s=!1,a=[],t=[];for(;!this.tokenizer.endOfFile();){if(o=(e=this.tokenizer.nextToken())[0],"("===o||"["===o?t.push("("===o?")":"]"):"{"===o&&t.length>0?t.push("}"):o===t[t.length-1]&&t.pop(),0===t.length){if(";"===o){v.source.end=this.getPosition(e[2]),v.source.end.offset++,this.semicolon=!0;break}if("{"===o){s=!0;break}if("}"===o){if(a.length>0){for(f=a.length-1,l=a[f];l&&"space"===l[0];)l=a[--f];l&&(v.source.end=this.getPosition(l[3]||l[2]),v.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){T=!0;break}}v.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(v.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(v,"params",a),T&&(v.source.end=this.getPosition((e=a[a.length-1])[3]||e[2]),v.source.end.offset++,this.spaces=v.raws.between,v.raws.between="")):(v.raws.afterName="",v.params=""),s&&(v.nodes=[],this.current=v)}checkMissedSemicolon(e){let o=this.colon(e);if(!1===o)return;let l,f=0;for(let v=o-1;v>=0&&(l=e[v],"space"===l[0]||(f+=1,2!==f));v--);throw this.input.error("Missed semicolon","word"===l[0]?l[3]+1:l[2])}colon(e){let o,l,f,v=0;for(let[T,s]of e.entries()){if(l=s,f=l[0],"("===f&&(v+=1),")"===f&&(v-=1),0===v&&":"===f){if(o){if("word"===o[0]&&"progid"===o[1])continue;return T}this.doubleColon(l)}o=l}return!1}comment(e){let o=new N;this.init(o,e[2]),o.source.end=this.getPosition(e[3]||e[2]),o.source.end.offset++;let l=e[1].slice(2,-2);if(/^\s*$/.test(l))o.text="",o.raws.left=l,o.raws.right="";else{let f=l.match(/^(\s*)([^]*\S)(\s*)$/);o.text=f[2],o.raws.left=f[1],o.raws.right=f[3]}}createTokenizer(){this.tokenizer=I(this.input)}decl(e,o){let l=new n;this.init(l,e[0][2]);let f,v=e[e.length-1];for(";"===v[0]&&(this.semicolon=!0,e.pop()),l.source.end=this.getPosition(v[3]||v[2]||function(a){for(let t=a.length-1;t>=0;t--){let c=a[t],C=c[3]||c[2];if(C)return C}}(e)),l.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),l.raws.before+=e.shift()[1];for(l.source.start=this.getPosition(e[0][2]),l.prop="";e.length;){let a=e[0][0];if(":"===a||"space"===a||"comment"===a)break;l.prop+=e.shift()[1]}for(l.raws.between="";e.length;){if(f=e.shift(),":"===f[0]){l.raws.between+=f[1];break}"word"===f[0]&&/\w/.test(f[1])&&this.unknownWord([f]),l.raws.between+=f[1]}"_"!==l.prop[0]&&"*"!==l.prop[0]||(l.raws.before+=l.prop[0],l.prop=l.prop.slice(1));let T,s=[];for(;e.length&&(T=e[0][0],"space"===T||"comment"===T);)s.push(e.shift());this.precheckMissedSemicolon(e);for(let a=e.length-1;a>=0;a--){if(f=e[a],"!important"===f[1].toLowerCase()){l.important=!0;let t=this.stringFrom(e,a);t=this.spacesFromEnd(e)+t," !important"!==t&&(l.raws.important=t);break}if("important"===f[1].toLowerCase()){let t=e.slice(0),c="";for(let C=a;C>0;C--){let b=t[C][0];if(c.trim().startsWith("!")&&"space"!==b)break;c=t.pop()[1]+c}c.trim().startsWith("!")&&(l.important=!0,l.raws.important=c,e=t)}if("space"!==f[0]&&"comment"!==f[0])break}e.some(a=>"space"!==a[0]&&"comment"!==a[0])&&(l.raws.between+=s.map(a=>a[1]).join(""),s=[]),this.raw(l,"value",s.concat(e),o),l.value.includes(":")&&!o&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let o=new _;this.init(o,e[2]),o.selector="",o.raws.between="",this.current=o}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let o=this.current.nodes[this.current.nodes.length-1];o&&"rule"===o.type&&!o.raws.ownSemicolon&&(o.raws.ownSemicolon=this.spaces,this.spaces="",o.source.end=this.getPosition(e[2]),o.source.end.offset+=o.raws.ownSemicolon.length)}}getPosition(e){let o=this.input.fromOffset(e);return{column:o.col,line:o.line,offset:e}}init(e,o){this.current.push(e),e.source={input:this.input,start:this.getPosition(o)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let o=!1,l=null,f=!1,v=null,T=[],s=e[1].startsWith("--"),a=[],t=e;for(;t;){if(l=t[0],a.push(t),"("===l||"["===l)v||(v=t),T.push("("===l?")":"]");else if(s&&f&&"{"===l)v||(v=t),T.push("}");else if(0===T.length){if(";"===l){if(f)return void this.decl(a,s);break}if("{"===l)return void this.rule(a);if("}"===l){this.tokenizer.back(a.pop()),o=!0;break}":"===l&&(f=!0)}else l===T[T.length-1]&&(T.pop(),0===T.length&&(v=null));t=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(o=!0),T.length>0&&this.unclosedBracket(v),o&&f){if(!s)for(;a.length&&(t=a[a.length-1][0],"space"===t||"comment"===t);)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,o,l,f){let v,T,s,a,t=l.length,c="",C=!0;for(let b=0;b<t;b+=1)v=l[b],T=v[0],"space"!==T||b!==t-1||f?"comment"===T?(a=l[b-1]?l[b-1][0]:"empty",s=l[b+1]?l[b+1][0]:"empty",r[a]||r[s]||","===c.slice(-1)?C=!1:c+=v[1]):c+=v[1]:C=!1;if(!C){let b=l.reduce((m,L)=>m+L[1],"");e.raws[o]={raw:b,value:c}}e[o]=c}rule(e){e.pop();let o=new _;this.init(o,e[0][2]),o.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(o,"selector",e),this.current=o}spacesAndCommentsFromEnd(e){let o,l="";for(;e.length&&(o=e[e.length-1][0],"space"===o||"comment"===o);)l=e.pop()[1]+l;return l}spacesAndCommentsFromStart(e){let o,l="";for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)l+=e.shift()[1];return l}spacesFromEnd(e){let o,l="";for(;e.length&&(o=e[e.length-1][0],"space"===o);)l=e.pop()[1]+l;return l}stringFrom(e,o){let l="";for(let f=o;f<e.length;f++)l+=e[f][1];return e.splice(o,e.length-o),l}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,o){throw this.input.error("At-rule without name",{offset:o[2]},{offset:o[2]+o[1].length})}}},8349:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(5170))&&S.__esModule?S:{default:S},n=function(){function h(I,r){this.func=I||function(){},this.funcRes=null,this.options=r}var _=h.prototype;return _._shouldUpdateSelector=function(I,r){return void 0===r&&(r={}),!1!==Object.assign({},this.options,r).updateSelector&&"string"!=typeof I},_._isLossy=function(I){return void 0===I&&(I={}),!1===Object.assign({},this.options,I).lossless},_._root=function(I,r){return void 0===r&&(r={}),new N.default(I,this._parseOptions(r)).root},_._parseOptions=function(I){return{lossy:this._isLossy(I)}},_._run=function(I,r){var e=this;return void 0===r&&(r={}),new Promise(function(o,l){try{var f=e._root(I,r);Promise.resolve(e.func(f)).then(function(v){var T=void 0;return e._shouldUpdateSelector(I,r)&&(T=f.toString(),I.selector=T),{transform:v,root:f,string:T}}).then(o,l)}catch(v){return void l(v)}})},_._runSync=function(I,r){void 0===r&&(r={});var e=this._root(I,r),o=this.func(e);if(o&&"function"==typeof o.then)throw new Error("Selector processor returned a promise to a synchronous call.");var l=void 0;return r.updateSelector&&"string"!=typeof I&&(l=e.toString(),I.selector=l),{transform:o,root:e,string:l}},_.ast=function(I,r){return this._run(I,r).then(function(e){return e.root})},_.astSync=function(I,r){return this._runSync(I,r).root},_.transform=function(I,r){return this._run(I,r).then(function(e){return e.transform})},_.transformSync=function(I,r){return this._runSync(I,r).transform},_.process=function(I,r){return this._run(I,r).then(function(e){return e.string||e.root.toString()})},_.processSync=function(I,r){var e=this._runSync(I,r);return e.string||e.root.toString()},h}();E.default=n,K.exports=E.default},8354:(K,E)=>{E.__esModule=!0,E.default=function(g){for(var S="",N=g.indexOf("/*"),n=0;N>=0;){S+=g.slice(n,N);var h=g.indexOf("*/",N+2);if(h<0)return S;N=g.indexOf("/*",n=h+2)}return S+g.slice(n)},K.exports=E.default},8357:(K,E,g)=>{g.d(E,{$:()=>e});var S=g(3077),N=g(8064),n=g(6467),h=g(9975),_=g(5205),I=g(1863),r=function(o,l,f,v){return new(f||(f=Promise))(function(T,s){function a(C){try{c(v.next(C))}catch(b){s(b)}}function t(C){try{c(v.throw(C))}catch(b){s(b)}}function c(C){var b;C.done?T(C.value):(b=C.value,b instanceof f?b:new f(function(m){m(b)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function e(o,l,f,v){var T=arguments;return r(this,arguments,void 0,function*(s,a,t,c,C={concepts:[],connections:[]}){var b,m,L,A;const O=_.Logger.logfunction("MakeTheTypeConceptLocal",T)||{};if(_.serviceWorker){O.serviceWorker=!0;try{const G=yield(0,_.sendMessage)("MakeTheTypeConceptLocal",{typeString:s,sessionId:a,sessionUserId:t,userId:c,actions:C});return!(null===(m=null===(b=G?.actions)||void 0===b?void 0:b.concepts)||void 0===m)&&m.length&&(C.concepts=JSON.parse(JSON.stringify(G.actions.concepts))),!(null===(A=null===(L=G?.actions)||void 0===L?void 0:L.connections)||void 0===A)&&A.length&&(C.connections=JSON.parse(JSON.stringify(G.actions.connections))),_.Logger.logUpdate(O),G.data}catch(G){console.error("MakeTheTypeConceptLocal error sw: ",G),(0,I.ey)(O,"MakeTheTypeConceptLocal",G),(0,_.handleServiceWorkerException)(G)}}let B=yield(0,N.$I)(s);if(B&&(0==B.id||0==B.userId)){let G=(0,n.f)(s);if(G[0]==s)B=yield(0,h.A)(s,"the",c,1,51,C);else{let R=yield e(G[0],a,t,c,C),M=yield e(G[1],a,t,c,C);B=yield(0,S.A)(s,G[1],c,R.id,M.id,4,void 0,null,C)}}return _.Logger.logUpdate(O),B})}},8407:(K,E,g)=>{g.d(E,{A:()=>v});var S=g(9581),N=g(3518),n=g(1863),h=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})},_=g(4402),I=g(5205),r=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};class e{constructor(s,a,t,c,C,b,m,L,A,O){this.id=0,this.userId=s,this.data=a,this.securityId=t,this.securityUserId=c,this.accessId=C,this.accessUserId=b,this.sessionId=m,this.sessionUserId=L,this.entryTimestamp=A,this.isNew=O}}var o=g(7282),l=g(2212),f=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};function v(T,s){var a=arguments;return f(this,arguments,void 0,function*(t,c,C=!1,b,m=4,L=999,A=0){const O=I.Logger.logfunction("MakeTheInstanceConcept",a)||{};if(I.serviceWorker){O.serviceWorker=!0;try{const me=yield(0,I.sendMessage)("MakeTheInstanceConcept",{type:t,referent:c,composition:C,userId:b,passedAccessId:m,passedSessionId:L,referentId:A});return I.Logger.logUpdate(O),me.data}catch(me){console.error("MakeTheInstanceConcept sw error: ",me),(0,n.ey)(O,"MakeTheInstanceConcept",me),(0,I.handleServiceWorkerException)(me)}}let B,G=L,R=b,M=b,W=m,V=b,Z="",te=c.length,ne=(0,o.o)();if(Z=t.startsWith("the_")?t:"the_"+t,C)ne=yield(0,I.MakeTheTypeConceptApi)(t,b),B=yield(0,l.Ay)(c,b,4,ne.id,A,W,t);else if(te>255)ne=yield(0,I.MakeTheTypeConceptApi)(Z,b),B=yield(0,l.Ay)(c,b,4,ne.id,A,W,Z),function(me){h(this,void 0,void 0,function*(){try{var H=(0,N.Xr)();const pe=yield fetch(S.B.CreateTheTextDataUrl(),{method:"POST",headers:H,body:JSON.stringify(me)});if(!pe.ok)throw(0,n.ry)(pe),new Error(`Error! status: ${pe.status}`);return yield pe.json()}catch(pe){throw pe instanceof Error?console.log("Create the text error message: ",pe.message):console.log("Create the text unexpected error: ",pe),pe}})}(new e(b,c,999,R,W,V,G,M,Date.now().toString(),!0));else{ne=yield(0,I.MakeTheTypeConceptApi)(Z,b);let me=yield(0,_.A)(c,ne.id);B=me,0==me.id&&0==me.userId&&(B=yield(0,l.N)(c,b,4,ne.id,12,W,Z),function(H,pe,ke,ie){var Y=arguments;r(this,void 0,void 0,function*(){const re=I.Logger.logfunction("MakeTheNameInBackend",Y);try{let ue={newConceptId:H,referent:pe,typeId:ke,typeUserId:ie},z=(0,N.Xr)(),ge=JSON.stringify(ue);const Te=yield fetch(S.B.MakeTheNameInBackendUrl(),{method:"POST",headers:z,body:ge});I.Logger.logUpdate(re),Te.ok||(0,n.ry)(Te)}catch(ue){ue instanceof Error?console.log("make the name in backend error message: ",ue.message):console.log("make the name in backend unexpected error: ",ue),(0,n.Mb)(ue,S.B.MakeTheNameInBackendUrl()),(0,n.ey)(re,"MakeTheNameInBackend",ue)}})}(B.id,`${c}`,ne.id,b))}return B.type=ne,I.Logger.logUpdate(O),B})}},8500:(K,E,g)=>{E.__esModule=!0,E.isComment=E.isCombinator=E.isClassName=E.isAttribute=void 0,E.isContainer=function(b){return!(!h(b)||!b.walk)},E.isIdentifier=void 0,E.isNamespace=function(b){return I(b)||t(b)},E.isNesting=void 0,E.isNode=h,E.isPseudo=void 0,E.isPseudoClass=function(b){return v(b)&&!C(b)},E.isPseudoElement=C,E.isUniversal=E.isTag=E.isString=E.isSelector=E.isRoot=void 0;var S,N=g(1581),n=((S={})[N.ATTRIBUTE]=!0,S[N.CLASS]=!0,S[N.COMBINATOR]=!0,S[N.COMMENT]=!0,S[N.ID]=!0,S[N.NESTING]=!0,S[N.PSEUDO]=!0,S[N.ROOT]=!0,S[N.SELECTOR]=!0,S[N.STRING]=!0,S[N.TAG]=!0,S[N.UNIVERSAL]=!0,S);function h(b){return"object"==typeof b&&n[b.type]}function _(b,m){return h(m)&&m.type===b}var I=_.bind(null,N.ATTRIBUTE);E.isAttribute=I;var r=_.bind(null,N.CLASS);E.isClassName=r;var e=_.bind(null,N.COMBINATOR);E.isCombinator=e;var o=_.bind(null,N.COMMENT);E.isComment=o;var l=_.bind(null,N.ID);E.isIdentifier=l;var f=_.bind(null,N.NESTING);E.isNesting=f;var v=_.bind(null,N.PSEUDO);E.isPseudo=v;var T=_.bind(null,N.ROOT);E.isRoot=T;var s=_.bind(null,N.SELECTOR);E.isSelector=s;var a=_.bind(null,N.STRING);E.isString=a;var t=_.bind(null,N.TAG);E.isTag=t;var c=_.bind(null,N.UNIVERSAL);function C(b){return v(b)&&b.value&&(b.value.startsWith("::")||":before"===b.value.toLowerCase()||":after"===b.value.toLowerCase()||":first-letter"===b.value.toLowerCase()||":first-line"===b.value.toLowerCase())}E.isUniversal=c},8633:K=>{var E=String,g=function(){return{isColorSupported:!1,reset:E,bold:E,dim:E,italic:E,underline:E,inverse:E,hidden:E,strikethrough:E,black:E,red:E,green:E,yellow:E,blue:E,magenta:E,cyan:E,white:E,gray:E,bgBlack:E,bgRed:E,bgGreen:E,bgYellow:E,bgBlue:E,bgMagenta:E,bgCyan:E,bgWhite:E,blackBright:E,redBright:E,greenBright:E,yellowBright:E,blueBright:E,magentaBright:E,cyanBright:E,whiteBright:E,bgBlackBright:E,bgRedBright:E,bgGreenBright:E,bgYellowBright:E,bgBlueBright:E,bgMagentaBright:E,bgCyanBright:E,bgWhiteBright:E}};K.exports=g(),K.exports.createColors=g},8642:(K,E,g)=>{g.d(E,{Y:()=>l});var S=g(8286),N=g(9581),n=g(4364),h=g(5284),_=g(1412),I=g(3518),r=g(1863),e=g(5205),o=function(f,v,T,s){return new(T||(T=Promise))(function(a,t){function c(m){try{b(s.next(m))}catch(L){t(L)}}function C(m){try{b(s.throw(m))}catch(L){t(L)}}function b(m){var L;m.done?a(m.value):(L=m.value,L instanceof T?L:new T(function(A){A(L)})).then(c,C)}b((s=s.apply(f,v||[])).next())})};function l(){var f=arguments;return o(this,arguments,void 0,function*(v=[]){const T=e.Logger.logfunction("GetAllConnectionsOfCompositionBulk",f)||{};if(e.serviceWorker){T.serviceWorker=!0;try{const c=yield(0,e.sendMessage)("GetAllConnectionsOfCompositionBulk",{composition_ids:v});return e.Logger.logUpdate(T),c.data}catch(c){console.error("GetAllConnectionsOfCompositionBulk sw error: ",c),(0,r.ey)(T,"GetAllConnectionsOfCompositionBulk",c),(0,e.handleServiceWorkerException)(c)}}var s=[];if(v.length<=0)return s;var a=yield(0,h.B)(v),t=yield function(){var c=arguments;return o(this,arguments,void 0,function*(C=[]){const b=e.Logger.logfunction("GetAllConnectionsOfCompositionOnline",c);var m=[];try{var L=(0,I.Xr)();const O=yield fetch(N.B.GetAllConnectionsOfCompositionBulkUrl(),{method:"POST",headers:L,body:JSON.stringify(C)});if(O.ok){const B=yield O.json();for(var A=0;A<B.length;A++)S.d.AddConnection(B[A]),m.push(B[A])}else console.log("Get all connections of composition bulk error message: ","Cannot get response"),(0,r.ry)(O);return e.Logger.logUpdate(b),m}catch(O){O instanceof Error?console.log("Get all connections of composition bulk error message: ",O.message):console.log("Get all connections of composition bulk unexpected error: ",O),(0,r.Mb)(O,N.B.GetAllConnectionsOfCompositionBulkUrl()),(0,r.ey)(b,"GetAllConnectionsOfCompositionOnline",O)}})}(v);return(0,_.e)(s=t,a),yield(0,n.s)(s),e.Logger.logUpdate(T),s})}},8675:(K,E,g)=>{g.d(E,{l:()=>_});var S=g(1863),N=g(3518),n=g(5205),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(I){var r=arguments;return h(this,void 0,void 0,function*(){n.Logger.logfunction("GetAllLinkerConnectionsFromTheConcept",r);var e=[];try{(new Date).getTime();var o=(0,N.Xr)("application/x-www-form-urlencoded");const v=yield fetch(n.BaseUrl.GetAllLinkerConnectionOfConceptUrl()+`?conceptId=${I}`,{method:"GET",headers:o});if(v.ok){const T=yield v.json();for(var l=0;l<T.length;l++)e.push(T[l])}else console.log("Get all linker connection from the concepts error","cannot get respone"),(0,S.ry)(v)}catch(v){v instanceof Error?console.log("Get all linker connection from the concepts error: ",v.message):console.log("Get all linker connection from the concepts error(Unexpected): ",v),(0,S.Mb)(v,n.BaseUrl.GetAllLinkerConnectionOfConceptUrl())}return e})}},8937:K=>{var E={}.hasOwnProperty,g=/[ -,\.\/:-@\[-\^`\{-~]/,S=/[ -,\.\/:-@\[\]\^`\{-~]/,N=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,n=function h(_,I){"single"!=(I=function(c,C){if(!c)return C;var b={};for(var m in C)b[m]=E.call(c,m)?c[m]:C[m];return b}(I,h.options)).quotes&&"double"!=I.quotes&&(I.quotes="single");for(var r="double"==I.quotes?'"':"'",e=I.isIdentifier,o=_.charAt(0),l="",f=0,v=_.length;f<v;){var T=_.charAt(f++),s=T.charCodeAt(),a=void 0;if(s<32||s>126){if(s>=55296&&s<=56319&&f<v){var t=_.charCodeAt(f++);56320==(64512&t)?s=((1023&s)<<10)+(1023&t)+65536:f--}a="\\"+s.toString(16).toUpperCase()+" "}else a=I.escapeEverything?g.test(T)?"\\"+T:"\\"+s.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(T)?"\\"+s.toString(16).toUpperCase()+" ":"\\"==T||!e&&('"'==T&&r==T||"'"==T&&r==T)||e&&S.test(T)?"\\"+T:T;l+=a}return e&&(/^-[-\d]/.test(l)?l="\\-"+l.slice(1):/\d/.test(o)&&(l="\\3"+o+" "+l.slice(1))),l=l.replace(N,function(c,C,b){return C&&C.length%2?c:(C||"")+b}),!e&&I.wrap?r+l+r:l};n.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},n.version="3.0.0",K.exports=n},8939:(K,E,g)=>{g.d(E,{$N:()=>b,$V:()=>l,Ez:()=>m,JA:()=>c,Mb:()=>T,Nj:()=>v,PT:()=>C,RW:()=>t,XI:()=>a,ay:()=>o,hL:()=>e,kx:()=>s,re:()=>f,yz:()=>L,zN:()=>B});var S=g(7139),N=g(2),n=g(3026),h=g(8286),_=g(5205),I=g(1863),r=function(R,M,W,V){return new(W||(W=Promise))(function(Z,te){function ne(pe){try{H(V.next(pe))}catch(ke){te(ke)}}function me(pe){try{H(V.throw(pe))}catch(ke){te(ke)}}function H(pe){var ke;pe.done?Z(pe.value):(ke=pe.value,ke instanceof W?ke:new W(function(ie){ie(ke)})).then(ne,me)}H((V=V.apply(R,M||[])).next())})};function e(R){return r(this,void 0,void 0,function*(){let M={connectionList:[],compositionList:[]};try{if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetCompositionById",{id:R})).data}catch(V){console.error("GetCompositionById error sw: ",V),(0,_.handleServiceWorkerException)(V)}let W=yield(0,N.s)(R);M.connectionList=W;for(let V=0;V<M.connectionList.length;V++)M.compositionList.includes(M.connectionList[V].ofTheConceptId)||M.compositionList.push(M.connectionList[V].ofTheConceptId);return M}catch(W){return console.error("GetCompositionById error: ",W),M}})}function o(R,M,W){return r(this,void 0,void 0,function*(){var V,Z;let te={},ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let me=yield B(R,M,W);return te[null!==(Z=null===(V=ne?.type)||void 0===V?void 0:V.characterValue)&&void 0!==Z?Z:""]=me,te})}function l(R,M,W){return r(this,void 0,void 0,function*(){var V,Z;let te={},ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let me=yield B(R,M,W);te[null!==(Z=null===(V=ne?.type)||void 0===V?void 0:V.characterValue)&&void 0!==Z?Z:""]=me;let H={};return H.created_at=ne.entryTimeStamp,H.data=te,H.id=R,H})}function f(R,M,W){return r(this,void 0,void 0,function*(){var V,Z;let te={},ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let me=yield O(ne,M,W);return te[null!==(Z=null===(V=ne?.type)||void 0===V?void 0:V.characterValue)&&void 0!==Z?Z:""]=me,te})}function v(R){return r(this,void 0,void 0,function*(){var M,W;if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetComposition",{id:R})).data}catch(H){console.error("GetComposition error sw: ",H),(0,_.handleServiceWorkerException)(H)}let V=[],Z={};V=yield(0,N.s)(R);let te=[];for(let H=0;H<V.length;H++)te.includes(V[H].ofTheConceptId)||te.push(V[H].ofTheConceptId);let ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let me=yield B(R,V,te);return Z[null!==(W=null===(M=ne?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:""]=me,Z})}function T(R){return r(this,void 0,void 0,function*(){var M,W;let V=[],Z={};V=yield(0,N.s)(R);let te=[];for(let H=0;H<V.length;H++)te.includes(V[H].ofTheConceptId)||te.push(V[H].ofTheConceptId);let ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let me=yield G(R,V,te);return Z[null!==(W=null===(M=ne?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:""]=me,Z})}function s(R){return r(this,void 0,void 0,function*(){var M,W;if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetCompositionFromMemory",{id:R})).data}catch(H){console.error("GetCompositionFromMemory error sw: ",H),(0,_.handleServiceWorkerException)(H)}let V=[],Z={};V=yield h.d.GetConnectionsOfCompositionLocal(R);let te=[];for(let H=0;H<V.length;H++)te.includes(V[H].ofTheConceptId)||te.push(V[H].ofTheConceptId);let ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let me=yield A(ne,V,te);return Z[null!==(W=null===(M=ne?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:""]=me,Z})}function a(R){return r(this,void 0,void 0,function*(){var M,W;if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetCompositionFromMemoryNormal",{id:R})).data}catch(H){console.error("GetCompositionFromMemoryNormal error sw: ",H),(0,_.handleServiceWorkerException)(H)}let V=[],Z={};V=yield h.d.GetConnectionsOfCompositionLocal(R);let te=[];for(let H=0;H<V.length;H++)te.includes(V[H].ofTheConceptId)||te.push(V[H].ofTheConceptId);let ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let me=yield O(ne,V,te);return Z[null!==(W=null===(M=ne?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:""]=me,Z})}function t(R){var M=arguments;return r(this,void 0,void 0,function*(){var W,V;const Z=_.Logger.logfunction("GetCompositionWithIdFromMemory",M)||{};if(_.serviceWorker){Z.serviceWorker=!0;try{const H=yield(0,_.sendMessage)("GetCompositionWithIdFromMemory",{id:R});return _.Logger.logUpdate(Z),H.data}catch(H){console.error("GetCompositionWithIdFromMemory error sw: ",H),(0,I.ey)(Z,"GetCompositionWithIdFromMemory",H),(0,_.handleServiceWorkerException)(H)}}let te={},ne=[],me={};try{ne=yield h.d.GetConnectionsOfCompositionLocal(R);let H=[];for(let ie=0;ie<ne.length;ie++)H.includes(ne[ie].ofTheConceptId)||H.push(ne[ie].ofTheConceptId);let pe=yield n.I.GetConcept(R);0==pe.id&&null!=R&&null!=R&&(pe=yield(0,S.r)(R));let ke=yield A(pe,ne,H);me[null!==(V=null===(W=pe?.type)||void 0===W?void 0:W.characterValue)&&void 0!==V?V:""]=ke,te.created_at=pe.entryTimeStamp,te.data=me,te.id=R}catch(H){console.log("this is the exception in GetCompositionWithIdFromMemory",R),(0,I.ey)(Z,"GetCompositionWithIdFromMemory",H)}return _.Logger.logUpdate(Z),te})}function c(R,M){var W=arguments;return r(this,void 0,void 0,function*(){var V,Z;const te=_.Logger.logfunction("GetCompositionFromMemoryWithConnections",W)||{};if(_.serviceWorker){te.serviceWorker=!0;try{const ie=yield(0,_.sendMessage)("GetCompositionFromMemoryWithConnections",{id:R,connectionList:M});return _.Logger.logUpdate(te),ie.data}catch(ie){console.error("GetCompositionFromMemoryWithConnections error sw: ",ie),(0,I.ey)(te,"GetCompositionFromMemoryWithConnections",ie),(0,_.handleServiceWorkerException)(ie)}}let ne={},me=[];for(let ie=0;ie<M.length;ie++)me.includes(M[ie].ofTheConceptId)||me.push(M[ie].ofTheConceptId);let H=yield n.I.GetConcept(R);0==H.id&&null!=R&&null!=R&&(H=yield(0,S.r)(R));let pe=yield A(H,M,me);ne[null!==(Z=null===(V=H?.type)||void 0===V?void 0:V.characterValue)&&void 0!==Z?Z:""]=pe;let ke={};return ke.created_at=H.entryTimeStamp,ke.data=ne,ke.id=R,_.Logger.logUpdate(te),ke})}function C(R,M){return r(this,void 0,void 0,function*(){var W,V;const Z=_.Logger.logfunction("GetCompositionWithIdFromMemoryFromConnection",[R])||{};if(_.serviceWorker){Z.serviceWorker=!0;try{const ke=yield(0,_.sendMessage)("GetCompositionWithIdFromMemory",{id:R});return _.Logger.logUpdate(Z),ke.data}catch(ke){console.error("GetCompositionWithIdFromMemory error sw: ",ke),(0,I.ey)(Z,"GetCompositionWithIdFromMemoryFromConnection",ke),(0,_.handleServiceWorkerException)(ke)}}let te={},ne=[];for(let ke=0;ke<M.length;ke++)ne.includes(M[ke].ofTheConceptId)||ne.push(M[ke].ofTheConceptId);let me=yield n.I.GetConcept(R);0==me.id&&null!=R&&null!=R&&(me=yield(0,S.r)(R));let H=yield A(me,M,ne);te[null!==(V=null===(W=me?.type)||void 0===W?void 0:W.characterValue)&&void 0!==V?V:""]=H;let pe={};return pe.created_at=me.entryTimeStamp,pe.data=te,pe.id=R,_.Logger.logUpdate(Z),pe})}function b(R){return r(this,void 0,void 0,function*(){if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetCompositionWithIdFromMemoryNew",{id:R})).data}catch(H){console.error("GetCompositionWithIdFromMemoryNew error sw: ",H),(0,_.handleServiceWorkerException)(H)}let W=[],V={};W=yield h.d.GetConnectionsOfCompositionLocal(R);let Z=[];for(let H=0;H<W.length;H++)Z.includes(W[H].ofTheConceptId)||Z.push(W[H].ofTheConceptId);let te=yield n.I.GetConcept(R);0==te.id&&null!=R&&null!=R&&(console.log("this concept you cannot find ",R),te=yield(0,S.r)(R)),(new Date).getTime();let ne=yield function(H,pe,ke){return r(this,arguments,void 0,function*(ie,Y,re,ue=[]){var z,ge,Te,_e,Se,We,Je,Me;let Ye={},ht=ie.id,De=((new Date).getTime(),null!==(ge=null===(z=ie?.type)||void 0===z?void 0:z.characterValue)&&void 0!==ge?ge:"");if(!re.includes(ht))return{[De]:ie?.characterValue};if(ue.includes(ht))return"";ue.push(ht);for(let ot=0;ot<Y.length;ot++){let we=yield(0,_.GetTheConcept)(Y[ot].ofTheConceptId),Qe=yield(0,_.GetTheConcept)(Y[ot].toTheConceptId);Y[ot].ofConcept=we,Y[ot].toConcept=Qe;let gt=we.id,Ne=(null!==(_e=null===(Te=Qe?.type)||void 0===Te?void 0:Te.characterValue)&&void 0!==_e?_e:"").replace("the_","");null!=Ye[gt]&&null!=Ye[gt]||(Ye[gt]={}),Ye[gt][Ne]=Qe.characterValue}let pt={};for(let ot=0;ot<Y.length;ot++){let we=Y[ot].ofConcept,Qe=Y[ot].toConcept,gt=null!==(We=null===(Se=we?.type)||void 0===Se?void 0:Se.characterValue)&&void 0!==We?We:"",Ne=(null!==(Me=null===(Je=Qe?.type)||void 0===Je?void 0:Je.characterValue)&&void 0!==Me?Me:"").replace("the_","");null!=pt[we.id]&&null!=pt[we.id]||(pt[we.id]={});let Nt=pt[we.id];null!=Nt[gt]&&null!=Nt[gt]||(Nt[gt]={}),Nt[gt][Ne]=null!=Ye[Y[ot].ofTheConceptId]&&null!=Ye[Y[ot].toTheConceptId]?Ye[Qe.id]:Qe.characterValue}return pt[ie.id]})}(te,W,Z);V=ne;let me={};return me.created_at=te.entryTimeStamp,me.data=V,me.id=R,me})}function m(R){return r(this,void 0,void 0,function*(){var M,W;if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetCompositionWithIdAndDateFromMemory",{id:R})).data}catch(pe){console.error("GetCompositionWithIdAndDateFromMemory error sw: ",pe),(0,_.handleServiceWorkerException)(pe)}let V=[],Z={};V=yield h.d.GetConnectionsOfCompositionLocal(R);let te=[];for(let pe=0;pe<V.length;pe++)te.includes(V[pe].ofTheConceptId)||te.push(V[pe].ofTheConceptId);let ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let me=yield B(R,V,te);Z[null!==(W=null===(M=ne?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:""]=me;let H={};return H.data=Z,H.id=R,H.created_at=ne.entryTimeStamp,H})}function L(R){var M=arguments;return r(this,void 0,void 0,function*(){var W,V;const Z=_.Logger.logfunction("GetCompositionWithId",M)||{};if(_.serviceWorker){Z.serviceWorker=!0;try{const ie=yield(0,_.sendMessage)("GetCompositionWithId",{id:R});return _.Logger.logUpdate(Z),ie.data}catch(ie){console.error("GetCompositionWithId error sw: ",ie),(0,I.ey)(Z,"GetCompositionWithId",ie),(0,_.handleServiceWorkerException)(ie)}}let te=[],ne={};te=yield(0,N.s)(R);let me=[];for(let ie=0;ie<te.length;ie++)me.includes(te[ie].ofTheConceptId)||me.push(te[ie].ofTheConceptId);let H=yield n.I.GetConcept(R);0==H.id&&null!=R&&null!=R&&(H=yield(0,S.r)(R));let pe=yield B(R,te,me);ne[null!==(V=null===(W=H?.type)||void 0===W?void 0:W.characterValue)&&void 0!==V?V:""]=pe;let ke={};return ke.data=ne,ke.id=R,_.Logger.logUpdate(Z),ke})}function A(R,M,W){return r(this,arguments,void 0,function*(V,Z,te,ne=[]){var H,pe;let ke={},ie=[],Y=V.id;if(!te.includes(Y))return V?.characterValue;if(ne.includes(Y))return"";ne.push(Y);for(let re=0;re<Z.length;re++)if(Z[re].ofTheConceptId==Y)if(Y!=Z[re].toTheConceptId){let ue=Z[re].toTheConceptId,z=yield n.I.GetConcept(ue);if(null!=z&&0!=z.id||null==ue||null==ue||(z=yield(0,S.r)(ue)),0!=z.id&&null==z?.type){let _e=z.typeId,Se=yield n.I.GetConcept(_e);z.type=Se,null==Se&&null!=_e&&null!=_e&&(Se=yield(0,S.r)(_e),z.type=Se)}let Te=(null!==(pe=null===(H=z?.type)||void 0===H?void 0:H.characterValue)&&void 0!==pe?pe:"").replace("the_","");if(isNaN(Number(Te))){if(Te){const _e=yield A(z,Z,te,ne);ke[Te]=_e}}else{const _e=yield A(z,Z,te,ne);ie[Te]=_e,ke=ie}}else console.log("this is the faulty connection ",Z[re]);return ke})}function O(R,M,W){return r(this,arguments,void 0,function*(V,Z,te,ne=[]){var H,pe;const ke=_.Logger.logfunction("recursiveFetchConceptNormal",[V]);(new Date).getTime();let ie={},Y=[],re=V.id;if(ie.id=re,!te.includes(re))return V?.characterValue;if(ne.includes(re))return"";ne.push(re);for(let ue=0;ue<Z.length;ue++)if(Z[ue].ofTheConceptId==re)if(re!=Z[ue].toTheConceptId){let z=Z[ue].toTheConceptId,ge=yield n.I.GetConcept(z);if(null!=ge&&0!=ge.id||null==z||null==z||(ge=yield(0,S.r)(z)),0!=ge.id&&null==ge?.type){let Se=ge.typeId,We=yield n.I.GetConcept(Se);ge.type=We,null==We&&null!=Se&&null!=Se&&(We=yield(0,S.r)(Se),ge.type=We)}let _e=(null!==(pe=null===(H=ge?.type)||void 0===H?void 0:H.characterValue)&&void 0!==pe?pe:"").replace("the_","");if(isNaN(Number(_e))){if(_e){const Se=yield A(ge,Z,te,ne);ie[_e]=Se}}else{const Se=yield A(ge,Z,te,ne);Y[_e]=Se,ie=Y}}else console.log("this is the faulty connection ",Z[ue]);return _.Logger.logUpdate(ke),ie})}function B(R,M,W){return r(this,arguments,void 0,function*(V,Z,te,ne=[]){var H,pe;let ke={},ie=[];if(0==V)return null;let Y=yield n.I.GetConcept(V);if(null!=Y&&0!=Y.id||null==V||null==V||(Y=yield(0,S.r)(V)),0!=Y.id&&null==Y.type){let re=Y.typeId,ue=yield n.I.GetConcept(re);Y.type=ue,null==ue&&null!=re&&null!=re&&(ue=yield(0,S.r)(re),Y.type=ue)}if(!te.includes(V))return Y?.characterValue;if(ne.includes(V))return"";ne.push(V);for(let re=0;re<Z.length;re++)if((new Date).getTime(),Z[re].ofTheConceptId==V)if(V!=Z[re].toTheConceptId){let ue=Z[re].toTheConceptId,z=yield n.I.GetConcept(ue);if(null!=z&&0!=z.id||null==ue||null==ue||(z=yield(0,S.r)(ue)),0!=z.id&&null==z?.type){let _e=z.typeId,Se=yield n.I.GetConcept(_e);z.type=Se,null==Se&&null!=_e&&null!=_e&&(Se=yield(0,S.r)(_e),z.type=Se)}let Te=(null!==(pe=null===(H=z?.type)||void 0===H?void 0:H.characterValue)&&void 0!==pe?pe:"").replace("the_","");if(isNaN(Number(Te))){if(Te){const _e=yield B(ue,Z,te,ne);ke[Te]=_e}}else{const _e=yield B(ue,Z,te,ne);ie[Te]=_e,ke=ie}}else console.log("this is the faulty connection ",Z[re]);return ke})}function G(R,M,W){return r(this,arguments,void 0,function*(V,Z,te,ne=[]){var H,pe;let ke={},ie=[];if(0==V)return null;let Y=yield n.I.GetConcept(V);if(null!=Y&&0!=Y.id||null==V||null==V||(Y=yield(0,S.r)(V)),0!=Y.id&&null==Y.type){let re=Y.typeId,ue=yield n.I.GetConcept(re);Y.type=ue,null==ue&&null!=re&&null!=re&&(ue=yield(0,S.r)(re),Y.type=ue)}if(!te.includes(V))return Y?.characterValue;if(ne.includes(V))return"";ne.push(V),ke.id=V;for(let re=0;re<Z.length;re++)if(Z[re].ofTheConceptId==V){let ue=Z[re].toTheConceptId,z=yield n.I.GetConcept(ue);if(null!=z&&0!=z.id||null==ue||null==ue||(z=yield(0,S.r)(ue)),z&&null==z?.type){let _e=z.typeId,Se=yield n.I.GetConcept(_e);z.type=Se,null==Se&&null!=_e&&null!=_e&&(Se=yield(0,S.r)(_e),z.type=Se)}let Te=(null!==(pe=null===(H=z?.type)||void 0===H?void 0:H.characterValue)&&void 0!==pe?pe:"").replace("the_","");if(isNaN(Number(Te))){if(Te){const _e=yield G(ue,Z,te);ke[Te]=_e}}else{const _e=yield G(ue,Z,te);ie[Te]=_e,ke=ie}}return ke})}},9003:(K,E,g)=>{g.d(E,{S5:()=>r,kH:()=>o,qI:()=>I});var S=g(1863),N=g(5205),n=function(l,f,v,T){return new(v||(v=Promise))(function(s,a){function t(b){try{C(T.next(b))}catch(m){a(m)}}function c(b){try{C(T.throw(b))}catch(m){a(m)}}function C(b){var m;b.done?s(b.value):(m=b.value,m instanceof v?m:new v(function(L){L(m)})).then(t,c)}C((T=T.apply(l,f||[])).next())})};let h=10;class _{}function I(l){const f=N.Logger.logfunction("openDatabase",arguments);return new Promise(function(v,T){_.db&&(N.Logger.logUpdate(f),v(_.db));let s=N.BaseUrl.BASE_URL+"_FreeSchemaLocal"+N.BaseUrl.BASE_APPLICATION;const a=indexedDB.open(s,h);a.onupgradeneeded=t=>{var c=t.target.result,C="localconcept",b="localconnection",m="localid";console.log("this is the version upgrade",h),c.objectStoreNames.contains(C)&&c.deleteObjectStore(C),c.objectStoreNames.contains(b)&&c.deleteObjectStore(b),c.objectStoreNames.contains(m)&&c.deleteObjectStore(m),c.objectStoreNames.contains(C)||(c.createObjectStore(C,{keyPath:"id"}).transaction.oncomplete=L=>{}),c.objectStoreNames.contains(b)||(c.createObjectStore(b,{keyPath:"id"}).transaction.oncomplete=L=>{}),c.objectStoreNames.contains(m)||(c.createObjectStore(m,{keyPath:"id"}).transaction.oncomplete=L=>{e(m,{id:0,value:-100}),e(m,{id:1,value:-200}),e(m,{id:3,value:N.BaseUrl.getRandomizer()})}),v(c)},a.onerror=t=>{console.error("Why didn't you allow my web app to use IndexedDB?!",t),indexedDB.deleteDatabase(s),I(l),(0,S.ey)(f,"openDatabase",t),T(t)},a.onsuccess=function(t){_.db=t.target.result,N.Logger.logUpdate(f),v(_.db)}})}function r(l){var f=arguments;return n(this,void 0,void 0,function*(){const v=N.Logger.logfunction("getObjectsFromLocalIndexDb",f);return new Promise(function(T,s){I(l).then(a=>{var t=[],c=a.transaction(l,"readwrite").objectStore(l).getAll();c.onsuccess=()=>{const C=c.result;for(var b=0;b<C.length;b++)t.push(C[b]);N.Logger.logUpdate(v),T(t)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot get objects from database because you cannot open the Local database",data:a};(0,S.ey)(v,"getObjectsFromLocalIndexDb",t),s(t)})})})}function e(l,f){const v=N.Logger.logfunction("storeToDatabase",[l,"localindexdb"]);return new Promise(function(T,s){I(l).then(a=>{const t=a.transaction(l,"readwrite").objectStore(l).add(f);t.onsuccess=c=>{N.Logger.logUpdate(v),T(f)},t.onerror=c=>{let C={status:400,ok:!1,message:"Cannot store to the Local database "+l,data:c,body:f};(0,S.ey)(v,"storeToDatabase",C),s(C)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot store to database because you cannot open the Local database",data:a};(0,S.ey)(v,"storeToDatabase",t),s(t)})})}function o(l,f){const v=N.Logger.logfunction("UpdateToDatabase",arguments);return new Promise(function(T,s){I(l).then(a=>{const t=a.transaction(l,"readwrite").objectStore(l).put(f);t.onsuccess=c=>{N.Logger.logUpdate(v),T(f)},t.onerror=c=>{let C={status:400,ok:!1,message:"Cannot Update to the Local database"+l,data:c,body:f};(0,S.ey)(v,"UpdateToDatabase",C),s(C)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot update to database because you cannot open the Local database",data:a};(0,S.ey)(v,"UpdateToDatabase",t),s(t)})})}},9371:(K,E,g)=>{let S=g(3152);class N extends S{constructor(h){super(h),this.type="comment"}}K.exports=N,N.default=N},9577:(K,E,g)=>{let S=g(7793),N=g(1106),n=g(8339);function h(_,I){let r=new N(_,I),e=new n(r);try{e.parse()}catch(o){throw o}return e.root}K.exports=h,h.default=h,S.registerParse(h)},9581:(K,E,g)=>{g.d(E,{B:()=>S});class S{static setRandomizer(n){console.log("set randomizer",n),this.BASE_RANDOMIZER=n}static getRandomizer(){return this.BASE_RANDOMIZER}static GetConceptUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&"string"==typeof this.NODE_CACHE_URL&&""===this.NODE_CACHE_URL.trim()?this.BASE_URL+"/api/getConcept":this.NODE_CACHE_URL+"/api/getConcept"}static GetConnectionUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&"string"==typeof this.NODE_CACHE_URL&&""===this.NODE_CACHE_URL.trim()?this.BASE_URL+"/api/get-connection-by-id":this.NODE_CACHE_URL+"/api/get-connection-by-id"}static GetConceptBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&"string"==typeof this.NODE_CACHE_URL&&""===this.NODE_CACHE_URL.trim()?this.BASE_URL+"/api/get_concept_bulk":this.NODE_CACHE_URL+"/api/get_concept_bulk"}static GetConnectionBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&"string"==typeof this.NODE_CACHE_URL&&""===this.NODE_CACHE_URL.trim()?this.BASE_URL+"/api/get_connection_bulk":this.NODE_CACHE_URL+"/api/get_connection_bulk"}static GetAllConceptsOfUserUrl(){return this.BASE_URL+"/api/get_all_concepts_of_user"}static GetAllConnectionsOfUserUrl(){return this.BASE_URL+"/api/get_all_connections_of_user"}static GetAllConnectionsOfCompositionUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition"}static GetAllConnectionsOfCompositionBulkUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition_bulk"}static GetConceptByCharacterValueUrl(){return this.BASE_URL+"/api/get_concept_by_character_value"}static GetConceptByCharacterAndTypeUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_type"}static GetConceptByCharacterAndCategoryUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category"}static GetConceptByCharacterAndCategoryDirectUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category_direct"}static GetCharacterByCharacterUrl(){return this.BASE_URL+"/api/get_character_by_character"}static GetAllConceptsByTypeUrl(){return this.BASE_URL+"/api/get_all_concepts_by_type"}static GetAllConnectionsOfConceptUrl(){return this.BASE_URL+"/api/get-link-connections"}static GetAllConnectionsToConceptUrl(){return this.BASE_URL+"/api/get-link-reverse-connections"}static GetAllAiData(){return this.BASE_URL+"/api/get-preloaded-concepts"}static getAppConfig(){return this.NODE_URL+"/api/v1/config"}static PostPrefetchConceptConnections(){return this.NODE_URL+"/api/v1/access-tracker/sync-access-tracker"}static GetSuggestedConcepts(){return this.NODE_URL+"/api/v1/access-tracker/list-concepts-file"}static GetSuggestedConnections(){return this.NODE_URL+"/api/v1/access-tracker/list-connections-file"}static PostLogger(){return this.LOG_SERVER+"/api/logger"}static LogHealth(){return this.LOG_SERVER+"/api/check"}static GetAllPrefetchConnectionsUrl(){return this.BASE_URL+"/api/get_all_connections_of_user?inpage=500"}static GetAllLinkerConnectionOfConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-from-concept"}static GetAllLinkerConnectionToConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-to-concept"}static DeleteConceptUrl(){return this.BASE_URL+"/api/delete_concept"}static DeleteUserUrl(){return this.BASE_URL+"/api/deleteuser"}static RecursiveSearchUrl(){return this.BASE_URL+"/api/recursivesearch-concept-connection"}static SearchLinkMultipleAllApiUrl(){return this.BASE_URL+"/api/Connection/search-link-multiple-all-ccs"}static MakeTheNameInBackendUrl(){return this.BASE_URL+"/api/make-name-from-frontend"}static SearchAllTypeWithLinker(n=!0){return n?this.BASE_URL+"/api/search-all-with-linker-ccs":this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static LoginUrl(){return this.BASE_URL+"/api/auth/login"}static SignupUrl(){return this.BASE_URL+"/api/auth/signup"}static GetCompositionConnectionBetweenTwoConceptsUrl(){return this.BASE_URL+"/api/get-composition-connection-between-two-concepts"}static SearchCompositionsUrl(){return this.BASE_URL+"/api/search-compositions"}static SearchLinkMultipleAll(){return this.BASE_URL+"/api/Connection/search-link-multiple-all"}static CreateSessionId(){return this.BASE_URL+"/api/create-session-id-remote"}static CreateSessionVisitUrl(){return this.BASE_URL+"/api/create-remote-session-visit"}static ViewInternalDataUrl(){return this.BASE_URL+"/api/view-api-internal-data-ccs-id-bulk"}static SearchInternalWithAuthenticatedCcsUrl(){return this.BASE_URL+"/api/search-composition-internal-authenticated-ccs"}static SearchInternalWithCcsUrl(){return this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static CreateGhostConceptApiUrl(n=!0){return n?S.NODE_URL+"/api/v1/local-concepts":S.NODE_URL+"/api/v1/local-concepts-without-auth"}static CreateGhostConnectionApiUrl(){return S.NODE_URL+"/api/v1/local-connections"}static GetRealConceptById(){return S.NODE_URL+"/api/v1/local-concepts-translate"}static GetReservedIdUrl(){return this.BASE_URL+"/api/get_reserved_ids"}static GetReservedConnectionIdUrl(){return this.BASE_URL+"/api/get_reserved_connection_ids"}static CreateTheTextDataUrl(){return this.BASE_URL+"/api/create_text_data"}static CreateTheCharacterDataUrl(){return this.BASE_URL+"/api/create_character_data"}static CreateTheConceptUrl(){return this.BASE_URL+"/api/create_the_concept"}static CreateTheConnectionUrl(){return this.BASE_URL+"/api/create_the_connection"}static CreateTheConnectionNewUrl(){return this.BASE_URL+"/api/create_the_connection_new"}static MakeTheTypeConceptUrl(){return this.BASE_URL+"/api/make_the_type_concept"}static DeleteTheConnectionUrl(){return this.BASE_URL+"/api/delete_connection"}static DeleteTheConnectionBulkUrl(){return this.BASE_URL+"/api/delete_connection_bulk"}static GetTypeConceptBulk(){return this.BASE_URL+"/api/get_type_concept_by_character_bulk"}static UploadFileLimitUrl(){return this.BASE_URL+"/api/upload/limit"}static FreeschemaQueryUrl(){return this.BASE_URL+"/api/freeschema-query"}static uploadImageUrl(){return this.BASE_URL+"/api/Image/UploadImage"}static uploadImageUrlWithSmall(){return this.BASE_URL+"/api/Image/UploadImageV2"}static uploadFileUrl(){return this.BASE_URL+"/api/Image/UploadFile"}static sendMail(){return this.BASE_URL+"/api/sendmail"}static sendBulkMail(){return this.BASE_URL+"/api/sendmail/bulk"}static getWidgetData(){return this.BASE_URL+"/api/get-widget"}static getLatestWidgetData(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&"string"==typeof this.NODE_CACHE_URL&&""===this.NODE_CACHE_URL.trim()?this.BASE_URL+"/api/get-latest-widget":this.NODE_CACHE_URL+"/api/get-latest-widget"}static getRecentWidgetData(){return this.BASE_URL+"/api/get-recent-widget"}static getConnectionsByTypes(){return this.BASE_URL+"/api/get-connection-by-types"}static CreatePrototypeUrl(){return this.BASE_URL+"/api/create-prototype"}static GetCachedImage(n){return"https://cdn.boomconcole.com/freeschema/"+n}}S.BASE_URL="https://localhost:7053/",S.NODE_CACHE_URL="",S.AI_URL="https://ai.freeschema.com",S.MQTT_URL="192.168.1.249",S.NODE_URL="http://localhost:5001",S.LOG_SERVER="https://logdev.freeschema.com",S.BASE_APPLICATION="",S.DOCUMENTATION_WIDGET=0,S.isNearestCache=!0,S.FLAGS={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1},S.BASE_RANDOMIZER=999},9606:(K,E,g)=>{E.__esModule=!0,E.unesc=E.stripComments=E.getProp=E.ensureObject=void 0;var S=_(g(5286));E.unesc=S.default;var N=_(g(6291));E.getProp=N.default;var n=_(g(1557));E.ensureObject=n.default;var h=_(g(8354));function _(I){return I&&I.__esModule?I:{default:I}}E.stripComments=h.default},9635:(K,E,g)=>{g.d(E,{x:()=>S});const S=new BroadcastChannel("Freeschema_mftsccs_browser_channel")},9700:(K,E,g)=>{g.d(E,{V:()=>r});var S,N=g(5205),n=g(3278),h=g(1863),_=g(3518),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};class r{static startAutoSync(){this.autoSyncInterval?console.warn("Auto-sync is already running."):(this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS,setInterval(()=>{const o=Date.now();this.nextSyncTime&&o>=this.nextSyncTime&&(this.nextSyncTime=o+this.SYNC_INTERVAL_MS,this.sendPackageLogsToServer(),this.sendApplicationLogsToServer())},3e4))}static stopAutoSync(){null!==this.autoSyncInterval&&(clearInterval(this.autoSyncInterval),this.autoSyncInterval=null,this.nextSyncTime=null)}static setLogLevel(o){this.logLevel=o}static shouldLog(o){return this.LOG_LEVELS.indexOf(o)>=this.LOG_LEVELS.indexOf(this.logLevel)}static formatLogData(o,l,f){const v=Object.assign({timestamp:(new Date).toISOString(),level:o,message:l},f);return this.packageLogsData.push(v),"ERROR"==o&&(this.sendPackageLogsToServer(),this.sendApplicationLogsToServer()),v}static log(o,l,f){if(this.logPackageActivationStatus)try{this.formatLogData(o,l,f||null)}catch(v){console.error("Error on Logger Log : ",v)}}static logUpdate(o){var l;try{if(!this.logPackageActivationStatus)return{};if(!o)return{};const f=Date.now();o.startTime=null!==(l=o.startTime)&&void 0!==l?l:f,o.responseTime=f-o.startTime+" ms",1==!o.serviceWorker&&(o.serviceWorker=!1)}catch(f){(0,h.ey)(o,"Logger.logUpdate",f)}}static logfunction(o,...l){if(!this.logPackageActivationStatus)return{};const f=Date.now();let v=l;const T=N.BaseUrl.getRandomizer();return this.formatLogData("INFO","function called",{startTime:f,functionName:o,functionParameters:v,requestFrom:N.BaseUrl.BASE_APPLICATION,sessionId:n.b.sessionId,applicationId:T})}static logError(o,l,f,v,T,s,a,t,c,C,b){try{const m=n.b.sessionId,L={startTime:o,userId:l,operationType:f,requestFrom:v,requestIP:T,responseStatus:s,responseTime:`${(performance.now()-o).toFixed(3)}ms`,responseSize:a?`${JSON.stringify(a).length}`:"0",sessionId:m?.toString(),functionName:t,functionParameters:c,userAgent:C,conceptsUsed:b};this.formatLogData("ERROR",`Information logged for ${t}`,L)}catch{console.error("Error on logError")}}static logApplication(o,l,f){if(this.logApplicationActivationStatus)try{const v={timestamp:(new Date).toISOString(),level:o,message:l,data:f||null};this.applicationLogsData.push(v),"ROUTE"!=o&&"USER_EVENT"!=o||(this.sendPackageLogsToServer(),this.sendApplicationLogsToServer())}catch(v){console.error("Failed to log application activity:",v)}}static checkLoggerServerStatus(){return I(this,void 0,void 0,function*(){let o=1e4+S.checkInterval;if(S.lastCheck&&(new Date).getTime()-S.lastCheck.getTime()<o)console.log("still cooling down");else{try{let f=N.BaseUrl.LogHealth();S.lastCheck=new Date,(yield fetch(f,{method:"GET"})).ok&&(S.isLoggerActive=!0,S.checkInterval=0)}catch{console.warn("This is error in the logger check")}S.checkInterval=S.checkInterval+500}})}static sendApplicationLogsToServer(){return I(this,void 0,void 0,function*(){const o=this.applicationLogsData;try{if(!S.isLoggerActive)return void S.checkLoggerServerStatus();if(0===o.length)return;this.applicationLogsData=[];const l=50;let f=(0,_.Xr)(),v=0;for(;0!=o.length;){const T=o.slice(0,l),s=yield fetch(N.BaseUrl.PostLogger(),{method:"POST",headers:f,body:JSON.stringify({logType:this.appLogs,logData:T})});s.ok||404===s.status&&(S.isLoggerActive=!1),o.splice(0,l),v+=l,v++}}catch{S.isLoggerActive=!1}})}static sendPackageLogsToServer(){return I(this,void 0,void 0,function*(){const o=this.packageLogsData;try{if(!S.isLoggerActive)return void S.checkLoggerServerStatus();if(0===o.length)return;this.packageLogsData=[];const l=300;let f=0;for(;0!=o.length;){const v=o.slice(0,l);let T=(0,_.Xr)();const s=yield fetch(N.BaseUrl.PostLogger(),{method:"POST",headers:T,body:JSON.stringify({logType:this.mftsccsBrowser,logData:v})});if(!s.ok)return void(404===s.status&&(S.isLoggerActive=!1));o.splice(0,l),f++}}catch{S.isLoggerActive=!1}})}static saveLogToLocalStorage(o,l){try{if(void 0===typeof localStorage)return void console.warn("Local Storage type undefined");{const f=JSON.parse((null==localStorage?void 0:localStorage.getItem(o))||"[]");f.push(l),localStorage?.setItem(o,JSON.stringify(f))}}catch{console.error("Error on saving log in localstorage"),this.log("ERROR","Error while saving log in local storage")}}static clearLogsFromLocalStorage(o){void 0!==typeof localStorage?localStorage?.removeItem(o):console.warn("localStorage is not available")}}S=r,r.isLoggerActive=!0,r.lastCheck=new Date,r.checkInterval=0,r.logLevel="INFO",r.packageLogsData=[],r.applicationLogsData=[],r.LOG_LEVELS=["DEBUG","INFO","WARNING","ERROR","ROUTE"],r.SYNC_INTERVAL_MS=6e4,r.nextSyncTime=null,r.appLogs="app",r.mftsccsBrowser="mftsccs",r.logApplicationActivationStatus=!1,r.logPackageActivationStatus=!1,r.autoSyncInterval=null,S.startAutoSync()},9720:(K,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(3295))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.TAG,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,K.exports=E.default},9736:(K,E,g)=>{g.d(E,{v:()=>c});var S=g(205),N=g(2515),n=function(C,b,m,L){return new(m||(m=Promise))(function(A,O){function B(M){try{R(L.next(M))}catch(W){O(W)}}function G(M){try{R(L.throw(M))}catch(W){O(W)}}function R(M){var W;M.done?A(M.value):(W=M.value,W instanceof m?W:new m(function(V){V(W)})).then(B,G)}R((L=L.apply(C,b||[])).next())})};let h=(()=>{class C{static addNodeToTree(m){if(null==this.root)return this.root=m,this.root;this.root=this.root.addNode(m,this.root,this.root.height)}static addConceptToTree(m){var L=new N.x(m.id,m,null,null);new N.x(m.characterValue,m,null,null),this.addNodeToTree(L)}static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((m,L)=>{this.checkFlag(m),setTimeout(()=>{L("not")},25e3)})})}static checkFlag(m){if(S.B.isLocalDataLoaded)return m("done");setTimeout(C.checkFlag,1e3,m)}static getNodeFromTree(m){return n(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(m,this.root):null})}static getCharacterAndTypeFromTree(m,L){return this.root?this.root.getFromNodeWithCharacterAndType(m,L,this.root):this.root}static updateSyncStatus(m){return this.root?this.root.updateNodeSyncStatus(m,!0,this.root):this.root}static removeNodeFromTree(m){return n(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,m))})}}return C.root=null,C})();var _=function(C,b,m,L){return new(m||(m=Promise))(function(A,O){function B(M){try{R(L.next(M))}catch(W){O(W)}}function G(M){try{R(L.throw(M))}catch(W){O(W)}}function R(M){var W;M.done?A(M.value):(W=M.value,W instanceof m?W:new m(function(V){V(W)})).then(B,G)}R((L=L.apply(C,b||[])).next())})};let I=(()=>{class C{static waitForDataToLoad(){return _(this,void 0,void 0,function*(){return new Promise((m,L)=>{this.checkFlag(m),setTimeout(()=>{L("not")},25e3)})})}static checkFlag(m){if(S.B.isLocalCharacterLoaded)return m("done");setTimeout(C.checkFlag,1e3,m)}static addNodeToTree(m){return _(this,void 0,void 0,function*(){return null==this.LocalCharacterRoot?(this.LocalCharacterRoot=m,this.LocalCharacterRoot):(this.LocalCharacterRoot=this.LocalCharacterRoot.addCharacterNode(m,this.LocalCharacterRoot,this.LocalCharacterRoot.height),this.LocalCharacterRoot)})}static addConceptToTree(m){if(""!=m.characterValue){var L=new N.x(m.characterValue,m,null,null);this.addNodeToTree(L)}}static getNodeFromTree(m){return this.LocalCharacterRoot?this.LocalCharacterRoot.getCharacterFromNode(m,this.LocalCharacterRoot):this.LocalCharacterRoot}static getCharacterAndTypeFromTree(m,L){return _(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndType(m,L,this.LocalCharacterRoot):this.LocalCharacterRoot})}static getCharacterAndCategoryFromTree(m,L){return _(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndCategory(m,L,this.LocalCharacterRoot):this.LocalCharacterRoot})}static removeConceptType(m,L){this.LocalCharacterRoot&&(this.LocalCharacterRoot=this.LocalCharacterRoot.removeNodeWithVariants(this.LocalCharacterRoot,m,L))}}return C.LocalCharacterRoot=null,C})();var r=function(C,b,m,L){return new(m||(m=Promise))(function(A,O){function B(M){try{R(L.next(M))}catch(W){O(W)}}function G(M){try{R(L.throw(M))}catch(W){O(W)}}function R(M){var W;M.done?A(M.value):(W=M.value,W instanceof m?W:new m(function(V){V(W)})).then(B,G)}R((L=L.apply(C,b||[])).next())})};let e=(()=>{class C{static addNodeToTree(m){return r(this,void 0,void 0,function*(){return null==this.LocalTypeRoot?(this.LocalTypeRoot=m,this.LocalTypeRoot):(this.LocalTypeRoot=this.LocalTypeRoot.addTypeNode(m,this.LocalTypeRoot,this.LocalTypeRoot.height),this.LocalTypeRoot)})}static addConceptToTree(m){if(0!=m.typeId){var L=new N.x(m.typeId,m,null,null);this.addNodeToTree(L)}}static removeConceptType(m,L){this.LocalTypeRoot&&(this.LocalTypeRoot=this.LocalTypeRoot.removeNodeWithVariants(this.LocalTypeRoot,m,L))}static getNodeFromTree(m){return this.LocalTypeRoot?this.LocalTypeRoot.getFromNode(m,this.LocalTypeRoot):this.LocalTypeRoot}static getTypeVariantsFromTree(m){var L=this.getNodeFromTree(m),A=[];if(L){A.push(L?.value);for(let O=0;O<L.variants.length;O++)A.push(L.variants[O].value);return A}}static waitForDataToLoad(){return r(this,void 0,void 0,function*(){return new Promise((m,L)=>{this.checkFlag(m),setTimeout(()=>{L("not")},25e3)})})}static checkFlag(m){if(S.B.isLocalTypeLoaded)return m("done");setTimeout(C.checkFlag,1e3,m)}static getTypeVariantsFromTreeWithUserId(m,L){return r(this,void 0,void 0,function*(){var A=[],O=this.getNodeFromTree(m);if(O){console.log("this is the node to type",O),O.value.userId!=L&&999!=O.value.userId||A.push(O?.value);for(let B=0;B<O.variants.length;B++)O.variants[B].value.userId!=L&&999!=O.value.userId||A.push(O.variants[B].value)}return A})}}return C.LocalTypeRoot=null,C})();var o=g(6416),l=g(3026),f=g(7820),v=g(4864),T=g(628),s=g(5205),a=g(3278),t=function(C,b,m,L){return new(m||(m=Promise))(function(A,O){function B(M){try{R(L.next(M))}catch(W){O(W)}}function G(M){try{R(L.throw(M))}catch(W){O(W)}}function R(M){var W;M.done?A(M.value):(W=M.value,W instanceof m?W:new m(function(V){V(W)})).then(B,G)}R((L=L.apply(C,b||[])).next())})};let c=(()=>{class C{constructor(){this.name="conceptsArray"}static AddConcept(m){0!=m.id&&(h.addConceptToTree(m),I.addConceptToTree(m),e.addConceptToTree(m),this.localconceptsArray.push(m))}static AddPermanentConcept(m){0!=m.id&&(h.removeNodeFromTree(m.ghostId),I.removeConceptType(m.characterValue,m.ghostId),e.removeConceptType(m.typeId,m.ghostId),f.G.addConceptToTree(m),l.I.AddConcept(m),(0,s.AddGhostConcept)(m,m.userId,a.b.sessionId))}static RemoveConcept(m){return t(this,void 0,void 0,function*(){try{0!=m.id&&(h.removeNodeFromTree(m.ghostId),I.removeConceptType(m.characterValue,m.ghostId),e.removeConceptType(m.typeId,m.ghostId))}catch(L){throw L}})}static RemoveConceptById(m){return t(this,void 0,void 0,function*(){try{let L=yield C.GetConcept(m);0!=L.id&&(h.removeNodeFromTree(m),I.removeConceptType(L.characterValue,L.ghostId),e.removeConceptType(L.typeId,L.ghostId),T.H.RemoveConcept(L))}catch(L){throw L}})}static AddConceptToMemory(m){0!=m.id&&(h.addConceptToTree(m),I.addConceptToTree(m),e.addConceptToTree(m))}static GetConcept(m){return t(this,void 0,void 0,function*(){var L=(0,o.u)(),A=yield h.getNodeFromTree(m);if(A?.value){var O=A.value;O&&(L=O)}return L})}static UpdateConceptSyncStatus(m){return t(this,void 0,void 0,function*(){h.updateSyncStatus(m)})}static GetConceptByGhostId(m){return t(this,void 0,void 0,function*(){var L=(0,o.u)(),A=yield f.G.getNodeFromTree(m);if(A?.value){var O=A.value;O&&(L=O)}return L})}static GetConceptByCharacter(m){return t(this,void 0,void 0,function*(){var L=(0,o.u)(),A=I.getNodeFromTree(m);return A&&(L=A.value),L})}static GetConceptByCharacterAndTypeLocal(m,L){return t(this,void 0,void 0,function*(){var A=(0,o.u)(),O=yield I.getCharacterAndTypeFromTree(m,L);return O&&(A=O.value),A})}static GetConceptByCharacterAndCategoryLocal(m,L){return t(this,void 0,void 0,function*(){var A=(0,o.u)(),O=yield I.getCharacterAndCategoryFromTree(m,L);return O&&(A=O.value),A})}static GetConceptsByTypeId(m){let L=[];for(var A=0;A<this.localconceptsArray.length;A++)this.localconceptsArray[A].typeId==m&&L.push(this.localconceptsArray[A]);return L}static GetConceptsByTypeIdAndUser(m,L){return t(this,void 0,void 0,function*(){let A=[];return A=yield e.getTypeVariantsFromTreeWithUserId(m,L),A})}static ClearData(){return t(this,void 0,void 0,function*(){this.localconceptsArray=[],v.G.connectionArray=[]})}getName(){return this.name}}return C.localconceptsArray=[],C})()},9746:()=>{},9934:(K,E,g)=>{function S(N,n){return-1===N.indexOf(n)&&N.push(n),N}g.d(E,{A:()=>S})},9975:(K,E,g)=>{g.d(E,{A:()=>_});var S=g(5205),N=g(9736),n=g(3077),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(I,r,e,o,l){return h(this,arguments,void 0,function*(f,v,T,s,a,t={concepts:[],connections:[]}){var c,C,b,m;if(S.serviceWorker)try{const O=yield(0,S.sendMessage)("MakeTheConceptLocal",{referent:f,typeCharacter:v,userId:T,categoryId:s,typeId:a,actions:t});return!(null===(C=null===(c=O?.actions)||void 0===c?void 0:c.concepts)||void 0===C)&&C.length&&(t.concepts=JSON.parse(JSON.stringify(O.actions.concepts))),!(null===(m=null===(b=O?.actions)||void 0===b?void 0:b.connections)||void 0===m)&&m.length&&(t.connections=JSON.parse(JSON.stringify(O.actions.connections))),O.data}catch(O){console.error("MakeTheConceptLocal error sw: ",O),(0,S.handleServiceWorkerException)(O)}let L=yield N.v.GetConceptByCharacterAndTypeLocal(f,a),A=L;return"the"==v&&(s=1),0==A.id&&(L=yield(0,n.A)(f,v,T,s,a,4,void 0,null,t),A=L),A})}},9977:()=>{}},$={};function be(K){var E=$[K];if(void 0!==E)return E.exports;var g=$[K]={exports:{}};return Rt[K](g,g.exports,be),g.exports}be.n=K=>{var E=K&&K.__esModule?()=>K.default:()=>K;return be.d(E,{a:E}),E},be.d=(K,E)=>{for(var g in E)be.o(E,g)&&!be.o(K,g)&&Object.defineProperty(K,g,{enumerable:!0,get:E[g]})},be.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),be.o=(K,E)=>Object.prototype.hasOwnProperty.call(K,E),be.r=K=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(K,"__esModule",{value:!0})};var Q=be(5205);const Bt=Q.ADMIN,it=Q.ALLID,bt=Q.AccessTracker,Lt=Q.AddGhostConcept,qe=Q.Anomaly,oe=Q.BaseUrl,ee=Q.BinaryTree,Ce=Q.BuildWidgetFromId,le=Q.BuilderStatefulWidget,de=Q.Composition,he=Q.CompositionBinaryTree,ce=Q.CompositionNode,Be=Q.Concept,$e=Q.ConceptsData,st=Q.Connection,ae=Q.ConnectionData,je=Q.CountInfo,Ze=Q.CreateComposition,Xe=Q.CreateConnection,vt=Q.CreateConnectionBetweenEntityLocal,Pt=Q.CreateConnectionBetweenTwoConcepts,It=Q.CreateConnectionBetweenTwoConceptsGeneral,yt=Q.CreateConnectionBetweenTwoConceptsLocal,Et=Q.CreateData,Qt=Q.CreateDefaultConcept,Yt=Q.CreateDefaultLConcept,Vt=Q.CreateSession,nn=Q.CreateSessionVisit,Xt=Q.CreateTheCompositionLocal,Kt=Q.CreateTheCompositionWithCache,Pe=Q.CreateTheConnection,_t=Q.CreateTheConnectionGeneral,et=Q.CreateTheConnectionLocal,ye=Q.DATAID,Ee=Q.DATAIDDATE,Ft=Q.DATAV2,on=Q.DelayFunctionExecution,ve=Q.DeleteConceptById,fe=Q.DeleteConceptLocal,Le=Q.DeleteConnectionById,xe=Q.DeleteConnectionByIdBulk,Ae=Q.DeleteConnectionByType,ze=Q.DeleteConnectionByTypeBulk,lt=Q.DeleteUser,He=Q.DependencyObserver,Oe=Q.Environments,Ve=Q.FilterSearch,mt=Q.FormatFromConnections,Ut=Q.FormatFromConnectionsAltered,At=Q.FreeschemaQuery,nt=Q.FreeschemaQueryApi,Ot=Q.GetAllConnectionsOfComposition,Gt=Q.GetAllConnectionsOfCompositionBulk,cn=Q.GetAllTheConnectionsByTypeAndOfTheConcept,qt=Q.GetComposition,dn=Q.GetCompositionBulk,In=Q.GetCompositionBulkWithDataId,On=Q.GetCompositionFromConnectionsWithDataId,Jt=Q.GetCompositionFromConnectionsWithDataIdFromConnections,Cn=Q.GetCompositionFromConnectionsWithDataIdInObject,to=Q.GetCompositionFromConnectionsWithDataIdIndex,jo=Q.GetCompositionFromConnectionsWithIndex,Ii=Q.GetCompositionFromConnectionsWithIndexFromConnections,ki=Q.GetCompositionFromMemoryWithConnections,ua=Q.GetCompositionList,ha=Q.GetCompositionListAll,pa=Q.GetCompositionListAllWithId,fa=Q.GetCompositionListListener,ya=Q.GetCompositionListLocal,ga=Q.GetCompositionListLocalWithId,va=Q.GetCompositionListWithId,ma=Q.GetCompositionListWithIdUpdated,Ca=Q.GetCompositionListener,_a=Q.GetCompositionLocal,wa=Q.GetCompositionLocalWithId,Ta=Q.GetCompositionWithAllIds,ba=Q.GetCompositionWithCache,Ia=Q.GetCompositionWithDataIdBulk,ka=Q.GetCompositionWithDataIdWithCache,Sa=Q.GetCompositionWithId,Aa=Q.GetCompositionWithIdAndDateFromMemory,La=Q.GetConceptBulk,Na=Q.GetConceptByCharacter,xa=Q.GetConceptByCharacterAndCategoryLocal,Ea=Q.GetConceptByCharacterAndType,Fa=Q.GetConnectionBetweenTwoConceptsLinker,Oa=Q.GetConnectionBulk,Da=Q.GetConnectionById,Ba=Q.GetConnectionDataPrefetch,Pa=Q.GetConnectionOfTheConcept,Ua=Q.GetConnectionTypeForCount,Ma=Q.GetFreeschemaImage,Ra=Q.GetFreeschemaImageUrl,Ga=Q.GetImageApi,Wa=Q.GetLink,ja=Q.GetLinkListListener,Va=Q.GetLinkListener,$a=Q.GetLinkRaw,Ha=Q.GetLinkerConnectionFromConcepts,qa=Q.GetLinkerConnectionToConcepts,za=Q.GetRelation,Ja=Q.GetRelationLocal,Za=Q.GetRelationRaw,Qa=Q.GetTheConcept,Ya=Q.GetTheConceptLocal,Ka=Q.GetUserGhostId,Xa=Q.JUSTDATA,ec=Q.LConcept,tc=Q.LConnection,nc=Q.LISTNORMAL,oc=Q.LocalConceptsData,ic=Q.LocalSyncData,rc=Q.LocalTransaction,sc=Q.LogEvent,ac=Q.Logger,cc=Q.LoginToBackend,lc=Q.MakeTheInstanceConcept,dc=Q.MakeTheInstanceConceptLocal,uc=Q.MakeTheTimestamp,hc=Q.MakeTheTypeConceptApi,pc=Q.MakeTheTypeConceptLocal,fc=Q.NORMAL,yc=Q.PRIVATE,gc=Q.PUBLIC,vc=Q.PatcherStructure,mc=Q.Prototype,Cc=Q.RAW,_c=Q.RecursiveSearchApi,wc=Q.RecursiveSearchApiNewRawFullLinker,Tc=Q.RecursiveSearchApiRaw,bc=Q.RecursiveSearchApiRawFullLinker,Ic=Q.RecursiveSearchApiWithInternalConnections,kc=Q.RecursiveSearchListener,Sc=Q.SchemaQuery,Ac=Q.SchemaQueryListener,Lc=Q.SearchAllConcepts,Nc=Q.SearchLinkInternal,xc=Q.SearchLinkInternalAll,Ec=Q.SearchLinkMultipleAll,Fc=Q.SearchLinkMultipleAllObservable,Oc=Q.SearchLinkMultipleApi,Dc=Q.SearchQuery,Bc=Q.SearchStructure,Pc=Q.SearchWithLinker,Uc=Q.SearchWithTypeAndLinker,Mc=Q.SearchWithTypeAndLinkerApi,Rc=Q.Selector,Gc=Q.SessionData,Wc=Q.Signin,jc=Q.Signup,Vc=Q.SignupEntity,$c=Q.SplitStrings,Hc=Q.StatefulWidget,qc=Q.SyncData,zc=Q.TrashTheConcept,Jc=Q.UpdateComposition,Zc=Q.UpdateCompositionLocal,Qc=Q.UserBinaryTree,Yc=Q.Validator,Kc=Q.ViewInternalData,Xc=Q.ViewInternalDataApi,el=Q.WidgetTree,tl=Q.convertFromConceptToLConcept,nl=Q.convertFromLConceptToConcept,ol=Q.convertWidgetTreeToWidget,il=Q.convertWidgetTreeToWidgetWithWrapper,rl=Q.createFormFieldData,sl=Q.createPrototypeLocal,al=Q.dispatchIdEvent,cl=Q.getFromDatabaseWithType,ll=Q.getObjectsFromIndexDb,dl=Q.getUploadFileLimit,ul=Q.getUserDetails,hl=Q.getWidgetBulkFromId,pl=Q.getWidgetFromId,fl=Q.handleServiceWorkerException,yl=Q.hasActivatedSW,gl=Q.importLatestWidget,vl=Q.importRecentWidget,ml=Q.init,Cl=Q.orderTheConnections,_l=Q.recursiveFetch,wl=Q.recursiveFetchNew,Tl=Q.removeAllChildren,bl=Q.renderImportedWidget,Il=Q.renderLatestWidget,kl=Q.renderPage,Sl=Q.renderWidget,Al=Q.searchLinkMultipleListener,Ll=Q.sendEmail,Nl=Q.sendMessage,xl=Q.serviceWorker,El=Q.setHasActivatedSW,Fl=Q.storeToDatabase,Ol=Q.subscribedListeners,Dl=Q.unwrapContainers,Bl=Q.updateAccessToken,Pl=Q.uploadAttachment,Ul=Q.uploadFile,Ml=Q.uploadImage,Rl=Q.uploadImageV2,Gl=Q.validDocumentFormats,Wl=Q.validImageFormats},793:(xt,X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.setConfiguration=X.config=X.myprefix=void 0,X.myprefix="Boomconsole_FMS_2024_",X.config={userToken:"",userId:0,userConcept:0,apiUrl:"",aiUrl:"",nodeUrl:"",icons:{}},X.setConfiguration=function Ct(Rt){X.config=Object.assign({},Rt)}}},Ge={};function Wt(xt){var X=Ge[xt];if(void 0!==X)return X.exports;var Ct=Ge[xt]={exports:{}};return Zt[xt].call(Ct.exports,Ct,Ct.exports,Wt),Ct.exports}return Wt.d=(xt,X)=>{for(var Ct in X)Wt.o(X,Ct)&&!Wt.o(xt,Ct)&&Object.defineProperty(xt,Ct,{enumerable:!0,get:X[Ct]})},Wt.o=(xt,X)=>Object.prototype.hasOwnProperty.call(xt,X),Wt.r=xt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(xt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(xt,"__esModule",{value:!0})},Wt(156)})()},7156:Jn=>{function Wn(at,Zt,Ge,Wt,rt,xt,X){try{var Ct=at[xt](X),Rt=Ct.value}catch($){return void Ge($)}Ct.done?Zt(Rt):Promise.resolve(Rt).then(Wt,rt)}Jn.exports=function St(at){return function(){var Zt=this,Ge=arguments;return new Promise(function(Wt,rt){var xt=at.apply(Zt,Ge);function X(Rt){Wn(xt,Wt,rt,X,Ct,"next",Rt)}function Ct(Rt){Wn(xt,Wt,rt,X,Ct,"throw",Rt)}X(void 0)})}},Jn.exports.__esModule=!0,Jn.exports.default=Jn.exports}}]);