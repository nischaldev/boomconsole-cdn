"use strict";(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[1298],{5495:(me,U,$)=>{$.d(U,{_:()=>t});var Q=$(5861),B=$(6296),n=$(9402),a=$(9646),F=$(4650),O=$(384),p=$(8154),f=$(2126);let t=(()=>{const y=class{constructor(o,s,i){this._authService=o,this._items=s,this.__crmhelperService=i,this.allContact=[],this.filteredContacts=[];const _=this._authService.loadFromLocalStorage();_&&(this.userConcept=_.userConcept,this.userId=_.theUserId)}createEntityDetailQuery(o,s){const i=new n.Jbg;return o?"sharedwithme"==s?(i.composition=o,i.fullLinkers=["the_entity_type","the_entity_name","the_entity_department_name","the_entity_company_name"]):(i.composition=o,i.fullLinkers=["the_entity_title","the_entity_type","the_entity_gender","the_entity_name","the_entity_first_name","the_entity_firstname","the_entity_middle_name","the_entity_last_name","the_entity_lastname","the_entity_display_name","the_entity_tag","the_entity_avatar","the_entity_emerg_contact_address","the_entity_emerg_contact_number","the_entity_emerg_contact_name","the_entity_relationship","the_entity_student_status","the_entity_stident_id","the_entity_date_of_birth","the_entity_office_address","the_entity_job_title","the_entity_employee_id","the_entity_employee_type","the_entity_supervisor","the_entity_office_email","the_entity_office_number","the_entity_patient_id","the_entity_student_id","the_entity_policy_number","the_entity_doctor_name","the_entity_insurance_provider","the_entity_company_type","the_entity_industry_type","the_entity_company_size","the_entity_website","the_entity_created_at","the_entity_revenue","the_entity_ceo","the_entity_about","the_entity_education","the_entity_experience","the_entity_company_name","the_entity_founded","the_entity_department_name","the_entity_department_type","the_entity_email","the_entity_s_email","the_entity_s_phone","the_entity_s_address","the_entity_s_link","the_entity_s_contact_person","the_entity_source_url"]):i.fullLinkers=["the_entity_title","the_entity_type","the_entity_name","the_entity_tag","the_entity_avatar","the_entity_relationship","the_entity_company_size","the_entity_website","the_entity_created_at","the_entity_revenue","the_entity_about","the_entity_company_name","the_entity_founded","the_entity_department_name","the_entity_s_email","the_entity_s_phone","the_entity_s_address","the_entity_s_link","the_entity_source_url"],i.page=1,i.inpage=2e3,i}createContactDetailQuery(o){const s=new n.Jbg;return s.fullLinkers=o?["the_email_type","the_email_email","the_link_type","the_link_sociallinks","the_phone_type","the_phone_countrycode","the_phone_phone","the_address_type","the_address_street","the_address_country","the_address_address","the_address_postalcode","the_address_city","the_address_state","the_contact_person_title","the_contact_person_designation","the_contact_person_name","the_contact_person_s_email","the_contact_person_s_address","the_contact_person_s_phone","the_contact_person_s_link"]:["the_email_type","the_email_email","the_link_type","the_link_sociallinks","the_phone_type","the_phone_countrycode","the_phone_phone","the_address_type","the_address_street","the_address_country","the_address_postalcode","the_address_city","the_address_state","the_address_address"],s.page=1,s.inpage=2e3,s}createContactPersonDetailQuery(){const o=new n.Jbg;return o.fullLinkers=["the_email_type","the_email_email","the_link_type","the_link_sociallinks","the_phone_type","the_phone_countrycode","the_phone_phone","the_address_type","the_address_street","the_address_country","the_address_postalcode","the_address_city","the_address_state"],o.page=1,o.inpage=2e3,o}formatNewEntityContacts(o,s){if(console.log("data",o),!o)return[];const i=o?.data?.the_entity?.the_entity_s_crm_contact_s||o||[];return Array.isArray(i)?i?.map(_=>{const e=_?.data?.the_entity||_?.the_entity,h=e?.the_entity_data_type?.[0]?.data?.the_data_type,d=e?.the_entity_note?.[0]?.data?.the_note,l=e?.the_entity_s_contact_person?.map(c=>({profileInformation:Object.fromEntries(Object.entries({name:{value:c?.data?.the_contact_person.the_contact_person_name?.[0]?.data?.the_name,id:c?.data?.the_contact_person?.the_contact_person_name?.[0]?.id,linker:"the_contact_person_name"},title:{value:c?.data?.the_contact_person.the_contact_person_title?.[0]?.data?.the_title,id:c?.data?.the_contact_person?.the_contact_person_title?.[0]?.id,linker:"the_contact_person_title"},designation:{value:c?.data?.the_contact_person.the_contact_person_designation?.[0]?.data?.the_designation,id:c?.data?.the_contact_person?.the_contact_person_designation?.[0]?.id,linker:"the_contact_person_designation"}}).filter(([v,S])=>null!=S)),contactInformation:Object.fromEntries(Object.entries({emails:c?.data?.the_contact_person.the_contact_person_s_email?.map(v=>({type:{value:v.data.the_email.the_email_type?.[0]?.data?.the_type,id:v.data.the_email.the_email_type?.[0]?.id,linker:"the_email_type"},address:{value:v.data.the_email.the_email_email?.[0]?.data?.the_email,id:v.data.the_email.the_email_email?.[0]?.id,linker:"the_email_email"}})),phoneNumbers:c?.data?.the_contact_person.the_contact_person_s_phone?.map(v=>({type:{value:v.data.the_phone.the_phone_type?.[0]?.data?.the_type,id:v.data.the_phone.the_phone_type?.[0]?.id,linker:"the_phone_type"},countryCode:{value:v.data.the_phone.the_phone_countrycode?.[0]?.data?.the_countryCode,id:v.data.the_phone.the_phone_countrycode?.[0]?.id,linker:"the_phone_countrycode"},number:{value:v.data.the_phone.the_phone_phone?.[0]?.data?.the_phone,id:v.data.the_phone.the_phone_phone?.[0]?.id,linker:"the_phone_phone"}})),addresses:c?.data?.the_contact_person.the_contact_person_s_address?.map(v=>({type:{value:v.data.the_address.the_address_type?.[0]?.data?.the_type,id:v.data.the_address.the_address_type?.[0]?.id,linker:"the_address_type"},street:{value:v.data.the_address.the_address_street?.[0]?.data?.the_street,id:v.data.the_address.the_address_street?.[0]?.id,linker:"the_address_street"},city:{value:v.data.the_address.the_address_city?.[0]?.data?.the_city,id:v.data.the_address.the_address_city?.[0]?.id,linker:"the_address_city"},state:{value:v.data.the_address.the_address_state?.[0]?.data?.the_state,id:v.data.the_address.the_address_state?.[0]?.id,linker:"the_address_state"},postalCode:{value:Number(v.data.the_address.the_address_postalcode?.[0]?.data?.the_postalCode),id:v.data.the_address.the_address_postalcode?.[0]?.id,linker:"the_address_postalcode"},country:{value:v.data.the_address.the_address_country?.[0]?.data?.the_country,id:v.data.the_address.the_address_country?.[0]?.id,linker:"the_address_country"}}))}).filter(([v,S])=>null!=S)),otherInformation:Object.fromEntries(Object.entries({links:c?.data?.the_contact_person.the_contact_person_s_link?.map(v=>({type:{value:v.data.the_link.the_link_type?.[0]?.data?.the_type,id:v.data.the_link.the_link_type?.[0]?.id,linker:"the_link_type"},url:{value:v.data.the_link.the_link_sociallinks?.[0]?.data?.the_socialLinks,id:v.data.the_link.the_link_sociallinks?.[0]?.id,linker:"the_link_sociallinks"}}))}).filter(([v,S])=>null!=S))})),u=Object.fromEntries(Object.entries({name:{value:e?.the_entity_company_name?.[0]?.data?.the_company_name||e?.the_entity_department_name?.[0]?.data?.the_department_name||e?.the_entity_name?.[0]?.data?.the_name||(e?.the_entity_firstname?.[0]?.data?.the_firstname||e?.the_entity_first_name?.[0]?.data?.the_first_name)&&`${e?.the_entity_firstname?.[0]?.data?.the_firstname||e?.the_entity_first_name?.[0]?.data?.the_first_name}`+(e?.the_entity_lastname?.[0]?.data?.the_lastname||e?.the_entity_last_name?.[0]?.data?.the_last_name?` ${e?.the_entity_lastname?.[0]?.data?.the_lastname||e?.the_entity_last_name?.[0]?.data?.the_last_name}`:""),id:e?.the_entity_name?.[0]?.id||e?.the_entity_department_name?.[0]?.id||e?.the_entity_company_name?.[0]?.id,linker:e?.the_entity_name?.[0]?.data?.the_name?"the_entity_name":e?.the_entity_department_name?.[0]?.data?.the_department_name?"the_entity_department_name":"the_entity_company_name"},displayName:{value:e?.the_entity_display_name?.[0]?.data?.the_display_name,id:e?.the_entity_display_name?.[0]?.id,linker:"the_entity_display_name"},title:{value:e?.the_entity_title?.[0]?.data?.the_title,id:e?.the_entity_title?.[0]?.id,linker:"the_entity_title"},gender:{value:e?.the_entity_gender?.[0]?.data?.the_gender,id:e?.the_entity_gender?.[0]?.id,linker:"the_entity_gender"},avatar:{value:e?.the_entity_avatar?.[0]?.data?.the_avatar,id:e?.the_entity_avatar?.[0]?.id,linker:"the_entity_avatar"},dateOfBirth:{value:e?.the_entity_date_of_birth?.[0]?.data?.the_date_of_birth,id:e?.the_entity_date_of_birth?.[0]?.id,linker:"the_entity_date_of_birth"},website:{value:e?.the_entity_website?.[0]?.data?.the_website,id:e?.the_entity_website?.[0]?.id,linker:"the_entity_website"},industryType:{value:e?.the_entity_industry_type?.[0]?.data?.the_industry_type,id:e?.the_entity_industry_type?.[0]?.id,linker:"the_entity_industry_type"},employeeType:{value:e?.the_entity_employee_type?.[0]?.data?.the_employee_type,id:e?.the_entity_employee_type?.[0]?.id,linker:"the_entity_employee_type"},jobTitle:{value:e?.the_entity_job_title?.[0]?.data?.the_job_title,id:e?.the_entity_job_title?.[0]?.id,linker:"the_entity_job_title"},studentId:{value:e?.the_entity_student_id?.[0]?.data?.the_student_id,id:e?.the_entity_student_id?.[0]?.id,linker:"the_entity_student_id"},employeeId:{value:e?.the_entity_employee_id?.[0]?.data?.the_employee_id,id:e?.the_entity_employee_id?.[0]?.id,linker:"the_entity_employee_id"},studentStatus:{value:e?.the_entity_student_status?.[0]?.data?.the_student_status,id:e?.the_entity_student_status?.[0]?.id,linker:"the_entity_student_status"},departmentType:{value:e?.the_entity_department_type?.[0]?.data?.the_department_type,id:e?.the_entity_department_type?.[0]?.id,linker:"the_entity_department_type"},tag:{value:e?.the_entity_tag?.[0]?.data?.the_tag,id:e?.the_entity_tag?.[0]?.id,linker:"the_entity_tag"},education:{value:e?.the_entity_education?.[0]?.data?.the_education,id:e?.the_entity_education?.[0]?.id,linker:"the_entity_education"},experience:{value:e?.the_entity_experience?.[0]?.data?.the_experience,id:e?.the_entity_experience?.[0]?.id,linker:"the_entity_experience"},about:{value:e?.the_entity_about?.[0]?.data?.the_about,id:e?.the_entity_about?.[0]?.id,linker:"the_entity_about"}}).filter(([c,g])=>null!=g?.value)),C=Object.fromEntries(Object.entries({emails:(e?.the_entity_s_email||e?.the_entity_email)?.map(c=>({type:{value:c?.data?.the_email?.the_email_type?.[0]?.data?.the_type,id:c?.data?.the_email?.the_email_type?.[0]?.id,linker:"the_email_type"},address:{value:c?.data?.the_email?.the_email_email?.[0]?.data?.the_email||c?.data?.the_email,id:c?.data?.the_email?.the_email_email?.[0]?.id||c?.id,linker:"the_email_email"}})),phoneNumbers:e?.the_entity_s_phone?.map(c=>({type:{value:c?.data?.the_phone?.the_phone_type?.[0]?.data?.the_type,id:c?.data?.the_phone?.the_phone_type?.[0]?.id,linker:"the_phone_type"},countryCode:{value:c?.data?.the_phone?.the_phone_countrycode?.[0]?.data?.the_countryCode,id:c?.data?.the_phone?.the_phone_countrycode?.[0]?.id,linker:"the_phone_countrycode"},number:{value:c?.data?.the_phone?.the_phone_phone?.[0]?.data?.the_phone,id:c?.data?.the_phone?.the_phone_phone?.[0]?.id,linker:"the_phone_phone"}})),addresses:e?.the_entity_s_address?.map(c=>({type:{value:c?.data?.the_address?.the_address_type?.[0]?.data?.the_type,id:c?.data?.the_address?.the_address_type?.[0]?.id,linker:"the_address_type"},street:{value:c?.data?.the_address?.the_address_street?.[0]?.data?.the_street,id:c?.data?.the_address?.the_address_street?.[0]?.id,linker:"the_address_street"},city:{value:c?.data?.the_address?.the_address_city?.[0]?.data?.the_city,id:c?.data?.the_address?.the_address_city?.[0]?.id,linker:"the_address_city"},state:{value:c?.data?.the_address?.the_address_state?.[0]?.data?.the_state,id:c?.data?.the_address?.the_address_state?.[0]?.id,linker:"the_address_state"},postalCode:{value:Number(c?.data?.the_address?.the_address_postalcode?.[0]?.data?.the_postalCode),id:c?.data?.the_address?.the_address_postalcode?.[0]?.id,linker:"the_address_postalcode"},country:{value:c?.data?.the_address?.the_address_country?.[0]?.data?.the_country,id:c?.data?.the_address?.the_address_country?.[0]?.id,linker:"the_address_country"},address:{value:c?.data?.the_address?.the_address_address?.[0]?.data?.the_address,id:c?.data?.the_address?.the_address_address?.[0]?.id,linker:"the_address_address"}}))}).filter(([c,g])=>null!=g)),k=Object.fromEntries(Object.entries({links:e?.the_entity_s_link?.map(c=>({type:{value:c.data.the_link.the_link_type?.[0]?.data?.the_type,id:c.data.the_link.the_link_type?.[0]?.id,linker:"the_link_type"},url:{value:c.data.the_link.the_link_sociallinks?.[0]?.data?.the_socialLinks||c.data.the_link.the_link_sociallinks?.[0]?.data?.the_sociallinks,id:c.data.the_link.the_link_sociallinks?.[0]?.id,linker:"the_link_sociallinks"}})),rating:{value:e?.the_entity_rating?.[0]?.data?.the_rating,id:e?.the_entity_rating?.[0]?.id,linker:"the_entity_rating"},latitude:{value:e?.the_entity_latitude?.[0]?.data?.the_latitude,id:e?.the_entity_latitude?.[0]?.id,linker:"the_entity_latitude"},longitude:{value:e?.the_entity_longitude?.[0]?.data?.the_longitude,id:e?.the_entity_longitude?.[0]?.id,linker:"the_entity_longitude"},googleLocation:{value:e?.the_entity_googleLocation?.[0]?.data?.the_googleLocation,id:e?.the_entity_googleLocation?.[0]?.id,linker:"the_entity_googleLocation"},source_url:{value:e?.the_entity_source_url?.[0]?.data?.the_source_url,id:e?.the_entity_source_url?.[0]?.id,linker:"the_entity_source_url"},note:{value:e?.the_entity_note?.[0]?.data?.the_note,id:e?.the_entity_note?.[0]?.id,linker:"the_entity_note"},workWellbeing:{value:e?.the_entity_workWellbeing?.[0]?.data?.the_workWellbeing,id:e?.the_entity_workWellbeing?.[0]?.id,linker:"the_entity_workWellbeing"},ceo:{value:e?.the_entity_ceo?.[0]?.data?.the_ceo,id:e?.the_entity_ceo?.[0]?.id,linker:"the_entity_ceo"},companySize:{value:e?.the_entity_companySize?.[0]?.data?.the_companySize,id:e?.the_entity_companySize?.[0]?.id,linker:"the_entity_companySize"},founded:{value:e?.the_entity_founded?.[0]?.data?.the_founded,id:e?.the_entity_founded?.[0]?.id,linker:"the_entity_founded"},revenue:{value:e?.the_entity_revenue?.[0]?.data?.the_revenue,id:e?.the_entity_revenue?.[0]?.id,linker:"the_entity_revenue"},industryType:{value:e?.the_entity_industryType?.[0]?.data?.the_industryType,id:e?.the_entity_industryType?.[0]?.id,linker:"the_entity_industryType"}}).filter(([c,g])=>null!=g));let b;b=e?.the_entity_type?.[0]?.data?.the_type;const m=e?.the_entity_created_at?.[0]?.data?.the_created_at,E=function I(c){const g=new Date(c);if(isNaN(g.getTime()))return;const T=g.getFullYear(),D=String(g.getMonth()+1).padStart(2,"0"),v=String(g.getDate()).padStart(2,"0");let S=g.getHours();const P=S>=12?"PM":"AM";return S=S%12||12,`${D}/${v}/${T} ${S}:${String(g.getMinutes()).padStart(2,"0")}:${String(g.getSeconds()).padStart(2,"0")} ${P}`}(m);"maps"===b?b="extension_maps":"extension_merojob"==h&&(b="extension_merojob");const L={};switch("preview"==s&&(L.title=u.title?.value||u.name?.value,L.data_type=b,L.note=k?.note?.value,L.name=u.name?.value),b){case"patient":return{type:b,description:d,profileInformation:u,contactInformation:C,medicalInformation:Object.fromEntries(Object.entries({patientId:{value:e?.the_entity_patient_id?.[0]?.data?.the_patient_id,id:e?.the_entity_patient_id?.[0]?.id,linker:"the_entity_patient_id"},insuranceProvider:{value:e?.the_entity_insurance_provider?.[0]?.data?.the_insurance_provider,linker:"the_entity_insurance_provider"},policyNumber:{value:e?.the_entity_policy_number?.[0]?.data?.the_policy_number,id:e?.the_entity_policy_number?.[0]?.id,linker:"the_entity_policy_number"},doctorName:{value:e?.the_entity_doctor_name?.[0]?.data?.the_doctor_name,id:e?.the_entity_doctor_name?.[0]?.id,linker:"the_entity_doctor_name"},emergContactName:{value:e?.the_entity_emerg_contact_name?.[0]?.data?.the_emerg_contact_name,id:e?.the_entity_emerg_contact_name?.[0]?.id,linker:"the_entity_emerg_contact_name"},emergContactNumber:{value:e?.the_entity_emerg_contact_number?.[0]?.data?.the_emerg_contact_number,id:e?.the_entity_emerg_contact_number?.[0]?.id,linker:"the_entity_emerg_contact_number"}}).filter(([c,g])=>g)),otherInformation:k,created_at:E||_?.created_at,...L,id:_.id,isBoomgpt:!1};case"company":return{type:b,isBoomgpt:!1,profileInformation:u,contactInformation:C,contactPerson:l,otherInformation:Object.fromEntries(Object.entries({ceo:{value:e?.the_entity_ceo?.[0]?.data?.the_ceo,id:e?.the_entity_ceo?.[0]?.id,linker:"the_entity_ceo"},companyType:{value:e?.the_entity_company_type?.[0]?.data?.the_company_type,id:e?.the_entity_company_type?.[0]?.id,linker:"the_entity_company_type"},companySize:{value:e?.the_entity_company_size?.[0]?.data?.the_company_size,id:e?.the_entity_company_size?.[0]?.id,linker:"the_entity_company_size"},founded:{value:e?.the_entity_founded?.[0]?.data?.the_founded,id:e?.the_entity_founded?.[0]?.id,linker:"the_entity_founded"},revenue:{value:e?.the_entity_revenue?.[0]?.data?.the_revenue,id:e?.the_entity_revenue?.[0]?.id,linker:"the_entity_revenue"},about:{value:e?.the_entity_about?.[0]?.data?.the_about,id:e?.the_entity_about?.[0]?.id,linker:"the_entity_about"},links:k.links}).filter(([c,g])=>g)),created_at:E||_?.created_at,...L,id:_.id};case"employee":return{type:b,profileInformation:u,isBoomgpt:!1,contactInformation:C,...L,officeInformation:Object.fromEntries(Object.entries({supervisorName:{value:e?.the_entity_supervisor?.[0]?.data?.the_supervisor,id:e?.the_entity_supervisor?.[0]?.id,linker:"the_entity_supervisor"},email:{value:e?.the_entity_office_email?.[0]?.data?.the_office_email,id:e?.the_entity_office_email?.[0]?.id,linker:"the_entity_office_email"},phoneNumber:{value:e?.the_entity_office_number?.[0]?.data?.the_office_number,id:e?.the_entity_office_number?.[0]?.id,linker:"the_entity_office_number"},address:{value:e?.the_entity_office_address?.[0]?.data?.the_office_address,id:e?.the_entity_office_address?.[0]?.id,linker:"the_entity_office_address"}}).filter(([c,g])=>g)),otherInformation:k,created_at:E||_?.created_at,id:_.id};case"student":return{type:b,profileInformation:u,contactInformation:C,isBoomgpt:!1,...L,emergencyContact:Object.fromEntries(Object.entries({name:{value:e?.the_entity_emerg_contact_name?.[0]?.data?.the_emerg_contact_name,id:e?.the_entity_emerg_contact_name?.[0]?.id,linker:"the_entity_emerg_contact_name"},relation:{value:e?.the_entity_relationship?.[0]?.data?.the_relationship,id:e?.the_entity_relationship?.[0]?.id,linker:"the_entity_relationship"},number:{value:e?.the_entity_emerg_contact_number?.[0]?.data?.the_emerg_contact_number,id:e?.the_entity_emerg_contact_number?.[0]?.id,linker:"the_entity_emerg_contact_number"},address:{value:e?.the_entity_emerg_contact_address?.[0]?.data?.the_emerg_contact_address,id:e?.the_entity_emerg_contact_address?.[0]?.id,linker:"the_entity_emerg_contact_address"}}).filter(([c,g])=>g)),otherInformation:k,created_at:E||_?.created_at,id:_.id};case"government":return{type:b,profileInformation:u,contactInformation:C,otherInformation:k,...L,contactPerson:l,created_at:E||_?.created_at,id:_.id,isBoomgpt:!1};default:return{type:b,profileInformation:u,contactInformation:C,otherInformation:k,isBoomgpt:!1,...L,created_at:E||_?.created_at,id:_.id}}}):[]}formatOldEntityContacts(o,s){return o?o?.map(i=>{const _=i?.data?.boomgpt||i,e=_?.crm_data,h=[e?.email],d=Array.isArray(e?.phone)?e.phone.filter(m=>"object"==typeof m&&null!==m?Object.keys(m).some(I=>I&&null!=m[I]&&"undefined"!==m[I]):null!=m&&"undefined"!==m&&""!==m)?.map(m=>({number:{value:"object"==typeof m&&null!==m?Object.values(m).find(E=>null!=E&&"undefined"!==E):m}})):e?.phone&&"string"==typeof e.phone?[{number:{value:e.phone}}]:[],l=Array.isArray(e?.addresses)?e.addresses?.map(m=>({address:{value:m?.location}})).filter(({address:m})=>null!=m?.value&&"undefined"!==m.value&&""!==m.value):e?.addresses?[{address:{value:e.addresses}}]:[],u=Object.fromEntries(Object.entries({name:{value:e?.name||e?.companyInformation?.name},tag:{value:e?.tag},website:{value:e?.website||e?.companyWebsite||e?.companyInformation?.website},avatar:{value:e?.avatar},about:{value:e?.about},education:{value:e?.education},experience:{value:e?.experience}}).filter(([m,I])=>null!=I?.value&&"undefined"!==I?.value&&""!==I?.value)),w=Object.fromEntries(Object.entries({emails:h?.map(m=>({address:{value:m}})).filter(({address:m})=>null!=m?.value&&"undefined"!==m.value&&""!==m.value),phoneNumbers:d,addresses:l}).filter(([m,I])=>Array.isArray(I)?I?.length>0:null!=I)),C=Object.fromEntries(Object.entries({rating:{value:e?.ratingAndReviews},latitude:{value:e?.latitude},longitude:{value:e?.longitude},googleLocation:{value:e?.googleLocation},source_url:{value:_?.source_url},note:{value:_?.note},workWellbeing:{value:e?.workWellbeing},ceo:{value:e?.ceo},companySize:{value:e?.companySize},founded:{value:e?.founded},revenue:{value:e?.companyRevenue},industryType:{value:e?.sector}}).filter(([m,I])=>null!=I?.value&&void 0!==I?.value&&"undefined"!==I?.value));let k;k=e?.dataType||_?.data_type,"maps"===k&&(k="extension_maps");const b={};return"preview"==s&&(b.title=u.title?.value||u.name?.value,b.name=u.name?.value,b.data_type=k,b.note=C?.note?.value),{type:k,profileInformation:u,contactInformation:w,otherInformation:C,isBoomgpt:!0,...b,created_at:i?.created_at,id:i.id}}):[]}deleteEntityLinks(o,s){var i=this;return(0,Q.Z)(function*(){const _=i._authService.loadFromLocalStorage();i.entityId=_.entityId;const e=yield(0,n.Mu8)(i.entityId),h=yield(0,n.Mu8)(o),d=yield(0,n.kqu)(e,h,"","the_entity_s_crm_contact_s"),l=yield(0,n.kqu)(s,h,"","the_boom_folder_s_contain",!0);var C,u=!1,w=!1;try{for(var b,k=(0,B.Z)(d);u=!(b=yield k.next()).done;u=!1){const g=b.value;yield(0,n.TAP)(g?.id)}}catch(g){w=!0,C=g}finally{try{u&&null!=k.return&&(yield k.return())}finally{if(w)throw C}}var E,m=!1,I=!1;try{for(var c,L=(0,B.Z)(l);m=!(c=yield L.next()).done;m=!1){const g=c.value;yield(0,n.TAP)(g?.id)}}catch(g){I=!0,E=g}finally{try{m&&null!=L.return&&(yield L.return())}finally{if(I)throw E}}})()}getSingleEntityDetails(o,s){var i=this;return(0,Q.Z)(function*(){try{let _;_="sharedwithme"==s?[i.createEntityDetailQuery(o,s)]:[i.createEntityDetailQuery(o),i.createContactDetailQuery(o),i.createContactPersonDetailQuery()];const e=yield(0,n.eHe)(_);return i.formatNewEntityContacts([e])}catch(_){return console.error("Error fetching new entity contacts:",_),[]}})()}searchAllContacts(o){var s=this;return(0,Q.Z)(function*(){const i=s._authService.loadFromLocalStorage();s.entityId=i.entityId;try{const _=new n.Kbf;_.type="the_name",_.search=o,_.logicoperator="like",_.name="linkedinselffilter",_.operateon="linkedinself";const e=new n.LtL;e.typeConnection="self",e.name="linkedinself2";const h=new n.Kbf;h.type="the_email",h.search=o,h.logicoperator="like",h.name="linkedinselffilter2",h.operateon="linkedinself2";const d=new n.LtL;d.typeConnection="self",d.name="linkedinself";const l=new n.LtL;l.typeConnection="the_entity_s_linkedin_contact_s",l.isOldConnectionType=!0,l.name="linkedinname",l.includeInFilter=!0,l.freeschemaQueries=[d,e];const u=new n.Kbf;u.type="the_email",u.search=o,u.logicoperator="like",u.name="mapselffilter2",u.operateon="mapself2";const w=new n.LtL;w.typeConnection="self",w.name="mapself2";const C=new n.Kbf;C.type="the_name",C.search=o,C.logicoperator="like",C.name="mapselffilter",C.operateon="mapself";const k=new n.LtL;k.typeConnection="self",k.name="mapself";const b=new n.LtL;b.typeConnection="the_entity_s_maps_contact_s",b.isOldConnectionType=!0,b.name="mapname",b.includeInFilter=!0,b.freeschemaQueries=[k,w];const m=new n.Kbf;m.type="the_name",m.search=o,m.logicoperator="like",m.name="indeedselffilter",m.operateon="indeedself";const I=new n.LtL;I.typeConnection="self",I.name="indeedself";const E=new n.Kbf;E.type="the_email",E.search=o,E.logicoperator="like",E.name="indeedselffilter2",E.operateon="indeedself2";const L=new n.LtL;L.typeConnection="self",L.name="indeedself2";const c=new n.LtL;c.typeConnection="the_entity_s_indeed_contact_s",c.isOldConnectionType=!0,c.name="indeedname",c.includeInFilter=!0,c.freeschemaQueries=[I,L];const g=new n.Kbf;g.type="the_name",g.search=o,g.logicoperator="like",g.name="monsterselffilter",g.operateon="monsterself";const T=new n.LtL;T.typeConnection="self",T.name="monsterself";const D=new n.Kbf;D.type="the_email",D.search=o,D.logicoperator="like",D.name="monsterselffilter2",D.operateon="monsterself2";const v=new n.LtL;v.typeConnection="self",v.name="monsterself2";const S=new n.LtL;S.typeConnection="the_entity_s_monster_contact_s",S.isOldConnectionType=!0,S.name="monstername",S.includeInFilter=!0,S.freeschemaQueries=[T,v];const K=new n.Kbf;K.type="the_name",K.search=o,K.logicoperator="like",K.name="whatsappselffilter",K.operateon="whatsappself";const M=new n.LtL;M.typeConnection="self",M.name="whatsappself";const P=new n.Kbf;P.type="the_email",P.search=o,P.logicoperator="like",P.name="whatsappselffilter2",P.operateon="whatsappself2";const se=new n.LtL;se.typeConnection="self",se.name="whatsappself2";const W=new n.LtL;W.typeConnection="the_entity_s_whatsapp_contact_s",W.isOldConnectionType=!0,W.name="whatsappname",W.includeInFilter=!0,W.freeschemaQueries=[M,se];const x=new n.Kbf;x.type="the_name",x.search=o,x.logicoperator="like",x.name="crmselffilter",x.operateon="crmself";const oe=new n.LtL;oe.typeConnection="self",oe.name="whatsappself";const q=new n.LtL;q.typeConnection="the_entity_s_crm_contact_s",q.isOldConnectionType=!0,q.name="crmname",q.includeInFilter=!0,q.freeschemaQueries=[oe];const R=new n.LtL;R.typeConnection="the_user_s_contact_s",R.inpage=10,R.page=1,R.limit=!0,R.isOldConnectionType=!0,R.name="contactname",R.selectors=["the_entity_name"],R.freeschemaQueries=[l,b,c,S,W,q];const de=new n.LtL;de.typeConnection="the_entity_name",de.name="itemname";const Z=new n.Kbf;Z.type="the_name",Z.search=o,Z.logicoperator="like",Z.name="namefilters",Z.operateon="itemname";const le=new n.LtL;le.typeConnection="the_entity_company_name",le.name="itemcompanyname";const G=new n.Kbf;G.type="the_company_name",G.search=o,G.logicoperator="like",G.name="companyNameFilters",G.operateon="itemcompanyname";const te=new n.LtL;te.typeConnection="the_entity_department_name",te.name="itemdepartmentname";const A=new n.Kbf;A.type="the_department_name",A.search=o,A.logicoperator="like",A.name="departmentNameFilters",A.operateon="itemdepartmentname";const Y=new n.LtL;Y.typeConnection="the_entity_first_name",Y.name="itemfirstname";const N=new n.Kbf;N.type="the_first_name",N.search=o,N.logicoperator="like",N.name="firstnameFilters",N.operateon="itemfirstname";const H=new n.LtL;H.typeConnection="the_entity_firstname",H.name="itemfirstname2";const V=new n.Kbf;V.type="the_firstname",V.search=o,V.logicoperator="like",V.name="firstnameFilters2",V.operateon="itemfirstname2";const X=new n.LtL;X.typeConnection="the_entity_lastname",X.name="itemlastname2";const z=new n.Kbf;z.type="the_lastname",z.search=o,z.logicoperator="like",z.name="lastnameFilters2",z.operateon="itemlastname2";const ne=new n.LtL;ne.typeConnection="the_entity_email",ne.name="email2";const ae=new n.Kbf;ae.type="the_email",ae.search=o,ae.logicoperator="like",ae.name="emailFilters2",ae.operateon="email2";const fe=new n.LtL;fe.typeConnection="the_entity_last_name",fe.name="itemlastname";const ie=new n.Kbf;ie.type="the_department_name",ie.search=o,ie.logicoperator="like",ie.name="lastnameFilters",ie.operateon="itemlastname";const ge=new n.LtL;ge.typeConnection="the_email_email",ge.name="itememail";const re=new n.Kbf;re.type="the_email",re.search=o,re.logicoperator="like",re.name="emailsFilter",re.operateon="itememail";const ce=new n.LtL;ce.typeConnection="the_entity_s_email",ce.freeschemaQueries=[ge],ce.name="emailname",ce.selectors=["the_email_email"];const ve=new n.LtL;ve.typeConnection="the_address_country",ve.name="itemaddress";const pe=new n.Kbf;pe.type="the_street",pe.logicoperator="like",pe.name="addressFilter",pe.operateon="itemaddress";const he=new n.LtL;he.typeConnection="the_entity_s_address",he.freeschemaQueries=[ve],he.name="addressname",he.selectors=["the_address_address","the_address_type","the_address_postalcode","the_address_city","the_address_country"];const be=new n.LtL;be.typeConnection="the_phone_phone",be.name="itemphone";const ye=new n.Kbf;ye.type="the_phone",ye.logicoperator="like",ye.name="phoneFilter",ye.operateon="itemphone";const ue=new n.LtL;ue.typeConnection="the_entity_s_phone",ue.freeschemaQueries=[be],ue.name="phonename",ue.selectors=["the_phone_phone","the_phone_countryCode","the_phone_type"];const _e=new n.LtL;_e.typeConnection="the_entity_s_crm_contact_s",_e.freeschemaQueries=[de,le,te,Y,H,X,fe,ce,ne,he,ue],_e.selectors=["the_entity_title","the_entity_avatar","the_entity_website","the_entity_tag","the_entity_email","the_entity_type","the_entity_s_email","the_entity_s_address"],_e.includeInFilter=!0,_e.name="entitycontacts";const J=new n.LtL;J.conceptIds=[Number(s.userConcept),Number(s.entityId)],J.filterLogic="( namefilters OR lastnameFilters OR lastnameFilters2 OR emailFilters2 OR firstnameFilters OR firstnameFilters2 OR emailsFilter OR companyNameFilters OR departmentNameFilters OR linkedinselffilter OR linkedinselffilter2 OR mapselffilter OR mapselffilter2 OR indeedselffilter OR indeedselffilter2 OR monsterselffilter OR monsterselffilter2 OR whatsappselffilter OR whatsappselffilter2 OR crmselffilter )",J.filters=[Z,N,V,ie,z,re,ae,G,A,_,h,C,m,E,g,D,K,x,u,P],J.name="top",J.freeschemaQueries=[R,_e],J.outputFormat=n.Zec,J.inpage=100;const ke=yield(0,n.og0)(J,"").bind();console.warn("data:",ke);const Ce=ke?.filter(ee=>ee?.the_user?.the_user_s_contact_s)?.flatMap(ee=>ee.the_user.the_user_s_contact_s),we=ke?.filter(ee=>ee?.the_entity?.the_entity_s_crm_contact_s)?.flatMap(ee=>ee.the_entity.the_entity_s_crm_contact_s),Le=yield s.__crmhelperService.formatData(Ce),Oe=s.__crmhelperService.formatEntityContacts(we);return[...Le,...Oe]}catch(_){return console.error("Error in searchAllContacts:",_),(0,a.of)([])}})()}formatSearchedCOntacts(o){if(!o)return[];const s=o?.the_entity?.the_entity_s_crm_contact_s||[];return Array.isArray(s)?s?.map(i=>{const _=i?.data?.the_entity,e=Object.fromEntries(Object.entries({name:{value:_?.the_entity_company_name?.data?.the_company_name||_?.the_entity_department_name?.data?.the_department_name||_?.the_entity_name?.data?.the_name},avatar:{value:_?.the_entity_avatar?.data?.the_avatar},website:{value:_?.the_entity_website?.data?.the_website},tag:{value:_?.the_entity_tag?.data?.the_tag}}).filter(([l,u])=>null!=u?.value)),h=Object.fromEntries(Object.entries({emails:_?.the_entity_s_email?.map(l=>({address:{value:l.data.the_email.the_email_email?.data?.the_email}})),phoneNumbers:_?.the_entity_s_phone?.map(l=>({type:{value:l.data.the_phone.the_phone_type?.data?.the_type},countryCode:{value:l.data.the_phone.the_phone_countrycode?.data?.the_countryCode},number:{value:l.data.the_phone.the_phone_phone?.data?.the_phone}})),addresses:_?.the_entity_s_address?.map(l=>({type:{value:l.data.the_address.the_address_type?.data?.the_type},street:{value:l.data.the_address.the_address_street?.data?.the_street},city:{value:l.data.the_address.the_address_city?.data?.the_city},state:{value:l.data.the_address.the_address_state?.data?.the_state},postalCode:{value:Number(l.data.the_address.the_address_postalcode?.data?.the_postalCode)},country:{value:l.data.the_address.the_address_country?.data?.the_country}}))}).filter(([l,u])=>null!=u));let d;switch(d=_?.the_entity_type?.data?.the_type,"maps"===d&&(d="extension_maps"),d){case"patient":case"government":return{type:d,profileInformation:e,contactInformation:h,id:i.id,isBoomgpt:!1};case"company":return{type:d,isBoomgpt:!1,profileInformation:e,contactInformation:h,id:i.id};case"employee":return{type:d,profileInformation:e,isBoomgpt:!1,contactInformation:h,id:i.id};default:return{type:d,profileInformation:e,contactInformation:h,isBoomgpt:!1,id:i.id}}}):[]}cleanData(o){function s(i,_=null){if("object"!=typeof i||null===i)return i;if(Array.isArray(i))return i.map(h=>s(h));const e={};for(const h in i){if("data"===h)return s(i[h],_);"id"===h&&"boomgpt"===_?e[h]=i[h]:"id"!==h&&(e[h]=s(i[h],h))}return e}return Array.isArray(o)?o.map(i=>{const e=s(i).boomgpt||{};return{id:i?.boomgpt?.id||null,created_at:i?.boomgpt?.data?.created_at?.data||null,data:{boomgpt:{...e}}}}):s(o)}getContactsV2(o,s){var i=this;return(0,Q.Z)(function*(){try{const _=i._authService.loadFromLocalStorage(),e=_.token,h=_?.userConcept,d=_?.entityId,l=new n.LtL;l.typeConnection="the_entity_s_maps_contact_s",l.isOldConnectionType=!0,l.name="mapname",l.selectors=["self"];const u=new n.LtL;u.typeConnection="the_entity_s_linkedin_contact_s",u.isOldConnectionType=!0,u.name="linkedinname",u.selectors=["self"];const w=new n.LtL;w.typeConnection="the_entity_s_whatsapp_contact_s",w.isOldConnectionType=!0,w.name="whatsappname",w.selectors=["self"];const C=new n.LtL;C.typeConnection="the_entity_s_indeed_contact_s",C.isOldConnectionType=!0,C.name="indeedname",C.selectors=["self"];const k=new n.LtL;k.typeConnection="the_entity_s_monster_contact_s",k.isOldConnectionType=!0,k.name="monstername",k.selectors=["self"];const b=new n.LtL;b.typeConnection="the_entity_s_crm_contact_s",b.isOldConnectionType=!0,b.name="crmname",b.selectors=["self"];const m=new n.LtL;m.typeConnection="the_user_s_contact_s",m.inpage=s,m.page=o,m.limit=!0,m.isOldConnectionType=!0,m.name="contactname",m.selectors=["the_entity_name"],m.freeschemaQueries=[l,u,w,C,k,b];const I=new n.LtL;I.typeConnection="the_address_country",I.name="itemaddress";const E=new n.LtL;E.typeConnection="the_entity_s_address",E.freeschemaQueries=[I],E.name="addressname",E.selectors=["the_address_address","the_address_type","the_address_postalcode","the_address_city","the_address_country"];const L=new n.LtL;L.typeConnection="the_phone_phone",L.name="itemphone";const c=new n.LtL;c.typeConnection="the_entity_s_phone",c.freeschemaQueries=[L],c.name="phonename",c.selectors=["the_phone_phone","the_phone_countryCode","the_phone_type"];const g=new n.LtL;g.typeConnection="the_email_email",g.name="itememail";const T=new n.LtL;T.typeConnection="the_entity_s_email",T.freeschemaQueries=[g],T.name="emailname",T.selectors=["the_email_email"];const D=new n.LtL;D.typeConnection="the_entity_s_crm_contact_s",D.limit=!0,D.page=o,m.inpage=s,D.isOldConnectionType=!1,D.freeschemaQueries=[E,c,T],D.name="entitycontacts",D.selectors=["the_entity_avatar","the_entity_name","the_entity_company_name","the_entity_department_name","the_entity_website","the_entity_tag","the_entity_type","the_entity_googleLocation","the_entity_companySize","the_entity_ceo","the_entity_revenue","the_entity_founded","the_entity_created_at","the_entity_email","the_entity_phone","the_entity_firstname","the_entity_lastname","the_entity_s_email","the_entity_s_phone","the_entity_s_address"];const v=new n.LtL;v.typeConnection="the_entity_contact_table",v.isOldConnectionType=!1,v.name="contacttable",v.selectors=["the_table_contact_name","the_table_phone_number","the_table_address","the_table_website","the_table_location_url","the_table_company_size","the_table_company_owner","the_table_company_revenue","the_table_founded_date","the_table_label","the_table_relation","the_table_email"];const S=new n.LtL;S.conceptIds=[Number(h),Number(d)],S.name="top",S.freeschemaQueries=[m,D,v],S.outputFormat=n.Zec,S.order="DESC";const M=yield(0,n.og0)(S,e).bind(),P=["the_entity_s_linkedin_contact_s","the_entity_s_indeed_contact_s","the_entity_s_maps_contact_s","the_entity_s_map_contact_s","the_entity_s_monster_contact_s","the_entity_s_whatsapp_contact_s"],x=(M?.find(A=>A?.the_user_s_contact_s_count)?.the_user_s_contact_s_count||0)+(M?.find(A=>A?.the_entity_s_crm_contact_s_count)?.the_entity_s_crm_contact_s_count||0),oe=M?.filter(A=>A?.the_user?.the_user_s_contact_s)?.flatMap(A=>A.the_user.the_user_s_contact_s),q=M?.filter(A=>A?.the_entity?.the_entity_s_crm_contact_s)?.flatMap(A=>A.the_entity.the_entity_s_crm_contact_s),R=M?.filter(A=>A?.the_entity?.the_entity_contact_table)?.flatMap(A=>A.the_entity.the_entity_contact_table),de=oe?.flatMap(A=>{const Y=P.flatMap(N=>{const H=A?.the_entity?.data?.[N];return Array.isArray(H)?H:[]});return Y.length>0?Y:null}).filter(Boolean).flat(),Z=i.cleanData(de),le=i.formatOldEntityContacts(Z),G=i.formatEntityContacts(q),te=[...le,...G];return te.sort((A,Y)=>{const N=X=>{if("string"==typeof X){const z=Date.parse(X);if(!isNaN(z))return z;const ne=parseInt(X,10);if(!isNaN(ne))return ne}return 0},H=N(A?.created_at);return N(Y?.created_at)-H}),{allContacts:te,tableData:R,totalCount:x}}catch(_){return console.error("error in getContactsV2:",_),[{success:!1}]}})()}formatEntityContacts(o){return o&&Array.isArray(o)?o?.map(s=>{const i=s?.the_entity?.data,_=Object.fromEntries(Object.entries({name:{value:i?.the_entity_company_name?.the_company_name?.data||i?.the_entity_department_name?.the_department_name?.data||i?.the_entity_name?.the_name?.data||i?.the_entity_firstname?.the_firstname?.data+" "+i?.the_entity_lastname?.the_lastname?.data},avatar:{value:i?.the_entity_avatar?.the_avatar?.data},website:{value:i?.the_entity_website?.the_website?.data},tag:{value:i?.the_entity_tag?.the_tag?.data}}).filter(([l,u])=>null!=u?.value)),e=Object.fromEntries(Object.entries({emails:[...i?.the_entity_s_email?.map(l=>({address:{value:l?.the_email?.data?.the_email_email?.the_email?.data||null}}))||[],...i?.the_entity_email?[{address:{value:i.the_entity_email?.the_email?.data||null}}]:[]],phoneNumbers:[...i?.the_entity_s_phone?.map(l=>({type:{value:l?.the_phone?.data?.the_phone_type?.the_type?.data||null},countryCode:{value:l?.the_phone?.data?.the_phone_countrycode?.the_countryCode?.data||null},number:{value:l?.the_phone?.data?.the_phone_phone?.the_phone?.data||null}}))||[],...i?.the_entity_phone?[{type:{value:i.the_entity_phone?.the_phone?.data?.the_phone_type?.the_type?.data||null},countryCode:{value:i.the_entity_phone?.the_phone?.data?.the_phone_countrycode?.the_countryCode?.data||null},number:{value:i.the_entity_phone?.the_phone?.data?.the_phone_phone?.the_phone?.data||null}}]:[]],addresses:i?.the_entity_s_address?.map(l=>({type:{value:l?.the_address?.data?.the_address_type?.the_type?.data},street:{value:l?.the_address?.data?.the_address_street?.the_street?.data},city:{value:l?.the_address?.data?.the_address_city?.the_city?.data},state:{value:l?.the_address?.data?.the_address_state?.the_state?.data},postalCode:{value:Number(l?.the_address?.data?.the_address_postalcode?.the_postalCode?.data)},country:{value:l?.the_address?.data?.the_address_country?.the_country?.data}}))}).filter(([l,u])=>null!=u));let h;h=i?.the_entity_type?.the_type?.data;const d=i?.the_entity_created_at?.the_created_at?.data;switch("maps"===h&&(h="extension_maps"),h){case"patient":case"government":return{type:h,profileInformation:_,contactInformation:e,id:s?.the_entity?.id,isBoomgpt:!1,created_at:d||null};case"company":return{type:h,isBoomgpt:!1,profileInformation:_,contactInformation:e,id:s?.the_entity?.id,created_at:d||null};case"employee":return{type:h,profileInformation:_,isBoomgpt:!1,contactInformation:e,id:s?.the_entity?.id,created_at:d||null};default:return{type:h,profileInformation:_,contactInformation:e,isBoomgpt:!1,id:s?.the_entity?.id,created_at:d||null}}}):[]}createContactAfterSignup(o,s){var i=this;return(0,Q.Z)(function*(){const _={type:void 0!==s?.entityType?s.entityType:"person",title:s?.title,email:s?.email,first_name:s?.fname,last_name:s?.lname},e=yield(0,n.Fsb)("the_entity","",!0,999,4,999);for(const[l,u]of Object.entries(_)){const w=yield(0,n.Fsb)(`${l}`,`${u}`,!1,999,4,999);yield(0,n.G$0)(e,w,l)}const h=yield i.getEntityId(Number(o)),d=yield(0,n.Mu8)(Number(h));return yield(0,n.G$0)(d,e,"s_crm_contact_s"),yield n.smK.SyncDataOnline(),d})()}getEntityId(o){return new Promise(s=>{this._items.checkEnitity(o).subscribe({next:i=>{const _=i?.entity;s(_)},error:i=>{console.error(i)}})})}getEntityConnectionsToDelete(){var o=this;return(0,Q.Z)(function*(){const s=new n.LtL;s.typeConnection="the_entity_s_maps_contact_s",s.isOldConnectionType=!0,s.name="mapname",s.selectors=["self"];const i=new n.LtL;i.typeConnection="the_entity_s_linkedin_contact_s",i.isOldConnectionType=!0,i.name="linkedinname",i.selectors=["self"];const _=new n.LtL;_.typeConnection="the_entity_s_whatsapp_contact_s",_.isOldConnectionType=!0,_.name="whatsappname",_.selectors=["self"];const e=new n.LtL;e.typeConnection="the_entity_s_indeed_contact_s",e.isOldConnectionType=!0,e.name="indeedname",e.selectors=["self"];const h=new n.LtL;h.typeConnection="the_entity_s_monster_contact_s",h.isOldConnectionType=!0,h.name="monstername",h.selectors=["self"];const d=new n.LtL;d.typeConnection="the_entity_s_crm_contact_s",d.isOldConnectionType=!0,d.name="crmname",d.selectors=["self"];const l=new n.LtL;l.typeConnection="the_user_s_contact_s",l.inpage=500,l.page=1,l.limit=!0,l.isOldConnectionType=!0,l.name="contactname",l.freeschemaQueries=[s,i,_,e,h,d];const u=new n.LtL;u.conceptIds=[Number(o.userConcept)],u.name="top",u.outputFormat=n.Zec,u.inpage=10,u.freeschemaQueries=[l];const C=yield(0,n.og0)(u,"").bind(),k=["the_entity_s_linkedin_contact_s","the_entity_s_indeed_contact_s","the_entity_s_maps_contact_s","the_entity_s_map_contact_s","the_entity_s_monster_contact_s","the_entity_s_whatsapp_contact_s"],m=C?.filter(L=>L?.the_user?.the_user_s_contact_s)?.flatMap(L=>L.the_user.the_user_s_contact_s)?.flatMap(L=>{const c=k.every(g=>!Object.keys(L?.the_entity?.data||{}).includes(g))?[L]:[];return c.length>0?c:null}).filter(Boolean).flat(),I=yield(0,n.Mu8)(Number(o.userConcept));m?.map(L=>L?.the_entity?.id).filter(L=>void 0!==L).map(function(){var L=(0,Q.Z)(function*(c){try{const g=yield(0,n.Mu8)(c),T=yield(0,n.kqu)(I,g,"contact","",!0);for(const D of T)yield(0,n.TAP)(D?.id)}catch(g){console.error("Error processing entity:",c,g)}});return function(c){return L.apply(this,arguments)}}())})()}formatNewEntityContactsConsole(o,s){return o&&Array.isArray(o)?o.map(i=>{const _=i?.data?.the_entity||{},e=_?.the_entity_type?.data?.the_type||(Array.isArray(_?.the_entity_type)?_?.the_entity_type[0]?.data?.the_type:"individual"),h=_?.the_entity_first_name?.data?.the_first_name||(Array.isArray(_?.the_entity_first_name)?_?.the_entity_first_name[0]?.data?.the_first_name:void 0),d=_?.the_entity_last_name?.data?.the_last_name||(Array.isArray(_?.the_entity_last_name)?_?.the_entity_last_name[0]?.data?.the_last_name:void 0),l=h&&d?`${h} ${d}`:h||d,u={name:_?.the_entity_name?.data?.the_name||(Array.isArray(_?.the_entity_name)?_?.the_entity_name[0]?.data?.the_name:l),tag:_?.the_entity_tag?.data?.the_tag||(Array.isArray(_?.the_entity_tag)?_?.the_entity_tag[0]?.data?.the_tag:void 0)},w={type:e,profileInformation:Object.fromEntries(Object.entries(u).filter(([C,k])=>null!=k)),contactInformation:{},otherInformation:{},created_at:i.created_on,isBoomgpt:!1,id:i?.id};return"government"===e&&(w.contactPerson=[]),"preview"===s&&(w.title=u.name,w.data_type=e,w.name=u.name,w.note=void 0),w}):[]}formatOldEntityContactsConsole(o,s){return o&&Array.isArray(o)?o.map(i=>{console.log("e",i);const _=i?.data?.boomgpt||{},e=_?.crm_data?.data?.crm_data||{},h=_?.data_type?.data?.the_data_type,d={name:{value:e?.name?.data?.the_name},tag:{value:e?.tag?.data?.the_tag},avatar:{value:e?.avatar?.data?.the_avatar},website:{value:e?.companyWebsite?.data?.the_companyWebsite},about:{value:e?.about?.data?.the_about}},u={addresses:Array.isArray(e?.addresses?.data?.addresses)?e.addresses.data.addresses.map(k=>({address:{value:k?.[0]?.location?.data?.the_location||void 0}})).filter(k=>null!=k.address&&""!==k.address):[]},w={companySize:{value:e?.companySize?.data?.the_companySize},founded:{value:e?.founded?.data?.the_founded},revenue:{value:e?.companyRevenue?.data?.the_companyRevenue},ceo:{value:e?.ceo?.data?.the_ceo},source_url:{value:_?.source_url?.data?.the_source_url},note:{value:_?.note?.data?.the_note}},C={type:"indeed"===h?"company":h,profileInformation:Object.fromEntries(Object.entries(d).filter(([k,b])=>null!=b)),contactInformation:Object.fromEntries(Object.entries(u).filter(([k,b])=>Array.isArray(b)?b.length>0:null!=b)),otherInformation:w,created_at:i.created_on,isBoomgpt:!0,id:i?.id};return"indeed"===h&&(C.otherInformation={companySize:w.companySize?.value,founded:w.founded?.value,revenue:w.revenue?.value,ceo:w.ceo?.value,about:d.about?.value,source_url:w.source_url?.value,note:w.note?.value},C.contactPerson=[]),"preview"===s&&(C.title=d.name?.value,C.data_type="indeed"===h?"extension_indeed":h,C.name=d.name?.value,C.note=w.note?.value),C}):[]}};let r=y;return y.\u0275fac=function(s){return new(s||y)(F.LFG(O.e),F.LFG(p.e),F.LFG(f.z))},y.\u0275prov=F.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),r})()},2126:(me,U,$)=>{$.d(U,{z:()=>B});var Q=$(4650);let B=(()=>{const a=class{constructor(){this.types=["the_entity_s_linkedin_contact_s","the_entity_s_indeed_contact_s","the_entity_s_maps_contact_s","the_entity_s_map_contact_s","the_entity_s_monster_contact_s","the_entity_s_whatsapp_contact_s"]}formatOldEntityContacts(O,p){return O?O?.map(f=>{const t=f?.data?.boomgpt||f,r=t?.crm_data,y=[r?.email],j=Array.isArray(r?.phone)?r.phone.filter(d=>"object"==typeof d&&null!==d?Object.keys(d).some(l=>l&&null!=d[l]&&"undefined"!==d[l]):null!=d&&"undefined"!==d&&""!==d)?.map(d=>({number:{value:"object"==typeof d&&null!==d?Object.values(d).find(u=>null!=u&&"undefined"!==u):d}})):r?.phone&&"string"==typeof r.phone?[{number:{value:r.phone}}]:[],o=Array.isArray(r?.addresses)?r.addresses?.map(d=>({address:{value:d?.location}})).filter(({address:d})=>null!=d?.value&&"undefined"!==d.value&&""!==d.value):r?.addresses?[{address:{value:r.addresses}}]:[],s=Object.fromEntries(Object.entries({name:{value:r?.name||r?.companyInformation?.name},tag:{value:r?.tag},website:{value:r?.website||r?.companyWebsite||r?.companyInformation?.website},avatar:{value:r?.avatar},about:{value:r?.about},education:{value:r?.education},experience:{value:r?.experience}}).filter(([d,l])=>null!=l?.value&&"undefined"!==l?.value&&""!==l?.value)),i=Object.fromEntries(Object.entries({emails:y?.map(d=>({address:{value:d}})).filter(({address:d})=>null!=d?.value&&"undefined"!==d.value&&""!==d.value),phoneNumbers:j,addresses:o}).filter(([d,l])=>Array.isArray(l)?l?.length>0:null!=l)),_=Object.fromEntries(Object.entries({rating:{value:r?.ratingAndReviews},latitude:{value:r?.latitude},longitude:{value:r?.longitude},googleLocation:{value:r?.googleLocation},source_url:{value:t?.source_url},note:{value:t?.note},workWellbeing:{value:r?.workWellbeing},ceo:{value:r?.ceo},companySize:{value:r?.companySize},founded:{value:r?.founded},revenue:{value:r?.companyRevenue},industryType:{value:r?.sector}}).filter(([d,l])=>null!=l?.value&&void 0!==l?.value&&"undefined"!==l?.value));let e;e=r?.dataType||t?.data_type,"maps"===e&&(e="extension_maps");const h={};return"preview"==p&&(h.title=s.title?.value||s.name?.value,h.name=s.name?.value,h.data_type=e,h.note=_?.note?.value),{type:e,profileInformation:s,contactInformation:i,otherInformation:_,isBoomgpt:!0,...h,id:f.id}}):[]}formatEntityContacts(O){return O&&Array.isArray(O)?O?.map(p=>{const f=p?.the_entity?.data,t=Object.fromEntries(Object.entries({name:{value:f?.the_entity_company_name?.the_company_name?.data||f?.the_entity_department_name?.the_department_name?.data||f?.the_entity_name?.the_name?.data||(f?.the_entity_firstname?.the_firstname?.data||f?.the_entity_first_name?.the_first_name?.data)&&`${f?.the_entity_firstname?.the_firstname?.data||f?.the_entity_first_name?.the_first_name?.data}`+(f?.the_entity_lastname?.the_lastname?.data||f?.the_entity_last_name?.the_last_name?.data?` ${f?.the_entity_lastname?.the_lastname?.data||f?.the_entity_last_name?.the_last_name?.data}`:"")},avatar:{value:f?.the_entity_avatar?.the_avatar?.data},website:{value:f?.the_entity_website?.the_website?.data},tag:{value:f?.the_entity_tag?.the_tag?.data,id:f?.the_entity_tag?.the_tag?.id}}).filter(([s,i])=>null!=i?.value)),r=Object.fromEntries(Object.entries({emails:[...f?.the_entity_s_email?.map(s=>({address:{value:s?.the_email?.data?.the_email_email?.the_email?.data||null}}))||[],...f?.the_entity_email?[{address:{value:f.the_entity_email?.the_email?.data||null}}]:[]],phoneNumbers:[...f?.the_entity_s_phone?.map(s=>({type:{value:s?.the_phone?.data?.the_phone_type?.the_type?.data||null},countryCode:{value:s?.the_phone?.data?.the_phone_countrycode?.the_countryCode?.data||null},number:{value:s?.the_phone?.data?.the_phone_phone?.the_phone?.data||null}}))||[],...f?.the_entity_phone?[{type:{value:f.the_entity_phone?.the_phone?.data?.the_phone_type?.the_type?.data||null},countryCode:{value:f.the_entity_phone?.the_phone?.data?.the_phone_countrycode?.the_countryCode?.data||null},number:{value:f.the_entity_phone?.the_phone?.data?.the_phone_phone?.the_phone?.data||null}}]:[]],addresses:f?.the_entity_s_address?.map(s=>({type:{value:s?.the_address?.data?.the_address_type?.the_type?.data},street:{value:s?.the_address?.data?.the_address_street?.the_street?.data},city:{value:s?.the_address?.data?.the_address_city?.the_city?.data},state:{value:s?.the_address?.data?.the_address_state?.the_state?.data},postalCode:{value:Number(s?.the_address?.data?.the_address_postalcode?.the_postalCode?.data)},country:{value:s?.the_address?.data?.the_address_country?.the_country?.data},address:{value:s?.the_address?.data?.the_address_address?.the_address?.data||""}}))}).filter(([s,i])=>null!=i)),y=Object.fromEntries(Object.entries({source_url:{value:f?.the_entity_source_url?.the_source_url?.data}}).filter(([s,i])=>null!=i?.value&&void 0!==i?.value&&"undefined"!==i?.value));let j;j=f?.the_entity_type?.the_type?.data;const o=f?.the_entity_data_type?.the_data_type?.data;switch("maps"===j&&(j="extension_maps"),j){case"patient":return{contacts:[{type:j,profileInformation:t,contactInformation:r,otherInformation:y,isBoomgpt:!1,id:p?.the_entity?.id}],created_at:p?.the_entity?.created_on,name:t.name?.value};case"company":return{contacts:[{type:j,isBoomgpt:!1,profileInformation:t,contactInformation:r,otherInformation:y,id:p?.the_entity?.id}],created_at:p?.the_entity?.created_on,name:t.name?.value};case"employee":return{contacts:[{type:j,profileInformation:t,isBoomgpt:!1,contactInformation:r,otherInformation:y,id:p?.the_entity?.id}],created_at:p?.the_entity?.created_on,name:t.name?.value};case"student":case"government":return{contacts:[{type:j,profileInformation:t,contactInformation:r,otherInformation:y,id:p?.the_entity?.id,isBoomgpt:!1}],created_at:p?.the_entity?.created_on,name:t.name?.value};case"extension_merojob":return{contacts:[{type:"extension_merojob",profileInformation:t,contactInformation:r,otherInformation:y,isBoomgpt:!1,id:p?.the_entity?.id}],created_at:p?.the_entity?.created_on,name:t.name?.value};default:return{contacts:[{type:j,dataType:o,profileInformation:t,contactInformation:r,otherInformation:y,isBoomgpt:!1,id:p?.the_entity?.id}],created_at:p?.the_entity?.created_on,name:t.name?.value}}}):[]}cleanData(O){function p(f,t=null){if("object"!=typeof f||null===f)return f;if(Array.isArray(f))return f.map(y=>p(y));const r={};for(const y in f){if("data"===y)return p(f[y],t);"id"===y&&"boomgpt"===t?r[y]=f[y]:"id"!==y&&(r[y]=p(f[y],y))}return r}return Array.isArray(O)?O.map(f=>{const r=p(f).boomgpt||{};return{id:f?.boomgpt?.id||null,data:{boomgpt:{...r}}}}):p(O)}formatData(O){return O?.map(p=>{const f=p?.the_entity?.data?.the_entity_name?.the_name?.data,t=this.types.flatMap(o=>{const s=p?.the_entity?.data?.[o];return Array.isArray(s)?s:[]}),r=this.cleanData(t),y=this.formatOldEntityContacts(r);return{name:f,created_at:p?.the_entity?.created_on,id:p?.the_entity?.id,contacts:[...y]}})}};let n=a;return a.\u0275fac=function(p){return new(p||a)},a.\u0275prov=Q.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),n})()},8495:(me,U,$)=>{$.d(U,{s:()=>F});var Q=$(2340),B=$(4650),n=$(529);const a=Q.N.nodeUrl;let F=(()=>{const p=class{constructor(t){this.http=t}signup(t){return this.http.post(a+"/signup",t)}saveEntity(t){return this.http.post(a+"/entity/save",t)}entity(t){return this.http.post(a+"/entity/signup",t)}signupAsEntitysUser(t){return this.http.post(a+"/entity/subuser-signup",t)}updateUser(t){return this.http.put(a+"/user",t)}username(t){return this.http.get(a+`/username/${t}`)}googleToken(t){return this.http.post(a+"/googleauth",t)}googleSignup(t){return this.http.post(a+"/google-signup",t)}agentSignup(t){return this.http.post(a+"/agents",t)}getFolders(){return this.http.get(a+"/folders")}getFolderById(t){return this.http.get(a+`/folders/f/${t}`)}getFolderDetails(t){return this.http.get(a+`/folders/${t}`)}createFolder(t){return this.http.post(a+"/folders",t)}deleteBulk(t){return this.http.post(a+"/folders/deletebulk",t)}deleteFolder(t){return this.http.delete(a+`/folders/${t}`)}updateFolder(t){return this.http.put(a+"/folders",t)}deleteCaptures(t){return this.http.post(a+"/captures/delete",t)}signin(t){return this.http.post(a+"/signin",t)}invites(t){return this.http.post(a+"/invite",t)}inviteEmail(t){return this.http.post(a+"/email/send-email",t)}requestToBecomeAgent(t){return this.http.post(a+"/agent/request",t)}getAllPaymentMethods(){return this.http.get(a+"/payments")}addPaymentMethod(t){return this.http.post(a+"/payments",t)}updatePaymentMethod(t){return this.http.put(a+"/payments",t)}createInvitationCode(){return this.http.post(a+"/entity/code",{})}getInvitationCode(){return this.http.get(a+"/entity/code")}getInvitationCodeDetails(t){return this.http.get(a+`/entity/code/${t}`)}convertContacts(){return this.http.post(a+"/entity/convert-contacts",{})}getConversations(t,r,y=!1,j=""){return this.http.get(a+`/crm/conversations/${t}/${r}?${y?`syncEmail=true&email=${j}`:""}`)}getSmtpServer(t=!1){return this.http.get(a+"/crm/get-smtp-server"+(t?"?detail=true":""))}saveSMTPServer(t){return this.http.post(a+"/crm/save-smtp-server",t)}sendMessage(t){return this.http.post(a+"/crm/send-message",t)}composeMessage(t,r){return this.http.post(a+`/crm/compose-message/${r}`,t)}syncAllSmtpMails(){return this.http.post(a+"/crm/sync-all-smtp-mail",{})}checkSmtpSyncStatus(){return this.http.get(a+"/crm/sync-smtp-mail-status")}createContactEntity(t){return this.http.post(a+"/entity/contact",t)}checkIfMember(t){return this.http.post(a+"/group/check-if-member",t)}listUserIssueRaised(){return this.http.get(a+"/bug-reporting?list_all=true")}getUserIssueRaised(t){return this.http.get(a+`/bug-reporting/${t}`)}listUserIssueRaisedInfo(t=1,r=10,y=""){return this.http.get(a+`/bug-reporting/info?list_all=true${y?`&status=${y}`:""}&page=${t}&inpage=${r}`)}acceptUserIssue(t){return this.http.post(a+"/bug-reporting/accept-user-issue",t)}mergeUserIssue(t){return this.http.post(a+"/bug-reporting/merge-user-issue",t)}closeUserIssue(t){return this.http.post(a+"/bug-reporting/close-user-issue",t)}markIssueAsResolved(t){return this.http.post(a+"/bug-reporting/mark-as-resolved",t)}markIssueAsFixed(t){return this.http.post(a+"/bug-reporting/mark-as-fixed",t)}raiseIssue(t){return this.http.post(a+"/bug-reporting",t)}addLabelsToUserIssue(t,r){return this.http.post(a+`/bug-reporting/${t}/add-label`,r)}getUserIssueActivities(t){return this.http.get(a+`/bug-reporting/${t}/activities`)}getUserIssueAttachments(t){return this.http.get(a+`/bug-reporting/${t}/attachments`)}addUserIssueActivity(t,r){return this.http.post(a+`/bug-reporting/${t}/activities`,r)}reopenUserIssue(t,r){return this.http.post(a+`/bug-reporting/${t}/activities/reopen`,r)}filterBug(t=1,r=10,y,j,o,s){let i="";return s?.forEach(e=>{i+=`&labels=${e}`}),this.http.get(`${a}/bug-reporting/search?${y}${o?`&title=${o}`:""}${i}&page=${t}&inpage=${r}&order=${j}`)}getBugStatisticsSummary(){return this.http.get(a+"/bug-reporting/get-statistics-summary")}getUserBugStatistics(t,r,y){return this.http.get(a+`/bug-reporting/get-statistics?email=${t}&fromDate=${r}&toDate=${y}`)}getUserBugStatisticsPagination(t,r,y,j,o){return this.http.get(a+`/bug-reporting/get-statistics?email=${t}&fromDate=${r}&toDate=${y}&page=${j}&inpage=${o}`)}createRequestQuote(t,r){return this.http.post(a+`/quote/create/${r}`,t)}getRequestQuote(t,r){return this.http.get(a+`/quote/req/${t}/${r}`)}createResponseQuote(t,r){return this.http.post(a+`/quote/respond/${r}`,t)}getResponseQuote(t,r){return this.http.get(a+`/quote/res/${t}/${r}`)}requestProject(t){return this.http.post(a+"/quote/request-project",t)}updateProjRequest(t){return this.http.put(a+"/quote/update-project",t)}getProjectRequests(t){return this.http.get(a+`/quote/request-project/${t}`)}updateQuoteStatus(t){return this.http.put(a+"/quote/update-status",t)}listNotifications(){return this.http.get(a+"/notification")}markNotificationAsRead(){return this.http.post(a+"/notification/viewed",{})}AISearchUser(t="",r=1,y=10){return this.http.get(a+`/user-search?search=${t}&page=${r}&inpage=${y}`)}searchUsersById(t=[]){return this.http.post(a+"/user/searchByUserId",t)}getUserBugStatisticsByEmail(t,r,y,j,o){return this.http.get(a+`/-reporting/get-statistics?email=${t}&fromDate=${r}&toDate=${y}&page=${j}&inpage=${o}`)}bulkCreateLink(t){return this.http.post(a+"/connection/bulk",t)}bulkRemoveLink(t){return this.http.post(a+"/connection/bulk-delete",t)}optOutEmail(t){return this.http.post(a+"/survey/opt-out-email",t)}listOptOutEmail(t,r,y){return this.http.get(a+`/email/list-email-opt-out?page=${t}&inpage=${r}&order=${y}`)}imageLinksToData(t){return this.http.post(a+"/file-util/images-to-pdfdata",t)}searchUsernameForMarketing(t){return this.http.get(a+`/marketing?username=${t}`)}getAlldocument(){return this.http.get(a+"/document-mgmt/")}fileUpload(t){return this.http.post(a+"/document-mgmt/uploadFile",t)}createDocument(t,r){return this.http.post(a+`/document-mgmt/createfile/${r}`,t)}createDoc(t,r){return this.http.post(a+`/document-mgmt/createdoc/${t}`,r)}getDocuments(t,r){return this.http.get(a+`/document-mgmt/list-all-documents/${t}?page=${r.page}&limit=${r.limit}`)}getOneDocument(t){return this.http.get(a+`/document-mgmt/list-one-document/${t}`)}updateDocumentMgmt(t,r){return this.http.put(a+`/document-mgmt/update-document/${t}`,r)}deleteDocument(t){return this.http.delete(a+`/document-mgmt/delete-document/${t}`)}downloadDocument(t){return this.http.get(a+`/document-mgmt/download-document/${t}`)}exportDocumentAs(t,r){return this.http.post(a+`/document-mgmt/export-document-as/${t}`,r)}getSmtpServerList(){return this.http.get(a+"/crm/smtp-server")}getSingleSmtpServerList(t){return this.http.get(a+"/crm/get-smtp-server/",{params:{id:t,detail:!0}})}getSingleSmtpServerActiveList(){return this.http.get(a+"/crm/get-smtp-server/",{params:{detail:!0}})}createSmtp(t){return this.http.post(a+"/crm/smtp-server",t)}updateSmtp(t,r){return this.http.patch(a+`/crm/smtp-server/${t}`,r)}activeSmtp(t,r){return this.http.patch(a+`/crm/smtp-server-status/${t}`,r)}deleteSmtp(t){return this.http.delete(a+`/crm/smtp-server/${t}`)}sendMail(t){return this.http.post(a+"/crm/send-message/",t)}sendBulkMail(t,r,y=!1){return this.http.post(a+`/crm/compose-message/${t}${y&&"?saveInEmail=true"}`,r)}markEmailAsRead(t,r){return this.http.post(a+`/crm/mark-email-as-read/${t}`,r)}};let O=p;return p.\u0275fac=function(r){return new(r||p)(B.LFG(n.eN))},p.\u0275prov=B.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),O})()},2945:(me,U,$)=>{$.d(U,{Fz:()=>Q,m7:()=>a,sf:()=>n,td:()=>B});const Q="tourStatus",B="tour_complete_status",n="/captures",a="/company"},6296:(me,U,$)=>{function Q(n){var a,F,O,p=2;for(typeof Symbol<"u"&&(F=Symbol.asyncIterator,O=Symbol.iterator);p--;){if(F&&null!=(a=n[F]))return a.call(n);if(O&&null!=(a=n[O]))return new B(a.call(n));F="@@asyncIterator",O="@@iterator"}throw new TypeError("Object is not async iterable")}function B(n){function a(F){if(Object(F)!==F)return Promise.reject(new TypeError(F+" is not an object."));var O=F.done;return Promise.resolve(F.value).then(function(p){return{value:p,done:O}})}return(B=function(O){this.s=O,this.n=O.next}).prototype={s:null,n:null,next:function(){return a(this.n.apply(this.s,arguments))},return:function(O){var p=this.s.return;return void 0===p?Promise.resolve({value:O,done:!0}):a(p.apply(this.s,arguments))},throw:function(O){var p=this.s.return;return void 0===p?Promise.reject(O):a(p.apply(this.s,arguments))}},new B(n)}$.d(U,{Z:()=>Q})}}]);