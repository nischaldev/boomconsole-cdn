"use strict";(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[8026],{8026:(A,f,h)=>{h.d(f,{P4:()=>M,Wt:()=>j,oX:()=>s});var p=h(9646),m=h(7579),b=h(9751),l=h(4707),d=h(9841),w=h(4968),a=h(4650),S=h(5577),y=h(4004),E=h(3900),_=h(8372);const L=["*"];var s=(()=>{return(t=s||(s={})).AnnotationChart="AnnotationChart",t.AreaChart="AreaChart",t.Bar="Bar",t.BarChart="BarChart",t.BubbleChart="BubbleChart",t.Calendar="Calendar",t.CandlestickChart="CandlestickChart",t.ColumnChart="ColumnChart",t.ComboChart="ComboChart",t.PieChart="PieChart",t.Gantt="Gantt",t.Gauge="Gauge",t.GeoChart="GeoChart",t.Histogram="Histogram",t.Line="Line",t.LineChart="LineChart",t.Map="Map",t.OrgChart="OrgChart",t.Sankey="Sankey",t.Scatter="Scatter",t.ScatterChart="ScatterChart",t.SteppedAreaChart="SteppedAreaChart",t.Table="Table",t.Timeline="Timeline",t.TreeMap="TreeMap",t.WordTree="WordTree",s;var t})();const O={[s.AnnotationChart]:"annotationchart",[s.AreaChart]:"corechart",[s.Bar]:"bar",[s.BarChart]:"corechart",[s.BubbleChart]:"corechart",[s.Calendar]:"calendar",[s.CandlestickChart]:"corechart",[s.ColumnChart]:"corechart",[s.ComboChart]:"corechart",[s.PieChart]:"corechart",[s.Gantt]:"gantt",[s.Gauge]:"gauge",[s.GeoChart]:"geochart",[s.Histogram]:"corechart",[s.Line]:"line",[s.LineChart]:"corechart",[s.Map]:"map",[s.OrgChart]:"orgchart",[s.Sankey]:"sankey",[s.Scatter]:"scatter",[s.ScatterChart]:"corechart",[s.SteppedAreaChart]:"corechart",[s.Table]:"table",[s.Timeline]:"timeline",[s.TreeMap]:"treemap",[s.WordTree]:"wordtree"},g=new a.OlP("GOOGLE_CHARTS_CONFIG"),W=new a.OlP("GOOGLE_CHARTS_LAZY_CONFIG",{providedIn:"root",factory:()=>{const t=(0,a.f3M)(g,a.XFs.Optional);return(0,p.of)(Object.assign(Object.assign({},{version:"current",safeMode:!1}),t||{}))}});let c=(()=>{class t{constructor(e,r,i){this.zone=e,this.localeId=r,this.config$=i,this.scriptSource="https://www.gstatic.com/charts/loader.js",this.scriptLoadSubject=new m.x}isGoogleChartsAvailable(){return!(typeof google>"u"||typeof google.charts>"u")}loadChartPackages(...e){return this.loadGoogleCharts().pipe((0,S.z)(()=>this.config$),(0,y.U)(r=>Object.assign(Object.assign({},{version:"current",safeMode:!1}),r||{})),(0,E.w)(r=>new b.y(i=>{google.charts.load(r.version,{packages:e,language:this.localeId,mapsApiKey:r.mapsApiKey,safeMode:r.safeMode}),google.charts.setOnLoadCallback(()=>{this.zone.run(()=>{i.next(),i.complete()})})})))}loadGoogleCharts(){if(this.isGoogleChartsAvailable())return(0,p.of)(void 0);if(!this.isLoadingGoogleCharts()){const e=this.createGoogleChartsScript();e.onload=()=>{this.zone.run(()=>{this.scriptLoadSubject.next(),this.scriptLoadSubject.complete()})},e.onerror=()=>{this.zone.run(()=>{console.error("Failed to load the google charts script!"),this.scriptLoadSubject.error(new Error("Failed to load the google charts script!"))})}}return this.scriptLoadSubject.asObservable()}isLoadingGoogleCharts(){return null!=this.getGoogleChartsScript()}getGoogleChartsScript(){return Array.from(document.getElementsByTagName("script")).find(r=>r.src===this.scriptSource)}createGoogleChartsScript(){const e=document.createElement("script");return e.type="text/javascript",e.src=this.scriptSource,e.async=!0,document.getElementsByTagName("head")[0].appendChild(e),e}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(a.R0b),a.LFG(a.soG),a.LFG(W))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})(),v=(()=>{class t{create(e,r,i){if(null==e)return;let n=!0;null!=r&&(n=!1);const C=google.visualization.arrayToDataTable(this.getDataAsTable(e,r),n);return i&&this.applyFormatters(C,i),C}getDataAsTable(e,r){return r?[r,...e]:e}applyFormatters(e,r){for(const i of r)i.formatter.format(e,i.colIndex)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),T=(()=>{class t{constructor(e){this.loaderService=e,this.error=new a.vpe,this.ready=new a.vpe,this.stateChange=new a.vpe,this.id=function z(){return"_"+Math.random().toString(36).substr(2,9)}(),this.wrapperReadySubject=new l.t(1)}get wrapperReady$(){return this.wrapperReadySubject.asObservable()}get controlWrapper(){if(!this._controlWrapper)throw new Error("Cannot access the control wrapper before it being initialized.");return this._controlWrapper}ngOnInit(){this.loaderService.loadChartPackages("controls").subscribe(()=>{this.createControlWrapper()})}ngOnChanges(e){this._controlWrapper&&(e.type&&this._controlWrapper.setControlType(this.type),e.options&&this._controlWrapper.setOptions(this.options||{}),e.state&&this._controlWrapper.setState(this.state||{}))}createControlWrapper(){this._controlWrapper=new google.visualization.ControlWrapper({containerId:this.id,controlType:this.type,state:this.state,options:this.options}),this.addEventListeners(),this.wrapperReadySubject.next(this._controlWrapper)}addEventListeners(){google.visualization.events.removeAllListeners(this._controlWrapper),google.visualization.events.addListener(this._controlWrapper,"ready",e=>this.ready.emit(e)),google.visualization.events.addListener(this._controlWrapper,"error",e=>this.error.emit(e)),google.visualization.events.addListener(this._controlWrapper,"statechange",e=>this.stateChange.emit(e))}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c))},t.\u0275cmp=a.Xpm({type:t,selectors:[["control-wrapper"]],hostAttrs:[1,"control-wrapper"],hostVars:1,hostBindings:function(e,r){2&e&&a.Ikx("id",r.id)},inputs:{for:"for",type:"type",options:"options",state:"state"},outputs:{error:"error",ready:"ready",stateChange:"stateChange"},exportAs:["controlWrapper"],features:[a.TTD],decls:0,vars:0,template:function(e,r){},encapsulation:2,changeDetection:0}),t})(),R=(()=>{class t{constructor(e,r,i){this.element=e,this.loaderService=r,this.dataTableService=i,this.ready=new a.vpe,this.error=new a.vpe,this.initialized=!1}ngOnInit(){this.loaderService.loadChartPackages("controls").subscribe(()=>{this.dataTable=this.dataTableService.create(this.data,this.columns,this.formatters),this.createDashboard(),this.initialized=!0})}ngOnChanges(e){this.initialized&&(e.data||e.columns||e.formatters)&&(this.dataTable=this.dataTableService.create(this.data,this.columns,this.formatters),this.dashboard.draw(this.dataTable))}createDashboard(){const e=this.controlWrappers.map(i=>i.wrapperReady$),r=this.controlWrappers.map(i=>i.for).map(i=>Array.isArray(i)?(0,d.a)(i.map(n=>n.wrapperReady$)):i.wrapperReady$);(0,d.a)([...e,...r]).subscribe(()=>{this.dashboard=new google.visualization.Dashboard(this.element.nativeElement),this.initializeBindings(),this.registerEvents(),this.dashboard.draw(this.dataTable)})}registerEvents(){google.visualization.events.removeAllListeners(this.dashboard);const e=(r,i,n)=>{google.visualization.events.addListener(r,i,n)};e(this.dashboard,"ready",()=>this.ready.emit()),e(this.dashboard,"error",r=>this.error.emit(r))}initializeBindings(){this.controlWrappers.forEach(e=>{if(Array.isArray(e.for)){const r=e.for.map(i=>i.chartWrapper);this.dashboard.bind(e.controlWrapper,r)}else this.dashboard.bind(e.controlWrapper,e.for.chartWrapper)})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.SBq),a.Y36(c),a.Y36(v))},t.\u0275cmp=a.Xpm({type:t,selectors:[["dashboard"]],contentQueries:function(e,r,i){if(1&e&&a.Suo(i,T,4),2&e){let n;a.iGM(n=a.CRH())&&(r.controlWrappers=n)}},hostAttrs:[1,"dashboard"],inputs:{data:"data",columns:"columns",formatters:"formatters"},outputs:{ready:"ready",error:"error"},exportAs:["dashboard"],features:[a.TTD],ngContentSelectors:L,decls:1,vars:0,template:function(e,r){1&e&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),t})(),M=(()=>{class t{constructor(e,r,i,n){this.element=e,this.scriptLoaderService=r,this.dataTableService=i,this.dashboard=n,this.options={},this.dynamicResize=!1,this.ready=new a.vpe,this.error=new a.vpe,this.select=new a.vpe,this.mouseover=new a.vpe,this.mouseleave=new a.vpe,this.wrapperReadySubject=new l.t(1),this.initialized=!1,this.eventListeners=new Map}get chart(){return this.chartWrapper.getChart()}get wrapperReady$(){return this.wrapperReadySubject.asObservable()}get chartWrapper(){if(!this.wrapper)throw new Error("Trying to access the chart wrapper before it was fully initialized");return this.wrapper}set chartWrapper(e){this.wrapper=e,this.drawChart()}ngOnInit(){this.scriptLoaderService.loadChartPackages(function D(t){return O[t]}(this.type)).subscribe(()=>{this.dataTable=this.dataTableService.create(this.data,this.columns,this.formatters),this.wrapper=new google.visualization.ChartWrapper({container:this.element.nativeElement,chartType:this.type,dataTable:this.dataTable,options:this.mergeOptions()}),this.registerChartEvents(),this.wrapperReadySubject.next(this.wrapper),this.initialized=!0,this.drawChart()})}ngOnChanges(e){if(e.dynamicResize&&this.updateResizeListener(),this.initialized){let r=!1;(e.data||e.columns||e.formatters)&&(this.dataTable=this.dataTableService.create(this.data,this.columns,this.formatters),this.wrapper.setDataTable(this.dataTable),r=!0),e.type&&(this.wrapper.setChartType(this.type),r=!0),(e.options||e.width||e.height||e.title)&&(this.wrapper.setOptions(this.mergeOptions()),r=!0),r&&this.drawChart()}}ngOnDestroy(){this.unsubscribeToResizeIfSubscribed()}addEventListener(e,r){const i=this.registerChartEvent(this.chart,e,r);return this.eventListeners.set(i,{eventName:e,callback:r,handle:i}),i}removeEventListener(e){const r=this.eventListeners.get(e);r&&(google.visualization.events.removeListener(r.handle),this.eventListeners.delete(e))}updateResizeListener(){this.unsubscribeToResizeIfSubscribed(),this.dynamicResize&&(this.resizeSubscription=(0,w.R)(window,"resize",{passive:!0}).pipe((0,_.b)(100)).subscribe(()=>{this.initialized&&this.drawChart()}))}unsubscribeToResizeIfSubscribed(){null!=this.resizeSubscription&&(this.resizeSubscription.unsubscribe(),this.resizeSubscription=void 0)}mergeOptions(){return Object.assign({title:this.title,width:this.width,height:this.height},this.options)}registerChartEvents(){google.visualization.events.removeAllListeners(this.wrapper),this.registerChartEvent(this.wrapper,"ready",()=>{google.visualization.events.removeAllListeners(this.chart),this.registerChartEvent(this.chart,"onmouseover",e=>this.mouseover.emit(e)),this.registerChartEvent(this.chart,"onmouseout",e=>this.mouseleave.emit(e)),this.registerChartEvent(this.chart,"select",()=>{const e=this.chart.getSelection();this.select.emit({selection:e})}),this.eventListeners.forEach(e=>e.handle=this.registerChartEvent(this.chart,e.eventName,e.callback)),this.ready.emit({chart:this.chart})}),this.registerChartEvent(this.wrapper,"error",e=>this.error.emit(e))}registerChartEvent(e,r,i){return google.visualization.events.addListener(e,r,i)}drawChart(){null==this.dashboard&&this.wrapper.draw()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.SBq),a.Y36(c),a.Y36(v),a.Y36(R,8))},t.\u0275cmp=a.Xpm({type:t,selectors:[["google-chart"]],hostAttrs:[1,"google-chart"],inputs:{type:"type",data:"data",columns:"columns",title:"title",width:"width",height:"height",options:"options",formatters:"formatters",dynamicResize:"dynamicResize"},outputs:{ready:"ready",error:"error",select:"select",mouseover:"mouseover",mouseleave:"mouseleave"},exportAs:["googleChart"],features:[a.TTD],decls:0,vars:0,template:function(e,r){},styles:["[_nghost-%COMP%] { width: fit-content; display: block; }"],changeDetection:0}),t})(),j=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:g,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({providers:[c]}),t})()}}]);