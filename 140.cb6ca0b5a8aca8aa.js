"use strict";(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[140],{1666:(Y,I,p)=>{p.d(I,{I:()=>t,K:()=>d});var v=p(9653);const t=(0,v.PH)("[Subscription API] Invoke Subscription Fetch API"),d=(0,v.PH)("[Subscription API] Fetch API Success",(0,v.Ky)())},8211:(Y,I,p)=>{p.d(I,{g:()=>B});var v=p(493),t=p(9653),d=p(1365),P=p(5577),C=p(515),T=p(4004),e=p(262),A=p(2843),O=p(1666),S=p(7429),E=p(2902),N=p(7899),M=p(4650),L=p(8154),Q=p(384);let B=(()=>{const U=class{constructor(D,k,j,W){this.actions$=D,this.apiServices=k,this.store=j,this.authService=W,this.loadAllItems$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(O.I),(0,d.M)(this.store.pipe((0,t.Ys)(S.P))),(0,P.z)(([,R])=>{if(R.length>0)return C.E;let K=this.authService.loadFromLocalStorage();return this.userConceptId=K.userConcept,this.apiServices.getSemanticConnection({compositionId:this.userConceptId,linker:E.PJ+"_s"}).pipe((0,T.U)(w=>{let J={};return J=w.count&&w.output.length?w?.output?.sort((z,G)=>{const H=new Date(z?.data[N.LI].timestamp).getTime(),$=new Date(G?.data[N.LI].timestamp).getTime();return Number($)-Number(H)})[0]?.data[N.LI]:{name:"Free",price:0,expireDate:"Never",id:""},this.subscriptionInfo=J,(0,O.K)({allSubscription:this.subscriptionInfo})}),(0,e.K)(w=>(0,A._)(()=>w?.message)))})))}};let q=U;return U.\u0275fac=function(k){return new(k||U)(M.LFG(v.eX),M.LFG(L.e),M.LFG(t.yh),M.LFG(Q.e))},U.\u0275prov=M.Yz7({token:U,factory:U.\u0275fac}),q})()},7746:(Y,I,p)=>{p.d(I,{k:()=>P});var v=p(9653),t=p(1666);const P=(0,v.Lq)([],(0,v.on)(t.K,(C,{allSubscription:T})=>T))},7429:(Y,I,p)=>{p.d(I,{P:()=>t});const t=(0,p(9653).ZF)("mySubscription")},2851:(Y,I,p)=>{p.d(I,{z:()=>me});var v=p(5861),t=p(4650),d=p(4006),P=p(8998),C=p(9446),T=p(8154),e=p(8180),A=p(384),O=p(8495),S=p(1905),E=p(6895);const N=["formControl"];function M(c,h){1&c&&(t.TgZ(0,"div",34),t._UZ(1,"span",35),t.qZA())}function L(c,h){if(1&c&&t._UZ(0,"img",36),2&c){const l=t.oxw();t.Q6J("src",null==l.currentUser?null:l.currentUser.cover_image,t.LSH)}}function Q(c,h){1&c&&t._UZ(0,"img",36),2&c&&t.Q6J("src","./assets/home-background.jpg",t.LSH)}function B(c,h){1&c&&(t.TgZ(0,"div",34),t._UZ(1,"span",35),t.qZA())}function q(c,h){if(1&c&&(t.ynx(0),t._UZ(1,"img",37),t.BQk()),2&c){const l=t.oxw();t.xp6(1),t.Q6J("src",l.profileImage,t.LSH)}}function U(c,h){if(1&c&&(t.TgZ(0,"option",38),t._uU(1),t.qZA()),2&c){const l=h.$implicit;t.Q6J("value",l.type),t.xp6(1),t.hij(" ",null==l?null:l.name," ")}}function ae(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter valid username. "),t.qZA())}function D(c,h){if(1&c&&(t.TgZ(0,"small",39),t._uU(1),t.qZA()),2&c){const l=t.oxw();t.xp6(1),t.hij(" ",l.invalidUsernameMessage," ")}}function k(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter company name. "),t.qZA())}function j(c,h){if(1&c&&(t.TgZ(0,"option",38),t._uU(1),t.qZA()),2&c){const l=h.$implicit;t.Q6J("value",l.type),t.xp6(1),t.hij(" ",null==l?null:l.name," ")}}function W(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please select job title. "),t.qZA())}function R(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter title. "),t.qZA())}function K(c,h){if(1&c&&(t.TgZ(0,"small",39),t._uU(1),t.qZA()),2&c){const l=t.oxw(2);t.xp6(1),t.hij(" ",l.invalidEmailMessage," ")}}function V(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter valid phone number. "),t.qZA())}function w(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter first name of company's admin. "),t.qZA())}function J(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter last name of company's admin. "),t.qZA())}function oe(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter a bio with 100 characters or less. "),t.qZA())}function z(c,h){if(1&c&&(t.ynx(0),t.TgZ(1,"div",11)(2,"div",40)(3,"label",41),t._uU(4,"Name "),t.TgZ(5,"span",22),t._uU(6,"*"),t.qZA()(),t._UZ(7,"input",42,24),t.YNc(9,k,2,0,"small",29),t.qZA()(),t.TgZ(10,"div",11)(11,"div",20)(12,"label",43),t._uU(13,"Job title "),t.TgZ(14,"span",22),t._uU(15,"*"),t.qZA()(),t.TgZ(16,"select",44,24)(18,"option",25),t._uU(19,"--- Select ---"),t.qZA(),t.YNc(20,j,2,2,"option",26),t.qZA(),t.YNc(21,W,2,0,"small",29),t.qZA(),t.TgZ(22,"div",20)(23,"label",45),t._uU(24,"Gender title "),t.TgZ(25,"span",22),t._uU(26,"*"),t.qZA()(),t.TgZ(27,"select",46,24)(29,"option",25),t._uU(30,"--- Select ---"),t.qZA(),t.TgZ(31,"option",47),t._uU(32,"Mr."),t.qZA(),t.TgZ(33,"option",48),t._uU(34,"Mrs."),t.qZA(),t.TgZ(35,"option",49),t._uU(36,"Miss"),t.qZA(),t.TgZ(37,"option",50),t._uU(38,"Others"),t.qZA()(),t.YNc(39,R,2,0,"small",29),t.qZA()(),t.TgZ(40,"div",11)(41,"div",20)(42,"label",51),t._uU(43,"Email address "),t.TgZ(44,"span",22),t._uU(45,"*"),t.qZA()(),t._UZ(46,"input",52,24),t.YNc(48,K,2,1,"small",29),t.qZA(),t.TgZ(49,"div",20)(50,"label",53),t._uU(51,"Phone Number "),t.TgZ(52,"span",22),t._uU(53,"*"),t.qZA()(),t._UZ(54,"input",54,24),t.YNc(56,V,2,0,"small",29),t.qZA()(),t.TgZ(57,"div",11)(58,"div",20)(59,"label",55),t._uU(60,"Admin first name"),t.TgZ(61,"span",22),t._uU(62,"*"),t.qZA()(),t._UZ(63,"input",56,24),t.YNc(65,w,2,0,"small",29),t.qZA(),t.TgZ(66,"div",20)(67,"label",57),t._uU(68,"Admin last name "),t.TgZ(69,"span",22),t._uU(70,"*"),t.qZA()(),t._UZ(71,"input",58,24),t.YNc(73,J,2,0,"small",29),t.qZA(),t.TgZ(74,"div",59)(75,"label",60),t._uU(76,"Location "),t.qZA(),t._UZ(77,"input",61),t.qZA(),t.TgZ(78,"div",59)(79,"label",62),t._uU(80,"Website"),t.qZA(),t._UZ(81,"input",63),t.qZA(),t.TgZ(82,"div",64)(83,"label",65),t._uU(84,"Bio (100 words max)"),t.qZA(),t.TgZ(85,"textarea",66),t._uU(86,"            "),t.qZA(),t.YNc(87,oe,2,0,"small",29),t.qZA()(),t.BQk()),2&c){const l=t.oxw(),_=t.MAs(1);t.xp6(9),t.Q6J("ngIf",!(null!=l.company_name&&l.company_name.value)&&_.submitted||l.company_name&&l.company_name.invalid&&(l.company_name.touched||_.submitted)),t.xp6(11),t.Q6J("ngForOf",l.jobTitleList),t.xp6(1),t.Q6J("ngIf",l.jobtitle&&l.jobtitle.invalid&&(l.jobtitle.touched||_.submitted)),t.xp6(18),t.Q6J("ngIf",l.title&&l.title.invalid&&(l.title.touched||_.submitted)),t.xp6(9),t.Q6J("ngIf",l.email&&l.email.invalid&&(l.email.touched||_.submitted)),t.xp6(8),t.Q6J("ngIf",l.phone&&l.phone.invalid&&(l.phone.touched||_.submitted)),t.xp6(9),t.Q6J("ngIf",!(null!=l.firstname&&l.firstname.value)&&_.submitted||l.firstname&&l.firstname.invalid&&(l.firstname.touched||_.submitted)),t.xp6(8),t.Q6J("ngIf",!(null!=l.lastname&&l.lastname.value)&&_.submitted||l.lastname&&l.lastname.invalid&&(l.lastname.touched||_.submitted)),t.xp6(14),t.Q6J("ngIf",l.about&&l.about.value&&l.about.value.length>100)}}function G(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter title. "),t.qZA())}function H(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter valid phone number. "),t.qZA())}function $(c,h){if(1&c&&(t.TgZ(0,"small",39),t._uU(1),t.qZA()),2&c){const l=t.oxw(2);t.xp6(1),t.hij(" ",l.invalidEmailMessage," ")}}function se(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter first name. "),t.qZA())}function le(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter last name. "),t.qZA())}function ce(c,h){1&c&&(t.TgZ(0,"small",39),t._uU(1," Please enter a bio with 100 characters or less. "),t.qZA())}function pe(c,h){if(1&c&&(t.ynx(0),t.TgZ(1,"div",11)(2,"div",20)(3,"label",45),t._uU(4,"Gender title "),t.TgZ(5,"span",22),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"select",46,24)(9,"option",25),t._uU(10,"--- Select ---"),t.qZA(),t.TgZ(11,"option",47),t._uU(12,"Mr."),t.qZA(),t.TgZ(13,"option",48),t._uU(14,"Mrs."),t.qZA(),t.TgZ(15,"option",49),t._uU(16,"Miss"),t.qZA(),t.TgZ(17,"option",50),t._uU(18,"Others"),t.qZA()(),t.YNc(19,G,2,0,"small",29),t.qZA(),t.TgZ(20,"div",20)(21,"label",53),t._uU(22,"Phone Number "),t.TgZ(23,"span",22),t._uU(24,"*"),t.qZA()(),t._UZ(25,"input",54,24),t.YNc(27,H,2,0,"small",29),t.qZA()(),t.TgZ(28,"div",11)(29,"div",40)(30,"label",51),t._uU(31,"Email address "),t.TgZ(32,"span",22),t._uU(33,"*"),t.qZA()(),t._UZ(34,"input",52,24),t.YNc(36,$,2,1,"small",29),t.qZA()(),t.TgZ(37,"div",11)(38,"div",20)(39,"label",55),t._uU(40,"First Name "),t.TgZ(41,"span",22),t._uU(42,"*"),t.qZA()(),t._UZ(43,"input",67,24),t.YNc(45,se,2,0,"small",29),t.qZA(),t.TgZ(46,"div",20)(47,"label",68),t._uU(48,"Last Name "),t.TgZ(49,"span",22),t._uU(50,"*"),t.qZA()(),t._UZ(51,"input",69,24),t.YNc(53,le,2,0,"small",29),t.qZA(),t.TgZ(54,"div",59)(55,"label",60),t._uU(56,"Location "),t.qZA(),t._UZ(57,"input",61),t.qZA(),t.TgZ(58,"div",59)(59,"label",62),t._uU(60,"Website"),t.qZA(),t._UZ(61,"input",63),t.qZA(),t.TgZ(62,"div",64)(63,"label",65),t._uU(64,"Bio (100 words max)"),t.qZA(),t.TgZ(65,"textarea",66),t._uU(66,"            "),t.qZA(),t.YNc(67,ce,2,0,"small",29),t.qZA()(),t.BQk()),2&c){const l=t.oxw(),_=t.MAs(1);t.xp6(19),t.Q6J("ngIf",l.title&&l.title.invalid&&(l.title.touched||_.submitted)),t.xp6(8),t.Q6J("ngIf",l.phone&&l.phone.invalid&&(l.phone.touched||_.submitted)),t.xp6(9),t.Q6J("ngIf",l.email&&l.email.invalid&&(l.email.touched||_.submitted)),t.xp6(9),t.Q6J("ngIf",!(null!=l.firstname&&l.firstname.value)&&_.submitted||l.firstname&&l.firstname.invalid&&(l.firstname.touched||_.submitted)),t.xp6(8),t.Q6J("ngIf",!(null!=l.lastname&&l.lastname.value)&&_.submitted||l.lastname&&l.lastname.invalid&&(l.lastname.touched||_.submitted)),t.xp6(14),t.Q6J("ngIf",l.about&&l.about.value&&l.about.value.length>100)}}function _e(c,h){1&c&&(t.TgZ(0,"button",70)(1,"div",71)(2,"span",72),t._uU(3,"."),t.qZA()(),t._uU(4," Loading... "),t.qZA()),2&c&&t.Q6J("disabled",!0)}function de(c,h){1&c&&(t.TgZ(0,"button",73),t._uU(1,"Update"),t.qZA())}const ue=function(c){return{"no-image":c}};let me=(()=>{const h=class{constructor(_,f,g,Z,F,X,ee){this._fb=_,this._activeModal=f,this._itemService=g,this._snackbarService=Z,this.authService=F,this._nodeService=X,this._profileServiceV2=ee,this.updatedDetails=new t.vpe,this.entityTypes=[{id:1,type:"person",name:"Person"},{id:2,type:"company",name:"Company"},{id:3,type:"student",name:"Student"}],this.jobTitleList=["Chief Executive Officer","Chief Operating Officer","Chief Financial Officer","Chief Technology Officer","Chief Information Officer","Chief Marketing Officer","Human Resources Director","Vice President of Sales","Vice President of Marketing","Vice President of Operations","Vice President of Finance","Product Manager","Project Manager","Software Engineer","Marketing Manager","Sales Manager","Business Development Manager","Accountant","Data Analyst","Customer Service Representative","Others"].map(ne=>({type:ne,name:ne})),this.loading=!1,this.isUploading=!1,this.isUserNameValid=!1,this.profileImgSrc="",this.userDetailsExist=!1,this.invalidEmailMessage="Please enter valid email.",this.updateProfileForm=this._fb.group({avatar:new d.NI(""),type:new d.NI("",[d.kI.required,d.kI.pattern("[a-zA-Z ]*"),P.R.notOnlySpaces()]),username:new d.NI("",[d.kI.required,d.kI.pattern("^(?!.*[_-]{2})(?![_-])[a-zA-Z0-9_-]{2,20}(?<![_-])$"),P.R.notOnlySpaces()]),email:new d.NI("",[d.kI.required,d.kI.email,d.kI.pattern(/.+@.+\..+/)]),title:new d.NI(""),jobtitle:new d.NI(""),company_name:new d.NI(""),firstname:new d.NI("",d.kI.required),lastname:new d.NI("",d.kI.required),about:["",d.kI.maxLength(100)],address:new d.NI(""),website:new d.NI(""),phone:new d.NI(0,[d.kI.maxLength(15),d.kI.minLength(7),d.kI.min(0),d.kI.pattern("[+0-9 ]{7,17}"),d.kI.required])});const te=this.authService.loadFromLocalStorage();this.entityId=te?.entityId,this.userId=te?.theUserId}get firstname(){return this.updateProfileForm.get("firstname")}get phone(){return this.updateProfileForm.get("phone")}get company_name(){return this.updateProfileForm.get("company_name")}get jobtitle(){return this.updateProfileForm.get("jobtitle")}get title(){return this.updateProfileForm.get("title")}get email(){return this.updateProfileForm.get("email")}get lastname(){return this.updateProfileForm.get("lastname")}get username(){return this.updateProfileForm.get("username")}get about(){return this.updateProfileForm.get("about")}ngOnInit(){this.loadUserDetails(),this.initializeFormValues()}loadUserDetails(){const _=this.authService.loadFromLocalStorage();this.userProfile=_.userConcept,this.profileImageSubs=this._profileServiceV2.profileImageObs$.subscribe(f=>{this.profileImage=f}),this.setUserProfile()}setUserProfile(){const _=this.currentUser;_&&(this.userDetailsExist=!0,this.profileImgSrc=_?.avatar,this.updateProfileForm.patchValue({avatar:this.profileImgSrc,..._}),this.updateProfileForm.get("email")?.value?this.updateProfileForm.get("email")?.disable():this.updateProfileForm.get("email")?.enable(),this.updateProfileForm.get("username")?.value?this.updateProfileForm.get("username")?.disable():this.updateProfileForm.get("username")?.enable())}initializeFormValues(){this.updateProfileForm.get("type")?.valueChanges.subscribe(_=>{this.toggleFormValidators("company"===_)})}toggleFormValidators(_){const f=this.updateProfileForm.get("firstname"),g=this.updateProfileForm.get("lastname"),Z=this.updateProfileForm.get("company_name");_?(f?.setValidators([d.kI.required,P.R.notOnlySpaces()]),g?.setValidators([d.kI.required,P.R.notOnlySpaces()]),Z?.setValidators([d.kI.required,P.R.notOnlySpaces()])):(f?.clearValidators(),g?.clearValidators(),Z?.clearValidators()),f?.updateValueAndValidity(),g?.updateValueAndValidity(),Z?.updateValueAndValidity()}checkUsernameExistence(_){var f=this;return(0,v.Z)(function*(){try{const g=yield f._nodeService.username(_?.toLowerCase()).toPromise();f.isUserNameValid=!g?.data?.username,f.isUserNameValid||(f.invalidUsernameMessage="The username already exists",f._snackbarService.openSnackBar("Username already exists","warning"))}catch(g){console.error("Error checking username",g)}})()}handleButtonClick(){var _=this;return(0,v.Z)(function*(){if(!_.profileImgSrc)return void _._snackbarService.openSnackBar("Please upload profile image","warning");if(_.updateProfileForm.invalid||!_.profileImgSrc)return void _.scrollToFirstInvalidControl();_.currentUser?.username||(yield _.checkUsernameExistence(_.updateProfileForm.get("username")?.value));const f=_.updateProfileForm.getRawValue();f.username=f.username.toLowerCase(),_.loading=!0;try{f.profile_updated_boomconsole=!0,f.avatar=_.profileImgSrc,Object.keys(f).forEach(g=>{(""===f[g]||void 0===f[g])&&delete f[g]}),yield _._profileServiceV2.updateProfileDetails(f,_.entityId,_.userId,_.currentUser?.cover_image||_.currentUser?.cover_img),_.loading=!1,_._snackbarService.openSnackBar("Profile updated successfully","success"),_.updatedDetails.emit(),_._activeModal.close()}catch{_._snackbarService.openSnackBar("Error updating profile","warning")}})()}scrollToFirstInvalidControl(){const _=this.formControls.find(f=>f.nativeElement.classList.contains("ng-invalid"));_?.nativeElement.scrollIntoView({behavior:"smooth",block:"center"}),_?.nativeElement.focus()}updateImage(_){if(_.target.files&&_.target.files[0]){const f=_.target.files[0],g=new FormData;g.append("image",f),this.uploadImage(g)}}uploadImage(_){this.isUploading=!0,this._itemService.uploadNewImage(_).subscribe({next:f=>{this.profileImgSrc=f.data,this.profileImage=this.profileImgSrc,this._snackbarService.openSnackBar("Profile image updated","success"),this.isUploading=!1},error:()=>{this._snackbarService.openSnackBar("Error uploading profile image","warning"),this.isUploading=!1}})}ngOnDestroy(){this.profileImageSubs.unsubscribe()}};let c=h;return h.\u0275fac=function(f){return new(f||h)(t.Y36(d.qu),t.Y36(C.Kz),t.Y36(T.e),t.Y36(e.o),t.Y36(A.e),t.Y36(O.s),t.Y36(S.S))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-edit-profile"]],viewQuery:function(f,g){if(1&f&&t.Gf(N,5),2&f){let Z;t.iGM(Z=t.CRH())&&(g.formControls=Z)}},inputs:{currentUser:"currentUser"},outputs:{updatedDetails:"updatedDetails"},decls:52,vars:16,consts:[[3,"formGroup","ngSubmit"],["createMenuFormId","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","loading",4,"ngIf"],[1,"edit_profile_head"],[1,"profile_cover"],["alt","",3,"src",4,"ngIf","ngIfElse"],["noCover",""],[1,"row"],[1,"col-md-9","d-flex","gap-4"],[1,"profile-image",3,"ngClass"],[4,"ngIf"],[1,"edit-image","edit-profile-image"],["title","Update profile image","for","profile-image"],[1,"material-symbols-outlined"],["id","profile-image","type","file","accept",".png, .jpg, .jpeg",1,"d-none",3,"change"],[1,"scroller"],[1,"col-md-6"],["for","type"],[1,"text-danger"],["id","type","required","","formControlName","type",1,"form-select","py-2","shadow-none"],["formControl",""],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","username"],["type","text","placeholder","username","id","username","formControlName","username",1,"form-control","shadow-none","p-2"],["class","err_msg",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary btn-loading",3,"disabled",4,"ngIf","ngIfElse"],["notLoading",""],[1,"loading"],[1,"loader"],["alt","",3,"src"],["alt","Display Profile Image",1,"img-fluid",3,"src"],[3,"value"],[1,"err_msg"],[1,"col-md-12"],["for","fullname"],["type","text","placeholder","Company Name","id","fullname","formControlName","company_name",1,"form-control","shadow-none","p-2"],["for","jobtitle"],["id","jobtitle","required","","formControlName","jobtitle",1,"form-select","py-2","shadow-none"],["for","title"],["id","title","required","","formControlName","title",1,"form-select","py-2","shadow-none"],["value","mr"],["value","mrs"],["value","miss"],["value","others"],["for","email"],["type","email","placeholder","Enter email","formControlName","email",1,"form-control","shadow-none","p-2"],["for","phone"],["type","text","placeholder","Enter phone number","formControlName","phone",1,"form-control","shadow-none","p-2"],["for","firstname"],["type","text","placeholder","First Name","id","firstname","formControlName","firstname",1,"form-control","shadow-none","p-2"],["for","adminlastname"],["type","text","placeholder","Last Name","id","lastname","formControlName","lastname",1,"form-control","shadow-none","p-2"],[1,"col-md-6","pt-3"],["for","location"],["type","text","placeholder","Your location","formControlName","address",1,"form-control","shadow-none","p-2"],["for","website"],["type","text","placeholder","https://","formControlName","website",1,"form-control","shadow-none","p-2"],[1,"col-md-12","pt-3"],["for","bio"],["type","text","placeholder","Tell us about yourself (100 words max).","formControlName","about","appWordCountValidator","",1,"form-control","shadow-none","p-2"],["type","text","placeholder","First name","formControlName","firstname",1,"form-control","shadow-none","p-2"],["for","lastname"],["type","text","placeholder","Last name","formControlName","lastname",1,"form-control","shadow-none","p-2"],["type","button",1,"btn","btn-primary","btn-loading",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary"]],template:function(f,g){if(1&f&&(t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){return g.handleButtonClick()}),t.TgZ(2,"div",2)(3,"h4",3),t._uU(4,"Edit profile"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return g._activeModal.dismiss()}),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,M,2,0,"div",6),t.TgZ(8,"div",7)(9,"div",8),t.YNc(10,L,1,1,"img",9),t.YNc(11,Q,1,1,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(13,"div",11)(14,"div",12)(15,"div",13),t.YNc(16,B,2,0,"div",6),t.YNc(17,q,2,1,"ng-container",14),t.TgZ(18,"div",15)(19,"label",16)(20,"span",17),t._uU(21," edit_square "),t.qZA()(),t.TgZ(22,"input",18),t.NdJ("change",function(F){return g.updateImage(F)}),t.qZA()()()()()(),t.TgZ(23,"div",19)(24,"div",11)(25,"div",20)(26,"label",21),t._uU(27,"Type "),t.TgZ(28,"span",22),t._uU(29,"*"),t.qZA()(),t.TgZ(30,"select",23,24)(32,"option",25),t._uU(33,"--- Select ---"),t.qZA(),t.YNc(34,U,2,2,"option",26),t.qZA()(),t.TgZ(35,"div",20)(36,"label",27),t._uU(37,"Username "),t.TgZ(38,"span",22),t._uU(39,"*"),t.qZA()(),t._UZ(40,"input",28,24),t.YNc(42,ae,2,0,"small",29),t.YNc(43,D,2,1,"small",29),t.qZA()(),t.YNc(44,z,88,9,"ng-container",14),t.YNc(45,pe,68,6,"ng-container",14),t.qZA()(),t.TgZ(46,"div",30)(47,"button",31),t.NdJ("click",function(){return g._activeModal.close()}),t._uU(48," Close "),t.qZA(),t.YNc(49,_e,5,1,"button",32),t.YNc(50,de,2,0,"ng-template",null,33,t.W1O),t.qZA()()),2&f){const Z=t.MAs(1),F=t.MAs(12),X=t.MAs(51);t.Q6J("formGroup",g.updateProfileForm),t.xp6(7),t.Q6J("ngIf",g.loading),t.xp6(3),t.Q6J("ngIf",null==g.currentUser?null:g.currentUser.cover_image)("ngIfElse",F),t.xp6(5),t.Q6J("ngClass",t.VKq(14,ue,!g.profileImage)),t.xp6(1),t.Q6J("ngIf",g.isUploading),t.xp6(1),t.Q6J("ngIf",g.profileImage),t.xp6(17),t.Q6J("ngForOf",g.entityTypes),t.xp6(8),t.Q6J("ngIf",g.username&&g.username.invalid&&(g.username.touched||Z.submitted)),t.xp6(1),t.Q6J("ngIf",g.username&&g.username.valid&&g.isUserNameValid),t.xp6(1),t.Q6J("ngIf","company"===(null==g.updateProfileForm||null==g.updateProfileForm.value?null:g.updateProfileForm.value.type)),t.xp6(1),t.Q6J("ngIf","person"===(null==g.updateProfileForm||null==g.updateProfileForm.value?null:g.updateProfileForm.value.type)||"student"===(null==g.updateProfileForm||null==g.updateProfileForm.value?null:g.updateProfileForm.value.type)),t.xp6(4),t.Q6J("ngIf",g.loading)("ngIfElse",X)}},dependencies:[E.mk,E.sg,E.O5,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,d.Q7,d.sg,d.u],styles:[".profile_cover[_ngcontent-%COMP%]{max-height:100px;overflow:hidden;position:relative}.scroller[_ngcontent-%COMP%]{position:relative;height:260px;overflow:scroll}.edit_profile_head[_ngcontent-%COMP%]{position:relative}.edit_profile_head[_ngcontent-%COMP%]   .profile_picture[_ngcontent-%COMP%]{width:120px;height:120px;position:absolute;left:20px;bottom:-30%;border:5px solid #fff;background-color:#fff;overflow:hidden;border-radius:5px}.edit_profile_head[_ngcontent-%COMP%]   .profile_picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:auto;max-width:initial}.edit_form_row[_ngcontent-%COMP%]{margin-top:80px}.edit-profile-image[_ngcontent-%COMP%]{display:none}.profile-cover[_ngcontent-%COMP%]{height:240px;overflow:hidden;object-fit:cover;position:relative;border:1px solid #dfdfdf;box-shadow:0 1px 2px #dfdfdf;text-align:center;background:#fff}.profile-cover[_ngcontent-%COMP%]:hover   .edit-cover[_ngcontent-%COMP%]{display:block}.profile-image[_ngcontent-%COMP%]{margin-top:-110px;margin-left:20px;position:relative;border-radius:1rem;border:1px solid #ededed;background-color:#fff;height:150px;width:150px}.profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:1rem;position:relative;background-color:#fff;height:150px;width:150px;object-fit:cover}.profile-image[_ngcontent-%COMP%]   .edit-profile-image[_ngcontent-%COMP%]{display:block}.no-image[_ngcontent-%COMP%]{border:2px solid red}.edit-image[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1rem;background-color:#eee;border:none;outline:none;border-radius:50px;width:40px;height:40px;display:flex;justify-content:center;align-items:center;cursor:pointer}.edit-image[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:-4px}"]}),c})()},140:(Y,I,p)=>{p.r(I),p.d(I,{UserProfileModule:()=>tt});var v=p(6895),t=p(4006),d=p(9446),P=p(7518),C=p(5861),T=p(2851),e=p(4650),A=p(8154),O=p(384),S=p(8180),E=p(1905);function N(n,s){1&n&&(e.ynx(0),e.TgZ(1,"div",26),e._UZ(2,"div",27),e.qZA(),e.BQk())}function M(n,s){1&n&&(e.TgZ(0,"div",26),e._UZ(1,"span",27),e.qZA())}function L(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"img",28),e.BQk()),2&n){const a=e.oxw();e.xp6(1),e.Q6J("src",(null==a.profile?null:a.profile.cover_image)||(null==a.profile?null:a.profile.cover_img),e.LSH)}}function Q(n,s){1&n&&e._UZ(0,"img",29)}function B(n,s){if(1&n){const a=e.EpF();e.TgZ(0,"div",30)(1,"label",31)(2,"span",5),e._uU(3," edit_square "),e.qZA()(),e.TgZ(4,"input",32),e.NdJ("change",function(o){e.CHM(a);const r=e.oxw();return e.KtG(r.updateImage(o,"coverImage"))}),e.qZA()()}}function q(n,s){1&n&&(e.TgZ(0,"div",26),e._UZ(1,"span",27),e.qZA())}function U(n,s){if(1&n&&e._UZ(0,"img",33),2&n){const a=e.oxw();e.Q6J("src",a.profileImage,e.LSH)("alt",null==a.profile?null:a.profile.first_name)}}function ae(n,s){if(1&n){const a=e.EpF();e.TgZ(0,"div",34)(1,"label",35)(2,"span",5),e._uU(3," edit_square "),e.qZA()(),e.TgZ(4,"input",36),e.NdJ("change",function(o){e.CHM(a);const r=e.oxw();return e.KtG(r.updateImage(o,"profileImage"))}),e.qZA()()}}function D(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const a=e.oxw(2);e.xp6(1),e.hij(" ",a.profile.fullname," ")}}function k(n,s){if(1&n&&(e.ynx(0),e.YNc(1,D,2,1,"ng-container",8),e.BQk()),2&n){const a=e.oxw(),i=e.MAs(25);e.xp6(1),e.Q6J("ngIf","company"===(null==a.profile?null:a.profile.type))("ngIfElse",i)}}function j(n,s){if(1&n&&e._uU(0),2&n){const a=e.oxw();e.AsE(" ",null==a.profile?null:a.profile.firstname," ",null==a.profile?null:a.profile.lastname," ")}}function W(n,s){if(1&n){const a=e.EpF();e.ynx(0),e.TgZ(1,"button",37),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.editProfile())}),e._uU(2," Edit Profile "),e.TgZ(3,"span",5),e._uU(4," edit_square "),e.qZA()(),e.BQk()}}function R(n,s){1&n&&(e.TgZ(0,"p"),e._uU(1,"Looking for data..."),e.qZA())}function K(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3,"Company Name:"),e.qZA(),e._uU(4),e.qZA()()),2&n){const a=e.oxw();e.xp6(4),e.hij(" ",null==a.profile?null:a.profile.fullname," ")}}function V(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3,"Admin Name:"),e.qZA(),e._uU(4),e.qZA()()),2&n){const a=e.oxw();e.xp6(4),e.AsE("",null==a.profile?null:a.profile.firstname," ",null==a.profile?null:a.profile.lastname," ")}}function w(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3,"Name:"),e.qZA(),e._uU(4),e.qZA()()),2&n){const a=e.oxw();e.xp6(4),e.AsE("",null==a.profile?null:a.profile.firstname," ",null==a.profile?null:a.profile.lastname," ")}}function J(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3,"Phone:"),e.qZA(),e._uU(4),e.qZA()()),2&n){const a=e.oxw(2);e.xp6(4),e.hij(" ",null==a.profile?null:a.profile.phone,"")}}function oe(n,s){if(1&n&&(e.ynx(0),e.YNc(1,J,5,1,"tr",3),e.BQk()),2&n){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.profile?null:a.profile.phone)}}function z(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3,"Email:"),e.qZA(),e._uU(4),e.qZA()()),2&n){const a=e.oxw(2);e.xp6(4),e.hij(" ",null==a.profile?null:a.profile.email,"")}}function G(n,s){if(1&n&&(e.ynx(0),e.YNc(1,z,5,1,"tr",3),e.BQk()),2&n){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.profile?null:a.profile.email)}}function H(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3,"Location:"),e.qZA(),e._uU(4),e.qZA()()),2&n){const a=e.oxw(2);e.xp6(4),e.hij(" ",null==a.profile?null:a.profile.address,"")}}function $(n,s){if(1&n&&(e.ynx(0),e.YNc(1,H,5,1,"tr",3),e.BQk()),2&n){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.profile?null:a.profile.address)}}function se(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3,"Website:"),e.qZA(),e.TgZ(4,"a",38),e._uU(5),e.qZA()()()),2&n){const a=e.oxw(2);e.xp6(4),e.Q6J("href",a.getCorrectUrl(null==a.profile?null:a.profile.website),e.LSH),e.xp6(1),e.hij(" ",null==a.profile?null:a.profile.website," ")}}function le(n,s){if(1&n&&(e.ynx(0),e.YNc(1,se,6,2,"tr",3),e.BQk()),2&n){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.profile?null:a.profile.website)}}function ce(n,s){1&n&&(e.TgZ(0,"button",45)(1,"div",46)(2,"span",47),e._uU(3,"."),e.qZA()(),e._uU(4," Cancelling... "),e.qZA()),2&n&&e.Q6J("disabled",!0)}function pe(n,s){if(1&n){const a=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(a);const o=e.oxw(4);return e.KtG(o.cancelMyPlan())}),e._uU(1," Cancel Plan "),e.qZA()}}function _e(n,s){if(1&n&&(e.ynx(0),e.YNc(1,ce,5,1,"ng-template",null,43,e.W1O),e.YNc(3,pe,2,0,"button",44),e.BQk()),2&n){const a=e.MAs(2),i=e.oxw(3);e.xp6(3),e.Q6J("ngIf",!i.isPlanCancelling)("ngIfElse",a)}}function de(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",40)(2,"p")(3,"strong"),e._uU(4,"Plan: "),e.qZA(),e._uU(5),e.TgZ(6,"small"),e._uU(7),e.qZA()(),e.TgZ(8,"p")(9,"strong"),e._uU(10,"Expired on: "),e.qZA(),e._uU(11),e.ALo(12,"date"),e.qZA()(),e.TgZ(13,"div",41),e.YNc(14,_e,4,2,"ng-container",3),e.TgZ(15,"button",42),e._uU(16," Upgrade Plan "),e.qZA()(),e.BQk()),2&n){const a=s.ngIf,i=e.oxw(2);e.xp6(5),e.hij("",null==a?null:a.name," "),e.xp6(2),e.hij("(",a.duration,")"),e.xp6(4),e.hij("",e.xi3(12,4,a.validTill,"medium")," "),e.xp6(3),e.Q6J("ngIf","one_time_payment"!==i.mySubscriptionId&&"direct_discount"!==i.mySubscriptionId)}}function ue(n,s){1&n&&(e.TgZ(0,"div",49)(1,"p"),e._uU(2,"You haven't subscribed a plan yet."),e.qZA(),e.TgZ(3,"button",50),e._uU(4," Choose Plan "),e.qZA()())}function me(n,s){if(1&n&&(e.TgZ(0,"div",21)(1,"h4"),e._uU(2,"Subscription"),e.qZA(),e.YNc(3,de,17,7,"ng-container",8),e.YNc(4,ue,5,0,"ng-template",null,39,e.W1O),e.qZA()),2&n){const a=e.MAs(5),i=e.oxw();e.xp6(3),e.Q6J("ngIf",(null==i.subscribedPlan?null:i.subscribedPlan.name)&&i.subscribedPlan)("ngIfElse",a)}}let c=(()=>{const s=class{constructor(i,o,r,m,u,b,x){this.itemService=i,this.authService=o,this._snapshot=r,this.modalService=m,this._snackbarService=u,this.location=b,this._profileServiceV2=x,this.coverImgSrc="",this.profileImgSrc="",this.updateImageType="",this.isUploading=!1,this.isCoverUploading=!1,this.subscription={},this.subscribedPlan={},this.isPlanCancelling=!1,this.mySubscriptionId="",this.profile={},this.isLoading=!1}ngOnInit(){var i=this;this.isLoading=!0,this._snapshot.params.subscribe(function(){var o=(0,C.Z)(function*(r){i.current_user=Number(r.id);const m=i.authService.loadFromLocalStorage();i.loggedin_user=Number(m?.userConcept),i.userId=m?.theUserId,i.gender_title=m.title||"mr",i.current_user==i.loggedin_user?(i.entityId=m.entityId,yield i.initializeProfileDetails()):(yield i.GetEntityFromConceptId(),i.initializeProfileDetails())});return function(r){return o.apply(this,arguments)}}()),this.getMySubscriptionPlan()}GetEntityFromConceptId(){var i=this;return(0,C.Z)(function*(){const o=yield i._profileServiceV2.getEntityId(i.current_user);i.entityId=o})()}getCorrectUrl(i){return i?i.startsWith("http://")||i.startsWith("https://")?i:"https://"+i:""}initializeProfileDetails(){var i=this;return(0,C.Z)(function*(){const o=yield i._profileServiceV2.fetchUserDetails(i.entityId);i.profileImageSubs=i._profileServiceV2.profileImageObs$.subscribe({next:r=>{i.profileImage=r}}),i.userProfileSub=i._profileServiceV2.userProfileObs$.subscribe({next:r=>{r?.bio&&(r.about=r?.bio,delete r?.bio),i.profile=r}}),o&&(i.isLoading=!1)})()}cancelMyPlan(){var i=this;return(0,C.Z)(function*(){if(window.confirm("Are you sure you want to canel your Plan?")){i.isPlanCancelling=!0;const m=i.mySubscriptionDetails?.subscriptions?.[0]?.subscriptionId,u=new FormData;u.append("subscriptionId",m),i.itemService.cancelMySubscription(u).subscribe({next:()=>{i.isPlanCancelling=!1,i._snackbarService.openSnackBar("Your plan is cancelled successfully!","success"),i.subscribedPlan={},i.getMySubscriptionPlan()},error:()=>{i.isPlanCancelling=!1,i._snackbarService.openSnackBar("Your plan could not cancelled currently!","error")}})}})()}getMySubscriptionPlan(){this.itemService.getMySubscription().subscribe({next:i=>{this.mySubscriptionDetails=i,this.mySubscriptionId=i?.subscriptions?.[0]?.subscriptionId,this.mySubscriptionDetails?.subscriptions?.length&&this.mySubscriptionDetails?.pricings?.length&&this.getMyPlanDetails(this.mySubscriptionDetails?.pricings?.[0]?.productId)}})}getMyPlanDetails(i){this.itemService.getUserReports([i]).subscribe({next:o=>{this.subscribedPlan={name:o?.[0]?.data?.internal_product?.name,duration:this.mySubscriptionDetails?.pricings?.[0]?.duration,validTill:this.mySubscriptionDetails?.subscriptions?.[0]?.validTill}}})}editProfile(){this.modalService.open(T.z,{size:"lg"}).componentInstance.currentUser=this.profile,this.isLoading=!1}listPayments(){const i=localStorage.getItem("subscription");if(i){const o=JSON.parse(i);this.subscription={plan:o.plan,expDate:"Never"===o.expDate?"Never":new Date(o.expDate).toLocaleString()}}}updateImage(i,o){if(this.updateImageType=o,i.target.files&&i.target.files[0]){const r=i.target.files[0];if(r&&r.size>2097152)return this._snackbarService.openSnackBar("File size exceeds the limit (2MB)","warning"),void(i.target.value="");const m=new FormData;m.append("image",r);const u=new FileReader;u.onload=()=>{"coverImage"===this.updateImageType?this.profile.cover_image=u.result:"profileImage"===this.updateImageType&&(this.profile.avatar=u.result)},u.readAsDataURL(r),this.uploadImage(m)}}uploadImage(i){var o=this;return(0,C.Z)(function*(){var r;"coverImage"===o.updateImageType?o.isCoverUploading=!0:"profileImage"===o.updateImageType&&(o.isUploading=!0),o.itemService.uploadNewImage(i).subscribe({next:(r=(0,C.Z)(function*(m){const u=m.data;if("coverImage"===o.updateImageType&&(o.profile.cover_image=u),"profileImage"===o.updateImageType&&(o.profile.avatar=u),"true"!==o.profile?.isUpdated&&!0!==o.profile?.isUpdated){o.profile.profile_updated_boomconsole=!0;const b=Object.fromEntries(Object.entries(o.profile).filter(([x,y])=>void 0!==y));return yield o._profileServiceV2.updateProfileDetails(b,o.entityId,o.userId),o.isUploading=!1,o.isCoverUploading=!1,o.profile.isUpdated=!0,void("coverImage"==o.updateImageType?(o._snackbarService.openSnackBar("Cover image updated successfully!","success"),o.profile.cover_image=u):o._snackbarService.openSnackBar("Profile image updated successfully!","success"))}o.updateProfile(u,o.updateImageType)}),function(u){return r.apply(this,arguments)}),error:r=>{console.error(r),400===r.status?(o.isUploading=!1,o.isCoverUploading=!1,o._snackbarService.openSnackBar("File size exceeds the limit (2MB)","warning")):(o.isUploading=!1,o.isCoverUploading=!1,o._snackbarService.openSnackBar("An error occured while uploading. please try again later","warning"))}})})()}updateProfile(i,o){var r=this;return(0,C.Z)(function*(){"true"==r.profile?.isUpdated&&("profileImage"===o?r._profileServiceV2.updateProfileImage(i):r._profileServiceV2.updateUserDetails(r.profile),(yield r._profileServiceV2.updateImage(r.entityId,r.userId,i,o))?.id&&(r.isUploading=!1,r.isCoverUploading=!1,r._snackbarService.openSnackBar("coverImage"==r.updateImageType?"Cover image updated":"Profile image updated","success")))})()}goBack(){this.location.back()}ngOnDestroy(){this.profileImageSubs&&this.profileImageSubs.unsubscribe(),this.userProfileSub&&this.userProfileSub.unsubscribe()}};let n=s;return s.\u0275fac=function(o){return new(o||s)(e.Y36(A.e),e.Y36(O.e),e.Y36(P.gz),e.Y36(d.FF),e.Y36(S.o),e.Y36(v.Ye),e.Y36(E.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-public-profile"]],decls:56,vars:20,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[4,"ngIf"],["tabindex","",1,"d-flex","align-items-center","cursor-pointer","gap-2","p-2","back-btn",3,"click","keyup"],[1,"material-symbols-outlined"],[1,"profile-cover"],["class","loading",4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultCover",""],["class","edit-image edit-cover",4,"ngIf"],[1,"col-md-9","d-flex","gap-4"],[1,"profile-image"],["width","85px",3,"src","alt",4,"ngIf"],["class","edit-image edit-profile-image",4,"ngIf"],[1,"profile-bio"],[1,"d-flex","align-items-center","mt-2"],["userName",""],[1,"col-md-3","text-right"],[1,"row","mt-5",2,"position","relative","display","flex","align-items","start"],[1,"col-md-3",2,"position","sticky","top","10px"],[1,"profile-card","mb-3"],[1,"table"],["noAboutData",""],["class","profile-card mb-3",4,"ngIf"],[1,"col-md-9"],[1,"loading"],[1,"loader"],["alt","Personal cover image",1,"img-fluid",3,"src"],["src","./assets/home-background.jpg","alt","orage gradient image"],[1,"edit-image","edit-cover"],["title","Update cover image","for","cover_image"],["id","cover_image","type","file","accept",".png, .jpg, .jpeg",1,"d-none",3,"change"],["width","85px",3,"src","alt"],[1,"edit-image","edit-profile-image"],["title","Update profile image","for","profile_image"],["id","profile_image","type","file","accept",".png, .jpg, .jpeg",1,"d-none",3,"change"],[1,"btn","btn-outline-primary","btn-edit-profile",3,"click"],["target","_blank",1,"text-break",3,"href"],["subscribePlan",""],[1,"my-4"],[1,"d-flex","gap-2","justify-content-between"],["type","button","routerLink","/subscription",1,"btn","btn-primary","px-3"],["planCancelling",""],["type","button","class","btn btn-primary px-3",3,"click",4,"ngIf","ngIfElse"],[1,"btn","btn-primary","px-3","btn-disabled",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","button",1,"btn","btn-primary","px-3",3,"click"],[1,"py-5","text-center"],["type","button","routerLink","/subscription",1,"btn","btn-primary"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,N,3,0,"ng-container",3),e.TgZ(4,"div",4),e.NdJ("click",function(){return r.goBack()})("keyup",function(){return r.goBack()}),e.TgZ(5,"span",5),e._uU(6," arrow_back "),e.qZA(),e.TgZ(7,"span"),e._uU(8,"Go back"),e.qZA()(),e.TgZ(9,"div",6),e.YNc(10,M,2,0,"div",7),e.YNc(11,L,2,1,"ng-container",8),e.YNc(12,Q,1,0,"ng-template",null,9,e.W1O),e.YNc(14,B,5,0,"div",10),e.qZA()()(),e.TgZ(15,"div",1)(16,"div",11)(17,"div",12),e.YNc(18,q,2,0,"div",7),e.YNc(19,U,1,2,"img",13),e.YNc(20,ae,5,0,"div",14),e.qZA(),e.TgZ(21,"div",15)(22,"h3",16),e.YNc(23,k,2,2,"ng-container",3),e.YNc(24,j,1,2,"ng-template",null,17,e.W1O),e.qZA(),e.TgZ(26,"p"),e._uU(27),e.qZA()()(),e.TgZ(28,"div",18),e.YNc(29,W,5,0,"ng-container",3),e.qZA()(),e.TgZ(30,"div",19)(31,"div",20)(32,"div",21)(33,"h4"),e._uU(34,"About"),e.qZA(),e.TgZ(35,"table",22),e.YNc(36,R,2,0,"ng-template",null,23,e.W1O),e.TgZ(38,"tr")(39,"td")(40,"strong"),e._uU(41,"Username:"),e.qZA(),e._uU(42),e.qZA()(),e.YNc(43,K,5,1,"tr",3),e.YNc(44,V,5,2,"tr",3),e.YNc(45,w,5,2,"tr",3),e.YNc(46,oe,2,1,"ng-container",3),e.YNc(47,G,2,1,"ng-container",3),e.YNc(48,$,2,1,"ng-container",3),e.YNc(49,le,2,1,"ng-container",3),e.qZA()(),e.YNc(50,me,6,2,"div",24),e.qZA(),e.TgZ(51,"div",25)(52,"h4"),e._uU(53,"Shared Posts"),e.qZA(),e.TgZ(54,"p"),e._uU(55,"No data available at the moment."),e.qZA()()()()),2&o){const m=e.MAs(13);e.xp6(3),e.Q6J("ngIf",r.isLoading),e.xp6(7),e.Q6J("ngIf",r.isCoverUploading),e.xp6(1),e.Q6J("ngIf",(null==r.profile?null:r.profile.cover_image)||(null==r.profile?null:r.profile.cover_img))("ngIfElse",m),e.xp6(3),e.Q6J("ngIf",r.loggedin_user===r.current_user),e.xp6(4),e.Q6J("ngIf",r.isUploading),e.xp6(1),e.Q6J("ngIf",!!r.profileImage),e.xp6(1),e.Q6J("ngIf",r.loggedin_user===r.current_user),e.xp6(3),e.Q6J("ngIf",r.profile),e.xp6(4),e.Oqu(null==r.profile?null:r.profile.about),e.xp6(2),e.Q6J("ngIf",r.loggedin_user===r.current_user),e.xp6(13),e.Oqu(null==r.profile?null:r.profile.username),e.xp6(1),e.Q6J("ngIf",null==r.profile?null:r.profile.fullname),e.xp6(1),e.Q6J("ngIf",null==r.profile?null:r.profile.fullname),e.xp6(1),e.Q6J("ngIf",!(null!=r.profile&&r.profile.fullname)),e.xp6(1),e.Q6J("ngIf",r.loggedin_user===r.current_user),e.xp6(1),e.Q6J("ngIf",r.loggedin_user===r.current_user),e.xp6(1),e.Q6J("ngIf",r.loggedin_user===r.current_user),e.xp6(1),e.Q6J("ngIf",r.loggedin_user===r.current_user),e.xp6(1),e.Q6J("ngIf",r.loggedin_user===r.current_user)}},dependencies:[v.O5,P.rH,v.uU],styles:['.title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0}@media only screen and (max-width: 600px){.plans[_ngcontent-%COMP%]{flex-direction:column}.buttons[_ngcontent-%COMP%]{margin-top:10px}.card-payment[_ngcontent-%COMP%]{padding:20px}.full[_ngcontent-%COMP%]{width:300px!important}.table[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{padding:0;display:inline-block}}@media only screen and (min-width: 600px){.flex[_ngcontent-%COMP%]{display:flex;flex-direction:row wrap;align-items:center}.flex.justify-space-between[_ngcontent-%COMP%]{justify-content:space-between}}.plans[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border:1px solid #8a959c;border-radius:10px;padding:10px;align-items:center;flex-wrap:wrap}.plans[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.plans[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.plans[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{border:none;font-size:16px;cursor:pointer;color:red;background:transparent}.plans[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]:hover{color:#055205;border-bottom:1px solid rgb(5,82,5)}.plans[_ngcontent-%COMP%]   .upgrade[_ngcontent-%COMP%]{border:none;font-size:16px;cursor:pointer;color:green;background:transparent}.plans[_ngcontent-%COMP%]   .upgrade[_ngcontent-%COMP%]:hover{color:#055205;border-bottom:1px solid rgb(5,82,5)}.field[_ngcontent-%COMP%]{margin-bottom:25px}.field.full[_ngcontent-%COMP%]{width:500px}.field.half[_ngcontent-%COMP%]{width:250px}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;text-transform:uppercase;font-size:12px;margin-bottom:8px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px;border-radius:6px;border:2px solid #e8ebed;display:block;font-size:14px;width:100%;box-sizing:border-box}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder{color:#e8ebed!important}.card-payment[_ngcontent-%COMP%]{background:#fff;border-radius:6px;box-sizing:border-box;box-shadow:0 24px 60px -1px #252c3624}.card-payment[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:50px}.card-payment[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-type[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-type[_ngcontent-%COMP%]   .types[_ngcontent-%COMP%]{margin:25px 0}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-type[_ngcontent-%COMP%]   .types[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{position:relative;background:#f2f4f7;border:2px solid #e8ebed;padding:25px;box-sizing:border-box;border-radius:6px;cursor:pointer;text-align:center;transition:all .5s ease}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-type[_ngcontent-%COMP%]   .types[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]:hover{border-color:#28333b}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-type[_ngcontent-%COMP%]   .types[_ngcontent-%COMP%]   .type.selected[_ngcontent-%COMP%]{border-color:#40b3ff;background:rgba(64,179,255,.1)}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-type[_ngcontent-%COMP%]   .types[_ngcontent-%COMP%]   .type.selected[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#40b3ff}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-type[_ngcontent-%COMP%]   .types[_ngcontent-%COMP%]   .type.selected[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#28333b}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-type[_ngcontent-%COMP%]   .types[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:48px;color:#8a959c}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-type[_ngcontent-%COMP%]   .types[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:10px;text-transform:uppercase;font-weight:600;letter-spacing:.5px;color:#8a959c}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{width:calc(50% - 25px)}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.card-payment[_ngcontent-%COMP%]   .card-body-payment[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .num[_ngcontent-%COMP%]{height:24px;width:24px;border-radius:50%;border:2px solid #40b3ff;display:flex;align-items:center;justify-content:center;text-align:center;margin-right:12px;font-size:12px}.button[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:600;font-size:12px;letter-spacing:.5px;padding:15px;border-radius:20px;cursor:pointer;transition:all .5s ease;background:transparent;border:2px solid transparent}.button.button-primary[_ngcontent-%COMP%]{background:#40b3ff;color:#fff}.button.button-primary[_ngcontent-%COMP%]:hover{background:#218fd9}.edit-cover[_ngcontent-%COMP%], .edit-profile-image[_ngcontent-%COMP%]{display:none}.profile-cover[_ngcontent-%COMP%]{height:240px;overflow:hidden;object-fit:cover;position:relative;border:1px solid #dfdfdf;box-shadow:0 1px 2px #dfdfdf;text-align:center;background:#fff}.profile-cover[_ngcontent-%COMP%]:hover   .edit-cover[_ngcontent-%COMP%]{display:block}.profile-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:100%}.profile-image[_ngcontent-%COMP%]{margin-top:-60px;margin-left:40px;position:relative;border-radius:1rem;border:1px solid #ededed;background-color:#fff;height:200px;width:200px}.profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:1rem;position:relative;background-color:#fff;height:200px;width:200px;object-fit:cover}.profile-image[_ngcontent-%COMP%]:hover   .edit-profile-image[_ngcontent-%COMP%]{display:block}.edit-image[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1rem;z-index:0;background-color:#eee;border:none;outline:none;border-radius:50px;width:48px;height:48px;display:flex;justify-content:center;align-items:center;cursor:pointer;opacity:.5}.edit-image[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:-4px}.edit-image[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover, .edit-image[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus{opacity:1}.profile-bio[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:27px;font-weight:700}.profile-bio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem}.profile-bio[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]{color:#0d6efd;margin-left:.25rem;font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 48}.btn-outline-primary.btn-edit-profile[_ngcontent-%COMP%]{position:relative;padding-right:50px}.btn-outline-primary.btn-edit-profile[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:absolute;right:10px;top:43%;transform:translateY(-50%)}.code-list[_ngcontent-%COMP%]{padding-left:0;max-height:340px;overflow-y:auto}.code-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.code-copy[_ngcontent-%COMP%]{background-color:#eee;border-radius:6px;display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem}.code-copy[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#666}.code-copy[_ngcontent-%COMP%]:hover, .code-copy[_ngcontent-%COMP%]:focus{background-color:#dedede}.code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover, .code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:focus{color:#d55b1e}.code-loading[_ngcontent-%COMP%]{margin-top:80px}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;line-height:1}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#aaa}.avatar-img[_ngcontent-%COMP%]{height:40px;min-width:40px;width:40px;object-fit:cover}.profile-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:1.25rem;position:relative}.profile-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px}.back-btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:1px solid #ccc;border-radius:4px;margin-bottom:2px}']}),n})();var h=p(7009);function l(n,s){1&n&&(e.TgZ(0,"small",20),e._uU(1," Please enter Old Password. "),e.qZA())}function _(n,s){1&n&&(e.TgZ(0,"small",20),e._uU(1," Password must be at least 5 characters long. "),e.qZA())}function f(n,s){1&n&&(e.TgZ(0,"small",20),e._uU(1," Confirm password doesnot match with new password. "),e.qZA())}function g(n,s){if(1&n&&(e.TgZ(0,"button",21),e._uU(1," Submit "),e.qZA()),2&n){const a=e.oxw();e.Q6J("disabled",!a.passwordsMatch())}}function Z(n,s){1&n&&(e.TgZ(0,"button",22)(1,"div",23)(2,"span",24),e._uU(3,"."),e.qZA()(),e._uU(4," Loading... "),e.qZA()),2&n&&e.Q6J("disabled",!0)}let F=(()=>{const s=class{get oldPassword(){return this.ChangePasswordForm.get("oldPassword")}get newPassword(){return this.ChangePasswordForm.get("newPassword")}get confirmPassword(){return this.ChangePasswordForm.get("confirmPassword")}constructor(i,o,r,m,u){this._compositionServices=i,this._auth=o,this._snackBar=r,this._snackbarService=m,this._router=u,this.showOldPassword=!1,this.showNewPassword=!1,this.showConfirmPassword=!1,this.notLoading=!0,this.isApiError=!1,this.errorMessage="",this.isApiSuccess=!1,this.successMessage="",this.the_email="",this.optNotActivated=!0,this.ChangePasswordForm=new t.cw({oldPassword:new t.NI("",[t.kI.required]),newPassword:new t.NI("",[t.kI.required,t.kI.minLength(5)]),confirmPassword:new t.NI("",[t.kI.required])});let b=this._auth.loadFromLocalStorage();this.the_email=b?.email}changePassword(){let i={email:this.the_email,oldPassword:this.ChangePasswordForm.value.oldPassword,newPassword:this.ChangePasswordForm.value.newPassword};console.log(i),this.ChangePasswordForm.valid&&(this.notLoading=!1,this._compositionServices.otpChangePassword(i).subscribe({next:o=>{this.isApiError=!o.success,this.isApiSuccess=o.success,o.success?(this.notLoading=!0,this.successMessage=o.message,this.optNotActivated=!0,this._snackbarService.openSnackBar(this.successMessage,"success"),this._auth.logout()):(this.notLoading=!0,this.errorMessage=o.message||"Could not change password",this._snackbarService.openSnackBar(this.errorMessage,"error"))},error:o=>{console.error("Error response:",o),this.notLoading=!0,this.isApiError=!0,this.isApiSuccess=!1,this.errorMessage=o?.error?.message||"Sorry, something went wrong.",this._snackbarService.openSnackBar(this.errorMessage,"error")},complete:()=>{}}))}passwordsMatch(){const i=this.ChangePasswordForm.get("newPassword")?.value,o=this.ChangePasswordForm.get("confirmPassword")?.value;return i===o}showHideOldPassword(){this.showOldPassword=!this.showOldPassword}showHideNewPassword(){this.showNewPassword=!this.showNewPassword}showHideConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword}};let n=s;return s.\u0275fac=function(o){return new(o||s)(e.Y36(A.e),e.Y36(O.e),e.Y36(h.ux),e.Y36(S.o),e.Y36(P.F0))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-change-password"]],decls:42,vars:13,consts:[[1,"row"],[1,"col-md-3"],[1,"home_left_sidebar"],[1,"col-md-9","change-password"],[1,"card","mb-4"],[1,"card-body"],[1,"main-body-title","mb-3"],[1,"change-password-form"],["autocomplete","off",1,"login-form","validate-form",3,"formGroup","ngSubmit"],["otpFormId","ngForm"],[1,"form-group","my-2","form-group-input"],[2,"position","relative"],["type","password","placeholder","Enter Old Password","formControlName","oldPassword",1,"form-control",3,"type","autocomplete"],[1,"material-symbols-outlined",3,"click"],["class","err_msg",4,"ngIf"],["type","password","placeholder","Enter New Password","formControlName","newPassword",1,"form-control",3,"type"],["type","password","placeholder","Confirm New Password","formControlName","confirmPassword",1,"form-control",3,"type"],[1,"d-flex","align-items-center","justify-content-between","my-3"],["class","btn btn-primary",3,"disabled",4,"ngIf","ngIfElse"],["loading",""],[1,"err_msg"],[1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary","btn-loading",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1"),e._uU(8,"Change Password"),e.qZA(),e.TgZ(9,"div",7)(10,"form",8,9),e.NdJ("ngSubmit",function(){return r.changePassword()}),e.TgZ(12,"p"),e._uU(13," Please fill in the following details and submit to change password. "),e.qZA(),e.TgZ(14,"div",10)(15,"label"),e._uU(16,"Old Password"),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"input",12),e.TgZ(19,"span",13),e.NdJ("click",function(){return r.showHideOldPassword()}),e._uU(20),e.qZA()(),e.YNc(21,l,2,0,"small",14),e.qZA(),e.TgZ(22,"div",10)(23,"label"),e._uU(24,"New Password"),e.qZA(),e.TgZ(25,"div",11),e._UZ(26,"input",15),e.TgZ(27,"span",13),e.NdJ("click",function(){return r.showHideNewPassword()}),e._uU(28),e.qZA()(),e.YNc(29,_,2,0,"small",14),e.qZA(),e.TgZ(30,"div",10)(31,"label"),e._uU(32,"Confirm Password"),e.qZA(),e.TgZ(33,"div",11),e._UZ(34,"input",16),e.TgZ(35,"span",13),e.NdJ("click",function(){return r.showHideConfirmPassword()}),e._uU(36),e.qZA()(),e.YNc(37,f,2,0,"small",14),e.qZA(),e._UZ(38,"div",17),e.YNc(39,g,2,1,"button",18),e.YNc(40,Z,5,1,"ng-template",null,19,e.W1O),e.qZA()()()()()()()),2&o){const m=e.MAs(11),u=e.MAs(41);e.xp6(10),e.Q6J("formGroup",r.ChangePasswordForm),e.xp6(8),e.Q6J("type",r.showOldPassword?"text":"password")("autocomplete",!1),e.xp6(2),e.hij(" ",r.showOldPassword?"visibility":"visibility_off"," "),e.xp6(1),e.Q6J("ngIf",r.oldPassword&&r.oldPassword.invalid&&(r.oldPassword.touched||m.submitted)),e.xp6(5),e.Q6J("type",r.showNewPassword?"text":"password"),e.xp6(2),e.hij(" ",r.showNewPassword?"visibility":"visibility_off"," "),e.xp6(1),e.Q6J("ngIf",r.newPassword&&r.newPassword.invalid&&(r.newPassword.touched||m.submitted)),e.xp6(5),e.Q6J("type",r.showConfirmPassword?"text":"password"),e.xp6(2),e.hij(" ",r.showConfirmPassword?"visibility":"visibility_off"," "),e.xp6(1),e.Q6J("ngIf",r.confirmPassword&&r.newPassword&&r.confirmPassword.value!=r.newPassword.value&&(r.newPassword.touched||m.submitted)),e.xp6(2),e.Q6J("ngIf",r.notLoading)("ngIfElse",u)}},dependencies:[v.O5,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u],styles:[".change-password[_ngcontent-%COMP%]{max-width:850px}input[type=password][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{width:100%}.form-group-input[_ngcontent-%COMP%]{position:relative}.form-group-input[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:absolute;cursor:pointer;right:10px;bottom:10px;color:#777}"]}),n})();var X=p(9805),ee=p(3870),te=p(9402),ne=p(7899),re=p(2902),he=p(8495);function be(n,s){1&n&&(e.TgZ(0,"div",5),e._UZ(1,"span",6),e.qZA())}function ve(n,s){if(1&n&&(e.TgZ(0,"small",28),e._uU(1),e.qZA()),2&n){const a=e.oxw(2);e.xp6(1),e.hij(" ",a.invalidEmailMessage," ")}}function Pe(n,s){1&n&&(e.TgZ(0,"button",29),e._uU(1," Send Invitation "),e.qZA())}function xe(n,s){1&n&&(e.TgZ(0,"button",30)(1,"div",31)(2,"span",32),e._uU(3,"."),e.qZA()(),e._uU(4," Loading.. "),e.qZA()),2&n&&e.Q6J("disabled",!0)}function Ce(n,s){1&n&&(e.ynx(0,5),e.TgZ(1,"p",42),e._uU(2," searching invitaion... "),e.qZA(),e.BQk())}function ye(n,s){if(1&n&&(e.TgZ(0,"li")(1,"p",45),e._uU(2),e.TgZ(3,"em",46),e._uU(4),e.qZA()(),e.TgZ(5,"p",46)(6,"small"),e._uU(7),e.ALo(8,"date"),e.qZA()()()),2&n){const a=s.$implicit;e.xp6(2),e.hij(" ",null==a?null:a.email," "),e.xp6(2),e.hij("(",a.status,")"),e.xp6(3),e.Oqu(e.xi3(8,3,null==a?null:a.timestamp,"medium"))}}function Ze(n,s){if(1&n&&(e.TgZ(0,"ol"),e.YNc(1,ye,9,6,"li",44),e.qZA()),2&n){const a=e.oxw(6);e.xp6(1),e.Q6J("ngForOf",a.searchedInvitations)}}function Ie(n,s){1&n&&(e.TgZ(0,"div",47)(1,"p",48),e._uU(2," No results found. "),e.qZA()())}function Te(n,s){if(1&n&&(e.YNc(0,Ze,2,1,"ol",3),e.YNc(1,Ie,3,0,"ng-template",null,43,e.W1O)),2&n){const a=e.MAs(2),i=e.oxw(5);e.Q6J("ngIf",null==i.searchedInvitations?null:i.searchedInvitations.length)("ngIfElse",a)}}function Ue(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Ce,3,0,"ng-container",40),e.YNc(2,Te,3,2,"ng-template",null,41,e.W1O),e.BQk()),2&n){const a=e.MAs(3),i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",i.isInvitationSearching)("ngIfElse",a)}}function Oe(n,s){if(1&n&&(e.TgZ(0,"li")(1,"p",45),e._uU(2),e.TgZ(3,"em",46),e._uU(4),e.qZA()(),e.TgZ(5,"p",46)(6,"small"),e._uU(7),e.ALo(8,"date"),e.qZA()()()),2&n){const a=s.$implicit;e.xp6(2),e.hij(" ",null==a?null:a.email," "),e.xp6(2),e.hij("(",a.status,")"),e.xp6(3),e.Oqu(e.xi3(8,3,null==a?null:a.timestamp,"medium"))}}function Me(n,s){if(1&n&&(e.TgZ(0,"ol"),e.YNc(1,Oe,9,6,"li",44),e.qZA()),2&n){const a=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",a.invitations)}}function we(n,s){if(1&n){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",36)(2,"input",37,38),e.NdJ("change",function(){e.CHM(a);const o=e.MAs(3),r=e.oxw(3);return e.KtG(r.searchInvitation(o.value))}),e.qZA()(),e.YNc(4,Ue,4,2,"ng-container",3),e.YNc(5,Me,2,1,"ng-template",null,39,e.W1O),e.BQk()}if(2&n){const a=e.MAs(6),i=e.oxw(3);e.xp6(4),e.Q6J("ngIf",i.isInvitationSearchOn)("ngIfElse",a)}}function Ae(n,s){1&n&&(e.TgZ(0,"div",49)(1,"p",48),e._uU(2," You have no invitations yet. "),e.qZA()())}function Se(n,s){if(1&n&&(e.TgZ(0,"div",7)(1,"div",33)(2,"h4",34),e._uU(3,"Your Invitations"),e.qZA(),e.YNc(4,we,7,2,"ng-container",3),e.YNc(5,Ae,3,0,"ng-template",null,35,e.W1O),e.qZA()()),2&n){const a=e.MAs(6),i=e.oxw(2);e.xp6(4),e.Q6J("ngIf",null==i.invitations?null:i.invitations.length)("ngIfElse",a)}}function Ee(n,s){1&n&&(e.ynx(0,5),e.TgZ(1,"p",42),e._uU(2," searching user... "),e.qZA(),e.BQk())}function Ne(n,s){if(1&n&&(e.TgZ(0,"li",58)(1,"div",59),e._UZ(2,"img",60),e.qZA(),e.TgZ(3,"div")(4,"p",45)(5,"strong"),e._uU(6),e.qZA()(),e.TgZ(7,"p",45),e._uU(8),e.qZA()()()),2&n){const a=s.$implicit;e.Q6J("routerLink","/bm/"+(null==a?null:a.id)),e.xp6(2),e.Q6J("src",null==a?null:a.profileImage,e.LSH),e.xp6(4),e.Oqu(a.fullName),e.xp6(2),e.Oqu(a.email)}}function qe(n,s){if(1&n&&(e.TgZ(0,"ol",56),e.YNc(1,Ne,9,4,"li",57),e.qZA()),2&n){const a=e.oxw(6);e.xp6(1),e.Q6J("ngForOf",a.searchedEntitysUsers)}}function ke(n,s){1&n&&(e.TgZ(0,"div",47)(1,"p",48),e._uU(2," No users found. "),e.qZA()())}function Je(n,s){if(1&n&&(e.YNc(0,qe,2,1,"ol",54),e.YNc(1,ke,3,0,"ng-template",null,55,e.W1O)),2&n){const a=e.MAs(2),i=e.oxw(5);e.Q6J("ngIf",null==i.searchedEntitysUsers?null:i.searchedEntitysUsers.length)("ngIfElse",a)}}function Fe(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Ee,3,0,"ng-container",40),e.YNc(2,Je,3,2,"ng-template",null,53,e.W1O),e.BQk()),2&n){const a=e.MAs(3),i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",i.isUserSearching)("ngIfElse",a)}}function Ye(n,s){if(1&n&&(e.TgZ(0,"li",58)(1,"div",59),e._UZ(2,"img",60),e.qZA(),e.TgZ(3,"div")(4,"p",45)(5,"strong"),e._uU(6),e.qZA()(),e.TgZ(7,"p",45),e._uU(8),e.qZA(),e.TgZ(9,"p",61)(10,"small"),e._uU(11),e.ALo(12,"date"),e.qZA()()()()),2&n){const a=s.$implicit;e.Q6J("routerLink","/bm/"+(null==a?null:a.id)),e.xp6(2),e.Q6J("src",null==a?null:a.profileImage,e.LSH),e.xp6(4),e.Oqu(a.fullName),e.xp6(2),e.Oqu(a.email),e.xp6(3),e.Oqu(e.xi3(12,5,a.createdAt,"medium"))}}function De(n,s){if(1&n&&(e.TgZ(0,"ol",56),e.YNc(1,Ye,13,8,"li",57),e.qZA()),2&n){const a=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",a.entitysUsers)}}function Le(n,s){if(1&n){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",36)(2,"input",51,38),e.NdJ("change",function(){e.CHM(a);const o=e.MAs(3),r=e.oxw(3);return e.KtG(r.searchUser(o.value))}),e.qZA()(),e.YNc(4,Fe,4,2,"ng-container",3),e.YNc(5,De,2,1,"ng-template",null,52,e.W1O),e.BQk()}if(2&n){const a=e.MAs(6),i=e.oxw(3);e.xp6(4),e.Q6J("ngIf",i.isSearchUserOn)("ngIfElse",a)}}function Qe(n,s){1&n&&(e.TgZ(0,"div",49)(1,"p",48),e._uU(2," You have no users yet. "),e.qZA()())}function Be(n,s){if(1&n&&(e.TgZ(0,"div",7)(1,"div",33)(2,"h4",34),e._uU(3,"Your Users"),e.qZA(),e.YNc(4,Le,7,2,"ng-container",3),e.YNc(5,Qe,3,0,"ng-template",null,50,e.W1O),e.qZA()()),2&n){const a=e.MAs(6),i=e.oxw(2);e.xp6(4),e.Q6J("ngIf",null==i.entitysUsers?null:i.entitysUsers.length)("ngIfElse",a)}}function je(n,s){if(1&n){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"code"),e._uU(6),e.qZA()(),e.TgZ(7,"button",11),e.NdJ("click",function(o){e.CHM(a);const r=e.oxw();return e.KtG(r.copyLink(o))}),e._uU(8," Copy code "),e.TgZ(9,"span",12),e._uU(10,"content_copy"),e.qZA()()()(),e.TgZ(11,"div",8)(12,"form",13,14),e.NdJ("ngSubmit",function(){e.CHM(a);const o=e.MAs(13),r=e.oxw();return e.KtG(r.sendInvitation(o))}),e.TgZ(14,"div",7)(15,"div",15),e._UZ(16,"input",16),e.YNc(17,ve,2,1,"small",17),e.qZA(),e.TgZ(18,"div",18),e.YNc(19,Pe,2,0,"button",19),e.YNc(20,xe,5,1,"ng-template",null,20,e.W1O),e.qZA()()()(),e.TgZ(22,"div",21)(23,"ul",22,23),e.NdJ("navChange",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.updateChange())}),e.TgZ(25,"li",24)(26,"a",25),e._uU(27," Invitations "),e.qZA(),e.YNc(28,Se,7,2,"ng-template",26),e.qZA(),e.TgZ(29,"li",24)(30,"a",25),e._uU(31," Users "),e.qZA(),e.YNc(32,Be,7,2,"ng-template",26),e.qZA()(),e._UZ(33,"div",27),e.qZA()(),e.BQk()}if(2&n){const a=e.MAs(13),i=e.MAs(21),o=e.MAs(24),r=e.oxw();e.xp6(6),e.Oqu(r.invitationCode),e.xp6(6),e.Q6J("formGroup",r.userInviteForm),e.xp6(5),e.Q6J("ngIf",r.email&&r.email.invalid&&(r.email.touched||a.submitted)||!r.isUserEmailValid),e.xp6(2),e.Q6J("ngIf",r.notLoading)("ngIfElse",i),e.xp6(4),e.Q6J("activeId",r.activeMenu),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(4),e.Q6J("ngbNavOutlet",o)}}function We(n,s){if(1&n){const a=e.EpF();e.TgZ(0,"div",62)(1,"p",63),e._uU(2,"You don't have an invitation code yet."),e.qZA(),e.TgZ(3,"button",64),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.generateCode())}),e._uU(4," Generate Invitation Code "),e.qZA()()}}const Ve=[{component:c,path:"bm/:id",canActivate:[ee.a,X.p]},{path:"change-password",component:F,canActivate:[ee.a]},{path:"users",component:(()=>{const s=class{get email(){return this.userInviteForm.get("emailaddress")}constructor(i,o,r,m,u){this._itemService=i,this.formBuilder=o,this._authService=r,this._nodeService=m,this._snackbarService=u,this.entitysUsers=[],this.isUserEmailValid=!0,this.invalidEmailMessage="Please enter valid email.",this.notLoading=!0,this.invitations=[],this.activeMenu=1,this.isLoading=!0,this.isInvitationSearchOn=!1,this.isInvitationSearching=!1,this.searchedInvitations=[],this.isSearchUserOn=!1,this.isUserSearching=!1,this.searchedEntitysUsers=[],this.userInviteForm=new t.cw({emailaddress:new t.NI("",[t.kI.required,t.kI.email,t.kI.pattern(/.+@.+\..+/)])})}ngOnInit(){const i=this._authService.loadFromLocalStorage();this.userConceptId=Number(i?.userConcept),this.userId=Number(i?.theUserId),this.entityId=i?.entityId,this.getInviteCode()}getInviteCode(){this._nodeService.getInvitationCode().subscribe({next:i=>{this.isLoading=!1,this.invitationCode=i?.code,this.getInvitationsList()},error:i=>{console.error(i)}})}generateCode(){var i=this;return(0,C.Z)(function*(){i._nodeService.createInvitationCode().subscribe({next:o=>{i.invitationCode=o?.code},error:o=>{console.error(o)}})})()}getEntitysUsers(){var i=this;return(0,C.Z)(function*(){i._itemService.searchLinkMultipleClean([{composition:i.entityId,fullLinkers:["the_entity_s_user_s"],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:r=>{const m=r?.data?.the_entity?.the_entity_s_user_s;m?.length?(i.entitysUsers=m?.map(u=>{const b=u?.id,x=new Date(u?.created_at).toISOString(),y=u?.data?.the_user?.entity?.person,fe=u?.data?.the_user?.user_data?.primary_email;return{id:b,fullName:`${y?.first_name} ${y.last_name}`,email:fe,profileImage:y?.profile_img||"./assets/man.png",createdAt:x}}),i.entitysUsers.sort((u,b)=>{const x=new Date(u?.createdAt).getTime();return new Date(b?.createdAt).getTime()-x})):i.entitysUsers=[],i.invitations.forEach(u=>{u.timestamp=new Date(u.timestamp).toISOString();const b=i.entitysUsers.some(x=>x.email===u.email);u.status=b?"user":"pending"}),i.invitations.sort((u,b)=>{const x=new Date(u?.timestamp).getTime();return new Date(b?.timestamp).getTime()-x})},error:r=>{console.error(r)},complete:()=>{}})})()}getEntityId(){return new Promise(i=>{this._itemService.checkEnitity(this.userConceptId).subscribe({next:o=>{const r=o?.entity;i(r)},error:o=>{console.error(o)}})})}copyLink(i){const r=i.target.parentNode.parentNode.querySelector("code").textContent;navigator?.clipboard?.writeText(r)}sendInvitation(i){var o=this;return(0,C.Z)(function*(){const m=o.userInviteForm.value?.emailaddress;o.userInviteForm.invalid||(o.notLoading=!1,(yield o.checkEmailExistence(m))?.length?o.notLoading=!0:(o.sendUserInvitation(m),i.resetForm()))})()}checkEmailExistence(i){return new Promise((o,r)=>{this._itemService.searchAPIClean({compositionName:"the_user",searchKey:i,type:"primary_email"}).subscribe({next:u=>{0===u.length?this.isUserEmailValid=!0:(this.isUserEmailValid=!1,this.invalidEmailMessage="The user already has an account"),o(u)},error:u=>{console.error(u),r(u)},complete:()=>{}})})}sendUserInvitation(i){this.notLoading=!0;const o=window.location.protocol+"//"+window.location.hostname+`/entitys-user-signup?ic=${this.invitationCode}`;this._itemService.sendEmail({heading:"An Invitation for Productive tool: Boomconsole",body:`\n    <p>Signup as user</p>\n    <p> <a href="${o}" target="_blank"><u>Invitation Link</u></a> </p>\n    `,toAddress:i}).subscribe({next:()=>{this._snackbarService.openSnackBar("Invitation sent successfully!","success"),this.recordUserInvitation(i)},error:b=>{console.error(b)}})}recordUserInvitation(i){const o={compositionJsons:[{[ne.Hh]:{email:i,timestamp:(new Date).toISOString()}}],compositionToJoin:this.userConceptId,direction:"backward",linker:re.G6,both:!0,count:!0,userId:this.userId};this._itemService.createCompositionAndLinker(o).subscribe({next:()=>{this.getInvitationsList()},error:r=>{console.error(r)},complete:()=>{}})}getInvitationsList(){this._itemService.getLink(this.userConceptId,`${re.G6}_s`,1,1e3).subscribe({next:i=>{const o=i?.output.map(r=>r?.data?.[ne.Hh]);this.invitations=Array.from(o.reduce((r,m)=>{const{email:u,timestamp:b}=m;return(!r.has(u)||new Date(r.get(u).timestamp)<new Date(b))&&r.set(u,m),r},new Map).values()),this.invitationCode&&this.getEntitysUsers()},error:i=>{console.error(i)}})}searchInvitation(i){var o=this;return(0,C.Z)(function*(){if(""===i)return void(o.isInvitationSearchOn=!1);o.isInvitationSearching=!0,o.isInvitationSearchOn=!0;const r_composition=o.userConceptId,m=yield(0,te.zAo)(Number(r_composition),[`${re.G6}_s`],"");m&&(m?.length?(o.searchedInvitations=m?.filter(b=>b?.data?.invitation),o.searchedInvitations=o.searchedInvitations?.map(b=>b?.data?.invitation),o.searchedInvitations=Array.from(o.searchedInvitations.reduce((b,x)=>{const{email:y,timestamp:ie}=x;return(!b.has(y)||new Date(b.get(y).timestamp)<new Date(ie))&&b.set(y,x),b},new Map).values()),o.searchedInvitations.forEach(b=>{b.timestamp=new Date(b.timestamp).toISOString();const x=o.entitysUsers.some(y=>y.email===b.email);b.status=x?"user":"pending"})):o.searchedInvitations=[],o.isInvitationSearching=!1)})()}searchUser(i){var o=this;return(0,C.Z)(function*(){if(""===i)return void(o.isSearchUserOn=!1);o.isUserSearching=!0,o.isSearchUserOn=!0;const r_composition=o.entityId,m=yield(0,te.zAo)(Number(r_composition),["the_entity_s_user_s"],"");if(m){if(m?.length){let b=m?.map(x=>x?.data?.the_user);b=b?.filter(x=>x?.entity),o.searchedEntitysUsers=b?.map(x=>{const y=x?.entity?.person,fe=x?.user_data?.primary_email;return{fullName:`${y?.first_name} ${y.last_name}`,email:fe,profileImage:y?.profile_img||"./assets/man.png"}})}else o.searchedEntitysUsers=[];o.isUserSearching=!1}})()}updateChange(){this.isInvitationSearchOn=!1,this.isSearchUserOn=!1}};let n=s;return s.\u0275fac=function(o){return new(o||s)(e.Y36(A.e),e.Y36(t.qu),e.Y36(O.e),e.Y36(he.s),e.Y36(S.o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-users"]],decls:7,vars:3,consts:[[1,"container","bg-white","mt-3"],[1,"text-center","pt-3"],["class","loading",4,"ngIf"],[4,"ngIf","ngIfElse"],["createCode",""],[1,"loading"],[1,"loader"],[1,"row"],[1,"col-md-8","mx-auto"],[1,"d-flex","align-items-center","justify-content-center","gap-2"],[1,"code-copy"],[1,"btn","btn-custom",3,"click"],[1,"material-symbols-outlined"],[3,"formGroup","ngSubmit"],["userInviteFormId","ngForm"],[1,"col-md-8"],["type","email","placeholder","Enter invitee's email","formControlName","emailaddress",1,"form-control","shadow-none"],["class","err_msg",4,"ngIf"],[1,"col-md-4"],["type","submit","class","btn btn-primary w-100",4,"ngIf","ngIfElse"],["loading",""],[1,"col-md-8","mx-auto","mt-4"],["ngbNav","",1,"nav-tabs",3,"activeId","navChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"err_msg"],["type","submit",1,"btn","btn-primary","w-100"],["type","button",1,"btn","btn-primary","btn-loading","w-100",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],[1,"col-md-6"],[1,"my-3"],["noInvitation",""],[1,"search"],["type","text","placeholder","Search invited email...",3,"change"],["searchInput",""],["initialInvitation",""],["class","loading",4,"ngIf","ngIfElse"],["invitationSearchComplete",""],[1,"text-secondary","text-center"],["noSearchResults",""],[4,"ngFor","ngForOf"],[1,"mb-0"],[1,"text-secondary"],[1,"py-2","my-2"],[1,"text-center","text-secondary"],[1,"py-5","my-5"],["noUsers",""],["type","text","placeholder","Search user...",3,"change"],["initialUsers",""],["userSearchComplete",""],["class","ps-0",4,"ngIf","ngIfElse"],["noUserSearchResults",""],[1,"ps-0"],["class","user-list",3,"routerLink",4,"ngFor","ngForOf"],[1,"user-list",3,"routerLink"],[1,"profile-image"],["alt","profile image",3,"src"],[1,"mb-0","text-secondary"],[1,"text-center","p-4","pb-5"],[1,"text-secondary","my-4"],[1,"btn","btn-primary",3,"click"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Invitation code"),e.qZA(),e.YNc(3,be,2,0,"div",2),e.YNc(4,je,34,9,"ng-container",3),e.YNc(5,We,5,0,"ng-template",null,4,e.W1O),e.qZA()),2&o){const m=e.MAs(6);e.xp6(3),e.Q6J("ngIf",r.isLoading),e.xp6(1),e.Q6J("ngIf",r.invitationCode)("ngIfElse",m)}},dependencies:[v.sg,v.O5,P.rH,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,d.uN,d.Pz,d.nv,d.Is,d.Vx,d.tO,d.Dy,v.uU],styles:[".code-copy[_ngcontent-%COMP%]{background-color:#eee;border-radius:6px;display:flex;align-items:center;justify-content:space-between;padding:.25rem 1rem}.code-copy[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#666}.btn-custom[_ngcontent-%COMP%]{border:1px solid #dedede;background-color:#fff;font-size:.875rem;padding:.25rem 1rem;color:#666;display:flex;align-items:center;gap:.25rem}.btn-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.25rem}.btn-custom[_ngcontent-%COMP%]:hover, .btn-custom[_ngcontent-%COMP%]:focus{background-color:#dedede}.user-list[_ngcontent-%COMP%]{display:flex;gap:1.5rem;align-items:center;padding:.5rem 1rem;border-radius:.5rem;border-bottom:1px solid #ddd}.user-list[_ngcontent-%COMP%]:hover, .user-list[_ngcontent-%COMP%]:focus{background-color:#eee;cursor:pointer}.profile-image[_ngcontent-%COMP%]{height:60px;width:60px;border-radius:50%;object-fit:cover;border:1px solid gray}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:rgba(17,17,17,.0666666667);margin-bottom:1rem;padding:5px 10px;border-radius:5px;width:100%;height:40px}"]}),n})(),canActivate:[ee.a,(()=>{const s=class{constructor(i,o){this._router=i,this._auth=o;const r=this._auth.loadFromLocalStorage();this.entityId=r.entityId}canActivate(){return!(this._auth.isLoggedIn()&&!this.entityId&&(this._router.navigate(["/not-found"]),1))}};let n=s;return s.\u0275fac=function(o){return new(o||s)(e.LFG(P.F0),e.LFG(O.e))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),n})()]}];let ze=(()=>{const s=class{};let n=s;return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P.Bz.forChild(Ve),P.Bz]}),n})();var Ge=p(9653),He=p(493),$e=p(8211),Xe=p(7746),et=p(2271);let tt=(()=>{const s=class{};let n=s;return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[v.ez,ze,t.u5,t.UX,d.IJ,et.m,Ge.Aw.forFeature("mySubscription",Xe.k),He.sQ.forFeature([$e.g])]}),n})()},8998:(Y,I,p)=>{p.d(I,{R:()=>t});var v=p(4650);let t=(()=>{const P=class{constructor(){}static notOnlySpaces(){return T=>{const e=T.value;return null==e?null:""===e.trim()?{onlySpaces:!0}:null}}static noSpaces(){return T=>{const e=T.value;return null==e?null:/\s/.test(e)?{noSpaces:!0}:null}}};let d=P;return P.\u0275fac=function(e){return new(e||P)},P.\u0275prov=v.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),d})()}}]);