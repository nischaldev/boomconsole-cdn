"use strict";(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[174],{174:(ot,w,p)=>{p.r(w),p.d(w,{MessagesModule:()=>nt});var u=p(6895),m=p(7518),P=p(9300),e=p(4650),Z=p(8186),k=p(5861),g=p(4006),A=p(8154),b=p(8180),C=p(384),f=p(6098),h=p(9446),S=p(1905);function U(s,r){1&s&&(e.TgZ(0,"small",25),e._uU(1," Please enter name "),e.qZA())}function N(s,r){if(1&s&&(e.TgZ(0,"small",25),e._uU(1),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.hij(" ",i.validGroupErrorMsg," ")}}function D(s,r){1&s&&(e.TgZ(0,"button",26)(1,"div",27)(2,"span",28),e._uU(3,"."),e.qZA()(),e._uU(4," Creating... "),e.qZA())}function G(s,r){1&s&&(e.TgZ(0,"button",29),e._uU(1,"Create Group"),e.qZA())}let J=(()=>{const r=class{constructor(t,o,n,a,c,l,d,x){this.formBuilder=t,this.itemService=o,this._router=n,this._snackbarService=a,this._authService=c,this._groupService=l,this._activeModal=d,this._profileServiceV2=x,this.isApiRequesting=!1,this.hasValidGroupError=!1,this.validGroupErrorMsg="",this.createGroup=this.formBuilder.group({name:new g.NI("",[g.kI.required]),status:new g.NI("",[g.kI.required]),description:new g.NI("")}),this.connectionCreated=new e.vpe,this.entityId=this._authService.loadFromLocalStorage().entityId}ngOnInit(){var t=this;return(0,k.Z)(function*(){const o=t._authService.loadFromLocalStorage();t.userConceptId=Number(o?.userConcept),yield t.getuser()})()}get name(){return this.createGroup.get("name")}get status(){return this.createGroup.get("status")}get description(){return this.createGroup.get("description")}onSubmit(){if(this.createGroup.valid){this.isApiRequesting=!0;const t={entityId:this.entityId,...this.createGroup.value};this._groupService.createGroup(t).subscribe({next:o=>{this.isApiRequesting=!1,this._snackbarService.openSnackBar("Group Created","success"),this._router.navigate(["/message/"+o?.data?.id]),this.connectionCreated.emit(),this._activeModal.close()}})}}getuser(){var t=this;return(0,k.Z)(function*(){const o=yield t._profileServiceV2.fetchUserDetails(t.entityId),n=o?.firstname,a=o?.lastname;t.profileImage=o?.avatar,t.username=`${n} ${a}`})()}};let s=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(g.qu),e.Y36(A.e),e.Y36(m.F0),e.Y36(b.o),e.Y36(C.e),e.Y36(f.l),e.Y36(h.Kz),e.Y36(S.S))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create-group-modal"]],outputs:{connectionCreated:"connectionCreated"},decls:48,vars:7,consts:[[1,"row"],[1,"bg-white","rounded","p-4","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold","mb-0"],["tabindex","",1,"material-symbols-outlined","icon_close",3,"click","keyup"],[1,"d-flex","flex-row","align-items-center","gap-2","mb-4"],["alt","Profile Picture",1,"avatar",3,"src"],[1,"d-flex","flex-column"],[1,"mb-0"],["tabindex","",3,"formGroup","ngSubmit","keyup"],["createFormId","ngForm"],[1,"form-group","mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","name","name","id","name","placeholder","Name of the Group","required","","formControlName","name",1,"form-control","p-2","mb-1","shadow-none"],["class","err_msg",4,"ngIf"],["for","",1,"form-label"],["formControlName","status",1,"form-select"],["value","","selected",""],["value","Public"],["value","Private"],["for","description",1,"form-label"],["formControlName","description","id","description","rows","3","placeholder","Write group description here",1,"form-control","p-2","mb-1","shadow-none"],["type","submit","class","btn btn-primary btn-loading",4,"ngIf","ngIfElse"],["notLoading",""],[1,"err_msg"],["type","submit",1,"btn","btn-primary","btn-loading"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Create New Group"),e.qZA(),e.TgZ(5,"span",4),e.NdJ("click",function(){return n._activeModal.close()})("keyup",function(){return n._activeModal.close()}),e._uU(6,"close"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"img",6),e.TgZ(9,"div",7)(10,"h5",3),e._uU(11),e.qZA(),e.TgZ(12,"p",8)(13,"small"),e._uU(14,"Admin"),e.qZA()()()(),e.TgZ(15,"form",9,10),e.NdJ("ngSubmit",function(){return n.onSubmit()})("keyup",function(c){return c.preventDefault()}),e.TgZ(17,"div",11)(18,"label",12),e._uU(19,"Group name: "),e.TgZ(20,"span",13),e._uU(21,"*"),e.qZA()(),e._UZ(22,"input",14),e.YNc(23,U,2,0,"small",15),e.YNc(24,N,2,1,"small",15),e.qZA(),e.TgZ(25,"div",11)(26,"label",16),e._uU(27,"Group Status "),e.TgZ(28,"span",13),e._uU(29,"*"),e.qZA()(),e.TgZ(30,"label",16),e._uU(31,"Group Status "),e.TgZ(32,"span",13),e._uU(33,"*"),e.qZA()(),e.TgZ(34,"select",17)(35,"option",18),e._uU(36,"Select a Status"),e.qZA(),e.TgZ(37,"option",19),e._uU(38,"Public"),e.qZA(),e.TgZ(39,"option",20),e._uU(40,"Private"),e.qZA()()(),e.TgZ(41,"div",11)(42,"label",21),e._uU(43,"Description"),e.qZA(),e._UZ(44,"textarea",22),e.qZA(),e.YNc(45,D,5,0,"button",23),e.YNc(46,G,2,0,"ng-template",null,24,e.W1O),e.qZA()()()),2&o){const a=e.MAs(16),c=e.MAs(47);e.xp6(8),e.Q6J("src",n.profileImage||"https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp",e.LSH),e.xp6(3),e.Oqu(n.username),e.xp6(4),e.Q6J("formGroup",n.createGroup),e.xp6(8),e.Q6J("ngIf",n.name&&n.name.invalid&&(n.name.touched||a.submitted)),e.xp6(1),e.Q6J("ngIf",n.hasValidGroupError),e.xp6(21),e.Q6J("ngIf",n.isApiRequesting)("ngIfElse",c)}},dependencies:[u.O5,g._Y,g.YN,g.Kr,g.Fj,g.EJ,g.JJ,g.JL,g.Q7,g.sg,g.u],styles:['.avatar[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%}.btn-close[_ngcontent-%COMP%]{cursor:pointer}.list[_ngcontent-%COMP%]{padding:0 1rem;margin:.75rem 0 0;max-height:260px;overflow-y:auto}.following-list[_ngcontent-%COMP%]{padding:.75rem .5rem;border-bottom:1px solid #efefef;border-radius:4px;list-style:none;cursor:pointer}.following-list[_ngcontent-%COMP%]:hover{background-color:#eee}.following-list[_ngcontent-%COMP%]:last-child{border-bottom:none}.following-image[_ngcontent-%COMP%]{position:relative}.following-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border:1px solid #ddd;border-radius:8px}.following-image[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:1.125rem;position:absolute;bottom:-4px;right:8px;font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 48}.share_wrapper[_ngcontent-%COMP%]{position:relative}.modal-title[_ngcontent-%COMP%]{clear:both;display:inline-block;overflow:hidden;white-space:nowrap;font-size:20px;text-overflow:ellipsis}.share_user_search[_ngcontent-%COMP%]{position:relative}.share_user_search[_ngcontent-%COMP%]   .share_user_search_input[_ngcontent-%COMP%]{height:45px;box-shadow:none}.share_user_search[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:absolute;color:#ccc;right:20px;top:50%;transform:translateY(-50%)}.share_user_search[_ngcontent-%COMP%]   .material-symbols-outlined.check-icon[_ngcontent-%COMP%]{right:10px;bottom:-4px;top:auto;transform:none;color:#333}.search_dropdown.show[_ngcontent-%COMP%]{display:block}.search_dropdown[_ngcontent-%COMP%]{display:none;width:94%;background-color:#fff;border-radius:10px;padding:20px;box-shadow:#959da533 0 8px 24px;position:absolute;top:100%;left:3%;color:#777;z-index:1}.search_dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.search_dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:10px 0}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;line-height:35px}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:relative;top:5px;font-size:22px}.item_chip[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:40px;background-color:#f3f3f3;margin:5px}.item_chip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;background-color:#eee}.item_chip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{display:inline-block;font-size:22px;position:relative;top:4px}.post_message[_ngcontent-%COMP%]{min-height:200px;box-shadow:#0000000f 0 2px 4px inset}.post_message[_ngcontent-%COMP%]:hover{box-shadow:#00000021 0 2px 4px inset}.post_message[_ngcontent-%COMP%]:focus{box-shadow:#00000021 0 2px 4px inset}.btn-dropdown[_ngcontent-%COMP%]{padding:5px 30px 5px 20px;text-transform:capitalize}.btn-dropdown[_ngcontent-%COMP%]:hover{background:#eee}.error_msg[_ngcontent-%COMP%]{background-color:#e86a6a;color:#fff}.icon_close[_ngcontent-%COMP%]{padding:5px;border-radius:5px;background-color:#f7f1f1;cursor:pointer}.icon_close[_ngcontent-%COMP%]:hover{background-color:#ccc}']}),s})();function q(s,r){1&s&&(e.ynx(0),e.TgZ(1,"span",14),e._UZ(2,"span",15),e._uU(3," Fetching groups, please wait... "),e.qZA(),e.BQk())}function E(s,r){if(1&s&&e._UZ(0,"img",20),2&s){const i=e.oxw().$implicit;e.Q6J("src",null==i?null:i.image,e.LSH)("alt",null==i?null:i.name)}}function Q(s,r){1&s&&e._UZ(0,"img",21)}function Y(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"div",16)(1,"a",17),e.NdJ("keyup",function(){const n=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.navigateToMessage(n))})("click",function(){const n=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.navigateToMessage(n))}),e.YNc(2,E,1,2,"img",18),e.YNc(3,Q,1,0,"ng-template",null,19,e.W1O),e.TgZ(5,"span",7),e._uU(6),e.qZA()()()}if(2&s){const i=r.$implicit,t=e.MAs(4),o=e.oxw();e.xp6(1),e.ekj("active",(null==i?null:i.id)===o.currentGroupId)("hidden",!o.isDropdownOpen&&(null==i?null:i.id)!==o.currentGroupId),e.xp6(1),e.Q6J("ngIf",null==i?null:i.image)("ngIfElse",t),e.xp6(4),e.Oqu(null==i?null:i.name)}}function F(s,r){1&s&&(e.ynx(0),e.TgZ(1,"span",14),e._UZ(2,"span",15),e._uU(3," Fetching users, please wait... "),e.qZA(),e.BQk())}function H(s,r){if(1&s&&e._UZ(0,"img",20),2&s){const i=e.oxw().$implicit;e.Q6J("src",null==i?null:i.image,e.LSH)("alt",i.name)}}function z(s,r){1&s&&e._UZ(0,"img",22)}function j(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"div",16)(1,"a",17),e.NdJ("keyup",function(){const n=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.navigateToDM(n.id))})("click",function(){const n=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.navigateToDM(n.id))}),e.YNc(2,H,1,2,"img",18),e.YNc(3,z,1,0,"ng-template",null,19,e.W1O),e.TgZ(5,"span",7),e._uU(6),e.qZA()()()}if(2&s){const i=r.$implicit,t=e.MAs(4),o=e.oxw();e.xp6(1),e.ekj("active",(null==i?null:i.id)===o.currentPrivateGroupId)("hidden",!o.isDropdownOpenDM&&(null==i?null:i.id)!==o.currentPrivateGroupId),e.xp6(1),e.Q6J("ngIf",i.image)("ngIfElse",t),e.xp6(4),e.Oqu(null==i?null:i.name)}}let L=(()=>{const r=class{constructor(t,o,n,a,c){this._groupService=t,this._auth=o,this.router=n,this._route=a,this._modalService=c,this.isDropdownOpen=!0,this.isDropdownOpenDM=!0,this.isApiInProgress=!0,this.isApiInProgressDM=!0,this.count=5,this.showAllGroups=!1,this.myDMUsers=[],this.myGroups=[];const l=this._auth.loadFromLocalStorage();this.entityId=l?.entityId,this.router.events.pipe((0,P.h)(d=>d instanceof m.m2)).subscribe(()=>{this.updateRouteParams()})}updateRouteParams(){this._route.firstChild?.paramMap.subscribe(t=>{this.currentGroupId=Number(t.get("groupId")),this.currentPrivateGroupId=Number(t.get("privateGroupId"))})}ngOnInit(){this.entityId&&(this.getMyGroups(),this.getMyDMUsers()),this.updateRouteParams()}getGroupsAccordingToMessage(){this._groupService.getGroupsAccordingToMessage(this.entityId).subscribe({next:t=>{this.isApiInProgress=!1,this.myGroups=t?.data},error:t=>{this.isApiInProgress=!1,console.error("Error fetching groups:",t)}})}getMyGroups(){this._groupService.getMyJoinedGroups(this.entityId).subscribe({next:t=>{this.isApiInProgress=!1,this.myGroups=t},error:t=>{this.isApiInProgress=!1,console.error("Error fetching groups:",t)}})}hasActiveGroup(){return this.myGroups.some(t=>t.id==this.currentGroupId)}hasActiveDM(){return this.myDMUsers.some(t=>Number(t.id)==this.currentPrivateGroupId)}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}toggleDropdownDM(){this.isDropdownOpenDM=!this.isDropdownOpenDM}navigateToMessage(t){this.router.navigate(["/message/",t?.id])}openAddUserModal(){this._modalService.open(Z.W,{size:"md"}).componentInstance.connectionCreated.subscribe(()=>{this.getMyDMUsers()})}openCreateGroupModal(){this._modalService.open(J,{size:"md"}).componentInstance.connectionCreated.subscribe(()=>{this.getMyGroups()})}getMyDMUsers(){this._groupService.getMyDMUsers(this.entityId).subscribe({next:t=>{this.isApiInProgressDM=!1,this.myDMUsers=t?.data},error:t=>{this.isApiInProgressDM=!1,console.error("Error fetching groups:",t)}})}navigateToDM(t){this.router.navigate([`/message/dm/${t}`])}};let s=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(f.l),e.Y36(C.e),e.Y36(m.F0),e.Y36(m.gz),e.Y36(h.FF))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-sidebar"]],decls:28,vars:10,consts:[[1,"sidebar"],[1,"content"],[1,"mt-3"],[1,"mt-4"],[1,"section"],["id","channels_toggle",1,"toggle-button",3,"click"],[1,"material-symbols-outlined"],[1,"ml-2"],["tabindex","",1,"material-symbols-outlined","add-btn",3,"click","keyup"],["id","channels_list"],[4,"ngIf"],["class","group-item-container",4,"ngFor","ngForOf"],[1,"title-heading"],["tabindex","0",1,"material-symbols-outlined","add-btn",3,"click","keyup"],[1,"loading-message"],[1,"spinner"],[1,"group-item-container"],["tabindex","0",1,"group-item",3,"keyup","click"],["class","avatar-img rounded-circle h-25px w-25px",3,"src","alt",4,"ngIf","ngIfElse"],["defaultImage",""],[1,"avatar-img","rounded-circle","h-25px","w-25px",3,"src","alt"],["height","30","width","30","src","./assets/groups_default.jpg","alt","Profile Image",1,"avatar-img","rounded-circle","h-25px","w-25px"],["src","./assets/man.png","alt","Profile Image",1,"avatar-img","rounded-circle","h-25px","w-25px"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),e.NdJ("click",function(){return n.toggleDropdown()}),e.TgZ(6,"span",6),e._uU(7),e.qZA(),e.TgZ(8,"span",7),e._uU(9,"Groups"),e.qZA()(),e.TgZ(10,"span",8),e.NdJ("click",function(){return n.openCreateGroupModal()})("keyup",function(){return n.openCreateGroupModal()}),e._uU(11,"add"),e.qZA()(),e.TgZ(12,"div",9),e.YNc(13,q,4,0,"ng-container",10),e.YNc(14,Y,7,7,"div",11),e.qZA()(),e.TgZ(15,"div",3)(16,"div",4)(17,"div",12)(18,"button",5),e.NdJ("click",function(){return n.toggleDropdownDM()}),e.TgZ(19,"span",6),e._uU(20),e.qZA(),e.TgZ(21,"span",7),e._uU(22,"Direct Message"),e.qZA()(),e.TgZ(23,"span",13),e.NdJ("click",function(){return n.openAddUserModal()})("keyup",function(){return n.openAddUserModal()}),e._uU(24,"add"),e.qZA()()(),e.TgZ(25,"div",9),e.YNc(26,F,4,0,"ng-container",10),e.YNc(27,j,7,7,"div",11),e.qZA()()()()()),2&o&&(e.xp6(7),e.hij(" ",n.isDropdownOpen?"arrow_drop_down":"arrow_right"," "),e.xp6(5),e.ekj("hidden",!n.isDropdownOpen&&!n.hasActiveGroup()),e.xp6(1),e.Q6J("ngIf",n.isApiInProgress),e.xp6(1),e.Q6J("ngForOf",n.myGroups),e.xp6(6),e.hij(" ",n.isDropdownOpenDM?"arrow_drop_down":"arrow_right"," "),e.xp6(5),e.ekj("hidden",!n.isDropdownOpenDM&&!n.hasActiveDM()),e.xp6(1),e.Q6J("ngIf",n.isApiInProgressDM),e.xp6(1),e.Q6J("ngForOf",n.myDMUsers))},dependencies:[u.sg,u.O5],styles:[".sidebar[_ngcontent-%COMP%]{width:100%;background-color:#e7f0f8;height:calc(100vh - 58px);overflow:auto;color:#fff}.sidebar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:5px}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;color:#262c40;text-decoration:none;transition:color .2s}.nav-item[_ngcontent-%COMP%]:hover, .nav-item.active[_ngcontent-%COMP%]{color:#fff;background-color:#262c40;border-radius:4px}.icon[_ngcontent-%COMP%]{width:20px;height:20px}.ml-2[_ngcontent-%COMP%]{margin-left:10px}.leading-none[_ngcontent-%COMP%]{line-height:1}.mt-3[_ngcontent-%COMP%]{margin-top:20px}.mt-4[_ngcontent-%COMP%]{margin-top:30px}.section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:10px 0;color:#262c40;font-size:14px}.toggle-button[_ngcontent-%COMP%]{background:none;border:none;color:inherit;cursor:pointer;display:flex;align-items:center}.more-options[_ngcontent-%COMP%], .add-group[_ngcontent-%COMP%]{background:none;border:none;color:inherit;cursor:pointer}.group-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;color:#262c40;text-decoration:none;transition:color .2s}.group-item[_ngcontent-%COMP%]:hover, .group-item.active[_ngcontent-%COMP%]{color:#fff;background-color:#262c40;border-radius:4px}.hidden[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:100px}.nav-item[_ngcontent-%COMP%]   .ml-2[_ngcontent-%COMP%], .group-item[_ngcontent-%COMP%]   .ml-2[_ngcontent-%COMP%], #channels_toggle[_ngcontent-%COMP%]{display:none}}.avatar-img[_ngcontent-%COMP%]{object-fit:cover}.title-heading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.add-btn[_ngcontent-%COMP%]{cursor:pointer;padding:3px;border-radius:5px}.add-btn[_ngcontent-%COMP%]:hover{background-color:#d3d7da;transition:all ease-in-out .3s}.loading-message[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;text-align:center;padding:10px;background-color:#fff;border-radius:5px;box-shadow:0 2px 4px #0000001a;margin:10px 0;display:flex;align-items:center}.spinner[_ngcontent-%COMP%]{border:3px solid #f3f3f3;border-top:3px solid #3498db;border-radius:50%;width:15px;height:15px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:10px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),s})();function B(s,r){1&s&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),e._UZ(4,"img",8),e.TgZ(5,"h3",9),e._uU(6," Start a chat with your groups or someone to get the conversation started! "),e.qZA()()()()())}let $=(()=>{const r=class{constructor(t,o){this.route=t,this.router=o,this.hasSelectedChat=!1,this.appearance="circle",this.loadingText="Loading...",this.animation="progress-dark",this.ariaLabel="Loading content",this.router.events.pipe((0,P.h)(n=>n instanceof m.m2)).subscribe(()=>{this.updateRouteParams()})}ngOnInit(){this.updateRouteParams()}updateRouteParams(){this.route.firstChild?.params.subscribe(t=>{this.hasSelectedChat=!(!t.groupId&&!t.privateGroupId)}),this.hasSelectedChat=!(!this.route.snapshot.firstChild?.params.groupId&&!this.route.snapshot.firstChild?.params.privateGroupId)}};let s=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(m.gz),e.Y36(m.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-home"]],decls:6,vars:1,consts:[[1,"d-flex"],[1,"col-md-3"],[1,"message-box"],["class","col-md-9 card d-flex flex-column align-items-center justify-content-center",4,"ngIf"],[1,"col-md-9","card","d-flex","flex-column","align-items-center","justify-content-center"],[1,"col-md-8"],[1,"h-full"],[1,"d-flex","flex-column","align-items-center","justify-content-center"],["src","./assets/icons/no_chat.png","alt","No active chats",1,"img-fluid","w-75"],[1,"fw-semibold","w-80","text-center"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-sidebar"),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"router-outlet"),e.qZA(),e.YNc(5,B,7,0,"div",3),e.qZA()),2&o&&(e.xp6(5),e.Q6J("ngIf",!n.hasSelectedChat))},dependencies:[u.O5,m.lC,L],styles:[".no_data[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;flex-direction:column}.content[_ngcontent-%COMP%]{text-align:center;margin:3rem 0}.content[_ngcontent-%COMP%]   .main-heading[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700}p[_ngcontent-%COMP%]{font-size:1.3rem;padding:.7rem 0}.message-box[_ngcontent-%COMP%]{width:100%}"]}),s})();var K=p(487),y=p(5229);function R(s,r){if(1&s&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&s){const i=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==i?null:i.text," ")}}function W(s,r){if(1&s&&(e.ynx(0),e.TgZ(1,"div",23)(2,"a",24),e._uU(3),e.qZA()(),e._UZ(4,"img",25),e.BQk()),2&s){const i=e.oxw().$implicit;e.xp6(2),e.Q6J("href",null==i?null:i.fileurl,e.LSH),e.xp6(1),e.Oqu(null==i?null:i.filename),e.xp6(1),e.s9C("alt",null==i?null:i.filename),e.Q6J("src",null==i?null:i.fileurl,e.LSH)}}function V(s,r){if(1&s&&(e.ynx(0),e.TgZ(1,"div",26)(2,"div",27)(3,"a",24)(4,"span"),e._uU(5),e.qZA()()()(),e.BQk()),2&s){const i=e.oxw().$implicit;e.xp6(3),e.s9C("href",i.fileurl,e.LSH),e.xp6(2),e.Oqu(i.filename)}}function X(s,r){if(1&s&&(e.TgZ(0,"li",12)(1,"div",13)(2,"div",14)(3,"div",15),e._UZ(4,"img",16),e.qZA(),e.TgZ(5,"div",17)(6,"div",18)(7,"a",19),e._uU(8),e.qZA()(),e.YNc(9,R,2,1,"div",20),e.YNc(10,W,5,4,"ng-container",21),e.YNc(11,V,6,2,"ng-container",21),e.qZA()()()()),2&s){const i=r.$implicit;e.xp6(4),e.hYB("alt","",i.sender.firstName," ",i.sender.lastName,""),e.Q6J("src",i.sender.profileImg,e.LSH),e.xp6(4),e.AsE(" ",null==i||null==i.sender?null:i.sender.firstName," ",null==i||null==i.sender?null:i.sender.lastName," "),e.xp6(1),e.Q6J("ngIf",i.text),e.xp6(1),e.Q6J("ngIf","image"===i.type),e.xp6(1),e.Q6J("ngIf","file"===i.type)}}let ee=(()=>{const r=class{constructor(t,o,n){this._activeModal=t,this._groupService=o,this._snackbarService=n,this.messages=[],this.messagesUpdated=new e.vpe,this.loading=!1,console.log(this.messages,"ashdgfghcvjb")}deleteMessage(t){if(!t)return;console.log(this.messages,"messages"),console.log("Type of messages:",typeof this.messages);const o=this.groupId,n=t.messageId;this.loading=!0,this._groupService.deleteMessage(o,n).subscribe({next:a=>{this._snackbarService.openSnackBar(a?.message||"Message deleted successfully","success"),this._activeModal.close(),this.messages=this.messages.filter(c=>c.messageId!==n),this.messagesUpdated.emit(this.messages),console.log(this.messages,"messagess"),this.loading=!1},error:a=>{console.error("Error deleting message:",a),this._snackbarService.openSnackBar("Error deleting message","error"),this.loading=!1}})}};let s=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(h.Kz),e.Y36(f.l),e.Y36(b.o))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-confirm-delete-modal"]],inputs:{messages:"messages",groupId:"groupId",messageText:"messageText"},outputs:{messagesUpdated:"messagesUpdated"},decls:17,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","text-center",2,"min-height","auto"],[1,"mb-5"],[1,"text-start"],[1,"deleted-list"],[1,"list-group","text-start"],["class","list-group-item text-truncate",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"list-group-item","text-truncate"],[1,"chat-area-main"],[1,"chat-msg"],[1,"chat-msg-profile"],[1,"chat-msg-img",3,"src","alt"],[1,"chat-msg-content"],[1,"chat-msg-sender"],[1,"userName"],["class","chat-msg-text d-flex",4,"ngIf"],[4,"ngIf"],[1,"chat-msg-text","d-flex"],[1,"chat-msg-file","d-flex"],["target","_blank",3,"href"],[1,"chat-msg-file-img",3,"src","alt"],[1,"file-container"],[1,"pdf-container-msg"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Delete Message"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return n._activeModal.dismiss()}),e.qZA()(),e.TgZ(4,"div",3)(5,"h5",4),e._uU(6,"Are you sure you want to delete this message?"),e.qZA(),e.TgZ(7,"h6",5),e._uU(8,"This cannot be undone."),e.qZA(),e.TgZ(9,"div",6)(10,"ol",7),e.YNc(11,X,12,8,"li",8),e.qZA()()(),e.TgZ(12,"div",9)(13,"button",10),e.NdJ("click",function(){return n._activeModal.close()}),e._uU(14," Close "),e.qZA(),e.TgZ(15,"button",11),e.NdJ("click",function(){return n.deleteMessage(n.messages)}),e._uU(16," Delete "),e.qZA()()),2&o&&(e.xp6(11),e.Q6J("ngForOf",n.messages))},dependencies:[u.sg,u.O5],styles:[".download-icon[_ngcontent-%COMP%]{color:#000;margin-top:5px}.options[_ngcontent-%COMP%]   .more_vert[_ngcontent-%COMP%]{margin-left:auto}.chat-msg-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.chat-msg-sender[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:700;margin-bottom:5px}.btn-update[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));padding:7px 16px;border:none;margin-right:10px;color:#fff}.btn-cancel[_ngcontent-%COMP%]{background:linear-gradient(132deg,rgb(84,92,98) 0%,rgb(65,80,95) 100%);padding:7px 16px;border:none;color:#fff}.msg-username[_ngcontent-%COMP%]{margin-bottom:4px;font-weight:600;font-size:15px}.msg-detail[_ngcontent-%COMP%]{overflow:hidden}.msg-content[_ngcontent-%COMP%]{font-weight:500;font-size:13px;display:flex}.chat-msg[_ngcontent-%COMP%]{transition:background-color .3s}.image[_ngcontent-%COMP%]{max-height:250px;max-width:-moz-fit-content;max-width:fit-content;border:4px solid #aca7a6;margin-bottom:10px}.file-container[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer}.input-container[_ngcontent-%COMP%]{position:relative;width:100%}.chat-msg-input[_ngcontent-%COMP%]{position:relative}.remove-icon[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;display:none;cursor:pointer;font-size:16px;background:rgba(255,255,255,.8);border-radius:50%;padding:2px}.input-container[_ngcontent-%COMP%]:hover   .remove-icon[_ngcontent-%COMP%]{display:inline}.chat-msg-img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:22%;margin-bottom:90%;object-fit:cover}.userName[_ngcontent-%COMP%]{color:#000}.chat-msg-profile[_ngcontent-%COMP%]{flex-shrink:0;position:relative}.chat-msg-date[_ngcontent-%COMP%]{margin-left:34px;bottom:0;font-size:12px;font-weight:600;color:#a9a9a9;white-space:nowrap}.date-divider[_ngcontent-%COMP%]{text-align:center;margin:10px 0;color:#888;font-weight:700}.chat-msg[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px;padding:0 18px}.chat-msg-content[_ngcontent-%COMP%]{margin-left:1px}.chat-msg-text[_ngcontent-%COMP%]{line-height:1.5;font-size:14px;font-weight:500}.chat-msg-text[_ngcontent-%COMP%] + .chat-msg-text[_ngcontent-%COMP%]{margin-top:3px}.chat-area-footer[_ngcontent-%COMP%]{display:flex;align-items:center}.chat-msg-input[_ngcontent-%COMP%]::placeholder{color:#999}.chat-msg-input[_ngcontent-%COMP%]{position:relative;width:100%}.remove-icon[_ngcontent-%COMP%]{position:absolute;top:10px;left:59px;display:none;cursor:pointer;font-size:16px;color:#fff;background:rgba(63,60,60,.8);border-radius:50%;padding:2px}.input-wrapper[_ngcontent-%COMP%]:hover   .remove-icon[_ngcontent-%COMP%]{display:inline}.send-btn[_ngcontent-%COMP%]{margin-left:10px;color:#c1c7cd;width:20px;flex-shrink:0;position:absolute;top:9px;cursor:pointer}.send-btn[_ngcontent-%COMP%]:hover{color:#9fa7ac}.send-btn[_ngcontent-%COMP%] + .feather[_ngcontent-%COMP%]{margin-left:12px}.chat-msg-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;width:100%}.chat-area-footer[_ngcontent-%COMP%]{display:flex;border-top:1px solid #eef2f4;width:100%;padding:10px 20px;align-items:center;background-color:#fff;position:sticky;bottom:0;left:0}.chat-area-footer[_ngcontent-%COMP%]   .feather[_ngcontent-%COMP%]{color:#c1c7cd;width:20px;flex-shrink:0;cursor:pointer}.chat-area-footer[_ngcontent-%COMP%]   .feather[_ngcontent-%COMP%]:hover{color:#9fa7ac}.chat-area-footer[_ngcontent-%COMP%]   .feather[_ngcontent-%COMP%] + .feather[_ngcontent-%COMP%]{margin-left:12px}.chat-area-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;color:#273346;background-color:#f8f8fa;padding:12px;border-radius:6px;font-size:15px;margin:0 12px;width:90%}.chat-area-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#a2a2a2}.chat-area-group[_ngcontent-%COMP%]{flex-shrink:0;cursor:pointer;display:flex}.chat-area-group[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{border:2px solid #fff}.chat-area-group[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:-5px}.chat-area-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:32px;height:32px;background-color:#f0f7ff;color:#0086ff;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:14px;font-weight:500}@media (max-width: 1120px){.detail-area[_ngcontent-%COMP%]{display:none}}@media (max-width: 780px){.conversation-area[_ngcontent-%COMP%]{display:none}.search-bar[_ngcontent-%COMP%]{margin-left:0;flex-grow:1}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:10px}}.preview_image[_ngcontent-%COMP%]{border:1px solid #fd7e14;border-radius:5px;width:100px;height:100px}.pdf-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:1px solid #dc3545;padding:5px 50px 5px 10px;border-radius:5px;position:relative;left:15px}.pdf-container[_ngcontent-%COMP%]   .close-pdf[_ngcontent-%COMP%]{position:absolute;top:5px;right:10px;cursor:pointer}.pdf-container-msg[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:2px solid #aca7a6;padding:5px 50px 5px 10px;border-radius:5px}"]}),s})();var I=p(6885),T=p(6613);const te=["chatArea"],ne=["editFormElement"],oe=["messageInput"];function ie(s,r){1&s&&(e.ynx(0),e.TgZ(1,"span",19),e._uU(2,"Looking for data..."),e.qZA(),e.BQk())}function se(s,r){if(1&s&&e._UZ(0,"img",23),2&s){const i=e.oxw(2);e.s9C("src",i.groupImage,e.LSH)}}function re(s,r){1&s&&e._UZ(0,"img",24)}const ae=function(s){return[s]};function ce(s,r){if(1&s&&(e.TgZ(0,"a",20),e.YNc(1,se,1,1,"img",21),e.YNc(2,re,1,0,"ng-template",null,22,e.W1O),e._uU(4),e.qZA()),2&s){const i=e.MAs(3),t=e.oxw();e.Q6J("routerLink",e.VKq(4,ae,"/groups/gr/"+t.groupId)),e.xp6(1),e.Q6J("ngIf",t.groupImage)("ngIfElse",i),e.xp6(3),e.hij(" ",t.groupName," ")}}function le(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"img",27),e.NdJ("keyup",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.openGroupMembers())})("click",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.openGroupMembers())}),e.qZA()}if(2&s){const i=e.oxw().$implicit;e.Q6J("src",null==i?null:i.profileImage,e.LSH)}}function ge(s,r){1&s&&e._UZ(0,"img",28)}function pe(s,r){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,le,1,1,"img",25),e.YNc(2,ge,1,0,"ng-template",null,26,e.W1O),e.qZA()),2&s){const i=r.$implicit,t=e.MAs(3);e.xp6(1),e.Q6J("ngIf",null==i?null:i.profileImage)("ngIfElse",t)}}function de(s,r){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.hij(" +",(null==i.groupMembers?null:i.groupMembers.length)-3," ")}}function me(s,r){1&s&&(e.ynx(0),e.TgZ(1,"span",19),e._uU(2,"Looking for data..."),e.qZA(),e.BQk())}function ue(s,r){1&s&&(e.ynx(0),e.TgZ(1,"div",29)(2,"div",30),e._UZ(3,"img",31),e.TgZ(4,"h1"),e._uU(5,"No conversation"),e.qZA(),e.TgZ(6,"p"),e._uU(7," There are no conversations yet. Start a new conversation to get things going. "),e.qZA()()(),e.BQk())}function _e(s,r){if(1&s&&e._UZ(0,"img",47),2&s){const i=e.oxw().$implicit;e.Q6J("src",null==i||null==i.sender?null:i.sender.profileImg,e.LSH)}}function he(s,r){1&s&&e._UZ(0,"img",48)}function fe(s,r){if(1&s){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",51)(2,"a",52),e.NdJ("keyup",function(){e.CHM(i);const o=e.oxw(2).$implicit,n=e.oxw(2);return e.KtG(n.openImageModal(o.fileurl,o.sender))})("click",function(){e.CHM(i);const o=e.oxw(2).$implicit,n=e.oxw(2);return e.KtG(n.openImageModal(o.fileurl,o.sender))}),e._UZ(3,"img",53),e.qZA()(),e.BQk()}if(2&s){const i=e.oxw(2).$implicit;e.xp6(3),e.Q6J("src",i.fileurl,e.LSH)}}function xe(s,r){if(1&s&&(e.ynx(0),e.TgZ(1,"div",51)(2,"div",54)(3,"a",55)(4,"span"),e._uU(5),e.qZA()()()(),e.BQk()),2&s){const i=e.oxw(3).$implicit;e.xp6(3),e.s9C("href",i.fileurl,e.LSH),e.xp6(2),e.Oqu(i.filename)}}function Me(s,r){if(1&s&&e.YNc(0,xe,6,2,"ng-container",3),2&s){const i=e.oxw(2).$implicit;e.Q6J("ngIf","file"===i.type)}}function be(s,r){if(1&s&&(e.ynx(0),e.YNc(1,fe,4,1,"ng-container",49),e.YNc(2,Me,1,1,"ng-template",null,50,e.W1O),e.BQk()),2&s){const i=e.MAs(3),t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","image"===t.type)("ngIfElse",i)}}function Ce(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"a",56),e.NdJ("keyup",function(){e.CHM(i);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.downloadFile(o.fileurl,o.filename))})("click",function(){e.CHM(i);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.downloadFile(o.fileurl,o.filename))}),e.TgZ(1,"span",57),e._uU(2," download "),e.qZA()()}}const ve=function(s){return{owner:s}},Oe=function(s){return{"show-options":s}};function we(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"div",33),e.NdJ("mouseenter",function(){const n=e.CHM(i).$implicit;return e.KtG(n.isHovered=n.isOwner)})("mouseleave",function(){const n=e.CHM(i).$implicit;return e.KtG(n.isHovered=!1)}),e.TgZ(1,"div",34)(2,"a",35),e.YNc(3,_e,1,1,"img",36),e.YNc(4,he,1,0,"ng-template",null,26,e.W1O),e.qZA()(),e.TgZ(6,"div",37)(7,"div",38)(8,"div")(9,"a",39),e._uU(10),e.qZA(),e.TgZ(11,"span",40),e._uU(12),e.ALo(13,"UTCToLocalTime"),e.qZA()()(),e.ynx(14),e.TgZ(15,"div",41),e._uU(16),e.qZA(),e.BQk(),e.YNc(17,be,4,2,"ng-container",3),e.qZA(),e.TgZ(18,"div",42)(19,"div",43),e.YNc(20,Ce,3,0,"a",44),e.TgZ(21,"a",45)(22,"span",46),e.NdJ("click",function(){const n=e.CHM(i).$implicit,a=e.oxw(2);return e.KtG(a.deleteMessage(n))})("keyup",function(){const n=e.CHM(i).$implicit,a=e.oxw(2);return e.KtG(a.deleteMessage(n))}),e._uU(23," delete "),e.qZA()(),e.TgZ(24,"a")(25,"span",46),e.NdJ("click",function(){const n=e.CHM(i).$implicit,a=e.oxw(2);return e.KtG(a.enterEditMode(n))})("keyup",function(){const n=e.CHM(i).$implicit,a=e.oxw(2);return e.KtG(a.enterEditMode(n))}),e._uU(26," edit_square "),e.qZA()()()()()}if(2&s){const i=r.$implicit,t=e.MAs(5),o=e.oxw(2);e.Q6J("ngClass",e.VKq(14,ve,null==i?null:i.isOwner)),e.xp6(2),e.Q6J("routerLink","/bm/"+(null==i||null==i.sender?null:i.sender.conceptId)),e.xp6(1),e.Q6J("ngIf",null==i||null==i.sender?null:i.sender.profileImg)("ngIfElse",t),e.xp6(6),e.Q6J("routerLink","/bm/"+(null==i||null==i.sender?null:i.sender.conceptId)),e.xp6(1),e.AsE(" ",null==i||null==i.sender?null:i.sender.firstName," ",null==i||null==i.sender?null:i.sender.lastName," "),e.xp6(2),e.hij(" ",o.timeSince(e.lcZ(13,12,(null==i?null:i.createdAt)||""))," "),e.xp6(4),e.hij(" ",null==i?null:i.text," "),e.xp6(1),e.Q6J("ngIf",i.filename),e.xp6(1),e.Q6J("ngClass",e.VKq(16,Oe,i.isHovered&&i.isOwner)),e.xp6(2),e.Q6J("ngIf",i.filename)}}function Pe(s,r){if(1&s&&(e.ynx(0),e.YNc(1,we,27,18,"div",32),e.BQk()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.messages)}}function ke(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"div",58)(1,"span",59),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.remove())})("keyup",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.remove())}),e._uU(2," close "),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()}if(2&s){const i=e.oxw();e.xp6(4),e.Oqu(i.pdf)}}function ye(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"span",60),e.NdJ("keyup",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.remove())})("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.remove())}),e._uU(1," close "),e.qZA()}}let Ie=(()=>{const r=class{constructor(t,o,n,a,c,l,d,x,v){this.socketService=t,this._auth=o,this._route=n,this._groupService=a,this.modalService=c,this._snackbarService=l,this.elementRef=d,this.fb=x,this.renderer=v,this.messages=[],this.newMessage="",this.isOwner=!1,this.isMember=!1,this.groupName="",this.scrolling=!1,this.editingMessage=null,this.previewImage=null,this.page=1,this.scrolledToBottom=!0,this.messagesUpdated=!1,this.loadNewMessages=!0,this.isApiInProgress=!0,this.isApiInProgressGD=!0,this.count=5;const _=this._auth.loadFromLocalStorage();this.conceptId=_.userConcept,this.entityId=_.entityId,this.userId=_.theUserId,this.token=_.token,this.editMessageForm=this.fb.group({messageText:["",g.kI.required]}),this._route.params?.subscribe(O=>{const M=Number(O.groupId);M!==this.groupId&&(this.isApiInProgress=!0,this.isApiInProgressGD=!0,this.groupId=M,this.page=1,this.updateMessages(),this.getGroupMessages(0),this.getGroupDetails(),this.deleteMessageSocket(),this.updateMessageSocket())})}ngOnInit(){this.elementRef.nativeElement.addEventListener("scroll",this.onScroll.bind(this)),this.renderer.listen("document","click",t=>this.onClickOutside(t))}onClickOutside(t){this.editingMessage&&this.editFormElement&&!this.editFormElement.nativeElement.contains(t.target)&&this.cancelEdit()}enterEditMode(t){this.editingMessage=t,this.newMessage=t.text,this.focusInput()}cancelEdit(){this.editingMessage=null,this.newMessage=""}updateMessages(){this.messages=[],this.receiveMessages()}joinGroup(t){this.socketService.emit("join-group",{groupId:this.groupId,groupMembers:t})}downloadFile(t,o){const n=t.split(".").pop()||"";"pdf"===n?o="ultimate.pdf":["png","jpg","jpeg"].includes(n)&&(o=`image.${n}`),fetch(t).then(a=>a.blob()).then(a=>{const c=window.URL.createObjectURL(a),l=document.createElement("a");l.href=c,l.download=o,l.click(),window.URL.revokeObjectURL(c)}).catch(a=>{console.error("Error downloading file:",a)})}onScroll(){const t=this.chatArea.nativeElement;if(0===t.scrollTop){const o=t.scrollHeight;this.page++,this.loadNewMessages&&this.getGroupMessages(o)}}receiveMessages(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.messageSubscription=this.socketService.on("receive-group-message").subscribe(t=>{t.groupId===this.groupId&&(t.sender?.conceptId==this.conceptId&&(t.isOwner=!0),Array.isArray(this.messages)||(this.messages=[]),this.messages.push(t),this.scrollToBottom())}),this.socketService.on("update-group-message-ids").subscribe(t=>{const o=this.messages.find(n=>n.tempId==t.tempId);o&&(o.messageId=t.messageId,o.id=t.id,delete o.tempId)})}openImageModal(t,o){const n=this.modalService.open(y.M,{centered:!0});n.componentInstance.imageUrl=t,n.componentInstance.sender=o}getGroupMessages(t){this._groupService.fetchGroupMessages(this.page,this.groupId).subscribe({next:o=>{this.isApiInProgress=!1,o?.messages?.length>0?(this.messages=[...o?.messages||[],...this.messages],setTimeout(()=>{this.chatArea.nativeElement.scrollTop=this.chatArea.nativeElement.scrollHeight-t},0)):this.loadNewMessages=!1,1===this.page&&(this.messagesUpdated=!0)}})}onInput(t){this.newMessage=t.target.value}remove(){this.previewImage=null,this.pdf=null}sendMessage(){if(!this.newMessage.trim()&&!this.file)return;const t={text:this.newMessage.trim(),groupId:this.groupId,userId:this.userId,entityId:this.entityId,createdAt:(new Date).toISOString(),token:this.token,groupImage:this.groupImage,sender:{conceptId:this.conceptId,firstName:this.userDetails?.firstName,lastName:this.userDetails?.lastName,profileImg:this.userDetails?.profileImg,entityId:this.entityId},type:"groupMessage"};this.file&&(t.attachments={file:this.file,filename:this.file.name,type:this.file.type}),this.socketService.emit("create-group-message",t),this.newMessage="",this.file=null,this.pdf=null,this.previewImage=null,setTimeout(()=>{this.scrollToBottom()},0)}handleFileInput(t){if(this.file=t.target.files[0],this.file){if(this.file.size>2097152)return void this._snackbarService.openSnackBar("File size exceeds 2MB limit","warning");const o=new FileReader;this.file.type.startsWith("image")&&(o.onload=n=>{this.previewImage=n.target.result},o.readAsDataURL(this.file)),this.file.type.startsWith("application/pdf")&&(this.pdf=this.file.name),this.focusInput()}else this.remove();t.target.value=""}focusInput(){this.messageInput&&this.messageInput.nativeElement.focus()}timeSince(t){const o=new Date,n=new Date(t),a=Math.floor((o.getTime()-n.getTime())/1e3);let c=Math.floor(a/31536e3);return c>=1?c+"y ago":(c=Math.floor(a/2592e3),c>=1?c+"m ago":(c=Math.floor(a/86400),c>=1?c+"d ago":(c=Math.floor(a/3600),c>=1?c+"h ago":(c=Math.floor(a/60),c>=1?c+"min ago":"Just now"))))}ngAfterViewChecked(){this.messagesUpdated&&(this.scrollToBottom(),this.messagesUpdated=!1)}getGroupDetails(){this._groupService.getGroupById(this.groupId).subscribe({next:t=>{this.isApiInProgressGD=!1;const o=t?.the_group;this.groupName=o?.the_group_name?.[0]?.the_name,this.groupImage=o?.the_group_image?.[0]?.the_image,this.isOwner=o?.isAdmin,this.isMember=o?.isMember;const n=this.entityId;let a;o?.the_group_s_member&&(a=o?.the_group_s_member.find(d=>d?.id==n)),this.groupMembers=o?.the_group_s_member;const c=this.groupMembers?.map(d=>d?.id)?.filter(d=>d);this.joinGroup(c);const l=this.groupMembers.map(d=>({firstName:d?.the_entity?.the_entity_user?.[0]?.data?.the_user?.entity?.person?.first_name,lastName:d?.the_entity?.the_entity_user?.[0]?.data?.the_user?.entity?.person?.last_name,profileImage:d?.the_entity?.the_entity_user?.[0]?.data?.the_user?.entity?.person?.profile_img,email:d?.the_entity?.the_entity_user?.[0]?.data?.the_user?.entity?.person?.email}));this.groupMembers=l,this.userDetails={conceptId:n,firstName:a?.the_entity?.the_entity_user?.[0]?.data?.the_user?.entity?.person?.first_name,lastName:a?.the_entity?.the_entity_user?.[0]?.data?.the_user?.entity?.person?.last_name,profileImg:a?.the_entity?.the_entity_user?.[0]?.data?.the_user?.entity?.person?.profile_img}},error:t=>{this.isApiInProgressGD=!1,this._snackbarService.openSnackBar(t.error.message,"error")}})}scrollToBottom(){try{setTimeout(()=>{this.chatArea.nativeElement.scrollTop=this.chatArea.nativeElement.scrollHeight,this.page=1},0)}catch(t){console.error("Error scrolling to bottom:",t)}}openGroupMembers(){const t=this.modalService.open(K.y,{centered:!0});t.componentInstance.groupMembers=this.groupMembers,t.componentInstance.groupId=this.groupId,t.componentInstance.isOwner=this.isOwner}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe()}updateMessage(){if(!this.newMessage.trim()||!this.editingMessage)return;const t=this.newMessage.trim(),o=this.editingMessage.messageId,n=this.editingMessage.id,a=this.editingMessage.createdAt;this.socketService.emit("update-message",{messageId:o,groupId:this.groupId,updatedText:t}),this._groupService.updateMessage(o,n,t,a).subscribe({next:()=>{this._snackbarService.openSnackBar("Message Updated","success")},error:()=>{this._snackbarService.openSnackBar("Cannot update message after 15 minutes of creation.","error"),this.cancelEdit()}})}deleteMessage(t){if(!t)return;const o=this.groupId,n=t.messageId;this.socketService.emit("delete-message",{groupId:o,messageId:n}),this._groupService.deleteMessage(o,n).subscribe({next:a=>{this._snackbarService.openSnackBar(a?.message,"success")},error:a=>{console.error("Error deleting message:",a),this._snackbarService.openSnackBar("Error deleting message","error")}})}openDelete(t){const o=this.modalService.open(ee,{size:"md"});o.componentInstance.messages=t,o.componentInstance.messageText=t?.text,o.componentInstance.groupId=this.groupId,o.componentInstance.messagesUpdated.subscribe(n=>{console.error(n,"updatesmessagess"),this.messages=n,this.getGroupMessages(0)})}deleteMessageSocket(){this.socketService.on("delete-message").subscribe(t=>{this.messages=this.messages.filter(o=>o.messageId!==t)})}updateMessageSocket(){this.socketService.on("update-message").subscribe(t=>{const o=this.messages.findIndex(n=>n.messageId==t?.messageId);-1!==o&&(this.messages[o].text=t?.updatedText),this.cancelEdit()})}};let s=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(I.$),e.Y36(C.e),e.Y36(m.gz),e.Y36(f.l),e.Y36(h.FF),e.Y36(b.o),e.Y36(e.SBq),e.Y36(g.qu),e.Y36(e.Qsj))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-messagebox"]],viewQuery:function(o,n){if(1&o&&(e.Gf(te,5),e.Gf(ne,5),e.Gf(oe,5)),2&o){let a;e.iGM(a=e.CRH())&&(n.chatArea=a.first),e.iGM(a=e.CRH())&&(n.editFormElement=a.first),e.iGM(a=e.CRH())&&(n.messageInput=a.first)}},decls:26,vars:24,consts:[[1,"chat-area"],[1,"chat-area-header"],[1,"chat-area-title"],[4,"ngIf"],["class","d-flex align-items-center gap-2",3,"routerLink",4,"ngIf"],[1,"chat-area-group"],[4,"ngFor","ngForOf"],[1,"chat-area-main",3,"scroll"],["chatArea",""],[1,"chat-area-footer"],["tabindex","0",1,"material-symbols-outlined","feather",3,"keyup","click"],["type","file","accept","image/*, application/pdf",2,"display","none",3,"change"],["fileUploadInput",""],[1,"input-container"],["class","pdf-container",4,"ngIf"],["placeholder","Type something here...","rows","1.5",1,"chat-msg-input",3,"ngModel","ngModelChange","input","keyup.enter"],["messageInput",""],["tabindex","0","class","remove-icon material-symbols-outlined",3,"keyup","click",4,"ngIf"],["tabindex","0",1,"material-symbols-outlined","feather-send","send-btn",3,"click","keyup.enter"],[1,"text-black"],[1,"d-flex","align-items-center","gap-2",3,"routerLink"],["alt","Group Image","class","group_image",3,"src",4,"ngIf","ngIfElse"],["noGroupImg",""],["alt","Group Image",1,"group_image",3,"src"],["src","./assets/groups_default.jpg","alt","",1,"group_image"],["tabindex","","class","chat-area-profile","alt","",3,"src","keyup","click",4,"ngIf","ngIfElse"],["noProfileImage",""],["tabindex","","alt","",1,"chat-area-profile",3,"src","keyup","click"],["src","./assets/man.png","alt","",1,"chat-area-profile"],[1,"no-conversation-container"],[1,"no-conversation-content"],["src","./assets/icons/no_chat.png","alt","No Conversation",1,"no-conversation-icon"],["class","chat-msg",3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"chat-msg",3,"ngClass","mouseenter","mouseleave"],[1,"chat-msg-profile"],[3,"routerLink"],["class","chat-msg-img","alt","",3,"src",4,"ngIf","ngIfElse"],[1,"chat-msg-content","col"],[1,"chat-msg-sender"],[1,"userName",3,"routerLink"],[1,"chat-msg-date"],[1,"chat-msg-text","d-flex","flex-column"],[1,"options-card",3,"ngClass"],[1,"options"],["title","Download","tabindex","0","class","download-link",3,"keyup","click",4,"ngIf"],["title","delete"],["tabindex","",1,"material-symbols-outlined",3,"click","keyup"],["alt","",1,"chat-msg-img",3,"src"],["src","./assets/man.png","alt","",1,"chat-msg-img"],[4,"ngIf","ngIfElse"],["pdfOrOther",""],[1,"file-container"],["tabindex","0",3,"keyup","click"],["alt","Image file",1,"image",3,"src"],[1,"pdf-container-msg"],["target","_blank",3,"href"],["title","Download","tabindex","0",1,"download-link",3,"keyup","click"],[1,"download-icon","material-symbols-outlined"],[1,"pdf-container"],["tabindex","0",1,"material-symbols-outlined","close-pdf",3,"click","keyup"],["tabindex","0",1,"remove-icon","material-symbols-outlined",3,"keyup","click"]],template:function(o,n){if(1&o){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,ie,3,0,"ng-container",3),e.YNc(4,ce,5,6,"a",4),e.qZA(),e.TgZ(5,"div",5),e.YNc(6,pe,4,2,"div",6),e.YNc(7,de,2,1,"span",3),e.qZA()(),e.TgZ(8,"div",7,8),e.NdJ("scroll",function(){return n.onScroll()}),e.YNc(10,me,3,0,"ng-container",3),e.YNc(11,ue,8,0,"ng-container",3),e.YNc(12,Pe,2,1,"ng-container",3),e.qZA(),e.TgZ(13,"div")(14,"div",9)(15,"span",10),e.NdJ("keyup",function(){e.CHM(a);const l=e.MAs(17);return e.KtG(l.click())})("click",function(){e.CHM(a);const l=e.MAs(17);return e.KtG(l.click())}),e.TgZ(16,"input",11,12),e.NdJ("change",function(l){return n.handleFileInput(l)}),e.qZA(),e._uU(18," attachment "),e.qZA(),e.TgZ(19,"div",13),e.YNc(20,ke,5,1,"div",14),e.TgZ(21,"textarea",15,16),e.NdJ("ngModelChange",function(l){return n.newMessage=l})("input",function(l){return n.onInput(l)})("keyup.enter",function(){return n.editingMessage?n.updateMessage():n.sendMessage()}),e.qZA(),e.YNc(23,ye,2,0,"span",17),e.TgZ(24,"span",18),e.NdJ("click",function(){return n.sendMessage()})("keyup.enter",function(){return n.sendMessage()}),e._uU(25," send "),e.qZA()()()()()}2&o&&(e.xp6(3),e.Q6J("ngIf",n.isApiInProgressGD),e.xp6(1),e.Q6J("ngIf",!n.isApiInProgressGD),e.xp6(2),e.Q6J("ngForOf",null==n.groupMembers?null:n.groupMembers.slice(0,3)),e.xp6(1),e.Q6J("ngIf",(null==n.groupMembers?null:n.groupMembers.length)>3),e.xp6(3),e.Q6J("ngIf",n.isApiInProgress),e.xp6(1),e.Q6J("ngIf",0===(null==n.messages?null:n.messages.length)&&!n.isApiInProgress),e.xp6(1),e.Q6J("ngIf",!n.isApiInProgress),e.xp6(8),e.Q6J("ngIf",n.pdf),e.xp6(1),e.Udp("background-image",n.previewImage?"url("+n.previewImage+")":"none")("background-size",n.previewImage?"50px 50px":"none")("background-repeat","no-repeat")("background-position",n.previewImage?"left 10px top 10px":"left 10px center")("padding-top",n.previewImage?"60px":"8px")("height",n.previewImage?"100px":"auto"),e.Q6J("ngModel",n.newMessage),e.xp6(2),e.Q6J("ngIf",n.previewImage),e.xp6(1),e.ekj("disabled",!n.newMessage))},dependencies:[u.mk,u.sg,u.O5,m.rH,g.Fj,g.JJ,g.On,T.u],styles:[".app[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;max-width:1600px;height:calc(100vh - 100px);margin:0 auto}.options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px}.options-card[_ngcontent-%COMP%], .options[_ngcontent-%COMP%]{display:none}.options-card[_ngcontent-%COMP%]{display:none;position:absolute;top:-20px;right:0;background-color:#fff;border:1px solid #ccc;border-radius:8px;box-shadow:0 2px 2px #0000001a;z-index:10}.options[_ngcontent-%COMP%]{display:flex;gap:10px;margin-right:5px}.material-symbols-outlined[_ngcontent-%COMP%]{cursor:pointer;font-size:20px;margin-top:5px;color:#000;margin-right:5px;margin-left:5px}.show-options[_ngcontent-%COMP%]{display:block}.chat-msg[_ngcontent-%COMP%]{position:relative}.chat-msg[_ngcontent-%COMP%]   .options-card[_ngcontent-%COMP%]{display:none;position:absolute;top:-20px;right:5px;background-color:#fff;box-shadow:0 0 5px #0003;z-index:10}.chat-msg[_ngcontent-%COMP%]   .show-options[_ngcontent-%COMP%], .show-options[_ngcontent-%COMP%]{display:block}.options[_ngcontent-%COMP%]   .more_vert[_ngcontent-%COMP%]{margin-left:auto}.chat-msg-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.chat-msg-sender[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:700;margin-bottom:5px}.btn-update[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));padding:7px 16px;border:none;margin-right:10px;color:#fff}.btn-cancel[_ngcontent-%COMP%]{background:linear-gradient(132deg,rgb(84,92,98) 0%,rgb(65,80,95) 100%);padding:7px 16px;border:none;color:#fff}.options[_ngcontent-%COMP%]{display:none;position:relative;cursor:pointer}.chat-msg.owner[_ngcontent-%COMP%]:hover   .options[_ngcontent-%COMP%]{display:inline-block}.chat-area[_ngcontent-%COMP%]{flex-grow:1}.msg-username[_ngcontent-%COMP%]{margin-bottom:4px;font-weight:600;font-size:15px}.msg-detail[_ngcontent-%COMP%]{overflow:hidden}.msg-content[_ngcontent-%COMP%]{font-weight:500;font-size:13px;display:flex}.chat-msg[_ngcontent-%COMP%]{transition:background-color .3s;word-break:break-all}.image[_ngcontent-%COMP%]{max-height:250px;max-width:-moz-fit-content;max-width:fit-content;border:4px solid #aca7a6;margin-bottom:10px}.chat-msg[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.file-container[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer}.chat-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:auto}.chat-area-header[_ngcontent-%COMP%]{display:flex;position:sticky;top:0;left:0;z-index:2;width:100%;align-items:center;justify-content:space-between;padding:14px;background:linear-gradient(to bottom,rgb(255,255,255) 0%,rgb(255,255,255) 78%,rgba(255,255,255,0) 100%);border-bottom:1px solid #9fa7ac}.chat-area-profile[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;object-fit:cover}.chat-area-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.chat-area-main[_ngcontent-%COMP%]{padding:10px 0;flex-grow:1;height:calc(100vh - 200px);overflow:auto}.input-container[_ngcontent-%COMP%]{position:relative;width:100%}.chat-msg-input[_ngcontent-%COMP%]{position:relative}.remove-icon[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;display:none;cursor:pointer;font-size:16px;background:rgba(255,255,255,.8);border-radius:50%;padding:2px}.input-container[_ngcontent-%COMP%]:hover   .remove-icon[_ngcontent-%COMP%]{display:inline}.chat-msg-img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:22%;margin-bottom:90%;object-fit:cover}.userName[_ngcontent-%COMP%]{color:#000}.chat-msg-profile[_ngcontent-%COMP%]{flex-shrink:0;position:relative}.chat-msg-date[_ngcontent-%COMP%]{margin-left:34px;bottom:0;font-size:12px;font-weight:600;color:#a9a9a9;white-space:nowrap}.date-divider[_ngcontent-%COMP%]{text-align:center;margin:10px 0;color:#888;font-weight:700}.chat-msg[_ngcontent-%COMP%]{display:flex;gap:10px;padding:0 18px}.chat-msg-content[_ngcontent-%COMP%]{margin-left:1px}.chat-msg-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.chat-msg-text[_ngcontent-%COMP%] + .chat-msg-text[_ngcontent-%COMP%]{margin-top:3px}.chat-area-footer[_ngcontent-%COMP%]{display:flex;align-items:center}.chat-msg-input[_ngcontent-%COMP%]::placeholder{color:#999}.chat-msg-input[_ngcontent-%COMP%]{position:relative;border:none;color:#273346;background-color:#f8f8fa;padding:8px 12px 12px;border-radius:6px;font-size:15px;margin:0 12px;width:90%;resize:none;overflow:auto;overflow-wrap:break-word;background-image:none;background-repeat:no-repeat;background-position:left 10px center;height:48px}.remove-icon[_ngcontent-%COMP%]{position:absolute;top:10px;left:59px;display:none;cursor:pointer;font-size:16px;color:#fff;background:rgba(63,60,60,.8);border-radius:50%;padding:2px}.input-wrapper[_ngcontent-%COMP%]:hover   .remove-icon[_ngcontent-%COMP%]{display:inline}.form-control[_ngcontent-%COMP%]{display:inline-block}.send-btn[_ngcontent-%COMP%]{margin-left:10px;color:#c1c7cd;width:20px;flex-shrink:0;position:absolute;top:9px;cursor:pointer}.send-btn[_ngcontent-%COMP%]:hover{color:#9fa7ac}.send-btn[_ngcontent-%COMP%] + .feather[_ngcontent-%COMP%]{margin-left:12px}.chat-msg-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;width:100%}.chat-area-footer[_ngcontent-%COMP%]{display:flex;border-top:1px solid #eef2f4;width:100%;padding:10px 20px;align-items:center;background-color:#fff;position:sticky;bottom:2px;left:0}.chat-area-footer[_ngcontent-%COMP%]   .feather[_ngcontent-%COMP%]{color:#c1c7cd;width:20px;flex-shrink:0;cursor:pointer}.chat-area-footer[_ngcontent-%COMP%]   .feather[_ngcontent-%COMP%]:hover{color:#9fa7ac}.chat-area-footer[_ngcontent-%COMP%]   .feather[_ngcontent-%COMP%] + .feather[_ngcontent-%COMP%]{margin-left:12px}.chat-area-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;color:#273346;background-color:#f8f8fa;padding:12px;border-radius:6px;font-size:15px;margin:0 12px;width:90%}.chat-area-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#a2a2a2}.chat-area-group[_ngcontent-%COMP%]{flex-shrink:0;cursor:pointer;display:flex}.chat-area-group[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{border:2px solid #fff}.chat-area-group[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:-5px}.chat-area-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:32px;height:32px;background-color:#f0f7ff;color:#0086ff;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:14px;font-weight:500}@media (max-width: 1120px){.detail-area[_ngcontent-%COMP%]{display:none}}@media (max-width: 780px){.conversation-area[_ngcontent-%COMP%]{display:none}.search-bar[_ngcontent-%COMP%]{margin-left:0;flex-grow:1}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:10px}}.preview_image[_ngcontent-%COMP%]{border:1px solid #fd7e14;border-radius:5px;width:100px;height:100px}.pdf-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:1px solid #dc3545;padding:5px 50px 5px 10px;border-radius:5px;position:relative;left:15px}.pdf-container[_ngcontent-%COMP%]   .close-pdf[_ngcontent-%COMP%]{position:absolute;top:5px;right:10px;cursor:pointer}.pdf-container-msg[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:2px solid #aca7a6;padding:5px 50px 5px 10px;border-radius:5px}.no-conversation-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;text-align:center;color:#606060}.no-conversation-content[_ngcontent-%COMP%]{max-width:400px}.no-conversation-icon[_ngcontent-%COMP%]{width:150px;margin-bottom:20px}.group_image[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:5px;object-fit:cover}"]}),s})();const Te=["chatArea"],Ze=["editFormElement"],Ae=["messageInput"];function Se(s,r){1&s&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2,"Looking for data..."),e.qZA(),e.BQk())}function Ue(s,r){if(1&s&&e._UZ(0,"img",21),2&s){const i=e.oxw(2);e.s9C("src",null==i.receiver?null:i.receiver.image,e.LSH)}}function Ne(s,r){1&s&&e._UZ(0,"img",22)}const De=function(s){return[s]};function Ge(s,r){if(1&s&&(e.TgZ(0,"a",18),e.YNc(1,Ue,1,1,"img",19),e.YNc(2,Ne,1,0,"ng-template",null,20,e.W1O),e._uU(4),e.qZA()),2&s){const i=e.MAs(3),t=e.oxw();e.Q6J("routerLink",e.VKq(4,De,"/bm/"+(null==t.receiver?null:t.receiver.conceptId))),e.xp6(1),e.Q6J("ngIf",null==t.receiver?null:t.receiver.image)("ngIfElse",i),e.xp6(3),e.hij(" ",t.name," ")}}function Je(s,r){1&s&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2,"Looking for data..."),e.qZA(),e.BQk())}function qe(s,r){1&s&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24),e._UZ(3,"img",25),e.TgZ(4,"h1"),e._uU(5,"No conversation"),e.qZA(),e.TgZ(6,"p"),e._uU(7," There are no conversations yet. Start a new conversation to get things going. "),e.qZA()()(),e.BQk())}function Ee(s,r){if(1&s&&e._UZ(0,"img",41),2&s){const i=e.oxw().$implicit;e.Q6J("src",null==i||null==i.sender?null:i.sender.profileImg,e.LSH)}}function Qe(s,r){1&s&&e._UZ(0,"img",42)}function Ye(s,r){if(1&s){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",45)(2,"a",46),e.NdJ("keyup",function(){e.CHM(i);const o=e.oxw(2).$implicit,n=e.oxw();return e.KtG(n.openImageModal(o.fileurl,o.sender))})("click",function(){e.CHM(i);const o=e.oxw(2).$implicit,n=e.oxw();return e.KtG(n.openImageModal(o.fileurl,o.sender))}),e._UZ(3,"img",47),e.qZA()(),e.BQk()}if(2&s){const i=e.oxw(2).$implicit;e.xp6(3),e.Q6J("src",i.fileurl,e.LSH)}}function Fe(s,r){if(1&s&&(e.ynx(0),e.TgZ(1,"div",45)(2,"div",48)(3,"a",49)(4,"span"),e._uU(5),e.qZA()()()(),e.BQk()),2&s){const i=e.oxw(3).$implicit;e.xp6(3),e.s9C("href",i.fileurl,e.LSH),e.xp6(2),e.Oqu(i.filename)}}function He(s,r){if(1&s&&e.YNc(0,Fe,6,2,"ng-container",3),2&s){const i=e.oxw(2).$implicit;e.Q6J("ngIf","file"===i.type)}}function ze(s,r){if(1&s&&(e.ynx(0),e.YNc(1,Ye,4,1,"ng-container",43),e.YNc(2,He,1,1,"ng-template",null,44,e.W1O),e.BQk()),2&s){const i=e.MAs(3),t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","image"===t.type)("ngIfElse",i)}}function je(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"a",50),e.NdJ("keyup",function(){e.CHM(i);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.downloadFile(o.fileurl,o.filename))})("click",function(){e.CHM(i);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.downloadFile(o.fileurl,o.filename))}),e.TgZ(1,"span",51),e._uU(2," download "),e.qZA()()}}const Le=function(s){return{owner:s}},Be=function(s){return{"show-options":s}};function $e(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"div",26),e.NdJ("mouseenter",function(){const n=e.CHM(i).$implicit;return e.KtG(n.isHovered=n.isOwner)})("mouseleave",function(){const n=e.CHM(i).$implicit;return e.KtG(n.isHovered=!1)}),e.TgZ(1,"div",27)(2,"a",28),e.YNc(3,Ee,1,1,"img",29),e.YNc(4,Qe,1,0,"ng-template",null,30,e.W1O),e.qZA()(),e.TgZ(6,"div",31)(7,"div",32)(8,"div")(9,"a",33),e._uU(10),e.qZA(),e.TgZ(11,"span",34),e._uU(12),e.ALo(13,"UTCToLocalTime"),e.qZA()()(),e.ynx(14),e.TgZ(15,"div",35),e._uU(16),e.qZA(),e.BQk(),e.YNc(17,ze,4,2,"ng-container",3),e.qZA(),e.TgZ(18,"div",36)(19,"div",37),e.YNc(20,je,3,0,"a",38),e.TgZ(21,"a",39)(22,"span",40),e.NdJ("click",function(){const n=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.deleteMessage(n))})("keyup",function(){const n=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.deleteMessage(n))}),e._uU(23," delete "),e.qZA()(),e.TgZ(24,"a")(25,"span",40),e.NdJ("click",function(){const n=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.enterEditMode(n))})("keyup",function(){const n=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.enterEditMode(n))}),e._uU(26," edit_square "),e.qZA()()()()()}if(2&s){const i=r.$implicit,t=e.MAs(5),o=e.oxw();e.Q6J("ngClass",e.VKq(14,Le,null==i?null:i.isOwner)),e.xp6(2),e.Q6J("routerLink","/bm/"+(null==i||null==i.sender?null:i.sender.conceptId)),e.xp6(1),e.Q6J("ngIf",null==i||null==i.sender?null:i.sender.profileImg)("ngIfElse",t),e.xp6(6),e.Q6J("routerLink","/bm/"+(null==i||null==i.sender?null:i.sender.conceptId)),e.xp6(1),e.AsE(" ",null==i||null==i.sender?null:i.sender.firstName," ",null==i||null==i.sender?null:i.sender.lastName," "),e.xp6(2),e.hij(" ",o.timeSince(e.lcZ(13,12,(null==i?null:i.createdAt)||""))," "),e.xp6(4),e.hij(" ",null==i?null:i.text," "),e.xp6(1),e.Q6J("ngIf",i.filename),e.xp6(1),e.Q6J("ngClass",e.VKq(16,Be,i.isHovered&&i.isOwner)),e.xp6(2),e.Q6J("ngIf",i.filename)}}function Ke(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"div",52)(1,"span",53),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.remove())})("keyup",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.remove())}),e._uU(2," close "),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()}if(2&s){const i=e.oxw();e.xp6(4),e.Oqu(i.pdf)}}function Re(s,r){if(1&s){const i=e.EpF();e.TgZ(0,"span",54),e.NdJ("keyup",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.remove())})("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.remove())}),e._uU(1," close "),e.qZA()}}let We=(()=>{const r=class{constructor(t,o,n,a,c,l,d,x,v){this.socketService=t,this._auth=o,this._route=n,this._groupService=a,this.modalService=c,this._snackbarService=l,this.elementRef=d,this.fb=x,this.renderer=v,this.messages=[],this.newMessage="",this.isOwner=!1,this.isMember=!1,this.name="",this.scrolling=!1,this.editingMessage=null,this.previewImage=null,this.page=1,this.scrolledToBottom=!0,this.messagesUpdated=!1,this.loadNewMessages=!0,this.count=5,this.isApiInProgress=!0,this.isApiInProgressUser=!0;const _=this._auth.loadFromLocalStorage();this.conceptId=_.userConcept,this.entityId=_.entityId,this.userId=_.theUserId,this.token=_.token,this.editMessageForm=this.fb.group({messageText:["",g.kI.required]}),this._route.params.subscribe(O=>{const M=O.privateGroupId;M!==this.groupId&&this.entityId&&(this.isApiInProgress=!0,this.isApiInProgressUser=!0,this.groupId=M,this.page=1,this.updateMessages(),this.getuserDMs(0),this.getDMUserDetail(),this.deleteMessageSocket(),this.updateMessageSocket())})}ngOnInit(){this.elementRef.nativeElement.addEventListener("scroll",this.onScroll.bind(this)),this.renderer.listen("document","click",t=>this.onClickOutside(t))}updateMessages(){this.messages=[],this.receiveMessages()}joinGroup(t){this.socketService.emit("join-group",{groupId:this.groupId,groupMembers:t})}onClickOutside(t){this.editingMessage&&this.editFormElement&&!this.editFormElement.nativeElement.contains(t.target)&&this.cancelEdit()}downloadFile(t,o){fetch(t).then(n=>n.blob()).then(n=>{const a=window.URL.createObjectURL(n),c=document.createElement("a");c.href=a,c.download=o,c.click(),window.URL.revokeObjectURL(a)}).catch(n=>{console.error("Error downloading file:",n)})}onScroll(){const t=this.chatArea.nativeElement;if(0===t.scrollTop){const o=t.scrollHeight;this.page++,this.loadNewMessages&&this.getuserDMs(o)}}receiveMessages(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.messageSubscription=this.socketService.on("receive-group-message").subscribe(t=>{t.groupId===this.groupId&&(t.sender?.conceptId==this.conceptId&&(t.isOwner=!0),Array.isArray(this.messages)||(this.messages=[]),this.messages.push(t),this.scrollToBottom())}),this.socketService.on("update-group-message-ids").subscribe(t=>{const o=this.messages.find(n=>n.tempId==t.tempId);o&&(o.messageId=t.messageId,o.id=t.id,delete o.tempId)})}openImageModal(t,o){const n=this.modalService.open(y.M,{centered:!0});n.componentInstance.imageUrl=t,n.componentInstance.sender=o}getuserDMs(t){this._groupService.fetchDMs(this.page,this.groupId).subscribe({next:o=>{this.isApiInProgress=!1,o?.messages?.length>0?(this.messages=[...o?.messages||[],...this.messages],setTimeout(()=>{this.chatArea.nativeElement.scrollTop=this.chatArea.nativeElement.scrollHeight-t},0)):this.loadNewMessages=!1,1===this.page&&(this.messagesUpdated=!0)},error:()=>{this.isApiInProgress=!1}})}onInput(t){this.newMessage=t.target.value}remove(){this.previewImage=null,this.pdf=null}sendMessage(){if(!this.newMessage.trim()&&!this.file)return;const t={text:this.newMessage.trim(),groupId:this.groupId,userId:this.userId,entityId:this.entityId,createdAt:(new Date).toISOString(),token:this.token,groupImage:this.groupImage,sender:{conceptId:this.conceptId,firstName:this.userDetails?.firstName,lastName:this.userDetails?.lastName,profileImg:this.userDetails?.profileImg,entityId:this.entityId},type:"privateMessage"};this.file&&(t.attachments={file:this.file,filename:this.file.name,type:this.file.type}),this.socketService.emit("create-group-message",t),this.newMessage="",this.file=null,this.pdf=null,this.previewImage=null,setTimeout(()=>{this.scrollToBottom()},0)}handleFileInput(t){if(this.file=t.target.files[0],this.file){if(this.file.size>2097152)return void this._snackbarService.openSnackBar("File size exceeds 2MB limit","warning");const o=new FileReader;this.file.type.startsWith("image")&&(o.onload=n=>{this.previewImage=n.target.result},o.readAsDataURL(this.file)),this.file.type.startsWith("application/pdf")&&(this.pdf=this.file.name),this.focusInput()}else this.remove();t.target.value=""}focusInput(){this.messageInput&&this.messageInput.nativeElement.focus()}timeSince(t){const o=new Date,n=new Date(t),a=Math.floor((o.getTime()-n.getTime())/1e3);let c=Math.floor(a/31536e3);return c>1?c+"y ago":(c=Math.floor(a/2592e3),c>1?c+"m ago":(c=Math.floor(a/86400),c>1?c+"d ago":(c=Math.floor(a/3600),c>1?c+"h ago":(c=Math.floor(a/60),c>1?c+"min ago":"Just now"))))}ngAfterViewChecked(){this.messagesUpdated&&(this.scrollToBottom(),this.messagesUpdated=!1)}getDMUserDetail(){this._groupService.getDMUserDetail(this.groupId,this.entityId).subscribe({next:t=>{this.isApiInProgressUser=!1,this.receiver=t?.data?.receiver;const o=t?.data?.sender;this.name=this.receiver?.name;const n=this.entityId;this.joinGroup([this.receiver?.entityId]),this.userDetails={conceptId:n,firstName:o?.name,lastName:"",profileImg:o?.image}},error:()=>{this.isApiInProgressUser=!1}})}scrollToBottom(){try{setTimeout(()=>{this.chatArea.nativeElement.scrollTop=this.chatArea.nativeElement.scrollHeight,this.page=1},0)}catch(t){console.error("Error scrolling to bottom:",t)}}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe()}enterEditMode(t){this.editingMessage=t,this.newMessage=t.text,this.focusInput()}cancelEdit(){this.editingMessage=null,this.newMessage=""}updateMessage(){if(!this.newMessage.trim()||!this.editingMessage)return;const t=this.newMessage.trim(),o=this.editingMessage.messageId,n=this.editingMessage.id,a=this.editingMessage.createdAt;this.socketService.emit("update-message",{messageId:o,groupId:this.groupId,updatedText:t}),this._groupService.updateMessage(o,n,t,a).subscribe({next:()=>{this._snackbarService.openSnackBar("Message Updated","success"),this.editingMessage=null,this.newMessage=""},error:()=>{this._snackbarService.openSnackBar("Cannot update message after 15 minutes of creation.","error"),this.cancelEdit()}})}deleteMessage(t){if(!t)return;const o=this.groupId,n=t.messageId;this.socketService.emit("delete-message",{groupId:o,messageId:n}),this._groupService.deleteDM(o,n).subscribe({next:a=>{this._snackbarService.openSnackBar(a?.message,"success")},error:a=>{console.error("Error deleting message:",a),this._snackbarService.openSnackBar("Error deleting message","error")}})}deleteMessageSocket(){this.socketService.on("delete-message").subscribe(t=>{this.messages=this.messages.filter(o=>o.messageId!==t)})}updateMessageSocket(){this.socketService.on("update-message").subscribe(t=>{const o=this.messages.findIndex(n=>n.messageId==t?.messageId);-1!==o&&(this.messages[o].text=t?.updatedText),this.cancelEdit()})}};let s=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(I.$),e.Y36(C.e),e.Y36(m.gz),e.Y36(f.l),e.Y36(h.FF),e.Y36(b.o),e.Y36(e.SBq),e.Y36(g.qu),e.Y36(e.Qsj))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-direct-message"]],viewQuery:function(o,n){if(1&o&&(e.Gf(Te,5),e.Gf(Ze,5),e.Gf(Ae,5)),2&o){let a;e.iGM(a=e.CRH())&&(n.chatArea=a.first),e.iGM(a=e.CRH())&&(n.editFormElement=a.first),e.iGM(a=e.CRH())&&(n.messageInput=a.first)}},decls:22,vars:22,consts:[[1,"chat-area"],[1,"chat-area-header"],[1,"chat-area-title"],[4,"ngIf"],["class","d-flex align-items-center gap-2",3,"routerLink",4,"ngIf"],[1,"chat-area-main",3,"scroll"],["chatArea",""],["class","chat-msg",3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"chat-area-footer"],["tabindex","0",1,"material-symbols-outlined","feather",3,"keyup","click"],["type","file","accept","image/*, application/pdf",2,"display","none",3,"change"],["fileUploadInput",""],[1,"input-container"],["class","pdf-container",4,"ngIf"],["type","text","placeholder","Type something here...","rows","1.5",1,"chat-msg-input",3,"ngModel","ngModelChange","input","keyup.enter"],["messageInput",""],["tabindex","0","class","remove-icon material-symbols-outlined",3,"keyup","click",4,"ngIf"],["tabindex","0",1,"material-symbols-outlined","feather-send","send-btn",3,"click","keyup.enter"],[1,"d-flex","align-items-center","gap-2",3,"routerLink"],["alt","Group Image","class","group_image",3,"src",4,"ngIf","ngIfElse"],["NoImage",""],["alt","Group Image",1,"group_image",3,"src"],["src","./assets/man.png","alt","",1,"group_image"],[1,"no-conversation-container"],[1,"no-conversation-content"],["src","./assets/icons/no_chat.png","alt","No Conversation",1,"no-conversation-icon"],[1,"chat-msg",3,"ngClass","mouseenter","mouseleave"],[1,"chat-msg-profile"],[3,"routerLink"],["class","chat-msg-img","alt","",3,"src",4,"ngIf","ngIfElse"],["noProfileImage",""],[1,"chat-msg-content","col"],[1,"chat-msg-sender"],[1,"userName",3,"routerLink"],[1,"chat-msg-date"],[1,"chat-msg-text","d-flex","flex-column"],[1,"options-card",3,"ngClass"],[1,"options"],["title","Download","tabindex","0","class","download-link",3,"keyup","click",4,"ngIf"],["title","delete"],["tabindex","",1,"material-symbols-outlined",3,"click","keyup"],["alt","",1,"chat-msg-img",3,"src"],["src","./assets/man.png","alt","",1,"chat-msg-img"],[4,"ngIf","ngIfElse"],["pdfOrOther",""],[1,"file-container"],["tabindex","0",3,"keyup","click"],["alt","Image file",1,"image",3,"src"],[1,"pdf-container-msg"],["target","_blank",3,"href"],["title","Download","tabindex","0",1,"download-link",3,"keyup","click"],[1,"download-icon","material-symbols-outlined"],[1,"pdf-container"],["tabindex","0",1,"material-symbols-outlined","close-pdf",3,"click","keyup"],["tabindex","0",1,"remove-icon","material-symbols-outlined",3,"keyup","click"]],template:function(o,n){if(1&o){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Se,3,0,"ng-container",3),e.YNc(4,Ge,5,6,"a",4),e.qZA()(),e.TgZ(5,"div",5,6),e.NdJ("scroll",function(){return n.onScroll()}),e.YNc(7,Je,3,0,"ng-container",3),e.YNc(8,qe,8,0,"ng-container",3),e.YNc(9,$e,27,18,"div",7),e.qZA(),e.TgZ(10,"div",8)(11,"span",9),e.NdJ("keyup",function(){e.CHM(a);const l=e.MAs(13);return e.KtG(l.click())})("click",function(){e.CHM(a);const l=e.MAs(13);return e.KtG(l.click())}),e.TgZ(12,"input",10,11),e.NdJ("change",function(l){return n.handleFileInput(l)}),e.qZA(),e._uU(14," attachment "),e.qZA(),e.TgZ(15,"div",12),e.YNc(16,Ke,5,1,"div",13),e.TgZ(17,"textarea",14,15),e.NdJ("ngModelChange",function(l){return n.newMessage=l})("input",function(l){return n.onInput(l)})("keyup.enter",function(){return n.editingMessage?n.updateMessage():n.sendMessage()}),e.qZA(),e.YNc(19,Re,2,0,"span",16),e.TgZ(20,"span",17),e.NdJ("click",function(){return n.sendMessage()})("keyup.enter",function(){return n.sendMessage()}),e._uU(21," send "),e.qZA()()()()}2&o&&(e.xp6(3),e.Q6J("ngIf",n.isApiInProgressUser),e.xp6(1),e.Q6J("ngIf",!n.isApiInProgressUser),e.xp6(3),e.Q6J("ngIf",n.isApiInProgress),e.xp6(1),e.Q6J("ngIf",0===(null==n.messages?null:n.messages.length)&&!n.isApiInProgress),e.xp6(1),e.Q6J("ngForOf",n.messages),e.xp6(7),e.Q6J("ngIf",n.pdf),e.xp6(1),e.Udp("background-image",n.previewImage?"url("+n.previewImage+")":"none")("background-size",n.previewImage?"50px 50px":"none")("background-repeat","no-repeat")("background-position",n.previewImage?"left 10px top 10px":"left 10px center")("padding-top",n.previewImage?"60px":"8px")("height",n.previewImage?"100px":"auto"),e.Q6J("ngModel",n.newMessage),e.xp6(2),e.Q6J("ngIf",n.previewImage),e.xp6(1),e.ekj("disabled",!n.newMessage))},dependencies:[u.mk,u.sg,u.O5,m.rH,g.Fj,g.JJ,g.On,T.u],styles:[".app[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;max-width:1600px;height:calc(100vh - 100px);margin:0 auto}.options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px}.options-card[_ngcontent-%COMP%], .options[_ngcontent-%COMP%]{display:none}.options-card[_ngcontent-%COMP%]{display:none;position:absolute;top:-20px;right:0;background-color:#fff;border:1px solid #ccc;border-radius:8px;box-shadow:0 2px 2px #0000001a;z-index:10}.options[_ngcontent-%COMP%]{display:flex;gap:10px;margin-right:5px}.material-symbols-outlined[_ngcontent-%COMP%]{cursor:pointer;font-size:20px;margin-top:5px;color:#000;margin-right:5px;margin-left:5px}.show-options[_ngcontent-%COMP%]{display:block}.chat-msg[_ngcontent-%COMP%]{position:relative}.chat-msg[_ngcontent-%COMP%]   .options-card[_ngcontent-%COMP%]{display:none;position:absolute;top:-20px;right:5px;background-color:#fff;box-shadow:0 0 5px #0003;z-index:10}.chat-msg[_ngcontent-%COMP%]   .show-options[_ngcontent-%COMP%], .show-options[_ngcontent-%COMP%]{display:block}.options[_ngcontent-%COMP%]   .more_vert[_ngcontent-%COMP%]{margin-left:auto}.chat-msg-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.chat-msg-sender[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:700;margin-bottom:5px}.btn-update[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));padding:7px 16px;border:none;margin-right:10px;color:#fff}.btn-cancel[_ngcontent-%COMP%]{background:linear-gradient(132deg,rgb(84,92,98) 0%,rgb(65,80,95) 100%);padding:7px 16px;border:none;color:#fff}.options[_ngcontent-%COMP%]{display:none;position:relative;cursor:pointer}.chat-msg.owner[_ngcontent-%COMP%]:hover   .options[_ngcontent-%COMP%]{display:inline-block}.chat-area[_ngcontent-%COMP%]{flex-grow:1}.msg-username[_ngcontent-%COMP%]{margin-bottom:4px;font-weight:600;font-size:15px}.msg-detail[_ngcontent-%COMP%]{overflow:hidden}.msg-content[_ngcontent-%COMP%]{font-weight:500;font-size:13px;display:flex}.chat-msg[_ngcontent-%COMP%]{transition:background-color .3s;word-break:break-all}.image[_ngcontent-%COMP%]{max-height:250px;max-width:-moz-fit-content;max-width:fit-content;border:4px solid #aca7a6;margin-bottom:10px}.chat-msg[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.file-container[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer}.chat-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:auto}.chat-area-header[_ngcontent-%COMP%]{display:flex;position:sticky;top:0;left:0;z-index:2;width:100%;align-items:center;justify-content:space-between;padding:14px;background:linear-gradient(to bottom,rgb(255,255,255) 0%,rgb(255,255,255) 78%,rgba(255,255,255,0) 100%);border-bottom:1px solid #9fa7ac}.chat-area-profile[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;object-fit:cover}.chat-area-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.chat-area-main[_ngcontent-%COMP%]{padding:10px 0;flex-grow:1;height:calc(100vh - 200px);overflow:auto}.input-container[_ngcontent-%COMP%]{position:relative;width:100%}.chat-msg-input[_ngcontent-%COMP%]{position:relative}.remove-icon[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;display:none;cursor:pointer;font-size:16px;background:rgba(255,255,255,.8);border-radius:50%;padding:2px}.input-container[_ngcontent-%COMP%]:hover   .remove-icon[_ngcontent-%COMP%]{display:inline}.chat-msg-img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:22%;margin-bottom:90%;object-fit:cover}.userName[_ngcontent-%COMP%]{color:#000}.chat-msg-profile[_ngcontent-%COMP%]{flex-shrink:0;position:relative}.chat-msg-date[_ngcontent-%COMP%]{margin-left:34px;bottom:0;font-size:12px;font-weight:600;color:#a9a9a9;white-space:nowrap}.date-divider[_ngcontent-%COMP%]{text-align:center;margin:10px 0;color:#888;font-weight:700}.chat-msg[_ngcontent-%COMP%]{display:flex;gap:10px;padding:0 18px}.chat-msg-content[_ngcontent-%COMP%]{margin-left:1px}.chat-msg-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.chat-msg-text[_ngcontent-%COMP%] + .chat-msg-text[_ngcontent-%COMP%]{margin-top:3px}.chat-area-footer[_ngcontent-%COMP%]{display:flex;align-items:center}.chat-msg-input[_ngcontent-%COMP%]::placeholder{color:#999}.chat-msg-input[_ngcontent-%COMP%]{position:relative;border:none;color:#273346;background-color:#f8f8fa;padding:8px 12px 12px;border-radius:6px;font-size:15px;margin:0 12px;width:90%;resize:none;overflow:auto;overflow-wrap:break-word;background-image:none;background-repeat:no-repeat;background-position:left 10px center;height:48px}.remove-icon[_ngcontent-%COMP%]{position:absolute;top:10px;left:59px;display:none;cursor:pointer;font-size:16px;color:#fff;background:rgba(63,60,60,.8);border-radius:50%;padding:2px}.input-wrapper[_ngcontent-%COMP%]:hover   .remove-icon[_ngcontent-%COMP%]{display:inline}.form-control[_ngcontent-%COMP%]{display:inline-block}.send-btn[_ngcontent-%COMP%]{margin-left:10px;color:#c1c7cd;width:20px;flex-shrink:0;position:absolute;top:9px;cursor:pointer}.send-btn[_ngcontent-%COMP%]:hover{color:#9fa7ac}.send-btn[_ngcontent-%COMP%] + .feather[_ngcontent-%COMP%]{margin-left:12px}.chat-msg-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;width:100%}.chat-area-footer[_ngcontent-%COMP%]{display:flex;border-top:1px solid #eef2f4;width:100%;padding:10px 20px;align-items:center;background-color:#fff;position:sticky;bottom:2px;left:0}.chat-area-footer[_ngcontent-%COMP%]   .feather[_ngcontent-%COMP%]{color:#c1c7cd;width:20px;flex-shrink:0;cursor:pointer}.chat-area-footer[_ngcontent-%COMP%]   .feather[_ngcontent-%COMP%]:hover{color:#9fa7ac}.chat-area-footer[_ngcontent-%COMP%]   .feather[_ngcontent-%COMP%] + .feather[_ngcontent-%COMP%]{margin-left:12px}.chat-area-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;color:#273346;background-color:#f8f8fa;padding:12px;border-radius:6px;font-size:15px;margin:0 12px;width:90%}.chat-area-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#a2a2a2}.chat-area-group[_ngcontent-%COMP%]{flex-shrink:0;cursor:pointer;display:flex}.chat-area-group[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{border:2px solid #fff}.chat-area-group[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:-5px}.chat-area-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:32px;height:32px;background-color:#f0f7ff;color:#0086ff;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:14px;font-weight:500}@media (max-width: 1120px){.detail-area[_ngcontent-%COMP%]{display:none}}@media (max-width: 780px){.conversation-area[_ngcontent-%COMP%]{display:none}.search-bar[_ngcontent-%COMP%]{margin-left:0;flex-grow:1}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:10px}}.preview_image[_ngcontent-%COMP%]{border:1px solid #fd7e14;border-radius:5px;width:100px;height:100px}.pdf-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:1px solid #dc3545;padding:5px 50px 5px 10px;border-radius:5px;position:relative;left:15px}.pdf-container[_ngcontent-%COMP%]   .close-pdf[_ngcontent-%COMP%]{position:absolute;top:5px;right:10px;cursor:pointer}.pdf-container-msg[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:2px solid #aca7a6;padding:5px 50px 5px 10px;border-radius:5px}.no-conversation-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;text-align:center;color:#606060}.no-conversation-content[_ngcontent-%COMP%]{max-width:400px}.no-conversation-icon[_ngcontent-%COMP%]{width:150px;margin-bottom:20px}.group_image[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:5px;object-fit:cover}"]}),s})();const Xe=[{component:$,path:"message",canActivate:[p(3870).a],children:[{path:":groupId",component:Ie},{path:"dm/:privateGroupId",component:We}]}];let et=(()=>{const r=class{};let s=r;return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.Bz.forChild(Xe),m.Bz]}),s})();var tt=p(8255);let nt=(()=>{const r=class{};let s=r;return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.ez,et,g.u5,h.XC,tt.Tx,g.UX]}),s})()}}]);