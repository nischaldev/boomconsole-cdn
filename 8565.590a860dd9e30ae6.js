"use strict";(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[8565],{8565:(w,A,u)=>{u.r(A),u.d(A,{ModuleManagementModule:()=>me});var _=u(6895),v=u(7518),M=u(3900),r=u(4006),d=u(9653),Z=u(7899);const I=(0,d.ZF)("mymodules"),U=(0,d.PH)("[Modules API] Invoke Modules Fetch API"),y=(0,d.PH)("[Modules API] Fetch API Success",(0,d.Ky)()),C=(0,d.PH)("[Modules API] Invoke save new Module api",(0,d.Ky)()),N=(0,d.PH)("[Modules API] save new Module api success",(0,d.Ky)()),F=(0,d.PH)("[Modules API] Inovke update Module api",(0,d.Ky)()),x=(0,d.PH)("[Modules API] update  Module api success",(0,d.Ky)());var q=u(3223),m=u(8905),e=u(4650),T=u(9446);function D(o,t){1&o&&(e.TgZ(0,"div",24),e._UZ(1,"span",25),e.qZA())}function O(o,t){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&o){const l=e.oxw();e.xp6(1),e.hij(" ",l.errorMessage," ")}}function E(o,t){1&o&&(e.TgZ(0,"small",27),e._uU(1," Please enter first name. "),e.qZA())}function $(o,t){1&o&&(e.TgZ(0,"small",27),e._uU(1," Please enter module url. "),e.qZA())}function z(o,t){1&o&&(e.TgZ(0,"div",28)(1,"h4",29),e._uU(2,"Sub Menus"),e.qZA()())}function B(o,t){1&o&&(e.TgZ(0,"small",27),e._uU(1," Please enter menu title. "),e.qZA())}function G(o,t){1&o&&(e.TgZ(0,"small",27),e._uU(1," Please enter menu title. "),e.qZA())}function K(o,t){if(1&o){const l=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31)(3,"div"),e._uU(4,"Title"),e.qZA(),e._UZ(5,"input",32),e.YNc(6,B,2,0,"small",11),e.qZA(),e.TgZ(7,"div",31)(8,"div"),e._uU(9,"Url"),e.qZA(),e._UZ(10,"input",33),e.YNc(11,G,2,0,"small",11),e.qZA(),e.TgZ(12,"div",34)(13,"a",35),e.NdJ("click",function(){const n=e.CHM(l).index,s=e.oxw();return e.KtG(s.deleteMenu(n))}),e.TgZ(14,"span",20),e._uU(15," delete "),e.qZA()()()(),e.BQk()}if(2&o){const l=t.$implicit,a=t.index;e.oxw();const i=e.MAs(1);let n,s;e.xp6(1),e.Q6J("formGroupName",a),e.xp6(5),e.Q6J("ngIf",l.get("name")&&(null==(n=l.get("name"))?null:n.invalid)&&((null==(n=l.get("name"))?null:n.touched)||i.submitted)),e.xp6(5),e.Q6J("ngIf",l.get("url")&&(null==(s=l.get("url"))?null:s.invalid)&&((null==(s=l.get("url"))?null:s.touched)||i.submitted))}}let L=(()=>{const t=class{formInitialize(){this.updateForm=this._fb.group({module_name:new r.NI("",[r.kI.required]),module_url:new r.NI("",[r.kI.required]),module_icon:new r.NI(""),module_description:new r.NI(""),module_order:new r.NI(0),menus:this._fb.array([])})}get name(){return this.updateForm.get("module_name")}get module_url(){return this.updateForm.get("module_url")}get menus(){return this.updateForm.controls.menus}constructor(a,i,n,s,c,h){this._fb=a,this.activeModal=i,this._store=n,this._appStore=s,this._activatedroute=c,this._router=h,this.loader=!1,this.compositionName=Z.DP,this.loginError=!1}ngOnInit(){this.formInitialize(),this._activatedroute.paramMap.pipe((0,M.w)(i=>(this.moduleId=this.itemId,this._store.pipe((0,d.Ys)((o=>(0,d.P1)(I,t=>{if(typeof t?.data>"u")return null;var l=t?.data.filter(a=>a.id==o);return 0==l?.length?null:l[0]}))(this.moduleId)))))).subscribe({next:i=>{this.populateUpdateForm(i?.data[this.compositionName])},error:i=>{this._router.navigate(["/module-management"])}})}populateUpdateForm(a){this.updateForm.patchValue({module_name:a?.module_name,module_url:a?.module_url,module_icon:a?.module_icon,module_description:a?.module_description,module_order:a?.module_order??0});let i=a?.menus;i?.length>0&&i.forEach(n=>{const s=this._fb.group({title:[n?.title,r.kI.required],path:[n?.path,r.kI.required]});this.menus.push(s)})}addMenu(){const a=this._fb.group({title:["",r.kI.required],path:["",r.kI.required]});this.menus.push(a)}deleteMenu(a){this.menus.removeAt(a)}update(){let a={};a[this.compositionName]={...this.updateForm.value,id:this.itemId},this.updateForm.valid&&(this.loader=!0,this._store.dispatch(F({updateModule:a})),this._appStore.pipe((0,d.Ys)(q.p)).subscribe(n=>{"success"==n.apiStatus?(this.loader=!1,this._appStore.dispatch((0,m.T)({apiStatus:{apiResponseMessage:"",apiStatus:""}})),this.activeModal.close("Module Updated"),this._router.navigate(["/module-management"])):"error"==n.apiStatus&&(this.loader=!1,this._appStore.dispatch((0,m.T)({apiStatus:{apiResponseMessage:"",apiStatus:""}})))}))}scrollToFirstInvalidControl(){const a=document.querySelectorAll(".ng-invalid");a.length>0&&a[0].scrollIntoView()}};let o=t;return t.\u0275fac=function(i){return new(i||t)(e.Y36(r.qu),e.Y36(T.Kz),e.Y36(d.yh),e.Y36(d.yh),e.Y36(v.gz),e.Y36(v.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-update-module"]],inputs:{itemId:"itemId"},decls:48,vars:8,consts:[[3,"formGroup","ngSubmit"],["updateFormId","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","loading",4,"ngIf"],["class","validation_error alert alert-danger",4,"ngIf"],[1,"row"],[1,"col-md-12"],["type","text","placeholder","Module name","formControlName","module_name",1,"form-control"],["class","err_msg",4,"ngIf"],["type","text","placeholder","Module url","formControlName","module_url",1,"form-control"],["type","text","placeholder","Module icon","formControlName","module_icon",1,"form-control"],["type","text","placeholder","0","formControlName","module_order",1,"form-control"],["placeholder","Module Description","formControlName","module_description",1,"form-control"],["formArrayName","menus"],["class","form-row row mb-1",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"btn","btn-secondary","btn-action",3,"click"],[1,"material-symbols-outlined"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"loading"],[1,"loader"],[1,"validation_error","alert","alert-danger"],[1,"err_msg"],[1,"form-row","row","mb-1"],[1,"mb-0"],[1,"form-row","row","array-row","mt-1",3,"formGroupName"],[1,"col-md-4"],["placeholder","Menu Title","formControlName","title",1,"form-control"],["placeholder","Menu Url","formControlName","path",1,"form-control"],[1,"col-md-1"],[1,"text-danger","btn-round","btn-delete-formarray",3,"click"]],template:function(i,n){if(1&i&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return n.update()}),e.TgZ(2,"div",2)(3,"h4",3),e._uU(4,"Update"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.activeModal.dismiss()}),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,D,2,0,"div",6),e.YNc(8,O,2,1,"div",7),e.TgZ(9,"div",8)(10,"div",9)(11,"label"),e._uU(12,"Name"),e.qZA(),e._UZ(13,"input",10),e.YNc(14,E,2,0,"small",11),e.qZA()(),e.TgZ(15,"div",8)(16,"div",9)(17,"label"),e._uU(18,"Module Url"),e.qZA(),e._UZ(19,"input",12),e.YNc(20,$,2,0,"small",11),e.qZA()(),e.TgZ(21,"div",8)(22,"div",9)(23,"label"),e._uU(24,"Module Icon"),e.qZA(),e._UZ(25,"input",13),e.qZA()(),e.TgZ(26,"div",8)(27,"div",9)(28,"label"),e._uU(29,"Module Order"),e.qZA(),e._UZ(30,"input",14),e.qZA()(),e.TgZ(31,"div",8)(32,"div",9)(33,"label"),e._uU(34,"Description"),e.qZA(),e._UZ(35,"textarea",15),e.qZA()(),e.ynx(36,16),e.YNc(37,z,3,0,"div",17),e.YNc(38,K,16,3,"ng-container",18),e.TgZ(39,"a",19),e.NdJ("click",function(){return n.addMenu()}),e.TgZ(40,"span",20),e._uU(41," add "),e.qZA(),e._uU(42," Add SubMenu "),e.qZA(),e.BQk(),e.qZA(),e.TgZ(43,"div",21)(44,"button",22),e.NdJ("click",function(){return n.activeModal.dismiss()}),e._uU(45," Close "),e.qZA(),e.TgZ(46,"button",23),e._uU(47," Update "),e.qZA()()()),2&i){const s=e.MAs(1);e.Q6J("formGroup",n.updateForm),e.xp6(7),e.Q6J("ngIf",n.loader),e.xp6(1),e.Q6J("ngIf",n.loginError),e.xp6(6),e.Q6J("ngIf",n.name&&n.name.invalid&&(n.name.touched||s.submitted)),e.xp6(6),e.Q6J("ngIf",n.module_url&&n.module_url.invalid&&(n.module_url.touched||s.submitted)),e.xp6(17),e.Q6J("ngIf",n.menus.length>0),e.xp6(1),e.Q6J("ngForOf",n.menus.controls),e.xp6(8),e.Q6J("disabled",n.loader)}},dependencies:[_.sg,_.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE],styles:[".btn-delete-formarray[_ngcontent-%COMP%]{position:relative;top:30px}"]}),o})();var b=u(8154);function R(o,t){1&o&&(e.TgZ(0,"div",16),e._UZ(1,"span",17),e.qZA())}function j(o,t){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const l=e.oxw();e.xp6(1),e.hij(" ",l.errorMessage," ")}}function H(o,t){1&o&&(e.TgZ(0,"small",19),e._uU(1," Please enter first name. "),e.qZA())}let W=(()=>{const t=class{formInitialize(){this.createForm=this._fb.group({module_name:new r.NI("",[r.kI.required]),module_description:new r.NI("")})}get name(){return this.createForm.get("module_name")}constructor(a,i,n,s,c,h,g){this._fb=a,this._compositionService=i,this.activeModal=n,this.store=s,this.appStore=c,this._router=h,this._activeModal=g,this.loader=!1,this.compositionName=Z.DP,this.loginError=!1}ngOnInit(){this.formInitialize()}create(){let a={};a[this.compositionName]={...this.createForm.value},this.createForm.valid?(this.loader=!0,this.store.dispatch(C({module:a})),this.appStore.pipe((0,d.Ys)(q.p)).subscribe(n=>{"success"==n.apiStatus&&(this.loader=!1,window.scroll({top:0,left:0,behavior:"smooth"}),this._activeModal.close(n.apiResponseMessage),this.appStore.dispatch((0,m.T)({apiStatus:{apiResponseMessage:"",apiStatus:""}}))),this._router.navigate(["/module-management"])})):this.scrollToFirstInvalidControl()}scrollToFirstInvalidControl(){const a=document.querySelectorAll(".ng-invalid");a.length>0&&a[0].scrollIntoView()}};let o=t;return t.\u0275fac=function(i){return new(i||t)(e.Y36(r.qu),e.Y36(b.e),e.Y36(T.Kz),e.Y36(d.yh),e.Y36(d.yh),e.Y36(v.F0),e.Y36(T.Kz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create-module"]],decls:25,vars:5,consts:[[3,"formGroup","ngSubmit"],["createFormId","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","loading",4,"ngIf"],["class","validation_error alert alert-danger",4,"ngIf"],[1,"row"],[1,"col-md-12"],["type","text","placeholder","Module name","formControlName","module_name",1,"form-control"],["class","err_msg",4,"ngIf"],["placeholder","Module Description","formControlName","module_description",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"loading"],[1,"loader"],[1,"validation_error","alert","alert-danger"],[1,"err_msg"]],template:function(i,n){if(1&i&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return n.create()}),e.TgZ(2,"div",2)(3,"h4",3),e._uU(4,"Create Module"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.activeModal.close()}),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,R,2,0,"div",6),e.YNc(8,j,2,1,"div",7),e.TgZ(9,"div",8)(10,"div",9)(11,"label"),e._uU(12,"Name"),e.qZA(),e._UZ(13,"input",10),e.YNc(14,H,2,0,"small",11),e.qZA()(),e.TgZ(15,"div",8)(16,"div",9)(17,"label"),e._uU(18,"Description"),e.qZA(),e._UZ(19,"textarea",12),e.qZA()()(),e.TgZ(20,"div",13)(21,"button",14),e.NdJ("click",function(){return n.activeModal.close()}),e._uU(22,"Close"),e.qZA(),e.TgZ(23,"button",15),e._uU(24,"Create"),e.qZA()()()),2&i){const s=e.MAs(1);e.Q6J("formGroup",n.createForm),e.xp6(7),e.Q6J("ngIf",n.loader),e.xp6(1),e.Q6J("ngIf",n.loginError),e.xp6(6),e.Q6J("ngIf",n.name&&n.name.invalid&&(n.name.touched||s.submitted)),e.xp6(9),e.Q6J("disabled",n.loader)}},dependencies:[_.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]}),o})();var Y=u(7009),J=u(8180);function X(o,t){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"span",7),e.qZA())}function V(o,t){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"span",7),e.qZA())}function ee(o,t){1&o&&(e.TgZ(0,"tr")(1,"td",13)(2,"p"),e._uU(3,"Looking for modules..."),e.qZA()()())}function te(o,t){if(1&o){const l=e.EpF();e.ynx(0),e.TgZ(1,"td",16),e._uU(2),e.qZA(),e.TgZ(3,"td",16),e._uU(4),e.qZA(),e.TgZ(5,"td",16),e._uU(6),e.qZA(),e.TgZ(7,"td",16),e._uU(8),e.qZA(),e.TgZ(9,"td",11)(10,"button",17),e.NdJ("click",function(){e.CHM(l);const i=e.oxw().$implicit,n=e.oxw(3);return e.KtG(n.updateDialog(null==i?null:i.id))}),e.TgZ(11,"span",18),e._uU(12," edit "),e.qZA()()(),e.BQk()}if(2&o){const l=t.ngIf;e.xp6(2),e.hij(" ",null==l?null:l.module_name," "),e.xp6(2),e.hij(" ",null==l?null:l.module_url," "),e.xp6(2),e.hij(" ",null==l?null:l.module_icon," "),e.xp6(2),e.hij(" ",null==l?null:l.module_order," ")}}function oe(o,t){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,te,13,4,"ng-container",15),e.qZA()),2&o){const l=t.$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==l?null:l.data[a.compositionName])}}function ne(o,t){if(1&o&&(e.ynx(0),e.YNc(1,oe,2,1,"tr",14),e.BQk()),2&o){const l=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",l.allModules)}}function ae(o,t){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,ee,4,0,"ng-template",null,9,e.W1O),e.TgZ(3,"table",10)(4,"tr")(5,"th"),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Url"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Icon"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Order"),e.qZA(),e.TgZ(13,"th",11),e._uU(14,"Actions"),e.qZA()(),e.YNc(15,ne,2,1,"ng-container",12),e.qZA()()),2&o){const l=e.MAs(2),a=e.oxw();e.xp6(15),e.Q6J("ngIf",a.allModules)("ngIfElse",l)}}const ie=[{component:(()=>{const t=class{constructor(a,i,n,s,c){this.itemService=a,this.modalService=i,this._snackBar=n,this.store=s,this._snackbarService=c,this.pageTitle="All Modules",this.compositionName=Z.DP,this.page=1,this.loader=!1,this.allModules$=this.store.pipe((0,d.Ys)(I))}ngOnInit(){this.store.dispatch(U()),this.allModules$.subscribe({next:a=>{let i=[...JSON.parse(JSON.stringify(a?.data||""))];i=i.filter(n=>"humanizing"!==n?.data?.modulesetup?.module_application?.toLowerCase()),this.allModules=i.sort((n,s)=>{let c=n.data?.[Z.DP]?.module_order,h=s.data?.[Z.DP]?.module_order;return c&&!h?-1:h&&!c?1:Number(c??0)-Number(h??0)})}})}pageChanged(a){this.page=a}updateDialog(a){const i=this.modalService.open(L,{size:"lg"});i.componentInstance.itemId=a,i.result.then(n=>{this._snackbarService.openSnackBar(n,"success")}).catch(n=>{this._snackbarService.openSnackBar(n,"error")})}createDialog(){this.modalService.open(W,{size:"md"}).result.then(i=>{i&&this._snackbarService.openSnackBar(i,"success")}).catch(i=>{this._snackbarService.openSnackBar(i,"error")})}};let o=t;return t.\u0275fac=function(i){return new(i||t)(e.Y36(b.e),e.Y36(T.FF),e.Y36(Y.ux),e.Y36(d.yh),e.Y36(J.o))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-all-modules"]],decls:10,vars:4,consts:[[1,"page-title"],[1,"btn","btn-primary",3,"click"],[1,"page-card"],["class","loading",4,"ngIf"],["loading",""],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"loading"],[1,"loader"],[1,"table-responsive"],["error",""],["width","100%",1,"table"],[1,"text-center"],[4,"ngIf","ngIfElse"],["colspan","5"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-capitalize"],["type","button",1,"btn-top_header",3,"click"],[1,"material-symbols-outlined"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2),e.qZA(),e.TgZ(3,"a",1),e.NdJ("click",function(){return n.createDialog()}),e._uU(4,"Create +"),e.qZA()(),e.TgZ(5,"div",2),e.YNc(6,X,2,0,"div",3),e.YNc(7,V,2,0,"ng-template",null,4,e.W1O),e.YNc(9,ae,16,2,"div",5),e.qZA()),2&i){const s=e.MAs(8);e.xp6(2),e.Oqu(n.pageTitle),e.xp6(4),e.Q6J("ngIf",n.loader),e.xp6(3),e.Q6J("ngIf",n.allModules)("ngIfElse",s)}},dependencies:[_.sg,_.O5]}),o})(),path:""}];let le=(()=>{const t=class{};let o=t;return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.Bz.forChild(ie),v.Bz]}),o})();const re=(0,d.Lq)([],(0,d.on)(y,(o,{allModules:t})=>t),(0,d.on)(N,(o,{module:t})=>{let l={...o};if(l.data){let i=[...l.data];i.unshift({data:t}),l={...o,data:[...i]}}return l}),(0,d.on)(x,(o,{updateModule:t})=>{let l={...o},a=Z.DP,i={data:t,id:t[a].id};if(l.data){let s=[...l.data].filter(c=>c.id!=t[a].id);s.unshift(i),l={...o,data:[...s]}}return l}));var f=u(493),de=u(1365),ue=u(5577),ce=u(515),S=u(4004),k=u(262),P=u(2843);let pe=(()=>{const t=class{constructor(a,i,n,s,c,h){this.actions$=a,this.apiServices=i,this.store=n,this.appStore=s,this.snackBar=c,this._snackbarService=h,this.compositionName="modulesetup",this.loadAllItems$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(U),(0,de.M)(this.store.pipe((0,d.Ys)(I))),(0,ue.z)(([,g])=>g.length>0?ce.E:this.apiServices.getAll(this.compositionName).pipe((0,S.U)(p=>y({allModules:p})),(0,k.K)(p=>(this.appStore.dispatch((0,m.T)({apiStatus:{apiResponseMessage:p?.message,apiStatus:"error"}})),(0,P._)(()=>p))))))),this.saveNewItem$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(C),(0,M.w)(g=>(this.appStore.dispatch((0,m.T)({apiStatus:{apiResponseMessage:"",apiStatus:""}})),this.apiServices.noAuthCreate(g.module,this.compositionName).pipe((0,S.U)(p=>(this.appStore.dispatch((0,m.T)({apiStatus:{apiResponseMessage:p?.message,apiStatus:"success"}})),N({module:g.module})))))))),this.updateModuleAPI$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(F),(0,M.w)(g=>(this.appStore.dispatch((0,m.T)({apiStatus:{apiResponseMessage:"",apiStatus:""}})),this.apiServices.update(g.updateModule).pipe((0,S.U)(p=>(this.appStore.dispatch((0,m.T)({apiStatus:{apiResponseMessage:p?.message,apiStatus:"success"}})),x({updateModule:g.updateModule}))),(0,k.K)(p=>(console.log(p),this.appStore.dispatch((0,m.T)({apiStatus:{apiResponseMessage:p?.message,apiStatus:"error"}})),(0,P._)(()=>p))))))))}};let o=t;return t.\u0275fac=function(i){return new(i||t)(e.LFG(f.eX),e.LFG(b.e),e.LFG(d.yh),e.LFG(d.yh),e.LFG(Y.ux),e.LFG(J.o))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),o})(),me=(()=>{const t=class{};let o=t;return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.ez,le,r.u5,r.UX,d.Aw.forFeature("mymodules",re),f.sQ.forFeature([pe])]}),o})()},3223:(w,A,u)=>{u.d(A,{p:()=>v});const v=(0,u(9653).ZF)("appState")}}]);