"use strict";(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[4724],{6371:(B,N,g)=>{g.d(N,{KA:()=>n,Qc:()=>I,Td:()=>S,U0:()=>v,WZ:()=>i,XS:()=>u,XT:()=>e,dg:()=>o,j3:()=>Z,kj:()=>f,qO:()=>G,t1:()=>U,wG:()=>t});const v="the_group",e="s_group",S="owner",Z="owner",G="s_member",U="s_post",I="the_group_s_member",u="the_post_s_like",f="the_post_comment_s_like",i="the_group_s_post",t="the_post_s_comment",o="the_entity_s_group",n="the_group_s_request"},4467:(B,N,g)=>{g.d(N,{t:()=>l});var v=g(5861),e=g(4650),x=g(4006),S=g(8154),Z=g(8180),A=g(384),G=g(9446),U=g(5982),L=g(1905),I=g(6895);function u(s,y){if(1&s&&e._UZ(0,"img",30),2&s){const m=e.oxw();e.s9C("src",m.profileImage,e.LSH)}}function f(s,y){1&s&&e._UZ(0,"img",31)}function i(s,y){1&s&&(e.TgZ(0,"button",32),e._UZ(1,"span",33),e._uU(2," Creating... "),e.qZA()),2&s&&e.Q6J("disabled",!0)}function t(s,y){1&s&&(e.TgZ(0,"button",34),e._uU(1,"+ Create"),e.qZA())}function o(s,y){if(1&s){const m=e.EpF();e.TgZ(0,"div",35),e._UZ(1,"img",36),e.TgZ(2,"span",37),e.NdJ("keyup",function(){e.CHM(m);const _=e.oxw();return e.KtG(_.removeImage())})("click",function(){e.CHM(m);const _=e.oxw();return e.KtG(_.removeImage())}),e._uU(3,"close"),e.qZA()()}if(2&s){const m=e.oxw();e.xp6(1),e.Q6J("src",m.previewUrl,e.LSH)}}function n(s,y){if(1&s){const m=e.EpF();e.TgZ(0,"div",38),e.NdJ("dragover",function(_){e.CHM(m);const h=e.oxw();return e.KtG(h.onDragOver(_))})("dragleave",function(_){e.CHM(m);const h=e.oxw();return e.KtG(h.onDragLeave(_))})("drop",function(_){e.CHM(m);const h=e.oxw();return e.KtG(h.onDrop(_))}),e.TgZ(1,"label",39)(2,"span",40),e._uU(3,"upload"),e.qZA(),e._uU(4," Drag and Drop File "),e.qZA(),e.TgZ(5,"input",41,42),e.NdJ("change",function(_){e.CHM(m);const h=e.oxw();return e.KtG(h.onFileSelected(_))}),e.qZA(),e.TgZ(7,"button",43),e.NdJ("click",function(){e.CHM(m);const _=e.MAs(6);return e.KtG(_.click())}),e._uU(8," Browse "),e.qZA()()}}function c(s,y){1&s&&(e.TgZ(0,"div",44),e._UZ(1,"span",45),e.qZA())}let l=(()=>{const y=class{constructor(r,_,h,E,O,T,d){this.formBuilder=r,this.itemService=_,this._snackbarService=h,this._authService=E,this._activeModal=O,this._groupsService=T,this._profileServiceV2=d,this.isApiRequesting=!1,this.previewUrl=null,this.uploadingImage=null,this.isImageUploading=!1,this.groupCreated=new e.vpe,this.createGroup=this.formBuilder.group({name:new x.NI("",[x.kI.required]),status:new x.NI("",[x.kI.required]),description:new x.NI("")}),this.entityId=this._authService.loadFromLocalStorage().entityId}ngOnInit(){var r=this;return(0,v.Z)(function*(){const _=r._authService.loadFromLocalStorage();r.userConceptId=Number(_?.userConcept),r.entityId=_.entityId,yield r.getuser()})()}get name(){return this.createGroup.get("name")}get status(){return this.createGroup.get("status")}get description(){return this.createGroup.get("description")}onSubmit(){if(this.createGroup.valid){const r={...this.createGroup.value};this.groupImage&&(r.image=this.groupImage),this.isApiRequesting=!0,this._groupsService.createGroup(r).then(()=>{this.isApiRequesting=!1,this._snackbarService.openSnackBar("Group Created","success"),this.groupCreated.emit(),this.closeModal()}).catch(_=>{console.error("Error creating group:",_),this.isApiRequesting=!1,this._snackbarService.openSnackBar("Failed to create group","error")})}}updateCoverImage(){if(this.uploadingImage){const r=new FormData;r.append("image",this.uploadingImage),this.isImageUploading=!0,this.itemService.uploadNewImage(r).subscribe({next:_=>{this.groupImage=_?.data,this.uploadingImage=null,this.isImageUploading=!1},error:()=>{this.isApiRequesting=!1,this._snackbarService.openSnackBar("Invalid image file format or size. Allowed formats: jpg, jpeg, png, gif, svg. Max size: 2 MB.","warning"),this.isImageUploading=!1,this.groupImage=null,this.previewUrl=null}})}}removeImage(){this.previewUrl=null,this.uploadingImage=null,this.groupImage=null}onDragOver(r){r.preventDefault(),r.stopPropagation(),r.currentTarget.classList.add("dragging")}onDragLeave(r){r.preventDefault(),r.stopPropagation(),r.currentTarget.classList.remove("dragging")}onDrop(r){r.preventDefault(),r.stopPropagation(),r.currentTarget.classList.remove("dragging");const h=r.dataTransfer?.files;h&&h.length>0&&this.handleFile(h[0])}onFileSelected(r){const _=r.target;_.files&&_.files.length>0&&this.handleFile(_.files[0])}handleFile(r){if(r&&r.type.startsWith("image/")){const _=new FileReader;_.onload=()=>{this.previewUrl=_.result,this.uploadingImage=r,this.updateCoverImage()},_.readAsDataURL(r)}else alert("Please upload a valid image file.")}closeModal(){this._activeModal.close()}getuser(){var r=this;return(0,v.Z)(function*(){const _=yield r._profileServiceV2.fetchUserDetails(r.entityId),h=_?.firstname,E=_?.lastname;r.profileImage=_?.avatar,r.username=`${h} ${E}`})()}};let s=y;return y.\u0275fac=function(_){return new(_||y)(e.Y36(x.qu),e.Y36(S.e),e.Y36(Z.o),e.Y36(A.e),e.Y36(G.Kz),e.Y36(U.J),e.Y36(L.S))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-create-group"]],outputs:{groupCreated:"groupCreated"},decls:45,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],[1,"material-symbols-outlined","add-group"],["tabindex","",1,"material-symbols-outlined","close-button",3,"click","keyup"],[1,"row","p-4"],[1,"col-md-8"],[1,"admin-info","d-flex","align-items-center","mb-3"],["alt","Profile","class","profile-img",3,"src",4,"ngIf","ngIfElse"],["noImage",""],[1,"admin-details","ms-2"],[1,"mb-0"],[1,"badge","mx-2"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["for","name"],["id","name","formControlName","name","placeholder","Name of Group",1,"form-control","p-2","mb-1","shadow-none"],["for","status"],["formControlName","status",1,"form-select"],["value","","selected",""],["value","Public"],["value","Private"],[1,"form-group","mb-4"],["for","description"],["id","description","formControlName","description","placeholder","Write group description here...",1,"form-control","p-2","mb-1","shadow-none"],["type","submit","class","btn create-btn",3,"disabled",4,"ngIf","ngIfElse"],["notLoading",""],[1,"col-md-4"],["class","file-upload",4,"ngIf","ngIfElse"],["drop",""],["class","loading",4,"ngIf"],["alt","Profile",1,"profile-img",3,"src"],["src","./assets/man.png","alt","Profile",1,"profile-img"],["type","submit",1,"btn","create-btn",3,"disabled"],["role","status",1,"spinner-border","text-light"],["type","submit",1,"btn","create-btn"],[1,"file-upload"],["alt","Image Preview",1,"preview-image",3,"src"],["tabindex","",1,"remove-icon","material-symbols-outlined",3,"keyup","click"],[1,"file-upload",3,"dragover","dragleave","drop"],["for","fileUpload",1,"file-upload-label"],[1,"material-symbols-outlined","upload"],["id","fileUpload","type","file","accept","image/*",1,"d-none",3,"change"],["fileInput",""],[1,"btn","btn-browse","my-3",3,"click"],[1,"loading"],[1,"loader"]],template:function(_,h){if(1&_&&(e.TgZ(0,"div",0)(1,"h2",1)(2,"span",2),e._uU(3,"group_add"),e.qZA(),e._uU(4," Create Group "),e.qZA(),e.TgZ(5,"span",3),e.NdJ("click",function(){return h.closeModal()})("keyup",function(){return h.closeModal()}),e._uU(6,"close"),e.qZA()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6),e.YNc(10,u,1,1,"img",7),e.YNc(11,f,1,0,"ng-template",null,8,e.W1O),e.TgZ(13,"div",9)(14,"p",10),e._uU(15),e.qZA()(),e.TgZ(16,"span",11),e._uU(17,"Admin"),e.qZA()(),e.TgZ(18,"form",12),e.NdJ("ngSubmit",function(){return h.onSubmit()}),e.TgZ(19,"div",13)(20,"label",14),e._uU(21,"Group Name"),e.qZA(),e._UZ(22,"input",15),e.qZA(),e.TgZ(23,"div",13)(24,"label",16),e._uU(25,"Choose Privacy"),e.qZA(),e.TgZ(26,"select",17)(27,"option",18),e._uU(28,"Public/Private"),e.qZA(),e.TgZ(29,"option",19),e._uU(30,"Public"),e.qZA(),e.TgZ(31,"option",20),e._uU(32,"Private"),e.qZA()()(),e.TgZ(33,"div",21)(34,"label",22),e._uU(35,"Description"),e.qZA(),e._UZ(36,"textarea",23),e.qZA(),e.YNc(37,i,3,1,"button",24),e.YNc(38,t,2,0,"ng-template",null,25,e.W1O),e.qZA()(),e.TgZ(40,"div",26),e.YNc(41,o,4,1,"div",27),e.YNc(42,n,9,0,"ng-template",null,28,e.W1O),e.YNc(44,c,2,0,"div",29),e.qZA()()),2&_){const E=e.MAs(12),O=e.MAs(39),T=e.MAs(43);e.xp6(10),e.Q6J("ngIf",h.profileImage)("ngIfElse",E),e.xp6(5),e.Oqu(h.username),e.xp6(3),e.Q6J("formGroup",h.createGroup),e.xp6(19),e.Q6J("ngIf",h.isApiRequesting)("ngIfElse",O),e.xp6(4),e.Q6J("ngIf",h.previewUrl)("ngIfElse",T),e.xp6(3),e.Q6J("ngIf",h.isImageUploading)}},dependencies:[I.O5,x._Y,x.YN,x.Kr,x.Fj,x.EJ,x.JJ,x.JL,x.sg,x.u],styles:[".modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding-bottom:7px;justify-content:space-between}.modal-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:24px;font-weight:700}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:30px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{display:flex;gap:15px}.profile-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.badge[_ngcontent-%COMP%]{border:1px solid #dddddd;padding:8px 7px;border-radius:4px;font-size:12px;font-weight:500;text-align:left;color:#000000b2}.add-group[_ngcontent-%COMP%]{border-radius:50%;background:black;padding:10px;color:#fff;font-size:24px}.create-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));color:#fff;border:none;width:100%;padding:10px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px}.create-btn[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{height:22px;width:22px}.file-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;border:1px solid #dddddd;padding:20px;text-align:center;cursor:pointer;background:#f6f6f6;border-radius:4px}.preview-image[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:8px;position:relative}.upload[_ngcontent-%COMP%]{font-size:90px}.remove-icon[_ngcontent-%COMP%]{position:absolute;top:111px;right:54px;background:black;border-radius:50%;padding:1px;cursor:pointer;color:#fff;font-size:17px}.file-upload-label[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;flex-direction:column;align-items:center}.btn-browse[_ngcontent-%COMP%]{border:1px solid #ddd;padding:5px 15px;cursor:pointer;background:#ffffff}.btn-browse[_ngcontent-%COMP%]:hover{color:#fff;background:linear-gradient(to top,rgb(255,148,114),rgb(242,112,156))}"]}),s})()},228:(B,N,g)=>{g.d(N,{g:()=>T});var v=g(5861),e=g(4650),x=g(7579),S=g(8372),Z=g(1884),A=g(9446),G=g(6098),U=g(5982),L=g(8180),I=g(384),u=g(6895),f=g(4006);function i(d,M){if(1&d&&(e.ynx(0),e._UZ(1,"img",31),e.BQk()),2&d){const b=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==b?null:b.profile_img,e.LSH)("alt",(null==b?null:b.name)+" profile image")}}function t(d,M){1&d&&e._UZ(0,"img",32)}function o(d,M){if(1&d){const b=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"div",26),e.YNc(3,i,2,2,"ng-container",18),e.YNc(4,t,1,0,"ng-template",null,27,e.W1O),e.qZA(),e._UZ(6,"img",28),e._uU(7),e.TgZ(8,"a",29),e.NdJ("keyup",function(){const p=e.CHM(b).$implicit,P=e.oxw(2);return e.KtG(P.removeUserFromListItem(p))})("click",function(){const p=e.CHM(b).$implicit,P=e.oxw(2);return e.KtG(P.removeUserFromListItem(p))}),e.TgZ(9,"span",30),e._uU(10," close "),e.qZA()()(),e.BQk()}if(2&d){const b=M.$implicit,C=e.MAs(5);e.xp6(3),e.Q6J("ngIf",null==b?null:b.profile_img)("ngIfElse",C),e.xp6(4),e.hij(" ",null==b?null:b.name," ")}}function n(d,M){if(1&d&&(e.TgZ(0,"div",23),e.YNc(1,o,11,3,"ng-container",24),e.qZA()),2&d){const b=e.oxw();e.xp6(1),e.Q6J("ngForOf",b.selectedUserList)}}function c(d,M){if(1&d){const b=e.EpF();e.ynx(0),e.TgZ(1,"span",33),e.NdJ("click",function(){e.CHM(b);const a=e.oxw(),p=e.MAs(24);return e.KtG(a.resetSearch(p))})("keyup",function(){e.CHM(b);const a=e.oxw(),p=e.MAs(24);return e.KtG(a.resetSearch(p))}),e._uU(2," close "),e.qZA(),e.BQk()}}function l(d,M){1&d&&(e.TgZ(0,"span",30),e._uU(1," search "),e.qZA())}function s(d,M){1&d&&(e.TgZ(0,"div",34),e._UZ(1,"span",35),e.qZA())}function y(d,M){1&d&&(e.TgZ(0,"div",34),e._UZ(1,"span",35),e.qZA())}function m(d,M){1&d&&(e.TgZ(0,"p",36),e._uU(1,"No search result"),e.qZA())}function r(d,M){if(1&d&&(e.ynx(0),e._UZ(1,"img",44),e.BQk()),2&d){const b=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==b?null:b.profile_img,e.LSH)("alt",(null==b?null:b.name)+" profile image")}}function _(d,M){1&d&&e._UZ(0,"img",45)}function h(d,M){1&d&&(e.TgZ(0,"span",46),e._uU(1," check_circle "),e.qZA())}function E(d,M){if(1&d){const b=e.EpF();e.TgZ(0,"li",38)(1,"div",39),e.NdJ("keyup",function(){const p=e.CHM(b).$implicit,P=e.oxw(2),w=e.MAs(24);return e.KtG(P.checkUser(p,w))})("click",function(){const p=e.CHM(b).$implicit,P=e.oxw(2),w=e.MAs(24);return e.KtG(P.checkUser(p,w))}),e.TgZ(2,"div",40)(3,"div",41),e.YNc(4,r,2,2,"ng-container",18),e.YNc(5,_,1,0,"ng-template",null,27,e.W1O),e.YNc(7,h,2,0,"span",42),e.qZA()(),e.TgZ(8,"div",43)(9,"p",5),e._uU(10),e.qZA()()()()}if(2&d){const b=M.$implicit,C=e.MAs(6);e.xp6(4),e.Q6J("ngIf",null==b?null:b.profile_img)("ngIfElse",C),e.xp6(3),e.Q6J("ngIf",null==b?null:b.isUserSelected),e.xp6(3),e.hij(" ",null==b?null:b.name," ")}}function O(d,M){if(1&d&&(e.TgZ(0,"ul"),e.YNc(1,E,11,4,"li",37),e.qZA()),2&d){const b=e.oxw();e.xp6(1),e.Q6J("ngForOf",b.searchResults)}}let T=(()=>{const M=class{constructor(C,a,p,P,w,k){this.modal=C,this._groupService=a,this._groupService2=p,this._snackbarService=P,this._auth=w,this._groupsService=k,this.memberInvited=new e.vpe,this.inviteMode="direct",this.isApiRequesting=!1,this.modelChanged=new x.x,this.showSearchDropdown=!1,this.search_loading=!1,this.selectedUserList=[],this.isUserSelectedEmpty=!1,this.isLoading=!1,this.searchUsers=R=>this.modelChanged.next(R.target.value);const D=this._auth.loadFromLocalStorage();this.entityId=D.entityId,this.conceptId=D.userConcept}ngOnInit(){this.modelChanged.pipe((0,S.b)(300),(0,Z.x)()).subscribe({next:a=>{this.addPeopleChangeHandler(a)}});const C=localStorage.getItem("profile");C&&(this.profileData=JSON.parse(C))}searchFocused(){this.showSearchDropdown=!0}resetSearch(C){this.searchResults=[],this.showSearchDropdown=!1,C.value=""}checkUser(C,a){C.isUserSelected?this.removeUserFromListItem(C):this.checkMembershipStatus(C,a)}addUsers(C){this.isUserSelectedEmpty=!1,this.selectedUserList.push(C),this.searchResults=this.searchResults.map(a=>(a.entityId===C.entityId&&(a.isUserSelected=!0),a))}removeUserFromListItem(C){var a=this;return(0,v.Z)(function*(){a.selectedUserList=a.selectedUserList.filter(w=>w?.entityId!=C?.entityId),a.selectedUserList.length<1&&(a.isUserSelectedEmpty=!0);const p={groupId:a.groupDetail.id,entityId:C?.entityId,status:"rejected",email:C?.email};(yield a._groupsService.approveGroupInvite(p))?.id&&a._snackbarService.openSnackBar("User removed from group","success"),a.searchResults=a.searchResults.map(w=>(w.entityId===C.entityId&&(w.isUserSelected=!1),w))})()}addPeopleChangeHandler(C){""!==C?(this.search_loading=!0,this.showSearchDropdown=!0,this.searchUsers$&&this.searchUsers$.unsubscribe(),this.searchUsers$=this._groupService.searchUserFromContactAndBc(C).subscribe({next:a=>{const p=new Set;this.searchResults=a.map(P=>{if(!P)return null;const{entityId:w,name:k="",profile_img:D="",email:R,type:q}=P;return R&&p.has(R)?null:(R&&p.add(R),{entityId:w,isUserSelected:this.selectedUserList.some(J=>J.entityId==w),name:k,profile_img:D,email:R,type:q})}).filter(P=>P&&this.profileData.entityId!=P.entityId).slice(0,10),this.search_loading=!1},error:()=>{this.search_loading=!1}})):""===C&&(this.searchResults=[])}inviteMembers(C){var a=this;return(0,v.Z)(function*(){if(a.searchResults=[],a.showSearchDropdown=!1,C.value="",a.isApiRequesting=!0,a.selectedUserList.length<1)return a.isUserSelectedEmpty=!0,void(a.isApiRequesting=!1);const p=a.selectedUserList.filter(k=>!k.isInvited);if(0===p.length)return a.isApiRequesting=!1,void a._snackbarService.openSnackBar("No new users to invite","warning");const P=a.groupDetail?.id,w=p.map(k=>({entityId:k.entityId,type:k.type,email:k.email,name:k.name,groupName:a.groupDetail?.name||"",sender:a.userDetail?.firstname+" "+a.userDetail.lastname||"",conceptId:a.conceptId||""}));"direct"===a.inviteMode?(a._groupService2.joinGroup(P,w?.[0]?.entityId),a._snackbarService.openSnackBar("Contact added to group directly","success"),a.selectedUserList=a.selectedUserList.map(k=>p.some(D=>D.entityId===k.entityId)?{...k,isInvited:!0}:k),a.isApiRequesting=!1,a.isLoading=!1):(yield a._groupsService.inviteMembers(w,P))?.success?(a._snackbarService.openSnackBar("Invite Sent Successfully","success"),a.selectedUserList=a.selectedUserList.map(D=>p.some(R=>R.entityId===D.entityId)?{...D,isInvited:!0}:D),"crm"==a.inviteType&&(a.memberInvited.emit(),a.modal.close()),a.isLoading=!1):a._snackbarService.openSnackBar("Could not send invite. Please try again later","error"),a.isApiRequesting=!1})()}checkMembershipStatus(C,a){var p=this;return(0,v.Z)(function*(){p.isLoading=!0;const P_groupId=p.groupDetail?.id,P_entityId=C.entityId,w=yield p._groupsService.checkIfUserIsAlreadyAMemberOrInvited(P_entityId,P_groupId);w.success?w?.isMember?(p._snackbarService.openSnackBar("User is already a member","info"),p.isLoading=!1):w.isInvited?(p._snackbarService.openSnackBar("User is already invited","info"),p.isLoading=!1):w.isRequested?(p._snackbarService.openSnackBar("User has already requested to join","info"),p.isLoading=!1):(p.addUsers(C),p.inviteMembers(a)):p._snackbarService.openSnackBar("Error checking user status","error")})()}};let d=M;return M.\u0275fac=function(a){return new(a||M)(e.Y36(A.Kz),e.Y36(G.l),e.Y36(U.J),e.Y36(L.o),e.Y36(I.e),e.Y36(U.J))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-invite-members"]],inputs:{groupDetail:"groupDetail",userDetail:"userDetail",inviteType:"inviteType"},outputs:{memberInvited:"memberInvited"},decls:34,vars:11,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["tabindex","","aria-label","Close",1,"btn-close",3,"keyup","click"],[1,"modal-body","px-3","py-2"],[1,"my-2","row"],[1,"mb-0"],[1,"text-danger"],[1,"my-2"],[1,"form-label","fw-bold"],[1,"form-check"],["type","radio","name","inviteMode","id","directMode","value","direct",1,"form-check-input",3,"ngModel","ngModelChange"],["for","directMode",1,"form-check-label"],["type","radio","name","inviteMode","id","emailMode","value","email",1,"form-check-input",3,"ngModel","ngModelChange"],["for","emailMode",1,"form-check-label"],["class","selected_user my-2",4,"ngIf"],[1,"share_user_search","mt-2"],["placeholder","Search","type","text",1,"form-control","share_user_search_input",3,"keyup"],["searchInput",""],[4,"ngIf","ngIfElse"],["closeSearch",""],[1,"search_dropdown"],["class","loading",4,"ngIf"],["noResult",""],[1,"selected_user","my-2"],[4,"ngFor","ngForOf"],[1,"item_chip"],[1,"following-image","rounded-circle","d-inline-block"],["defaultProfileImg",""],["alt","",3,"src"],["tabindex","",3,"keyup","click"],[1,"material-symbols-outlined"],[1,"img-fluid","rounded-circle",3,"src","alt"],["src","https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp","alt","Profile Image",1,"img-fluid","rounded-circle"],["tabindex","",1,"material-symbols-outlined","cursor-pointer",3,"click","keyup"],[1,"loading"],[1,"loader"],[1,"mb-1"],["class","following-list",4,"ngFor","ngForOf"],[1,"following-list"],["tabindex","",1,"row","align-items-center","my-0",3,"keyup","click"],[1,"col-md-2","m-0","p-0","text-center"],[1,"following-image"],["class","material-symbols-outlined check-icon",4,"ngIf"],[1,"col-md-10"],[1,"img-fluid",3,"src","alt"],["src","https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp","alt","Profile Image",1,"img-fluid"],[1,"material-symbols-outlined","check-icon"]],template:function(a,p){if(1&a&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Invite Members"),e.qZA(),e.TgZ(3,"span",2),e.NdJ("keyup",function(){return p.modal.dismiss("Cross click")})("click",function(){return p.modal.dismiss("Cross click")}),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"p",5),e._uU(7," Select following to add in group: "),e.TgZ(8,"span",6),e._uU(9,"*"),e.qZA()(),e.TgZ(10,"div",7)(11,"span",8),e._uU(12,"Invitation Mode:"),e.qZA(),e.TgZ(13,"div",9)(14,"input",10),e.NdJ("ngModelChange",function(w){return p.inviteMode=w}),e.qZA(),e.TgZ(15,"label",11),e._uU(16," Add Directly to Group "),e.qZA()(),e.TgZ(17,"div",9)(18,"input",12),e.NdJ("ngModelChange",function(w){return p.inviteMode=w}),e.qZA(),e.TgZ(19,"label",13),e._uU(20," Send Email Invitation "),e.qZA()()(),e.YNc(21,n,2,1,"div",14),e.TgZ(22,"div",15)(23,"input",16,17),e.NdJ("keyup",function(w){return p.searchUsers(w)}),e.qZA(),e.YNc(25,c,3,0,"ng-container",18),e.YNc(26,l,2,0,"ng-template",null,19,e.W1O),e.TgZ(28,"div",20),e.YNc(29,s,2,0,"div",21),e.YNc(30,y,2,0,"div",21),e.YNc(31,m,2,0,"ng-template",null,22,e.W1O),e.YNc(33,O,2,1,"ul",18),e.qZA()()()()),2&a){const P=e.MAs(27),w=e.MAs(32);e.xp6(14),e.Q6J("ngModel",p.inviteMode),e.xp6(4),e.Q6J("ngModel",p.inviteMode),e.xp6(3),e.Q6J("ngIf",p.selectedUserList.length),e.xp6(4),e.Q6J("ngIf",p.showSearchDropdown)("ngIfElse",P),e.xp6(3),e.ekj("show",p.showSearchDropdown),e.xp6(1),e.Q6J("ngIf",p.search_loading),e.xp6(1),e.Q6J("ngIf",p.isLoading),e.xp6(3),e.Q6J("ngIf",(null==p.searchResults?null:p.searchResults.length)>0)("ngIfElse",w)}},dependencies:[u.sg,u.O5,f.Fj,f._,f.JJ,f.On],styles:['.btn-close[_ngcontent-%COMP%]{cursor:pointer}.list[_ngcontent-%COMP%]{padding:0 1rem;margin:.75rem 0 0;max-height:260px;overflow-y:auto}.following-list[_ngcontent-%COMP%]{padding:.75rem .5rem;border-bottom:1px solid #efefef;border-radius:4px;list-style:none;cursor:pointer}.following-list[_ngcontent-%COMP%]:hover{background-color:#eee}.following-list[_ngcontent-%COMP%]:last-child{border-bottom:none}.following-image[_ngcontent-%COMP%]{position:relative}.following-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border:1px solid #ddd;border-radius:8px}.following-image[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:1.125rem;position:absolute;bottom:-4px;right:8px;font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 48}.share_wrapper[_ngcontent-%COMP%]{position:relative}.modal-title[_ngcontent-%COMP%]{clear:both;display:inline-block;overflow:hidden;white-space:nowrap;font-size:20px;text-overflow:ellipsis}.share_user_search[_ngcontent-%COMP%]{position:relative}.share_user_search[_ngcontent-%COMP%]   .share_user_search_input[_ngcontent-%COMP%]{height:45px;box-shadow:none}.share_user_search[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:absolute;color:#ccc;right:20px;top:50%;transform:translateY(-50%)}.share_user_search[_ngcontent-%COMP%]   .material-symbols-outlined.check-icon[_ngcontent-%COMP%]{right:10px;bottom:-4px;top:auto;transform:none;color:#333}.search_dropdown.show[_ngcontent-%COMP%]{display:block}.search_dropdown[_ngcontent-%COMP%]{display:none;width:94%;background-color:#fff;border-radius:10px;padding:20px;box-shadow:#959da533 0 8px 24px;position:absolute;top:100%;left:3%;color:#777;z-index:1}.search_dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.search_dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:10px 0}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;line-height:35px}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:relative;top:5px;font-size:22px}.item_chip[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:40px;background-color:#f3f3f3;margin:5px}.item_chip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;background-color:#eee}.item_chip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{display:inline-block;font-size:22px;position:relative;top:4px}.post_message[_ngcontent-%COMP%]{min-height:200px;box-shadow:#0000000f 0 2px 4px inset}.post_message[_ngcontent-%COMP%]:hover{box-shadow:#00000021 0 2px 4px inset}.post_message[_ngcontent-%COMP%]:focus{box-shadow:#00000021 0 2px 4px inset}.btn-dropdown[_ngcontent-%COMP%]{padding:5px 30px 5px 20px;text-transform:capitalize}.btn-dropdown[_ngcontent-%COMP%]:hover{background:#eee}.error_msg[_ngcontent-%COMP%]{background-color:#e86a6a;color:#fff}']}),d})()},5982:(B,N,g)=>{g.d(N,{J:()=>L});var v=g(5861),e=g(9402),x=g(6371),S=g(2340),Z=g(4650),A=g(384),G=g(8154),U=g(3718);let L=(()=>{const u=class{constructor(i,t,o){this.authService=i,this._itemService=t,this.V2groupsService=o,this.baseUrl=S.N.baseUrl;const n=this.authService.loadFromLocalStorage();this.entityId=Number(n.entityId),this.userId=Number(n.theUserId),this.token=n.token}CreateConnectionBetweenEntityLocal(i,t,o){return(0,v.Z)(function*(){const n=i.userId,s=i?.type?.characterValue,m=s+"_"+o,r=yield(0,e.smi)(m,999,999,n);yield(0,e.b1S)(i.id,t.id,r.id,1e3)})()}createGroup(i){var t=this;return(0,v.Z)(function*(){try{const o=yield(0,e.Fsb)(x.U0,"",!0,t.userId,4,999),n=yield(0,e.J0M)(t.entityId);yield t.CreateConnectionBetweenEntityLocal(n,o,x.XT);for(const[c,l]of Object.entries(i)){const s=c,y=yield(0,e.Fsb)(`${s}`,`${l}`,!1,t.userId,4,999);yield t.CreateConnectionBetweenEntityLocal(o,y,s)}return yield t.CreateConnectionBetweenEntityLocal(o,n,x.Td),yield t.CreateConnectionBetweenEntityLocal(o,n,x.qO),yield e.smK.SyncDataOnline(),o}catch(o){throw console.error("Error creating group:",o),new Error("Failed to create group. Please try again.")}})()}joinGroup(i,t){var o=this;return(0,v.Z)(function*(){try{const n=yield(0,e.J0M)(Number(i)),c=yield(0,e.J0M)(Number(t||o.entityId));return(yield o.checkIfUserIsAlreadyAMember(i,t||o.entityId))?{message:"User is already a member of this group.",success:!1}:(yield o.CreateConnectionBetweenEntityLocal(n,c,x.qO),yield o.cancelGroupRequest([t||o.entityId],i),yield e.smK.SyncDataOnline(),{message:"Joined the group successfully.",success:!0})}catch(n){throw console.error(n),n}})()}checkIfUserIsAlreadyAMember(i,t){var o=this;return(0,v.Z)(function*(){try{return(yield o.V2groupsService.getGroupDetails(i,t))?.isMember}catch(n){console.error(n)}})()}checkIfUserIsAlreadyAMemberOrInvited(i,t){var o=this;return(0,v.Z)(function*(){try{const n=yield o.V2groupsService.getGroupDetails(t,i),c=n?.isMember,l=n?.isInvited,s=n?.isRequested;return{isMember:!!c,isInvited:!!l,isRequested:!!s,success:!0}}catch(n){throw console.error(n),n}})()}updateGroupDetails(i,t){var o=this;return(0,v.Z)(function*(){try{const n=yield(0,e.J0M)(Number(i));for(const c of t){if(c?.id){const s=yield(0,e.J0M)(Number(c?.id));if(n&&s){const y=yield(0,e.kqu)(n,s,"","the_group_"+c.type,!0);yield Promise.all(y?.map(function(){var m=(0,v.Z)(function*(r){yield(0,e.TAP)(r?.id)});return function(r){return m.apply(this,arguments)}}()))}}const l=yield(0,e.Fsb)(c.type,c.value,!1,o.userId,4,999);yield o.CreateConnectionBetweenEntityLocal(n,l,c.type)}return yield e.smK.SyncDataOnline(),n}catch(n){throw console.error("Error in update group details",n),n}})()}deleteGroup(i){var t=this;return(0,v.Z)(function*(){try{const o=yield(0,e.J0M)(Number(i)),n=yield(0,e.J0M)(Number(t.entityId)),c=yield(0,e.kqu)(n,o,"",x.dg,!0);return yield Promise.all(c?.map(function(){var l=(0,v.Z)(function*(s){yield(0,e.TAP)(s?.id)});return function(s){return l.apply(this,arguments)}}())),yield(0,e.Ac7)(i),!0}catch(o){throw console.error("error in leave or remove member",o),o}})()}leaveOrRemoveMember(i,t){return(0,v.Z)(function*(){try{const o=yield(0,e.J0M)(Number(i)),n=[];for(const c of t){const l=yield(0,e.J0M)(Number(c)),s=yield(0,e.kqu)(o,l,"",x.Qc,!0);yield Promise.all(s?.map(function(){var y=(0,v.Z)(function*(m){yield(0,e.TAP)(m?.id)});return function(m){return y.apply(this,arguments)}}())),n.push({success:!0,id:c})}return n}catch(o){throw console.error("error in leave or remove member",o),o}})()}cancelGroupRequest(i,t){return(0,v.Z)(function*(){try{const o=yield(0,e.J0M)(Number(t)),n=[];for(const c of i){const l=yield(0,e.J0M)(Number(c)),s=yield(0,e.kqu)(o,l,"",x.KA,!0);yield Promise.all(s?.map(function(){var y=(0,v.Z)(function*(m){yield(0,e.TAP)(m?.id)});return function(m){return y.apply(this,arguments)}}())),n.push({success:!0,id:c})}return n}catch(o){throw console.error("error in cancel request",o),o}})()}inviteMembers(i,t){var o=this;return(0,v.Z)(function*(){try{const n=[],c=yield(0,e.J0M)(t);for(const l of i)"Entity"===l.type?n.push({entityId:l.entityId}):yield o.sendEmailToNonEntity(l,t,c);return n.length>0&&(yield o.sendGroupInvitation(n,t)),{message:"Invite Sent!",success:!0}}catch(n){throw console.error("error in invite memvers",n),n}})()}sendGroupInvitation(i,t){var o=this;return(0,v.Z)(function*(){try{const n=yield(0,e.J0M)(t);let c;for(const s of i){const y=s.entityId,m=yield(0,e.J0M)(y);c=yield o.getConceptIdFromEntityId(y),yield o.CreateConnectionBetweenEntityLocal(n,m,"s_invitees")}const l={userConceptIds:[c],fs_notification:{timestamp:(new Date).toISOString(),title:"Group Invitation",body:"You have been invited to join a group",link:`/groups/gr/${t}`}};return o._itemService.bulkNotification(l).subscribe({next:()=>{}}),yield e.smK.SyncDataOnline(),{message:"Sent Invite!",success:!0}}catch(n){throw console.error(n),n}})()}getConceptIdFromEntityId(i){return(0,v.Z)(function*(){try{const t=[{composition:i,fullLinkers:["the_entity_user"],inpage:100,page:1,logic:"or",filterSearches:[]}];return(yield(0,e.eHe)(t))?.data?.the_entity?.the_entity_user?.[0]?.id}catch(t){throw console.error(t),t}})()}sendEmailToNonEntity(i,t,o){var n=this;return(0,v.Z)(function*(){try{if(i?.email){const c=yield(0,e.J0M)(i?.entityId);yield n.CreateConnectionBetweenEntityLocal(o,c,"s_contact_invitees");const l=S.N.baseDomain+"/signup",y=JSON.stringify({groupId:t,conceptId:i?.conceptId}),m=btoa(y),h={heading:"Join My Group!",toAddress:i.email,body:`\n          <div style="font-family: Arial, sans-serif; line-height: 1.6;">\n            <p style="margin-bottom: 15px;">\n              Hi ${i.name},\n            </p>\n      \n            <p style="margin-bottom: 15px;">\n              I hope you're doing well!\n            </p>\n      \n            <p style="margin-bottom: 15px;">\n              You've been invited to join my group "<strong>${i.groupName}</strong>" on BoomConsole. This innovative Chrome extension lets you create groups, post, like, and comment. It's a fun and easy way to stay connected!\n            </p>\n      \n            <p style="margin-bottom: 15px;">\n              I would be delighted if you could join us.\n            </p>\n      \n            <p style="margin-bottom: 15px;">\n              See you there! <a href="${l}?gi=${m}" style="color: #007bff;">Click here</a>\n            </p>\n      \n            <p style="margin-bottom: 15px;">\n              Best Regards,<br>\n              ${i.sender}\n            </p>\n          </div>\n        `},E=yield n._itemService.sendmail(h);return yield e.smK.SyncDataOnline(),E}return{msg:"Couldnot send email, email is empty or not found"}}catch(c){throw console.error("error in invite memvers",c),c}})()}approveGroupInvite(i){var t=this;return(0,v.Z)(function*(){try{const{groupId:o,entityId:n,status:c,email:l}=i,m=(yield t.getContactInvitees(o))?.filter(d=>d?.data?.boomgpt?.data?.crm_data?.email==l)[0]?.id;let r;const _=yield(0,e.J0M)(Number(o)),h=yield(0,e.J0M)(Number(n)),E=yield(0,e.kqu)(_,h,"","the_group_s_invitees",!0),O=yield(0,e.kqu)(_,h,"","the_group_s_request",!0);let T;return m&&(r=yield(0,e.J0M)(m),T=yield(0,e.kqu)(_,r,"","the_group_s_contact_invitees",!0)),yield Promise.all([E?.map(function(){var d=(0,v.Z)(function*(M){yield(0,e.TAP)(M?.id)});return function(M){return d.apply(this,arguments)}}()),O?.map(function(){var d=(0,v.Z)(function*(M){yield(0,e.TAP)(M?.id)});return function(M){return d.apply(this,arguments)}}())]),T?.length>0&&(yield Promise.all([T?.map(function(){var d=(0,v.Z)(function*(M){yield(0,e.TAP)(M?.id)});return function(M){return d.apply(this,arguments)}}())])),"approved"==c&&(yield t.CreateConnectionBetweenEntityLocal(_,h,"s_member")),yield e.smK.SyncDataOnline(),h}catch(o){throw console.error(o),o}})()}getContactInvitees(i){return(0,v.Z)(function*(){try{const t=[{composition:i,fullLinkers:["the_group_s_contact_invitees"],inpage:100,page:1,logic:"or",filterSearches:[]}];return(yield(0,e.eHe)(t))?.data?.the_group?.the_group_s_contact_invitees||[]}catch(t){console.error(t)}})()}requestToJoinGroup(i){var t=this;return(0,v.Z)(function*(){try{const{groupId:o,entityId:n,adminId:c,email:l}=i,s=yield(0,e.J0M)(o),y=yield(0,e.J0M)(n);if(yield t.checkIfUserIsAlreadyAMember(o,n))return{message:"User is already a member of this group.",success:!1};yield t.CreateConnectionBetweenEntityLocal(s,y,"s_request");const r={userConceptIds:[c],fs_notification:{timestamp:(new Date).toISOString(),title:"Group Requests",body:`${l} has requested to join a group`,link:`/groups/gr/${o}`}};return t._itemService.bulkNotification(r).subscribe({next:()=>{}}),yield e.smK.SyncDataOnline(),{message:"Request send successfully.",success:!0}}catch(o){throw new Error("Error in request to join group",o)}})()}};let I=u;return u.\u0275fac=function(t){return new(t||u)(Z.LFG(A.e),Z.LFG(G.e),Z.LFG(U.c))},u.\u0275prov=Z.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),I})()},3718:(B,N,g)=>{g.d(N,{c:()=>S});var v=g(5861),e=g(9402),x=g(4650);let S=(()=>{const A=class{constructor(){}getAllDiscoverGroups(U){return(0,v.Z)(function*(){return new Promise(L=>{const I=new e.LtL;I.typeConnection="the_group_name",I.name="groupname",I.limit=!0;const u=new e.LtL;u.name="top",u.type="the_group",u.outputFormat=e.xY7,u.order="DESC",u.freeschemaQueries=[I],u.selectors=["the_group_name","the_group_status","the_group_image","the_group_description"],u.page=U,u.inpage=10,(0,e.og0)(u,"").subscribe(f=>{const i=f.map(t=>({name:t?.data?.the_group?.the_group_name?.data?.the_name,status:t?.data?.the_group?.the_group_status?.data?.the_status,description:t?.data?.the_group?.the_group_description?.data?.the_description,owner:t?.data?.the_group?.the_group_owner?.data?.the_owner,id:t?.id,image:t?.data?.the_group?.the_group_image?.data?.the_image,createdAt:t?.created_on}));L(i)})})})()}getGroups(U){return(0,v.Z)(function*(){return new Promise(L=>{const I=new e.LtL;I.typeConnection="the_entity_user_s",I.name="user",I.selectors=["self"];const u=new e.LtL;u.typeConnection="the_email_email",u.name="itememail";const f=new e.LtL;f.name="email",f.typeConnection="the_entity_s_email",f.selectors=["the_email_email"],f.freeschemaQueries=[u];const i=new e.LtL;i.typeConnection="the_group_s_member",i.name="memberquery",i.selectors=["the_entity_firstname","the_entity_first_name","the_entity_lastname","the_entity_last_name","the_entity_avatar","the_entity_email","the_entity_user"],i.freeschemaQueries=[I,f];const t=new e.LtL;t.typeConnection="the_group_s_member",t.reverse=!0,t.name="groupsmember",t.selectors=["the_group_name","the_group_description","the_group_status","the_group_image","the_group_owner"],t.freeschemaQueries=[i];const o=new e.LtL;o.name="top",o.conceptIds=[U],o.outputFormat=e.Zec,o.inpage=10,o.freeschemaQueries=[t],(0,e.og0)(o,"").subscribe(n=>{const c=n?.[0]?.the_entity?.the_group_s_member_reverse??[];console.log("group",c),L(c.map(l=>({name:l?.the_group?.the_group_name?.the_name?.data,status:l?.the_group?.the_group_status?.the_status?.data,description:l?.the_group?.the_group_description?.the_description?.data,id:l?.id,image:l?.the_group?.the_group_image?.the_image?.data,createdAt:l?.created_on,isAdmin:l?.the_group?.the_group_owner?.the_entity?.id===U,members:l?.the_group?.the_group_s_member?.map(s=>({id:s?.the_entity?.id,firstname:s?.the_entity?.data?.the_entity_first_name?.the_first_name?.data||s?.the_entity?.data?.the_entity_firstname?.the_firstname?.data,lastname:s?.the_entity?.data?.the_entity_lastname?.the_lastname?.data||s?.the_entity?.data?.the_entity_last_name?.the_last_name?.data,name:s?.the_entity?.data?.the_entity_firstname?.the_firstname?.data+" "+s?.the_entity?.data?.the_entity_lastname?.the_lastname?.data||s?.the_entity?.data?.the_entity_first_name?.the_first_name?.data+" "+s?.the_entity?.data?.the_entity_last_name?.the_last_name?.data||s?.the_entity?.data?.the_entity_user?.the_user?.data?.the_entity?.data?.the_person?.data?.first_name?.data+" "+s?.the_entity?.data?.the_entity_user?.the_user?.data?.the_entity?.data?.the_person?.data?.last_name?.data,avatar:s?.the_entity?.data?.the_entity_avatar?.the_avatar?.data,email:s?.the_entity?.data?.the_entity_email?.the_email?.data||s?.the_entity?.data?.the_entity_s_email?.[0]?.the_email?.data?.the_email_email?.the_email?.data}))})))})})})()}searchGroups(U){return(0,v.Z)(function*(){return new Promise(L=>{const I=new e.LtL;I.typeConnection="the_group_name",I.name="itemname";const u=new e.Kbf;u.type="the_name",u.search=U,u.logicoperator="like",u.name="namefilter",u.operateon="itemname",u.composition=!0;const f=new e.LtL;f.type="the_group",f.filterLogic="( namefilter )",f.filters=[u],f.name="top",f.freeschemaQueries=[I],f.selectors=["the_group_name","the_group_image"],f.outputFormat=e.yu5,f.inpage=10,(0,e.og0)(f,"").subscribe(i=>{const t=i.map(o=>({image:o?.the_group?.the_group_image?.the_image,name:o?.the_group?.the_group_name?.the_name,id:o?.id}));L(t)})})})()}getGroupDetails(U,L){return(0,v.Z)(function*(){return new Promise(I=>{const u=new e.LtL;u.typeConnection="the_entity_user",u.name="user",u.selectors=["self"];const f=new e.LtL;f.typeConnection="the_group_owner",f.name="entity",f.selectors=["the_entity_firstname","the_entity_lastname","the_entity_avatar"],f.freeschemaQueries=[u];const i=new e.LtL;i.name="group",i.typeConnection="the_group_name";const t=new e.LtL;t.name="top",t.conceptIds=[U],t.outputFormat=e.xY7,t.freeschemaQueries=[i,f],t.selectors=["the_group_name","the_group_description","the_group_status","the_group_image","the_group_owner","the_group_s_member","the_group_s_invitees","the_group_s_request","the_group_s_contact_invitees"],(0,e.og0)(t,"").subscribe(o=>{const n=o?.[0]?.data?.the_group,c=n?.the_group_owner?.data?.the_entity,l=c?.the_entity_firstname?.data?.the_firstname,s=c?.the_entity_lastname?.data?.the_lastname;let y;if(l&&s&&"user"!==s&&"undefined"!==s)y=`${l} ${s}`;else{console.log("else");const r=c?.the_entity_user?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person,_=r?.first_name?.data?.the_first_name,h=r?.last_name?.data?.the_last_name;y=_&&h?`${_} ${h}`:""}const m={id:o?.[0]?.id,createdAt:o?.[0]?.created_on,name:n?.the_group_name?.data?.the_name,nameId:n?.the_group_name?.id,description:n?.the_group_description?.data?.the_description,descriptionId:n?.the_group_description?.id,status:n?.the_group_status?.data?.the_status,statusId:n?.the_group_status?.id,image:n?.the_group_image?.data?.the_image,imageId:n?.the_group_image?.id,ownerId:n?.the_group_owner?.id,admin:{conceptId:n?.the_group_owner?.data?.the_entity?.the_entity_user?.id,name:y,avatar:n?.the_group_owner?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||n?.the_group_owner?.data?.the_entity?.the_entity_user?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.profile_img?.data?.the_profile_img},isAdmin:n?.the_group_owner?.id===L,isInvited:n?.the_group_s_invitees?.some(r=>r?.id===L),isMember:n?.the_group_s_member?.some(r=>r?.id===L),isRequested:n?.the_group_s_request?.some(r=>r?.id===L)};I(m)})})})()}viewGroupMembers(U){return(0,v.Z)(function*(){try{return new Promise(L=>{const I=new e.LtL;I.typeConnection="the_entity_user",I.name="entityuser",I.selectors=["self"];const u=new e.LtL;u.typeConnection="the_entity_user",u.name="entityuser2",u.selectors=["self"];const f=new e.LtL;f.typeConnection="the_email_email",f.name="itememail";const i=new e.LtL;i.name="email",i.typeConnection="the_entity_s_email",i.selectors=["the_email_email"],i.freeschemaQueries=[f];const t=new e.LtL;t.typeConnection="the_group_s_member",t.name="groupsmember",t.freeschemaQueries=[I,i],t.selectors=["the_entity_firstname","the_entity_lastname","the_entity_email","the_entity_avatar","the_entity_first_name","the_entity_last_name","the_entity_s_email","the_entity_type"];const o=new e.LtL;o.typeConnection="the_group_s_request",o.name="groupsrequest",o.freeschemaQueries=[u],o.selectors=["the_entity_firstname","the_entity_lastname","the_entity_email","the_entity_avatar"];const n=new e.LtL;n.name="top",n.conceptIds=[U],n.outputFormat=e.Zec,n.inpage=10,n.freeschemaQueries=[t,o],(0,e.og0)(n,"").subscribe(c=>{console.log("response",c);const s=c?.[0]?.the_group?.the_group_s_member?.map(m=>{const r=m?.the_entity?.data;let _;r?.the_entity_s_email&&(_="Contact"),console.log("member",m);const E=m?.the_entity?.data?.the_entity_user?.the_user?.data?.the_entity?.data?.the_person?.data;return console.log("user",E),{profileImage:r?.the_entity_avatar?.the_avatar?.data||E?.profile_img?.data,firstName:(r?.the_entity_firstname?.the_firstname?.data&&"undefined"!==r?.the_entity_firstname?.the_firstname?.data?r.the_entity_firstname.the_firstname.data:r?.the_entity_first_name?.the_first_name?.data&&"undefined"!==r?.the_entity_first_name?.the_first_name?.data?r?.the_entity_first_name?.the_first_name?.data:E?.first_name?.data)??"",lastName:(r?.the_entity_lastname?.the_lastname?.data&&"undefined"!==r?.the_entity_lastname?.the_last_name?.data?r.the_entity_lastname?.the_lastname?.data:r?.the_entity_last_name?.the_last_name?.data&&"undefined"!==r?.the_entity_last_name?.the_last_name?.data?r?.the_entity_last_name?.the_last_name?.data:E?.last_name?.data)??"",entityId:m?.the_entity?.id,id:m?.the_entity?.data?.the_entity_user?.the_user?.id,type:_||r?.the_entity_type?.the_type?.data}}),y=c?.[0]?.the_group?.the_group_s_request?.map(m=>{const r=m?.the_entity?.data,_=m?.the_entity?.data?.the_entity_user?.the_user?.data?.the_entity?.data?.the_person?.data;return{profileImage:r?.the_entity_avatar?.the_avatar?.data||_?.profile_img?.data,firstName:r?.the_entity_firstname?.the_firstname?.data&&"undefined"!==r?.the_entity_firstname?.the_firstname?.data?r.the_entity_firstname.the_firstname.data:_?.first_name?.data??"",lastName:r?.the_entity_lastname?.the_lastname?.data&&"undefined"!==r?.the_entity_lastname?.the_lastname?.data?r.the_entity_lastname.the_lastname.data:_?.last_name?.data??"",entityId:m?.the_entity?.id,id:m?.the_entity?.data?.the_entity_user?.the_user?.id}});L({memberRequests:y||[],membersJoined:s||[]})})})}catch(L){throw console.error("error in view group members",L),L}})()}listAllPostWithGroups(U,L,I){return(0,v.Z)(function*(){return new Promise(u=>{const f=new e.LtL;f.typeConnection="the_entity_user",f.name="user",f.selectors=["self"];const i=new e.LtL;i.typeConnection="the_entity_user",i.name="user2",i.selectors=["self"];const t=new e.LtL;t.typeConnection="the_post_comment_owner",t.name="owner2",t.freeschemaQueries=[i],t.selectors=["the_entity_firstname","the_entity_lastname","the_entity_avatar"];const o=new e.LtL;o.typeConnection="the_post_s_comment",o.name="comment",o.selectors=["the_post_comment_owner","the_post_comment_text","the_post_comment_s_like"],o.freeschemaQueries=[t];const n=new e.LtL;n.typeConnection="the_post_owner",n.name="owner",n.freeschemaQueries=[f],n.selectors=["the_entity_firstname","the_entity_lastname","the_entity_avatar"];const c=new e.LtL;c.name="post",c.typeConnection="the_group_s_post",c.selectors=["the_post_title","the_post_owner","the_post_filename","the_post_filepath","the_post_s_like","the_post_s_comment"],c.freeschemaQueries=[o,n];const l=new e.LtL;l.typeConnection="the_group_s_member",l.reverse=!0,l.name="groupsmember",l.selectors=["the_group_name","the_group_description","the_group_status","the_group_image","the_group_owner","the_group_s_post"],l.inpage=I,l.page=L,l.limit=!0,l.freeschemaQueries=[c];const s=new e.LtL;s.name="top",s.conceptIds=[U],s.selectors=[],s.outputFormat=e.xY7,s.freeschemaQueries=[l],(0,e.og0)(s,"").subscribe(y=>{const r=y?.[0]?.data?.the_entity?.the_group_s_member_reverse?.flatMap(_=>{const h=_?.data?.the_group;return(h?.the_group_s_post||[]).map(O=>({groupId:_?.id,groupName:h?.the_group_name?.data?.the_name,groupOwner:h?.the_group_owner?.id,groupImage:h?.the_group_image?.data?.the_image,title:{title:O?.data?.the_post?.the_post_title?.data?.the_title,id:O?.data?.the_post?.the_post_title?.id},filename:O?.data?.the_post?.the_post_filename?.data?.the_filename||"",filepath:O?.data?.the_post?.the_post_filepath?.data?.the_filepath||"",postId:O?.id,created_at:O?.created_on||"",isLiked:O?.data?.the_post?.the_post_s_like?.some(T=>T?.id==U),likeCount:O?.data?.the_post?.the_post_s_like?.length||0,createdAt:O?.created_on,commentCount:O?.data?.the_post?.the_post_s_comment?.length||0,isOwner:O?.data?.the_post?.the_post_owner?.id==U,owner:{conceptId:O?.data?.the_post?.the_post_owner?.data?.the_entity?.the_entity_user?.id,id:O?.data?.the_post?.the_post_owner?.id,profile_img:O?.data?.the_post?.the_post_owner?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||O?.data?.the_post?.the_post_owner?.data?.the_entity?.the_entity_user?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.profile_img?.data?.the_profile_img,first_name:O?.data?.the_post?.the_post_owner?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||O?.data?.the_post?.the_post_owner?.data?.the_entity?.the_entity_user?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.first_name?.data?.the_first_name,last_name:O?.data?.the_post?.the_post_owner?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||O?.data?.the_post?.the_post_owner?.data?.the_entity?.the_entity_user?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.last_name?.data?.the_last_name},comments:O?.data?.the_post?.the_post_s_comment?.map(T=>({id:T.id,textId:T.data?.the_post_comment?.the_post_comment_text?.id,createdAt:T.created_on,text:T.data?.the_post_comment?.the_post_comment_text?.data?.the_text,owner:{conceptId:T.data?.the_post_comment?.the_post_comment_owner?.data?.the_entity?.the_entity_user?.id,id:T.data?.the_post_comment?.the_post_comment_owner?.id,profile_img:T.data?.the_post_comment?.the_post_comment_owner?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||T.data?.the_post_comment?.the_post_comment_owner?.data?.the_entity?.the_entity_user?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.profile_img?.data?.the_profile_img,first_name:T.data?.the_post_comment?.the_post_comment_owner?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||T.data?.the_post_comment?.the_post_comment_owner?.data?.the_entity?.the_entity_user?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.first_name?.data?.the_first_name,last_name:T.data?.the_post_comment?.the_post_comment_owner?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||T.data?.the_post_comment?.the_post_comment_owner?.data?.the_entity?.the_entity_user?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.last_name?.data?.the_last_name},likeCount:T.data?.the_post_comment?.the_post_comment_s_like?.length||0,isLiked:T.data?.the_post_comment?.the_post_comment_s_like?.some(d=>d.id==U)}))||[]}))});u(r)})})})()}};let Z=A;return A.\u0275fac=function(L){return new(L||A)},A.\u0275prov=x.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),Z})()}}]);