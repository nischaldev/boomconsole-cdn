(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[894],{894:(j,v,_)=>{"use strict";_.r(v),_.d(v,{MentorFriendsModule:()=>Rc});var p=_(6895),h=_(7518),m=_(5861);const b="buyer_to_buyeragent",C="buyeragent_to_selleragent",x="selleragent_to_seller",w="seller_to_selleragent",A="selleragent_to_buyeragent",I="buyeragent_to_buyer";var e=_(4650),u=_(4006),S=_(8998),M=_(9446),O=_(8495),$=_(354),G=_(8180);function B(a,s){1&a&&(e.TgZ(0,"button",16)(1,"div",17)(2,"span",18),e._uU(3,"."),e.qZA()(),e._uU(4," Creating... "),e.qZA()),2&a&&e.Q6J("disabled",!0)}function J(a,s){if(1&a&&(e.TgZ(0,"button",19),e._uU(1),e.qZA()),2&a){const i=e.oxw();e.xp6(1),e.hij(" ",i.modalTitle," ")}}let E=(()=>{const s=class{constructor(t,n,o,r,l){this.modal=t,this.formBuilder=n,this._nodeService=o,this._projectService=r,this._snackbarService=l,this.isApiRequesting=!1,this.modalTitle="",this.responses=new e.vpe,this.createProject=this.formBuilder.group({title:new u.NI("",[u.kI.required,u.kI.pattern("[a-zA-Z ]*"),S.R.notOnlySpaces()]),description:new u.NI("",[u.kI.required])})}ngOnInit(){this.modalTitle="projectRequest"===this.requestType?"Request Project":"Create Project",this.patchData()}patchData(){this.createProject.patchValue({title:this.requestData?.title,description:this.requestData?.description||""})}submitProject(){var t=this;if(!this.createProject.valid)return;const n={title:this.createProject.value.title,description:this.createProject.value.description||this.requestData.description,rfqId:this.requestData.rfqId};if("projectRequest"===this.requestType){const o={...this.requestData,title:n?.title,description:n?.description};this.isApiRequesting=!0,this._nodeService.requestProject(o).subscribe({next:()=>{this.isApiRequesting=!1,this.modal.close(),this._snackbarService.openSnackBar("Project request sent successfully","success")},error:()=>{this.isApiRequesting=!1}})}else this.isApiRequesting=!0,this._projectService.createProjects(n).subscribe({next:(o=(0,m.Z)(function*(r){t.isApiRequesting=!1,r&&r.projectId?(t._snackbarService.openSnackBar("Project Created successfully","success"),t.responses.emit(),t.updateQuoteStatus(t.requestData.rfqId,"Closed"),t.assignUser(r?.projectId,t.requestData?.buyerConceptId),t._nodeService.updateProjRequest({projectId:t.requestData.id}).subscribe({})):(t.isApiRequesting=!1,t._snackbarService.openSnackBar(r?.message,"error"),console.error("Failed to create project:",r))}),function(l){return o.apply(this,arguments)}),error:o=>{this.isApiRequesting=!1,console.error("Error creating project:",o),this._snackbarService.openSnackBar("Error creating project: Project Name Already Exist Or Not Valid","error")}});var o}assignUser(t,n){this._projectService.assignUserToProject(t,{userConcept:n}).subscribe({next:()=>{this.modal.close()}})}closeModal(){this.modal.close()}updateQuoteStatus(t,n){this._nodeService.updateQuoteStatus({quoteId:t,status:n}).subscribe({next:r=>{console.log(r)}})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(M.Kz),e.Y36(u.qu),e.Y36(O.s),e.Y36($.Y),e.Y36(G.o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-create-project"]],inputs:{requestData:"requestData",requestType:"requestType",requestQuoteSent:"requestQuoteSent"},outputs:{responses:"responses"},decls:24,vars:4,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["tabindex","","aria-label","Close",1,"btn-close",3,"keyup.enter","click"],[1,"modal-body","p-0"],[3,"formGroup","ngSubmit"],["createFormId","ngForm"],[1,"row"],[1,"col-md-12"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","name","title","id","title","placeholder","Project title","required","","formControlName","title",1,"form-control","p-2","mb-1","shadow-none"],["for","description",1,"form-label"],["type","text","name","description","id","description","placeholder","Description","required","","formControlName","description",1,"form-control","p-2","mb-1","shadow-none"],[1,"col","text-right","me-0","mb-4","pt-4"],["loading",""],["type","submit","class","btn btn-primary",4,"ngIf","ngIfElse"],[1,"btn","btn-primary","btn-disabled",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.qZA(),e.TgZ(3,"span",2),e.NdJ("keyup.enter",function(){return o.closeModal()})("click",function(){return o.closeModal()}),e.qZA()(),e.TgZ(4,"div",3)(5,"form",4,5),e.NdJ("ngSubmit",function(){return o.submitProject()}),e.TgZ(7,"div",6)(8,"div",7)(9,"label",8),e._uU(10,"Title: "),e.TgZ(11,"span",9),e._uU(12,"*"),e.qZA()(),e._UZ(13,"input",10),e.qZA(),e.TgZ(14,"div",7)(15,"label",11),e._uU(16,"Description: "),e.TgZ(17,"span",9),e._uU(18,"*"),e.qZA()(),e._UZ(19,"textarea",12),e.qZA(),e.TgZ(20,"div",13),e.YNc(21,B,5,1,"ng-template",null,14,e.W1O),e.YNc(23,J,2,1,"button",15),e.qZA()()()()),2&n){const r=e.MAs(22);e.xp6(2),e.Oqu(o.modalTitle),e.xp6(3),e.Q6J("formGroup",o.createProject),e.xp6(18),e.Q6J("ngIf",!o.isApiRequesting)("ngIfElse",r)}},dependencies:[p.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u]}),a})();var T=_(9402),N=_(384);function te(a,s){1&a&&(e.TgZ(0,"div",6),e._UZ(1,"div",7),e.qZA())}let q=(()=>{const s=class{constructor(t,n){this._authService=t,this._activeModal=n,this.loading=!0}ngOnInit(){var t=this;return(0,m.Z)(function*(){const o=t._authService.loadFromLocalStorage().entityId,r=document.getElementById("questionnaire");r&&(yield(0,T.FtU)(101284671,r,o)),t.loading=!1})()}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(N.e),e.Y36(M.Kz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-questionnaire"]],decls:6,vars:1,consts:[[1,"modal-header"],[1,"modal-title","text-capitalize"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","loading",4,"ngIf"],["id","questionnaire"],[1,"loading"],[1,"loader"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"h4",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return o._activeModal.dismiss()}),e.qZA()(),e.TgZ(3,"div",3),e.YNc(4,te,2,0,"div",4),e._UZ(5,"div",5),e.qZA()),2&n&&(e.xp6(4),e.Q6J("ngIf",o.loading))},dependencies:[p.O5]}),a})();function R(a,s){1&a&&(e.TgZ(0,"div",6),e._UZ(1,"div",7),e.qZA())}let D=(()=>{const s=class{constructor(t,n){this._authService=t,this._activeModal=n,this.loading=!0}ngOnInit(){var t=this;return(0,m.Z)(function*(){const o=t._authService.loadFromLocalStorage().entityId,r=document.getElementById("list-questionnaire");r&&(yield(0,T.FtU)(101284889,r,o)),t.loading=!1})()}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(N.e),e.Y36(M.Kz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-list-questionnaire"]],decls:6,vars:1,consts:[[1,"modal-header"],[1,"modal-title","text-capitalize"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","loading",4,"ngIf"],["id","list-questionnaire"],[1,"loading"],[1,"loader"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"h4",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return o._activeModal.dismiss()}),e.qZA()(),e.TgZ(3,"div",3),e.YNc(4,R,2,0,"div",4),e._UZ(5,"div",5),e.qZA()),2&n&&(e.xp6(4),e.Q6J("ngIf",o.loading))},dependencies:[p.O5]}),a})();var Z=_(8154);let L=(()=>{const s=class{constructor(t,n){this._itemService=t,this._authService=n,this.agentType="",this.sellerId=[],this.boomconsole_admin_email="admin@boomconcole.com",this.localdev_admin_email="admin@boomconsole.com",this.allowedAgentTypes=["buyerAgent","sellerAgent","seller"],this.defaultAgentType="buyer";const o=this._authService.loadFromLocalStorage();this.userConceptId=o.userConcept}setAgentType(t){this.data=t}getAgentType(){return this.data}setQuote(t){this.quote=t}getQuote(){return this.quote}checkUserAgentType(){return new Promise((t,n)=>{this._itemService.getSemanticConnection({compositionId:this.userConceptId,linker:"isAgent_s"}).subscribe({next:r=>{if(r.output&&Array.isArray(r.output)&&r.output.length>0){const l=r.output.reduce((g,f)=>{const y=Date.parse(g.created_at);return Date.parse(f.created_at)>y?f:g},r.output[0]);let c="";const d=Object.keys(l.data);for(const g of d)if(g.includes("agent")){c=l.data[g].agentType;break}this.agentType=c.replace("_agent",""),(void 0===this.agentType||"buyerAgent"!==this.agentType&&"sellerAgent"!==this.agentType&&"seller"!==this.agentType)&&(this.agentType="buyer"),t(this.agentType)}else t(void 0)},error:r=>{n(r)}})})}returnAgentType(){var t=this;return(0,m.Z)(function*(){try{const n=yield t.checkUserAgentType();if(n){const o=n;return t.allowedAgentTypes.includes(o)?(t.agentType=o,t.agentType):(t.agentType=t.defaultAgentType,t.agentType)}return t.agentType=t.defaultAgentType,t.agentType}catch(n){return console.error("Error while checking user agent type:",n),t.defaultAgentType}})()}getSeller(){var t=this;return(0,m.Z)(function*(){try{const n=[{type:"seller_agent",listLinkers:["isAgent_by"],inpage:10,page:1,logic:"or",filterSearches:[]}],o=yield t._itemService.listAllWithoutAuthWithLinker(n).toPromise(),r=[t.localdev_admin_email,t.boomconsole_admin_email];let l=null;return o.forEach(c=>{c?.seller_agent?.seller_agent_s_isAgent_by?.forEach(d=>{const g=d?.the_user?.data?.user_data?.data?.primary_email;r.includes(g)&&(l=d?.the_user?.id)})}),l}catch(n){throw console.error(n),n}})()}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.LFG(Z.e),e.LFG(N.e))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();const U=["WidgetPlaceholder"],F=["myRequest"];function z(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"select",21),e.NdJ("ngModelChange",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.selectedOption=n)})("change",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.onDropdownChange())}),e.TgZ(1,"option",22),e._uU(2,"Projects"),e.qZA(),e.TgZ(3,"option",23),e._uU(4,"Quotes"),e.qZA()()}if(2&a){const i=e.oxw();e.Q6J("ngModel",i.selectedOption)}}function Q(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.createRequest())}),e._uU(1," Create Request "),e.qZA()}}function oe(a,s){1&a&&(e.TgZ(0,"div",25),e._UZ(1,"div",26),e.qZA())}function ce(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"span",36),e.NdJ("click",function(){e.CHM(i);const n=e.oxw().$implicit,o=e.oxw(4);return e.KtG(o.createProject(n))})("keyup.enter",function(){e.CHM(i);const n=e.oxw().$implicit,o=e.oxw(4);return e.KtG(o.createProject(n))}),e._uU(1,"Create project"),e.qZA()}}const Ze=function(a,s,i,t){return{badge:!0,"bg-success text-white":a,"bg-danger text-white":s,"bg-warning text-dark":i,"bg-info text-white":t}};function Ie(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span",32),e._uU(7),e.qZA()(),e.TgZ(8,"td")(9,"div",33)(10,"span",34),e._uU(11,"View request"),e.qZA(),e.YNc(12,ce,2,0,"span",35),e.qZA()()()),2&a){const i=s.$implicit,t=e.oxw(4);e.xp6(2),e.Oqu(null==i?null:i.title),e.xp6(2),e.Oqu(null==i?null:i.description),e.xp6(2),e.Q6J("ngClass",e.l5B(6,Ze,"Approved"===(null==i?null:i.status),"Rejected"===(null==i?null:i.status),"Pending"===(null==i?null:i.status)||!(null!=i&&i.status),"Requested"===(null==i?null:i.status))),e.xp6(1),e.hij(" ",(null==i?null:i.status)||"Pending"," "),e.xp6(3),e.Q6J("routerLink","/marketing/quote/view/"+(null==i?null:i.rfqId)),e.xp6(2),e.Q6J("ngIf","seller"===t.agentType)}}function Ve(a,s){if(1&a&&(e.ynx(0),e.YNc(1,Ie,13,11,"tr",31),e.BQk()),2&a){const i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i.projects)}}function Ce(a,s){1&a&&(e.TgZ(0,"tr"),e._uU(1," No data available "),e.qZA())}function ge(a,s){if(1&a&&(e.TgZ(0,"table",28)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"Title"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Description"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Status"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Action"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,Ve,2,1,"ng-container",29),e.YNc(13,Ce,2,0,"ng-template",null,30,e.W1O),e.qZA()()),2&a){const i=e.MAs(14),t=e.oxw(2);e.xp6(12),e.Q6J("ngIf",t.projects.length>0)("ngIfElse",i)}}function Oe(a,s){1&a&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",38),e._uU(3,"No Data Found!"),e.qZA()(),e.BQk())}function ve(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"img",39),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td")(11,"span",32),e._uU(12),e.qZA()(),e.TgZ(13,"td")(14,"span",40),e.NdJ("click",function(){const o=e.CHM(i).$implicit,r=e.oxw(3);return e.KtG(r.viewQuote(o.id))})("keyup.enter",function(){const o=e.CHM(i).$implicit,r=e.oxw(3);return e.KtG(r.viewQuote(o.id))}),e._uU(15," visibility "),e.qZA()()()}if(2&a){const i=s.$implicit;e.xp6(2),e.s9C("src",null==i||null==i.profile?null:i.profile.profile_image,e.LSH),e.xp6(1),e.hij(" ",null==i||null==i.profile?null:i.profile.name," "),e.xp6(2),e.Oqu(null==i||null==i.profile?null:i.profile.email),e.xp6(2),e.Oqu(null==i?null:i.endDate),e.xp6(2),e.AsE("",null==i?null:i.currency," ",null==i?null:i.budget,""),e.xp6(2),e.Q6J("ngClass",e.l5B(8,Ze,"Approved"===(null==i?null:i.status),"Rejected"===(null==i?null:i.status)||"Closed"===(null==i?null:i.status),"Pending"===(null==i?null:i.status)||!(null!=i&&i.status),"Requested"===(null==i?null:i.status))),e.xp6(1),e.hij(" ",(null==i?null:i.status)||"Pending"," ")}}function Ke(a,s){if(1&a&&(e.TgZ(0,"table",28)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Email"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"End Date"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Budget"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Status"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Action"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,Oe,4,0,"ng-container",37),e.ynx(17),e.YNc(18,ve,16,13,"tr",31),e.BQk(),e.qZA()()),2&a){const i=e.oxw(2);e.xp6(16),e.Q6J("ngIf",0===(null==i.allQuotes?null:i.allQuotes.length)),e.xp6(2),e.Q6J("ngForOf",i.allQuotes)}}function xe(a,s){if(1&a&&(e.YNc(0,ge,15,2,"table",27),e.YNc(1,Ke,19,2,"table",27)),2&a){const i=e.oxw();e.Q6J("ngIf","projects"===i.selectedOption),e.xp6(1),e.Q6J("ngIf","quotes"===i.selectedOption)}}let Se=(()=>{const s=class{constructor(t,n,o,r,l,c){this._router=t,this._nodeService=n,this._rfqService=o,this._authService=r,this._ngModalService=l,this.cdr=c,this.loader=!1,this.allQuotes=[],this.agentType="",this.canUpdate=!1,this.selectedOption="quotes",this.projects=[],this.widget_id=101972639,this.paymentWidgetId=102307325,this.activeTab="widget",this.widgetLoaded=!1,this.requestLoaded=!1}ngOnInit(){var t=this;return(0,m.Z)(function*(){t.conceptId=t._authService.loadFromLocalStorage().userConcept,t.entityId=t._authService.loadFromLocalStorage()?.entityId,t.fetchAllRequestQuotesFromStore()})()}ngAfterViewInit(){const t=this._authService.loadFromLocalStorage();this.loadWidget(t)}switchTab(t){this.activeTab=t;const n=document.getElementById("tab-widget"),o=document.getElementById("tab-request");n&&o&&(n.classList.toggle("active","widget"===t),o.classList.toggle("active","request"===t));const r=this._authService.loadFromLocalStorage();"widget"===t&&!this.widgetLoaded&&this.loadWidget(r),"request"===t&&!this.requestLoaded&&this.loadRequestWidget(r)}createRequest(){this._router.navigate(["/marketing/request/create"])}viewQuote(t){this._router.navigate([`/marketing/quote/view/${t}`])}updateQuote(t){this._router.navigate([`/marketing/quote/update/${t}`])}fetchAllQuotes(){var t=this;return(0,m.Z)(function*(){const n=[t.getAllQuotes()];("buyer"===t.agentType||"buyerAgent"===t.agentType)&&n.push(t.getBuyerAgentCreatedQuote());const o=yield Promise.all(n),r=o.length>1?[...o[0],...o[1]]:o[0];t.allQuotes=t.filterOutRepeatedData(r)})()}getAllQuotes(){return new Promise(t=>{let n="";"buyer"===this.agentType?n=b+"_s":"buyerAgent"===this.agentType?n=b+"_by":"sellerAgent"===this.agentType?n=C+"_by":"seller"===this.agentType&&(n=x+"_by"),this._nodeService.getRequestQuote(n,this.conceptId).subscribe(r=>{t(r?.data||[])})})}getBuyerAgentCreatedQuote(){return new Promise(t=>{let n="";"buyer"===this.agentType?n=I+"_by":"buyerAgent"===this.agentType&&(n=I+"_s"),this._nodeService.getRequestQuote(n,this.conceptId).subscribe(r=>{t(r?.data||[])})})}onDropdownChange(){"quotes"===this.selectedOption?this.fetchAllQuotes():this.getProjectRequests()}getProjectRequests(){let t="";t="seller"===this.agentType?"project_request_by":"project_request_s",this._nodeService.getProjectRequests(t).subscribe({next:n=>{this.projects=n?.data}})}createProject(t){const n=this._ngModalService.open(E,{size:"md"});n.componentInstance.requestData=t,n.componentInstance.requestType="createproject",n.componentInstance.responses.subscribe(()=>{this.getProjectRequests()})}filterOutRepeatedData(t){const n={};return t.filter(r=>!n[r.id]&&(n[r.id]=!0,!0))}showListQuestionnaire(){this._ngModalService.open(D,{size:"lg"})}showQuestionnaire(){this._ngModalService.open(q,{size:"lg"})}fetchAllRequestQuotesFromStore(){return new Promise(t=>{const n=new T.LtL;n.name="itemquery",n.typeConnection="the_item_s_rfq",n.selectors=["the_rfq_name","the_rfq_phone","the_rfq_address","the_rfq_message","the_rfq_email"];const o=new T.LtL;o.typeConnection="the_item_s_listing",o.name="itemlisting";const r=new T.LtL;r.name="seller",r.typeConnection="the_seller_s_item",r.selectors=["the_item_image","the_item_description","the_item_title"],r.freeschemaQueries=[n,o];const l=new T.Kbf;l.type="the_listing",l.search="Boomconsole",l.logicoperator="=",l.name="listingfilter",l.operateon="itemlisting",l.composition=!1;const c=new T.LtL;c.name="top",c.conceptIds=[this.entityId],c.freeschemaQueries=[r],c.outputFormat=T.Zec,(0,T.og0)(c,"").subscribe(d=>{const y=d?.[0]?.the_entity?.the_seller_s_item?.map(k=>{const Y=k?.the_item?.id,V=k?.the_item?.data?.the_item_title?.the_title?.data,P=k?.the_item?.data?.the_item_description?.the_description?.data,W=k?.the_item?.data?.the_item_image?.the_image?.data;return k?.the_item?.data?.the_item_s_rfq?.map(ee=>{const ye=ee?.the_rfq?.data?.the_rfq_address?.the_address?.data,$e=ee?.the_rfq?.data?.the_rfq_email?.the_email?.data,Lc=ee?.the_rfq?.data?.the_rfq_message?.the_message?.data,Bc=ee?.the_rfq?.data?.the_rfq_name?.the_name?.data,Yc=ee?.the_rfq?.data?.the_rfq_phone?.the_phone?.data;return{id:Y,email:$e,address:ye,message:Lc,name:Bc,phone:Yc,title:V,image:W,description:P}})})?.flat();this.allProductAndRequests=y,t(d)})})}viewProduct(t){const n=btoa(t);this._router.navigate([`/store/${n}`])}loadWidget(t){this.loader=!0,(0,T.FtU)(this.widget_id,this.widgetPlaceholder.nativeElement,t.entityId).then(()=>{this.loader=!1,this.widgetLoaded=!0,this.cdr.detectChanges()})}loadRequestWidget(t){this.loader=!0,(0,T.FtU)(this.paymentWidgetId,this.myRequest.nativeElement,t.entityId).then(()=>{this.loader=!1,this.requestLoaded=!0,this.cdr.detectChanges()})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(h.F0),e.Y36(O.s),e.Y36(L),e.Y36(N.e),e.Y36(M.FF),e.Y36(e.sBO))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-all-requests"]],viewQuery:function(n,o){if(1&n&&(e.Gf(U,5),e.Gf(F,5)),2&n){let r;e.iGM(r=e.CRH())&&(o.widgetPlaceholder=r.first),e.iGM(r=e.CRH())&&(o.myRequest=r.first)}},decls:25,vars:7,consts:[[1,"container"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"d-flex","align-items-center","gap-2"],[1,"mb-0"],[1,"form-group","min-w-200px","mb-0"],["class","form-select",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"d-flex","gap-2"],["class","btn btn-primary btn-sm create-button",3,"click",4,"ngIf"],[1,"card","mt-2"],[1,"card-body"],["class","loading py-5 my-5",4,"ngIf"],[1,"custom-tabs","d-flex","border-bottom","mt-3"],["id","tab-widget",1,"custom-tab-btn","active",3,"click"],["id","tab-request",1,"custom-tab-btn",3,"click"],[1,"tab-content-custom","pt-3"],["id","tab-content-widget",1,"tab-pane-custom"],[1,"WidgetPlaceholder"],["WidgetPlaceholder",""],["id","tab-content-request",1,"tab-pane-custom"],[1,"myRequest"],["myRequest",""],[1,"form-select",3,"ngModel","ngModelChange","change"],["value","projects"],["value","quotes"],[1,"btn","btn-primary","btn-sm","create-button",3,"click"],[1,"loading","py-5","my-5"],[1,"loader"],["class","table table-responsive",4,"ngIf"],[1,"table","table-responsive"],[4,"ngIf","ngIfElse"],["noProjects",""],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"d-flex","gap-2","align-items-center"],[1,"btn","btn-sm","btn-primary","create-button",3,"routerLink"],["class","btn btn-sm btn-primary create-button","tabindex","",3,"click","keyup.enter",4,"ngIf"],["tabindex","",1,"btn","btn-sm","btn-primary","create-button",3,"click","keyup.enter"],[4,"ngIf"],["colspan","6",1,"text-center"],["alt","",1,"profile_img",3,"src"],["tabindex","",1,"material-symbols-outlined","cursor-pointer","view-btn",3,"click","keyup.enter"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"All Requests"),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,z,5,1,"select",5),e.qZA()(),e.TgZ(7,"div",6),e.YNc(8,Q,2,0,"button",7),e.qZA()(),e.TgZ(9,"div",8)(10,"div",9),e.YNc(11,oe,2,0,"div",10),e.qZA(),e.TgZ(12,"div",11)(13,"button",12),e.NdJ("click",function(){return o.switchTab("widget")}),e._uU(14," Product request "),e.qZA(),e.TgZ(15,"button",13),e.NdJ("click",function(){return o.switchTab("request")}),e._uU(16," My Request "),e.qZA()(),e.TgZ(17,"div",14)(18,"div",15),e._UZ(19,"div",16,17),e.qZA(),e.TgZ(21,"div",18),e._UZ(22,"div",19,20),e.qZA()(),e.YNc(24,xe,2,2,"ng-template"),e.qZA()()),2&n&&(e.xp6(6),e.Q6J("ngIf","buyer"===o.agentType||"seller"===o.agentType),e.xp6(2),e.Q6J("ngIf","buyer"===o.agentType||"buyerAgent"===o.agentType),e.xp6(3),e.Q6J("ngIf",o.loader),e.xp6(7),e.ekj("active","widget"===o.activeTab),e.xp6(3),e.ekj("active","request"===o.activeTab))},dependencies:[p.mk,p.sg,p.O5,h.rH,u.YN,u.Kr,u.EJ,u.JJ,u.On],styles:[".create-button[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:6px 16px}  .mdc-list-item__primary-text{display:flex;gap:10px}.profile_img[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;margin-right:5px}.view-btn[_ngcontent-%COMP%]{padding:5px;border-radius:5px}.view-btn[_ngcontent-%COMP%]:hover{background-color:#000;color:#777575}.custom-tab-btn[_ngcontent-%COMP%]{background:transparent;border:none;border-bottom:3px solid transparent;padding:10px 16px;font-weight:600;cursor:pointer;color:#555;transition:border-color .3s,color .3s}.custom-tab-btn.active[_ngcontent-%COMP%]{border-color:#ff9472}.tab-pane-custom[_ngcontent-%COMP%]{display:none}.tab-pane-custom.active[_ngcontent-%COMP%]{display:block}"]}),a})();var K=_(5017),ie=(_(445),_(1281)),de=(_(3353),_(4098),_(7579)),qe=(_(457),_(1135)),Fe=(_(5191),_(9646));_(2722),_(5698);var xt=_(6451),lt=_(9841),ct=_(4004);class fn extends K.o2{get data(){return this._data.value}set data(s){s=Array.isArray(s)?s:[],this._data.next(s),this._renderChangesSubscription||this._filterData(s)}get filter(){return this._filter.value}set filter(s){this._filter.next(s),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(s){this._sort=s,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(s){this._paginator=s,this._updateChangeSubscription()}constructor(s=[]){super(),this._renderData=new qe.X([]),this._filter=new qe.X(""),this._internalPageChanges=new de.x,this._renderChangesSubscription=null,this.sortingDataAccessor=(i,t)=>{const n=i[t];if((0,ie.t6)(n)){const o=Number(n);return o<9007199254740991?o:n}return n},this.sortData=(i,t)=>{const n=t.active,o=t.direction;return n&&""!=o?i.sort((r,l)=>{let c=this.sortingDataAccessor(r,n),d=this.sortingDataAccessor(l,n);const g=typeof c,f=typeof d;g!==f&&("number"===g&&(c+=""),"number"===f&&(d+=""));let y=0;return null!=c&&null!=d?c>d?y=1:c<d&&(y=-1):null!=c?y=1:null!=d&&(y=-1),y*("asc"==o?1:-1)}):i},this.filterPredicate=(i,t)=>{const n=Object.keys(i).reduce((r,l)=>r+i[l]+"\u25ec","").toLowerCase(),o=t.trim().toLowerCase();return-1!=n.indexOf(o)},this._data=new qe.X(s),this._updateChangeSubscription()}_updateChangeSubscription(){const s=this._sort?(0,xt.T)(this._sort.sortChange,this._sort.initialized):(0,Fe.of)(null),i=this._paginator?(0,xt.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):(0,Fe.of)(null),n=(0,lt.a)([this._data,this._filter]).pipe((0,ct.U)(([l])=>this._filterData(l))),o=(0,lt.a)([n,s]).pipe((0,ct.U)(([l])=>this._orderData(l))),r=(0,lt.a)([o,i]).pipe((0,ct.U)(([l])=>this._pageData(l)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=r.subscribe(l=>this._renderData.next(l))}_filterData(s){return this.filteredData=null==this.filter||""===this.filter?s:s.filter(i=>this.filterPredicate(i,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(s){return this.sort?this.sortData(s.slice(),this.sort):s}_pageData(s){if(!this.paginator)return s;const i=this.paginator.pageIndex*this.paginator.pageSize;return s.slice(i,i+this.paginator.pageSize)}_updatePaginator(s){Promise.resolve().then(()=>{const i=this.paginator;if(i&&(i.length=s,i.pageIndex>0)){const t=Math.ceil(i.length/i.pageSize)-1||0,n=Math.min(i.pageIndex,t);n!==i.pageIndex&&(i.pageIndex=n,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}}class bn extends fn{}function yn(a,s){1&a&&(e.TgZ(0,"div",9),e._UZ(1,"span",10),e.qZA())}function Cn(a,s){if(1&a&&e._UZ(0,"img",15),2&a){const i=e.oxw().$implicit;e.s9C("src",null==i||null==i.the_user||null==i.the_user.data||null==i.the_user.data.entity||null==i.the_user.data.entity.data||null==i.the_user.data.entity.data.person||null==i.the_user.data.entity.data.person.data?null:i.the_user.data.entity.data.person.data.profile_img,e.LSH)}}function vn(a,s){1&a&&e._UZ(0,"img",16)}function xn(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"tr",11),e.NdJ("click",function(){const o=e.CHM(i).$implicit,r=e.oxw();return e.KtG(r.selection.toggle(o))}),e.TgZ(1,"td")(2,"input",12),e.NdJ("click",function(n){return n.stopPropagation()})("change",function(){const o=e.CHM(i).$implicit,r=e.oxw();return e.KtG(r.selection.toggle(o))}),e.qZA()(),e.TgZ(3,"td"),e.YNc(4,Cn,1,1,"img",13),e.YNc(5,vn,1,0,"ng-template",null,14,e.W1O),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA()()}if(2&a){const i=s.$implicit,t=e.MAs(6),n=e.oxw();e.xp6(2),e.Q6J("checked",n.selection.isSelected(i)),e.xp6(2),e.Q6J("ngIf",null==i||null==i.the_user||null==i.the_user.data||null==i.the_user.data.entity||null==i.the_user.data.entity.data||null==i.the_user.data.entity.data.person||null==i.the_user.data.entity.data.person.data?null:i.the_user.data.entity.data.person.data.profile_img)("ngIfElse",t),e.xp6(3),e.AsE(" ",i.the_user.data.entity.data.person.data.first_name," ",i.the_user.data.entity.data.person.data.last_name," "),e.xp6(2),e.Oqu(i.the_user.data.entity.data.person.data.email),e.xp6(2),e.Oqu(i.the_user.data.entity.data.person.data.phone)}}let dt=(()=>{const s=class{constructor(t,n,o){this._itemService=t,this._requestService=n,this._ngbModal=o,this.DATA=[],this.dataSource=new bn(this.DATA),this.selection=new K.Ov(!0,[]),this.loading=!1,this.selectedAgents=new e.vpe}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}ngOnInit(){this.loading=!0,this._requestService.returnAgentType().then(t=>{this.agentType=t,void 0!==this.agentType&&this.getAgentsList()})}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.id}`:(this.isAllSelected()?"deselect":"select")+" all"}getSelectedData(){return this.selection.selected}onProcessSelected(){const t=this.getSelectedData();this.selectedAgents.emit(t),this._ngbModal.close()}getAgentsList(){var t=this;return(0,m.Z)(function*(){let n;n="buyer"==t.agentType?"buyerAgent_agent":"buyerAgent"==t.agentType?"sellerAgent_agent":"buyerAgent_agent";const o=[{type:n,listLinkers:["isAgent_by"],inpage:100,page:1,logic:"or",filterSearches:[]}];try{const r=yield t._itemService.listAllWithoutAuthWithLinker(o).toPromise();t.loading=!1;const l=`${n}_s_isAgent_by`,c=`${n}`;t.selectedAgent&&t.DATA.forEach(g=>{t.selectedAgent.id===g.id&&t.selection.select(g)});const d=r?.[0]?.[c]?.[l];t.DATA=d,t.selectedAgent&&t.selectedAgent.length>0&&t.DATA.forEach(g=>{t.selectedAgent.some(f=>f.the_user?.id===g.the_user.id)&&t.selection.select(g)}),t.dataSource.data=t.DATA}catch(r){throw t.loading=!1,console.error(r),r}})()}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(Z.e),e.Y36(L),e.Y36(M.Kz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-select-agents"]],inputs:{selectedAgent:"selectedAgent"},outputs:{selectedAgents:"selectedAgents"},decls:22,vars:3,consts:[[1,"card"],[1,"card-body"],[1,"table-header"],["class","loading",4,"ngIf"],[1,"table-responsive"],[1,"table"],["type","checkbox",3,"checked","change"],[3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm","create-button",3,"click"],[1,"loading"],[1,"loader"],[3,"click"],["type","checkbox",3,"checked","click","change"],["class","img","alt","",3,"src",4,"ngIf","ngIfElse"],["defaultImage",""],["alt","",1,"img",3,"src"],["src","/assets/man.png","alt","",1,"img"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"All Agents"),e.qZA()(),e.YNc(5,yn,2,0,"div",3),e.TgZ(6,"div",4)(7,"table",5)(8,"thead")(9,"tr")(10,"th")(11,"input",6),e.NdJ("change",function(){return o.toggleAllRows()}),e.qZA()(),e.TgZ(12,"th"),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Email"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Phone Number"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,xn,12,7,"tr",7),e.qZA()()(),e.TgZ(20,"button",8),e.NdJ("click",function(){return o.onProcessSelected()}),e._uU(21," Save "),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("ngIf",o.loading),e.xp6(6),e.Q6J("checked",o.isAllSelected()),e.xp6(8),e.Q6J("ngForOf",o.dataSource.data))},dependencies:[p.sg,p.O5],styles:["table[_ngcontent-%COMP%]{width:100%}.create-button[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:6px 16px;float:right}.img[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid #888;border-radius:50%;margin-right:10px}"]}),a})(),wn=(()=>{const s=class{constructor(){this.formKey="requestFormState"}saveState(t){localStorage.setItem(this.formKey,JSON.stringify(t))}getState(){const t=localStorage.getItem(this.formKey);return t?JSON.parse(t):null}clearState(){localStorage.removeItem(this.formKey)}};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();var ke=_(1905);function An(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"li")(1,"span",17),e._uU(2," link "),e.qZA(),e._UZ(3,"input",42),e.TgZ(4,"span",43),e.NdJ("click",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeLink(o))})("keyup.enter",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeLink(o))}),e._uU(5," remove "),e.qZA()()}if(2&a){const i=s.$implicit;e.xp6(3),e.Q6J("formControl",i)}}function Mn(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"li")(1,"span",17),e._uU(2," topic "),e.qZA(),e.TgZ(3,"a",44),e._uU(4),e.qZA(),e.TgZ(5,"span",43),e.NdJ("click",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeDocument(o))})("keyup.enter",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeDocument(o))}),e._uU(6," remove "),e.qZA()()}if(2&a){const i=s.$implicit;e.xp6(3),e.s9C("href",i.value.link,e.LSH),e.xp6(1),e.Oqu(i.value.name)}}function kn(a,s){1&a&&(e.TgZ(0,"div",45)(1,"span",17),e._uU(2,"hourglass_empty"),e.qZA(),e._uU(3," Uploading... "),e.qZA())}function Pn(a,s){if(1&a&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&a){const i=s.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i," ")}}function Zn(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",25)(1,"label",32),e._uU(2,"Request Type"),e.qZA(),e.TgZ(3,"select",47),e.NdJ("change",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.toggleAgentSection())}),e.TgZ(4,"option",48),e._uU(5,"Public"),e.qZA(),e.TgZ(6,"option",49),e._uU(7,"Private"),e.qZA()()()}}function In(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"label",50),e._uU(3,"Search buyer"),e.qZA(),e.TgZ(4,"input",51),e.NdJ("input",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.searchByEmail(n))}),e.qZA(),e.TgZ(5,"small",52),e._uU(6),e.qZA(),e.TgZ(7,"small",53),e._uU(8),e.qZA()(),e.BQk()}if(2&a){const i=e.oxw();e.xp6(6),e.Oqu(i.invalidMessage),e.xp6(2),e.Oqu(i.validMessage)}}function On(a,s){1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2,"Agents not selected"),e.qZA()())}function Sn(a,s){if(1&a&&e._UZ(0,"img",59),2&a){const i=e.oxw().$implicit;e.s9C("src",null==i||null==i.the_user||null==i.the_user.data||null==i.the_user.data.entity||null==i.the_user.data.entity.data||null==i.the_user.data.entity.data.person||null==i.the_user.data.entity.data.person.data?null:i.the_user.data.entity.data.person.data.profile_img,e.LSH)}}function qn(a,s){1&a&&e._UZ(0,"img",60)}function Fn(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e.YNc(2,Sn,1,1,"img",57),e.YNc(3,qn,1,0,"ng-template",null,58,e.W1O),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA()()),2&a){const i=s.$implicit,t=e.MAs(4);e.xp6(2),e.Q6J("ngIf",null==i||null==i.the_user||null==i.the_user.data||null==i.the_user.data.entity||null==i.the_user.data.entity.data||null==i.the_user.data.entity.data.person||null==i.the_user.data.entity.data.person.data?null:i.the_user.data.entity.data.person.data.profile_img)("ngIfElse",t),e.xp6(3),e.AsE(" ",null==i?null:i.the_user.data.entity.data.person.data.first_name," ",null==i?null:i.the_user.data.entity.data.person.data.last_name," "),e.xp6(2),e.hij(" ",null==i?null:i.the_user.data.entity.data.person.data.email," "),e.xp6(2),e.hij(" ",null==i?null:i.the_user.data.entity.data.person.data.phone," ")}}function En(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",54)(1,"h3"),e._uU(2,"Agents"),e.qZA(),e.TgZ(3,"table",55)(4,"thead")(5,"th"),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Phone"),e.qZA()(),e.TgZ(11,"tbody"),e.YNc(12,On,3,0,"tr",39),e.YNc(13,Fn,10,6,"tr",19),e.qZA()(),e.TgZ(14,"button",56),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.addAgents())}),e.TgZ(15,"span",17),e._uU(16," person "),e.qZA(),e._uU(17," Add Agents "),e.qZA()()}if(2&a){const i=e.oxw();e.xp6(12),e.Q6J("ngIf",0===i.agentsList.length),e.xp6(1),e.Q6J("ngForOf",i.agentsList)}}function Dn(a,s){1&a&&(e.TgZ(0,"button",61),e._uU(1," Create Request "),e.qZA())}function Nn(a,s){1&a&&(e.ynx(0),e.TgZ(1,"button",62)(2,"div",63)(3,"span",64),e._uU(4,"."),e.qZA()(),e._uU(5," Creating... "),e.qZA(),e.BQk()),2&a&&(e.xp6(1),e.Q6J("disabled",!0))}function Un(a,s){1&a&&e.GkF(0)}let Rn=(()=>{const s=class{constructor(t,n,o,r,l,c,d,g,f,y){this.formBuilder=t,this._itemService=n,this._authService=o,this._snackbarService=r,this._ngbModal=l,this._nodeService=c,this._rfqService=d,this._router=g,this.formStateService=f,this._profileServicev2=y,this.loader=!1,this.showAgentSection=!0,this.file="",this.fileUrl="",this.agentsList=[],this.agentType="",this.isSubmitting=!1,this.searchQuery="",this.searchResults=[],this.selectedUsers=[],this.isDocumentUploading=!1,this.requestForm=this.formBuilder.group({title:new u.NI("",[u.kI.required]),description:new u.NI("",[u.kI.required]),documents:this.formBuilder.group({links:this.formBuilder.array([]),files:this.formBuilder.array([])}),startDate:new u.NI("",[u.kI.required]),endDate:new u.NI("",[u.kI.required]),owner:new u.NI("",[u.kI.required]),currency:new u.NI("",[u.kI.required]),budget:new u.NI("",[u.kI.required]),eventType:new u.NI("public")});const k=this._authService.loadFromLocalStorage();this.userConceptId=k.userConcept,this.entityId=k?.entityId}ngOnInit(){this._rfqService.returnAgentType().then(t=>{this.agentType=t}),this.getCurrentUser(),this.toggleAgentSection(),this.getAgentsList(),this.currencies=[{name:"Afghanistan",code:"AF",capital:"Kabul",region:"AS",currency:{code:"AFN",name:"Afghan afghani",symbol:"\u060b"},language:{code:"ps",name:"Pashto"},flag:"\u{1f1e6}\u{1f1eb}"},{name:"\xc5land Islands",code:"AX",capital:"Mariehamn",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"sv",name:"Swedish"},flag:"\u{1f1e6}\u{1f1fd}"},{name:"Albania",code:"AL",capital:"Tirana",region:"EU",currency:{code:"ALL",name:"Albanian lek",symbol:"L"},language:{code:"sq",name:"Albanian"},flag:"\u{1f1e6}\u{1f1f1}"},{name:"Algeria",code:"DZ",capital:"Algiers",region:"AF",currency:{code:"DZD",name:"Algerian dinar",symbol:"\u062f.\u062c"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1e9}\u{1f1ff}"},{name:"American Samoa",code:"AS",capital:"Pago Pago",region:"OC",currency:{code:"USD",name:"United State Dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e6}\u{1f1f8}"},{name:"Andorra",code:"AD",capital:"Andorra la Vella",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"ca",name:"Catalan"},flag:"\u{1f1e6}\u{1f1e9}"},{name:"Angola",code:"AO",capital:"Luanda",region:"AF",currency:{code:"AOA",name:"Angolan kwanza",symbol:"Kz"},language:{code:"pt",name:"Portuguese"},flag:"\u{1f1e6}\u{1f1f4}"},{name:"Anguilla",code:"AI",capital:"The Valley",region:"NA",currency:{code:"XCD",name:"East Caribbean dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e6}\u{1f1ee}"},{name:"Antigua and Barbuda",code:"AG",capital:"Saint John's",region:"NA",currency:{code:"XCD",name:"East Caribbean dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e6}\u{1f1ec}"},{name:"Argentina",code:"AR",capital:"Buenos Aires",region:"SA",currency:{code:"ARS",name:"Argentine peso",symbol:"$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1e6}\u{1f1f7}"},{name:"Armenia",code:"AM",capital:"Yerevan",region:"AS",currency:{code:"AMD",name:"Armenian dram",symbol:null},language:{code:"hy",name:"Armenian"},flag:"\u{1f1e6}\u{1f1f2}"},{name:"Aruba",code:"AW",capital:"Oranjestad",region:"SA",currency:{code:"AWG",name:"Aruban florin",symbol:"\u0192"},language:{code:"nl",name:"Dutch"},flag:"\u{1f1e6}\u{1f1fc}"},{name:"Australia",code:"AU",capital:"Canberra",region:"OC",currency:{code:"AUD",name:"Australian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e6}\u{1f1fa}"},{name:"Austria",code:"AT",capital:"Vienna",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"de",name:"German"},flag:"\u{1f1e6}\u{1f1f9}"},{name:"Azerbaijan",code:"AZ",capital:"Baku",region:"AS",currency:{code:"AZN",name:"Azerbaijani manat",symbol:null},language:{code:"az",name:"Azerbaijani"},flag:"\u{1f1e6}\u{1f1ff}"},{name:"Bahamas",code:"BS",capital:"Nassau",region:"NA",currency:{code:"BSD",name:"Bahamian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e7}\u{1f1f8}"},{name:"Bahrain",code:"BH",capital:"Manama",region:"AS",currency:{code:"BHD",name:"Bahraini dinar",symbol:".\u062f.\u0628"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1e7}\u{1f1ed}"},{name:"Bangladesh",code:"BD",capital:"Dhaka",region:"AS",currency:{code:"BDT",name:"Bangladeshi taka",symbol:"\u09f3"},language:{code:"bn",name:"Bengali"},flag:""},{name:"Barbados",code:"BB",capital:"Bridgetown",region:"NA",currency:{code:"BBD",name:"Barbadian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e7}\u{1f1e7}"},{name:"Belarus",code:"BY",capital:"Minsk",region:"EU",currency:{code:"BYN",name:"New Belarusian ruble",symbol:"Br"},language:{code:"be",name:"Belarusian"},flag:"\u{1f1e7}\u{1f1fe}"},{name:"Belgium",code:"BE",capital:"Brussels",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"nl",name:"Dutch"},flag:"\u{1f1e7}\u{1f1ea}"},{name:"Belize",code:"BZ",capital:"Belmopan",region:"NA",currency:{code:"BZD",name:"Belize dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e7}\u{1f1ff}"},{name:"Benin",code:"BJ",capital:"Porto-Novo",region:"AF",currency:{code:"XOF",name:"West African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1e7}\u{1f1ef}"},{name:"Bermuda",code:"BM",capital:"Hamilton",region:"NA",currency:{code:"BMD",name:"Bermudian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e7}\u{1f1f2}"},{name:"Bhutan",code:"BT",capital:"Thimphu",region:"AS",currency:{code:"BTN",name:"Bhutanese ngultrum",symbol:"Nu."},language:{code:"dz",name:"Dzongkha"},flag:"\u{1f1e7}\u{1f1f9}"},{name:"Bolivia (Plurinational State of)",code:"BO",capital:"Sucre",region:"SA",currency:{code:"BOB",name:"Bolivian boliviano",symbol:"Bs."},language:{code:"es",name:"Spanish"},flag:"\u{1f1e7}\u{1f1f4}"},{name:"Bonaire, Sint Eustatius and Saba",code:"BQ",capital:"Kralendijk",region:"SA",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"nl",name:"Dutch"},flag:"\u{1f1e7}\u{1f1f6}"},{name:"Bosnia and Herzegovina",code:"BA",capital:"Sarajevo",region:"EU",currency:{code:"BAM",name:"Bosnia and Herzegovina convertible mark",symbol:null},language:{code:"bs",name:"Bosnian"},flag:"\u{1f1e7}\u{1f1e6}"},{name:"Botswana",code:"BW",capital:"Gaborone",region:"AF",currency:{code:"BWP",name:"Botswana pula",symbol:"P"},language:{code:"en",name:"English"},flag:"\u{1f1e7}\u{1f1fc}"},{name:"Bouvet Island",code:"BV",capital:"",region:"AN",currency:{code:"NOK",name:"Norwegian krone",symbol:"kr"},language:{code:"no",name:"Norwegian"},flag:"\u{1f3f3}"},{name:"Brazil",code:"BR",capital:"Bras\xedlia",region:"SA",currency:{code:"BRL",name:"Brazilian real",symbol:"R$"},language:{code:"pt",name:"Portuguese"},flag:"\u{1f1e7}\u{1f1f7}"},{name:"British Indian Ocean Territory",code:"IO",capital:"Diego Garcia",region:"AF",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1ee}\u{1f1f4}"},{name:"United States Minor Outlying Islands",code:"UM",capital:"",region:"NA",currency:{code:"USD",name:"United States Dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1fa}\u{1f1f2}"},{name:"Virgin Islands (British)",code:"VG",capital:"Road Town",region:"NA",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1fb}\u{1f1ec}"},{name:"Virgin Islands (U.S.)",code:"VI",capital:"Charlotte Amalie",region:"NA",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1fb}\u{1f1ee}"},{name:"Brunei Darussalam",code:"BN",capital:"Bandar Seri Begawan",region:"AS",currency:{code:"BND",name:"Brunei dollar",symbol:"$"},language:{code:"ms",name:"Malay"},flag:"\u{1f1e7}\u{1f1f3}"},{name:"Bulgaria",code:"BG",capital:"Sofia",region:"EU",currency:{code:"BGN",name:"Bulgarian lev",symbol:"\u043b\u0432"},language:{code:"bg",name:"Bulgarian"},flag:"\u{1f1e7}\u{1f1ec}"},{name:"Burkina Faso",code:"BF",capital:"Ouagadougou",region:"AF",currency:{code:"XOF",name:"West African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1e7}\u{1f1eb}"},{name:"Burundi",code:"BI",capital:"Bujumbura",region:"AF",currency:{code:"BIF",name:"Burundian franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1e7}\u{1f1ee}"},{name:"Cambodia",code:"KH",capital:"Phnom Penh",region:"AS",currency:{code:"KHR",name:"Cambodian riel",symbol:"\u17db"},language:{code:"km",name:"Khmer"},flag:"\u{1f1f0}\u{1f1ed}"},{name:"Cameroon",code:"CM",capital:"Yaound\xe9",region:"AF",currency:{code:"XAF",name:"Central African CFA franc",symbol:"Fr"},language:{code:"en",name:"English"},flag:"\u{1f1e8}\u{1f1f2}"},{name:"Canada",code:"CA",capital:"Ottawa",region:"NA",currency:{code:"CAD",name:"Canadian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e8}\u{1f1e6}"},{name:"Cabo Verde",code:"CV",capital:"Praia",region:"AF",currency:{code:"CVE",name:"Cape Verdean escudo",symbol:"Esc"},language:{code:"pt",iso639_2:"por",name:"Portuguese",nativeName:"Portugu\xeas"},flag:"\u{1f1e8}\u{1f1fb}"},{name:"Cayman Islands",code:"KY",capital:"George Town",region:"NA",demonym:"Caymanian",currency:{code:"KYD",name:"Cayman Islands dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f0}\u{1f1fe}"},{name:"Central African Republic",code:"CF",capital:"Bangui",region:"AF",currency:{code:"XAF",name:"Central African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1e8}\u{1f1eb}"},{name:"Chad",code:"TD",capital:"N'Djamena",region:"AF",currency:{code:"XAF",name:"Central African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1f9}\u{1f1e9}"},{name:"Chile",code:"CL",capital:"Santiago",region:"SA",currency:{code:"CLP",name:"Chilean peso",symbol:"$"},language:{code:"es",iso639_2:"spa",name:"Spanish",nativeName:"Espa\xf1ol"},flag:"\u{1f1e8}\u{1f1f1}"},{name:"China",code:"CN",capital:"Beijing",region:"AS",currency:{code:"CNY",name:"Chinese yuan",symbol:"\xa5"},language:{code:"zh",name:"Chinese"},flag:"\u{1f1e8}\u{1f1f3}"},{name:"Christmas Island",code:"CX",capital:"Flying Fish Cove",region:"OC",currency:{code:"AUD",name:"Australian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e8}\u{1f1fd}"},{name:"Cocos (Keeling) Islands",code:"CC",capital:"West Island",region:"OC",currency:{code:"AUD",name:"Australian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e8}\u{1f1e8}"},{name:"Colombia",code:"CO",capital:"Bogot\xe1",region:"SA",currency:{code:"COP",name:"Colombian peso",symbol:"$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1e8}\u{1f1f4}"},{name:"Comoros",code:"KM",capital:"Moroni",region:"AF",currency:{code:"KMF",name:"Comorian franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1f0}\u{1f1f2}"},{name:"Congo",code:"CG",capital:"Brazzaville",region:"AF",currency:{code:"XAF",name:"Central African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1e8}\u{1f1ec}"},{name:"Congo (Democratic Republic of the Congo)",code:"CD",capital:"Kinshasa",region:"AF",currency:{code:"CDF",name:"Congolese franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1e8}\u{1f1e9}"},{name:"Cook Islands",code:"CK",capital:"Avarua",region:"OC",currency:{code:"NZD",name:"New Zealand dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e8}\u{1f1f0}"},{name:"Costa Rica",code:"CR",capital:"San Jos\xe9",region:"NA",currency:{code:"CRC",name:"Costa Rican col\xf3n",symbol:"\u20a1"},language:{code:"es",name:"Spanish"},flag:"\u{1f1e8}\u{1f1f7}"},{name:"Croatia",code:"HR",capital:"Zagreb",region:"EU",currency:{code:"HRK",name:"Croatian kuna",symbol:"kn"},language:{code:"hr",name:"Croatian"},flag:"\u{1f1ed}\u{1f1f7}"},{name:"Cuba",code:"CU",capital:"Havana",region:"NA",currency:{code:"CUC",name:"Cuban convertible peso",symbol:"$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1e8}\u{1f1fa}"},{name:"Cura\xe7ao",code:"CW",capital:"Willemstad",region:"SA",currency:{code:"ANG",name:"Netherlands Antillean guilder",symbol:"\u0192"},language:{code:"nl",name:"Dutch"},flag:"\u{1f1e8}\u{1f1fc}"},{name:"Cyprus",code:"CY",capital:"Nicosia",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"tr",name:"Turkish"},flag:"\u{1f1e8}\u{1f1fe}"},{name:"Czech Republic",code:"CZ",capital:"Prague",region:"EU",currency:{code:"CZK",name:"Czech koruna",symbol:"K\u010d"},language:{code:"cs",name:"Czech"},flag:"\u{1f1e8}\u{1f1ff}"},{name:"Denmark",code:"DK",capital:"Copenhagen",region:"EU",currency:{code:"DKK",name:"Danish krone",symbol:"kr"},language:{code:"da",name:"Danish"},flag:"\u{1f1e9}\u{1f1f0}"},{name:"Djibouti",code:"DJ",capital:"Djibouti",region:"AF",currency:{code:"DJF",name:"Djiboutian franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1e9}\u{1f1ef}"},{name:"Dominica",code:"DM",capital:"Roseau",region:"NA",currency:{code:"XCD",name:"East Caribbean dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1e9}\u{1f1f2}"},{name:"Dominican Republic",code:"DO",capital:"Santo Domingo",region:"NA",currency:{code:"DOP",name:"Dominican peso",symbol:"$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1e9}\u{1f1f4}"},{name:"Ecuador",code:"EC",capital:"Quito",region:"SA",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1ea}\u{1f1e8}"},{name:"Egypt",code:"EG",capital:"Cairo",region:"AF",currency:{code:"EGP",name:"Egyptian pound",symbol:"\xa3"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1ea}\u{1f1ec}"},{name:"El Salvador",code:"SV",capital:"San Salvador",region:"NA",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1f8}\u{1f1fb}"},{name:"Equatorial Guinea",code:"GQ",capital:"Malabo",region:"AF",currency:{code:"XAF",name:"Central African CFA franc",symbol:"Fr"},language:{code:"es",iso639_2:"spa",name:"Spanish",nativeName:"Espa\xf1ol"},flag:"\u{1f1ec}\u{1f1f6}"},{name:"Eritrea",code:"ER",capital:"Asmara",region:"AF",currency:{code:"ERN",name:"Eritrean nakfa",symbol:"Nfk"},language:{code:"en",name:"English"},flag:"\u{1f1ea}\u{1f1f7}"},{name:"Estonia",code:"EE",capital:"Tallinn",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"et",name:"Estonian"},flag:"\u{1f1ea}\u{1f1ea}"},{name:"Ethiopia",code:"ET",capital:"Addis Ababa",region:"AF",currency:{code:"ETB",name:"Ethiopian birr",symbol:"Br"},language:{code:"am",name:"Amharic"},flag:"\u{1f1ea}\u{1f1f9}"},{name:"Falkland Islands (Malvinas)",code:"FK",capital:"Stanley",region:"SA",currency:{code:"FKP",name:"Falkland Islands pound",symbol:"\xa3"},language:{code:"en",name:"English"},flag:"\u{1f1eb}\u{1f1f0}"},{name:"Faroe Islands",code:"FO",capital:"T\xf3rshavn",region:"EU",currency:{code:"DKK",name:"Danish krone",symbol:"kr"},language:{code:"fo",name:"Faroese"},flag:"\u{1f1eb}\u{1f1f4}"},{name:"Fiji",code:"FJ",capital:"Suva",region:"OC",currency:{code:"FJD",name:"Fijian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1eb}\u{1f1ef}"},{name:"Finland",code:"FI",capital:"Helsinki",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fi",iso639_2:"fin",name:"Finnish",nativeName:"suomi"},flag:"\u{1f1eb}\u{1f1ee}"},{name:"France",code:"FR",capital:"Paris",region:"EU",demonym:"French",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1eb}\u{1f1f7}"},{name:"French Guiana",code:"GF",capital:"Cayenne",region:"SA",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1ec}\u{1f1eb}"},{name:"French Polynesia",code:"PF",capital:"Papeet\u0113",region:"OC",currency:{code:"XPF",name:"CFP franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1f5}\u{1f1eb}"},{name:"French Southern Territories",code:"TF",capital:"Port-aux-Fran\xe7ais",region:"AF",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1f9}\u{1f1eb}"},{name:"Gabon",code:"GA",capital:"Libreville",region:"AF",currency:{code:"XAF",name:"Central African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1ec}\u{1f1e6}"},{name:"Gambia",code:"GM",capital:"Banjul",region:"AF",currency:{code:"GMD",name:"Gambian dalasi",symbol:"D"},language:{code:"en",name:"English"},flag:"\u{1f1ec}\u{1f1f2}"},{name:"Georgia",code:"GE",capital:"Tbilisi",region:"AS",currency:{code:"GEL",name:"Georgian Lari",symbol:"\u10da"},language:{code:"ka",name:"Georgian"},flag:"\u{1f1ec}\u{1f1ea}"},{name:"Germany",code:"DE",capital:"Berlin",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"de",name:"German"},flag:"\u{1f1e9}\u{1f1ea}"},{name:"Ghana",code:"GH",capital:"Accra",region:"AF",currency:{code:"GHS",name:"Ghanaian cedi",symbol:"\u20b5"},language:{code:"en",name:"English"},flag:"\u{1f1ec}\u{1f1ed}"},{name:"Gibraltar",code:"GI",capital:"Gibraltar",region:"EU",currency:{code:"GIP",name:"Gibraltar pound",symbol:"\xa3"},language:{code:"en",name:"English"},flag:"\u{1f1ec}\u{1f1ee}"},{name:"Greece",code:"GR",capital:"Athens",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"el",name:"Greek (modern)"},flag:"\u{1f1ec}\u{1f1f7}"},{name:"Greenland",code:"GL",capital:"Nuuk",region:"NA",currency:{code:"DKK",name:"Danish krone",symbol:"kr"},language:{code:"kl",name:"Kalaallisut"},flag:"\u{1f1ec}\u{1f1f1}"},{name:"Grenada",code:"GD",capital:"St. George's",region:"NA",currency:{code:"XCD",name:"East Caribbean dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1ec}\u{1f1e9}"},{name:"Guadeloupe",code:"GP",capital:"Basse-Terre",region:"NA",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1ec}\u{1f1f5}"},{name:"Guam",code:"GU",capital:"Hag\xe5t\xf1a",region:"OC",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1ec}\u{1f1fa}"},{name:"Guatemala",code:"GT",capital:"Guatemala City",region:"NA",currency:{code:"GTQ",name:"Guatemalan quetzal",symbol:"Q"},language:{code:"es",name:"Spanish"},flag:"\u{1f1ec}\u{1f1f9}"},{name:"Guernsey",code:"GG",capital:"St. Peter Port",region:"EU",currency:{code:"GBP",name:"British pound",symbol:"\xa3"},language:{code:"en",name:"English"},flag:"\u{1f1ec}\u{1f1ec}"},{name:"Guinea",code:"GN",capital:"Conakry",region:"AF",currency:{code:"GNF",name:"Guinean franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1ec}\u{1f1f3}"},{name:"Guinea-Bissau",code:"GW",capital:"Bissau",region:"AF",currency:{code:"XOF",name:"West African CFA franc",symbol:"Fr"},language:{code:"pt",name:"Portuguese"},flag:"\u{1f1ec}\u{1f1fc}"},{name:"Guyana",code:"GY",capital:"Georgetown",region:"SA",currency:{code:"GYD",name:"Guyanese dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1ec}\u{1f1fe}"},{name:"Haiti",code:"HT",capital:"Port-au-Prince",region:"Americas",currency:{code:"HTG",name:"Haitian gourde",symbol:"G"},language:{code:"fr",name:"French"},flag:"\u{1f1ed}\u{1f1f9}"},{name:"Heard Island and McDonald Islands",code:"HM",capital:"",region:"",currency:{code:"AUD",name:"Australian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f3f3}"},{name:"Holy See",code:"VA",capital:"Rome",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1fb}\u{1f1e6}"},{name:"Honduras",code:"HN",capital:"Tegucigalpa",region:"NA",currency:{code:"HNL",name:"Honduran lempira",symbol:"L"},language:{code:"es",name:"Spanish"},flag:"\u{1f1ed}\u{1f1f3}"},{name:"Hong Kong",code:"HK",capital:"City of Victoria",region:"AS",currency:{code:"HKD",name:"Hong Kong dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1ed}\u{1f1f0}"},{name:"Hungary",code:"HU",capital:"Budapest",region:"EU",currency:{code:"HUF",name:"Hungarian forint",symbol:"Ft"},language:{code:"hu",name:"Hungarian"},flag:"\u{1f1ed}\u{1f1fa}"},{name:"Iceland",code:"IS",capital:"Reykjav\xedk",region:"EU",currency:{code:"ISK",name:"Icelandic kr\xf3na",symbol:"kr"},language:{code:"is",name:"Icelandic"},flag:"\u{1f1ee}\u{1f1f8}"},{name:"India",code:"IN",capital:"New Delhi",region:"AS",currency:{code:"INR",name:"Indian rupee",symbol:"\u20b9"},language:{code:"hi",name:"Hindi"},flag:"\u{1f1ee}\u{1f1f3}"},{name:"Indonesia",code:"ID",capital:"Jakarta",region:"AS",currency:{code:"IDR",name:"Indonesian rupiah",symbol:"Rp"},language:{code:"id",name:"Indonesian"},flag:"\u{1f1ee}\u{1f1e9}"},{name:"C\xf4te d'Ivoire",code:"CI",capital:"Yamoussoukro",region:"AF",currency:{code:"XOF",name:"West African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1e8}\u{1f1ee}"},{name:"Iran (Islamic Republic of)",code:"IR",capital:"Tehran",region:"AS",currency:{code:"IRR",name:"Iranian rial",symbol:"\ufdfc"},language:{code:"fa",name:"Persian (Farsi)"},flag:"\u{1f1ee}\u{1f1f7}"},{name:"Iraq",code:"IQ",capital:"Baghdad",region:"AS",currency:{code:"IQD",name:"Iraqi dinar",symbol:"\u0639.\u062f"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1ee}\u{1f1f6}"},{name:"Ireland",code:"IE",capital:"Dublin",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"ga",name:"Irish"},flag:"\u{1f1ee}\u{1f1ea}"},{name:"Isle of Man",code:"IM",capital:"Douglas",region:"EU",currency:{code:"GBP",name:"British pound",symbol:"\xa3"},language:{code:"en",name:"English"},flag:"\u{1f1ee}\u{1f1f2}"},{name:"Israel",code:"IL",capital:"Jerusalem",region:"AS",currency:{code:"ILS",name:"Israeli new shekel",symbol:"\u20aa"},language:{code:"he",name:"Hebrew (modern)"},flag:"\u{1f1ee}\u{1f1f1}"},{name:"Italy",code:"IT",capital:"Rome",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"it",name:"Italian"},flag:"\u{1f1ee}\u{1f1f9}"},{name:"Jamaica",code:"JM",capital:"Kingston",region:"NA",currency:{code:"JMD",name:"Jamaican dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1ef}\u{1f1f2}"},{name:"Japan",code:"JP",capital:"Tokyo",region:"AS",currency:{code:"JPY",name:"Japanese yen",symbol:"\xa5"},language:{code:"ja",name:"Japanese"},flag:"\u{1f1ef}\u{1f1f5}"},{name:"Jersey",code:"JE",capital:"Saint Helier",region:"EU",currency:{code:"GBP",name:"British pound",symbol:"\xa3"},language:{code:"en",iso639_2:"eng",name:"English",nativeName:"English"},flag:"\u{1f1ef}\u{1f1ea}"},{name:"Jordan",code:"JO",capital:"Amman",region:"AS",currency:{code:"JOD",name:"Jordanian dinar",symbol:"\u062f.\u0627"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1ef}\u{1f1f4}"},{name:"Kazakhstan",code:"KZ",capital:"Astana",region:"AS",currency:{code:"KZT",name:"Kazakhstani tenge",symbol:null},language:{code:"kk",name:"Kazakh"},flag:"\u{1f1f0}\u{1f1ff}"},{name:"Kenya",code:"KE",capital:"Nairobi",region:"AF",currency:{code:"KES",name:"Kenyan shilling",symbol:"Sh"},language:{code:"en",name:"English"},flag:"\u{1f1f0}\u{1f1ea}"},{name:"Kiribati",code:"KI",capital:"South Tarawa",region:"OC",currency:{code:"AUD",name:"Australian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f0}\u{1f1ee}"},{name:"Kuwait",code:"KW",capital:"Kuwait City",region:"AS",currency:{code:"KWD",name:"Kuwaiti dinar",symbol:"\u062f.\u0643"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f0}\u{1f1fc}"},{name:"Kyrgyzstan",code:"KG",capital:"Bishkek",region:"AS",currency:{code:"KGS",name:"Kyrgyzstani som",symbol:"\u0441"},language:{code:"ky",name:"Kyrgyz"},flag:"\u{1f1f0}\u{1f1ec}"},{name:"Lao People's Democratic Republic",code:"LA",capital:"Vientiane",region:"AS",currency:{code:"LAK",name:"Lao kip",symbol:"\u20ad"},language:{code:"lo",name:"Lao"},flag:"\u{1f1f1}\u{1f1e6}"},{name:"Latvia",code:"LV",capital:"Riga",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"lv",name:"Latvian"},flag:"\u{1f1f1}\u{1f1fb}"},{name:"Lebanon",code:"LB",capital:"Beirut",region:"AS",currency:{code:"LBP",name:"Lebanese pound",symbol:"\u0644.\u0644"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f1}\u{1f1e7}"},{name:"Lesotho",code:"LS",capital:"Maseru",region:"AF",currency:{code:"LSL",name:"Lesotho loti",symbol:"L"},language:{code:"en",name:"English"},flag:"\u{1f1f1}\u{1f1f8}"},{name:"Liberia",code:"LR",capital:"Monrovia",region:"AF",currency:{code:"LRD",name:"Liberian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f1}\u{1f1f7}"},{name:"Libya",code:"LY",capital:"Tripoli",region:"AF",currency:{code:"LYD",name:"Libyan dinar",symbol:"\u0644.\u062f"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f1}\u{1f1fe}"},{name:"Liechtenstein",code:"LI",capital:"Vaduz",region:"EU",currency:{code:"CHF",name:"Swiss franc",symbol:"Fr"},language:{code:"de",name:"German"},flag:"\u{1f1f1}\u{1f1ee}"},{name:"Lithuania",code:"LT",capital:"Vilnius",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"lt",name:"Lithuanian"},flag:"\u{1f1f1}\u{1f1f9}"},{name:"Luxembourg",code:"LU",capital:"Luxembourg",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1f1}\u{1f1fa}"},{name:"Macao",code:"MO",capital:"",region:"AS",currency:{code:"MOP",name:"Macanese pataca",symbol:"P"},language:{code:"zh",name:"Chinese"},flag:"\u{1f1f2}\u{1f1f4}"},{name:"Macedonia (the former Yugoslav Republic of)",code:"MK",capital:"Skopje",region:"EU",currency:{code:"MKD",name:"Macedonian denar",symbol:"\u0434\u0435\u043d"},language:{code:"mk",name:"Macedonian"},flag:"\u{1f1f2}\u{1f1f0}"},{name:"Madagascar",code:"MG",capital:"Antananarivo",region:"AF",currency:{code:"MGA",name:"Malagasy ariary",symbol:"Ar"},language:{code:"fr",name:"French"},flag:"\u{1f1f2}\u{1f1ec}"},{name:"Malawi",code:"MW",capital:"Lilongwe",region:"AF",currency:{code:"MWK",name:"Malawian kwacha",symbol:"MK"},language:{code:"en",name:"English"},flag:"\u{1f1f2}\u{1f1fc}"},{name:"Malaysia",code:"MY",capital:"Kuala Lumpur",region:"AS",currency:{code:"MYR",name:"Malaysian ringgit",symbol:"RM"},language:{code:null,name:"Malaysian"},flag:"\u{1f1f2}\u{1f1fe}"},{name:"Maldives",code:"MV",capital:"Mal\xe9",region:"AS",currency:{code:"MVR",name:"Maldivian rufiyaa",symbol:".\u0783"},language:{code:"dv",name:"Divehi"},flag:"\u{1f1f2}\u{1f1fb}"},{name:"Mali",code:"ML",capital:"Bamako",region:"AF",currency:{code:"XOF",name:"West African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1f2}\u{1f1f1}"},{name:"Malta",code:"MT",capital:"Valletta",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"mt",name:"Maltese"},flag:"\u{1f1f2}\u{1f1f9}"},{name:"Marshall Islands",code:"MH",capital:"Majuro",region:"OC",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f2}\u{1f1ed}"},{name:"Martinique",code:"MQ",capital:"Fort-de-France",region:"Americas",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1f2}\u{1f1f6}"},{name:"Mauritania",code:"MR",capital:"Nouakchott",region:"AF",currency:{code:"MRO",name:"Mauritanian ouguiya",symbol:"UM"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f2}\u{1f1f7}"},{name:"Mauritius",code:"MU",capital:"Port Louis",region:"AF",currency:{code:"MUR",name:"Mauritian rupee",symbol:"\u20a8"},language:{code:"en",name:"English"},flag:"\u{1f1f2}\u{1f1fa}"},{name:"Mayotte",code:"YT",capital:"Mamoudzou",region:"AF",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1fe}\u{1f1f9}"},{name:"Mexico",code:"MX",capital:"Mexico City",region:"NA",currency:{code:"MXN",name:"Mexican peso",symbol:"$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1f2}\u{1f1fd}"},{name:"Micronesia (Federated States of)",code:"FM",capital:"Palikir",region:"OC",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1eb}\u{1f1f2}"},{name:"Moldova (Republic of)",code:"MD",capital:"Chi\u0219in\u0103u",region:"EU",currency:{code:"MDL",name:"Moldovan leu",symbol:"L"},language:{code:"ro",name:"Romanian"},flag:"\u{1f1f2}\u{1f1e9}"},{name:"Monaco",code:"MC",capital:"Monaco",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1f2}\u{1f1e8}"},{name:"Mongolia",code:"MN",capital:"Ulan Bator",region:"AS",currency:{code:"MNT",name:"Mongolian t\xf6gr\xf6g",symbol:"\u20ae"},language:{code:"mn",name:"Mongolian"},flag:"\u{1f1f2}\u{1f1f3}"},{name:"Montenegro",code:"ME",capital:"Podgorica",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"sr",name:"Serbian"},flag:"\u{1f1f2}\u{1f1ea}"},{name:"Montserrat",code:"MS",capital:"Plymouth",region:"NA",currency:{code:"XCD",name:"East Caribbean dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f2}\u{1f1f8}"},{name:"Morocco",code:"MA",capital:"Rabat",region:"AF",currency:{code:"MAD",name:"Moroccan dirham",symbol:"\u062f.\u0645."},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f2}\u{1f1e6}"},{name:"Mozambique",code:"MZ",capital:"Maputo",region:"AF",currency:{code:"MZN",name:"Mozambican metical",symbol:"MT"},language:{code:"pt",name:"Portuguese"},flag:"\u{1f1f2}\u{1f1ff}"},{name:"Myanmar",code:"MM",capital:"Naypyidaw",region:"AS",currency:{code:"MMK",name:"Burmese kyat",symbol:"Ks"},language:{code:"my",name:"Burmese"},flag:"\u{1f1f2}\u{1f1f2}"},{name:"Namibia",code:"NA",capital:"Windhoek",region:"AF",currency:{code:"NAD",name:"Namibian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f3}\u{1f1e6}"},{name:"Nauru",code:"NR",capital:"Yaren",region:"OC",currency:{code:"AUD",name:"Australian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f3}\u{1f1f7}"},{name:"Nepal",code:"NP",capital:"Kathmandu",region:"AS",currency:{code:"NPR",name:"Nepalese rupee",symbol:"\u20a8"},language:{code:"ne",name:"Nepali"},flag:"\u{1f1f3}\u{1f1f5}"},{name:"Netherlands",code:"NL",capital:"Amsterdam",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"nl",name:"Dutch"},flag:"\u{1f1f3}\u{1f1f1}"},{name:"New Caledonia",code:"NC",capital:"Noum\xe9a",region:"OC",currency:{code:"XPF",name:"CFP franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1f3}\u{1f1e8}"},{name:"New Zealand",code:"NZ",capital:"Wellington",region:"OC",currency:{code:"NZD",name:"New Zealand dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f3}\u{1f1ff}"},{name:"Nicaragua",code:"NI",capital:"Managua",region:"NA",currency:{code:"NIO",name:"Nicaraguan c\xf3rdoba",symbol:"C$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1f3}\u{1f1ee}"},{name:"Niger",code:"NE",capital:"Niamey",region:"AF",currency:{code:"XOF",name:"West African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1f3}\u{1f1ea}"},{name:"Nigeria",code:"NG",capital:"Abuja",region:"AF",currency:{code:"NGN",name:"Nigerian naira",symbol:"\u20a6"},language:{code:"en",name:"English"},flag:"\u{1f1f3}\u{1f1ec}"},{name:"Niue",code:"NU",capital:"Alofi",region:"OC",currency:{code:"NZD",name:"New Zealand dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f3}\u{1f1fa}"},{name:"Norfolk Island",code:"NF",capital:"Kingston",region:"OC",currency:{code:"AUD",name:"Australian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f3}\u{1f1eb}"},{name:"Korea (Democratic People's Republic of)",code:"KP",capital:"Pyongyang",region:"AS",currency:{code:"KPW",name:"North Korean won",symbol:"\u20a9"},language:{code:"ko",name:"Korean"},flag:"\u{1f1f0}\u{1f1f5}"},{name:"Northern Mariana Islands",code:"MP",capital:"Saipan",region:"OC",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f2}\u{1f1f5}"},{name:"Norway",code:"NO",capital:"Oslo",region:"EU",currency:{code:"NOK",name:"Norwegian krone",symbol:"kr"},language:{code:"no",name:"Norwegian"},flag:"\u{1f1f3}\u{1f1f4}"},{name:"Oman",code:"OM",capital:"Muscat",region:"AS",currency:{code:"OMR",name:"Omani rial",symbol:"\u0631.\u0639."},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f4}\u{1f1f2}"},{name:"Pakistan",code:"PK",capital:"Islamabad",region:"AS",currency:{code:"PKR",name:"Pakistani rupee",symbol:"\u20a8"},language:{code:"en",name:"English"},flag:"\u{1f1f5}\u{1f1f0}"},{name:"Palau",code:"PW",capital:"Ngerulmud",region:"OC",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f5}\u{1f1fc}"},{name:"Palestine, State of",code:"PS",capital:"Ramallah",region:"AS",currency:{code:"ILS",name:"Israeli new sheqel",symbol:"\u20aa"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f5}\u{1f1f8}"},{name:"Panama",code:"PA",capital:"Panama City",region:"NA",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1f5}\u{1f1e6}"},{name:"Papua New Guinea",code:"PG",capital:"Port Moresby",region:"OC",currency:{code:"PGK",name:"Papua New Guinean kina",symbol:"K"},language:{code:"en",name:"English"},flag:"\u{1f1f5}\u{1f1ec}"},{name:"Paraguay",code:"PY",capital:"Asunci\xf3n",region:"SA",currency:{code:"PYG",name:"Paraguayan guaran\xed",symbol:"\u20b2"},language:{code:"es",name:"Spanish"},flag:"\u{1f1f5}\u{1f1fe}"},{name:"Peru",code:"PE",capital:"Lima",region:"SA",currency:{code:"PEN",name:"Peruvian sol",symbol:"S/."},language:{code:"es",name:"Spanish"},flag:"\u{1f1f5}\u{1f1ea}"},{name:"Philippines",code:"PH",capital:"Manila",region:"AS",currency:{code:"PHP",name:"Philippine peso",symbol:"\u20b1"},language:{code:"en",name:"English"},flag:"\u{1f1f5}\u{1f1ed}"},{name:"Pitcairn",code:"PN",capital:"Adamstown",region:"OC",currency:{code:"NZD",name:"New Zealand dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f5}\u{1f1f3}"},{name:"Poland",code:"PL",capital:"Warsaw",region:"EU",currency:{code:"PLN",name:"Polish z\u0142oty",symbol:"z\u0142"},language:{code:"pl",name:"Polish"},flag:"\u{1f1f5}\u{1f1f1}"},{name:"Portugal",code:"PT",capital:"Lisbon",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"pt",name:"Portuguese"},flag:"\u{1f1f5}\u{1f1f9}"},{name:"Puerto Rico",code:"PR",capital:"San Juan",region:"NA",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1f5}\u{1f1f7}"},{name:"Qatar",code:"QA",capital:"Doha",region:"AS",currency:{code:"QAR",name:"Qatari riyal",symbol:"\u0631.\u0642"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f6}\u{1f1e6}"},{name:"Republic of Kosovo",code:"XK",capital:"Pristina",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"sq",name:"Albanian"},flag:"\u{1f1fd}\u{1f1f0}"},{name:"R\xe9union",code:"RE",capital:"Saint-Denis",region:"AF",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1f7}\u{1f1ea}"},{name:"Romania",code:"RO",capital:"Bucharest",region:"EU",currency:{code:"RON",name:"Romanian leu",symbol:"lei"},language:{code:"ro",name:"Romanian"},flag:"\u{1f1f7}\u{1f1f4}"},{name:"Russian Federation",code:"RU",capital:"Moscow",region:"EU",currency:{code:"RUB",name:"Russian ruble",symbol:"\u20bd"},language:{code:"ru",name:"Russian"},flag:"\u{1f1f7}\u{1f1fa}"},{name:"Rwanda",code:"RW",capital:"Kigali",region:"AF",currency:{code:"RWF",name:"Rwandan franc",symbol:"Fr"},language:{code:"rw",name:"Kinyarwanda"},flag:"\u{1f1f7}\u{1f1fc}"},{name:"Saint Barth\xe9lemy",code:"BL",capital:"Gustavia",region:"NA",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1e7}\u{1f1f1}"},{name:"Saint Helena, Ascension and Tristan da Cunha",code:"SH",capital:"Jamestown",region:"AF",currency:{code:"SHP",name:"Saint Helena pound",symbol:"\xa3"},language:{code:"en",name:"English"},flag:"\u{1f1f8}\u{1f1ed}"},{name:"Saint Kitts and Nevis",code:"KN",capital:"Basseterre",region:"NA",currency:{code:"XCD",name:"East Caribbean dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f0}\u{1f1f3}"},{name:"Saint Lucia",code:"LC",capital:"Castries",region:"NA",currency:{code:"XCD",name:"East Caribbean dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f1}\u{1f1e8}"},{name:"Saint Martin (French part)",code:"MF",capital:"Marigot",region:"NA",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"en",name:"English"},flag:"\u{1f1f2}\u{1f1eb}"},{name:"Saint Pierre and Miquelon",code:"PM",capital:"Saint-Pierre",region:"NA",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"fr",name:"French"},flag:"\u{1f1f5}\u{1f1f2}"},{name:"Saint Vincent and the Grenadines",code:"VC",capital:"Kingstown",region:"NA",currency:{code:"XCD",name:"East Caribbean dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1fb}\u{1f1e8}"},{name:"Samoa",code:"WS",capital:"Apia",region:"OC",currency:{code:"WST",name:"Samoan t\u0101l\u0101",symbol:"T"},language:{code:"sm",name:"Samoan"},flag:"\u{1f1fc}\u{1f1f8}"},{name:"San Marino",code:"SM",capital:"City of San Marino",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"it",name:"Italian"},flag:"\u{1f1f8}\u{1f1f2}"},{name:"Sao Tome and Principe",code:"ST",capital:"S\xe3o Tom\xe9",region:"AF",currency:{code:"STD",name:"S\xe3o Tom\xe9 and Pr\xedncipe dobra",symbol:"Db"},language:{code:"pt",name:"Portuguese"},flag:"\u{1f1f8}\u{1f1f9}"},{name:"Saudi Arabia",code:"SA",capital:"Riyadh",region:"AS",currency:{code:"SAR",name:"Saudi riyal",symbol:"\u0631.\u0633"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f8}\u{1f1e6}"},{name:"Senegal",code:"SN",capital:"Dakar",region:"AF",currency:{code:"XOF",name:"West African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1f8}\u{1f1f3}"},{name:"Serbia",code:"RS",capital:"Belgrade",region:"EU",currency:{code:"RSD",name:"Serbian dinar",symbol:"\u0434\u0438\u043d."},language:{code:"sr",name:"Serbian"},flag:"\u{1f1f7}\u{1f1f8}"},{name:"Seychelles",code:"SC",capital:"Victoria",region:"AF",currency:{code:"SCR",name:"Seychellois rupee",symbol:"\u20a8"},language:{code:"fr",name:"French"},flag:"\u{1f1f8}\u{1f1e8}"},{name:"Sierra Leone",code:"SL",capital:"Freetown",region:"AF",currency:{code:"SLL",name:"Sierra Leonean leone",symbol:"Le"},language:{code:"en",name:"English"},flag:"\u{1f1f8}\u{1f1f1}"},{name:"Singapore",code:"SG",capital:"Singapore",region:"AS",currency:{code:"SGD",name:"Singapore dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f8}\u{1f1ec}"},{name:"Sint Maarten (Dutch part)",code:"SX",capital:"Philipsburg",region:"Americas",currency:{code:"ANG",name:"Netherlands Antillean guilder",symbol:"\u0192"},language:{code:"nl",name:"Dutch"},flag:"\u{1f1f8}\u{1f1fd}"},{name:"Slovakia",code:"SK",capital:"Bratislava",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"sk",name:"Slovak"},flag:"\u{1f1f8}\u{1f1f0}"},{name:"Slovenia",code:"SI",capital:"Ljubljana",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"sl",name:"Slovene"},flag:"\u{1f1f8}\u{1f1ee}"},{name:"Solomon Islands",code:"SB",capital:"Honiara",region:"OC",currency:{code:"SBD",name:"Solomon Islands dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f8}\u{1f1e7}"},{name:"Somalia",code:"SO",capital:"Mogadishu",region:"AF",currency:{code:"SOS",name:"Somali shilling",symbol:"Sh"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f8}\u{1f1f4}"},{name:"South Africa",code:"ZA",capital:"Pretoria",region:"AF",currency:{code:"ZAR",name:"South African rand",symbol:"R"},language:{code:"en",iso639_2:"eng",name:"English",nativeName:"English"},flag:"\u{1f1ff}\u{1f1e6}"},{name:"South Georgia and the South Sandwich Islands",code:"GS",capital:"King Edward Point",region:"NA",currency:{code:"GBP",name:"British pound",symbol:"\xa3"},language:{code:"en",name:"English"},flag:"\u{1f1ec}\u{1f1f8}"},{name:"Korea (Republic of)",code:"KR",capital:"Seoul",region:"AS",currency:{code:"KRW",name:"South Korean won",symbol:"\u20a9"},language:{code:"ko",name:"Korean"},flag:"\u{1f1f0}\u{1f1f7}"},{name:"South Sudan",code:"SS",capital:"Juba",region:"AF",currency:{code:"SSP",name:"South Sudanese pound",symbol:"\xa3"},language:{code:"en",name:"English"},flag:"\u{1f1f8}\u{1f1f8}"},{name:"Spain",code:"ES",capital:"Madrid",region:"EU",currency:{code:"EUR",name:"Euro",symbol:"\u20ac"},language:{code:"es",name:"Spanish"},flag:"\u{1f1ea}\u{1f1f8}"},{name:"Sri Lanka",code:"LK",capital:"Colombo",region:"AS",currency:{code:"LKR",name:"Sri Lankan rupee",symbol:"Rs"},language:{code:"si",iso639_2:"sin",name:"Sinhalese",nativeName:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd"},flag:"\u{1f1f1}\u{1f1f0}"},{name:"Sudan",code:"SD",capital:"Khartoum",region:"AF",currency:{code:"SDG",name:"Sudanese pound",symbol:"\u062c.\u0633."},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f8}\u{1f1e9}"},{name:"Suriname",code:"SR",capital:"Paramaribo",region:"SA",currency:{code:"SRD",name:"Surinamese dollar",symbol:"$"},language:{code:"nl",name:"Dutch"},flag:"\u{1f1f8}\u{1f1f7}"},{name:"Svalbard and Jan Mayen",code:"SJ",capital:"Longyearbyen",region:"EU",currency:{code:"NOK",name:"Norwegian krone",symbol:"kr"},language:{code:"no",name:"Norwegian"},flag:"\u{1f1f8}\u{1f1ef}"},{name:"Swaziland",code:"SZ",capital:"Lobamba",region:"AF",currency:{code:"SZL",name:"Swazi lilangeni",symbol:"L"},language:{code:"en",name:"English"},flag:"\u{1f1f8}\u{1f1ff}"},{name:"Sweden",code:"SE",capital:"Stockholm",region:"EU",currency:{code:"SEK",name:"Swedish krona",symbol:"kr"},language:{code:"sv",name:"Swedish"},flag:"\u{1f1f8}\u{1f1ea}"},{name:"Switzerland",code:"CH",capital:"Bern",region:"EU",currency:{code:"CHF",name:"Swiss franc",symbol:"Fr"},language:{code:"de",name:"German"},flag:"\u{1f1e8}\u{1f1ed}"},{name:"Syrian Arab Republic",code:"SY",capital:"Damascus",region:"AS",currency:{code:"SYP",name:"Syrian pound",symbol:"\xa3"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f8}\u{1f1fe}"},{name:"Taiwan",code:"TW",capital:"Taipei",region:"AS",currency:{code:"TWD",name:"New Taiwan dollar",symbol:"$"},language:{code:"zh",name:"Chinese"},flag:"\u{1f1f9}\u{1f1fc}"},{name:"Tajikistan",code:"TJ",capital:"Dushanbe",region:"AS",currency:{code:"TJS",name:"Tajikistani somoni",symbol:"\u0405\u041c"},language:{code:"tg",name:"Tajik"},flag:"\u{1f1f9}\u{1f1ef}"},{name:"Tanzania, United Republic of",code:"TZ",capital:"Dodoma",region:"AF",currency:{code:"TZS",name:"Tanzanian shilling",symbol:"Sh"},language:{code:"en",name:"English"},flag:"\u{1f1f9}\u{1f1ff}"},{name:"Thailand",code:"TH",capital:"Bangkok",region:"AS",currency:{code:"THB",name:"Thai baht",symbol:"\u0e3f"},language:{code:"th",name:"Thai"},flag:"\u{1f1f9}\u{1f1ed}"},{name:"Timor-Leste",code:"TL",capital:"Dili",region:"AS",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"pt",name:"Portuguese"},flag:"\u{1f1f9}\u{1f1f1}"},{name:"Togo",code:"TG",capital:"Lom\xe9",region:"AF",currency:{code:"XOF",name:"West African CFA franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1f9}\u{1f1ec}"},{name:"Tokelau",code:"TK",capital:"Fakaofo",region:"OC",currency:{code:"NZD",name:"New Zealand dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f9}\u{1f1f0}"},{name:"Tonga",code:"TO",capital:"Nuku'alofa",region:"OC",currency:{code:"TOP",name:"Tongan pa\u02bbanga",symbol:"T$"},language:{code:"en",name:"English"},flag:"\u{1f1f9}\u{1f1f4}"},{name:"Trinidad and Tobago",code:"TT",capital:"Port of Spain",region:"SA",currency:{code:"TTD",name:"Trinidad and Tobago dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f9}\u{1f1f9}"},{name:"Tunisia",code:"TN",capital:"Tunis",region:"AF",currency:{code:"TND",name:"Tunisian dinar",symbol:"\u062f.\u062a"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1f9}\u{1f1f3}"},{name:"Turkey",code:"TR",capital:"Ankara",region:"AS",currency:{code:"TRY",name:"Turkish lira",symbol:null},language:{code:"tr",name:"Turkish"},flag:"\u{1f1f9}\u{1f1f7}"},{name:"Turkmenistan",code:"TM",capital:"Ashgabat",region:"AS",currency:{code:"TMT",name:"Turkmenistan manat",symbol:"m"},language:{code:"tk",name:"Turkmen"},flag:"\u{1f1f9}\u{1f1f2}"},{name:"Turks and Caicos Islands",code:"TC",capital:"Cockburn Town",region:"NA",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f9}\u{1f1e8}"},{name:"Tuvalu",code:"TV",capital:"Funafuti",region:"OC",currency:{code:"AUD",name:"Australian dollar",symbol:"$"},language:{code:"en",name:"English"},flag:"\u{1f1f9}\u{1f1fb}"},{name:"Uganda",code:"UG",capital:"Kampala",region:"AF",currency:{code:"UGX",name:"Ugandan shilling",symbol:"Sh"},language:{code:"en",name:"English"},flag:"\u{1f1fa}\u{1f1ec}"},{name:"Ukraine",code:"UA",capital:"Kiev",region:"EU",currency:{code:"UAH",name:"Ukrainian hryvnia",symbol:"\u20b4"},language:{code:"uk",name:"Ukrainian"},flag:"\u{1f1fa}\u{1f1e6}"},{name:"United Arab Emirates",code:"AE",capital:"Abu Dhabi",region:"AS",currency:{code:"AED",name:"United Arab Emirates dirham",symbol:"\u062f.\u0625"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1e6}\u{1f1ea}"},{name:"United Kingdom of Great Britain and Northern Ireland",code:"GB",capital:"London",region:"EU",currency:{code:"GBP",name:"British pound",symbol:"\xa3"},language:{code:"en",name:"English"},flag:"\u{1f1ec}\u{1f1e7}"},{name:"United States of America",code:"US",capital:"Washington, D.C.",region:"NA",currency:{code:"USD",name:"United States dollar",symbol:"$"},language:{code:"en",iso639_2:"eng",name:"English",nativeName:"English"},flag:"\u{1f1fa}\u{1f1f8}"},{name:"Uruguay",code:"UY",capital:"Montevideo",region:"SA",currency:{code:"UYU",name:"Uruguayan peso",symbol:"$"},language:{code:"es",name:"Spanish"},flag:"\u{1f1fa}\u{1f1fe}"},{name:"Uzbekistan",code:"UZ",capital:"Tashkent",region:"AS",currency:{code:"UZS",name:"Uzbekistani so'm",symbol:null},language:{code:"uz",name:"Uzbek"},flag:"\u{1f1fa}\u{1f1ff}"},{name:"Vanuatu",code:"VU",capital:"Port Vila",region:"OC",currency:{code:"VUV",name:"Vanuatu vatu",symbol:"Vt"},language:{code:"en",name:"English"},flag:"\u{1f1fb}\u{1f1fa}"},{name:"Venezuela (Bolivarian Republic of)",code:"VE",capital:"Caracas",region:"SA",currency:{code:"VEF",name:"Venezuelan bol\xedvar",symbol:"Bs F"},language:{code:"es",name:"Spanish"},flag:"\u{1f1fb}\u{1f1ea}"},{name:"Viet Nam",code:"VN",capital:"Hanoi",region:"AS",currency:{code:"VND",name:"Vietnamese \u0111\u1ed3ng",symbol:"\u20ab"},language:{code:"vi",name:"Vietnamese"},flag:"\u{1f1fb}\u{1f1f3}"},{name:"Wallis and Futuna",code:"WF",capital:"Mata-Utu",region:"OC",currency:{code:"XPF",name:"CFP franc",symbol:"Fr"},language:{code:"fr",name:"French"},flag:"\u{1f1fc}\u{1f1eb}"},{name:"Western Sahara",code:"EH",capital:"El Aai\xfan",region:"AF",currency:{code:"MAD",name:"Moroccan dirham",symbol:"\u062f.\u0645."},language:{code:"es",name:"Spanish"},flag:"\u{1f1ea}\u{1f1ed}"},{name:"Yemen",code:"YE",capital:"Sana'a",region:"AS",currency:{code:"YER",name:"Yemeni rial",symbol:"\ufdfc"},language:{code:"ar",name:"Arabic"},flag:"\u{1f1fe}\u{1f1ea}"},{name:"Zambia",code:"ZM",capital:"Lusaka",region:"AF",currency:{code:"ZMW",name:"Zambian kwacha",symbol:"ZK"},language:{code:"en",name:"English"},flag:"\u{1f1ff}\u{1f1f2}"},{name:"Zimbabwe",code:"ZW",capital:"Harare",region:"AF",currency:{code:"BWP",name:"Botswana pula",symbol:"P"},language:{code:"en",iso639_2:"eng",name:"English",nativeName:"English"},flag:"\u{1f1ff}\u{1f1fc}"}].map(t=>t.currency.code),this.loadFormState()}ngOnDestroy(){this.saveFormState()}loadFormState(){const t=this.formStateService.getState();t&&(this.requestForm.patchValue(t),this.setFormArrayControls(this.linksArray,t.documents.links),this.setFormArrayControls(this.files,t.documents.files))}saveFormState(){this.formStateService.saveState(this.requestForm.value)}setFormArrayControls(t,n){t.clear(),n.forEach(o=>t.push(this.formBuilder.control(o)))}get linksArray(){return this.requestForm.get("documents.links")}addLink(){this.linksArray.push(this.formBuilder.control(""))}removeLink(t){this.linksArray.removeAt(t)}get files(){return this.requestForm.get("documents.files")}addDocument(t){const n=t.target.files;for(let o=0;o<n.length;o++){const r=n.item(o);this.uploadFile(r,r.name)}t.target.value=null}uploadFile(t,n){const o=new FormData;o.append("file",t),this.isDocumentUploading=!0,this._itemService.uploadFile(o).subscribe({next:r=>{this.isDocumentUploading=!1;const l=r?.data;this.fileUrl=l,this.files.push(this.formBuilder.control({link:l,name:n})),this._snackbarService.openSnackBar("File uploaded successfully","success")},error:r=>{this.isDocumentUploading=!1,this._snackbarService.openSnackBar(r?.error,"error")}})}removeDocument(t){this.files.removeAt(t)}toggleAgentSection(){const t=this.requestForm.get("eventType");this.showAgentSection="public"!==t.value,this.showAgentSection||(this.agentsId=[],this.agentsList=[])}getCurrentUser(){var t=this;return(0,m.Z)(function*(){const n=yield t._profileServicev2.fetchUserDetails(t.entityId);t.userDetails=n,t.requestForm.patchValue({owner:n?.email})})()}addAgents(){const t=this._ngbModal.open(dt,{size:"xl"});t.componentInstance.selectedAgent=this.agentsList,t.componentInstance.selectedAgents.subscribe(n=>{this.agentsList=n,this.agentsId=this.agentsList.map(o=>o.the_user?.id)})}createRequest(){const t={...this.requestForm.value};this.agentsId.length>0&&(t.agentsId=this.agentsId),"public"===this.requestForm.value.eventType&&(t.agentsId=this.allAgentsId),"buyerAgent"===this.agentType&&(t.agentsId=this.agentsId,t.status="Requested"),this.requestForm.invalid?this._snackbarService.openSnackBar("Please fill all the required fields","error"):(this.isSubmitting=!0,this._nodeService.createRequestQuote(t,this.agentType).subscribe({next:()=>{this.isSubmitting=!1,this._snackbarService.openSnackBar("Request created successfully","success"),this._router.navigate(["/marketing/all-requests"]),this.formStateService.clearState(),this.clearFormArrays(),this.requestForm.reset()},error:()=>{this.isSubmitting=!1}}))}clearFormArrays(){this.linksArray.clear(),this.files.clear()}getAgentsList(){var t=this;return(0,m.Z)(function*(){let n;n="buyer"==t.agentType?"buyerAgent_agent":"buyerAgent"==t.agentType?"sellerAgent_agent":"buyerAgent_agent";const o=[{type:n,listLinkers:["isAgent_by"],inpage:100,page:1,logic:"or",filterSearches:[]}];try{const r=yield t._itemService.listAllWithoutAuthWithLinker(o).toPromise(),d=r?.[0]?.[`${n}`]?.[`${n}_s_isAgent_by`];t.allAgentsId=d.map(g=>g.the_user?.id)}catch(r){throw console.error(r),r}})()}onSearchInputChange(t){this.searchQuery=t.target.value}searchByEmail(t){const o=t.target.value;o.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)?this._itemService.searchAPICleanWithId({compositionName:"the_user",searchKey:o,type:"primary_email"}).subscribe({next:d=>{0===d.length?(this.invalidMessage="The user does not have an account",this.validMessage=""):(this.agentsId=[d[0].id],this.validMessage="Buyer available for the quote",this.invalidMessage="")}}):(this.invalidMessage="Please enter a valid email",this.validMessage="")}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(u.qu),e.Y36(Z.e),e.Y36(N.e),e.Y36(G.o),e.Y36(M.FF),e.Y36(O.s),e.Y36(L),e.Y36(h.F0),e.Y36(wn),e.Y36(ke.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-create-request"]],decls:75,vars:11,consts:[[1,"container"],[1,"d-flex","align-items-center","gap-2"],["routerLink","/marketing/all-requests",1,"material-symbols-outlined","cursor-pointer"],[1,"mb-0"],[1,"card","mt-2"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mt-4"],[1,"col-md-12","mb-2"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Title","formControlName","title",1,"form-control","shadow-none","p-2"],["for","description",1,"form-label"],["placeholder","Description","type","text","id","description","formControlName","description",1,"form-control","shadow-none","p-2"],[1,"mt-3"],[1,"d-flex","col-md-12","gap-5"],[1,"col-md-6"],["type","button",1,"link_btn",3,"click"],[1,"material-symbols-outlined"],[1,"document-list"],[4,"ngFor","ngForOf"],["type","file","accept",".pdf,.txt,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif",2,"display","none",3,"change"],["fileInput",""],[1,"document-list","files"],["class","uploading-loader",4,"ngIf"],[1,"row"],[1,"col-md-4","mb-2"],["for","startDate",1,"form-label"],["type","date","id","startDate","formControlName","startDate",1,"form-control","shadow-none","p-2"],["for","endDate",1,"form-label"],["type","date","id","endDate","formControlName","endDate",1,"form-control","shadow-none","p-2"],["for","owner",1,"form-label"],["type","text","id","owner","formControlName","owner","placeholder","johndoe@gmail.com",1,"form-control","shadow-none","p-2"],["for","eventType",1,"form-label"],["id","eventType","formControlName","currency",1,"form-select","shadow-none","p-2"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","budget",1,"form-label"],["type","number","placeholder","Budget","id","budget","formControlName","budget",1,"form-control","shadow-none","p-2"],["class","col-md-4 mb-2",4,"ngIf"],[4,"ngIf"],["class","mt-3 mb-5",4,"ngIf"],["type","submit","class","btn btn-primary btn-sm create-button",4,"ngIf"],["type","text","placeholder","https://",1,"form-control","shadow-none","p-2",3,"formControl"],["type","button","tabindex","0",1,"material-symbols-outlined","remove",3,"click","keyup.enter"],["target","_blank",1,"document-link",3,"href"],[1,"uploading-loader"],[3,"value"],["id","eventType","formControlName","eventType",1,"form-select","shadow-none","p-2",3,"change"],["value","public"],["value","private"],["for","buyer",1,"form-label"],["type","email","placeholder","Email address..",1,"form-control","shadow-none","p-2",3,"input"],[1,"err_msg"],[1,"success_msg"],[1,"mt-3","mb-5"],[1,"table"],["type","button",1,"add_agents",3,"click"],["class","img","alt","",3,"src",4,"ngIf","ngIfElse"],["defaultImage",""],["alt","",1,"img",3,"src"],["src","/assets/man.png","alt","",1,"img"],["type","submit",1,"btn","btn-primary","btn-sm","create-button"],[1,"btn","btn-primary","btn-sm","create-button","btn-disabled",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"]],template:function(n,o){if(1&n){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3,"arrow_back"),e.qZA(),e.TgZ(4,"h2",3),e._uU(5,"Create Request"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"form",6),e.NdJ("ngSubmit",function(){return o.createRequest()}),e.TgZ(9,"div",7)(10,"h3"),e._uU(11,"General Information"),e.qZA(),e.TgZ(12,"div",8)(13,"label",9),e._uU(14,"Title"),e.qZA(),e._UZ(15,"input",10),e.qZA(),e.TgZ(16,"div",8)(17,"label",11),e._uU(18,"Description"),e.qZA(),e._UZ(19,"textarea",12),e.qZA()(),e.TgZ(20,"div",13)(21,"h3"),e._uU(22,"Documents"),e.qZA(),e.TgZ(23,"div",14)(24,"div",15)(25,"button",16),e.NdJ("click",function(){return o.addLink()}),e.TgZ(26,"span",17),e._uU(27," link "),e.qZA(),e._uU(28," Add Links "),e.qZA(),e.TgZ(29,"ul",18),e.YNc(30,An,6,1,"li",19),e.qZA()(),e.TgZ(31,"div",15)(32,"button",16),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(37);return e.KtG(c.click())}),e.TgZ(33,"span",17),e._uU(34," upload_file "),e.qZA(),e._uU(35," Add Document "),e.qZA(),e.TgZ(36,"input",20,21),e.NdJ("change",function(c){return o.addDocument(c)}),e.qZA(),e.TgZ(38,"ul",22),e.YNc(39,Mn,7,2,"li",19),e.qZA(),e.YNc(40,kn,4,0,"div",23),e.qZA()()(),e.TgZ(41,"div",13)(42,"h3"),e._uU(43,"Settings"),e.qZA(),e.TgZ(44,"div",24)(45,"div",25)(46,"label",26),e._uU(47,"Start Date"),e.qZA(),e._UZ(48,"input",27),e.qZA(),e.TgZ(49,"div",25)(50,"label",28),e._uU(51,"End Date"),e.qZA(),e._UZ(52,"input",29),e.qZA(),e.TgZ(53,"div",25)(54,"label",30),e._uU(55,"Owner"),e.qZA(),e._UZ(56,"input",31),e.qZA(),e.TgZ(57,"div",25)(58,"label",32),e._uU(59,"Currency"),e.qZA(),e.TgZ(60,"select",33)(61,"option",34),e._uU(62,"Select"),e.qZA(),e.YNc(63,Pn,2,2,"option",35),e.qZA()(),e.TgZ(64,"div",25)(65,"label",36),e._uU(66,"Budget"),e.qZA(),e._UZ(67,"input",37),e.qZA(),e.YNc(68,Zn,8,0,"div",38),e.YNc(69,In,9,2,"ng-container",39),e.qZA()(),e.YNc(70,En,18,2,"div",40),e.TgZ(71,"div"),e.YNc(72,Dn,2,0,"button",41),e.YNc(73,Nn,6,1,"ng-container",39),e.qZA()()()()(),e.YNc(74,Un,1,0,"ng-container",39)}2&n&&(e.xp6(8),e.Q6J("formGroup",o.requestForm),e.xp6(22),e.Q6J("ngForOf",o.linksArray.controls),e.xp6(9),e.Q6J("ngForOf",o.files.controls),e.xp6(1),e.Q6J("ngIf",o.isDocumentUploading),e.xp6(23),e.Q6J("ngForOf",o.currencies),e.xp6(5),e.Q6J("ngIf","buyer"===o.agentType),e.xp6(1),e.Q6J("ngIf","buyerAgent"===o.agentType),e.xp6(1),e.Q6J("ngIf",o.showAgentSection),e.xp6(2),e.Q6J("ngIf",!o.isSubmitting),e.xp6(1),e.Q6J("ngIf",o.isSubmitting),e.xp6(1),e.Q6J("ngIf","buyerAgent"===o.agentType))},dependencies:[p.sg,p.O5,h.rH,u._Y,u.YN,u.Kr,u.Fj,u.wV,u.EJ,u.JJ,u.JL,u.oH,u.sg,u.u],styles:["h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.link_btn[_ngcontent-%COMP%]{border:none;background:none;color:#f2709c;display:flex;align-items:center;gap:10px}.link_btn[_ngcontent-%COMP%]:hover{color:#ff9472}.document-list[_ngcontent-%COMP%]{list-style:none;padding:0}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;display:flex;color:#007bff;gap:10px;align-items:center}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{color:red}.document-link[_ngcontent-%COMP%]{text-decoration:none;color:#007bff}.document-link[_ngcontent-%COMP%]:hover{text-decoration:underline}input[type=file][_ngcontent-%COMP%]{display:none}.document-list.files[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #ced4da;padding:5px;border-radius:5px}.create-button[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:6px 16px;float:right}.add_agents[_ngcontent-%COMP%]{border:1px solid #007bff;border-radius:5px;padding:5px;background:none;color:#f2709c;display:flex;align-items:center;gap:10px;color:#007bff}.add_agents[_ngcontent-%COMP%]:hover{color:#ff9472;border:1px solid rgb(255,148,114)}.img[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid #888;border-radius:50%;margin-right:10px}.success_msg[_ngcontent-%COMP%]{color:green}.uploading-loader[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:flex;align-items:center;justify-content:center;padding:10px;margin-top:10px;background-color:#0000000d;border:1px solid rgba(0,0,0,.1);border-radius:4px;color:#333;font-weight:700;font-size:16px;position:relative}.loading-icon[_ngcontent-%COMP%]{margin-right:10px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),a})();function Ln(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"ul",24)(1,"li")(2,"span",19),e._uU(3," topic "),e.qZA(),e.TgZ(4,"a",25),e._uU(5),e.qZA(),e.TgZ(6,"span",26),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.removeDocument())})("keyup.enter",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.removeDocument())}),e._uU(7," remove "),e.qZA()()()}if(2&a){const i=e.oxw(2);e.xp6(4),e.s9C("href",i.files.controls[0].value.link,e.LSH),e.xp6(1),e.Oqu(i.files.controls[0].value.name)}}function Bn(a,s){1&a&&(e.TgZ(0,"div",27),e._UZ(1,"span",28),e.qZA())}function Yn(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",16)(2,"div")(3,"label",17),e._uU(4,"Upload Document"),e.qZA(),e.TgZ(5,"button",18),e.NdJ("click",function(){e.CHM(i);const n=e.MAs(10);return e.KtG(n.click())}),e.TgZ(6,"span",19),e._uU(7," upload_file "),e.qZA(),e._uU(8," Add Document "),e.qZA(),e.TgZ(9,"input",20,21),e.NdJ("change",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.addDocument(n))}),e.qZA()(),e.YNc(11,Ln,8,2,"ul",22),e.YNc(12,Bn,2,0,"div",23),e.qZA(),e.BQk()}if(2&a){const i=e.oxw();e.xp6(11),e.Q6J("ngIf",i.files.controls.length>0),e.xp6(1),e.Q6J("ngIf",i.isDocumentUploading)}}function Jn(a,s){1&a&&(e.TgZ(0,"button",29),e._uU(1," Submit "),e.qZA())}function Qn(a,s){1&a&&(e.TgZ(0,"button",30)(1,"div",31)(2,"span",32),e._uU(3,"."),e.qZA()(),e._uU(4," Submitting... "),e.qZA()),2&a&&e.Q6J("disabled",!0)}let Pt=(()=>{const s=class{constructor(t,n,o,r,l){this.fb=t,this._nodeService=n,this._modal=o,this._snackbarService=r,this._itemService=l,this.isDocumentUploading=!1,this.res=new e.vpe,this.files=this.fb.array([]),this.updateForm=this.fb.group({status:["",u.kI.required],remarks:["",u.kI.required]})}onSubmit(){if(this.updateForm.valid){const t={...this.user,...this.updateForm.value,quoteId:this.quoteId,agentsId:[this.user?.profile?.agentId],requestType:"Approval"};"seller"===this.agentType&&(t.responseDocument=this.responseDocument),"Requested"===this.user.status?(this.isSubmitting=!0,this._nodeService.createRequestQuote(t,this.agentType).subscribe({next:()=>{this.isSubmitting=!1,this.res.emit(),this._modal.close(),"seller"===this.agentType&&this.updateQuoteStatus(this.user?.id,this.updateForm?.get("status")?.value),this._snackbarService.openSnackBar("Response updated successfully","success")},error:n=>{this.isSubmitting=!1,this._snackbarService.openSnackBar(n.error,"error")}})):(this.isSubmitting=!0,this._nodeService.createResponseQuote(t,this.agentType).subscribe({next:()=>{this.isSubmitting=!1,this.res.emit(),this._modal.close(),"seller"===this.agentType&&this.updateQuoteStatus(this.user?.id,this.updateForm?.get("status")?.value),this._snackbarService.openSnackBar("Response updated successfully","success")},error:n=>{this.isSubmitting=!1,this._snackbarService.openSnackBar(n.error,"error")}}))}}updateQuoteStatus(t,n){this._nodeService.updateQuoteStatus({quoteId:t,status:n}).subscribe({next:r=>{console.log(r)}})}addDocument(t){const n=t.target.files;if(n.length>0){const o=n.item(0);this.uploadFile(o,o.name)}t.target.value=null}uploadFile(t,n){const o=new FormData;o.append("file",t),this.isDocumentUploading=!0,this._itemService.uploadFile(o).subscribe({next:r=>{this.isDocumentUploading=!1;const l=r?.data;this.fileUrl=l,this.responseDocument={link:l,name:n},this.files.clear(),this.files.push(this.fb.group(this.responseDocument)),this._snackbarService.openSnackBar("File uploaded successfully","success")},error:r=>{this.isDocumentUploading=!1,this._snackbarService.openSnackBar(r?.error,"error")}})}removeDocument(){this.files.clear()}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(u.qu),e.Y36(O.s),e.Y36(M.Kz),e.Y36(G.o),e.Y36(Z.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-update-request"]],inputs:{user:"user",agentType:"agentType",quoteId:"quoteId"},outputs:{res:"res"},decls:23,vars:4,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","status",1,"form-label"],["id","status","formControlName","status",1,"form-select"],["value",""],["value","Approved"],["value","Rejected"],["for","remarks",1,"form-label"],["id","remarks","formControlName","remarks","placeholder","Remarks",1,"form-control","shadow-none","p-2"],[4,"ngIf"],["type","submit","class","btn btn-primary btn-sm",4,"ngIf"],["type","submit","class","btn btn-primary btn-loading btn-sm",3,"disabled",4,"ngIf"],[1,"mb-4","mt-2"],["for",""],["type","button",1,"link_btn",3,"click"],[1,"material-symbols-outlined"],["type","file","accept",".pdf,.txt,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif",2,"display","none",3,"change"],["fileInput",""],["class","document-list files",4,"ngIf"],["class","loading",4,"ngIf"],[1,"document-list","files"],["target","_blank",1,"document-link",3,"href"],["type","button","tabindex","0",1,"material-symbols-outlined","remove",3,"click","keyup.enter"],[1,"loading"],[1,"loader"],["type","submit",1,"btn","btn-primary","btn-sm"],["type","submit",1,"btn","btn-primary","btn-loading","btn-sm",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Update Response"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o._modal.close()}),e.qZA()(),e.TgZ(4,"div",3)(5,"form",4),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(6,"div",5)(7,"label",6),e._uU(8,"Status"),e.qZA(),e.TgZ(9,"select",7)(10,"option",8),e._uU(11,"Select Status"),e.qZA(),e.TgZ(12,"option",9),e._uU(13,"Approved"),e.qZA(),e.TgZ(14,"option",10),e._uU(15,"Rejected"),e.qZA()()(),e.TgZ(16,"div",5)(17,"label",11),e._uU(18,"Remarks"),e.qZA(),e._UZ(19,"textarea",12),e.qZA(),e.YNc(20,Yn,13,2,"ng-container",13),e.YNc(21,Jn,2,0,"button",14),e.YNc(22,Qn,5,1,"button",15),e.qZA()()),2&n&&(e.xp6(5),e.Q6J("formGroup",o.updateForm),e.xp6(15),e.Q6J("ngIf","seller"===o.agentType),e.xp6(1),e.Q6J("ngIf",!o.isSubmitting),e.xp6(1),e.Q6J("ngIf",o.isSubmitting))},dependencies:[p.O5,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.sg,u.u],styles:[".link_btn[_ngcontent-%COMP%]{border:none;background:none;color:#f2709c;display:flex;align-items:center;gap:10px}.link_btn[_ngcontent-%COMP%]:hover{color:#ff9472}.document-list[_ngcontent-%COMP%]{list-style:none;padding:0}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;display:flex;color:#007bff;gap:10px;align-items:center}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{color:red}"]}),a})();var X=_(7899),ut=_(4859),Qe=_(8255);function zn(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"li")(1,"span",8),e._uU(2," link "),e.qZA(),e._UZ(3,"input",23),e.TgZ(4,"span",24),e.NdJ("click",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeLink(o))})("keyup.enter",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeLink(o))}),e._uU(5," remove "),e.qZA()()}if(2&a){const i=s.$implicit;e.xp6(3),e.Q6J("formControl",i)}}function Hn(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"li")(1,"span",8),e._uU(2," topic "),e.qZA(),e.TgZ(3,"a",25),e._uU(4),e.qZA(),e.TgZ(5,"span",24),e.NdJ("click",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeDocument(o))})("keyup.enter",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeDocument(o))}),e._uU(6," remove "),e.qZA()()}if(2&a){const i=s.$implicit;e.xp6(3),e.s9C("href",i.value.link,e.LSH),e.xp6(1),e.Oqu(i.value.name)}}function jn(a,s){1&a&&(e.TgZ(0,"div",26)(1,"span",8),e._uU(2,"hourglass_empty"),e.qZA(),e._uU(3," Uploading... "),e.qZA())}function Gn(a,s){1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2,"Agents not selected"),e.qZA()())}function $n(a,s){if(1&a&&e._UZ(0,"img",33),2&a){const i=e.oxw().$implicit;e.s9C("src",null==i||null==i.the_user||null==i.the_user.data||null==i.the_user.data.entity||null==i.the_user.data.entity.data||null==i.the_user.data.entity.data.person||null==i.the_user.data.entity.data.person.data?null:i.the_user.data.entity.data.person.data.profile_img,e.LSH)}}function Vn(a,s){1&a&&e._UZ(0,"img",34)}function Kn(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e.YNc(2,$n,1,1,"img",31),e.YNc(3,Vn,1,0,"ng-template",null,32,e.W1O),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA()()),2&a){const i=s.$implicit,t=e.MAs(4);e.xp6(2),e.Q6J("ngIf",null==i||null==i.the_user||null==i.the_user.data||null==i.the_user.data.entity||null==i.the_user.data.entity.data||null==i.the_user.data.entity.data.person||null==i.the_user.data.entity.data.person.data?null:i.the_user.data.entity.data.person.data.profile_img)("ngIfElse",t),e.xp6(3),e.AsE(" ",null==i?null:i.the_user.data.entity.data.person.data.first_name," ",null==i?null:i.the_user.data.entity.data.person.data.last_name," "),e.xp6(2),e.hij(" ",null==i?null:i.the_user.data.entity.data.person.data.email," "),e.xp6(2),e.hij(" ",null==i?null:i.the_user.data.entity.data.person.data.phone," ")}}function Wn(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",27)(1,"h3"),e._uU(2,"Agents"),e.qZA(),e.TgZ(3,"table",28)(4,"thead")(5,"th"),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Phone"),e.qZA()(),e.TgZ(11,"tbody"),e.YNc(12,Gn,3,0,"tr",29),e.YNc(13,Kn,10,6,"tr",10),e.qZA()(),e.TgZ(14,"button",30),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.addAgents())}),e.TgZ(15,"span",8),e._uU(16," person "),e.qZA(),e._uU(17," Add Agents "),e.qZA()()}if(2&a){const i=e.oxw();e.xp6(12),e.Q6J("ngIf",0===i.agentsList.length),e.xp6(1),e.Q6J("ngForOf",i.agentsList)}}function Xn(a,s){1&a&&(e.TgZ(0,"button",35),e._uU(1," Send "),e.qZA())}function ei(a,s){1&a&&(e.TgZ(0,"button",36)(1,"div",37),e._UZ(2,"span",38),e.qZA(),e._uU(3," Sending... "),e.qZA())}let Zt=(()=>{const s=class{constructor(t,n,o,r,l,c,d){this._itemService=t,this._rfqService=n,this._nodeService=o,this._authService=r,this._snackbarService=l,this.formBuilder=c,this._ngbModal=d,this.isLoading=!1,this.isParticipating=!1,this.isSubmitting=!1,this.fileUrl="",this.submittingAction="",this.alreadyParticipated=!1,this.agentsList=[],this.isDocumentUploading=!1,this.actionCompleted=new e.vpe,this.updateForm=this.formBuilder.group({budget:new u.NI("",[u.kI.required]),documents:this.formBuilder.group({links:this.formBuilder.array([]),files:this.formBuilder.array([])}),remarks:new u.NI("",[u.kI.required])})}get linksArray(){return this.updateForm.get("documents.links")}addLink(){this.linksArray.push(this.formBuilder.control(""))}removeLink(t){this.linksArray.removeAt(t)}get files(){return this.updateForm.get("documents.files")}addDocument(t){const n=t.target.files;for(let o=0;o<n.length;o++){const r=n.item(o);this.uploadFile(r,r.name)}t.target.value=null}uploadFile(t,n){const o=new FormData;o.append("file",t),this.isDocumentUploading=!0,this._itemService.uploadFile(o).subscribe({next:r=>{this.isDocumentUploading=!1;const l=r?.data;this.fileUrl=l,this.files.push(this.formBuilder.control({link:l,name:n})),this._snackbarService.openSnackBar("File uploaded successfully","success")},error:r=>{this.isDocumentUploading=!1,this._snackbarService.openSnackBar(r?.error,"error")}})}removeDocument(t){this.files.removeAt(t)}ngOnInit(){var t=this;return(0,m.Z)(function*(){const n=t._authService.loadFromLocalStorage();t.conceptId=n.userConcept,"sellerAgent"===t.agentType&&t._rfqService.getSeller().then(o=>{t.sellerAgentId=[o]})})()}addAgents(){const t=this._ngbModal.open(dt,{size:"xl"});t.componentInstance.selectedAgent=this.agentsList,t.componentInstance.selectedAgents.subscribe(n=>{this.agentsList=n,this.agentsId=this.agentsList.map(o=>o.the_user?.id)})}sendRequest(){if(this.updateForm.invalid)return void this._snackbarService.openSnackBar("Please fill all the required fields","error");const t={...this.updateForm.value,status:"Pending",quoteId:this.quoteId};t.agentsId="sellerAgent"===this.agentType?this.sellerAgentId:"public"===this.quoteDetail.eventType&&this.alreadyApproved&&"sellerAgent"!==this.agentType?this.agentsId:"public"===this.quoteDetail.eventType?[this.quoteDetail.buyerConceptId]:this.agentsId,this.isSubmitting=!0,this._nodeService.createRequestQuote(t,this.agentType).subscribe({next:()=>{this.isSubmitting=!1,this.actionCompleted.emit(),this._snackbarService.openSnackBar("Request sent successfully","success")}})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(Z.e),e.Y36(L),e.Y36(O.s),e.Y36(N.e),e.Y36(G.o),e.Y36(u.qu),e.Y36(M.FF))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-participate-event"]],inputs:{agentType:"agentType",quoteId:"quoteId",quoteDetail:"quoteDetail",alreadyApproved:"alreadyApproved"},outputs:{actionCompleted:"actionCompleted"},decls:38,vars:7,consts:[[1,"container"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,""],[1,"d-flex","col-md-12","gap-5"],[1,"col-md-6"],["type","button",1,"link_btn",3,"click"],[1,"material-symbols-outlined"],[1,"document-list"],[4,"ngFor","ngForOf"],["type","file","accept",".pdf,.txt,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif",2,"display","none",3,"change"],["fileInput",""],[1,"document-list","files"],["class","uploading-loader",4,"ngIf"],[1,"col-md-4","mb-2"],["for","budget",1,"form-label"],["type","number","placeholder","Budget","id","budget","formControlName","budget",1,"form-control","shadow-none","p-2"],[1,"col-md-12","mb-2"],["type","text","placeholder","Remarks","id","budget","formControlName","remarks",1,"form-control","shadow-none","p-2"],["class","mt-3 mb-5",4,"ngIf"],["class","btn btn-primary btn-sm create-button",4,"ngIf"],["disabled","","class","btn btn-primary btn-sm create-button",4,"ngIf"],["type","text","placeholder","https://",1,"form-control","shadow-none","p-2",3,"formControl"],["type","button","tabindex","0",1,"material-symbols-outlined","remove",3,"click","keyup.enter"],["target","_blank",1,"document-link",3,"href"],[1,"uploading-loader"],[1,"mt-3","mb-5"],[1,"table"],[4,"ngIf"],["type","button",1,"add_agents",3,"click"],["class","img","alt","",3,"src",4,"ngIf","ngIfElse"],["defaultImage",""],["alt","",1,"img",3,"src"],["src","/assets/man.png","alt","",1,"img"],[1,"btn","btn-primary","btn-sm","create-button"],["disabled","",1,"btn","btn-primary","btn-sm","create-button"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"]],template:function(n,o){if(1&n){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.ynx(3),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return o.sendRequest()}),e.TgZ(5,"div",4)(6,"h3"),e._uU(7,"Documents"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"button",7),e.NdJ("click",function(){return o.addLink()}),e.TgZ(11,"span",8),e._uU(12," link "),e.qZA(),e._uU(13," Add Links "),e.qZA(),e.TgZ(14,"ul",9),e.YNc(15,zn,6,1,"li",10),e.qZA()(),e.TgZ(16,"div",6)(17,"button",7),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(22);return e.KtG(c.click())}),e.TgZ(18,"span",8),e._uU(19," upload_file "),e.qZA(),e._uU(20," Add Document "),e.qZA(),e.TgZ(21,"input",11,12),e.NdJ("change",function(c){return o.addDocument(c)}),e.qZA(),e.TgZ(23,"ul",13),e.YNc(24,Hn,7,2,"li",10),e.qZA(),e.YNc(25,jn,4,0,"div",14),e.qZA()()(),e.TgZ(26,"div",15)(27,"label",16),e._uU(28,"Budget"),e.qZA(),e._UZ(29,"input",17),e.qZA(),e.TgZ(30,"div",18)(31,"label",16),e._uU(32,"Remarks"),e.qZA(),e._UZ(33,"textarea",19),e.qZA(),e.YNc(34,Wn,18,2,"div",20),e.TgZ(35,"div"),e.YNc(36,Xn,2,0,"button",21),e.YNc(37,ei,4,0,"button",22),e.qZA()(),e.BQk(),e.qZA()()()}2&n&&(e.xp6(4),e.Q6J("formGroup",o.updateForm),e.xp6(11),e.Q6J("ngForOf",o.linksArray.controls),e.xp6(9),e.Q6J("ngForOf",o.files.controls),e.xp6(1),e.Q6J("ngIf",o.isDocumentUploading),e.xp6(9),e.Q6J("ngIf","sellerAgent"!==o.agentType),e.xp6(2),e.Q6J("ngIf",!o.isSubmitting),e.xp6(1),e.Q6J("ngIf",o.isSubmitting))},dependencies:[p.sg,p.O5,u._Y,u.Fj,u.wV,u.JJ,u.JL,u.oH,u.sg,u.u],styles:[".participate_btn[_ngcontent-%COMP%], .decline_btn[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:6px 16px}h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.link_btn[_ngcontent-%COMP%]{border:none;background:none;color:#f2709c;display:flex;align-items:center;gap:10px}.link_btn[_ngcontent-%COMP%]:hover{color:#ff9472}.document-list[_ngcontent-%COMP%]{list-style:none;padding:0}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;display:flex;color:#007bff;gap:10px;align-items:center}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{color:red}.document-link[_ngcontent-%COMP%]{text-decoration:none;color:#007bff}.document-link[_ngcontent-%COMP%]:hover{text-decoration:underline}input[type=file][_ngcontent-%COMP%]{display:none}.document-list.files[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #ced4da;padding:5px;border-radius:5px}.create-button[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:6px 16px;float:right}.add_agents[_ngcontent-%COMP%]{border:1px solid #007bff;border-radius:5px;padding:5px;background:none;color:#f2709c;display:flex;align-items:center;gap:10px;color:#007bff}.add_agents[_ngcontent-%COMP%]:hover{color:#ff9472;border:1px solid rgb(255,148,114)}.img[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid #888;border-radius:50%;margin-right:10px}.uploading-loader[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:flex;align-items:center;justify-content:center;padding:10px;margin-top:10px;background-color:#0000000d;border:1px solid rgba(0,0,0,.1);border-radius:4px;color:#333;font-weight:700;font-size:16px;position:relative}.loading-icon[_ngcontent-%COMP%]{margin-right:10px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),a})();const ti=["*"];let ni=(()=>{const s=class{constructor(){this.isOpen=!1,this.title="",this.closed=new e.vpe}closeOffcanvas(){this.isOpen=!1,this.closed.emit()}};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-offcanvas"]],inputs:{isOpen:"isOpen",title:"title"},outputs:{closed:"closed"},ngContentSelectors:ti,decls:8,vars:3,consts:[[1,"offcanvas"],[1,"offcanvas-header"],[1,"offcanvas-title"],["type","button",1,"close",3,"click"],[1,"offcanvas-body"]],template:function(n,o){1&n&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.closeOffcanvas()}),e._uU(5," \xd7 "),e.qZA()(),e.TgZ(6,"div",4),e.Hsn(7),e.qZA()()),2&n&&(e.ekj("open",o.isOpen),e.xp6(3),e.Oqu(o.title))},styles:[".offcanvas-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1040}.offcanvas[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:50%;height:100%;overflow:auto;background-color:#fff;z-index:1050;transition:right .3s ease;box-shadow:0 0 10px #00000080}@media only screen and (max-width: 600px){.offcanvas[_ngcontent-%COMP%]{width:100%}}.offcanvas.open[_ngcontent-%COMP%]{right:0;display:block;visibility:visible}.offcanvas-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;border-bottom:1px solid #dee2e6}.close[_ngcontent-%COMP%]{font-size:1.5rem;background:none;border:none;cursor:pointer}"]}),a})();function ii(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"li")(1,"span",8),e._uU(2," link "),e.qZA(),e._UZ(3,"input",21),e.TgZ(4,"span",22),e.NdJ("click",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeLink(o))})("keyup.enter",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeLink(o))}),e._uU(5," remove "),e.qZA()()}if(2&a){const i=s.$implicit;e.xp6(3),e.Q6J("formControl",i)}}function ai(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"li")(1,"span",8),e._uU(2," topic "),e.qZA(),e.TgZ(3,"a",23),e._uU(4),e.qZA(),e.TgZ(5,"span",22),e.NdJ("click",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeDocument(o))})("keyup.enter",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeDocument(o))}),e._uU(6," remove "),e.qZA()()}if(2&a){const i=s.$implicit;e.xp6(3),e.s9C("href",i.value.link,e.LSH),e.xp6(1),e.Oqu(i.value.name)}}function oi(a,s){1&a&&(e.TgZ(0,"div",24)(1,"span",8),e._uU(2,"hourglass_empty"),e.qZA(),e._uU(3," Uploading... "),e.qZA())}function si(a,s){1&a&&(e.TgZ(0,"button",25),e._uU(1," Send "),e.qZA())}function ri(a,s){1&a&&(e.TgZ(0,"button",25)(1,"div",26),e._UZ(2,"span",27),e.qZA(),e._uU(3," Sending... "),e.qZA())}let li=(()=>{const s=class{constructor(t,n,o,r,l,c){this._route=t,this._itemService=n,this._nodeService=o,this._snackbarService=r,this.formBuilder=l,this._ngbModal=c,this.isLoading=!1,this.isParticipating=!1,this.isSubmitting=!1,this.fileUrl="",this.submittingAction="",this.alreadyParticipated=!1,this.agentsList=[],this.isDocumentUploading=!1,this.closed=new e.vpe,this.updateForm=this.formBuilder.group({budget:new u.NI("",[u.kI.required]),documents:this.formBuilder.group({links:this.formBuilder.array([]),files:this.formBuilder.array([])}),remarks:new u.NI("",[u.kI.required])})}get linksArray(){return this.updateForm.get("documents.links")}addLink(){this.linksArray.push(this.formBuilder.control(""))}removeLink(t){this.linksArray.removeAt(t)}get files(){return this.updateForm.get("documents.files")}addDocument(t){const n=t.target.files;for(let o=0;o<n.length;o++){const r=n.item(o);this.uploadFile(r,r.name)}t.target.value=null}uploadFile(t,n){const o=new FormData;o.append("file",t),this.isDocumentUploading=!0,this._itemService.uploadFile(o).subscribe({next:r=>{const l=r?.data;this.isDocumentUploading=!1,this.fileUrl=l,this.files.push(this.formBuilder.control({link:l,name:n})),this._snackbarService.openSnackBar("File uploaded successfully","success")},error:r=>{this.isDocumentUploading=!1,this._snackbarService.openSnackBar(r?.error,"error")}})}removeDocument(t){this.files.removeAt(t)}sendRequest(){if(this.updateForm.invalid)return void this._snackbarService.openSnackBar("Please fill all the required fields","error");const t={...this.updateForm.value,status:"Requested",quoteId:this.quoteId};t.agentsId="sellerAgent"===this.agentType?this.sellerAgentId:this.agentsId,"public"===this.quoteDetail.eventType&&(t.agentsId=[this.quoteDetail.buyerConceptId]),this.isSubmitting=!0,this._nodeService.createRequestQuote(t,this.agentType).subscribe({next:()=>{this.isSubmitting=!1,this.closed.emit(),this._snackbarService.openSnackBar("Request sent successfully","success")},error:()=>{this.isSubmitting=!1}})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(h.gz),e.Y36(Z.e),e.Y36(O.s),e.Y36(G.o),e.Y36(u.qu),e.Y36(M.FF))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-request-approval"]],inputs:{agentType:"agentType",quoteId:"quoteId",quoteDetail:"quoteDetail"},outputs:{closed:"closed"},decls:37,vars:6,consts:[[1,"container"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,""],[1,"d-flex","col-md-12","gap-5"],[1,"col-md-6"],["type","button",1,"link_btn",3,"click"],[1,"material-symbols-outlined"],[1,"document-list"],[4,"ngFor","ngForOf"],["type","file","accept",".pdf,.txt,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif",2,"display","none",3,"change"],["fileInput",""],[1,"document-list","files"],["class","uploading-loader",4,"ngIf"],[1,"col-md-4","mb-2"],["for","budget",1,"form-label"],["type","number","placeholder","Budget","id","budget","formControlName","budget",1,"form-control","shadow-none","p-2"],[1,"col-md-12","mb-2"],["type","text","placeholder","Remarks","id","budget","formControlName","remarks",1,"form-control","shadow-none","p-2"],["class","btn btn-primary btn-sm create-button",4,"ngIf"],["type","text","placeholder","https://",1,"form-control","shadow-none","p-2",3,"formControl"],["type","button","tabindex","0",1,"material-symbols-outlined","remove",3,"click","keyup.enter"],["target","_blank",1,"document-link",3,"href"],[1,"uploading-loader"],[1,"btn","btn-primary","btn-sm","create-button"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"]],template:function(n,o){if(1&n){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.ynx(3),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return o.sendRequest()}),e.TgZ(5,"div",4)(6,"h3"),e._uU(7,"Documents"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"button",7),e.NdJ("click",function(){return o.addLink()}),e.TgZ(11,"span",8),e._uU(12," link "),e.qZA(),e._uU(13," Add Links "),e.qZA(),e.TgZ(14,"ul",9),e.YNc(15,ii,6,1,"li",10),e.qZA()(),e.TgZ(16,"div",6)(17,"button",7),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(22);return e.KtG(c.click())}),e.TgZ(18,"span",8),e._uU(19," upload_file "),e.qZA(),e._uU(20," Add Document "),e.qZA(),e.TgZ(21,"input",11,12),e.NdJ("change",function(c){return o.addDocument(c)}),e.qZA(),e.TgZ(23,"ul",13),e.YNc(24,ai,7,2,"li",10),e.qZA(),e.YNc(25,oi,4,0,"div",14),e.qZA()()(),e.TgZ(26,"div",15)(27,"label",16),e._uU(28,"Budget"),e.qZA(),e._UZ(29,"input",17),e.qZA(),e.TgZ(30,"div",18)(31,"label",16),e._uU(32,"Remarks"),e.qZA(),e._UZ(33,"textarea",19),e.qZA(),e.TgZ(34,"div"),e.YNc(35,si,2,0,"button",20),e.YNc(36,ri,4,0,"button",20),e.qZA()(),e.BQk(),e.qZA()()()}2&n&&(e.xp6(4),e.Q6J("formGroup",o.updateForm),e.xp6(11),e.Q6J("ngForOf",o.linksArray.controls),e.xp6(9),e.Q6J("ngForOf",o.files.controls),e.xp6(1),e.Q6J("ngIf",o.isDocumentUploading),e.xp6(10),e.Q6J("ngIf",!o.isSubmitting),e.xp6(1),e.Q6J("ngIf",o.isSubmitting))},dependencies:[p.sg,p.O5,u._Y,u.Fj,u.wV,u.JJ,u.JL,u.oH,u.sg,u.u],styles:[".participate_btn[_ngcontent-%COMP%], .decline_btn[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:6px 16px}h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.link_btn[_ngcontent-%COMP%]{border:none;background:none;color:#f2709c;display:flex;align-items:center;gap:10px}.link_btn[_ngcontent-%COMP%]:hover{color:#ff9472}.document-list[_ngcontent-%COMP%]{list-style:none;padding:0}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;display:flex;color:#007bff;gap:10px;align-items:center}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{color:red}.document-link[_ngcontent-%COMP%]{text-decoration:none;color:#007bff}.document-link[_ngcontent-%COMP%]:hover{text-decoration:underline}input[type=file][_ngcontent-%COMP%]{display:none}.document-list.files[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #ced4da;padding:5px;border-radius:5px}.create-button[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:6px 16px;float:right}.add_agents[_ngcontent-%COMP%]{border:1px solid #007bff;border-radius:5px;padding:5px;background:none;color:#f2709c;display:flex;align-items:center;gap:10px;color:#007bff}.add_agents[_ngcontent-%COMP%]:hover{color:#ff9472;border:1px solid rgb(255,148,114)}.img[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid #888;border-radius:50%;margin-right:10px}.uploading-loader[_ngcontent-%COMP%]{margin-top:0;width:-moz-fit-content;width:fit-content;display:flex;align-items:center;justify-content:center;padding:10px;background-color:#0000000d;border:1px solid rgba(0,0,0,.1);border-radius:4px;color:#333;font-weight:700;font-size:16px;position:relative}"]}),a})();function ci(a,s){1&a&&(e.TgZ(0,"div",11),e._uU(1," You have participated in the event. "),e.qZA())}function di(a,s){1&a&&(e.TgZ(0,"div",12),e._uU(1," You have rejected this quote. "),e.qZA())}function ui(a,s){1&a&&(e.ynx(0),e.TgZ(1,"span",11),e._uU(2," This request has been already approved by the buyer. please proceed forward to the next step. "),e.qZA(),e.BQk())}function mi(a,s){1&a&&(e.ynx(0),e.TgZ(1,"span",11),e._uU(2," This quote has already been updated by you. "),e.qZA(),e.BQk())}function gi(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"button",27),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.requestABuyerForQuote())}),e._uU(2," Request for approval "),e.qZA(),e.BQk()}}function pi(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.reviewQuote(n.quoteDetail))}),e._uU(1," Update quote "),e.qZA()}}function _i(a,s){if(1&a&&(e.ynx(0),e.YNc(1,pi,2,0,"button",28),e.BQk()),2&a){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!i.isQuoteUpdated)}}function hi(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(4);return e.KtG(n.participate())}),e._uU(1," Participate "),e.qZA()}}function fi(a,s){1&a&&(e.ynx(0),e.TgZ(1,"button",30)(2,"div",31)(3,"span",32),e._uU(4,"."),e.qZA()(),e._uU(5," Participating... "),e.qZA(),e.BQk()),2&a&&(e.xp6(1),e.Q6J("disabled",!0))}function bi(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(4);return e.KtG(n.decline(n.quoteDetail))}),e._uU(1," Decline "),e.qZA()}}function yi(a,s){1&a&&(e.ynx(0),e.TgZ(1,"button",30)(2,"div",31)(3,"span",32),e._uU(4,"."),e.qZA()(),e._uU(5," Declining... "),e.qZA(),e.BQk()),2&a&&(e.xp6(1),e.Q6J("disabled",!0))}function Ci(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",29),e.YNc(2,hi,2,0,"button",28),e.YNc(3,fi,6,1,"ng-container",7),e.YNc(4,bi,2,0,"button",28),e.YNc(5,yi,6,1,"ng-container",7),e.qZA(),e.BQk()),2&a){const i=e.oxw(3);e.xp6(2),e.Q6J("ngIf",!i.isSubmitting),e.xp6(1),e.Q6J("ngIf",i.isSubmitting&&"participate"===i.submittingAction),e.xp6(1),e.Q6J("ngIf",!i.isSubmitting),e.xp6(1),e.Q6J("ngIf",i.isSubmitting&&"decline"===i.submittingAction)}}function vi(a,s){if(1&a&&e.YNc(0,Ci,6,4,"ng-container",7),2&a){const i=e.oxw(2);e.Q6J("ngIf","buyer"!==i.agentType&&"seller"!==i.agentType&&!i.alreadyParticipated&&!i.quoteRejected&&i.apiRequestComplete)}}function xi(a,s){if(1&a&&(e.TgZ(0,"ul",33)(1,"li",34)(2,"span",35),e._uU(3," link "),e.qZA(),e.TgZ(4,"a",36),e._uU(5),e.qZA()()()),2&a){const i=s.$implicit;e.xp6(4),e.s9C("href",i,e.LSH),e.xp6(1),e.hij(" ",i," ")}}function Ti(a,s){if(1&a&&(e.TgZ(0,"ul",33)(1,"li",34)(2,"span",35),e._uU(3," topic "),e.qZA(),e.TgZ(4,"a",36),e._uU(5),e.qZA()()()),2&a){const i=s.$implicit;e.xp6(4),e.s9C("href",i.link,e.LSH),e.xp6(1),e.hij(" ",i.name," ")}}function wi(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",37)(1,"select",38),e.NdJ("ngModelChange",function(n){e.CHM(i);const o=e.oxw(2);return e.KtG(o.selectedOption=n)})("change",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.onDropdownChange())}),e.TgZ(2,"option",39),e._uU(3,"Filter by"),e.qZA(),e.TgZ(4,"option",40),e._uU(5,"Quote requests"),e.qZA(),e.TgZ(6,"option",41),e._uU(7,"Received responses"),e.qZA()()()}if(2&a){const i=e.oxw(2);e.xp6(1),e.Q6J("ngModel",i.selectedOption)}}function Ai(a,s){1&a&&(e.TgZ(0,"option",46),e._uU(1," Quotes Sent "),e.qZA())}function Mi(a,s){1&a&&(e.TgZ(0,"option",47),e._uU(1," Quotes Received "),e.qZA())}function ki(a,s){1&a&&(e.TgZ(0,"option",48),e._uU(1," Responses Received "),e.qZA())}function Pi(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",37)(1,"select",38),e.NdJ("ngModelChange",function(n){e.CHM(i);const o=e.oxw(2);return e.KtG(o.selectedOption=n)})("change",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.onDropdownChange())}),e.TgZ(2,"option",39),e._uU(3,"Filter by"),e.qZA(),e.YNc(4,Ai,2,0,"option",42),e.YNc(5,Mi,2,0,"option",43),e.TgZ(6,"option",44),e._uU(7,"Responses Sent"),e.qZA(),e.YNc(8,ki,2,0,"option",45),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(1),e.Q6J("ngModel",i.selectedOption),e.xp6(3),e.Q6J("ngIf","seller"!==i.agentType),e.xp6(1),e.Q6J("ngIf","buyerAgent"!==i.agentType),e.xp6(3),e.Q6J("ngIf","seller"!==i.agentType)}}function Zi(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1," Response Document "),e.qZA())}function Ii(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1," Action "),e.qZA())}function Oi(a,s){1&a&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",49),e._uU(3,"No data available"),e.qZA()(),e.BQk())}function Si(a,s){if(1&a&&(e.TgZ(0,"ul",33)(1,"li",34)(2,"span",35),e._uU(3," link "),e.qZA(),e.TgZ(4,"a",36),e._uU(5),e.qZA()()()),2&a){const i=s.$implicit;e.xp6(4),e.s9C("href",i,e.LSH),e.xp6(1),e.Oqu(i)}}function qi(a,s){if(1&a&&(e.TgZ(0,"ul",33)(1,"li",34)(2,"span",35),e._uU(3," topic "),e.qZA(),e.TgZ(4,"a",36),e._uU(5),e.qZA()()()),2&a){const i=s.$implicit;e.xp6(4),e.s9C("href",null==i?null:i.link,e.LSH),e.xp6(1),e.Oqu(null==i?null:i.name)}}function Fi(a,s){if(1&a&&(e.TgZ(0,"ul",33)(1,"li",34)(2,"span",35),e._uU(3," topic "),e.qZA(),e.TgZ(4,"a",36),e._uU(5),e.qZA()()()),2&a){const i=e.oxw(2).$implicit;e.xp6(4),e.s9C("href",null==i||null==i.responseDocument?null:i.responseDocument.link,e.LSH),e.xp6(1),e.Oqu(null==i||null==i.responseDocument?null:i.responseDocument.name)}}function Ei(a,s){if(1&a&&(e.TgZ(0,"td")(1,"div",15),e.YNc(2,Fi,6,2,"ul",51),e.qZA()()),2&a){const i=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",null==i?null:i.responseDocument)}}function Di(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2).$implicit,o=e.oxw(3);return e.KtG(o.reviewQuote(n))}),e.TgZ(1,"span",56),e._uU(2,"visibility"),e.qZA(),e._uU(3," Review "),e.qZA()}}function Ni(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2).$implicit,o=e.oxw(3);return e.KtG(o.requestProject(n))}),e.TgZ(1,"span",35),e._uU(2," add_circle "),e.qZA(),e._uU(3," Request Project "),e.qZA()}}function Ui(a,s){if(1&a&&(e.TgZ(0,"td")(1,"button",52)(2,"span",35),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,53),e.YNc(6,Di,4,0,"button",54),e.YNc(7,Ni,4,0,"button",54),e.qZA()()),2&a){const i=e.MAs(5),t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("matMenuTriggerFor",i),e.xp6(5),e.Q6J("ngIf","finalresponse"!==n.selectedOption),e.xp6(1),e.Q6J("ngIf","buyer"===n.agentType&&"Requested"!==t.status)}}const Ri=function(a,s,i,t){return{badge:!0,"bg-success text-white":a,"bg-danger text-white":s,"bg-warning text-dark":i,"bg-info text-white":t}};function Li(a,s){if(1&a&&(e.TgZ(0,"tbody")(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"span",21),e._uU(10),e.qZA()(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td")(14,"div",15),e.YNc(15,Si,6,2,"ul",18),e.qZA(),e.TgZ(16,"div",15),e.YNc(17,qi,6,2,"ul",18),e.qZA()(),e.YNc(18,Ei,3,1,"td",7),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.YNc(21,Ui,8,3,"td",7),e.qZA()()),2&a){const i=s.$implicit,t=e.oxw(3);e.xp6(3),e.Oqu(null==i||null==i.profile?null:i.profile.name),e.xp6(2),e.Oqu(null==i||null==i.profile?null:i.profile.email),e.xp6(2),e.Oqu(null==i||null==i.profile?null:i.profile.phone_number),e.xp6(2),e.Q6J("ngClass",e.l5B(11,Ri,"Approved"===i.status,"Rejected"===i.status,"Pending"===i.status,"Requested"===i.status)),e.xp6(1),e.hij(" ",i.status," "),e.xp6(2),e.Oqu(null==i?null:i.budget),e.xp6(3),e.Q6J("ngForOf",null==i||null==i.documents?null:i.documents.links),e.xp6(2),e.Q6J("ngForOf",null==i||null==i.documents?null:i.documents.files),e.xp6(1),e.Q6J("ngIf",null==i?null:i.responseDocument),e.xp6(2),e.Oqu(null==i?null:i.remarks),e.xp6(1),e.Q6J("ngIf","receivedresponses"===t.selectedOption||"quoterequests"===t.selectedOption||"seller"===t.agentType||"finalresponse"===t.selectedOption)}}function Bi(a,s){if(1&a&&e.YNc(0,Li,22,16,"tbody",50),2&a){const i=e.oxw(2);e.Q6J("ngForOf",i.userResponses)}}const Yi=function(a,s){return{badge:!0,"bg-success text-white":a,"bg-danger text-white":s}};function Ji(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",13)(2,"div",14)(3,"h4"),e._uU(4,"General Information"),e.qZA(),e._UZ(5,"hr"),e.TgZ(6,"div",15)(7,"strong"),e._uU(8,"Title:"),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div",15)(11,"strong"),e._uU(12,"Description:"),e.qZA(),e._uU(13),e.qZA()(),e.TgZ(14,"div",14)(15,"div",16)(16,"h4"),e._uU(17,"Documents"),e.qZA(),e.YNc(18,gi,3,0,"ng-container",9),e.YNc(19,_i,2,1,"ng-container",7),e.YNc(20,vi,1,1,"ng-template",null,17,e.W1O),e.qZA(),e._UZ(22,"hr"),e.TgZ(23,"div",15)(24,"strong"),e._uU(25,"Links:"),e.qZA(),e.YNc(26,xi,6,2,"ul",18),e.qZA(),e.TgZ(27,"div",15)(28,"strong"),e._uU(29,"Document:"),e.qZA(),e.YNc(30,Ti,6,2,"ul",18),e.qZA()()(),e.TgZ(31,"h4"),e._uU(32,"Settings"),e.qZA(),e._UZ(33,"hr"),e.TgZ(34,"div",19)(35,"div",20)(36,"div",15)(37,"strong"),e._uU(38,"Start Date:"),e.qZA(),e._uU(39),e.qZA(),e.TgZ(40,"div",15)(41,"strong"),e._uU(42,"End Date:"),e.qZA(),e._uU(43),e.qZA()(),e.TgZ(44,"div",20)(45,"div",15)(46,"strong"),e._uU(47,"Owner:"),e.qZA(),e._uU(48),e.qZA(),e.TgZ(49,"div",15)(50,"strong"),e._uU(51,"Budget:"),e.qZA(),e._uU(52),e.qZA()(),e.TgZ(53,"div",20)(54,"div",15)(55,"strong"),e._uU(56,"Request Type:"),e.qZA(),e.TgZ(57,"span",21),e._uU(58),e.qZA()()()(),e.TgZ(59,"div",22),e._UZ(60,"hr"),e.TgZ(61,"div",23)(62,"h4"),e._uU(63,"Quote Responses"),e.qZA(),e.YNc(64,wi,8,1,"div",24),e.YNc(65,Pi,9,4,"div",24),e.qZA(),e._UZ(66,"hr"),e.TgZ(67,"table",25)(68,"thead")(69,"tr")(70,"th"),e._uU(71,"Name"),e.qZA(),e.TgZ(72,"th"),e._uU(73,"Email"),e.qZA(),e.TgZ(74,"th"),e._uU(75,"Phone"),e.qZA(),e.TgZ(76,"th"),e._uU(77,"Status"),e.qZA(),e.TgZ(78,"th"),e._uU(79,"Budget"),e.qZA(),e.TgZ(80,"th"),e._uU(81,"Documents"),e.qZA(),e.YNc(82,Zi,2,0,"th",7),e.TgZ(83,"th"),e._uU(84,"Remarks"),e.qZA(),e.YNc(85,Ii,2,0,"th",7),e.qZA()(),e.YNc(86,Oi,4,0,"ng-container",9),e.YNc(87,Bi,1,1,"ng-template",null,26,e.W1O),e.qZA()(),e.BQk()),2&a){const i=e.MAs(21),t=e.MAs(88),n=e.oxw();e.xp6(9),e.hij(" ",n.quoteDetail.title," "),e.xp6(4),e.hij(" ",n.quoteDetail.description," "),e.xp6(5),e.Q6J("ngIf","public"===n.quoteDetail.eventType&&"buyerAgent"===n.agentType&&!n.alreadyApproved&&!n.alreadyParticipated)("ngIfElse",i),e.xp6(1),e.Q6J("ngIf","Requested"===(null==n.quoteDetail?null:n.quoteDetail.status)&&"buyer"===n.agentType),e.xp6(7),e.Q6J("ngForOf",null==n.quoteDetail||null==n.quoteDetail.documents?null:n.quoteDetail.documents.links),e.xp6(4),e.Q6J("ngForOf",null==n.quoteDetail||null==n.quoteDetail.documents?null:n.quoteDetail.documents.files),e.xp6(9),e.hij("",n.quoteDetail.startDate," "),e.xp6(4),e.hij(" ",n.quoteDetail.endDate," "),e.xp6(5),e.hij(" ",n.quoteDetail.owner," "),e.xp6(4),e.AsE(" ",n.quoteDetail.currency," ",n.quoteDetail.budget," "),e.xp6(5),e.Q6J("ngClass",e.WLB(20,Yi,"public"===n.quoteDetail.eventType,"private"===n.quoteDetail.eventType)),e.xp6(1),e.hij(" ",n.quoteDetail.eventType," "),e.xp6(6),e.Q6J("ngIf","buyer"===n.agentType),e.xp6(1),e.Q6J("ngIf","buyer"!==n.agentType),e.xp6(17),e.Q6J("ngIf",n.shouldShowTh(n.userResponses,"responseDocument")),e.xp6(3),e.Q6J("ngIf","receivedresponses"===n.selectedOption||"quoterequests"===n.selectedOption||"seller"===n.agentType||"finalresponse"===n.selectedOption),e.xp6(1),e.Q6J("ngIf",0===(null==n.userResponses?null:n.userResponses.length))("ngIfElse",t)}}function Qi(a,s){1&a&&(e.TgZ(0,"div"),e._UZ(1,"span",57),e.qZA())}function zi(a,s){if(1&a&&e.YNc(0,Qi,2,0,"div",7),2&a){const i=e.oxw();e.Q6J("ngIf",i.isLoading)}}function Hi(a,s){1&a&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2,"No data available"),e.qZA(),e.BQk())}function ji(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"app-offcanvas",58),e.NdJ("closed",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.handleOffcanvasClosed())}),e.TgZ(2,"app-participate-event",59),e.NdJ("actionCompleted",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.handleOffcanvasClosed())}),e.qZA()(),e.TgZ(3,"app-offcanvas",58),e.NdJ("closed",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.handleOffcanvasClosed())}),e.TgZ(4,"app-request-approval",60),e.NdJ("actionCompleted",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.handleOffcanvasClosed())}),e.qZA()(),e.BQk()}if(2&a){const i=e.oxw();e.xp6(1),e.Q6J("isOpen",i.isOpen)("title",i.title1),e.xp6(1),e.Q6J("agentType",i.agentType)("quoteId",i.quoteId)("quoteDetail",i.quoteDetail)("alreadyApproved",i.alreadyApproved),e.xp6(1),e.Q6J("isOpen",i.isRequestOpen)("title",i.title2),e.xp6(1),e.Q6J("quoteDetail",i.quoteDetail)("agentType",i.agentType)("quoteId",i.quoteId)}}let Gi=(()=>{const s=class{constructor(t,n,o,r,l,c,d){this._route=t,this._itemService=n,this._nodeService=o,this._authService=r,this._snackbarService=l,this._ngModal=c,this._rfqService=d,this.isLoading=!1,this.isParticipating=!1,this.isSubmitting=!1,this.submittingAction="",this.alreadyParticipated=!1,this.userResponses=[],this.sentResponse=[],this.checkApprovalRequestdata=[],this.selectedOption="",this.isRequestOpen=!1,this.isDataFetched=!1,this.alreadyApproved=!1,this.isOpen=!1,this.title1="Participate Event",this.title2="Request for approval",this.isQuoteUpdated=!1,this.quoteRejected=!1,this.projAlreadyRequested=!1,this.apiRequestComplete=!1}ngOnInit(){var t=this;return(0,m.Z)(function*(){const n=t._authService.loadFromLocalStorage();t.conceptId=n.userConcept,yield t._rfqService.returnAgentType().then(o=>{t.agentType=o,t._route.params.subscribe(r=>{t.id=r.id,t.getQuoteDetails(t.id)})})})()}getQuoteDetails(t){var o,n=this;this._itemService.getByIdClean(t).subscribe({next:(o=(0,m.Z)(function*(r){n.isDataFetched=!0,n.quoteDetail=r?.data?.[X.eb],n.quoteId=r?.id,"buyer"===n.agentType?(n.selectedOption="finalresponse",n.viewReceivedResponse()):"seller"===n.agentType?(n.viewReceivedRequest(),n.selectedOption="responses"):"buyerAgent"===n.agentType?(n.selectedOption="receivedresponses",n.viewReceivedResponse(),n.checkIfAlreadyParticipated(),n.checkIfQuoteApprovedByBuyer()):(n.viewSentRequest(),n.selectedOption="requests"),n.checkIfQuoteUpdated(),("buyer"===n.agentType||"buyerAgent"===n.agentType&&"quoterequests"==n.selectedOption)&&n.getRequestApprovals()}),function(l){return o.apply(this,arguments)}),complete:()=>{this.apiRequestComplete=!0}})}onDropdownChange(){switch(this.selectedOption){case"requests":this.viewSentRequest();break;case"responses":this.viewReceivedRequest();break;case"receivedresponses":case"finalresponse":this.viewReceivedResponse();break;case"sentresponses":this.viewSentResponse();break;case"quoterequests":this.getRequestApprovals()}}checkIfQuoteApprovedByBuyer(){var t=this;return(0,m.Z)(function*(){yield t.viewReceivedRequest(),t.checkApprovalRequestdata.forEach(n=>{"public"===t.quoteDetail.eventType&&"Approved"===n?.status&&n?.quoteId==t.quoteId&&n?.buyerAgentConceptId==t.conceptId&&(t.alreadyApproved=!0)})})()}getRequestApprovals(){var t=this;let n="",o="";var r;("buyer"===this.agentType||"buyerAgent"===this.agentType)&&(n=`${I}_by`,o=this.quoteId),this._nodeService.getResponseQuote(n,o).subscribe({next:(r=(0,m.Z)(function*(l){if("buyer"===t.agentType){const c=yield t.filterOutRepeatedData(l?.data);t.userResponses=c}l?.data.filter(c=>{c?.quoteId==t.quoteId&&c?.profile?.agentId==t.conceptId&&(t.alreadyParticipated=!0)})}),function(c){return r.apply(this,arguments)})})}requestProject(t){var n=this;return(0,m.Z)(function*(){if("Rejected"===t?.status)return void n._snackbarService.openSnackBar("Cannot request project as the quote has been rejected","error");if(yield n.getProjectRequests(),!0===n.projAlreadyRequested)return void n._snackbarService.openSnackBar("This project has already been requested.","warning");const o={title:n.quoteDetail?.title,description:n.quoteDetail?.description,sellerConceptId:t?.sellerConceptId,buyerConceptId:n.conceptId,rfqId:n.quoteId,status:"Pending"},r=n._ngModal.open(E,{size:"md"});r.componentInstance.requestData=o,r.componentInstance.requestType="projectRequest"})()}createProject(t){const n=this._ngModal.open(E,{size:"md"});n.componentInstance.requestData=t,n.componentInstance.requestType="createproject"}participate(){this.isOpen=!0}handleOffcanvasClosed(){this.isOpen=!1,this.isRequestOpen=!1,this.getQuoteDetails(this.id)}requestABuyerForQuote(){this.isRequestOpen=!0}checkIfAlreadyParticipated(){this.userResponses.filter(t=>{t?.quoteId==this.quoteId&&t?.profile?.agentId==this.conceptId&&(this.alreadyParticipated=!0)})}viewSentRequest(){var t=this;let n="",o="";var r;"buyerAgent"===this.agentType?(n=`${C}_by`,o=this.quoteId):"sellerAgent"===this.agentType?(n=`${x}_by`,o=this.quoteId):"buyer"===this.agentType&&(n=`${b}_s`,o=this.conceptId),this._nodeService.getRequestQuote(n,o).subscribe({next:(r=(0,m.Z)(function*(l){const c=yield t.filterOutRepeatedData(l?.data);t.userResponses=c,t.checkIfAlreadyParticipated()}),function(c){return r.apply(this,arguments)})})}viewReceivedRequest(){var t=this;return(0,m.Z)(function*(){let n="",o="";"sellerAgent"===t.agentType?(n=`${C}_by`,o=t.quoteId):"seller"===t.agentType?(n=`${x}_by`,o=t.quoteId):"buyerAgent"===t.agentType&&(n=`${b}_by`,o=t.quoteId);const r=yield t._nodeService.getRequestQuote(n,o).toPromise(),l=yield t.filterOutRepeatedData(r?.data);t.userResponses=l,t.checkApprovalRequestdata=r?.data})()}viewSentResponse(){var t=this;return(0,m.Z)(function*(){let n="",o="";"seller"===t.agentType?(n=`${w}_s`,o=t.quoteId):"sellerAgent"===t.agentType?(n=`${A}_s`,o=t.quoteId):"buyerAgent"===t.agentType&&(n=`${I}_s`,o=t.quoteId);const r=yield t._nodeService.getResponseQuote(n,o).toPromise();if(t.checkIfAlreadyParticipated(),"sentresponses"===t.selectedOption){const l=yield t.filterOutRepeatedData(r?.data);t.userResponses=l}else{const l=yield t.filterOutRepeatedData(r?.data);t.sentResponse=l}})()}checkIfQuoteUpdated(){const n=this.quoteId;this._nodeService.getRequestQuote(`${b}_by`,n).subscribe({next:o=>{o?.data?.some(r=>r?.profile?.agentId===n)&&(this.isQuoteUpdated=!0)}})}viewReceivedResponse(){var t=this;let n="",o="";var r;"sellerAgent"===this.agentType?(n=`${w}_s`,o=this.quoteId):"buyerAgent"===this.agentType?(n=`${A}_s`,o=this.quoteId):"buyer"===this.agentType&&(n=`${I}_s`,o=this.quoteId),this._nodeService.getResponseQuote(n,o).subscribe({next:(r=(0,m.Z)(function*(l){const c=yield t.filterOutRepeatedData(l?.data);t.userResponses=c,l?.data?.length>0&&t.checkIfAlreadyParticipated()}),function(c){return r.apply(this,arguments)})})}reviewQuote(t){var n=this;return(0,m.Z)(function*(){if("Requested"===t.status){const l=n._ngModal.open(Pt,{size:"md"});return l.componentInstance.user=t,l.componentInstance.agentType=n.agentType,l.componentInstance.quoteId=n.quoteId,void l.result.then(()=>{n.getQuoteDetails(n.id)})}if(yield n.viewSentResponse(),n.sentResponse.some(l=>l.quoteId===t?.quoteId))return void n._snackbarService.openSnackBar("Response already sent","success");const r=n._ngModal.open(Pt,{size:"md"});r.componentInstance.user=t,r.componentInstance.agentType=n.agentType,r.componentInstance.quoteId=n.quoteId,r.result.then(()=>{n.getQuoteDetails(n.id)})})()}getProjectRequests(){return new Promise(t=>{this._nodeService.getProjectRequests("seller"===this.agentType?"project_request_by":"project_request_s").subscribe({next:o=>{this.projects=o?.data,this.projAlreadyRequested=this.projects.some(r=>r.buyerConceptId==this.conceptId&&r?.rfqId==this?.id),t(this.projAlreadyRequested)},error:o=>{console.error("Error fetching project requests:",o),t(!1)}})})}decline(t){this.isSubmitting=!0,this.submittingAction="decline";const n={...t,quoteId:this.quoteId,agentsId:[t?.profile?.agentId],status:"Rejected"};this._nodeService.createResponseQuote(n,this.agentType).subscribe({next:()=>{this.isSubmitting=!1,this.viewSentResponse()}})}shouldShowTh(t,n){return"responseDocument"===n&&t?.some(o=>null!=o?.responseDocument)}filterOutRepeatedData(t){const n={};return t.filter(r=>!n[r.id]&&(n[r.id]=!0,!0))}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(h.gz),e.Y36(Z.e),e.Y36(O.s),e.Y36(N.e),e.Y36(G.o),e.Y36(M.FF),e.Y36(L))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-view-request"]],decls:17,vars:8,consts:[[1,"container","mb-5"],[1,"d-flex","gap-2","align-items-center","mb-4","mt-2"],["routerLink","/marketing/all-requests",1,"material-symbols-outlined","cursor-pointer"],[1,"mb-0"],[1,"card"],["class","participate-enven",4,"ngIf"],["class","reject-enven",4,"ngIf"],[4,"ngIf"],[1,"card-body"],[4,"ngIf","ngIfElse"],["loading",""],[1,"participate-enven"],[1,"reject-enven"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],[1,"d-flex","align-items-center","justify-content-between"],["notPublicEvent",""],["class","ps-0",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"col-md-4"],[3,"ngClass"],[1,"col-md-12","overflow-scroll"],[1,"d-flex","justify-content-between","align-items-center"],["class","form-group min-w-200px",4,"ngIf"],[1,"table","table-responsive"],["dataExists",""],[1,"btn","btn-primary","btn-sm","create-button",3,"click"],["class","btn btn-primary btn-sm create-button",3,"click",4,"ngIf"],[1,"d-flex","gap-2"],[1,"btn","btn-primary","btn-sm","create-button","btn-disabled",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],[1,"ps-0"],[1,"list-unstyled","d-flex","align-items-center","gap-2"],[1,"material-symbols-outlined"],["target","_blank",3,"href"],[1,"form-group","min-w-200px"],[1,"form-select",3,"ngModel","ngModelChange","change"],["value","","selected","","disabled",""],["value","quoterequests"],["value","finalresponse"],["value","requests",4,"ngIf"],["value","responses",4,"ngIf"],["value","sentresponses"],["value","receivedresponses",4,"ngIf"],["value","requests"],["value","responses"],["value","receivedresponses"],["colspan","12"],[4,"ngFor","ngForOf"],["class","ps-0",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"material-symbols-outlined","d-flex","gap-3"],[1,"loader"],[3,"isOpen","title","closed"],[3,"agentType","quoteId","quoteDetail","alreadyApproved","actionCompleted"],[3,"quoteDetail","agentType","quoteId","actionCompleted"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3,"arrow_back"),e.qZA(),e.TgZ(4,"h2",3),e._uU(5,"View Request"),e.qZA()(),e.TgZ(6,"div",4),e.YNc(7,ci,2,0,"div",5),e.YNc(8,di,2,0,"div",6),e.YNc(9,ui,3,0,"ng-container",7),e.YNc(10,mi,3,0,"ng-container",7),e.TgZ(11,"div",8),e.YNc(12,Ji,89,23,"ng-container",9),e.YNc(13,zi,1,1,"ng-template",null,10,e.W1O),e.YNc(15,Hi,3,0,"ng-container",7),e.qZA()()(),e.YNc(16,ji,5,11,"ng-container",7)),2&n){const r=e.MAs(14);e.xp6(7),e.Q6J("ngIf",("buyerAgent"===o.agentType||"sellerAgent"===o.agentType)&&o.alreadyParticipated&&!o.alreadyApproved),e.xp6(1),e.Q6J("ngIf",o.quoteRejected),e.xp6(1),e.Q6J("ngIf",o.alreadyApproved&&!o.alreadyParticipated),e.xp6(1),e.Q6J("ngIf",o.isQuoteUpdated),e.xp6(2),e.Q6J("ngIf",o.quoteDetail)("ngIfElse",r),e.xp6(3),e.Q6J("ngIf",!o.quoteDetail),e.xp6(1),e.Q6J("ngIf",o.isDataFetched)}},dependencies:[p.mk,p.sg,p.O5,h.rH,u.YN,u.Kr,u.EJ,u.JJ,u.On,ut.RK,Qe.VK,Qe.OP,Qe.p6,Zt,ni,li],styles:[".create-button[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:6px 16px;float:right}  .mdc-list-item__primary-text{display:flex;gap:10px}.participate-enven[_ngcontent-%COMP%]{background-color:green;color:#fff;padding:5px}.reject-enven[_ngcontent-%COMP%]{background-color:red;color:#fff;padding:5px}"]}),a})();function $i(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"li")(1,"span",14),e._uU(2," link "),e.qZA(),e._UZ(3,"input",39),e.TgZ(4,"span",40),e.NdJ("click",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeLink(o))})("keyup.enter",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeLink(o))}),e._uU(5," remove "),e.qZA()()}if(2&a){const i=s.$implicit;e.xp6(3),e.Q6J("formControl",i)}}function Vi(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"li")(1,"span",14),e._uU(2," topic "),e.qZA(),e.TgZ(3,"a",41),e._uU(4),e.qZA(),e.TgZ(5,"span",40),e.NdJ("click",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeDocument(o))})("keyup.enter",function(){const o=e.CHM(i).index,r=e.oxw();return e.KtG(r.removeDocument(o))}),e._uU(6," remove "),e.qZA()()}if(2&a){const i=s.$implicit;e.xp6(3),e.s9C("href",i.value.link,e.LSH),e.xp6(1),e.Oqu(i.value.name)}}function Ki(a,s){1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2,"Agents not selected"),e.qZA()())}function Wi(a,s){if(1&a&&e._UZ(0,"img",47),2&a){const i=e.oxw().$implicit;e.s9C("src",null==i||null==i.the_user||null==i.the_user.data||null==i.the_user.data.entity||null==i.the_user.data.entity.data||null==i.the_user.data.entity.data.person||null==i.the_user.data.entity.data.person.data?null:i.the_user.data.entity.data.person.data.profile_img,e.LSH)}}function Xi(a,s){1&a&&e._UZ(0,"img",48)}function ea(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e.YNc(2,Wi,1,1,"img",45),e.YNc(3,Xi,1,0,"ng-template",null,46,e.W1O),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA()()),2&a){const i=s.$implicit,t=e.MAs(4);e.xp6(2),e.Q6J("ngIf",null==i||null==i.the_user||null==i.the_user.data||null==i.the_user.data.entity||null==i.the_user.data.entity.data||null==i.the_user.data.entity.data.person||null==i.the_user.data.entity.data.person.data?null:i.the_user.data.entity.data.person.data.profile_img)("ngIfElse",t),e.xp6(3),e.AsE(" ",null==i?null:i.the_user.data.entity.data.person.data.first_name," ",null==i?null:i.the_user.data.entity.data.person.data.last_name," "),e.xp6(2),e.hij(" ",null==i?null:i.the_user.data.entity.data.person.data.email," "),e.xp6(2),e.hij(" ",null==i?null:i.the_user.data.entity.data.person.data.phone," ")}}function ta(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",42)(1,"h3"),e._uU(2,"Agents"),e.qZA(),e.TgZ(3,"table",43)(4,"thead")(5,"th"),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Phone"),e.qZA()(),e.TgZ(11,"tbody"),e.YNc(12,Ki,3,0,"tr",38),e.YNc(13,ea,10,6,"tr",16),e.qZA()(),e.TgZ(14,"button",44),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.addAgents())}),e.TgZ(15,"span",14),e._uU(16," person "),e.qZA(),e._uU(17," Add Agents "),e.qZA()()}if(2&a){const i=e.oxw();e.xp6(12),e.Q6J("ngIf",0===i.agentsList.length),e.xp6(1),e.Q6J("ngForOf",i.agentsList)}}function na(a,s){1&a&&(e.TgZ(0,"button",49),e._uU(1," Update Request "),e.qZA())}function ia(a,s){1&a&&(e.ynx(0),e.TgZ(1,"button",50)(2,"div",51)(3,"span",52),e._uU(4,"."),e.qZA()(),e._uU(5," Updating... "),e.qZA(),e.BQk()),2&a&&(e.xp6(1),e.Q6J("disabled",!0))}let aa=(()=>{const s=class{constructor(t,n,o,r,l,c,d,g){this.formBuilder=t,this._itemService=n,this._authService=o,this._snackbarService=r,this._ngbModal=l,this._route=c,this._nodeService=d,this._router=g,this.loader=!1,this.showAgentSection=!0,this.file="",this.fileUrl="",this.agentsList=[],this.isSubmitting=!1,this.updateForm=this.formBuilder.group({title:new u.NI("",[u.kI.required]),description:new u.NI("",[u.kI.required]),documents:this.formBuilder.group({links:this.formBuilder.array([]),files:this.formBuilder.array([])}),startDate:new u.NI("",[u.kI.required]),endDate:new u.NI("",[u.kI.required]),owner:new u.NI("",[u.kI.required]),currency:new u.NI("",[u.kI.required]),budget:new u.NI("",[u.kI.required]),eventType:new u.NI("public",[u.kI.required])});const f=this._authService.loadFromLocalStorage();this.userConceptId=f.userConcept}ngOnInit(){this.toggleAgentSection(),this._route.params.subscribe(t=>{this.id=t.id,this.getQuoteDetails(this.id)})}get linksArray(){return this.updateForm.get("documents.links")}getQuoteDetails(t){this._itemService.getByIdClean(t).subscribe({next:n=>{const o=n.data?.[X.eb],l={...o,id:n.id};this.patchAvailableValues(l)},error:()=>{}})}patchAvailableValues(t){this.updateForm.patchValue({title:t.title,description:t.description,startDate:t.startDate,endDate:t.endDate,owner:t.owner,currency:t.currency,budget:t.budget,eventType:t.eventType});const n=this.updateForm.get("documents.links");n.clear(),t.documents.links.forEach(r=>{n.push(this.formBuilder.control(r))});const o=this.updateForm.get("documents.files");o.clear(),t.documents.files.forEach(r=>{o.push(this.formBuilder.control({name:r.name,link:r.link}))})}addLink(){this.linksArray.push(this.formBuilder.control(""))}removeLink(t){this.linksArray.removeAt(t)}get files(){return this.updateForm.get("documents.files")}addDocument(t){const n=t.target.files;for(let o=0;o<n.length;o++){const r=n.item(o);this.uploadFile(r,r.name)}}uploadFile(t,n){const o=new FormData;o.append("file",t),this._itemService.uploadFile(o).subscribe({next:r=>{const l=r?.data;this.fileUrl=l,this.files.push(this.formBuilder.control({link:l,name:n})),this._snackbarService.openSnackBar("File uploaded successfully","success")},error:r=>{this._snackbarService.openSnackBar(r?.error,"error")}})}removeDocument(t){this.files.removeAt(t)}toggleAgentSection(){const t=this.updateForm.get("eventType");this.showAgentSection="public"!==t.value,this.showAgentSection||(this.agentsId=[],this.agentsList=[])}addAgents(){const t=this._ngbModal.open(dt,{size:"xl"});t.componentInstance.selectedAgent=this.agentsList,t.componentInstance.selectedAgents.subscribe(n=>{this.agentsList=n,this.agentsId=this.agentsList.map(o=>o.the_user?.id)})}updateRequest(){const t={...this.updateForm.value};this.agentsId.length>0&&(t.agentsId=this.agentsId),this.isSubmitting=!0}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(u.qu),e.Y36(Z.e),e.Y36(N.e),e.Y36(G.o),e.Y36(M.FF),e.Y36(h.gz),e.Y36(O.s),e.Y36(h.F0))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-update-request"]],decls:73,vars:6,consts:[[1,"container"],[1,"card","mt-2"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mt-4"],[1,"col-md-12","mb-2"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Title","formControlName","title",1,"form-control","shadow-none","p-2"],["for","description",1,"form-label"],["placeholder","Description","type","text","id","description","formControlName","description",1,"form-control","shadow-none","p-2"],[1,"mt-3"],[1,"d-flex","col-md-12","gap-5"],[1,"col-md-6"],["type","button",1,"link_btn",3,"click"],[1,"material-symbols-outlined"],[1,"document-list"],[4,"ngFor","ngForOf"],["type","file",2,"display","none",3,"change"],["fileInput",""],[1,"document-list","files"],[1,"row"],[1,"col-md-4","mb-2"],["for","startDate",1,"form-label"],["type","date","id","startDate","formControlName","startDate",1,"form-control","shadow-none","p-2"],["for","endDate",1,"form-label"],["type","date","id","endDate","formControlName","endDate",1,"form-control","shadow-none","p-2"],["for","owner",1,"form-label"],["type","text","id","owner","formControlName","owner",1,"form-control","shadow-none","p-2"],["for","currency",1,"form-label"],["type","text","placeholder","USD","id","currency","formControlName","currency",1,"form-control","shadow-none","p-2"],["for","budget",1,"form-label"],["type","number","placeholder","Budget","id","budget","formControlName","budget",1,"form-control","shadow-none","p-2"],["for","eventType",1,"form-label"],["id","eventType","formControlName","eventType",1,"form-select","shadow-none","p-2",3,"change"],["value","public"],["value","private"],["class","mt-3 mb-5",4,"ngIf"],["type","submit","class","btn btn-primary btn-sm create-button",4,"ngIf"],[4,"ngIf"],["type","text","placeholder","https://",1,"form-control","shadow-none","p-2",3,"formControl"],["type","button","tabindex","0",1,"material-symbols-outlined","remove",3,"click","keyup.enter"],["target","_blank",1,"document-link",3,"href"],[1,"mt-3","mb-5"],[1,"table"],["type","button",1,"add_agents",3,"click"],["class","img","alt","",3,"src",4,"ngIf","ngIfElse"],["defaultImage",""],["alt","",1,"img",3,"src"],["src","/assets/man.png","alt","",1,"img"],["type","submit",1,"btn","btn-primary","btn-sm","create-button"],[1,"btn","btn-primary","btn-sm","create-button","btn-disabled",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"]],template:function(n,o){if(1&n){const r=e.EpF();e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Update Request"),e.qZA(),e.TgZ(3,"div",1)(4,"div",2)(5,"form",3),e.NdJ("ngSubmit",function(){return o.updateRequest()}),e.TgZ(6,"div",4)(7,"h3"),e._uU(8,"General Information"),e.qZA(),e.TgZ(9,"div",5)(10,"label",6),e._uU(11,"Title"),e.qZA(),e._UZ(12,"input",7),e.qZA(),e.TgZ(13,"div",5)(14,"label",8),e._uU(15,"Description"),e.qZA(),e._UZ(16,"textarea",9),e.qZA()(),e.TgZ(17,"div",10)(18,"h3"),e._uU(19,"Documents"),e.qZA(),e.TgZ(20,"div",11)(21,"div",12)(22,"button",13),e.NdJ("click",function(){return o.addLink()}),e.TgZ(23,"span",14),e._uU(24," link "),e.qZA(),e._uU(25," Add Links "),e.qZA(),e.TgZ(26,"ul",15),e.YNc(27,$i,6,1,"li",16),e.qZA()(),e.TgZ(28,"div",12)(29,"button",13),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(34);return e.KtG(c.click())}),e.TgZ(30,"span",14),e._uU(31," upload_file "),e.qZA(),e._uU(32," Add Document "),e.qZA(),e.TgZ(33,"input",17,18),e.NdJ("change",function(c){return o.addDocument(c)}),e.qZA(),e.TgZ(35,"ul",19),e.YNc(36,Vi,7,2,"li",16),e.qZA()()()(),e.TgZ(37,"div",10)(38,"h3"),e._uU(39,"Settings"),e.qZA(),e.TgZ(40,"div",20)(41,"div",21)(42,"label",22),e._uU(43,"Start Date"),e.qZA(),e._UZ(44,"input",23),e.qZA(),e.TgZ(45,"div",21)(46,"label",24),e._uU(47,"End Date"),e.qZA(),e._UZ(48,"input",25),e.qZA(),e.TgZ(49,"div",21)(50,"label",26),e._uU(51,"Owner"),e.qZA(),e._UZ(52,"input",27),e.qZA(),e.TgZ(53,"div",21)(54,"label",28),e._uU(55,"Currency"),e.qZA(),e._UZ(56,"input",29),e.qZA(),e.TgZ(57,"div",21)(58,"label",30),e._uU(59,"Budget"),e.qZA(),e._UZ(60,"input",31),e.qZA(),e.TgZ(61,"div",21)(62,"label",32),e._uU(63,"Event Type"),e.qZA(),e.TgZ(64,"select",33),e.NdJ("change",function(){return o.toggleAgentSection()}),e.TgZ(65,"option",34),e._uU(66,"Public"),e.qZA(),e.TgZ(67,"option",35),e._uU(68,"Private"),e.qZA()()()()(),e.YNc(69,ta,18,2,"div",36),e.TgZ(70,"div"),e.YNc(71,na,2,0,"button",37),e.YNc(72,ia,6,1,"ng-container",38),e.qZA()()()()()}2&n&&(e.xp6(5),e.Q6J("formGroup",o.updateForm),e.xp6(22),e.Q6J("ngForOf",o.linksArray.controls),e.xp6(9),e.Q6J("ngForOf",o.files.controls),e.xp6(33),e.Q6J("ngIf",o.showAgentSection),e.xp6(2),e.Q6J("ngIf",!o.isSubmitting),e.xp6(1),e.Q6J("ngIf",o.isSubmitting))},dependencies:[p.sg,p.O5,u._Y,u.YN,u.Kr,u.Fj,u.wV,u.EJ,u.JJ,u.JL,u.oH,u.sg,u.u],styles:["h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.link_btn[_ngcontent-%COMP%]{border:none;background:none;color:#f2709c;display:flex;align-items:center;gap:10px}.link_btn[_ngcontent-%COMP%]:hover{color:#ff9472}.document-list[_ngcontent-%COMP%]{list-style:none;padding:0}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;display:flex;color:#007bff;gap:10px;align-items:center}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{color:red}.document-link[_ngcontent-%COMP%]{text-decoration:none;color:#007bff}.document-link[_ngcontent-%COMP%]:hover{text-decoration:underline}input[type=file][_ngcontent-%COMP%]{display:none}.document-list.files[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #ced4da;padding:5px;border-radius:5px}.create-button[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:6px 16px;float:right}.add_agents[_ngcontent-%COMP%]{border:1px solid #007bff;border-radius:5px;padding:5px;background:none;color:#f2709c;display:flex;align-items:center;gap:10px;color:#007bff}.add_agents[_ngcontent-%COMP%]:hover{color:#ff9472;border:1px solid rgb(255,148,114)}.img[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid #888;border-radius:50%;margin-right:10px}"]}),a})();var mt=_(2340);function oa(a,s){if(1&a&&(e.TgZ(0,"li")(1,"div",13),e._UZ(2,"input",14),e.TgZ(3,"label",15),e._uU(4),e.qZA()()()),2&a){const i=s.$implicit,t=e.oxw(2);e.xp6(2),e.Q6J("id",i.id)("value",i.id)("checked",i.id==t.customPageId),e.xp6(1),e.Q6J("for",i.id),e.xp6(1),e.Oqu(i.title)}}function sa(a,s){if(1&a&&(e.TgZ(0,"ul",11),e.YNc(1,oa,5,5,"li",12),e.qZA()),2&a){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.pages)}}function ra(a,s){1&a&&(e.ynx(0),e.TgZ(1,"p")(2,"i")(3,"b"),e._uU(4,"Fetching pages ...."),e.qZA()()(),e.BQk())}function la(a,s){1&a&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"You don't have any pages created Yet!!"),e.qZA(),e.BQk())}function ca(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.removeCustomPage(!0))}),e._uU(1," Remove Custom Page "),e.qZA()}}function da(a,s){if(1&a&&(e.TgZ(0,"div",13),e.YNc(1,ca,2,0,"button",16),e.TgZ(2,"button",17),e._uU(3,"Confirm Page"),e.qZA()()),2&a){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.customPageId)}}let ua=(()=>{const s=class{constructor(t,n,o){this._authService=t,this._activeModal=n,this._snackbarService=o,this.fetchingPages=!0,this.pages=[],this.setCustomPageForm=new u.cw({customPage:new u.NI})}ngOnInit(){var t=this;return(0,m.Z)(function*(){const n=t._authService.loadFromLocalStorage();t.userConceptId=parseInt(n.userConcept);const o=n?.entityId,r=n?.token;yield t.getExistingCustomPage(),o&&t.fetchAllPages(parseInt(o),r)})()}getExistingCustomPage(){var t=this;return(0,m.Z)(function*(){const n=yield(0,T.$Er)(t.userConceptId,"the_user_custom_invite_page");t.customPageId=n?.[0]?.id,t.customPageId&&t.setCustomPageForm.controls.customPage.setValue(t.customPageId)})()}setCustomPage(){var t=this;return(0,m.Z)(function*(){const n=t.setCustomPageForm.controls.customPage.value;n&&(yield t.removeCustomPage(),yield(0,T.G$0)(yield(0,T.J0M)(t.userConceptId),yield(0,T.J0M)(n),"custom_invite_page"),yield T.smK.SyncDataOnline(),t.customPageId=n,t._snackbarService.openSnackBar("Custom Page Deployed.","success"),t._activeModal.close())})()}removeCustomPage(t=!1){var n=this;return(0,m.Z)(function*(){if(n.customPageId){const o=yield(0,T.kqu)(yield(0,T.J0M)(n.userConceptId),yield(0,T.J0M)(n.customPageId),"","the_user_custom_invite_page");yield(0,T.TAP)(o?.[0]?.id),n.customPageId=void 0,t&&n._activeModal.close()}})()}fetchAllPages(t,n){var o=this;return(0,m.Z)(function*(){const r=new T.LtL;r.name="page",r.typeConnection="the_entity_s_page",r.selectors=["the_page_title"];const l=new T.LtL;l.name="entity",l.conceptIds=[t],l.freeschemaQueries=[r],l.outputFormat=T.Zec,(0,T.og0)(l,n).subscribe(function(){var c=(0,m.Z)(function*(d){console.log("pages",d),o.pages=o.formatPages(d?.[0]?.the_entity?.the_entity_s_page),console.log("formated",o.pages),o.fetchingPages=!1});return function(d){return c.apply(this,arguments)}}())})()}formatProjects(t){const n=[];if(t&&t?.the_entity?.the_entity_s_project?.length>0)for(let o=0;o<t?.the_entity?.the_entity_s_project.length;o++){const r=t?.the_entity?.the_entity_s_project[o];n.push({id:r?.the_project?.id,name:r?.the_project?.data?.the_project_name?.the_name?.data,pages:r?.the_project?.data?.the_project_s_page?.length>0?this.formatPages(r?.the_project?.data?.the_project_s_page):[]})}return n}formatPages(t){const n=[];if(t&&t?.length>0)for(let o=0;o<t.length;o++){const r=t[o];n.push({id:r?.the_page?.id,title:r?.the_page?.data?.the_page_title?.the_title?.data,slug:r?.the_page?.data?.the_page_slug?.the_slug?.data,body:r?.the_page?.data?.the_page_body?.the_widget?.data})}return n}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(N.e),e.Y36(M.Kz),e.Y36(G.o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-custom-landing-page-modal"]],decls:19,vars:5,consts:[[1,"modal-header"],[1,"modal-title","text-capitalize"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"mb-4"],["class","list-unstyled",4,"ngIf"],[4,"ngIf"],["class","d-flex flex-row gap-2",4,"ngIf"],[1,"text-muted"],["href","https://develop.freeschema.com/","target","_blank"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-row","gap-2"],["type","radio","formControlName","customPage",3,"id","value","checked"],[3,"for"],["type","button","class","btn btn-danger py-2",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-danger","py-2",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Select Custom Landing Page"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o._activeModal.dismiss()}),e.qZA()(),e.TgZ(4,"div",3)(5,"form",4),e.NdJ("ngSubmit",function(){return o.setCustomPage()}),e.TgZ(6,"h4",5),e._uU(7,"Choose you page:"),e.qZA(),e.YNc(8,sa,2,1,"ul",6),e.YNc(9,ra,5,0,"ng-container",7),e.YNc(10,la,3,0,"ng-container",7),e.YNc(11,da,4,1,"div",8),e.qZA(),e.TgZ(12,"p",9)(13,"small")(14,"b"),e._uU(15,"Note: "),e.qZA(),e._uU(16," You can create your own page through "),e.TgZ(17,"a",10),e._uU(18,"develop.freeschema.com"),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",o.setCustomPageForm),e.xp6(3),e.Q6J("ngIf",o.pages.length>0),e.xp6(1),e.Q6J("ngIf",o.fetchingPages),e.xp6(1),e.Q6J("ngIf",0==o.pages.length&&!o.fetchingPages),e.xp6(1),e.Q6J("ngIf",o.pages.length>0))},dependencies:[p.sg,p.O5,u._Y,u.Fj,u._,u.JJ,u.JL,u.sg,u.u]}),a})();var ze=_(3259),H=_(2902),gt=_(5412);let It=(()=>{const s=class{constructor(t,n,o){this.dialogRef=t,this._authService=n,this.itemService=o,this.inviteFriendsQRurl="",this.userEmail="",this.userName="",this.userProfileImage="";const r=this._authService.loadFromLocalStorage();this.userConceptId=r?.userConcept,this.userEmail=r?.email,this.userId=r?.theUserId}ngOnInit(){this.createInviteFriendsQR()}recordInviteeData(t){const n=t?.toAddress,o={compositionJsons:[{[X.gc]:{toAddress:n,inviterName:this.userName,inviterEmail:this.userEmail,inviterProfileImage:this.userProfileImage,inviterCode:"",tag:"friend",inviterConceptId:this.userConceptId,timestamp:(new Date).toISOString(),inviterIndentifierCode:t?.identifierCode}}],compositionToJoin:this.userConceptId,direction:"backward",linker:H.Es,both:!0,count:!0,userId:this.userId};this.itemService.createCompositionAndLinkerWithoutAuth(o).subscribe({next:()=>{}})}createInviteFriendsQR(){const t={inviterConceptId:this.userConceptId,inviterEmail:this.userEmail,inviterCode:"",tag:"friend",timestamp:(new Date).toISOString()},n=window.btoa(JSON.stringify(t));let o=window.location.protocol+"//"+window.location.hostname+"/landing";o+=`?ei=${n}`,console.log("inviteURL",o);try{ze.toDataURL(o,{errorCorrectionLevel:"H",width:900,type:"image/jpeg"}).then(r=>{this.inviteFriendsQRurl=r}).catch(r=>{console.error(r)})}catch(r){console.error("Error generating QR code",r)}}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(gt.so),e.Y36(N.e),e.Y36(Z.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-invite-scan-modal"]],decls:9,vars:2,consts:[[1,"dialog-container"],["mat-dialog-content","",1,"p-2"],[1,"level-box","text-center"],[1,"invite-text","mb-0"],["alt","Invite QR","width","120",1,"qr-image","img-fluid","rounded","shadow",3,"src"],["mat-dialog-actions","",1,"download-button","text-center"],["download","Invite friends QR",1,"btn","btn-primary","py-1","mt-1","mb-2",3,"href"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),e._uU(4,"Invite Friends with Your QR Code!"),e.qZA(),e._UZ(5,"img",4),e.qZA()(),e.TgZ(6,"div",5)(7,"a",6),e._uU(8,"Download QR"),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("src",o.inviteFriendsQRurl,e.LSH),e.xp6(2),e.Q6J("href",o.inviteFriendsQRurl,e.LSH))},styles:[".download-button[_ngcontent-%COMP%]{text-align:center;margin:auto}.dialog-container[_ngcontent-%COMP%]{max-width:320px;background-color:#fff;border-radius:12px;box-shadow:0 4px 12px #00000026;padding:1.5rem;position:relative}.qr-image[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:contain}.download-button[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#0d6efd;border:none;font-weight:500;padding:.5rem 1.5rem;font-size:.9rem}.download-button[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#004aad}.close-icon[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:1.2rem;color:#6c757d;cursor:pointer;transition:color .2s}.close-icon[_ngcontent-%COMP%]:hover{color:#343a40}.invite-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#343a40;margin-bottom:1rem}"]}),a})();var Pe=_(2945),ma=_(5463);let ga=(()=>{const s=class{constructor(t,n,o){this._shephard=t,this._auth=n,this._items=o,this.tourStatusComp=Pe.Fz,this.defaultStepOptions={cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",scrollTo:{behavior:"smooth",block:"center"}},this.builtInButtons=[{classes:"back-button",secondary:!0,text:"Back",type:"back",action:()=>{this._shephard.back()}},{classes:"next-button",text:"Next",type:"next",action:()=>{this._shephard.next()}}],this.builtInButtonsStart=[{classes:"next-button",text:"Next",type:"next",action:()=>{this._shephard.next()}}],this.builtInButtonsEnd=[{classes:"back-button",secondary:!0,text:"Back",type:"back",action:()=>{this._shephard.back()}},{classes:"next-button",text:"Finish",type:"cancel",action:()=>{this._shephard.complete()}}]}progressData(){const t=this._shephard.tourObject.getCurrentStep();this.currentStepProgress=`${this._shephard.tourObject?.steps.indexOf(t)+1}/${this._shephard.tourObject?.steps.length}`}getStatusLink(){const t=this._auth.loadFromLocalStorage();this._items.getLink(t?.userConcept,Pe.td+"_s").subscribe({next:n=>{this.tourStatusData=n?.output,this.tourStatusData?.length||this._shephard.start()},error:()=>{}})}initialize(){this._shephard.requiredElements=[],this._shephard.defaultStepOptions=this.defaultStepOptions,this._shephard.modal=!0,this._shephard.confirmCancel=!1,this._shephard.addSteps([{id:"intro",beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtonsStart,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Welcome to Agency Dashboard!",text:["Thank you! for choosing BoomConsole to manage your online content. Find all your saved data and organize them here in <strong>Your Console. </strong>"],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"download",attachTo:{element:".topheader_download_pointer",on:"bottom-start"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Install BoomConsole Extension",text:["Click \u2018Add to Chrome\u2019 to Download BoomConsole Extension from Chrome Web Store. You need Extension first to start saving your Contents. "],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"folders",attachTo:{element:".sidebar .list",on:"bottom"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Manage your Folders",text:["<ul><li>Click on a folder to open its contents.</li><li>Right-click on a folder to create, rename, or delete it.</li><li>Drag and drop your content into the desired folders</ul>"],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"upload_document",attachTo:{element:".sidebar .hea a.text-white",on:"bottom"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Upload Documents",text:["<ul><li>Use the upload icon to add documents and images to your folders.</li><li>Provide descriptions for each upload to keep your content organized.</li></ul>"],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"folder_content",attachTo:{element:".myconsole-main table",on:"bottom"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Folder View Section",text:["This section displays all folders, subfolders, and the titles of contents within the opened folder."],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"filter_data",attachTo:{element:"#filterDropdown",on:"bottom"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Filter Data",text:["Filter your captures to view only the necessary files."],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"search_all_items",attachTo:{element:".top-search-bar",on:"bottom"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtonsEnd,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Search Bar",text:["Use the search bar to find specific captures by typing keywords and hitting ENTER."],when:{show:()=>{this.progressData(),this.tourStatusData?.length||this.completedTourStatus()},hide:()=>{}}}])}AcencyProgramInit(){this._shephard.requiredElements=[],this._shephard.defaultStepOptions=this.defaultStepOptions,this._shephard.modal=!0,this._shephard.confirmCancel=!1,this._shephard.addSteps([{id:"intro",beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtonsStart,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Your Agency Dashboard",text:["Thank you for joining our Agency program. Take advantage of additional features and benefits as a program member."],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"affiliates",attachTo:{element:".friends_dashboard_entry .nav-item:nth-child(1)",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Affiliates Section",text:["Click here to expand your network by inviting contacts using your affiliate and coupon code."],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"folders",attachTo:{element:".friends_dashboard_entry .nav-item:nth-child(2)",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Invitees Section",text:["Keep track of the emails and number of people you have invited."],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"affiliate_code",attachTo:{element:".friends_dashboard_entry .nav-item:nth-child(3)",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Affiliate Code Section",text:["You can create your affiliate code in this section and share the link across your social platforms."],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"filter_data",attachTo:{element:".friends_dashboard_entry .nav-item:nth-child(4)",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Purchases Section",text:["Access details of your subscription package and manage your account."],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"filter_data",attachTo:{element:".friends_dashboard_entry .nav-item:nth-child(5)",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Accounting Section",text:["View the ledger balance of your transactions for transparent accounting."],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"reports",attachTo:{element:".friends_dashboard_entry .nav-item:nth-child(6)",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Report Section",text:["You can see the user which have registered using the affilate code in graph "],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"settings",attachTo:{element:".friends_dashboard_entry .nav-item:nth-child(7)",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Setting Section",text:["Customize your payment plan and update your profile details. "],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"agency",attachTo:{element:".friends_dashboard_entry .nav-item:nth-child(9)",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtonsEnd,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Upgrade Agency Section",text:["You can invite friends to be the agent to upgrade your network"],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"search_all_items",attachTo:{element:".friends_dashboard_entry .nav-item:nth-child(8)",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtonsEnd,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Help Section",text:["Reach out to our team for assistance or guidance."],when:{show:()=>{this.progressData(),this.tourStatusData?.length||this.completedTourStatus()},hide:()=>{}}}])}notAgentYetInit(){this._shephard.requiredElements=[],this._shephard.defaultStepOptions=this.defaultStepOptions,this._shephard.modal=!0,this._shephard.confirmCancel=!1,this._shephard.addSteps([{id:"intro",beforeShowPromise:()=>new Promise(t=>{setTimeout(()=>{window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtonsStart,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Marketing Dashboard",text:["Thank you for joining our Marketing program. From friends panel, you can invite your friends and earn commission."],when:{show:()=>this.progressData(),hide:()=>{}}},{id:"invite_friends",attachTo:{element:".tour-tab-1",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(()=>{window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Invite Friends Section",text:["Easily invite your friends via email or QR code."],when:{show:()=>this.progressData(),hide:()=>{}}},{id:"filter_data",attachTo:{element:".tour-tab-2",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(()=>{window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Become an Agent",text:["Send Request to become a marketing agent"],when:{show:()=>{const t=document.querySelector(".tour-tab-2");t&&t.click(),this.progressData()},hide:()=>{}}},{id:"folder_content",attachTo:{element:".tour-tab-6",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(()=>{window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Accounting",text:["View the ledger balance of your transactions for transparent accounting."],when:{show:()=>{const t=document.querySelector(".tour-tab-6");t&&t.click(),this.progressData()},hide:()=>{}}},{id:"report",attachTo:{element:".tour-tab-7",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Report",text:["Keep a track of your friends and affliate, see it graph and the tree structure of your friends"],when:{show:()=>{const t=document.querySelector(".tour-tab-7");t&&t.click(),this.progressData()},hide:()=>{}}},{id:"friends-level",attachTo:{element:".friends-level",on:"top"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Friends Level",text:["<ul><li><strong>Affiliate:</strong> Track the number of affliate you have directly invited.</li><li><strong>Level 1:</strong> Track the number of friends you have directly invited.</li><li><strong>Level 2:</strong> Monitor the number of invitees your friends have brought in.</li><li><strong>Level 3:</strong> View the invitees of your friends who are actively inviting others.</li></ul>"],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"settings",attachTo:{element:".tour-tab-8",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,20),t(!0)},500)}),buttons:this.builtInButtonsEnd,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Settings",text:["Customize your payment plan and update your profile details."],when:{show:()=>{const t=document.querySelector(".tour-tab-8");t&&t.click(),this.progressData()},hide:()=>{}}}])}FriendsInit(){this._shephard.requiredElements=[],this._shephard.defaultStepOptions=this.defaultStepOptions,this._shephard.modal=!0,this._shephard.confirmCancel=!1,this._shephard.addSteps([{id:"intro",beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtonsStart,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Marketing Dashboard",text:["Thank you for joining our Marketing program. From friends panel, you can invite your friends and earn commission."],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"invite_friends",attachTo:{element:".tour-tab-1",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Invite Friends Section",text:["Easily invite your friends via email or QR code."],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"filter_data",attachTo:{element:".tour-tab-3",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Invite Clients",text:["Easily invite your clients via email using your affliates code. "],when:{show:()=>{const t=document.querySelector(".tour-tab-3");t&&t.click(),this.progressData()},hide:()=>{}}},{id:"folder_content",attachTo:{element:".tour-tab-4",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Affliate Code",text:["Keep track of your friends in each level with graph Keep all the data of your affiliate code"],when:{show:()=>{const t=document.querySelector(".tour-tab-4");t&&t.click(),this.progressData()},hide:()=>{}}},{id:"invite_history",attachTo:{element:".tour-tab-5",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Invite History",text:["See the history of friends or agent you invited"],when:{show:()=>{const t=document.querySelector(".tour-tab-5");t&&t.click(),this.progressData()},hide:()=>{}}},{id:"accounting",attachTo:{element:".tour-tab-6",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Accounting",text:["View the ledger balance of your transactions for transparent accounting."],when:{show:()=>{const t=document.querySelector(".tour-tab-6");t&&t.click(),this.progressData()},hide:()=>{}}},{id:"report",attachTo:{element:".tour-tab-7",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Report",text:["Keep a track of your friends and affliate, see it graph and the tree structure of your friends"],when:{show:()=>{const t=document.querySelector(".tour-tab-7");t&&t.click(),this.progressData()},hide:()=>{}}},{id:"friends-level",attachTo:{element:".friends-level",on:"top"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,0),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Friends Level",text:["<ul><li><strong>Affiliate:</strong> Track the number of affliate you have directly invited.</li><li><strong>Level 1:</strong> Track the number of friends you have directly invited.</li><li><strong>Level 2:</strong> Monitor the number of invitees your friends have brought in.</li><li><strong>Level 3:</strong> View the invitees of your friends who are actively inviting others.</li></ul>"],when:{show:()=>{this.progressData()},hide:()=>{}}},{id:"settings",attachTo:{element:".tour-tab-8",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,20),t(!0)},500)}),buttons:this.builtInButtons,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Settings",text:["Customize your payment plan and update your profile details."],when:{show:()=>{const t=document.querySelector(".tour-tab-8");t&&t.click(),this.progressData()},hide:()=>{}}},{id:"agency",attachTo:{element:".tour-tab-10",on:"right"},beforeShowPromise:()=>new Promise(t=>{setTimeout(function(){window.scrollTo(0,20),t(!0)},500)}),buttons:this.builtInButtonsEnd,cancelIcon:{enabled:!0},classes:"onboarding-boomconsole",highlightClass:"highlight",scrollTo:!1,title:"Upgrade",text:["You can sent the request to upgrade your agency"],when:{show:()=>{const t=document.querySelector(".tour-tab-10");t&&t.click(),this.progressData()},hide:()=>{}}}])}completedTourStatus(){const t=this._auth.loadFromLocalStorage(),n={},o={...this.tourStatusData,completedTour:!0};n[this.tourStatusComp]=o,this._items.create(n).subscribe({next:r=>{this.createStatusLink({compositionId1:t.userConcept,compositionId2:r?.data?.[this.tourStatusComp]?.id,linker:Pe.td})},error:()=>{}})}completedAgencyTourStatus(){const t=this._auth.loadFromLocalStorage(),n={},o={...this.tourStatusData,completedAgencyTour:!0};n[this.tourStatusComp]=o,this._items.create(n).subscribe({next:r=>{this.createStatusLink({compositionId1:t.userConcept,compositionId2:r?.data?.[this.tourStatusComp]?.id,linker:Pe.td})},error:()=>{}})}completedFriendTourStatus(){const t=this._auth.loadFromLocalStorage(),n={},o={...this.tourStatusData,completedFriendTour:!0};n[this.tourStatusComp]=o,this._items.create(n).subscribe({next:r=>{this.createStatusLink({compositionId1:t.userConcept,compositionId2:r?.data?.[this.tourStatusComp]?.id,linker:Pe.td})},error:()=>{}})}createStatusLink(t){this._items.createSemanticConnection(t).subscribe({next:()=>{},error:()=>{}})}startTour(){this._shephard.start()}startAgencyTour(){this._shephard.start()}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.LFG(ma.a),e.LFG(N.e),e.LFG(Z.e))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();var fe=_(4953),be=_(8026),pa=_(7851),le=_(5423),He=_(8372),je=_(1884),_a=_(6367);function ha(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"option",15),e._uU(2),e.qZA(),e.BQk()),2&a){const i=s.$implicit;e.xp6(1),e.Q6J("value",i.affiliate_codes.id),e.xp6(1),e.hij(" ",i.affiliate_codes.data.name," ")}}function fa(a,s){1&a&&(e.TgZ(0,"div",16),e._UZ(1,"span",17),e.qZA())}function ba(a,s){if(1&a&&e._UZ(0,"google-chart",20,21),2&a){const i=e.oxw(2);e.Q6J("type",i.chartType)("data",i.data)("columns",i.columns)("options",i.chartOptions)}}function ya(a,s){1&a&&(e.TgZ(0,"div",22)(1,"div",12)(2,"div",23)(3,"p"),e._uU(4,"You have no user by Affiliate Code"),e.qZA()()()())}function Ca(a,s){if(1&a&&(e.YNc(0,ba,2,4,"google-chart",18),e.YNc(1,ya,5,0,"ng-template",null,19,e.W1O)),2&a){const i=e.MAs(2),t=e.oxw();e.Q6J("ngIf",t.data.length>0)("ngIfElse",i)}}let Ot=(()=>{const s=class{constructor(t,n,o){this._itemService=t,this.affiliateService=n,this.authService=o,this.codeList=[],this.chartData=[],this.userCounts=[],this.loader=!1,this.colorMap={},this.affiliateCodes=[],this.chartForm=new u.cw({fromDate:new u.NI(new Date((new Date).setDate(1)).toISOString().split("T")[0]),toDate:new u.NI(new Date((new Date).setDate((new Date).getDate()+1)).toISOString().split("T")[0])}),this.chartType=be.oX.LineChart,this.data=[],this.columns=["Date","User Registered","Market"],this.btn_active="",this.chartOptions={legend:{position:"bottom"},pointSize:5,hAxis:{title:"Date"},vAxis:{title:" User Registered",logScale:!1}},this.codeLegend={},this.codeColors={},this.selectedCodeId="",this.updatedData={}}ngOnInit(){const t=this.authService.loadFromLocalStorage();this.userConceptId=t?.userConcept,this.getAffiliatesCodes(),this.chartForm.valueChanges.subscribe(()=>{this.getAffiliatesCodes()})}getAffiliatesCodes(){var n,t=this;this.affiliateService.listAffiliateCode().subscribe({next:(n=(0,m.Z)(function*(o){t.affiliateCodes=o.data??[];const r=o?.data?.length??0,l=t.chartForm.value.fromDate??"2024-03-01",c=t.chartForm.value.toDate??"2024-03-29";for(let d=0;d<r;d++){const g=o.data[d];t._itemService.getMarketingStatsCode(g.affiliate_codes.id,l,c).subscribe({next:f=>{t.updateAffilateData(g,f)},error:f=>console.error(f)})}}),function(r){return n.apply(this,arguments)}),error:n=>console.error("Error: ",n),complete:()=>{this.loader=!1}})}updateAffilateData(t,n){this.updatedData[t.affiliate_codes.id]=n.Stats??{},this.renderChart()}renderChart(){const t=this.getDateRangeArray(new Date(this.chartForm.value.fromDate??"2024-03-01"),new Date(this.chartForm.value.toDate??"2024-03-29")),n={};for(const r of t){let l=0;for(const c of this.affiliateCodes)l+=this.updatedData?.[c.affiliate_codes.id]?.[r]??0;n[r]=l}const o=[];if(""===this.selectedCodeId){this.columns=["Date"],this.affiliateCodes.forEach(l=>this.columns.push(l.affiliate_codes.data.name)),this.columns.push("Total Users");const r=this.affiliateCodes.map(l=>l.affiliate_codes.id);t.forEach(l=>{const c=[l];c.push(...this.affiliateCodes.map((d,g)=>this.updatedData?.[r[g]]?.[l]??0)),c.push(n[l]),o.push(c)})}else{const r=this.affiliateCodes.find(l=>l.affiliate_codes.id==this.selectedCodeId);if(r){this.columns=["Affiliate Code",r.affiliate_codes.data.name];const l=r.affiliate_codes.id;t.forEach(c=>{o.push([r.affiliate_codes.data.name,this.updatedData?.[l]?.[c]??0])})}}this.data=o}getDateRangeArray(t,n){const o=new Date(t),r=[];for(;o<=n;){const l=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),d=String(o.getDate()).padStart(2,"0");r.push(`${l}-${c}-${d}`),o.setDate(o.getDate()+1)}return r}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(Z.e),e.Y36(fe.C),e.Y36(N.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-affiliate-dashboard"]],inputs:{affiliateCode:"affiliateCode"},decls:17,vars:5,consts:[[1,"mx-auto","border","rounded","p-3"],[1,"card-header","d-lg-flex","justify-content-between","align-items-center"],[3,"formGroup"],[1,"d-flex","align-items","center","gap-2","mb-3"],["type","date","placeholder","Enter date","formControlName","fromDate",1,"form-control","form-control-sm","py-2",3,"change"],["type","date","placeholder","Enter date","formControlName","toDate",1,"form-control","form-control-sm","py-2",3,"change"],[1,"d-flex","flex-row-reverse"],[1,"form-select-sm","py-2","md-2","shadow-none","select",3,"ngModel","ngModelChange","change"],["value","","selected","",1,"text-secondary"],[4,"ngFor","ngForOf"],[1,"container"],[1,"row"],[1,"col-md-12"],["class","loading",4,"ngIf","ngIfElse"],["loaded",""],[3,"value"],[1,"loading"],[1,"loader"],["style","width: 100%",3,"type","data","columns","options",4,"ngIf","ngIfElse"],["unableToShow",""],[2,"width","100%",3,"type","data","columns","options"],["chart",""],[1,"row","border","rounded","p-3"],[1,"my-5","py-5","text-center"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"input",4),e.NdJ("change",function(){return o.renderChart()}),e.qZA(),e.TgZ(5,"input",5),e.NdJ("change",function(){return o.renderChart()}),e.qZA()()()(),e.TgZ(6,"div",6)(7,"select",7),e.NdJ("ngModelChange",function(l){return o.selectedCodeId=l})("change",function(){return o.renderChart()}),e.TgZ(8,"option",8),e._uU(9,"All Codes"),e.qZA(),e.YNc(10,ha,3,2,"ng-container",9),e.qZA()(),e.TgZ(11,"div",10)(12,"div",11)(13,"div",12),e.YNc(14,fa,2,0,"div",13),e.YNc(15,Ca,3,2,"ng-template",null,14,e.W1O),e.qZA()()()()),2&n){const r=e.MAs(16);e.xp6(2),e.Q6J("formGroup",o.chartForm),e.xp6(5),e.Q6J("ngModel",o.selectedCodeId),e.xp6(3),e.Q6J("ngForOf",o.affiliateCodes),e.xp6(4),e.Q6J("ngIf",o.loader)("ngIfElse",r)}},dependencies:[p.sg,p.O5,be.P4,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.On,u.sg,u.u],styles:[".time-buttons[_ngcontent-%COMP%]{margin-top:20px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:5px;cursor:pointer;font-size:16px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.today-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));padding:4px 17px}.today-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to top,rgb(255,148,114),rgb(242,112,156))}.week-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));padding:4px 17px}.week-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to top,rgb(255,148,114),rgb(242,112,156))}.month-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));padding:4px 17px}.month-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to top,rgb(255,148,114),rgb(242,112,156))}.today-btn[_ngcontent-%COMP%], .week-btn[_ngcontent-%COMP%], .month-btn[_ngcontent-%COMP%]{margin-right:10px;margin-top:10px}.active[_ngcontent-%COMP%]{padding:5px 17px 4px 20px;border-radius:7px;background:transparent;border:1px solid rgb(242,112,156)}.select[_ngcontent-%COMP%]{width:290px;background:white}"]}),a})();var Ge=_(808),ue=_(4128);function va(a,s){if(1&a&&(e.ynx(0),e._UZ(1,"img",8),e.BQk()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==i?null:i.profile_img,e.LSH)}}function xa(a,s){1&a&&e._UZ(0,"img",9)}function Ta(a,s){if(1&a&&(e.TgZ(0,"div")(1,"span",5),e.YNc(2,va,2,1,"ng-container",6),e.YNc(3,xa,1,0,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(5,"p"),e._uU(6),e._UZ(7,"br"),e.TgZ(8,"small"),e._uU(9),e.qZA()()()),2&a){const i=s.$implicit,t=e.MAs(4);e.xp6(2),e.Q6J("ngIf",null==i?null:i.profile_img)("ngIfElse",t),e.xp6(4),e.hij(" ",null==i?null:i.name," "),e.xp6(3),e.Oqu(null==i?null:i.email)}}let wa=(()=>{const s=class{constructor(t){this._activeModal=t}closeModal(){this._activeModal.close()}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(M.Kz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-code-user-modal"]],inputs:{users:"users"},decls:6,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"image_profile"],[4,"ngIf","ngIfElse"],["defaultCover",""],["alt","Personal cover image",1,"img-fluid",3,"src"],["src","https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp","alt","Default cover Image of Greenery",1,"img-fluid"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"User Information"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o._activeModal.dismiss()}),e.qZA()(),e.TgZ(4,"div",3),e.YNc(5,Ta,10,4,"div",4),e.qZA()),2&n&&(e.xp6(5),e.Q6J("ngForOf",o.users))},dependencies:[p.sg,p.O5],styles:[".modal-body[_ngcontent-%COMP%]{height:350px;overflow:auto}.image_profile[_ngcontent-%COMP%]{width:40px;float:left;margin-right:10px}.image_profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}"]}),a})();function Aa(a,s){1&a&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"Looking for data ..."),e.qZA(),e.BQk())}function Ma(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"a",10),e.NdJ("click",function(){const o=e.CHM(i).$implicit,r=e.oxw(4);return e.KtG(r.openUserInfoModal(o.userInfo))})("keyup",function(){const o=e.CHM(i).$implicit,r=e.oxw(4);return e.KtG(r.openUserInfoModal(o.userInfo))}),e._uU(7," visibility "),e.qZA()()()}if(2&a){const i=s.$implicit;e.xp6(2),e.Oqu(i.name),e.xp6(2),e.Oqu(i.registeredUserCount||0),e.xp6(2),e.Udp("pointer-events",0===i.registeredUserCount?"none":"auto"),e.ekj("disabled",0===i.registeredUserCount)}}function ka(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",7)(2,"table",8)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"Affiliate Code Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Affiliates Count"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"View"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,Ma,8,6,"tr",9),e.qZA()()(),e.BQk()),2&a){const i=e.oxw(3);e.xp6(12),e.Q6J("ngForOf",i.codeList)}}function Pa(a,s){1&a&&(e.TgZ(0,"p"),e._uU(1,"No codes available."),e.qZA())}function Za(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,ka,13,1,"ng-container",5),e.YNc(2,Pa,2,0,"ng-template",null,6,e.W1O),e.qZA()),2&a){const i=e.MAs(3),t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.codeList.length>0)("ngIfElse",i)}}function Ia(a,s){if(1&a&&(e.TgZ(0,"div",1)(1,"div",2),e.YNc(2,Aa,3,0,"ng-container",3),e.TgZ(3,"div",4),e.YNc(4,Za,4,2,"div",3),e.qZA()()()),2&a){const i=e.oxw();e.xp6(2),e.Q6J("ngIf",i.looking),e.xp6(2),e.Q6J("ngIf",!i.looking)}}let Oa=(()=>{const s=class{ngOnInit(){const t=this.authService.loadFromLocalStorage();this.userConceptId=t?.userConcept,this.checkUserAgentType(),this.updateTabSelection.emit(this.active),this.getRegisteredUsersForThisCode()}constructor(t,n,o,r,l){this.modalService=t,this.authService=n,this._itemService=o,this.affiliateService=r,this._snackbar=l,this.codeList=[],this.userAgentType="",this.isInviteesLoading=!1,this.isCheckingUserStatus=!1,this.isUserAgent=!1,this.userAgentRate="",this.isCodeLoading=!0,this.looking=!1,this.agentCouponList=[],this.showChartAgency=!1,this.updateTabSelection=new e.vpe,this.currentUserInfo=[],this.isModalOpen=!1}updateLinkWithCoupon(t,n){var o=this;return(0,m.Z)(function*(){const r=t.target.value;n.isCouponSelected=!0;let l=window.location.protocol+"//"+window.location.hostname+"/landing";l+=`?bc=${n?.code}&cc=${r}`,o.inviteWithCouponURL=l,n.inviteLink=l;const c=o.createQR(l);n.qrImg=c})()}getRegisteredUsersForThisCodeLink(t){return new Promise(n=>{const o=new T.LtL;o.typeConnection="the_entity_user",o.reverse=!0,o.name="reverse",o.selectors=["the_entity_firstname","the_entity_lastname","the_entity_email","the_entity_avatar"];const r=new T.LtL;r.typeConnection="affiliate_codes_s_onboarded_user_s",r.selectors=["self"],r.name="user",r.freeschemaQueries=[o];const l=new T.LtL;l.outputFormat=T.yu5,l.conceptIds=[t],l.name="top",l.freeschemaQueries=[r],(0,T.og0)(l,"").subscribe(c=>{const d=c?.[0]?.affiliate_codes?.affiliate_codes_s_onboarded_user_s?.length||0,g=c?.[0]?.affiliate_codes?.affiliate_codes_s_onboarded_user_s?.map(f=>{const y=f?.the_user;return{name:y?.the_entity_user_reverse?.the_entity?.the_entity_firstname?.the_firstname?`${y.the_entity_user_reverse.the_entity.the_entity_firstname.the_firstname} ${y.the_entity_user_reverse.the_entity.the_entity_lastname.the_lastname}`:y?.the_entity?.the_person?.first_name?`${y.the_entity.the_person.first_name} ${y.the_entity.the_person.last_name}`:y?.the_entity?.session?.first_name?`${y.the_entity.session.first_name} ${y.the_entity.session.last_name}`:"User",email:y?.the_entity_user_reverse?.the_entity?.the_entity_email?.the_email||y?.the_entity?.the_person?.email||y?.the_entity?.session?.email||y?.the_user_data?.primary_email||"no email",profile_img:y?.the_entity_user_reverse?.the_entity?.the_entity_avatar?.the_avatar||y?.the_entity?.the_person?.avatar||y?.the_entity?.session?.avatar}})||[];n({count:d,users:g})})})}getRegisteredUsersForThisCode(){var t=this;return(0,m.Z)(function*(){if(t.looking=!0,t.isCodeLoading=!0,t.codeList&&t.codeList.length)try{(yield Promise.all(t.codeList.map(o=>t.getRegisteredUsersForThisCodeLink(o.id)))).forEach((o,r)=>{t.codeList[r].registeredUserCount=o.count,t.codeList[r].userInfo=o.users})}catch(n){console.error("Error fetching registered users:",n)}finally{t.looking=!1,t.isCodeLoading=!1}else t.isCodeLoading=!1})()}viewUserInfo(t){this.codeList[t].showUserInfo=!this.codeList[t].showUserInfo}openUserInfoModal(t){this.modalService.open(wa,{size:"sm"}).componentInstance.users=t}checkUserAgentType(){this.isInviteesLoading=!0,this.isCheckingUserStatus=!0,this._itemService.getSemanticConnection({compositionId:this.userConceptId,linker:"isAgent_s"}).subscribe({next:n=>{const o=n?.output?.filter(r=>r?.data?.marketingAgent_agent);if(this.marketingAgentId=o?.[0]?.id,n.output&&Array.isArray(n.output)&&n.output.length>0){const r=n.output.reduce((d,g)=>{const f=Date.parse(d.data[Object.keys(d.data)[0]].timestamp);return Date.parse(g.data[Object.keys(g.data)[0]].timestamp)>f?g:d},n.output[0]);this.isUserAgent=!0;const l=Object.keys(n?.output[0]?.data)[0],c=r?.data?.agent_request_info?.agentType.split(/(?=[A-Z])/);this.userAgentType=c?.map(d=>d[0].toUpperCase()+d.slice(1)).join(" "),this.userAgentRate=n?.output[0]?.data[l].rate,this.getCouponCodes(),this.listAffiliateCodes(),this.getMyAffiliates()}},complete:()=>{}})}getCouponCodes(){const t=(new Date).toISOString().split("T")[0],o=[{composition:this.userConceptId,listLinkers:["couponcode_to_marketingAgents_by"],inpage:10,page:1,logic:"or",filterSearches:[{type:"RedeemBy",search:t,logicoperator:">"}]}];(0,ue.D)([this._itemService.searchLinkMultipleAll([{composition:this.marketingAgentId,listLinkers:["couponcode_to_marketingAgents_by"],inpage:10,page:1,logic:"or",filterSearches:[{type:"RedeemBy",search:t,logicoperator:">"}]}]),this._itemService.searchLinkMultipleAll(o)]).subscribe({next:([r,l])=>{const g=[...r?.marketingAgent_agent?.marketingAgent_agent_s_couponcode_to_marketingAgents_by?.map(y=>y?.CoupounData?.data)||[],...l?.the_user?.the_user_s_couponcode_to_marketingAgents_by?.map(y=>y?.CoupounData?.data)||[]];let f=g.map(y=>y?.products?.data).flat();f=[...new Set(f)].map(y=>Number(y)),(0,T.EHb)(f).then(y=>{this.agentCouponList=g.map(k=>(k.products=k.products.data.map(Y=>y.filter(P=>Number(Y)===P?.id)),k))})}})}getAgentRate(t){const n=t+"_agent";this._itemService.searchAPIClean({compositionName:n,searchKey:t}).subscribe({next:r=>{this.userAgentRate=r?.[0]?.[n]?.rate}})}listAffiliateCodes(){var n,t=this;this.affiliateService.listAffiliateCode().subscribe({next:(n=(0,m.Z)(function*(o){null!==o&&(t.codeList=o.data?.map(r=>(r.affiliate_codes.data.isCouponSelected=!1,{...r.affiliate_codes?.data,id:r.affiliate_codes?.id})),t.codeList=t.codeList.sort((r,l)=>{const c=r.name.toLowerCase(),d=l.name.toLowerCase();return c<d?-1:d>c?1:0})),t.codeList=yield Promise.all(t.codeList?.map(function(){var r=(0,m.Z)(function*(l){const c={...l};let d=window.location.protocol+"//"+window.location.hostname+"/landing";d+=`?bc=${c?.code}`,c.inviteLink=d;const g=yield t.createQR(d);return c.qrImg=g,c});return function(l){return r.apply(this,arguments)}}())),t.getRegisteredUsersForThisCode(),t.isCodeLoading=!1,t.isCheckingUserStatus=!1}),function(r){return n.apply(this,arguments)}),complete:()=>{}})}createQR(t){return new Promise(n=>{try{const l=ze.toDataURL(t,{errorCorrectionLevel:"H",width:900,type:"image/jpeg"}),c=Ge.loadImage("./assets/logo-for-qr.png");Promise.all([l,c]).then(([d,g])=>{const f=Ge.createCanvas(200,200),y=f.getContext("2d"),k=new Image;k.onload=()=>{y.drawImage(k,0,0,200,200),y.drawImage(g,75,75,50,50);const W=f.toDataURL("image/png");n(W)},k.src=d}).catch(d=>{console.error(d)})}catch(o){console.error("Error generating QR code",o)}})}getMyAffiliates(){this._itemService.searchLinkMultipleAll([{composition:this.userConceptId,listLinkers:["affiliate_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{listLinkers:["bought_s"],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:n=>{n.the_user.the_user_s_affiliate_s&&n?.the_user?.the_user_s_affiliate_s.map(r=>{const l=r?.the_user?.data,c=r?.the_user?.the_user_s_bought_s;let d=[];return c&&c.length>0&&(d=c.map(f=>{const y=f?.internal_sales_item?.data,k=y?.productId,Y=(y.commissionRate||0)/100,V=Number(y?.price)/100*Y,P=Number(y?.price)/100,W=Number(this.userAgentRate)/100,ne=Number((V*W).toFixed(2)),ee={price:P,reward:Number(ne)};return k&&(ee.productId=k),ee})),{name:`${l?.entity?.data?.person?.data?.first_name} ${l?.entity?.data?.person?.data?.last_name}`,email:l?.user_data?.data?.primary_email,affiliateBuys:d}})},complete:()=>{}})}copyCode(t){const o=t.target.parentNode.parentNode.parentNode.querySelector("code.agent-code").textContent;navigator?.clipboard?.writeText(o)}copyLink(t){const o=t.target.parentNode.parentNode.parentNode.querySelector("code.agent-invite-link").textContent;navigator?.clipboard?.writeText(o)}copyLinkWithCoupon(t){const o=t.target.parentNode.parentNode.parentNode.querySelector("code.agent-invite-link-coupon").textContent;navigator?.clipboard?.writeText(o)}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(M.FF),e.Y36(N.e),e.Y36(Z.e),e.Y36(fe.C),e.Y36(G.o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-code-table"]],inputs:{affiliateCode:"affiliateCode",active:"active"},outputs:{updateTabSelection:"updateTabSelection"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],[4,"ngIf"],[1,"col-md-12"],[4,"ngIf","ngIfElse"],["noCode",""],[1,"fixed-table"],[1,"table","fixed_layout"],[4,"ngFor","ngForOf"],["tabindex","",1,"material-symbols-outlined",3,"click","keyup"]],template:function(n,o){1&n&&e.YNc(0,Ia,5,2,"div",0),2&n&&e.Q6J("ngIf",!o.isCodeLoading)},dependencies:[p.sg,p.O5],styles:[".btn-custom[_ngcontent-%COMP%]{border:1px solid #dedede;background-color:#fff;font-size:.875rem;padding:.25rem 1rem;color:#666;display:flex;align-items:center;gap:.25rem}.btn-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.25rem}.btn-custom[_ngcontent-%COMP%]:hover, .btn-custom[_ngcontent-%COMP%]:focus{background-color:#dedede}.user_registered[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00f}.code-copy[_ngcontent-%COMP%]{background-color:#eee;border-radius:6px;display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem}.code-copy[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#666}a.disabled[_ngcontent-%COMP%]{color:gray;cursor:not-allowed}.btn-close[_ngcontent-%COMP%]{cursor:pointer}.scrollable-tbody[_ngcontent-%COMP%]{max-height:50vh;overflow-y:auto}.fixed-table[_ngcontent-%COMP%]{overflow:auto;border-radius:0;max-height:calc(60vh - 118px)}.fixed-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background-color:#ccc}.dropdown_menu[_ngcontent-%COMP%]{left:-170px!important;top:-100px!important}.dropdown-menu[_ngcontent-%COMP%]{width:220px;padding:10px;font-size:14px;font-weight:400;height:auto;max-height:150px;overflow:auto}.dropdown-menu[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:auto;padding:8px 0;border-bottom:1px solid #ddd;line-height:16px}@media only screen and (max-width: 600px){.user_registered[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:static}.user_registered[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;top:10px!important}.btn_update[_ngcontent-%COMP%]{margin-top:10px}.btn_update[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.invite-qr[_ngcontent-%COMP%]{border:2px solid rgb(242,112,156);border-radius:5px;margin-bottom:10px}"]}),a})();var Sa=_(3900);function qa(a,s){1&a&&(e.TgZ(0,"div",15),e._UZ(1,"div",16),e.qZA())}function Fa(a,s){1&a&&(e.TgZ(0,"span",27),e._uU(1,"Not Available"),e.qZA())}function Ea(a,s){1&a&&(e.TgZ(0,"span",28),e._uU(1,"Pending Approval"),e.qZA())}function Da(a,s){1&a&&(e.TgZ(0,"span",29),e._uU(1,"Available"),e.qZA())}function Na(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(i);const n=e.oxw().$implicit,o=e.oxw(3);return e.KtG(o.requestClaimAffiliate(n))}),e._uU(1," Request Claim "),e.qZA()}}function Ua(a,s){1&a&&(e.TgZ(0,"button",31),e._UZ(1,"span",16),e._uU(2," Requesting... "),e.qZA())}function Ra(a,s){1&a&&(e.TgZ(0,"span",32),e._uU(1,"-"),e.qZA())}function La(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.ynx(6,20),e.YNc(7,Fa,2,0,"span",21),e.YNc(8,Ea,2,0,"span",22),e.YNc(9,Da,2,0,"span",23),e.BQk(),e.qZA(),e.TgZ(10,"td"),e.YNc(11,Na,2,0,"button",24),e.YNc(12,Ua,3,0,"button",25),e.YNc(13,Ra,2,0,"span",26),e.qZA()()),2&a){const i=s.$implicit,t=e.oxw(3);e.xp6(2),e.Oqu(i.name),e.xp6(2),e.Oqu(i.email),e.xp6(2),e.Q6J("ngSwitch",i.affiliateStatus),e.xp6(1),e.Q6J("ngSwitchCase","affiliated"),e.xp6(1),e.Q6J("ngSwitchCase","pending"),e.xp6(1),e.Q6J("ngSwitchCase","available"),e.xp6(2),e.Q6J("ngIf","available"===i.affiliateStatus&&!t.isClaiming[i.id]),e.xp6(1),e.Q6J("ngIf",t.isClaiming[i.id]),e.xp6(1),e.Q6J("ngIf","available"!==i.affiliateStatus)}}function Ba(a,s){if(1&a&&(e.TgZ(0,"table",18)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Email"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Status"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Action"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,La,14,9,"tr",19),e.qZA()()),2&a){const i=e.oxw(2);e.xp6(12),e.Q6J("ngForOf",i.getUsersToDisplay().searchUsers)}}function Ya(a,s){if(1&a&&(e.TgZ(0,"div",34),e._uU(1),e.qZA()),2&a){const i=e.oxw(3);e.xp6(1),e.hij(' No users found matching "',i.searchQuery,'". ')}}function Ja(a,s){if(1&a&&e.YNc(0,Ya,2,1,"div",33),2&a){const i=e.oxw(2);e.Q6J("ngIf",i.hasSearched&&i.searchQuery)}}function Qa(a,s){if(1&a&&(e.TgZ(0,"div",11)(1,"h3",12),e._uU(2,"Search Results"),e.qZA(),e.YNc(3,Ba,13,1,"table",13),e.YNc(4,Ja,1,1,"ng-template",null,17,e.W1O),e.qZA()),2&a){const i=e.MAs(5),t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.getUsersToDisplay().searchUsers.length)("ngIfElse",i)}}function za(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span"),e._uU(7),e.qZA()()()),2&a){const i=s.$implicit;e.xp6(2),e.Oqu(i.name),e.xp6(2),e.Oqu(i.email),e.xp6(2),e.Gre("status-badge ","pending"===i.affiliateStatus?"pending":"affiliated",""),e.xp6(1),e.hij(" ",i.affiliateStatus," ")}}function Ha(a,s){if(1&a&&(e.TgZ(0,"table",18)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Email"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Status"),e.qZA()()(),e.TgZ(9,"tbody"),e.YNc(10,za,8,6,"tr",19),e.qZA()()),2&a){const i=e.oxw();e.xp6(10),e.Q6J("ngForOf",i.getUsersToDisplay().requestedUsers)}}function ja(a,s){1&a&&(e.TgZ(0,"div",34),e._uU(1,"No affiliate claims requested yet."),e.qZA())}let Ga=(()=>{const s=class{constructor(t,n){var r,o=this;this.nodeService=t,this._auth=n,this.searchQuery="",this.searchResults=[],this.requestedClaims=[],this.isSearching=!1,this.isClaiming={},this.hasSearched=!1,this.searchTerms=new de.x,this.searchTerms.pipe((0,He.b)(300),(0,je.x)(),(0,Sa.w)(r=>(this.isSearching=!0,this.hasSearched=!0,this.nodeService.AISearchUser(r,1,5)))).subscribe({next:(r=(0,m.Z)(function*(l){o.entityId=o._auth.loadFromLocalStorage()?.entityId;const c=l.filter(d=>d.entity_id&&d.entity_id!=o.entityId).map(d=>({id:d.id.toString(),entityId:d.entity_id,name:d.entity_id&&d.the_entity_firstname&&"undefined"!==d.the_entity_firstname?`${d.the_entity_firstname} ${d.the_entity_lastname}`.trim():`${d.first_name||""} ${d.last_name||""}`.trim(),email:d.email||""}));for(const d of c){const g=yield o.checkAlreadyAnAffiliateOfOther(d.entityId),f=o.requestedClaims.some(y=>y.entityId==d.entityId);d.affiliateStatus=g.isAffiliate||g.isFriend?"affiliated":f?"pending":"available"}o.searchResults=c.filter(d=>d.name.toLowerCase().includes(o.searchQuery.toLowerCase())||d.email.toLowerCase().includes(o.searchQuery.toLowerCase())||d.id.includes(o.searchQuery)),o.isSearching=!1}),function(c){return r.apply(this,arguments)}),error:r=>{console.error("Search error:",r),this.isSearching=!1,this.hasSearched=!0}})}ngOnInit(){this.entityId=this._auth.loadFromLocalStorage()?.entityId,this.getAffiliatesRequested()}searchUsers(){if(!this.searchQuery.trim())return this.searchResults=[],void(this.hasSearched=!1);this.searchTerms.next(this.searchQuery)}checkAlreadyAnAffiliateOfOther(t){return new Promise(n=>{const o=new T.LtL;o.typeConnection="the_entity_s_affiliate_by",o.isOldConnectionType=!0,o.name="entity";const r=new T.LtL;r.typeConnection="the_entity_s_affiliate_s",r.reverse=!0,r.name="entity1";const l=new T.LtL;l.typeConnection="the_entity_s_friend_by",l.isOldConnectionType=!0,l.name="entity4";const c=new T.LtL;c.typeConnection="the_entity_s_friend_s",c.reverse=!0,c.name="entity2";const d=new T.LtL;d.conceptIds=[parseInt(t)],d.name="top",d.freeschemaQueries=[o,l,r,c],d.outputFormat=T.xY7,(0,T.og0)(d,"").subscribe(g=>{n({isAffiliate:!!g?.[0]?.data?.the_entity?.the_entity_s_affiliate_by?.[0]?.id||!!g?.[0]?.data?.the_entity?.the_entity_s_affiliate_s_reverse?.[0].id,isFriend:!!g?.[0]?.data?.the_entity?.the_entity_s_friend_by?.[0]?.id||!!g?.[0]?.data?.the_entity?.the_entity_s_friend_s_reverse?.[0]?.id})})})}requestClaimAffiliate(t){var n=this;return(0,m.Z)(function*(){try{n.isClaiming[t.id]=!0;const o=n._auth.loadFromLocalStorage()?.theUserId,r={status:"pending"},l=yield(0,T.J0M)(Number(n.entityId)),c=yield(0,T.J0M)(Number(t?.entityId)),d=yield(0,T.Fsb)("the_affiliate_claim","",!0,Number(o),4,999);for(const[g,f]of Object.entries(r)){const y=g,k=yield(0,T.Fsb)(`${y}`,`${f}`,!1,Number(o),4,999);yield(0,T.G$0)(d,k,y)}yield(0,T.G$0)(l,d,"s_affiliate_claim"),yield(0,T.G$0)(d,c,"user"),yield T.smK.SyncDataOnline(),n.isClaiming[t.id]=!1,t.affiliateStatus="pending",n.requestedClaims.push({...t}),n.getAffiliatesRequested()}catch(o){console.error(o,"Error in claim affiliates"),n.isClaiming[t.id]=!1}})()}getUsersToDisplay(){return{searchUsers:this.searchQuery.trim()&&this.hasSearched?this.searchResults:[],requestedUsers:this.requestedClaims}}getAffiliatesRequested(){var t=this;return(0,m.Z)(function*(){try{const n=yield t.fetchRequestedClaims();t.requestedClaims=n.map(o=>({id:o.id||"",entityId:o.entityId||"",name:o.name,email:o.email,affiliateStatus:o.status}))}catch(n){console.error("Error fetching requested claims:",n)}})()}fetchRequestedClaims(){return new Promise(t=>{const n=new T.LtL;n.typeConnection="the_affiliate_claim_user",n.selectors=["the_entity_firstname","the_entity_lastname","the_entity_email"];const o=new T.LtL;o.typeConnection="the_entity_s_affiliate_claim",o.name="affiliate",o.selectors=["the_affiliate_claim_status","the_affiliate_claim_user"],o.freeschemaQueries=[n];const r=new T.LtL;r.conceptIds=[this.entityId],r.name="top",r.freeschemaQueries=[o],r.outputFormat=T.xY7,(0,T.og0)(r,"").subscribe(l=>{const d=l?.[0]?.data?.the_entity?.the_entity_s_affiliate_claim?.map(g=>{const f=g?.data?.the_affiliate_claim?.the_affiliate_claim_status?.data?.the_status,y=g?.data?.the_affiliate_claim?.the_affiliate_claim_user?.data?.the_entity?.the_entity_email?.data?.the_email;return{id:"",entityId:g?.data?.the_affiliate_claim?.the_affiliate_claim_user?.id,name:`${g?.data?.the_affiliate_claim?.the_affiliate_claim_user?.data?.the_entity?.the_entity_firstname?.data?.the_firstname} ${g?.data?.the_affiliate_claim?.the_affiliate_claim_user?.data?.the_entity?.the_entity_lastname?.data?.the_lastname}`,email:y,status:f}})||[];t(d)})})}ngOnDestroy(){this.searchTerms.complete()}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(O.s),e.Y36(N.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-claim-affiliates"]],decls:20,vars:5,consts:[[1,"claim-affiliates-container"],[1,"section-title"],[1,"search-card"],[1,"search-form"],[1,"form-group"],["for","searchInput"],[1,"search-input-wrapper"],["type","text","id","searchInput","placeholder","search..",1,"form-input",3,"ngModel","ngModelChange","input"],[1,"material-symbols-outlined","search-icon"],["class","loading-overlay",4,"ngIf"],["class","results-container",4,"ngIf"],[1,"results-container"],[1,"section-subtitle"],["class","users-table",4,"ngIf","ngIfElse"],["noRequested",""],[1,"loading-overlay"],[1,"spinner"],["noResults",""],[1,"users-table"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","status-badge affiliated",4,"ngSwitchCase"],["class","status-badge pending",4,"ngSwitchCase"],["class","status-badge available",4,"ngSwitchCase"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-primary btn-loading","disabled","",4,"ngIf"],["class","action-disabled",4,"ngIf"],[1,"status-badge","affiliated"],[1,"status-badge","pending"],[1,"status-badge","available"],[1,"btn","btn-primary",3,"click"],["disabled","",1,"btn","btn-primary","btn-loading"],[1,"action-disabled"],["class","no-data",4,"ngIf"],[1,"no-data"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Claim Affiliates"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Search Users"),e.qZA(),e.TgZ(8,"div",6)(9,"input",7),e.NdJ("ngModelChange",function(l){return o.searchQuery=l})("input",function(){return o.searchUsers()}),e.qZA(),e.TgZ(10,"span",8),e._uU(11,"search"),e.qZA()()()(),e.YNc(12,qa,2,0,"div",9),e.YNc(13,Qa,6,2,"div",10),e.TgZ(14,"div",11)(15,"h3",12),e._uU(16,"Requested Claims"),e.qZA(),e.YNc(17,Ha,11,1,"table",13),e.YNc(18,ja,2,0,"ng-template",null,14,e.W1O),e.qZA()()()),2&n){const r=e.MAs(19);e.xp6(9),e.Q6J("ngModel",o.searchQuery),e.xp6(3),e.Q6J("ngIf",o.isSearching),e.xp6(1),e.Q6J("ngIf",!o.isSearching&&o.searchQuery),e.xp6(4),e.Q6J("ngIf",o.getUsersToDisplay().requestedUsers.length)("ngIfElse",r)}},dependencies:[p.sg,p.O5,p.RF,p.n9,u.Fj,u.JJ,u.On],styles:[".claim-affiliates-container[_ngcontent-%COMP%]{max-width:1000px;margin:2rem auto;padding:0 1rem}.section-title[_ngcontent-%COMP%]{font-size:1.75rem;color:#2c3e50;text-align:center}.section-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;color:#34495e;margin:2rem 0 1rem}.search-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:1.5rem;position:relative}.search-form[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}label[_ngcontent-%COMP%]{font-weight:500;color:#34495e}.search-input-wrapper[_ngcontent-%COMP%]{position:relative}.form-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 2.5rem .75rem 1rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border-color .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px #3498db33}.search-icon[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);color:#888;font-size:1.25rem}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.1);display:flex;justify-content:center;align-items:center;z-index:10}.spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border:3px solid #f3f3f3;border-top:3px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.results-container[_ngcontent-%COMP%]{margin-top:1.5rem}.results-container[_ngcontent-%COMP%] + .results-container[_ngcontent-%COMP%]{margin-top:2.5rem;border-top:1px solid #eee;padding-top:2rem}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #eee}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f1f3f5;color:#495057;font-weight:600}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#555}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.875rem;font-weight:500}.status-badge.affiliated[_ngcontent-%COMP%]{background:#ffebee;color:#c0392b}.status-badge.pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e67e22}.status-badge.available[_ngcontent-%COMP%]{background:#e8f5e9;color:#27ae60}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:4px;font-weight:500;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;gap:.5rem}.btn-primary[_ngcontent-%COMP%]{background:#3498db;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2980b9}.btn-loading[_ngcontent-%COMP%]{opacity:.6}.btn[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:2px;border-color:#fff;border-top-color:transparent}.action-disabled[_ngcontent-%COMP%]{color:#999;font-style:italic}.no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#777;font-style:italic}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;font-size:.875rem}.btn[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.875rem}}@media (max-width: 480px){.claim-affiliates-container[_ngcontent-%COMP%]{padding:0 .5rem}.section-title[_ngcontent-%COMP%]{font-size:1.5rem}.users-table[_ngcontent-%COMP%]{display:block;overflow-x:auto}}"]}),a})();var St=_(6613);const $a=["acc"];function Va(a,s){1&a&&(e.TgZ(0,"div",2),e._UZ(1,"span",3),e.qZA())}function Ka(a,s){if(1&a&&e._UZ(0,"google-chart",20,21),2&a){const i=e.oxw(3);e.Q6J("type",i.chartType)("data",i.data)("columns",i.columns)("options",i.chartOptions)}}function Wa(a,s){1&a&&(e.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"p"),e._uU(4,"You have no friends yet."),e.qZA()()()())}function Xa(a,s){if(1&a&&(e.TgZ(0,"h3",12),e._uU(1,"Friends"),e.qZA(),e.TgZ(2,"div",13)(3,"div",14)(4,"div",15),e.YNc(5,Ka,2,4,"google-chart",16),e.YNc(6,Wa,5,0,"ng-template",null,17,e.W1O),e.qZA()()(),e.TgZ(8,"div",18)(9,"h3",19),e._uU(10,"Affiliate"),e.qZA(),e._UZ(11,"app-affiliate-dashboard"),e.qZA()),2&a){const i=e.MAs(7),t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.data.length>0)("ngIfElse",i)}}function eo(a,s){if(1&a&&(e.ynx(0),e._UZ(1,"img",45),e.BQk()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==i?null:i.profile_img,e.LSH)("alt",(null==i?null:i.name)+" profile image")}}function to(a,s){1&a&&e._UZ(0,"img",46)}function no(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",42),e.YNc(5,eo,2,2,"ng-container",43),e.YNc(6,to,1,0,"ng-template",null,44,e.W1O),e._uU(8),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&a){const i=s.$implicit,t=s.index,n=e.MAs(7);e.xp6(2),e.Oqu(t+1),e.xp6(3),e.Q6J("ngIf",null==i?null:i.profile_img)("ngIfElse",n),e.xp6(3),e.hij(" ",null==i?null:i.name," "),e.xp6(2),e.Oqu(i.email)}}function io(a,s){1&a&&(e.ynx(0),e.TgZ(1,"div",47)(2,"p",48),e._uU(3,"There is no affiliate."),e.qZA()(),e.BQk())}function ao(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",34)(1,"h2"),e._uU(2,"Affiliates"),e.qZA(),e.TgZ(3,"div",35)(4,"input",36),e.NdJ("ngModelChange",function(n){e.CHM(i);const o=e.oxw(3);return e.KtG(o.searchText=n)})("input",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.filterAffiliates())}),e.qZA()(),e.TgZ(5,"div",37)(6,"div",38)(7,"table",39)(8,"thead")(9,"tr")(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Email"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,no,11,5,"tr",40),e.qZA()()()(),e.YNc(18,io,4,0,"ng-container",41),e.qZA()}if(2&a){const i=e.oxw(3);e.xp6(4),e.Q6J("ngModel",i.searchText),e.xp6(13),e.Q6J("ngForOf",i.filteredAffiliates),e.xp6(1),e.Q6J("ngIf",0===(null==i.filteredAffiliates?null:i.filteredAffiliates.length))}}function oo(a,s){if(1&a&&(e.ynx(0),e._UZ(1,"img",45),e.BQk()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==i?null:i.profile_img,e.LSH)("alt",(null==i?null:i.name)+" profile image")}}function so(a,s){1&a&&e._UZ(0,"img",46)}function ro(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",42),e.YNc(5,oo,2,2,"ng-container",43),e.YNc(6,so,1,0,"ng-template",null,44,e.W1O),e._uU(8),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&a){const i=s.$implicit,t=s.index,n=e.MAs(7);e.xp6(2),e.Oqu(t+1),e.xp6(3),e.Q6J("ngIf",null==i?null:i.profile_img)("ngIfElse",n),e.xp6(3),e.hij(" ",null==i?null:i.name," "),e.xp6(2),e.Oqu(null==i?null:i.email)}}function lo(a,s){1&a&&(e.ynx(0),e.TgZ(1,"div",47)(2,"p"),e._uU(3,"No data available."),e.qZA()(),e.BQk())}function co(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",34)(1,"h2"),e._uU(2,"Level 1"),e.qZA(),e.TgZ(3,"div",35)(4,"input",49),e.NdJ("ngModelChange",function(n){e.CHM(i);const o=e.oxw(3);return e.KtG(o.searchTextFirstLevel=n)})("input",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.filterFirstLevelFriends())}),e.qZA()(),e.TgZ(5,"div",37)(6,"div",38)(7,"table",39)(8,"thead")(9,"tr")(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Email"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,ro,11,5,"tr",40),e.qZA()()()(),e.YNc(18,lo,4,0,"ng-container",41),e.qZA()}if(2&a){const i=e.oxw(3);e.xp6(4),e.Q6J("ngModel",i.searchTextFirstLevel),e.xp6(13),e.Q6J("ngForOf",i.filteredFirstLevelFriends),e.xp6(1),e.Q6J("ngIf",0===i.filteredFirstLevelFriends.length)}}function uo(a,s){if(1&a&&(e.ynx(0),e._UZ(1,"img",45),e.BQk()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==i?null:i.profile_img,e.LSH)("alt",(null==i?null:i.name)+" profile image")}}function mo(a,s){1&a&&e._UZ(0,"img",46)}function go(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",42),e.YNc(5,uo,2,2,"ng-container",43),e.YNc(6,mo,1,0,"ng-template",null,44,e.W1O),e._uU(8),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&a){const i=s.$implicit,t=s.index,n=e.MAs(7);e.xp6(2),e.Oqu(t+1),e.xp6(3),e.Q6J("ngIf",null==i?null:i.profile_img)("ngIfElse",n),e.xp6(3),e.hij(" ",null==i?null:i.name," "),e.xp6(2),e.Oqu(null==i?null:i.email)}}function po(a,s){1&a&&(e.ynx(0),e.TgZ(1,"div",47)(2,"p"),e._uU(3,"No data available."),e.qZA()(),e.BQk())}function _o(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",34)(1,"h2"),e._uU(2,"Level 2"),e.qZA(),e.TgZ(3,"div",35)(4,"input",50),e.NdJ("ngModelChange",function(n){e.CHM(i);const o=e.oxw(3);return e.KtG(o.searchTextSecondLevel=n)})("input",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.filterSecondLevelFriends())}),e.qZA()(),e.TgZ(5,"div",37)(6,"div",38)(7,"table",39)(8,"thead")(9,"tr")(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Email"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,go,11,5,"tr",40),e.qZA()()()(),e.YNc(18,po,4,0,"ng-container",41),e.qZA()}if(2&a){const i=e.oxw(3);e.xp6(4),e.Q6J("ngModel",i.searchTextSecondLevel),e.xp6(13),e.Q6J("ngForOf",i.filteredSecondLevelFriends),e.xp6(1),e.Q6J("ngIf",0===i.filteredSecondLevelFriends.length)}}function ho(a,s){if(1&a&&(e.ynx(0),e._UZ(1,"img",45),e.BQk()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==i?null:i.profile_img,e.LSH)("alt",(null==i?null:i.name)+" profile image")}}function fo(a,s){1&a&&e._UZ(0,"img",46)}function bo(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",42),e.YNc(5,ho,2,2,"ng-container",43),e.YNc(6,fo,1,0,"ng-template",null,44,e.W1O),e._uU(8),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"UTCToLocalTime"),e.qZA()()),2&a){const i=s.$implicit,t=s.index,n=e.MAs(7),o=e.oxw(4);e.xp6(2),e.Oqu(t+1),e.xp6(3),e.Q6J("ngIf",null==i?null:i.profile_img)("ngIfElse",n),e.xp6(3),e.hij(" ",null==i?null:i.name," "),e.xp6(2),e.Oqu(null==i?null:i.email),e.xp6(2),e.Oqu(e.lcZ(13,6,null==o.friends?null:o.friends.created_at))}}function yo(a,s){1&a&&(e.ynx(0),e.TgZ(1,"div",47)(2,"p"),e._uU(3,"No data available."),e.qZA()(),e.BQk())}function Co(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",34)(1,"h2"),e._uU(2,"Level 3"),e.qZA(),e.TgZ(3,"div",35)(4,"input",51),e.NdJ("ngModelChange",function(n){e.CHM(i);const o=e.oxw(3);return e.KtG(o.searchTextThirdLevel=n)})("input",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.filterThirdLevelFriends())}),e.qZA()(),e.TgZ(5,"div",37)(6,"div",38)(7,"table",39)(8,"thead")(9,"tr")(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Email"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,bo,14,8,"tr",40),e.qZA()()()(),e.YNc(18,yo,4,0,"ng-container",41),e.qZA()}if(2&a){const i=e.oxw(3);e.xp6(4),e.Q6J("ngModel",i.searchTextThirdLevel),e.xp6(13),e.Q6J("ngForOf",i.filteredThirdLevelFriends),e.xp6(1),e.Q6J("ngIf",0===i.filteredThirdLevelFriends.length)}}function vo(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",25)(1,"div",26)(2,"a",27),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.toggleAffiliatesTable())})("keyup",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.toggleAffiliatesTable())}),e.TgZ(3,"div",28)(4,"p"),e._uU(5,"Affiliates"),e.qZA(),e.TgZ(6,"h3"),e._uU(7),e.qZA()()()(),e.TgZ(8,"div",26)(9,"a",27),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.toggleLevel1Friends())})("keyup",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.toggleLevel1Friends())}),e.TgZ(10,"div",29)(11,"p"),e._uU(12,"Level 1 Friends"),e.qZA(),e.TgZ(13,"h3"),e._uU(14),e.qZA()()()(),e.TgZ(15,"div",26)(16,"a",27),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.toggleLevel2Friends())})("keyup",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.toggleLevel2Friends())}),e.TgZ(17,"div",30)(18,"p"),e._uU(19,"Level 2 Friends"),e.qZA(),e.TgZ(20,"h3"),e._uU(21),e.qZA()()()(),e.TgZ(22,"div",31)(23,"a",27),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.toggleLevel3Friends())})("keyup",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.toggleLevel3Friends())}),e.TgZ(24,"div",32)(25,"p"),e._uU(26,"Level 3 Friends"),e.qZA(),e.TgZ(27,"h3"),e._uU(28),e.qZA()()()()(),e.YNc(29,ao,19,3,"div",33),e.YNc(30,co,19,3,"div",33),e.YNc(31,_o,19,3,"div",33),e.YNc(32,Co,19,3,"div",33)}if(2&a){const i=e.oxw(2);e.xp6(3),e.ekj("open",i.isAffiliatesTableVisible),e.xp6(4),e.Oqu((null==i.myAffiliates?null:i.myAffiliates.length)||0),e.xp6(3),e.ekj("open",i.isFriendsTableVisible),e.xp6(4),e.Oqu(null==i.friendListData||null==i.friendListData.firstLevel?null:i.friendListData.firstLevel.length),e.xp6(3),e.ekj("open",i.isFriends2TableVisible),e.xp6(4),e.Oqu(null==i.friendListData||null==i.friendListData.secondLevel?null:i.friendListData.secondLevel.length),e.xp6(3),e.ekj("open",i.isFriends3TableVisible),e.xp6(4),e.Oqu(null==i.friendListData||null==i.friendListData.thirdLevel?null:i.friendListData.thirdLevel.length),e.xp6(1),e.Q6J("ngIf",i.isAffiliatesTableVisible),e.xp6(1),e.Q6J("ngIf",i.isFriendsTableVisible),e.xp6(1),e.Q6J("ngIf",i.isFriends2TableVisible),e.xp6(1),e.Q6J("ngIf",i.isFriends3TableVisible)}}function xo(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div")(1,"p"),e._uU(2,"You don't have any friends yet."),e.qZA(),e.TgZ(3,"p")(4,"a",57),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(4);return e.KtG(n.gotoCreateFriend())})("keyup",function(){e.CHM(i);const n=e.oxw(4);return e.KtG(n.gotoCreateFriend())}),e._uU(5,"Invite Friend"),e.qZA()()()}}function To(a,s){if(1&a&&e._UZ(0,"img",64),2&a){const i=e.oxw().$implicit;e.Q6J("src",i.profile_img,e.LSH)}}function wo(a,s){1&a&&e._UZ(0,"img",65)}function Ao(a,s){if(1&a&&(e.TgZ(0,"mat-tree-node",58)(1,"a",59)(2,"span",60),e.YNc(3,To,1,1,"img",61),e.YNc(4,wo,1,0,"ng-template",null,62,e.W1O),e.qZA(),e._uU(6),e.TgZ(7,"span",63),e._uU(8),e.qZA()()()),2&a){const i=s.$implicit,t=e.MAs(5);e.xp6(3),e.Q6J("ngIf",i.profile_img)("ngIfElse",t),e.xp6(3),e.hij(" ",i.name," "),e.xp6(2),e.hij("(",i.email,")")}}function Mo(a,s){if(1&a&&e._UZ(0,"img",64),2&a){const i=e.oxw().$implicit;e.Q6J("src",i.profile_img,e.LSH)}}function ko(a,s){1&a&&e._UZ(0,"img",65)}function Po(a,s){if(1&a&&(e.TgZ(0,"mat-nested-tree-node")(1,"div",66)(2,"button",67)(3,"span",68),e._uU(4),e.qZA()(),e.TgZ(5,"a",69)(6,"span",60),e.YNc(7,Mo,1,1,"img",61),e.YNc(8,ko,1,0,"ng-template",null,62,e.W1O),e.qZA(),e._uU(10),e.TgZ(11,"span",63),e._uU(12),e.qZA()()(),e.TgZ(13,"div",70),e.GkF(14,71),e.qZA()()),2&a){const i=s.$implicit,t=e.MAs(9),n=e.oxw(4);e.xp6(2),e.uIk("aria-label","Toggle "+i.name),e.xp6(2),e.hij(" ",n.treeControl.isExpanded(i)?"expand_more":"chevron_right"," "),e.xp6(1),e.Q6J("routerLink","/bm/"+i.id),e.xp6(2),e.Q6J("ngIf",i.profile_img)("ngIfElse",t),e.xp6(3),e.hij(" ",i.name," "),e.xp6(2),e.hij("(",i.email,")"),e.xp6(1),e.ekj("example-tree-invisible",!n.treeControl.isExpanded(i))}}function Zo(a,s){if(1&a&&(e.TgZ(0,"div",53)(1,"div",23),e.YNc(2,xo,6,0,"div",41),e.TgZ(3,"mat-tree",54),e.YNc(4,Ao,9,4,"mat-tree-node",55),e.YNc(5,Po,15,9,"mat-nested-tree-node",56),e.qZA()()()),2&a){const i=e.oxw(3);e.xp6(2),e.Q6J("ngIf",!(null!=i.TREE_DATA&&i.TREE_DATA.length)),e.xp6(1),e.Q6J("dataSource",i.dataSource)("treeControl",i.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",i.hasChild)}}function Io(a,s){if(1&a&&(e.TgZ(0,"div")(1,"h3",12),e._uU(2,"All Friends"),e.qZA(),e.YNc(3,Zo,6,4,"div",52),e.qZA()),2&a){const i=e.oxw(2);e.xp6(3),e.Q6J("ngIf",i.TREE_DATA)}}function Oo(a,s){1&a&&e._UZ(0,"app-code-table")}function So(a,s){1&a&&(e.TgZ(0,"li",7)(1,"a",8),e._uU(2,"Affiliate Code"),e.qZA(),e.YNc(3,Oo,1,0,"ng-template",9),e.qZA()),2&a&&e.Q6J("ngbNavItem",4)}function qo(a,s){1&a&&e._UZ(0,"app-claim-affiliates")}function Fo(a,s){1&a&&(e.TgZ(0,"li",7)(1,"a",8),e._uU(2,"Claim Affiliates"),e.qZA(),e.YNc(3,qo,1,0,"ng-template",9),e.qZA()),2&a&&e.Q6J("ngbNavItem",5)}function Eo(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",4)(1,"ul",5,6),e.NdJ("navChange",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.updateNav(n))}),e.TgZ(3,"li",7)(4,"a",8),e._uU(5,"Dashboard"),e.qZA(),e.YNc(6,Xa,12,2,"ng-template",9),e.qZA(),e.TgZ(7,"li",7)(8,"a",8),e._uU(9,"Friends"),e.qZA(),e.YNc(10,vo,33,16,"ng-template",9),e.qZA(),e.TgZ(11,"li",7)(12,"a",8),e._uU(13,"Hierarchy"),e.qZA(),e.YNc(14,Io,4,1,"ng-template",9),e.qZA(),e.YNc(15,So,4,1,"li",10),e.YNc(16,Fo,4,1,"li",10),e.qZA(),e._UZ(17,"div",11),e.qZA()}if(2&a){const i=e.MAs(2),t=e.oxw();e.xp6(1),e.Q6J("activeId",t.settingPageTab),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(4),e.Q6J("ngbNavItem",3),e.xp6(4),e.Q6J("ngIf",t.isMarketingAgent),e.xp6(1),e.Q6J("ngIf",t.isMarketingAgent),e.xp6(1),e.Q6J("ngbNavOutlet",i)}}let Do=(()=>{const s=class{toggleChartVisibility(){this.showChart=!this.showChart}constructor(t,n,o){this.itemService=t,this._authService=n,this._marketingService=o,this.updateTabSelection=new e.vpe,this.updateSettingTab=new e.vpe,this.childrenAttr="the_user_s_friend_s",this.childrenEntityAttrs="the_entity_s_friend_s",this.baseSiteUrl=mt.N.baseDomain,this.showChart=!0,this.showChartAgency=!1,this.panelStates={friends:!1,agency:!1},this.loader=!1,this.freindsList=[],this.isInviteSending=!1,this.isTemplateValid=!0,this.isInviteEmailValid=!1,this.inviteList=[],this.invalidMessage="",this.userName="",this.userEmail="",this.userProfileImage="",this.invitedAffiliateCode="",this.invitedList=[],this.myAffiliates=[],this.isInviteesLoading=!1,this.isEmailChecking=!1,this.affiliatesList=[],this.userAgentRate="",this.totalReward=0,this.codeList=[],this.isCodeLoading=!0,this.agentCouponList=[],this.friendsList=[],this.isBalanceViewable=!0,this.myFriends=[],this.isUserAgent=!1,this.isAffiliatesTableVisible=!0,this.friends=[],this.isFriendsTableVisible=!1,this.isFriends2TableVisible=!1,this.isFriends3TableVisible=!1,this.Secondfriends=[],this.Thirdfriends=[],this.affiliateUser=new de.x,this.searchTerm="",this.searchTextFirstLevel="",this.searchTextSecondLevel="",this.searchTextThirdLevel="",this.firstLevelFriends=[],this.secondLevelFriends=[],this.thirdLevelFriends=[],this.showTree=!1,this.agentType="",this.isMarketingAgent=!1,this.agentTypeName="",this.searchAffliateUsers=r=>this.affiliateUser.next(r.target.value),this.activeHistoryTab=1,this.totalRemainingReward=0,this.withdrawalList=[],this.isWithdrawAlreadyRequested=!0,this.requestedAmount=0,this.chartType=be.oX.BarChart,this.data=[],this.columns=["Label","Friends",{role:"style"}],this.chartOptions={title:"Friends in each Levels",width:"80%",height:300,bar:{groupWidth:"95%"},legend:{position:"none"},intervals:1},this.friendListData=[],this.TREE_DATA=[],this.searchText="",this.treeControl=new pa.VY(r=>r.children),this.dataSource=new le.WX,this.hasChild=(r,l)=>!!l.children&&l.children.length>0,this.affiliateUser.pipe((0,He.b)(300),(0,je.x)()).subscribe({next:r=>{this.searchAffiliateUser(r)}})}ngOnInit(){this.updateTabSelection.emit(this.active);const t=this._authService.loadFromLocalStorage();this.userConceptId=t?.userConcept,this.entityId=t?.entityId,t&&(this.userEmail=t?.email),this.checkuserAgentType(),this.getMyAffiliates()}toggleTreeVisibility(){this.showTree=!this.showTree,this.isAffiliatesTableVisible=!1}togglePanel(t,n){this.panelStates[t]=n}removeFromInviteList(t){this.inviteList=this.inviteList.filter(n=>n!==t)}updateNav(t){this.settingPageTab=t?.nextId,this.updateSettingTab.emit(this.settingPageTab)}gotoCreateFriend(){this.active=1,this.updateTabSelection.emit(this.active)}addInviteList(t){this.isEmailChecking=!0,this.isInviteEmailValid=!1,this.invalidMessage="Please enter valid email";const n=t.target.parentNode.parentNode.parentNode.querySelector('input[type="email"]'),o=n.value,l=o.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/);if(""===o||!l||this.inviteList.includes(o))return this.isInviteEmailValid=!0,this.isEmailChecking=!1,void(this.inviteList.includes(o)&&(this.invalidMessage="Email is already in list above"));this.itemService.searchComposition("the_user",o,"primary_email").subscribe({next:c=>{this.isEmailChecking=!1,0===c.length?(this.inviteList.push(n.value),n.value="",this.isEmailChecking=!1):(this.isInviteEmailValid=!0,this.invalidMessage="The user already has an account")},error:c=>{this.isEmailChecking=!1,this.isInviteEmailValid=!1,console.error(c)},complete:()=>{}})}searchAffiliateUser(t){var n=this;return(0,m.Z)(function*(){if(n.searchTerm=t,t.trim()){const o={composition:n.userConceptId,listLinkers:[`${H.Xv}_s`],textSearch:t},r=yield(0,T.zAo)(Number(o?.composition),[`${H.Xv}_s`],"");r&&(n.myAffiliates=r.map(c=>({email:c.data.the_user.user_data.primary_email||(c.parent[0]?.data.the_user.entity.person||{}).email||"",created_at:c.created_at||""})))}else n.getMyAffiliates()})()}searchAffiliateByEmail(t){return this.myAffiliates.find(n=>n.email===t)||null}getMyAffiliates(){var t=this;return(0,m.Z)(function*(){try{const n=yield t._marketingService.getAffiliates(t.userConceptId,t.entityId);t.myAffiliates=n,t.filteredAffiliates=n,t.getFriendsLists()}catch(n){console.error("Error in getMyAffiliates:",n)}})()}filterAffiliates(){if(!this.myAffiliates||0===this.myAffiliates.length)return void(this.filteredAffiliates=[]);const t=this.searchText?.trim().toLowerCase();this.filteredAffiliates=this.myAffiliates?.filter(n=>n.email?.trim().toLowerCase().includes(t))}getFriendsLists(){var t=this;return(0,m.Z)(function*(){const n=yield t._marketingService.getFriendsLists(t.userConceptId,t.entityId);t.friendListData=n,t.friends=n?.firstLevel.map(c=>{const d=c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||c?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.first_name?.data?.the_first_name,g=c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||c?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.last_name?.data?.the_last_name;return{name:d&&g?`${d} ${g}`:d||g||"Unknown Name",email:c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_email?.data?.the_email||c?.data?.the_entity?.the_entity_email?.data?.the_email||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.email?.data?.the_email||c?.data?.the_user?.the_user_data?.data?.the_user_data?.primary_email?.data?.the_primary_email||"No Email",profile_img:c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||c?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.profile_img?.data?.the_profile_img}}),t.filteredFirstLevelFriends=t.friends,t.Secondfriends=n?.secondLevel.map(c=>{const d=c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||c?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.first_name?.data?.the_first_name,g=c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||c?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.last_name?.data?.the_last_name;return{name:d&&g?`${d} ${g}`:d||g||"Unknown Name",email:c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_email?.data?.the_email||c?.data?.the_entity?.the_entity_email?.data?.the_email||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.email?.data?.the_email||c?.data?.the_user?.the_user_data?.data?.the_user_data?.primary_email?.data?.the_primary_email||"No Email",profile_img:c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||c?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.profile_img?.data?.the_profile_img}}),t.filteredSecondLevelFriends=t.Secondfriends,t.Thirdfriends=n?.thirdLevel.map(c=>{const d=c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||c?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.first_name?.data?.the_first_name,g=c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||c?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.last_name?.data?.the_last_name;return{name:d&&g?`${d} ${g}`:d||g||"Unknown Name",email:c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_email?.data?.the_email||c?.data?.the_entity?.the_entity_email?.data?.the_email||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.email?.data?.the_email||c?.data?.the_user?.the_user_data?.data?.the_user_data?.primary_email?.data?.the_primary_email||"No Email",profile_img:c?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||c?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||c?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.profile_img?.data?.the_profile_img}}),t.filteredThirdLevelFriends=t.Thirdfriends,t.data=[["Level 1",n?.firstLevel?.length,"#b87333"],["Level 2",n?.secondLevel?.length,"gold"],["Level 3",n?.thirdLevel.length,"silver"]];const o=t.convertSearchDataToTree(n?.firstLevel),r=t.convertSearchDataToTree(n?.secondLevel),l=t.convertSearchDataToTree(n?.thirdLevel);t.TREE_DATA=[{name:"Level 1",children:o},{name:"Level 2",children:r},{name:"Level 3",children:l}].flatMap(c=>c.children||[]),console.log("tree data",o),t.dataSource.data=t.TREE_DATA})()}checkuserAgentType(){this.itemService.getSemanticConnection({compositionId:this.userConceptId,linker:"isAgent_s"}).subscribe({next:n=>{if(n.output&&Array.isArray(n.output)&&n.output.length>0){const o=n.output.reduce((c,d)=>{const g=Date.parse(c.created_at);return Date.parse(d.created_at)>g?d:c},n.output[0]);let r="";const l=Object.keys(o.data);for(const c of l)if(c.includes("agent")){r=o.data[c].agentType;break}this.agentType=r.replace("_agent",""),this.isMarketingAgent="marketingAgent"==this.agentType||"buyerAgent"==this.agentType||"sellerAgent"==this.agentType||"listingAgent"==this.agentType||"seller"==this.agentType||"buyer"==this.agentType,this.agentTypeName=this.agentType.split(/(?=[A-Z])/).join(" "),this.agentTypeName=this.agentTypeName.toLowerCase(),(void 0===this.agentType||"buyerAgent"!==this.agentType&&"sellerAgent"!==this.agentType&&"seller"!==this.agentType)&&(this.agentType="buyer")}}})}filterFirstLevelFriends(){const t=this.searchTextFirstLevel.trim().toLowerCase();this.filteredFirstLevelFriends=""===t?this.friends:this.friends.filter(n=>n.email&&n.email.toLowerCase().includes(t)||n.email&&n.email.toLowerCase().includes(t))}filterSecondLevelFriends(){this.filteredSecondLevelFriends=""===this.searchTextSecondLevel.trim()?this.Secondfriends:this.Secondfriends.filter(t=>t.email&&t.email.toLowerCase().includes(this.searchTextSecondLevel.toLowerCase()))}filterThirdLevelFriends(){this.filteredThirdLevelFriends=""===this.searchTextThirdLevel.trim()?this.Thirdfriends:this.Thirdfriends.filter(t=>t.email&&t.email.toLowerCase().includes(this.searchTextThirdLevel.toLowerCase()))}convertSearchDataToTree(t){return t?.length?t.map(n=>{const o=n?.data?.the_entity,r=n?.data?.the_user;let l="",c="",d="",g="";l=r?.the_entity_user_reverse?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||o?.the_entity_firstname?.data?.the_firstname||r?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.first_name?.data?.the_first_name||"",c=r?.the_entity_user_reverse?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||o?.the_entity_lastname?.data?.the_lastname||r?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.last_name?.data?.the_last_name||"",d=r?.the_entity_user_reverse?.data?.the_entity?.the_entity_email?.data?.the_email||o?.the_entity_email?.data?.the_email||r?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.email?.data?.the_email||r?.the_user_data?.data?.the_user_data?.primary_email?.data?.the_primary_email||"No Email",g=r?.the_entity_user_reverse?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||o?.the_entity_avatar?.data?.the_avatar||r?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.profile_img?.data?.the_profile_img;const f={name:l&&c?`${l} ${c}`:l||c||"Unknown Name",email:d,profile_img:g},y=[...o?.the_entity_s_friend_s?this.convertSearchDataToTree(o?.the_entity_s_friend_s):[],...r?.the_user_s_friend_s?this.convertSearchDataToTree(r?.the_user_s_friend_s):[]];return y.length?{...f,children:y}:f}):[]}toggleAffiliatesTable(){this.isFriends2TableVisible=!1,this.isFriends3TableVisible=!1,this.isFriendsTableVisible=!1,this.isAffiliatesTableVisible=!0}toggleLevel2Friends(){this.isAffiliatesTableVisible=!1,this.isFriendsTableVisible=!1,this.isFriends3TableVisible=!1,this.isFriends2TableVisible=!0}toggleLevel3Friends(){this.isAffiliatesTableVisible=!1,this.isFriendsTableVisible=!1,this.isFriends2TableVisible=!1,this.isFriends3TableVisible=!0}toggleLevel1Friends(){this.isAffiliatesTableVisible=!1,this.isFriends2TableVisible=!1,this.isFriends3TableVisible=!1,this.isFriendsTableVisible=!0}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(Z.e),e.Y36(N.e),e.Y36(_a.f))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-friends-panel-dashboard"]],viewQuery:function(n,o){if(1&n&&(e.Gf($a,5),e.Gf(be.P4,5)),2&n){let r;e.iGM(r=e.CRH())&&(o.acc=r.first),e.iGM(r=e.CRH())&&(o.chart=r.first)}},inputs:{active:"active",settingPageTab:"settingPageTab"},outputs:{updateTabSelection:"updateTabSelection",updateSettingTab:"updateSettingTab"},decls:3,vars:2,consts:[["class","loading",4,"ngIf","ngIfElse"],["loaded",""],[1,"loading"],[1,"loader"],[1,"mf-main"],["ngbNav","",1,"nav-tabs","mf-tabs",3,"activeId","navChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavItem",4,"ngIf"],[1,"mt-2",3,"ngbNavOutlet"],[1,"mb-0","tab-titles","mt-4"],[1,"mx-auto","border","rounded","p-3"],[1,"card","single-property","project_details"],[1,"card-body","p-0"],["style","width: 80%",3,"type","data","columns","options",4,"ngIf","ngIfElse"],["unableToShowfriends",""],[1,"col-md-12","mt-4"],[1,"mb-0","tab-titles"],[2,"width","80%",3,"type","data","columns","options"],["chart",""],[1,"row","border","rounded","p-3"],[1,"col-md-12"],[1,"my-5","py-5","text-center"],[1,"row","my-0","friends-level","mt-4"],[1,"col-md-3"],["tabindex","",3,"click","keyup"],[1,"level-box"],[1,"level-box","box_level1_friends"],[1,"level-box","box_level2_friends"],[1,"col-md-3","text-center"],[1,"level-box","box_level3_friends"],["class","row mt-4 affiliate-table-all",4,"ngIf"],[1,"row","mt-4","affiliate-table-all"],[1,"search"],["type","text","placeholder","Search invited email...",3,"ngModel","ngModelChange","input"],[1,"fixed-table"],[1,"table","fixed_layout"],[1,"table","affiliate-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"following-image"],[4,"ngIf","ngIfElse"],["defaultProfileImg",""],[1,"img-fluid",3,"src","alt"],["src","https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp","alt","Profile Image",1,"img-fluid"],[1,"m-3","p-3","d-flex","align-items-center","justify-content-center","text-center"],[1,"my-3"],["type","text","placeholder","Search Level 1 friends...",3,"ngModel","ngModelChange","input"],["type","text","placeholder","Search Level 2 friends...",3,"ngModel","ngModelChange","input"],["type","text","placeholder","Search Level 3 friends...",3,"ngModel","ngModelChange","input"],["class","row mentor_friends_tree",4,"ngIf"],[1,"row","mentor_friends_tree"],[1,"example-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["tabindex","",1,"btn","btn-primary",3,"click","keyup"],["matTreeNodeToggle",""],["target","_blank"],[1,"profile_img"],["alt","",3,"src",4,"ngIf","ngIfElse"],["noProfileImage",""],[1,"profile_email"],["alt","",3,"src"],["alt","","src","./assets/man.png"],[1,"mat-tree-node"],["mat-icon-button","","matTreeNodeToggle","",1,"toggle_button"],[1,"material-symbols-outlined"],["target","_blank",3,"routerLink"],["role","group"],["matTreeNodeOutlet",""]],template:function(n,o){if(1&n&&(e.YNc(0,Va,2,0,"div",0),e.YNc(1,Eo,18,7,"ng-template",null,1,e.W1O)),2&n){const r=e.MAs(2);e.Q6J("ngIf",o.loader)("ngIfElse",r)}},dependencies:[p.sg,p.O5,h.rH,be.P4,M.uN,M.Pz,M.nv,M.Vx,M.tO,u.Fj,u.JJ,u.On,le.GZ,le.fQ,le.eu,le.gi,le.uo,le.Ar,ut.RK,Ot,Oa,Ga,St.u],styles:['.tab-titles[_ngcontent-%COMP%]{color:#fd7088;font-size:1.5rem;font-weight:700}.hello[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;border-color:#f0f8ff;font-size:30px}.friends-graph[_ngcontent-%COMP%]{border:none;border-radius:20px;background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));padding:9px 15px}.friends-tree[_ngcontent-%COMP%]{background:white;padding:9px 15px;color:#000;border:1px solid #fd7088;border-radius:20px}.level-box[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:.5rem;padding:1rem;text-align:center}.level-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fd7088;font-weight:500;font-size:20px}.level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{opacity:.8}.friends-level[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}.friends-level[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .friends-level[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .level-box.open[_ngcontent-%COMP%]{background-color:#fefbea}mat-tree[_ngcontent-%COMP%]{background:none}mat-tree[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}mat-tree[_ngcontent-%COMP%], mat-nested-tree-node[_ngcontent-%COMP%], mat-tree-node[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{position:relative}mat-tree-node[_ngcontent-%COMP%]:before, mat-nested-tree-node[_ngcontent-%COMP%]:before, mat-tree-node[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:before, mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]:before{content:"";width:10px;display:block;position:absolute;background:url(/assets/dot.svg) left top/2px 2px}mat-tree-node[_ngcontent-%COMP%]:before, mat-nested-tree-node[_ngcontent-%COMP%]:before{top:0;height:100%;background-repeat:repeat-y;left:14px}mat-tree-node[_ngcontent-%COMP%]:last-child:before{height:50%}mat-nested-tree-node[_ngcontent-%COMP%]:last-child:before{height:10px}mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]:before{left:40px}mat-tree-node[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:before{top:12px;height:calc(100% - 8px);background-repeat:repeat-x;left:-15px}.mat-tree-node[_ngcontent-%COMP%]{min-height:auto;position:relative;padding-left:31px;display:block;width:100%}.mat-tree-node[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:inherit;font-weight:700}.mat-tree-node[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;left:31px;top:7px;z-index:10}.mat-tree-node[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;display:block;padding-left:0;font-size:16px;text-wrap:nowrap;text-overflow:ellipsis;height:auto;line-height:normal;padding-bottom:12px}.mat-tree-node[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .profile_email[_ngcontent-%COMP%]{display:block;font-size:14px;color:#777}.mat-tree-node[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .profile_img[_ngcontent-%COMP%]{width:40px;float:left;margin-right:10px}.mat-tree-node[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .profile_img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.mat-tree-node[_ngcontent-%COMP%]   .edit_icon[_ngcontent-%COMP%]{color:#777;font-size:20px;position:absolute;right:5%;top:0}.mat-tree-node[_ngcontent-%COMP%]   .edit_icon.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{padding-left:0;text-align:center}.mat-tree-node[_ngcontent-%COMP%]   .edit_icon.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.mat-tree-node[_ngcontent-%COMP%]   .edit_icon.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:relative;top:3px;left:2px}.mat-tree-node[_ngcontent-%COMP%]   .toggle_button[_ngcontent-%COMP%]{background:linear-gradient(132deg,rgb(65,80,95) 0%,rgb(36,37,38) 100%);border:none;border-radius:50%;width:20px;height:20px;position:absolute;left:5px;top:2px;padding:10px}.mat-tree-node[_ngcontent-%COMP%]   .toggle_button[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{color:#fff;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-size:22px}.example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:30px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:30px}.affiliate-table-all[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;margin:0 10px;border-radius:5px;box-sizing:border-box}.affiliate-table-all[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fd7088;font-weight:500;font-size:30px;margin-bottom:20px}.affiliate-table-all[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-size:small;display:block}.mentor_friends_tree[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;margin:0 10px;border-radius:5px;box-sizing:border-box}.mentor_friends_tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fd7088;font-weight:500;font-size:30px;margin-bottom:20px}.scrollable-tbody[_ngcontent-%COMP%]{max-height:50vh;overflow-y:auto}.fixed-table[_ngcontent-%COMP%]{overflow:auto;border-radius:0;max-height:calc(60vh - 118px)}.fixed-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background-color:#ccc}.size[_ngcontent-%COMP%]{margin-left:59%}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:rgba(17,17,17,.0666666667);margin-bottom:1rem;padding:5px 10px;border-radius:5px;width:100%;height:40px}.btn-close[_ngcontent-%COMP%]{cursor:pointer}.following-section[_ngcontent-%COMP%]{height:360px;overflow-y:auto}.following-list[_ngcontent-%COMP%]{padding:.75rem .5rem;border-bottom:1px solid #efefef;cursor:pointer}.following-list[_ngcontent-%COMP%]:hover{background-color:#eee}.following-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border:1px solid #ddd;border-radius:8px}']}),a})();var me=_(6844);function No(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"span",8),e.qZA())}function Uo(a,s){if(1&a&&(e.ynx(0),e._UZ(1,"img",21),e.BQk()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==i||null==i.person?null:i.person.profile_img,e.LSH)("alt",(null==i||null==i.person?null:i.person.first_name)||(null==i||null==i.entity?null:i.entity.first_name)+" profile image")}}function Ro(a,s){1&a&&e._UZ(0,"img",22)}function Lo(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"li",13)(1,"div",14)(2,"div",15),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.modal.dismiss())})("keyup",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.modal.dismiss())}),e.TgZ(3,"div",16),e.YNc(4,Uo,2,2,"ng-container",17),e.YNc(5,Ro,1,0,"ng-template",null,18,e.W1O),e.qZA()(),e.TgZ(7,"div",19),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.modal.dismiss("Cross click"))})("keyup",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.modal.dismiss("Cross click"))}),e.TgZ(8,"p",20),e._uU(9),e.TgZ(10,"small"),e._uU(11),e.qZA()()()()()}if(2&a){const i=s.$implicit,t=e.MAs(6);e.xp6(2),e.Q6J("routerLink","/bm/"+i.conceptId||0),e.xp6(2),e.Q6J("ngIf",(null==i||null==i.person?null:i.person.profile_img)||(null==i||null==i.entity?null:i.entity.profile_img))("ngIfElse",t),e.xp6(3),e.Q6J("routerLink","/bm/"+i.conceptId||0),e.xp6(2),e.hij(" ",((null==i||null==i.person?null:i.person.first_name)||(null==i||null==i.entity?null:i.entity.first_name)||"")+(null!=i&&null!=i.person&&i.person.last_name||null!=i&&null!=i.entity&&i.entity.last_name?" "+((null==i||null==i.person?null:i.person.last_name)||(null==i||null==i.entity?null:i.entity.last_name)):"")," "),e.xp6(2),e.hij("(",(null==i?null:i.email)||(null==i?null:i.entity_email),")")}}function Bo(a,s){if(1&a&&(e.TgZ(0,"ul",11),e.YNc(1,Lo,12,6,"li",12),e.qZA()),2&a){const i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",i.friends)}}function Yo(a,s){1&a&&(e.TgZ(0,"p",23),e._uU(1,"No Friend"),e.qZA())}function Jo(a,s){if(1&a&&(e.YNc(0,Bo,2,1,"ul",9),e.YNc(1,Yo,2,0,"ng-template",null,10,e.W1O)),2&a){const i=e.MAs(2),t=e.oxw();e.Q6J("ngIf",t.friends.length>0)("ngIfElse",i)}}let Qo=(()=>{const s=class{constructor(t){this.modal=t,this.modalHeader="Friends",this.isLoading=!1,this.friends=[]}ngOnInit(){console.log(this.friendsListData,"this.friendsList"),this.friends=this.friendsListData.map(t=>({conceptId:t?.the_user?.id,entityId:t?.id,person:t?.the_user?.data?.entity?.data,entity:t?.data?.entity?.data||" ",entity_email:t?.data?.user_data?.data?.primary_email,email:t?.the_user?.data?.user_data?.data?.primary_email}))}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(M.Kz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-friends-modal"]],inputs:{friendsListData:"friendsListData",modalHeader:"modalHeader"},decls:10,vars:3,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","following-section","p-0"],[1,"mb-3"],["class","loading",4,"ngIf","ngIfElse"],["loaded",""],[1,"loading"],[1,"loader"],["class","ps-0 my-2",4,"ngIf","ngIfElse"],["noFriends",""],[1,"ps-0","my-2"],["class","following-list",4,"ngFor","ngForOf"],[1,"following-list"],[1,"row","align-items-center","my-0"],["tabindex","",1,"col-md-2","m-0","p-0","text-center",3,"routerLink","click","keyup"],[1,"following-image"],[4,"ngIf","ngIfElse"],["defaultProfileImg",""],["tabindex","",1,"col-md-10",3,"routerLink","click","keyup"],[1,"mb-0"],[1,"img-fluid",3,"src","alt"],["src","https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp","alt","Profile Image",1,"img-fluid"],[1,"text-center","my-5"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.modal.dismiss()}),e.qZA()(),e.TgZ(4,"div",3)(5,"form")(6,"div",4),e.YNc(7,No,2,0,"div",5),e.YNc(8,Jo,3,2,"ng-template",null,6,e.W1O),e.qZA()()()),2&n){const r=e.MAs(9);e.xp6(2),e.Oqu(o.modalHeader),e.xp6(5),e.Q6J("ngIf",o.isLoading)("ngIfElse",r)}},dependencies:[p.sg,p.O5,h.rH,u._Y,u.JL,u.F],styles:[".btn-close[_ngcontent-%COMP%]{cursor:pointer}.following-section[_ngcontent-%COMP%]{height:360px;overflow-y:auto}.following-list[_ngcontent-%COMP%]{padding:.75rem .5rem;border-bottom:1px solid #efefef;cursor:pointer}.following-list[_ngcontent-%COMP%]:hover{background-color:#eee}.following-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border:1px solid #ddd;border-radius:8px}"]}),a})();function zo(a,s){if(1&a&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&a){const i=s.$implicit;e.xp6(1),e.hij(" ",i," ")}}function Ho(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",8),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.YNc(6,zo,2,1,"p",9),e.qZA()()),2&a){const i=s.$implicit,t=s.index;e.xp6(2),e.Oqu(t+1),e.xp6(2),e.Oqu(i.email),e.xp6(2),e.Q6J("ngForOf",i.invitedTime)}}function jo(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",5)(2,"table",6)(3,"thead")(4,"tr"),e._UZ(5,"th"),e.TgZ(6,"th"),e._uU(7,"Email"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Invited time"),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,Ho,7,3,"tr",7),e.qZA()()(),e.BQk()),2&a){const i=e.oxw();e.xp6(11),e.Q6J("ngForOf",i.invitedFriendsList)}}function Go(a,s){1&a&&(e.TgZ(0,"div",11)(1,"p"),e._uU(2,"Not invited anyone yet."),e.qZA()())}let $o=(()=>{const s=class{constructor(t){this.modal=t}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(M.Kz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-invited-friends-modal"]],inputs:{invitedFriendsList:"invitedFriendsList"},decls:7,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["tabindex","0",1,"btn-close",3,"keyup.enter","click"],[4,"ngIf","ngIfElse"],["noInvitee",""],[1,"table","table-responsive","px-4"],[1,"table","mt-4"],[4,"ngFor","ngForOf"],[1,"text-truncate"],["class","mb-0",4,"ngFor","ngForOf"],[1,"mb-0"],[1,"m-5","p-5","d-flex","align-items-center","justify-content-center","text-center"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Friend Invitees"),e.qZA(),e.TgZ(3,"span",2),e.NdJ("keyup.enter",function(){return o.modal.dismiss("Cross click")})("click",function(){return o.modal.dismiss("Cross click")}),e.qZA()(),e.YNc(4,jo,12,1,"ng-container",3),e.YNc(5,Go,3,0,"ng-template",null,4,e.W1O)),2&n){const r=e.MAs(6);e.xp6(4),e.Q6J("ngIf",o.invitedFriendsList.length>0)("ngIfElse",r)}},dependencies:[p.sg,p.O5],styles:[".btn-close[_ngcontent-%COMP%]{cursor:pointer}"]}),a})();var pt=_(1685);const Vo=["extension_indeed","extension_linkedin","extension_monster","extension_maps","extension_whatsapp","web_crm"];function Ko(a,s){if(1&a&&e._UZ(0,"img",19),2&a){const i=e.oxw().$implicit;e.s9C("src",null==i||null==i.data||null==i.data.boomgpt||null==i.data.boomgpt.crm_data?null:i.data.boomgpt.crm_data.avatar,e.LSH)}}function Wo(a,s){1&a&&e._UZ(0,"img",20)}function Xo(a,s){if(1&a&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.Oqu(null==i||null==i.data||null==i.data.boomgpt||null==i.data.boomgpt.crm_data?null:i.data.boomgpt.crm_data.email)}}function es(a,s){if(1&a&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==i||null==i.data||null==i.data.boomgpt||null==i.data.boomgpt.crm_data||null==i.data.boomgpt.crm_data.companyInformation||null==i.data.boomgpt.crm_data.companyInformation.email[0]?null:i.data.boomgpt.crm_data.companyInformation.email[0].email," ")}}const ts=function(a){return{"active-contact":a}};function ns(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){const o=e.CHM(i).$implicit,r=e.oxw(3);return e.KtG(r.handleContactClick(o))})("keyup",function(){const o=e.CHM(i).$implicit,r=e.oxw(3);return e.KtG(r.handleContactClick(o))}),e.TgZ(1,"div",13),e.YNc(2,Ko,1,1,"img",14),e.YNc(3,Wo,1,0,"ng-template",null,15,e.W1O),e.qZA(),e.TgZ(5,"div",16)(6,"span",17),e._uU(7),e.qZA(),e.YNc(8,Xo,2,1,"span",18),e.YNc(9,es,2,1,"span",18),e.qZA()()}if(2&a){const i=s.$implicit,t=e.MAs(4),n=e.oxw(3);e.Q6J("ngClass",e.VKq(6,ts,i===n.activeContact)),e.xp6(2),e.Q6J("ngIf",null==i||null==i.data||null==i.data.boomgpt||null==i.data.boomgpt.crm_data?null:i.data.boomgpt.crm_data.avatar)("ngIfElse",t),e.xp6(5),e.Oqu((null==i||null==i.data||null==i.data.boomgpt||null==i.data.boomgpt.crm_data?null:i.data.boomgpt.crm_data.name)||(null==i||null==i.data||null==i.data.boomgpt||null==i.data.boomgpt.crm_data||null==i.data.boomgpt.crm_data.companyInformation?null:i.data.boomgpt.crm_data.companyInformation.name)),e.xp6(1),e.Q6J("ngIf",null==i||null==i.data||null==i.data.boomgpt||null==i.data.boomgpt.crm_data?null:i.data.boomgpt.crm_data.email),e.xp6(1),e.Q6J("ngIf",null==i||null==i.data||null==i.data.boomgpt||null==i.data.boomgpt.crm_data?null:i.data.boomgpt.crm_data.companyInformation)}}function is(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",10),e.YNc(2,ns,10,8,"div",11),e.qZA(),e.BQk()),2&a){const i=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",i.filteredContact)}}function as(a,s){1&a&&(e.TgZ(0,"span",22),e._uU(1," No contacts available "),e.qZA())}function os(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,is,3,1,"ng-container",8),e.YNc(2,as,2,0,"ng-template",null,9,e.W1O),e.qZA()),2&a){const i=e.MAs(3),t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.filteredContact?null:t.filteredContact.length)>0)("ngIfElse",i)}}function ss(a,s){1&a&&(e.ynx(0),e.TgZ(1,"span",23),e._uU(2,"Looking for data..... "),e.qZA(),e.BQk())}let rs=(()=>{const s=class{constructor(t,n,o){this._activeModal=t,this._authService=n,this._captureService=o,this.contacts=[],this.allContact=[],this.loading=!1;const r=this._authService.loadFromLocalStorage();this.userCompositionId=r.userConcept}ngOnInit(){var t=this;return(0,m.Z)(function*(){const o=(yield t._captureService.getCategories(t.userCompositionId))?.data?.find(r=>"Contacts"==r?.name);void 0!==o?.id&&t.resursiveSearch(o?.id)})()}resursiveSearch(t){var n=this;return(0,m.Z)(function*(){let o;o=void 0!==t?{composition:t,listLinkers:[H.xq+"_s"],textSearch:""}:{composition:n.userCompositionId,listLinkers:[H.xq+"_s"],textSearch:""};const r=yield(0,T.zAo)(Number(o?.composition),[H.xq+"_s"],"");if(r){const l=r;n.loading=!1,n.filteredContact=l?.filter(c=>{const d=c.data?.boomgpt,g=d?.data_type,f=d?.crm_data;return void 0!==g&&Vo.includes(g)||f}),n.allContact=n.filteredContact,n.allContact.sort((c,d)=>{const g=c.data?.boomgpt?.crm_data?.name?.toLowerCase()||"",f=d.data?.boomgpt?.crm_data?.name?.toLowerCase()||"";return g<f?-1:g>f?1:0})}})()}searchContacts(t){const n=t.target.value?.toLowerCase();this.filteredContact=this.allContact.filter(o=>o?.data?.boomgpt?.crm_data?.name?.toLowerCase().includes(n))}handleContactClick(t){this.onContactClickCallback&&(this.onContactClickCallback(t),this._activeModal.close(t))}setUpdateEmailFunction(t){this.updateEmail=t}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(M.Kz),e.Y36(N.e),e.Y36(pt.F))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-contact-email"]],inputs:{updateEmail:"updateEmail"},decls:10,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"p-2"],[1,"main_container"],[1,"search"],["type","text","placeholder","Search entity...",3,"input"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noData",""],[1,"mt-3"],["class","contact_list d-flex align-items-center","tabindex","",3,"ngClass","click","keyup",4,"ngFor","ngForOf"],["tabindex","",1,"contact_list","d-flex","align-items-center",3,"ngClass","click","keyup"],[1,"img_left"],["alt","",3,"src",4,"ngIf","ngIfElse"],["defaultImage",""],[1,"d-flex","flex-column"],[1,"list_item","name"],["class","list_item",4,"ngIf"],["alt","",3,"src"],["src","/assets/man.png","alt","",1,"img_left"],[1,"list_item"],[1,"no_data"],[1,"loading"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Contacts \u2728"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o._activeModal.dismiss()}),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"input",6),e.NdJ("input",function(l){return o.searchContacts(l)}),e.qZA()(),e.YNc(8,os,4,2,"div",7),e.YNc(9,ss,3,0,"ng-container",7),e.qZA()()),2&n&&(e.xp6(8),e.Q6J("ngIf",!o.loading),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[p.mk,p.sg,p.O5],styles:[".main_container[_ngcontent-%COMP%]{background-color:#fff}.main_container[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(17,17,17,.0666666667)}.main_container[_ngcontent-%COMP%]   .inner_container[_ngcontent-%COMP%]{border-radius:10px}.main_container[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]{padding:6px 15px!important}.main_container[_ngcontent-%COMP%]   .contact_list[_ngcontent-%COMP%]{padding:1rem 5px;cursor:pointer;border-bottom:1px solid #cfcbca;padding:15px}.main_container[_ngcontent-%COMP%]   .contact_list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.main_container[_ngcontent-%COMP%]   .contact_list[_ngcontent-%COMP%]   .list_item[_ngcontent-%COMP%]{font-weight:500}.main_container[_ngcontent-%COMP%]   .contact_list[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.main_container[_ngcontent-%COMP%]   .contact_list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.main_container[_ngcontent-%COMP%]   .contact_list[_ngcontent-%COMP%]:hover{background-color:#fce7f3;border-radius:10px;transition:all .3s}.main_container[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:rgba(17,17,17,.0666666667);padding:5px 10px;border-radius:5px;width:100%;height:40px}.main_container[_ngcontent-%COMP%]   .active-contact[_ngcontent-%COMP%]{background-color:#fce7f3;border-radius:10px}.main_container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{font-weight:400;background-color:#1111}.main_container[_ngcontent-%COMP%]   .avatar_img[_ngcontent-%COMP%]{height:10rem;width:10rem;border-radius:50%;object-fit:cover;border:1px solid gray}.main_container[_ngcontent-%COMP%]   .details_container[_ngcontent-%COMP%]{gap:10px;border-right:2px solid gray}.main_container[_ngcontent-%COMP%]   .edit_btn[_ngcontent-%COMP%]{background-color:#818cf8;color:#fff;padding:.5rem .75rem;outline:none;border:none;border-radius:5px}.main_container[_ngcontent-%COMP%]   .delete_btn[_ngcontent-%COMP%]{background-color:#dc2626;color:#fff;padding:.5rem .75rem;outline:none;border:none;border-radius:5px}.main_container[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;gap:10px}.main_container[_ngcontent-%COMP%]   .btn_actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.main_container[_ngcontent-%COMP%]   .btn_actions[_ngcontent-%COMP%]   .inner_btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px;align-items:center}.main_container[_ngcontent-%COMP%]   .btn_actions[_ngcontent-%COMP%]   .inner_btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none;padding:15px;background-color:#d1d5db;border-radius:15px}.main_container[_ngcontent-%COMP%]   .btn_actions[_ngcontent-%COMP%]   .inner_btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:linear-gradient(to top,rgb(255,148,114),rgb(242,112,156))}.main_container[_ngcontent-%COMP%]   .btn_actions[_ngcontent-%COMP%]   .inner_btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{fill:#000;height:20px;width:20px}.main_container[_ngcontent-%COMP%]   .contact_activity[_ngcontent-%COMP%]{width:100%}.main_container[_ngcontent-%COMP%]   .contact_activity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.main_container[_ngcontent-%COMP%]   .contact_activity[_ngcontent-%COMP%]   .inner_contact[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;background-color:#fff;padding:10px 15px}.main_container[_ngcontent-%COMP%]   .tag_title[_ngcontent-%COMP%]{padding-bottom:5px!important;border-bottom:1px solid!important}.main_container[_ngcontent-%COMP%]   .img_upload[_ngcontent-%COMP%]{border-radius:50%;background-color:#fff;color:#00f}.main_container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:7px 20px;font-size:16px;color:#666}.main_container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#666}.main_container[_ngcontent-%COMP%]   .no_select[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.main_container[_ngcontent-%COMP%]   .no_select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:100px;color:#666}.main_container[_ngcontent-%COMP%]   .no_select[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#666}.main_container[_ngcontent-%COMP%]   .notes_details[_ngcontent-%COMP%]{width:100%}.main_container[_ngcontent-%COMP%]   .edit_note[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.single_entity[_ngcontent-%COMP%]{height:calc(100vh - 58px);overflow-y:auto}.avatar_name[_ngcontent-%COMP%]{width:30px;height:30px}img[_ngcontent-%COMP%]{width:30px;height:30px;object-fit:cover;border-radius:50%}#dropdownAddNew[_ngcontent-%COMP%]{padding:4px 25px 8px 10px}.dropdown-toggle[_ngcontent-%COMP%]:after{right:10px}.btn_styles[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.btn_styles[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]{color:#fff}.dropdown_menues[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:18px;color:#999;margin-top:120px;background-color:#fff}.no_data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:24px;color:#999;margin-top:20px}.img_left[_ngcontent-%COMP%]{height:30px;width:30px;border-radius:50%;object-fit:cover;border:1px solid gray}"]}),a})();const ls=["contactEmailComponent"];function cs(a,s){1&a&&(e.TgZ(0,"small",29),e._uU(1," Please enter first name. "),e.qZA())}function ds(a,s){1&a&&(e.TgZ(0,"small",29),e._uU(1," Please enter last name. "),e.qZA())}function us(a,s){if(1&a&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&a){const i=e.oxw();e.xp6(1),e.hij(" ",i.invalidMessage," ")}}function ms(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"option",34)(2,"strong"),e._uU(3),e.qZA(),e._uU(4),e.qZA(),e.BQk()),2&a){const i=s.$implicit;e.xp6(1),e.Q6J("value",null==i?null:i.code),e.xp6(2),e.hij("",null==i?null:i.name,":"),e.xp6(1),e.hij(" ",null==i?null:i.code," ")}}function gs(a,s){1&a&&(e.TgZ(0,"small",29),e._uU(1," Please select affiliate code. "),e.qZA())}function ps(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",3)(1,"label",30),e._uU(2,"Affiliate code"),e.TgZ(3,"span",5),e._uU(4,"*"),e.qZA()(),e.TgZ(5,"select",31),e.NdJ("input",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.updateAffiliateCode(n))}),e.TgZ(6,"option",32),e._uU(7,"Select ..."),e.qZA(),e.YNc(8,ms,5,3,"ng-container",33),e.qZA(),e.YNc(9,gs,2,0,"small",7),e.qZA()}if(2&a){const i=e.oxw(),t=e.MAs(1);e.xp6(8),e.Q6J("ngForOf",i.affiliateCodeList),e.xp6(1),e.Q6J("ngIf",i.affiliateCode&&i.affiliateCode.invalid&&(i.affiliateCode.touched||t.submitted))}}function _s(a,s){1&a&&(e.ynx(0),e._uU(1,", "),e.BQk())}function hs(a,s){if(1&a&&(e.ynx(0),e._uU(1),e.YNc(2,_s,2,0,"ng-container",16),e.BQk()),2&a){const i=s.$implicit,t=s.index,n=e.oxw().$implicit;e.xp6(1),e.Oqu(null==i||null==i[0]||null==i[0].data||null==i[0].data.internal_product?null:i[0].data.internal_product.name),e.xp6(1),e.Q6J("ngIf",t!==(null==n||null==n.products?null:n.products.length)-1)}}function fs(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"option",34),e._uU(2),e.YNc(3,hs,3,2,"ng-container",33),e._uU(4,"] "),e.qZA(),e.BQk()),2&a){const i=s.$implicit;e.xp6(1),e.Q6J("value",null==i?null:i.CoupounCode),e.xp6(1),e.AsE(" ",null==i?null:i.CoupounCode," - ",i.PercentOff,"% off - ["),e.xp6(1),e.Q6J("ngForOf",null==i?null:i.products)}}function bs(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",3)(1,"label",35),e._uU(2,"Coupon Code"),e.qZA(),e.TgZ(3,"select",36),e.NdJ("change",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.updateAffiliateCoupon(n))}),e.TgZ(4,"option",32),e._uU(5,"Select ..."),e.qZA(),e.YNc(6,fs,5,4,"ng-container",33),e.qZA()()}if(2&a){const i=e.oxw();e.xp6(6),e.Q6J("ngForOf",i.agentCouponList)}}function ys(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",3)(1,"label",37),e._uU(2,"Invite link"),e.qZA(),e.TgZ(3,"div",38)(4,"p",39),e._uU(5),e.qZA(),e.TgZ(6,"button",40),e.NdJ("click",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.copyInviteLink(n))}),e.TgZ(7,"span",41),e._uU(8,"content_copy"),e.qZA()()()()}if(2&a){const i=e.oxw();e.xp6(5),e.Oqu(i.inviteeLink)}}function Cs(a,s){1&a&&(e.ynx(0),e._uU(1,","),e.BQk())}function vs(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"span",51),e._uU(2),e.qZA(),e.YNc(3,Cs,2,0,"ng-container",16),e.BQk()),2&a){const i=s.$implicit,t=s.index,n=e.oxw(2);e.xp6(2),e.hij("Plan: ",null==i||null==i[0]||null==i[0].data||null==i[0].data.internal_product?null:i[0].data.internal_product.name,""),e.xp6(1),e.Q6J("ngIf",t!==(null==n.selectedCoupon||null==n.selectedCoupon.products?null:n.selectedCoupon.products.length)-1)}}function xs(a,s){if(1&a&&(e.TgZ(0,"span",50),e._uU(1),e.qZA()),2&a){const i=e.oxw(2);e.xp6(1),e.hij("Trial Period: ",i.selectedCoupon.TrialDays," Days")}}function Ts(a,s){1&a&&(e.ynx(0),e._uU(1," One-Time Payment [One Billing Cycle] "),e.BQk())}function ws(a,s){if(1&a&&e._uU(0),2&a){const i=e.oxw(2);e.AsE(" Repeating (",i.selectedCoupon.DurationInMonths," month",i.selectedCoupon.DurationInMonths>1?"s":"",") ")}}function As(a,s){if(1&a&&(e.TgZ(0,"div",42)(1,"div",43)(2,"span",44),e._uU(3),e.qZA(),e.YNc(4,vs,4,2,"ng-container",33),e.TgZ(5,"span",45),e._uU(6),e.qZA(),e.YNc(7,xs,2,1,"span",46),e.TgZ(8,"span",47),e._uU(9," Offer Duration: "),e.YNc(10,Ts,2,0,"ng-container",48),e.YNc(11,ws,1,2,"ng-template",null,49,e.W1O),e.qZA(),e.TgZ(13,"span",50),e._uU(14),e.ALo(15,"date"),e.qZA()()()),2&a){const i=e.MAs(12),t=e.oxw();e.xp6(3),e.hij(" Coupon Name: ",t.selectedCoupon.CoupounCode,""),e.xp6(1),e.Q6J("ngForOf",null==t.selectedCoupon?null:t.selectedCoupon.products),e.xp6(2),e.hij("Discount: ",t.selectedCoupon.PercentOff,"%"),e.xp6(1),e.Q6J("ngIf",t.selectedCoupon.TrialDays),e.xp6(3),e.Q6J("ngIf","once"===t.selectedCoupon.Duration)("ngIfElse",i),e.xp6(4),e.hij("Valid Till: ",e.xi3(15,7,t.selectedCoupon.RedeemBy,"longDate"),"")}}function Ms(a,s){if(1&a&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&a){const i=s.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",null==i?null:i.title," ")}}function ks(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"div",23)(3,"label",52),e._uU(4,"Email Templates"),e.qZA(),e.TgZ(5,"select",53),e.NdJ("change",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.selectTemplate(n))}),e.YNc(6,Ms,2,2,"option",54),e.qZA()(),e.TgZ(7,"div",55)(8,"button",56),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.createEmailTemplate())}),e.TgZ(9,"span",57),e._uU(10," add_circle "),e.qZA(),e._uU(11," Create new template "),e.qZA()()(),e.BQk()}if(2&a){const i=e.oxw();e.xp6(6),e.Q6J("ngForOf",i.emailTemplates)}}function Ps(a,s){1&a&&(e.TgZ(0,"small",29),e._uU(1," Please enter email template title. "),e.qZA())}function Zs(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",2)(2,"div",23)(3,"label",58),e._uU(4,"Email Template Title"),e.qZA(),e._UZ(5,"input",59),e.YNc(6,Ps,2,0,"small",7),e.qZA()(),e.BQk()),2&a){const i=e.oxw();e.xp6(6),e.Q6J("ngIf",!i.hasEmailTemplateTitle)}}function Is(a,s){1&a&&(e.TgZ(0,"small",60),e._uU(1," Please add your invitation details "),e.qZA())}function Os(a,s){1&a&&(e.ynx(0),e._uU(1," Saving "),e.BQk())}function Ss(a,s){1&a&&e._uU(0," Save Template ")}function qs(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.saveEmailTemplate())}),e.YNc(1,Os,2,0,"ng-container",48),e.YNc(2,Ss,1,0,"ng-template",null,61,e.W1O),e.qZA()}if(2&a){const i=e.MAs(3),t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isEmailTemplateSaving)("ngIfElse",i)}}function Fs(a,s){1&a&&(e.ynx(0),e._uU(1," Updating "),e.BQk())}function Es(a,s){1&a&&e._uU(0," Update ")}function Ds(a,s){1&a&&(e.ynx(0),e._uU(1," Deleting "),e.BQk())}function Ns(a,s){1&a&&e._uU(0," Delete ")}function Us(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"button",62),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.updateSelectedEmailTemplate(n.selectedEmailTemplate))}),e.TgZ(2,"span",63),e._uU(3," update "),e.qZA(),e.YNc(4,Fs,2,0,"ng-container",48),e.YNc(5,Es,1,0,"ng-template",null,64,e.W1O),e.qZA(),e.TgZ(7,"button",65),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.deleteSelectedEmailTemplate(n.selectedEmailTemplate))}),e.TgZ(8,"span",63),e._uU(9," delete "),e.qZA(),e.YNc(10,Ds,2,0,"ng-container",48),e.YNc(11,Ns,1,0,"ng-template",null,66,e.W1O),e.qZA(),e.BQk()}if(2&a){const i=e.MAs(6),t=e.MAs(12),n=e.oxw();e.xp6(4),e.Q6J("ngIf",n.isEmailTemplateUpdating)("ngIfElse",i),e.xp6(6),e.Q6J("ngIf",n.isEmailTemplateDeleting)("ngIfElse",t)}}function Rs(a,s){1&a&&(e.TgZ(0,"button",67)(1,"div",68)(2,"span",69),e._uU(3,"."),e.qZA()(),e._uU(4," Sending... "),e.qZA()),2&a&&e.Q6J("disabled",!0)}function Ls(a,s){1&a&&(e.TgZ(0,"button",70),e._uU(1," Send Invite "),e.TgZ(2,"span",63),e._uU(3," send "),e.qZA()())}const Bs=function(a){return{"border-danger":a}};let _t=(()=>{const s=class{constructor(t,n,o,r,l,c,d,g){this.formBuilder=t,this.itemService=n,this.authService=o,this.modalService=r,this._authService=l,this._snackbarService=c,this._nodeService=d,this._captureService=g,this.optionSelected=new e.vpe,this.updateInvitedFriends=new e.vpe,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"],["image"]],this.activeTab=1,this.showChosenOption=!1,this.isInviteSending=!1,this.isTemplateValid=!0,this.inviteList=[],this.isInviteEmailValid=!1,this.invalidMessage="",this.isEmailChecking=!1,this.userEmail="",this.userName="",this.userProfileImage="",this.selected_value="",this.allEmails=[],this.selectedEmails=[],this.showSearchDropdown=!1,this.selectedEmail="",this.showDropdown=!1,this.invitedFriendsList=[],this.myFriends=[],this.inviteeFirstName="",this.inviteeLastName="",this.inviteeEmail="",this.inviteeLink="",this.unsubscribeLink="",this.emailSelected=!1,this.templateRendered=!1,this.isCouponSelected=!1,this.defaultEmailTemplate=`\n    <p>My dear friend ${this.inviteeFirstName} ${this.inviteeLastName},</p>\n    <p>I've recently started using this amazing app from BoomConsole.com.</p>\n    <p>It allows me to organize my web data on an off the internet and to share it with my community and friends. The BoomConsole web browser extension lets me describe and save web content in my private database where I can search and retrieve the information.</p>\n    <p>I think you will love it too!</p>\n    <p>Use BoomConsole to Organize Your Web</p>\n    <p>Capture your thoughts on Web Pages, Chats and Clients</p>\n    <p>The BoomConsole Filing System and Contacts are used to organize your internet experience!</p>\n    <ul>\n      <li><p>Capture ChatGPT, You.com, Google Bard & Poe.com chats to your personal database.</p></li>\n      <li><p>Upload your LinkedIn connections and Google maps data in to your personal Contacts.</p></li>\n      <li><p>Make private and public comments on the websites you visit for future reference.</p></li>\n      <li><p>Share your information with groups and colleagues in your sphere.</p></li>\n    </ul>\n    <p>You can use the extension with Chrome, Edge, Brave and Opera browsers (Firefox, Safari support coming soon).</p>\n    <p>It's my go-to tool for saving internet content, searching, viewing, and sharing ideas.</p>\n    <p>Click on my invitation link below to join and explore BoomConsole for more opportunities.</p>\n\n    <p> <a href="${this.inviteeLink}" target="_blank">"<u>Invitation Link</u>"</a> </p></br>\n    <p>Best Regards,</p>\n    <p>${this.userName}</p>\n  `,this.defaultTemplate={title:"Default template",id:0,isActive:!0,template:this.defaultEmailTemplate},this.selectedEmailTemplate=this.defaultTemplate,this.isCreateTemplateClicked=!1,this.hasEmailTemplateTitle=!0,this.isEmailTemplateSaving=!1,this.isEmailTemplateDeleting=!1,this.isEmailTemplateUpdating=!1,this.emailTemplates=[],this.inviteForm=this.formBuilder.group({firstName:new u.NI("",[u.kI.required,S.R.notOnlySpaces()]),lastName:new u.NI("",[u.kI.required,S.R.notOnlySpaces()]),email:new u.NI("",[u.kI.required,u.kI.email]),message:new u.NI("",[u.kI.required]),affiliateCode:new u.NI("",[]),affiliateCoupon:new u.NI("",[]),emailTemplate:new u.NI(0,[]),emailTemplateTitle:new u.NI("",[])});const f=this._authService.loadFromLocalStorage();this.userCompositionId=f.userConcept}get firstName(){return this.inviteForm.get("firstName")}get lastName(){return this.inviteForm.get("lastName")}get email(){return this.inviteForm.get("email")}get affiliateCode(){return this.inviteForm.get("affiliateCode")}get affiliateCoupon(){return this.inviteForm.get("affiliateCoupon")}get emailTemplate(){return this.inviteForm.get("emailTemplate")}get emailTemplateTitle(){return this.inviteForm.get("emailTemplateTitle")}ngOnInit(){var t=this;return(0,m.Z)(function*(){t.editor=new me.ML;const o=(yield t._captureService.getCategories(t.userCompositionId))?.data?.find(l=>"Contacts"==l?.name);void 0!==o?.id&&t.resursiveSearch(o?.id);const r=t.authService.loadFromLocalStorage();t.userConceptId=r?.userConcept,t.userEmail=r?.email,t.userId=r?.theUserId,t.getUserInfo(),t.affiliateCodeList?.length&&t.getEmailTemplates()})()}updateFormFields(t){var n=this;return(0,m.Z)(function*(){const o=t?.data?.boomgpt?.crm_data?.email,r=t?.data?.boomgpt?.crm_data?.companyInformation?.email[0]?.email;if(n.inviteeEmail=o||r,t&&n.inviteForm){const g=(t?.data?.boomgpt?.crm_data?.name||t?.data?.boomgpt?.crm_data?.companyInformation?.name)?.trim(),f=g?.lastIndexOf(" ");n.inviteeFirstName=-1!==f?g?.slice(0,f):g,n.inviteeLastName=-1!==f?g?.slice(f+1):"",n.inviteForm.get("firstName")?.setValue(n.inviteeFirstName),n.inviteForm.get("email")?.setValue(n.inviteeEmail),n.inviteForm.get("lastName")?.setValue(n.inviteeLastName),0===n.selectedEmailTemplate?.id&&n.updateEmailTemplate()}"INVALID"!==n.inviteForm.get("email")?.status?(yield n.checkIsEmailAlreadyUsed())?.length>0||n.updateInviteeLink():n.invalidMessage="Please enter a valid email"})()}getUserInfo(){this.itemService.getUserReports([this.userConceptId]).subscribe({next:t=>{const n=t[0]?.data?.the_user?.entity;this.userName=`${n?.person?.first_name} ${n?.person?.last_name}`,this.userProfileImage=n?.person?.profile_img?n?.person?.profile_img:"./assets/man.png",this.defaultEmailTemplate=`\n          <p>My dear friend ${this.inviteeFirstName} ${this.inviteeLastName},</p>\n          <p>I've recently started using this amazing app from BoomConsole.com.</p>\n          <p>It allows me to organize my web data on an off the internet and to share it with my community and friends. The BoomConsole web browser extension lets me describe and save web content in my private database where I can search and retrieve the information.</p>\n          <p>I think you will love it too!</p>\n          <p>Use BoomConsole to Organize Your Web</p>\n          <p>Capture your thoughts on Web Pages, Chats and Clients</p>\n          <p>The BoomConsole Filing System and Contacts are used to organize your internet experience!</p>\n          <ul>\n            <li><p>Capture ChatGPT, You.com, Google Bard & Poe.com chats to your personal database.</p></li>\n            <li><p>Upload your LinkedIn connections and Google maps data in to your personal Contacts.</p></li>\n            <li><p>Make private and public comments on the websites you visit for future reference.</p></li>\n            <li><p>Share your information with groups and colleagues in your sphere.</p></li>\n          </ul>\n          <p>You can use the extension with Chrome, Edge, Brave and Opera browsers (Firefox, Safari support coming soon).</p>\n          <p>It's my go-to tool for saving internet content, searching, viewing, and sharing ideas.</p>\n          <p>Click on my invitation link below to join and explore BoomConsole for more opportunities.</p>\n\n          <p> <a href="${this.inviteeLink}" target="_blank">"<u>Invitation Link</u>"</a> </p></br>\n          <p>Best Regards,</p>\n          <p>${this.userName}</p>\n        `,this.defaultTemplate={title:"Default template",id:0,isActive:!0,template:this.defaultEmailTemplate},this.updateEmailTemplate()},error:t=>{console.error(t)}})}contact(){this.modalService.open(rs,{size:"md"}).componentInstance.onContactClickCallback=n=>{this.updateFormFields(n)}}setupInviteTemplate(){this.editor=new me.ML,this.itemService.getUserReports([this.userConceptId]).subscribe({next:t=>{const n=t[0]?.data?.the_user?.entity;this.userName=`${n?.person?.first_name} ${n?.person?.last_name}`,this.userProfileImage=n?.person?.profile_img?n?.person?.profile_img:"./assets/man.png",this.inviteForm.patchValue({message:`\n          <p>My dear friend,</p>\n          <p>I've recently started using this amazing app from BoomConsole.com.</p>\n          <p>It allows me to organize my web data on an off the internet and to share it with my community and friends. The BoomConsole web browser extension lets me describe and save web content in my private database where I can search and retrieve the information.</p>\n          <p>I think you will love it too!</p>\n          <p>Use BoomConsole to Organize Your Web</p>\n          <p>Capture your thoughts on Web Pages, Chats and Clients</p>\n          <p>The BoomConsole Filing System and Contacts are used to organize your internet experience!</p>\n          <ul>\n            <li><p>Capture ChatGPT, You.com, Google Bard & Poe.com chats to your personal database.</p></li>\n            <li><p>Upload your LinkedIn connections and Google maps data in to your personal Contacts.</p></li>\n            <li><p>Make private and public comments on the websites you visit for future reference.</p></li>\n            <li><p>Share your information with groups and colleagues in your sphere.</p></li>\n          </ul>\n          <p>You can use the extension with Chrome, Edge, Brave and Opera browsers (Firefox, Safari support coming soon).</p>\n          <p>It's my go-to tool for saving internet content, searching, viewing, and sharing ideas.</p>\n          <p>Click on my invitation link (will be in bottom of the email) to join and\n            visit <a href="https://boomconsole.com/" target="_blank">BoomConsole.com</a> for more.</p>\n          <p>Best Regards,</p>\n          <p>${this.userName}</p>\n        `})}})}updateFirstName(t){this.inviteeFirstName=t?.target?.value,this.updateInviteeLink()}updateLastName(t){this.inviteeLastName=t?.target?.value,this.updateInviteeLink()}updateEmail(t){var n=this;return(0,m.Z)(function*(){n.inviteeEmail=t?.target?.value.toLowerCase();const o=n.contacts?.find(c=>c.email.toLowerCase()===n.inviteeEmail);if(o&&n.inviteForm){const c=o.name?.trim(),d=c?.lastIndexOf(" ");n.inviteeFirstName=-1!==d?c?.slice(0,d):c,n.inviteeLastName=-1!==d?c?.slice(d+1):"",n.inviteForm.get("firstName")?.setValue(n.inviteeFirstName),n.inviteForm.get("lastName")?.setValue(n.inviteeLastName),n.updateEmailTemplate()}"INVALID"!==n.inviteForm.get("email")?.status?(yield n.checkIsEmailAlreadyUsed())?.length>0||n.updateInviteeLink():n.invalidMessage="Please enter a valid email"})()}updateInviteeLink(){const t={inviterConceptId:this.userConceptId,inviteeFirstName:this.inviteeFirstName,inviteeLastName:this.inviteeLastName,inviteeEmail:this.inviteeEmail};this.inviterAffiliateCode&&(t.affiliateCode=this.inviterAffiliateCode),this.inviterAffiliateCoupon&&(t.inviterCoupon=this.inviterAffiliateCoupon);const n=window.btoa(JSON.stringify(t)),o=window.btoa(JSON.stringify(this.inviteeEmail)),r=window.location.protocol+"//"+window.location.hostname+`/landing?ei=${n}`;this.inviteeLink=r;const l=window.location.protocol+"//"+window.location.hostname+`/unsubscribe?ei=${o}`;this.unsubscribeLink=l,0===this.selectedEmailTemplate?.id&&this.updateEmailTemplate()}updateAffiliateCode(t){this.inviterAffiliateCode=t?.target?.value,this.updateInviteeLink()}updateAffiliateCoupons(t){this.inviterAffiliateCoupon=t?.target?.value,this.updateInviteeLink()}updateAffiliateCoupon(t){const n=t.target?.value;if(n&&this.agentCouponList){const o=this.agentCouponList.find(r=>r.CoupounCode===n);this.selectedCoupon=o,o&&(this.isCouponSelected=!0,this.inviterAffiliateCoupon=n,this.updateInviteeLink())}else this.isCouponSelected=!1}checkIsEmailAlreadyUsed(){return new Promise((t,n)=>{this.itemService.searchAPIClean({compositionName:"the_user",searchKey:this.inviteeEmail,type:"primary_email"}).subscribe({next:r=>{this.isEmailChecking=!1,0===r.length?(this.isEmailChecking=!1,this.isInviteEmailValid=!1):(this.isInviteEmailValid=!0,this.invalidMessage="The user already has an account"),t(r)},error:r=>{this.isEmailChecking=!1,this.isInviteEmailValid=!1,console.error(r),n(r)},complete:()=>{}})})}updateEmailTemplate(){const t=`\n      <p>My dear friend ${this.inviteeFirstName} ${this.inviteeLastName},</p>\n      <p>I've recently started using this amazing app from BoomConsole.com.</p>\n      <p>It allows me to organize my web data on and off the internet and to share it with my community and friends. The BoomConsole web browser extension lets me describe and save web content in my private database where I can search and retrieve the information.</p>\n      <p>I think you will love it too!</p>\n      <p>Use BoomConsole to Organize Your Web</p>\n      <p>Capture your thoughts on Web Pages, Chats and Clients</p>\n      <p>The BoomConsole Filing System and Contacts are used to organize your internet experience!</p>\n      <ul>\n        <li><p>Capture ChatGPT, You.com, Google Bard & Poe.com chats to your personal database.</p></li>\n        <li><p>Upload your LinkedIn connections and Google maps data into your personal Contacts.</p></li>\n        <li><p>Make private and public comments on the websites you visit for future reference.</p></li>\n        <li><p>Share your information with groups and colleagues in your sphere.</p></li>\n      </ul>\n      <p>You can use the extension with Chrome, Edge, Brave, and Opera browsers (Firefox, Safari support coming soon).</p>\n      <p>It's my go-to tool for saving internet content, searching, viewing, and sharing ideas.</p>\n      <p>Click on my invitation link below to join and explore BoomConsole for more opportunities.</p>\n      <p><a href="${this.inviteeLink}" target="_blank"><u>Invitation Link</u></a></p>\n      <p>If you no longer wish to receive these emails, you can unsubscribe <a href="${this.unsubscribeLink}" target="_blank"><u>here</u></a>.</p>\n      <br>\n      <p>Best Regards,</p>\n      <p>${this.userName}</p>\n    `,n=this.templateFromEmailHistory?.body,o=this.templateFromEmailHistory?.toAddress,r=this.selectedEmailTemplate?.id,l=this.selectedEmailTemplate?.template;n&&!this.templateRendered?(this.inviteForm.patchValue({message:n,email:o}),this.templateRendered=!0):o&&!this.templateRendered?(this.inviteForm.patchValue({message:t,email:o}),this.templateRendered=!0):this.inviteForm.patchValue({message:t}),r&&this.inviteForm.patchValue({message:l,emailTemplate:r})}addInviteList(t){this.isEmailChecking=!0,this.isInviteEmailValid=!1,this.invalidMessage="Please enter valid email";const n=t.target.parentNode.parentNode.parentNode.querySelector('input[type="email"]'),o=n.value,l=o.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/);if(""===o||!l||this.inviteList.includes(o))return this.isInviteEmailValid=!0,this.isEmailChecking=!1,void(this.inviteList.includes(o)&&(this.invalidMessage="Email is already in list above"));this.itemService.searchAPIClean({compositionName:"the_user",searchKey:o,type:"primary_email"}).subscribe({next:d=>{this.isEmailChecking=!1,0===d.length?(this.inviteList.push(n.value),n.value="",this.isEmailChecking=!1):(this.isInviteEmailValid=!0,this.invalidMessage="The user already has an account")},error:d=>{this.isEmailChecking=!1,this.isInviteEmailValid=!1,console.error(d)},complete:()=>{}})}removeFromInviteList(t){this.inviteList=this.inviteList.filter(n=>n!==t)}sendInvite(t){var n=this;return(0,m.Z)(function*(){n.isInviteSending=!0,n.isTemplateValid=!0;const r=n.inviteForm.value.message,l=`You have been invited by your friend ${n.userName} to sign up in Boomconsole.`;if(!n.inviteForm.valid||n.isInviteEmailValid)return n.isInviteSending=!1,void(r||(n.isTemplateValid=!1));n.inviteForm.disable(),""==n.inviteeEmail&&n.templateFromEmailHistory?.toAddress&&(n.inviteeEmail=n.templateFromEmailHistory?.toAddress);const c={toAddress:n.inviteeEmail,heading:l,body:r,attachments:[],params:["promotional_marketing_email"]};(yield n.sendInviteEmail(c))?(n.updateInvitedFriends.emit(),n.isInviteSending=!1,n.inviteList=[n.inviteeEmail],t.resetForm(),n.inviteForm.reset(),n.inviteeFirstName="",n.inviteeLastName="",n.inviteeLink="",n.inviteForm.enable(),n.inviteForm.patchValue({emailTemplate:n.defaultTemplate?.id,affiliateCode:"",affiliateCoupon:""}),n.isCouponSelected=!1,n.updateEmailTemplate(),n.getEmailTemplates(),n._snackbarService.openSnackBar("Invitation sent successfully!","success")):n._snackbarService.openSnackBar("Invitation failed!","error")})()}addInvitees(t,n){var o=this;return new Promise((r,l)=>{const c={[X.Ls]:{subject:t,email:this.inviteList,details:n,timestamp:(new Date).toISOString()}};try{(0,T.joo)(c,null,null,null,Number(this.userId),null,null).then(function(){var d=(0,m.Z)(function*(g){o.updateInvitedFriends.emit(),r(g),yield T.smK.SyncDataOnline()});return function(g){return d.apply(this,arguments)}}()).catch(d=>l(d))}catch(d){l(d)}})}getInvitees(){this.itemService.getAll("invitees").subscribe({next:t=>{const o=t?.data.map(c=>{const d=[new Date(c?.data?.invitees?.timestamp).toLocaleString()],g=c?.data?.invitees?.email;let f;return g&&Array.isArray(g)&&(f=g.map(y=>({email:y,invitedTime:d}))),f}).flat().filter(function(c){return void 0!==c});o.sort((c,d)=>{const g=new Date(c?.invitedTime).getTime();return new Date(d?.invitedTime).getTime()-g});const r=[],l={};if(o.forEach(c=>{const{email:d,invitedTime:g}=c;l[d]?r.forEach(f=>{f.email===d&&f.invitedTime.push(g)}):(l[d]=[g],r.push({email:d,invitedTime:[g]}))}),this.invitedFriendsList=r,this.myFriends.length>0){const c=this.myFriends.map(d=>d.email);this.invitedFriendsList=this.invitedFriendsList.filter(d=>!c.includes(d.email))}},error:t=>{console.error(t)}})}sendInviteEmail(t){return new Promise((n,o)=>{this._nodeService.inviteEmail(t).subscribe({next:r=>{"200"===r.status&&"Opt Out Params Detected"===r.message?(this._snackbarService.openSnackBar("Opt Out Params Detected. Invitation not sent.","warning"),this.isInviteSending=!1,this.inviteForm.enable()):(n("resolved"),this.recordInviteeData(t))},error:r=>{console.error(r),this.isInviteSending=!1,this.inviteForm.enable(),this._snackbarService.openSnackBar("Sending invitation failed!","error"),o()}})})}recordInviteeData(t){var n=this;return(0,m.Z)(function*(){const o=t?.toAddress,r=n.inviterAffiliateCode?"agent":"friend",l={[X.gc]:{toAddress:o,inviterName:n.userName,inviterEmail:n.userEmail,inviterProfileImage:n.userProfileImage,inviterCode:n.inviterAffiliateCode?n.inviterAffiliateCode:"",tag:r,inviterConceptId:n.userConceptId,timestamp:(new Date).toISOString(),inviterIndentifierCode:t?.identifierCode}},c=yield(0,T.joo)(l,null,null,null,Number(n.userId),null,null),d=yield(0,T.J0M)(n.userConceptId),g="agent"===r?H.M7:H.cG;yield(0,T.GIn)(d,c,g,!0),yield T.smK.SyncDataOnline()})()}onChange(t){this.selected_value=t.target.value,this.selectedContact=!0}resursiveSearch(t){var n=this;return(0,m.Z)(function*(){let o;o=void 0!==t?{composition:t,listLinkers:[H.xq+"_s"],textSearch:""}:{composition:n.userCompositionId,listLinkers:[H.xq+"_s"],textSearch:""};const r=yield(0,T.zAo)(Number(o?.composition),[H.xq+"_s"],"");if(r){const c=r?.filter(d=>void 0!==d.data?.boomgpt?.crm_data);n.contacts=c.map(d=>{const g=d?.data?.boomgpt?.crm_data?.email,f=d?.data?.boomgpt?.crm_data?.name,y=d?.data?.boomgpt?.crm_data?.avatar;return{email:g,name:f,profile:y}}).filter(d=>d.email),n.allEmails=Array.from(new Set(n.contacts.map(d=>d.email)))}})()}toggleChosenOption(){this.showDropdown=!this.showDropdown,this.email?.reset(),this.firstName?.reset(),this.lastName?.reset(),this.showChosenOption||this.clearNames()}clearNames(){this.inviteeFirstName="",this.inviteeLastName="",this.updateEmailTemplate()}toggleDropdown(){this.showDropdown=!this.showDropdown}selectEmail(t){this.selectedEmail=t,this.showDropdown=!1,this.optionSelected.emit(t),this.inviteForm.get("email").setValue(t)}removeUserFromListItem(t){this.selectedEmails.splice(t,1)}searchUsers(t){const n=t.target.value.toLowerCase();this.searchResults=this.allEmails.filter(o=>o.toLowerCase().includes(n))}searchFocused(){this.showSearchDropdown=!0}resetSearch(t){this.searchResults=[],this.showSearchDropdown=!1,t.value=""}checkUser(t){const n=this.selectedEmails.indexOf(t);-1===n?this.selectedEmails.push(t):this.selectedEmails.splice(n,1),this.inviteList=this.selectedEmails}createEmailTemplate(){this.isCreateTemplateClicked=!0,this.inviteForm.reset(),this.selectedEmailTemplate="",this.inviteForm.patchValue({message:"",affiliateCode:"",affiliateCoupon:""}),this.emailTemplates=this.emailTemplates.map(t=>(t.isActive=!1,t)),this.inviteeLink=""}saveEmailTemplate(){var t=this;return(0,m.Z)(function*(){t.hasEmailTemplateTitle=!0;const n=t.inviteForm.value;n?.emailTemplateTitle||(t.hasEmailTemplateTitle=!1),t.isEmailTemplateSaving=!0,t.inviteForm.disable();const o=yield(0,T.Fsb)(X.GL,"",!0,t.userId,4,0),r=yield(0,T.Fsb)("title",n?.emailTemplateTitle,!1,t.userId,4,0),l=yield(0,T.Fsb)("template",n?.message,!1,t.userId,4,0);yield(0,T.b1S)(o?.id,r?.id,o?.id),yield(0,T.b1S)(o?.id,l?.id,o?.id);const c=yield(0,T.oFv)(o?.id);yield T.smK.SyncDataOnline();const d={id:c?.id,template:c?.data?.[X.GL]?.template,timestamp:c?.data?.[X.GL]?.timestamp,title:c?.data?.[X.GL]?.title};t.emailTemplates.push(d),t.inviteForm.enable(),t.selectedEmailTemplate=d,t.inviteForm.patchValue({message:d?.template,emailTemplate:Number(d?.id)}),t.isCreateTemplateClicked=!1,t.isEmailTemplateSaving=!1})()}updateSelectedEmailTemplate(t){var n=this;return(0,m.Z)(function*(){n.isEmailTemplateUpdating=!0,n.inviteForm.disable();const o=n.inviteForm.value,r=new T.MYZ;r.userId=n.userId,r.compositionId=Number(t?.id),r.patchObject={id:t?.id,title:t?.title,template:o.message},yield(0,T.hrH)(r).then(()=>{n._snackbarService.openSnackBar("Email template updated successfully!","success"),n.emailTemplates.forEach(l=>{l?.id===Number(o?.emailTemplate)&&(l.id=Number(t.id),l.template=o.message,l.timestamp=t?.timestamp,l.title=t?.title)}),n.isEmailTemplateUpdating=!1,n.inviteForm.enable(),n.selectedEmailTemplate={id:Number(t.id),template:o.message,timestamp:t?.timestamp,title:t?.title},n.inviteForm.patchValue({message:n.selectedEmailTemplate?.template,emailTemplate:Number(n.selectedEmailTemplate?.id)})}).catch(l=>{console.error("error",l),n._snackbarService.openSnackBar("Email template could not updated.","error"),n.isEmailTemplateUpdating=!1,n.inviteForm.enable()}),yield T.smK.SyncDataOnline()})()}deleteSelectedEmailTemplate(t){var r,n=this;window.confirm(`Are you sure you want to delete email template - '${t?.title}'?`)&&(this.isEmailTemplateDeleting=!0,this.inviteForm.disable(),this.itemService.deleteConcept(t?.id).subscribe({next:(r=(0,m.Z)(function*(){n._snackbarService.openSnackBar("Email template deleted successfully!","success"),n.emailTemplates=n.emailTemplates.filter(l=>l?.id!==t?.id),n.selectedEmailTemplate=n.defaultTemplate,n.isEmailTemplateDeleting=!1,n.inviteForm.enable(),n.inviteForm.patchValue({message:n.defaultTemplate?.template,emailTemplate:n.defaultTemplate?.id}),n.updateEmailTemplate()}),function(){return r.apply(this,arguments)}),error:r=>{console.error("error",r),this.inviteForm.enable(),this.isEmailTemplateDeleting=!1,this._snackbarService.openSnackBar("Email template could not deleted.","error")}}))}getEmailTemplates(){var t=this;return(0,m.Z)(function*(){t.hasEmailTemplateTitle=!0,t.isCreateTemplateClicked=!1;let n=yield(0,T.Yr4)(X.GL,t.userId,100,1);n=n?.filter(o=>Object.keys(o?.data?.[X.GL])?.length),t.emailTemplates=n?.map(o=>{const r=Number(o?.id),l=o?.data?.[X.GL];return l.id=r,l}),t.emailTemplates.unshift(t.defaultTemplate),t.selectedEmailTemplate=t.defaultTemplate,t.inviteForm.patchValue({message:t.defaultTemplate?.template})})()}selectTemplate(t){this.isCreateTemplateClicked=!1;const n=t?.target?.value,o=this.emailTemplates?.filter(r=>r?.id===Number(n))[0];this.selectedEmailTemplate=o,this.inviteForm.patchValue({message:this.selectedEmailTemplate?.template,emailTemplate:Number(this.selectedEmailTemplate.id)}),this.updateEmailTemplate()}copyInviteLink(t){const o=t.target.parentNode.parentNode.querySelector(".invite-link p")?.textContent;navigator?.clipboard?.writeText(o)}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(u.qu),e.Y36(Z.e),e.Y36(N.e),e.Y36(M.FF),e.Y36(N.e),e.Y36(G.o),e.Y36(O.s),e.Y36(pt.F))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-invite-template"]],viewQuery:function(n,o){if(1&n&&e.Gf(ls,5),2&n){let r;e.iGM(r=e.CRH())&&(o.contactEmailComponent=r.first)}},inputs:{inviterAffiliateCode:"inviterAffiliateCode",affiliateCodeList:"affiliateCodeList",templateFromEmailHistory:"templateFromEmailHistory",agentCouponList:"agentCouponList"},outputs:{optionSelected:"optionSelected",updateInvitedFriends:"updateInvitedFriends"},decls:52,vars:22,consts:[[3,"formGroup","ngSubmit"],["createFormId","ngForm"],[1,"row","my-2"],[1,"col-md-6","mb-2"],["for","firstName",1,"form-label"],[1,"text-danger"],["type","text","name","firstName","id","firstName","placeholder","Enter first name","required","","formControlName","firstName",1,"form-control","p-2","mb-1","shadow-none",3,"input"],["class","err_msg",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","name","lastName","id","lastName","placeholder","Enter last name","required","","formControlName","lastName",1,"form-control","p-2","mb-1","shadow-none",3,"input"],[1,"d-flex","justify-content-between"],["for","email",1,"form-label"],[1,"form-check","form-switch"],["type","email","name","email","id","email","placeholder","Enter email","required","","formControlName","email",1,"form-control","p-2","mb-1","shadow-none",3,"input"],["class","col-md-6 mb-2",4,"ngIf"],["class","selected-coupon",4,"ngIf"],[4,"ngIf"],[1,"col-md-12"],["for","InviteDetails",1,"form-label"],[1,"NgxEditor__Wrapper",3,"ngClass"],[3,"editor","toolbar"],["formControlName","message",3,"editor","placeholder"],["class","text-danger p-1 d-inline-block",4,"ngIf"],[1,"col-md-6"],[1,"d-flex","justify-content","gap-2"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"d-flex","justify-content-end","gap-2"],["sendingEmail",""],["type","submit","class","btn btn-primary",4,"ngIf","ngIfElse"],[1,"err_msg"],["for","affiliateCode",1,"form-label"],["formControlName","affiliateCode","required","",1,"form-select","py-2","shadow-none",3,"input"],["value","","selected","",1,"text-secondary"],[4,"ngFor","ngForOf"],[3,"value"],["for","affiliateCoupon",1,"form-label"],["id","affiliateCoupon","formControlName","affiliateCoupon",1,"form-select","py-2","shadow-none",3,"change"],["for","inviteLink",1,"form-label"],[1,"d-flex","gap-2","align-items-center","invite-link"],[1,"text-truncate","mb-0"],["type","button","title","Copy invite link",1,"btn-link",3,"click"],[1,"material-symbols-outlined"],[1,"selected-coupon"],[1,"coupon-details"],[1,"coupon-code"],[1,"discount"],["class","valid-till",4,"ngIf"],[1,"duration"],[4,"ngIf","ngIfElse"],["repeatingDuration",""],[1,"valid-till"],[1,"product-name"],["for","emailTemplate",1,"form-label"],["id","emailTemplate","formControlName","emailTemplate",1,"form-select","py-2","shadow-none",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","d-flex","align-items-end"],["type","button",1,"btn","btn-primary",3,"click"],[1,"material-symbols-outlined","align-middle"],["for","emailTemplateTitle",1,"form-label"],["type","text","name","emailTemplateTitle","id","emailTemplateTitle","placeholder","Enter template title","formControlName","emailTemplateTitle",1,"form-control","p-2","mb-1","shadow-none"],[1,"text-danger","p-1","d-inline-block"],["saveTemplate",""],["type","button",1,"btn","btn-warning",3,"click"],[1,"material-symbols-outlined",2,"vertical-align","middle"],["updateTemplate",""],["type","button",1,"btn","btn-danger",3,"click"],["deleteTemplate",""],[1,"btn","btn-primary","btn-disabled",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary"]],template:function(n,o){if(1&n){const r=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(r);const c=e.MAs(1);return e.KtG(o.sendInvite(c))}),e.TgZ(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"First Name "),e.TgZ(6,"span",5),e._uU(7,"*"),e.qZA()(),e.TgZ(8,"input",6),e.NdJ("input",function(c){return o.updateFirstName(c)}),e.qZA(),e.YNc(9,cs,2,0,"small",7),e.qZA(),e.TgZ(10,"div",3)(11,"label",8),e._uU(12,"Last Name "),e.TgZ(13,"span",5),e._uU(14,"*"),e.qZA()(),e.TgZ(15,"input",9),e.NdJ("input",function(c){return o.updateLastName(c)}),e.qZA(),e.YNc(16,ds,2,0,"small",7),e.qZA(),e.TgZ(17,"div",3)(18,"div",10)(19,"label",11),e._uU(20,"Email "),e.TgZ(21,"span",5),e._uU(22,"*"),e.qZA()(),e._UZ(23,"div",12),e.qZA(),e.TgZ(24,"input",13),e.NdJ("input",function(c){return o.updateEmail(c)}),e.qZA(),e.YNc(25,us,2,1,"small",7),e.qZA(),e.YNc(26,ps,10,2,"div",14),e.YNc(27,bs,7,1,"div",14),e.YNc(28,ys,9,1,"div",14),e.qZA(),e.YNc(29,As,16,10,"div",15),e.YNc(30,ks,12,1,"ng-container",16),e.YNc(31,Zs,7,1,"ng-container",16),e.TgZ(32,"div",2)(33,"div",17)(34,"label",18),e._uU(35,"Details: "),e.TgZ(36,"span",5),e._uU(37,"*"),e.qZA()(),e.TgZ(38,"div",19),e._UZ(39,"ngx-editor-menu",20)(40,"ngx-editor",21),e.qZA(),e.YNc(41,Is,2,0,"small",22),e.qZA()(),e.TgZ(42,"div",2)(43,"div",23)(44,"div",24),e.YNc(45,qs,4,2,"button",25),e.YNc(46,Us,13,4,"ng-container",16),e.qZA()(),e.TgZ(47,"div",23)(48,"div",26),e.YNc(49,Rs,5,1,"ng-template",null,27,e.W1O),e.YNc(51,Ls,4,0,"button",28),e.qZA()()()()}if(2&n){const r=e.MAs(1),l=e.MAs(50);e.Q6J("formGroup",o.inviteForm),e.xp6(9),e.Q6J("ngIf",o.firstName&&o.firstName.invalid&&(o.firstName.touched||r.submitted)),e.xp6(7),e.Q6J("ngIf",o.lastName&&o.lastName.invalid&&(o.lastName.touched||r.submitted)),e.xp6(9),e.Q6J("ngIf",o.email&&o.email.invalid&&(o.email.touched||r.submitted)||o.isInviteEmailValid),e.xp6(1),e.Q6J("ngIf",null==o.affiliateCodeList?null:o.affiliateCodeList.length),e.xp6(1),e.Q6J("ngIf",null==o.agentCouponList?null:o.agentCouponList.length),e.xp6(1),e.Q6J("ngIf",(null==o.affiliateCodeList?null:o.affiliateCodeList.length)&&o.inviteeLink),e.xp6(1),e.Q6J("ngIf",o.isCouponSelected),e.xp6(1),e.Q6J("ngIf",null==o.affiliateCodeList?null:o.affiliateCodeList.length),e.xp6(1),e.Q6J("ngIf",o.isCreateTemplateClicked),e.xp6(7),e.Q6J("ngClass",e.VKq(20,Bs,!o.isTemplateValid)),e.xp6(1),e.Q6J("editor",o.editor)("toolbar",o.toolbar),e.xp6(1),e.Q6J("editor",o.editor)("placeholder","Write your invitation detail here..."),e.xp6(1),e.Q6J("ngIf",!o.isTemplateValid),e.xp6(4),e.Q6J("ngIf",o.isCreateTemplateClicked),e.xp6(1),e.Q6J("ngIf",(null==o.affiliateCodeList?null:o.affiliateCodeList.length)&&0!==o.selectedEmailTemplate.id&&o.selectedEmailTemplate),e.xp6(5),e.Q6J("ngIf",!o.isInviteSending)("ngIfElse",l)}},dependencies:[p.mk,p.sg,p.O5,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.Q7,u.sg,u.u,me.tP,me.Mn,p.uU],styles:['.level-box[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:.5rem;padding:1rem;text-align:center}.level-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fd7088;font-weight:700}.level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{opacity:.8}.mf-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;border:none;margin:1.25rem 0 1.5rem}.mf-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#fff;border-radius:0;color:#333}.mf-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));color:#fff;border:none}h2[_ngcontent-%COMP%]{color:#fd7088;font-size:1.5rem}.email-list[_ngcontent-%COMP%]{margin:1rem 0}.email-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;flex-wrap:wrap;background:#eee;padding:.75rem .5rem;margin-bottom:1rem;border-radius:4px}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]{cursor:pointer;color:#aaa}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]:hover, .email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]:focus{color:#f14141}.email-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#dedede;border-radius:1.5rem;padding:.5rem .75rem;margin-right:.5rem;margin-bottom:.5rem}.email-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.email-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]:hover{color:red}.invite-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}  .NgxEditor__Content{min-height:320px;height:400px;overflow-y:scroll}.code-list[_ngcontent-%COMP%]{padding-left:0;min-height:300px;max-height:calc(100vh - 370px);overflow-y:auto}.code-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.code-copy[_ngcontent-%COMP%]{background-color:#eee;border-radius:6px;display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem}.code-copy[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#666}.code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover, .code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:focus{color:#d55b1e}.code-loading[_ngcontent-%COMP%]{margin-top:80px}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{line-height:1.5}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%]{border-bottom:none}.btn-custom[_ngcontent-%COMP%], .btn-link[_ngcontent-%COMP%]{border:1px solid #dedede;background-color:#fff;font-size:.875rem;padding:.25rem 1rem;color:#666;display:flex;align-items:center;gap:.25rem}.btn-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .btn-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.25rem}.btn-custom[_ngcontent-%COMP%]:hover, .btn-link[_ngcontent-%COMP%]:hover, .btn-custom[_ngcontent-%COMP%]:focus, .btn-link[_ngcontent-%COMP%]:focus{background-color:#dedede}.btn-link[_ngcontent-%COMP%]{text-decoration:none;background:#eee;border-radius:4px}.empty-agreement[_ngcontent-%COMP%]{padding:2rem 1rem}.empty-agreement[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:4rem!important;padding-bottom:1rem}.avatar[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%}.btn-close[_ngcontent-%COMP%]{cursor:pointer}.list[_ngcontent-%COMP%]{padding:0 1rem;margin:.75rem 0 0;max-height:260px;overflow-y:auto}.following-list[_ngcontent-%COMP%]{padding:.75rem .5rem;border-bottom:1px solid #efefef;border-radius:4px;list-style:none;cursor:pointer}.following-list[_ngcontent-%COMP%]:hover{background-color:#eee}.profile_img[_ngcontent-%COMP%]{width:40px;float:left;margin-right:10px}.profile_img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.following-list[_ngcontent-%COMP%]:last-child{border-bottom:none}.following-image[_ngcontent-%COMP%]{position:relative}.following-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border:1px solid #ddd;border-radius:8px}.following-image[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:1.125rem;position:absolute;bottom:-4px;right:8px;font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 48}.share_wrapper[_ngcontent-%COMP%]{position:relative}.modal-title[_ngcontent-%COMP%]{clear:both;display:inline-block;overflow:hidden;white-space:nowrap;font-size:20px;text-overflow:ellipsis}.share_user_search[_ngcontent-%COMP%]{position:relative}.share_user_search[_ngcontent-%COMP%]   .share_user_search_input[_ngcontent-%COMP%]{height:45px;box-shadow:none}.share_user_search[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:absolute;color:#ccc;right:20px;top:50%;transform:translateY(-50%)}.share_user_search[_ngcontent-%COMP%]   .material-symbols-outlined.check-icon[_ngcontent-%COMP%]{right:10px;bottom:-4px;top:auto;transform:none;color:#333}.search_dropdown.show[_ngcontent-%COMP%]{display:block}.search_dropdown[_ngcontent-%COMP%]{display:none;width:94%;background-color:#fff;border-radius:10px;padding:20px;box-shadow:#959da533 0 8px 24px;position:absolute;top:100%;left:3%;color:#777;z-index:1}.search_dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.search_dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:10px 0}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;line-height:35px}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:relative;top:5px;font-size:22px}.item_chip[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:40px;background-color:#f3f3f3;margin:5px}.item_chip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;background-color:#eee}.item_chip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{display:inline-block;font-size:22px;position:relative;top:4px}.post_message[_ngcontent-%COMP%]{min-height:200px;box-shadow:#0000000f 0 2px 4px inset}.post_message[_ngcontent-%COMP%]:hover{box-shadow:#00000021 0 2px 4px inset}.post_message[_ngcontent-%COMP%]:focus{box-shadow:#00000021 0 2px 4px inset}.btn-dropdown[_ngcontent-%COMP%]{padding:5px 30px 5px 20px;text-transform:capitalize}.btn-dropdown[_ngcontent-%COMP%]:hover{background:#eee}.error_msg[_ngcontent-%COMP%]{background-color:#e86a6a;color:#fff}.mf-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;border:none}.mf-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#fff;border-radius:0;color:#333;border:1px solid #D9D9D9}.mf-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .mf-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus{opacity:.75}.mf-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));color:#f7f4f4;border:1px solid transparent}.custom-select-container[_ngcontent-%COMP%]{position:relative}.selected-option[_ngcontent-%COMP%]{cursor:pointer;padding:8px;border:1px solid #ccc;border-radius:4px}.btn-contact[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));padding:3px 4px;font-size:13px;border:none;color:#fff;border-radius:2px}.selected-coupon[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:10px;border-radius:5px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px}.coupon-details[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-size:14px;color:#333}.coupon-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.coupon-code[_ngcontent-%COMP%]{font-weight:700;color:#333}.discount[_ngcontent-%COMP%], .valid-till[_ngcontent-%COMP%]{color:#007bff}.duration[_ngcontent-%COMP%]{font-style:italic}.valid-till[_ngcontent-%COMP%]{font-size:12px;color:#555}']}),a})(),Ys=(()=>{const s=class{constructor(t,n,o,r,l,c,d){this.formBuilder=t,this.itemService=n,this.authService=o,this.modalService=r,this._authService=l,this.dialog=c,this._captureService=d,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"],["image"]],this.activeTab=1,this.allEmails=[],this.inviteList=[],this.isInviteSending=!1,this.isTemplateValid=!0,this.isInviteEmailValid=!1,this.invalidMessage="",this.isEmailChecking=!1,this.userEmail="",this.userName="",this.userProfileImage="",this.selectedEmails=[],this.showSearchDropdown=!1,this.selected_value="",this.friendsList=[],this.invitedFriendsList=[],this.myFriends=[],this.inviteFriendsQRurl="",this.showPopup=!1,this.updateTabSelection=new e.vpe,this.inviteForm=this.formBuilder.group({message:new u.NI("",[u.kI.required])});const g=this._authService.loadFromLocalStorage();this.userCompositionId=g.userConcept}get subject(){return this.inviteForm.get("subject")}get message(){return this.inviteForm.get("message")}ngOnInit(){var t=this;return(0,m.Z)(function*(){const o=(yield t._captureService.getCategories(t.userCompositionId))?.data?.find(l=>"Contacts"==l?.name);void 0!==o?.id&&t.resursiveSearch(o?.id);const r=t.authService.loadFromLocalStorage();t.userConceptId=r?.userConcept,t.userEmail=r?.email,t.userId=r?.theUserId,t.userProfile=r,t.createInviteFriendsQR(),t.checkFriendsList(),t.setupInviteTemplate(),t.getFriendsList(),t.updateTabSelection.emit(1)})()}togglePopup(){this.showPopup=!this.showPopup}openInviteDialog(){this.dialog.open(It,{width:"200px"})}createInviteFriendsQR(){const t={inviterConceptId:this.userConceptId,inviterEmail:this.userEmail,inviterCode:"",tag:"friend",timestamp:(new Date).toISOString()},n=window.btoa(JSON.stringify(t));let o=window.location.protocol+"//"+window.location.hostname+"/signup";o+=`?invite=${n}`;try{ze.toDataURL(o,{errorCorrectionLevel:"H",width:900,type:"image/jpeg"}).then(r=>{this.inviteFriendsQRurl=r}).catch(r=>{console.error(r)})}catch(r){console.error("Error generating QR code",r)}}checkFriendsList(){(0,T.eHe)([{composition:this.userConceptId,listLinkers:[`${H.ym}_s`],inpage:1e3,page:1,logic:"or",filterSearches:[],type:"",linker:"",fullLinkers:[],textSearch:"",reverse:!1,doFilter:!1,selectors:[],ofCompositions:[]},{listLinkers:["bought_s"],inpage:1e3,page:1,logic:"or",filterSearches:[],composition:0,type:"",linker:"",fullLinkers:[],textSearch:"",reverse:!1,doFilter:!1,selectors:[],ofCompositions:[]}]).then(n=>{const o=n?.the_user?.the_user_s_friend_s?.length;let r=[];o&&(r=n?.the_user?.the_user_s_friend_s.map(c=>{const d=c?.the_user?.data,g=c?.the_user?.the_user_s_bought_s;let f=[];return g&&g?.length>0&&(f=g.map(k=>{const Y=k?.internal_sales_item?.data,V=Y?.productId,P=(Y.commissionRate||0)/100,W=Number(Y?.price)/100*P,ne=Number(Y?.price)/100,ee=Number(5)/100,ye=Number((W*ee).toFixed(2)),$e={price:ne,reward:Number(ye)};return V&&($e.productId=V),$e})),{name:`${d?.entity?.data?.person?.data?.first_name} ${d?.entity?.data?.person?.data?.last_name}`,email:d?.user_data?.data?.primary_email,friendBuys:f}})),this.getPlanDetails(r)})}getPlanDetails(t){const r=[...t.map(c=>c.friendBuys).flat()].map(c=>c.productId),l=[...new Set(r)];this.itemService.getUserReports(l).subscribe({next:c=>{this.myFriends=t.map(d=>{const g={...d},f=g?.friendBuys.map(y=>(c.forEach(k=>{k.id==y.productId&&(y.productName=k?.data?.internal_product?.name,y.productBrand=k?.data?.internal_product?.brand,y.tag="friend")}),y));return g.friendBuys=f,g}),this.myFriends=this.myFriends.filter(d=>d?.friendBuys.length),this.getInvitees()}})}getFriendsList(){var t=this;return(0,m.Z)(function*(){const o=[{composition:Number(t.userProfile?.entityId),listLinkers:[H.ym+"_s"],inpage:100,page:1,logic:"or",filterSearches:[],type:"",linker:"",fullLinkers:[],textSearch:"",reverse:!1,doFilter:!1,selectors:[],ofCompositions:[]},{fullLinkers:["the_entity_user"],listLinkers:["friend_s"],inpage:100,page:1,logic:"or",filterSearches:[],composition:0,type:"",linker:"",textSearch:"",reverse:!1,doFilter:!1,selectors:[],ofCompositions:[]},{fullLinkers:["the_entity_user"],inpage:100,page:1,logic:"or",filterSearches:[],composition:0,type:"",linker:"",listLinkers:[],textSearch:"",reverse:!1,doFilter:!1,selectors:[],ofCompositions:[]}];(0,T.eHe)(o).then(r=>{let l=r?.the_entity?.the_entity_s_friend_s||[];const c=[];l=l?.map(g=>(g?.the_entity?.the_entity_s_friend_s&&c.push(g?.the_entity?.the_entity_s_friend_s?.[0]?.the_entity?.the_entity_user?.[0]),g?.the_entity?.the_entity_user?.[0])),t.friendsList={firstLevel:l,secondLevel:c,thirdLevel:[]}}).catch(r=>{console.error("Error fetching captures:",r)})})()}getEntityId(){return new Promise(t=>{this.itemService.checkEnitity(this.userConceptId).subscribe({next:n=>{const o=n?.entity;t(o)},error:n=>{console.error(n)}})})}_getFriendsList(){(0,T.eHe)([{composition:this.userConceptId,listLinkers:[H.ym+"_s"],inpage:1e3,page:1,logic:"or",type:"",linker:"",fullLinkers:[],textSearch:"",reverse:!1,doFilter:!1,filterSearches:[],selectors:[],ofCompositions:[]},{listLinkers:[H.ym+"_s"],inpage:1e3,page:1,logic:"or",composition:0,type:"",linker:"",fullLinkers:[],textSearch:"",reverse:!1,doFilter:!1,filterSearches:[],selectors:[],ofCompositions:[]},{listLinkers:[H.ym+"_s"],inpage:1e3,page:1,logic:"or",composition:0,type:"",linker:"",fullLinkers:[],textSearch:"",reverse:!1,doFilter:!1,filterSearches:[],selectors:[],ofCompositions:[]},{listLinkers:[H.ym+"_s"],inpage:1e3,page:1,logic:"or",composition:0,type:"",linker:"",fullLinkers:[],textSearch:"",reverse:!1,doFilter:!1,filterSearches:[],selectors:[],ofCompositions:[]}]).then(n=>{const o=n?.the_user?.the_user_s_friend_s||[];let r=[],l=[];o?.forEach(c=>{c?.the_user?.the_user_s_friend_s?.length>0&&(r=[...r,...c?.the_user?.the_user_s_friend_s])}),r?.forEach(c=>{c?.the_user?.the_user_s_friend_s?.length>0&&(l=[...l,...c?.the_user?.the_user_s_friend_s])}),this.friendsList={firstLevel:o,secondLevel:r,thirdLevel:l}})}setupInviteTemplate(){this.editor=new me.ML,this.itemService.getUserReports([this.userConceptId]).subscribe({next:t=>{const n=t[0]?.data?.the_user?.entity;this.userName=`${n?.first_name} ${n?.last_name}`,this.userProfileImage=n?.person?.profile_img?n?.person?.profile_img:"./assets/man.png",this.inviteForm.patchValue({message:`\n          <p>My dear friend,</p>\n          <p>I've recently started using this amazing app from BoomConsole.com.</p>\n          <p>It allows me to organize my web data on an off the internet and to share it with my community and friends. The BoomConsole web browser extension lets me describe and save web content in my private database where I can search and retrieve the information.</p>\n          <p>I think you will love it too!</p>\n          <p>Use BoomConsole to Organize Your Web</p>\n          <p>Capture your thoughts on Web Pages, Chats and Clients</p>\n          <p>The BoomConsole Filing System and Contacts are used to organize your internet experience!</p>\n          <ul>\n            <li><p>Capture ChatGPT, You.com, Google Bard & Poe.com chats to your personal database.</p></li>\n            <li><p>Upload your LinkedIn connections and Google maps data in to your personal Contacts.</p></li>\n            <li><p>Make private and public comments on the websites you visit for future reference.</p></li>\n            <li><p>Share your information with groups and colleagues in your sphere.</p></li>\n          </ul>\n          <p>You can use the extension with Chrome, Edge, Brave and Opera browsers (Firefox, Safari support coming soon).</p>\n          <p>It's my go-to tool for saving internet content, searching, viewing, and sharing ideas.</p>\n          <p>Click on my invitation link (will be in bottom of the email) to join and\n            visit <a href="https://boomconsole.com/" target="_blank">BoomConsole.com</a> for more.</p>\n          <p>Best Regards,</p>\n          <p>${this.userName}</p>\n        `})}})}addInviteList(t){this.isEmailChecking=!0,this.isInviteEmailValid=!1,this.invalidMessage="Please enter valid email";const n=t.target.parentNode.parentNode.parentNode.querySelector('input[type="email"]'),o=n.value,l=o.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/);if(""===o||!l||this.inviteList.includes(o))return this.isInviteEmailValid=!0,this.isEmailChecking=!1,void(this.inviteList.includes(o)&&(this.invalidMessage="Email is already in list above"));this.itemService.searchAPIClean({compositionName:"the_user",searchKey:o,type:"primary_email"}).subscribe({next:d=>{this.isEmailChecking=!1,0===d?.length?(this.inviteList.push(n.value),n.value="",this.isEmailChecking=!1):(this.isInviteEmailValid=!0,this.invalidMessage="The user already has an account")},error:()=>{this.isEmailChecking=!1,this.isInviteEmailValid=!1},complete:()=>{}})}removeFromInviteList(t){this.inviteList=this.inviteList.filter(n=>n!==t)}sendInviteEmail(t){return new Promise(n=>{this.itemService.sendEmail(t).subscribe({next:()=>{n("resolved"),this.recordInviteeData(t),this.selectedContact=!1,this.inviteList=[]},error:()=>{this.isInviteSending=!1}})})}recordInviteeData(t){const n=t?.toAddress,o={compositionJsons:[{[X.gc]:{toAddress:n,inviterName:this.userName,inviterEmail:this.userEmail,inviterProfileImage:this.userProfileImage,inviterCode:"",tag:"friend",inviterConceptId:this.userConceptId,timestamp:(new Date).toISOString(),inviterIndentifierCode:t?.identifierCode}}],compositionToJoin:this.userConceptId,direction:"backward",linker:H.Es,both:!0,count:!0,userId:this.userId};this.itemService.createCompositionAndLinkerWithoutAuth(o).subscribe({next:()=>{}})}addInvitees(t,n){const o={[X.Ls]:{subject:t,email:this.inviteList,details:n,timestamp:(new Date).toISOString()}};this.itemService.create(o).subscribe({next:()=>{this.getInvitees()}})}getInvitees(){this.itemService.getAll("invitees").subscribe({next:t=>{const o=t?.data.map(c=>{const d=[new Date(c?.data?.invitees?.timestamp).toLocaleString()],g=c?.data?.invitees?.email;let f;return g&&Array.isArray(g)&&(f=g.map(y=>({email:y,invitedTime:d}))),f}).flat().filter(function(c){return void 0!==c});o.sort((c,d)=>{const g=new Date(c?.invitedTime).getTime();return new Date(d?.invitedTime).getTime()-g});const r=[],l={};if(o.forEach(c=>{const{email:d,invitedTime:g}=c;l[d]?r.forEach(f=>{f.email===d&&f.invitedTime.push(g)}):(l[d]=[g],r.push({email:d,invitedTime:[g]}))}),this.invitedFriendsList=r,this.myFriends?.length>0){const c=this.myFriends.map(d=>d.email);this.invitedFriendsList=this.invitedFriendsList.filter(d=>!c.includes(d.email))}}})}openFriendsModal(t=this.friendsList,n="string"){const o=this.modalService.open(Qo,{size:"md"});o.componentInstance.friendsList=t,o.componentInstance.modalHeader=n}openInvitedFriendsModal(){this.modalService.open($o,{size:"lg"}).componentInstance.invitedFriendsList=this.invitedFriendsList}onChange(t){this.selected_value=t.target.value,this.selectedContact=!0}resursiveSearch(t){let n;n=void 0!==t?{composition:t,listLinkers:[H.xq+"_s"],textSearch:""}:{composition:this.userCompositionId,listLinkers:[H.xq+"_s"],textSearch:""},this.itemService.recursiveSearchNestedLinks(n).subscribe(o=>{const r=o?.filter(l=>{const d=l.data?.boomgpt?.data_type;return"extension_linkedin"===d||"extension_whatsapp"===d});this.linkedinEmails=r.map(l=>l?.data?.boomgpt?.crm_data?.email),this.whatsappEmails=r.map(l=>l?.dta?.boomgpt?.crm_data?.email),this.allEmails=this.linkedinEmails})}removeUserFromListItem(t){this.selectedEmails.splice(t,1)}searchUsers(t){const n=t.target.value.toLowerCase();this.searchResults=this.allEmails.filter(o=>o.toLowerCase().includes(n))}searchFocused(){this.showSearchDropdown=!0}resetSearch(t){this.searchResults=[],this.showSearchDropdown=!1,t.value=""}checkUser(t){const n=this.selectedEmails.indexOf(t);-1===n?this.selectedEmails.push(t):this.selectedEmails.splice(n,1),this.inviteList=this.selectedEmails}updateInvitedFriends(t){console.warn("event",t),this.checkFriendsList()}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(u.qu),e.Y36(Z.e),e.Y36(N.e),e.Y36(M.FF),e.Y36(N.e),e.Y36(gt.uw),e.Y36(pt.F))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-friends-panel-friends"]],inputs:{active:"active"},outputs:{updateTabSelection:"updateTabSelection"},decls:3,vars:0,consts:[[1,"row","mt-0"],[1,"col-md-12"],[3,"updateInvitedFriends"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-invite-template",2),e.NdJ("updateInvitedFriends",function(l){return o.updateInvitedFriends(l)}),e.qZA()()())},dependencies:[_t],styles:['.level-box[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:.5rem;padding:1rem;text-align:center}.level-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fd7088;font-weight:700}.level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{opacity:.8}.mf-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;border:none;margin:1.25rem 0 1.5rem}.mf-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#fff;border-radius:0;color:#333}.mf-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));color:#fff;border:none}h2[_ngcontent-%COMP%]{color:#fd7088;font-size:1.5rem}.email-list[_ngcontent-%COMP%]{margin:1rem 0}.email-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;flex-wrap:wrap;background:#eee;padding:.75rem .5rem;margin-bottom:1rem;border-radius:4px}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]{cursor:pointer;color:#aaa}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]:hover, .email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]:focus{color:#f14141}.email-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#dedede;border-radius:1.5rem;padding:.5rem .75rem;margin-right:.5rem;margin-bottom:.5rem}.email-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.email-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]:hover{color:red}.invite-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}  .NgxEditor__Content{min-height:320px}.code-list[_ngcontent-%COMP%]{padding-left:0;min-height:300px;max-height:calc(100vh - 370px);overflow-y:auto}.code-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.code-copy[_ngcontent-%COMP%]{background-color:#eee;border-radius:6px;display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem}.code-copy[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#666}.code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover, .code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:focus{color:#d55b1e}.code-loading[_ngcontent-%COMP%]{margin-top:80px}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{line-height:1.5}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%]{border-bottom:none}.btn-custom[_ngcontent-%COMP%]{border:1px solid #dedede;background-color:#fff;font-size:.875rem;padding:.25rem 1rem;color:#666;display:flex;align-items:center;gap:.25rem}.btn-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.25rem}.btn-custom[_ngcontent-%COMP%]:hover, .btn-custom[_ngcontent-%COMP%]:focus{background-color:#dedede}.empty-agreement[_ngcontent-%COMP%]{padding:2rem 1rem}.empty-agreement[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:4rem!important;padding-bottom:1rem}.avatar[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%}.btn-close[_ngcontent-%COMP%]{cursor:pointer}.list[_ngcontent-%COMP%]{padding:0 1rem;margin:.75rem 0 0;max-height:260px;overflow-y:auto}.following-list[_ngcontent-%COMP%]{padding:.75rem .5rem;border-bottom:1px solid #efefef;border-radius:4px;list-style:none;cursor:pointer}.following-list[_ngcontent-%COMP%]:hover{background-color:#eee}.following-list[_ngcontent-%COMP%]:last-child{border-bottom:none}.following-image[_ngcontent-%COMP%]{position:relative}.following-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border:1px solid #ddd;border-radius:8px}.following-image[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:1.125rem;position:absolute;bottom:-4px;right:8px;font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 48}.share_wrapper[_ngcontent-%COMP%]{position:relative}.modal-title[_ngcontent-%COMP%]{clear:both;display:inline-block;overflow:hidden;white-space:nowrap;font-size:20px;text-overflow:ellipsis}.share_user_search[_ngcontent-%COMP%]{position:relative}.share_user_search[_ngcontent-%COMP%]   .share_user_search_input[_ngcontent-%COMP%]{height:45px;box-shadow:none}.share_user_search[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:absolute;color:#ccc;right:20px;top:50%;transform:translateY(-50%)}.share_user_search[_ngcontent-%COMP%]   .material-symbols-outlined.check-icon[_ngcontent-%COMP%]{right:10px;bottom:-4px;top:auto;transform:none;color:#333}.search_dropdown.show[_ngcontent-%COMP%]{display:block}.search_dropdown[_ngcontent-%COMP%]{display:none;width:94%;background-color:#fff;border-radius:10px;padding:20px;box-shadow:#959da533 0 8px 24px;position:absolute;top:100%;left:3%;color:#777;z-index:1}.search_dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.search_dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:10px 0}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;line-height:35px}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:relative;top:5px;font-size:22px}.item_chip[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:40px;background-color:#f3f3f3;margin:5px}.item_chip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;background-color:#eee}.item_chip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{display:inline-block;font-size:22px;position:relative;top:4px}.post_message[_ngcontent-%COMP%]{min-height:200px;box-shadow:#0000000f 0 2px 4px inset}.post_message[_ngcontent-%COMP%]:hover{box-shadow:#00000021 0 2px 4px inset}.post_message[_ngcontent-%COMP%]:focus{box-shadow:#00000021 0 2px 4px inset}.btn-dropdown[_ngcontent-%COMP%]{padding:5px 30px 5px 20px;text-transform:capitalize}.btn-dropdown[_ngcontent-%COMP%]:hover{background:#eee}.error_msg[_ngcontent-%COMP%]{background-color:#e86a6a;color:#fff}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006}.modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:15% auto;padding:20px;border:1px solid #888;width:80%}.close-btn[_ngcontent-%COMP%]{color:#aaa;float:right;font-size:28px;font-weight:700}.close-btn[_ngcontent-%COMP%]:hover, .close-btn[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}']}),a})();var qt=_(7009);function Js(a,s){1&a&&(e.TgZ(0,"small",33),e._uU(1," Please enter valid paypal email "),e.qZA())}function Qs(a,s){if(1&a&&(e.TgZ(0,"div",7)(1,"div",27)(2,"label",28),e._uU(3," Paypal email: "),e.TgZ(4,"span",29),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"div",30),e._UZ(7,"input",31),e.YNc(8,Js,2,0,"small",32),e.qZA()()()),2&a){e.oxw();const i=e.MAs(2),t=e.oxw(2);e.xp6(8),e.Q6J("ngIf",!t.isPaypalValid&&t.paypalEmail&&(t.paypalEmail.touched||i.submitted))}}function zs(a,s){1&a&&(e.TgZ(0,"small",33),e._uU(1," Please enter Bank name "),e.qZA())}function Hs(a,s){1&a&&(e.TgZ(0,"small",33),e._uU(1," Please enter Bank account number "),e.qZA())}function js(a,s){1&a&&(e.TgZ(0,"small",33),e._uU(1," Please enter SWIFT code "),e.qZA())}function Gs(a,s){if(1&a&&(e.TgZ(0,"div",7)(1,"div",27)(2,"label",34),e._uU(3," Bank name: "),e.TgZ(4,"span",29),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"div",30),e._UZ(7,"input",35),e.YNc(8,zs,2,0,"small",32),e.qZA()(),e.TgZ(9,"div",27)(10,"label",36),e._uU(11," Bank account number: "),e.TgZ(12,"span",29),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"div",30),e._UZ(15,"input",37),e.YNc(16,Hs,2,0,"small",32),e.qZA()(),e.TgZ(17,"div",27)(18,"label",38),e._uU(19," SWIFT code: "),e.TgZ(20,"span",29),e._uU(21,"*"),e.qZA()(),e.TgZ(22,"div",30),e._UZ(23,"input",39),e.YNc(24,js,2,0,"small",32),e.qZA()()()),2&a){e.oxw();const i=e.MAs(2),t=e.oxw(2);e.xp6(8),e.Q6J("ngIf",!t.isBankNameValid&&t.bankName&&(t.bankName.touched||i.submitted)),e.xp6(8),e.Q6J("ngIf",!t.isBankAcNumberValid&&t.bankAcNumber&&(t.bankAcNumber.touched||i.submitted)),e.xp6(8),e.Q6J("ngIf",!t.isTransferCodeValid&&t.transferCode&&(t.transferCode.touched||i.submitted))}}function $s(a,s){1&a&&(e.TgZ(0,"small",33),e._uU(1," Please enter valid BTC address "),e.qZA())}function Vs(a,s){if(1&a&&(e.TgZ(0,"div",7)(1,"div",27)(2,"label",40),e._uU(3," BTC wallet address: "),e.TgZ(4,"span",29),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"div",30),e._UZ(7,"textarea",41),e.YNc(8,$s,2,0,"small",32),e.qZA()()()),2&a){e.oxw();const i=e.MAs(2),t=e.oxw(2);e.xp6(8),e.Q6J("ngIf",t.btcAddress&&!t.isBTCValid&&(t.btcAddress.touched||i.submitted))}}function Ks(a,s){1&a&&(e.TgZ(0,"button",42),e._uU(1," Submit "),e.qZA())}function Ws(a,s){1&a&&(e.TgZ(0,"button",43)(1,"div",44)(2,"span",45),e._uU(3,"."),e.qZA()(),e._uU(4," Submitting... "),e.qZA()),2&a&&e.Q6J("disabled",!0)}function Xs(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",7)(1,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(i);const n=e.MAs(2),o=e.oxw(2);return e.KtG(o.submitPaymentForm(n))}),e.TgZ(3,"div",10)(4,"div",7)(5,"div",11)(6,"div",12)(7,"input",13),e.NdJ("change",function(n){e.CHM(i);const o=e.oxw(2);return e.KtG(o.selectPaymentMethod(n))}),e.qZA(),e.TgZ(8,"label",14),e._uU(9,"Paypal"),e.qZA()(),e.TgZ(10,"div",12)(11,"input",15),e.NdJ("change",function(n){e.CHM(i);const o=e.oxw(2);return e.KtG(o.selectPaymentMethod(n))}),e.qZA(),e.TgZ(12,"label",16),e._uU(13,"Bank"),e.qZA()(),e.TgZ(14,"div",12)(15,"input",17),e.NdJ("change",function(n){e.CHM(i);const o=e.oxw(2);return e.KtG(o.selectPaymentMethod(n))}),e.qZA(),e.TgZ(16,"label",18),e._uU(17,"BTC"),e.qZA()()()(),e.YNc(18,Qs,9,1,"div",19),e.YNc(19,Gs,25,3,"div",19),e.YNc(20,Vs,9,1,"div",19),e.TgZ(21,"div",20)(22,"p",21),e._uU(23," Contact "),e.TgZ(24,"a",22),e._uU(25,"support"),e.qZA(),e._uU(26," for more details about withdrawal amount, deduction or process. "),e.qZA()()(),e.TgZ(27,"div",23)(28,"button",24),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.isUpdatePaymentMethodActivated=!1)}),e._uU(29," Cancel "),e.qZA(),e.YNc(30,Ks,2,0,"button",25),e.YNc(31,Ws,5,1,"ng-template",null,26,e.W1O),e.qZA()()()}if(2&a){const i=e.MAs(32),t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.addPaymentForm),e.xp6(17),e.Q6J("ngIf","paypal"===t.selectedPaymentMethod),e.xp6(1),e.Q6J("ngIf","bank"===t.selectedPaymentMethod),e.xp6(1),e.Q6J("ngIf","btc"===t.selectedPaymentMethod),e.xp6(8),e.Q6J("disabled",t.isRequestSubmitting),e.xp6(2),e.Q6J("ngIf",!t.isRequestSubmitting)("ngIfElse",i)}}function er(a,s){if(1&a&&(e.TgZ(0,"div",49)(1,"div",50)(2,"h2"),e._uU(3,"PayPal"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",51),e._UZ(7,"img",52),e.qZA()()),2&a){const i=e.oxw(3);e.xp6(5),e.Oqu(null==i.paymentMethods||null==i.paymentMethods.paypal?null:i.paymentMethods.paypal.email)}}function tr(a,s){if(1&a&&(e.TgZ(0,"div",49)(1,"div",50)(2,"h2"),e._uU(3,"Bank"),e.qZA(),e.TgZ(4,"p",53),e._uU(5),e.qZA(),e.TgZ(6,"p",53),e._uU(7),e.qZA(),e.TgZ(8,"p",53),e._uU(9),e.qZA()(),e.TgZ(10,"div",51),e._UZ(11,"img",54),e.qZA()()),2&a){const i=e.oxw(3);e.xp6(5),e.Oqu(null==i.paymentMethods||null==i.paymentMethods.bank?null:i.paymentMethods.bank.name),e.xp6(2),e.Oqu(null==i.paymentMethods||null==i.paymentMethods.bank?null:i.paymentMethods.bank.acNumber),e.xp6(2),e.Oqu(null==i.paymentMethods||null==i.paymentMethods.bank?null:i.paymentMethods.bank.transferCode)}}function nr(a,s){if(1&a&&(e.TgZ(0,"div",49)(1,"div",50)(2,"h2"),e._uU(3,"BTC"),e.qZA(),e.TgZ(4,"p",53),e._uU(5),e.qZA()(),e.TgZ(6,"div",51),e._UZ(7,"img",55),e.qZA()()),2&a){const i=e.oxw(3);e.xp6(5),e.Oqu(null==i.paymentMethods||null==i.paymentMethods.btc?null:i.paymentMethods.btc.btcAddress)}}function ir(a,s){if(1&a){const i=e.EpF();e.YNc(0,er,8,1,"div",46),e.YNc(1,tr,12,3,"div",46),e.YNc(2,nr,8,1,"div",46),e.TgZ(3,"div",47)(4,"h3"),e._uU(5,"You can also add backup payment method"),e.qZA(),e.TgZ(6,"button",48),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.togglePaymentPanel())}),e._uU(7," Update Payment Method "),e.qZA()()}if(2&a){const i=e.oxw(2);e.Q6J("ngIf",null==i.paymentMethods?null:i.paymentMethods.paypal),e.xp6(1),e.Q6J("ngIf",null==i.paymentMethods?null:i.paymentMethods.bank),e.xp6(1),e.Q6J("ngIf",null==i.paymentMethods?null:i.paymentMethods.btc)}}function ar(a,s){if(1&a&&(e.ynx(0),e.YNc(1,Xs,33,7,"div",5),e.YNc(2,ir,8,3,"ng-template",null,6,e.W1O),e.BQk()),2&a){const i=e.MAs(3),t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isUpdatePaymentMethodActivated)("ngIfElse",i)}}function or(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",56)(1,"p",57),e._uU(2,"There is no payment methods yet."),e.qZA(),e.TgZ(3,"button",48),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.togglePaymentPanel())}),e._uU(4," Add Payment Method "),e.qZA()()}}let sr=(()=>{const s=class{constructor(t,n,o,r,l,c){this.formBuilder=t,this.itemService=n,this.snackBar=o,this.authService=r,this._snackbarService=l,this._nodeService=c,this.paymentMethods=[],this.paymentMethodsData=[],this.hasPaymentMethod=!1,this.isUpdatePaymentMethodActivated=!1,this.selectedPaymentMethod="paypal",this.isAmountValid=!0,this.isPaypalValid=!0,this.isBTCValid=!0,this.isBankNameValid=!0,this.isBankAcNumberValid=!0,this.isTransferCodeValid=!0,this.isRequestSubmitting=!1,this.userConceptId=0,this.totalReward=0,this.addPaymentForm=this.formBuilder.group({paymentMethod:new u.NI("paypal",[u.kI.required]),paypalEmail:new u.NI("",[u.kI.email,u.kI.pattern(/.+@.+\..+/)]),btcAddress:new u.NI("",[u.kI.pattern(/^(bc1|[13])[a-km-zA-HJ-NP-Z1-9]{25,34}$/)]),bankName:new u.NI("",[]),bankAcNumber:new u.NI("",[]),transferCode:new u.NI("",[])})}get paymentMethod(){return this.addPaymentForm.get("paymentMethod")}get paypalEmail(){return this.addPaymentForm.get("paypalEmail")}get btcAddress(){return this.addPaymentForm.get("btcAddress")}get bankName(){return this.addPaymentForm.get("bankName")}get bankAcNumber(){return this.addPaymentForm.get("bankAcNumber")}get transferCode(){return this.addPaymentForm.get("transferCode")}ngOnInit(){this.checkPaymentMethod()}checkPaymentMethod(){this._nodeService.getAllPaymentMethods().subscribe({next:t=>{this.paymentMethods=t,Object.keys(this.paymentMethods).length>0&&(this.hasPaymentMethod=!0),this.paymentMethods?.paypal&&this.addPaymentForm.patchValue({paypalEmail:this.paymentMethods?.paypal?.email}),this.paymentMethods?.bank&&this.addPaymentForm.patchValue({bankName:this.paymentMethods?.bank?.name,bankAcNumber:this.paymentMethods?.bank?.acNumber,transferCode:this.paymentMethods?.bank?.transferCode}),this.paymentMethods?.btc&&this.addPaymentForm.patchValue({btcAddress:this.paymentMethods?.btc?.btcAddress})},error:t=>{console.log(t)},complete:()=>{}})}submitPaymentForm(t){const n=this.addPaymentForm.value;if("paypal"===this.selectedPaymentMethod){if(!n?.paypalEmail)return this.isPaypalValid=!1,void(this.isRequestSubmitting=!1);this.isPaypalValid=!0}else if("btc"===this.selectedPaymentMethod){if(!n?.btcAddress||"INVALID"===this.addPaymentForm.status)return this.isBTCValid=!1,void(this.isRequestSubmitting=!1);this.isBTCValid=!0}else if("bank"===this.selectedPaymentMethod){if(n?.bankName&&n?.bankAcNumber&&n?.transferCode||(this.isRequestSubmitting=!1),!n?.bankName)return void(this.isBankNameValid=!1);if(this.isBankNameValid=!0,!n?.bankAcNumber)return void(this.isBankAcNumberValid=!1);if(this.isBankAcNumberValid=!0,!n?.transferCode)return void(this.isTransferCodeValid=!1);this.isTransferCodeValid=!0}if(!this.addPaymentForm.valid)return void(this.isRequestSubmitting=!1);this.isRequestSubmitting=!0,this.addPaymentForm.disable();const o=this.authService.loadFromLocalStorage();this.userConceptId=Number(o?.userConcept);let l={method:n?.paymentMethod,timestamp:(new Date).toISOString()};"paypal"===this.selectedPaymentMethod?l.email=n?.paypalEmail:"btc"===this.selectedPaymentMethod?l.btcAddress=n?.btcAddress:"bank"===this.selectedPaymentMethod&&(l.name=n?.bankName,l.acNumber=n?.bankAcNumber,l.transferCode=n?.transferCode),this.hasPaymentMethod?this.updatePaymentMethod(l):this.addPaymentMethod(l)}addPaymentMethod(t){this._nodeService.addPaymentMethod(t).subscribe({next:n=>{this.isRequestSubmitting=!1,this.checkPaymentMethod(),this.addPaymentForm.enable()},error:n=>{console.log("err"),this._snackbarService.openSnackBar("Payment method could not add!","error")},complete:()=>{this._snackbarService.openSnackBar("Payment method added successfully!","success")}})}updatePaymentMethod(t){this._nodeService.updatePaymentMethod(t).subscribe({next:n=>{this.isRequestSubmitting=!1,this.checkPaymentMethod(),this.addPaymentForm.enable()},error:n=>{console.log("err"),this._snackbarService.openSnackBar("Payment method could not update!","error")},complete:()=>{this._snackbarService.openSnackBar("Payment method updated successfully!","success")}})}_checkPaymentMethod(){this.itemService.getAllWithDataId(X.hb).subscribe({next:t=>{this.paymentMethodsData=t,t.length&&(this.paymentMethods=t[0]?.[X.hb]?.data),Object.keys(this.paymentMethods).length>1&&(this.hasPaymentMethod=!0),this.paymentMethods?.paypal&&this.addPaymentForm.patchValue({paypalEmail:this.paymentMethods?.paypal?.data?.email}),this.paymentMethods?.bank&&this.addPaymentForm.patchValue({bankName:this.paymentMethods?.bank?.data?.name,bankAcNumber:this.paymentMethods?.bank?.data?.acNumber,transferCode:this.paymentMethods?.bank?.data?.transferCode}),this.paymentMethods?.btc&&this.addPaymentForm.patchValue({btcAddress:this.paymentMethods?.btc?.data?.btcAddress})}})}togglePaymentPanel(){this.isUpdatePaymentMethodActivated=!0}_submitPaymentForm(t){const n=this.addPaymentForm.value;if("paypal"===this.selectedPaymentMethod){if(!n?.paypalEmail)return this.isPaypalValid=!1,void(this.isRequestSubmitting=!1);this.isPaypalValid=!0}else if("btc"===this.selectedPaymentMethod){if(!n?.btcAddress||"INVALID"===this.addPaymentForm.status)return this.isBTCValid=!1,void(this.isRequestSubmitting=!1);this.isBTCValid=!0}else if("bank"===this.selectedPaymentMethod){if(n?.bankName&&n?.bankAcNumber&&n?.transferCode||(this.isRequestSubmitting=!1),!n?.bankName)return void(this.isBankNameValid=!1);if(this.isBankNameValid=!0,!n?.bankAcNumber)return void(this.isBankAcNumberValid=!1);if(this.isBankAcNumberValid=!0,!n?.transferCode)return void(this.isTransferCodeValid=!1);this.isTransferCodeValid=!0}if(!this.addPaymentForm.valid)return void(this.isRequestSubmitting=!1);this.isRequestSubmitting=!0,this.addPaymentForm.disable();const o=this.authService.loadFromLocalStorage();this.userConceptId=Number(o?.userConcept);let r={},l={method:n?.paymentMethod,timestamp:(new Date).toISOString()};"paypal"===this.selectedPaymentMethod?l.email=n?.paypalEmail:"btc"===this.selectedPaymentMethod?l.btcAddress=n?.btcAddress:"bank"===this.selectedPaymentMethod&&(l.name=n?.bankName,l.acNumber=n?.bankAcNumber,l.transferCode=n?.transferCode),r[this.selectedPaymentMethod]=l,r.userConceptId=this.userConceptId,this.hasPaymentMethod?this.updatePaymentMethod(r):this.itemService.createCompositionAndLinker({compositionJsons:[{[X.hb]:r}],compositionToJoin:this.userConceptId,direction:"backward",linker:H.O6,both:!0,count:!0}).subscribe({next:d=>{this.isRequestSubmitting=!1},error:d=>{console.log(d),this._snackbarService.openSnackBar("Payment method could not add!","error")},complete:()=>{this._snackbarService.openSnackBar("Payment method added successfully!","success")}})}_updatePaymentMethod(t){const n=Object.keys(this.paymentMethods),o=n.indexOf("userConceptId");n.splice(o,1);const r=n[0];let l={};const c=this.paymentMethodsData[0][X.hb]?.id;if(Object.keys(t).includes(r))l={compositionId:c,patcher:{[r]:t[r]}};else{const d=Object.keys(t),g=d.indexOf("userConceptId");d.splice(g,1);const f=d[0];l={compositionId:c,patcher:{[f]:t[f]}}}this.itemService.patchv2(l).subscribe({next:d=>{this.isRequestSubmitting=!1,this.checkPaymentMethod(),this.addPaymentForm.enable()},error:d=>{console.log("err"),this._snackbarService.openSnackBar("Payment method could not update!","error")},complete:()=>{this._snackbarService.openSnackBar("Payment method updated successfully!","success")}})}selectPaymentMethod(t){this.selectedPaymentMethod=t?.target?.value}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(u.qu),e.Y36(Z.e),e.Y36(qt.ux),e.Y36(N.e),e.Y36(G.o),e.Y36(O.s))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-friends-panel-payment"]],decls:9,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12","mx-auto","border","rounded","py-4","px-5","data_panel_entry"],[4,"ngIf","ngIfElse"],["noPaymentMethod",""],["class","col-md-12",4,"ngIf","ngIfElse"],["paymentMethodDetails",""],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["requestForm","ngForm"],[1,"row","mt-0","mb-3"],[1,"row","my-2"],[1,"col-md-4"],["type","radio","name","paymentMethod","id","paypal","value","paypal","formControlName","paymentMethod",3,"change"],["for","paypal",1,"ms-1"],["type","radio","name","paymentMethod","id","bank","value","bank","formControlName","paymentMethod",3,"change"],["for","bank",1,"ms-1"],["type","radio","name","paymentMethod","id","btc","value","btc","formControlName","paymentMethod",3,"change"],["for","btc",1,"ms-1"],["class","col-md-12",4,"ngIf"],[1,"col-md-12","support"],[1,"mb-3","fs-6","text-secondary"],["href","mailto:info@boomconsole.com"],[1,"border-top","mb-3","pt-3","text-right","footer-buttons"],["type","button",1,"btn","btn-secondary","ms-3",3,"disabled","click"],["class","btn btn-primary ms-3","type","submit",4,"ngIf","ngIfElse"],["requesting",""],[1,"row","my-4"],["for","paypalEmail",1,"form-label"],[1,"text-danger"],[1,"col-md-8"],["type","email","name","paypalEmail","id","paypalEmail","placeholder","Enter paypal email...","formControlName","paypalEmail","email","",1,"form-control","p-2","mb-1","shadow-none"],["class","err_msg",4,"ngIf"],[1,"err_msg"],["for","bankName",1,"form-label"],["type","text","name","bankName","id","bankName","placeholder","Enter bank name...","formControlName","bankName",1,"form-control","p-2","mb-1","shadow-none"],["for","bankAcNumber",1,"form-label"],["type","text","name","bankAcNumber","id","bankAcNumber","placeholder","Enter bank account number...","formControlName","bankAcNumber",1,"form-control","p-2","mb-1","shadow-none"],["for","transferCode",1,"form-label"],["type","text","name","transferCode","id","transferCode","placeholder","Enter SWIFT code...","formControlName","transferCode",1,"form-control","p-2","mb-1","shadow-none"],["for","btcAddress",1,"form-label"],["name","btcAddress","id","btcAddress","cols","30","rows","2","placeholder","Enter BTC wallet address...","formControlName","btcAddress",1,"form-control","p-2","mb-1","shadow-none","resize-none"],["type","submit",1,"btn","btn-primary","ms-3"],[1,"btn","btn-primary","btn-disabled","ms-3",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["class","row my-2 payment-details",4,"ngIf"],[1,"col-md-12","add-payment"],[1,"btn","btn-primary",3,"click"],[1,"row","my-2","payment-details"],[1,"col-md-6"],[1,"col-md-6","text-center"],["src","../assets/paypal.png","alt","Paypal icon"],[1,"mb-0"],["src","../assets/mentor-friends/bank.png","alt","Bank icon"],["src","../assets/mentor-friends/bitcoin.png","alt","BTC logo"],[1,"my-5","py-4","text-center"],[1,"text-secondary"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4,"Payment Method"),e.qZA(),e.TgZ(5,"div",1),e.YNc(6,ar,4,2,"ng-container",3),e.YNc(7,or,5,0,"ng-template",null,4,e.W1O),e.qZA()()()()),2&n){const r=e.MAs(8);e.xp6(6),e.Q6J("ngIf",o.hasPaymentMethod||o.isUpdatePaymentMethodActivated)("ngIfElse",r)}},dependencies:[p.O5,u._Y,u.Fj,u._,u.JJ,u.JL,u.on,u.sg,u.u],styles:["h1[_ngcontent-%COMP%]{color:#fd7088;font-size:1.5rem;padding-bottom:.75rem;border-bottom:1px solid #333}p[_ngcontent-%COMP%]{color:#f2f2f2}.change-info[_ngcontent-%COMP%]{padding-top:30px}.visa-card[_ngcontent-%COMP%]{width:100%;height:200px;border-radius:5px;padding:10px;margin-top:20px;background-color:hwb(223 13% 45%);display:flex}.visa-card.container[_ngcontent-%COMP%]{display:inline-block;background-color:hwb(223 13% 45%);width:200px}.paypal[_ngcontent-%COMP%]{width:100%;height:200px;border-radius:5px;padding:10px;margin-top:20px;background-color:hwb(223 13% 45%);display:flex}.paypal-container[_ngcontent-%COMP%]{display:inline-block;background-color:hwb(223 13% 45%);width:200px}.image-container[_ngcontent-%COMP%]{width:auto;height:auto;display:inline-block;margin-left:250px;margin-top:20px;background-color:#22408b}.image-container-card[_ngcontent-%COMP%]{width:auto;height:auto;display:inline-block;margin-left:300px;margin-top:20px;background-color:#22408b}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:100px}.image-container-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px}.add-payment[_ngcontent-%COMP%]{border-radius:.5rem;padding:1.5rem .25rem;margin-top:1rem;background-color:transparent;border:1px solid #ddd;display:flex;align-items:center;justify-content:space-around}h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700}h2[_ngcontent-%COMP%]{color:#f2f2f2;font-size:1.3rem;margin-right:10px}.paypal-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .visa-card-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}.paypal-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .visa-card-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.payment-details[_ngcontent-%COMP%]{color:#fff;background-color:#22408b;border-radius:1rem;min-height:200px;padding:1rem;display:flex;align-items:center}.payment-details[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px}"]}),a})();function rr(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA()()),2&a){const i=s.$implicit;e.xp6(2),e.Oqu(null==i||null==i.payment?null:i.payment.receipt),e.xp6(2),e.Oqu(e.xi3(5,5,null==i?null:i.timestamp,"medium")),e.xp6(3),e.hij("$",null==i?null:i.amount,""),e.xp6(2),e.Oqu(null==i?null:i.paymentMethod),e.xp6(2),e.Oqu(null==i?null:i.status)}}function lr(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",5)(2,"table",6)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"Invoice"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Date"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Amount"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Withdrawn Method"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Status"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,rr,12,8,"tr",7),e.qZA()()(),e.BQk()),2&a){const i=e.oxw();e.xp6(16),e.Q6J("ngForOf",i.withdrawalList)}}function cr(a,s){1&a&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"p"),e._uU(4,"You have no withdraws yet."),e.qZA()()()())}let dr=(()=>{const s=class{constructor(t,n){this.itemService=t,this.authService=n,this.withdrawalList=[],this.totalReward=0,this.totalRemainingReward=0}ngOnInit(){const t=this.authService.loadFromLocalStorage();this.userConceptId=t?.userConcept,this.getCompletedWithdrawals()}getCompletedWithdrawals(){this.itemService.getSemanticConnection({compositionId:this.userConceptId,linker:`${H.hc}_s`}).subscribe({next:n=>{if(this.withdrawalList=n?.output?.map(o=>({...o?.data[X.sP]})),this.withdrawalList.length){const o=this.withdrawalList?.reduce((r,l)=>(l.amount&&(r=Number(l.amount)+r),Number(r.toFixed(2))),0);this.totalRemainingReward=Number((this.totalReward-o).toFixed(3))}else this.totalRemainingReward=Number(this.totalReward.toFixed(3))},error:n=>{console.log(n)},complete:()=>{}})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(Z.e),e.Y36(N.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-friends-panel-withdraw"]],decls:9,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12","mx-auto","border","rounded","py-4","px-5","data_panel_entry"],[4,"ngIf","ngIfElse"],["noWithdraw",""],[1,"table-responsive"],[1,"table","table-responsive","table-borderless","table-striped"],[4,"ngFor","ngForOf"],[1,"row","border-bottom","rounded","p-3"],[1,"col-md-12"],[1,"my-5","text-center"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4,"Withdrawn History"),e.qZA(),e.TgZ(5,"div",1),e.YNc(6,lr,17,1,"ng-container",3),e.YNc(7,cr,5,0,"ng-template",null,4,e.W1O),e.qZA()()()()),2&n){const r=e.MAs(8);e.xp6(6),e.Q6J("ngIf",o.withdrawalList.length)("ngIfElse",r)}},dependencies:[p.sg,p.O5,p.uU],styles:["h1[_ngcontent-%COMP%]{color:#fd7088;font-size:1.5rem;padding-bottom:.75rem;border-bottom:1px solid #333}"]}),a})();function ur(a,s){1&a&&e._UZ(0,"app-friends-panel-payment")}function mr(a,s){1&a&&e._UZ(0,"app-friends-panel-withdraw")}let gr=(()=>{const s=class{constructor(){this.updateSettingTab=new e.vpe,this.updateTabSelection=new e.vpe,this.updateTabSelection.emit(this.active)}updateNav(t){this.settingPageTab=t?.nextId,this.updateSettingTab.emit(this.settingPageTab)}};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-friends-panel-settings"]],inputs:{settingPageTab:"settingPageTab",active:"active"},outputs:{updateSettingTab:"updateSettingTab",updateTabSelection:"updateTabSelection"},decls:12,vars:4,consts:[[1,"mf-main"],["ngbNav","",1,"nav-tabs","mf-tabs",3,"activeId","navChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"ul",1,2),e.NdJ("navChange",function(l){return o.updateNav(l)}),e.TgZ(3,"li",3)(4,"a",4),e._uU(5,"Payment"),e.qZA(),e.YNc(6,ur,1,0,"ng-template",5),e.qZA(),e.TgZ(7,"li",3)(8,"a",4),e._uU(9,"Withdraw"),e.qZA(),e.YNc(10,mr,1,0,"ng-template",5),e.qZA()(),e._UZ(11,"div",6),e.qZA()),2&n){const r=e.MAs(2);e.xp6(1),e.Q6J("activeId",o.settingPageTab),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(4),e.Q6J("ngbNavOutlet",r)}},dependencies:[M.uN,M.Pz,M.nv,M.Vx,M.tO,sr,dr]}),a})();function pr(a,s){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const i=e.oxw();e.xp6(1),e.hij("(",i.agentAffiliates.length,")")}}function _r(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div")(5,"p",10),e._uU(6),e.qZA(),e.TgZ(7,"small",11),e._uU(8),e.qZA()()(),e.TgZ(9,"td")(10,"p"),e._uU(11),e.ALo(12,"UTCToLocalTime"),e.qZA()()()),2&a){const i=s.$implicit,t=s.index;e.xp6(2),e.Oqu(t+1),e.xp6(4),e.Oqu(i.name||"User"),e.xp6(2),e.Oqu(i.email),e.xp6(3),e.Oqu(e.lcZ(12,4,i.created_at))}}function hr(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",7)(2,"table",8)(3,"thead")(4,"tr"),e._UZ(5,"th"),e.TgZ(6,"th"),e._uU(7,"Name"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Affiliated time"),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,_r,13,6,"tr",9),e.qZA()()(),e.BQk()),2&a){const i=e.oxw();e.xp6(11),e.Q6J("ngForOf",i.agentAffiliates)}}function fr(a,s){1&a&&(e.TgZ(0,"p",12),e._uU(1,"There is no affiliate."),e.qZA())}let br=(()=>{const s=class{constructor(t){this.modal=t,this.agentAffiliates=[]}ngOnInit(){this.agentAffiliates=this.affiliatesList?.sort((t,n)=>new Date(n?.created_at).getTime()-new Date(t?.created_at).getTime()),this.totalRewards=this.totalReward}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(M.Kz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-affiliates-modal"]],inputs:{affiliatesList:"affiliatesList",totalReward:"totalReward"},decls:9,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],["tabindex","0",1,"btn-close",3,"keyup.enter","click"],[1,"modal-body","agent-modal-body"],[4,"ngIf","ngIfElse"],["noAffiliate",""],[1,"table-responsive"],[1,"table","affiliate-table"],[4,"ngFor","ngForOf"],[1,"mb-1"],[1,"d-block"],[1,"my-3"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2," Affiliates "),e.YNc(3,pr,2,1,"span",2),e.qZA(),e.TgZ(4,"span",3),e.NdJ("keyup.enter",function(){return o.modal.dismiss("Cross click")})("click",function(){return o.modal.dismiss("Cross click")}),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,hr,12,1,"ng-container",5),e.YNc(7,fr,2,0,"ng-template",null,6,e.W1O),e.qZA()),2&n){const r=e.MAs(8);e.xp6(3),e.Q6J("ngIf",o.agentAffiliates.length),e.xp6(3),e.Q6J("ngIf",o.agentAffiliates.length)("ngIfElse",r)}},dependencies:[p.sg,p.O5,St.u],styles:[".btn-close[_ngcontent-%COMP%]{cursor:pointer;outline:none}.agent-modal-body[_ngcontent-%COMP%]{padding:1rem 2rem;overflow-x:auto}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{line-height:1.5}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%]{border-bottom:none}"]}),a})();function yr(a,s){if(1&a&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&a){const i=s.$implicit;e.xp6(1),e.hij(" ",i," ")}}function Cr(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.YNc(6,yr,2,1,"p",9),e.qZA()()),2&a){const i=s.$implicit,t=s.index;e.xp6(2),e.Oqu(t+1),e.xp6(2),e.Oqu(i.email),e.xp6(2),e.Q6J("ngForOf",i.invitedTime)}}function vr(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",6)(2,"table",7)(3,"thead")(4,"tr"),e._UZ(5,"th"),e.TgZ(6,"th"),e._uU(7,"Email"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Invited time"),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,Cr,7,3,"tr",8),e.qZA()()(),e.BQk()),2&a){const i=e.oxw();e.xp6(11),e.Q6J("ngForOf",i.invitedList)}}function xr(a,s){1&a&&(e.TgZ(0,"div",11)(1,"p"),e._uU(2,"Not invited anyone yet."),e.qZA()())}let Ft=(()=>{const s=class{constructor(t){this.modal=t}ngOnInit(){this.invitedList=this.inviteeLists}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(M.Kz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-invitees-modal"]],inputs:{inviteeLists:"inviteeLists"},decls:8,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["tabindex","0",1,"btn-close",3,"keyup.enter","click"],[1,"modal-body","rounded","bg-light","py-3","my-0"],[4,"ngIf","ngIfElse"],["noInvitee",""],[1,"table","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["class","mb-0",4,"ngFor","ngForOf"],[1,"mb-0"],[1,"m-5","p-5","d-flex","align-items-center","justify-content-center","text-center"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Affiliate Invitees"),e.qZA(),e.TgZ(3,"span",2),e.NdJ("keyup.enter",function(){return o.modal.dismiss("Cross click")})("click",function(){return o.modal.dismiss("Cross click")}),e.qZA()(),e.TgZ(4,"div",3),e.YNc(5,vr,12,1,"ng-container",4),e.YNc(6,xr,3,0,"ng-template",null,5,e.W1O),e.qZA()),2&n){const r=e.MAs(7);e.xp6(5),e.Q6J("ngIf",o.invitedList.length>0)("ngIfElse",r)}},dependencies:[p.sg,p.O5],styles:[".btn-close[_ngcontent-%COMP%]{cursor:pointer}"]}),a})();function Tr(a,s){1&a&&(e.TgZ(0,"div",5),e._UZ(1,"span",6),e.qZA())}function wr(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"app-invite-template",7),e.NdJ("updateInvitedFriends",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.updateInvitedFriends())}),e.qZA(),e.BQk()}if(2&a){const i=e.oxw();e.xp6(1),e.Q6J("inviterAffiliateCode",i.invitedAffiliateCode)("affiliateCodeList",i.codeList)("agentCouponList",i.agentCouponList)}}function Ar(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",8)(1,"p",9),e._uU(2,"There is no affiliate code yet."),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Create affiliate code first to invite."),e.qZA(),e.TgZ(5,"button",10),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.gotoAffiliateCodeTab())}),e._uU(6," Go to Create Code "),e.qZA()()}}let Mr=(()=>{const s=class{constructor(t,n,o,r,l,c,d,g){this.formBuilder=t,this._itemService=n,this.snackBar=o,this.authService=r,this.modalService=l,this.affiliateService=c,this._snackbarService=d,this._cdr=g,this.isInviteSending=!1,this.isTemplateValid=!0,this.isInviteEmailValid=!1,this.inviteList=[],this.invalidMessage="",this.userName="",this.userEmail="",this.userProfileImage="",this.invitedAffiliateCode="",this.invitedList=[],this.myAffiliates=[],this.isInviteesLoading=!1,this.isEmailChecking=!1,this.userConceptId="",this.affiliatesList=[],this.userAgentRate="",this.totalReward=0,this.codeList=[],this.isCodeLoading=!0,this.agentCouponList=[],this.friendsList=[],this.isLoading=!0,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"],["image"]],this.active=1,this.updateTabSelection=new e.vpe,this.inviteForm=this.formBuilder.group({subject:new u.NI("",[u.kI.required]),message:new u.NI("",[u.kI.required])}),this.myAffiliates=[]}ngOnInit(){const t=this.authService.loadFromLocalStorage();this.userConceptId=t?.userConcept,this.entityId=t?.entityId,this.userEmail=t?.email,this.editor=new me.ML,this.checkUserAgentType()}get subject(){return this.inviteForm.get("subject")}get message(){return this.inviteForm.get("message")}gotoAffiliateCodeTab(){this.active=4,this.updateTabSelection.emit(this.active)}openAffiliatesModal(){if(this.myAffiliates?.length>0){const t=this.modalService.open(br,{size:"lg",centered:!0,scrollable:!0});t.componentInstance.affiliatesList=this.myAffiliates,t.componentInstance.totalReward=this.totalReward}}openInviteeList(){this.invitedList?.length>0&&(this.modalService.open(Ft,{size:"lg",centered:!0,scrollable:!0}).componentInstance.inviteeLists=this.invitedList)}checkUserAgentType(){this.isInviteesLoading=!0;const o={compositionId:this.authService.loadFromLocalStorage()?.userConcept,linker:"isAgent_s"};this._itemService.getSemanticConnection(o).subscribe({next:r=>{const l=r?.output?.filter(c=>c?.data?.marketingAgent_agent);if(this.marketingAgentId=l?.[0]?.id,r.count&&r.output.length){r.output?.sort((g,f)=>new Date(f.created_at).getTime()-new Date(g.created_at).getTime()),this.isUserAgent=!0;const c=Object.keys(r?.output[0]?.data)[0],d=r?.output[0]?.data[c].agentType.split(/(?=[A-Z])/);this.userAgentType=d.map(g=>g[0].toUpperCase()+g.slice(1)).join(" "),this.userAgentRate=r?.output[0]?.data[c].rate,this.getCouponCodes(),this.listAffiliateCodes(),this.getMyAffiliates()}else this.getInvitees(),this.setupInviteTemplate()},error:r=>{console.error(r)}})}getFriendsList(){var t=this;return(0,m.Z)(function*(){t._itemService.searchLinkMultipleAll([{composition:t.entityId,listLinkers:[H.ym+"_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{fullLinkers:["the_entity_user"],listLinkers:["friend_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{fullLinkers:["the_entity_user"],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:o=>{let r=o?.the_entity?.the_entity_s_friend_s||[];r=r?.map(d=>d?.the_entity?.the_entity_user?.[0]),t.friendsList={firstLevel:r,secondLevel:[],thirdLevel:[]},t.getInvitees()}})})()}getCouponCodes(){const t=(new Date).toISOString().split("T")[0],o=[{composition:this.userConceptId,listLinkers:["couponcode_to_marketingAgents_by"],inpage:10,page:1,logic:"or",filterSearches:[{type:"RedeemBy",search:t,logicoperator:">"}]}];(0,ue.D)([this._itemService.searchLinkMultipleAll([{composition:this.marketingAgentId,listLinkers:["couponcode_to_marketingAgents_by"],inpage:10,page:1,logic:"or",filterSearches:[{type:"RedeemBy",search:t,logicoperator:">"}]}]),this._itemService.searchLinkMultipleAll(o)]).subscribe({next:([r,l])=>{const g=[...r?.marketingAgent_agent?.marketingAgent_agent_s_couponcode_to_marketingAgents_by?.map(y=>y?.CoupounData?.data)||[],...l?.the_user?.the_user_s_couponcode_to_marketingAgents_by?.map(y=>y?.CoupounData?.data)||[]];let f=g.map(y=>y?.products?.data).flat();f=[...new Set(f)].map(y=>Number(y)),(0,T.EHb)(f).then(y=>{this.agentCouponList=g.map(k=>(k.products=k.products.data.map(Y=>y.filter(P=>Number(Y)===P?.id)),k))}).catch(y=>{console.error(y)})},error:r=>{console.error(r)}})}recordInviteeData(t){const o={signup_invitation:{toAddress:t?.toAddress,inviterName:this.userName,inviterEmail:this.userEmail,inviterProfileImage:this.userProfileImage,inviterCode:this.invitedAffiliateCode,timestamp:(new Date).toISOString(),tag:"agent",agentType:this.userAgentType,inviterConceptId:this.userConceptId,inviterIndentifierCode:this.invitedAffiliateCode}};this._itemService.noAuthCreate(o).subscribe({next:()=>{}})}addInvitees(t,n){const o={invitees:{subject:t,email:this.inviteList,details:n,timestamp:(new Date).toISOString()}};this._itemService.create(o).subscribe({next:()=>{this.getInvitees()},error:r=>{console.error(r)},complete:()=>{}})}getInvitees(){this._itemService.getAll("invitees").subscribe({next:t=>{let o=t?.data.map(d=>{const g=[new Date(d?.data?.invitees?.timestamp).toLocaleString()],f=d?.data?.invitees?.email;let y;return Array.isArray(f)&&(y=f.map(k=>({email:k,invitedTime:g}))),y}).flat();o=o.filter(function(d){return void 0!==d}),o.sort((d,g)=>{const f=new Date(d?.invitedTime).getTime();return new Date(g?.invitedTime).getTime()-f});const r=[],l={};o.forEach(d=>{const{email:g,invitedTime:f}=d;l[g]?r.forEach(y=>{y.email===g&&y.invitedTime.push(f)}):(l[g]=[f],r.push({email:g,invitedTime:[f]}))});const c=this.friendsList?.firstLevel?.map(d=>d?.the_user?.data?.user_data?.data?.primary_email);this.invitedList=c?.length>0?r.filter(d=>!c.includes(d.email)):r,this.isInviteesLoading=!1},error:t=>{console.error(t)}})}_getInvitees(){this._itemService.getAll("invitees").subscribe({next:t=>{let o=t?.data.map(c=>{const d=[new Date(c?.data?.invitees?.timestamp).toLocaleString()],g=c?.data?.invitees?.email;let f;return Array.isArray(g)&&(f=g.map(y=>({email:y,invitedTime:d}))),f}).flat();o=o.filter(function(c){return void 0!==c}),o.sort((c,d)=>{const g=new Date(c?.invitedTime).getTime();return new Date(d?.invitedTime).getTime()-g});const r=[],l={};if(o.forEach(c=>{const{email:d,invitedTime:g}=c;l[d]?r.forEach(f=>{f.email===d&&f.invitedTime.push(g)}):(l[d]=[g],r.push({email:d,invitedTime:[g]}))}),this.invitedList=r,Array.isArray(this.myAffiliates)&&this.myAffiliates.length>0){const c=this.myAffiliates.map(d=>d.email);this.invitedList=this.invitedList.filter(d=>!c.includes(d.email))}this.isInviteesLoading=!1},error:t=>{console.error(t)}})}removeFromInviteList(t){this.inviteList=this.inviteList.filter(n=>n!==t)}addInviteList(t){this.isEmailChecking=!0,this.isInviteEmailValid=!1,this.invalidMessage="Please enter valid email";const n=t.target.parentNode.parentNode.parentNode.querySelector('input[type="email"]'),o=n.value,l=o.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/);if(""===o||!l||this.inviteList.includes(o))return this.isInviteEmailValid=!0,this.isEmailChecking=!1,void(this.inviteList.includes(o)&&(this.invalidMessage="Email is already in list above"));this._itemService.searchComposition("the_user",o,"primary_email").subscribe({next:c=>{this.isEmailChecking=!1,0===c.length?(this.inviteList.push(n.value),n.value="",this.isEmailChecking=!1):(this.isInviteEmailValid=!0,this.invalidMessage="The user already has an account")},error:c=>{this.isEmailChecking=!1,this.isInviteEmailValid=!1,console.error(c)},complete:()=>{}})}setupInviteTemplate(t=""){this.invitedAffiliateCode=t,this._itemService.getUserReports([this.userConceptId]).subscribe({next:n=>{const o=n[0]?.data?.the_user?.entity;this.userName=`${o?.first_name} ${o?.last_name}`,this.userProfileImage=o?.person?.profile_img?o?.person?.profile_img:"./assets/man.png";let r=`\n          <p>My dear friend,</p>\n          <p>I've recently started using this amazing app from BoomConsole.com.</p>\n          <p>It allows me to organize my web data on an off the internet and to share it with my community and friends. The BoomConsole web browser extension lets me describe and save web content in my private database where I can search and retrieve the information.</p>\n          <p>I think you will love it too!</p>\n          <p>Use BoomConsole to Organize Your Web</p>\n          <p>Capture your thoughts on Web Pages, Chats and Clients</p>\n          <p>The BoomConsole Filing System and Contacts are used to organize your internet experience!</p>\n          <ul>\n            <li><p>Capture ChatGPT, You.com, Google Bard & Poe.com chats to your personal database.</p></li>\n            <li><p>Upload your LinkedIn connections and Google maps data in to your personal Contacts.</p></li>\n            <li><p>Make private and public comments on the websites you visit for future reference.</p></li>\n            <li><p>Share your information with groups and colleagues in your sphere.</p></li>\n          </ul>\n          <p>You can use the extension with Chrome, Edge, Brave and Opera browsers (Firefox, Safari support coming soon).</p>\n          <p>It's my go-to tool for saving internet content, searching, viewing, and sharing ideas.</p>\n          <p>Click on my invitation link (will be in bottom of the email) to join and\n            visit <a href="https://boomconsole.com/" target="_blank">BoomConsole.com</a> for more.</p>\n          <p>Best Regards,</p>\n          <p>${this.userName}</p>\n        `;t&&(r=`\n            <p>My dear friend,</p>\n            <p>I've recently started using this amazing app from BoomConsole.com.</p>\n            <p>It allows me to organize my web data on an off the internet and to share it with my community and friends. The BoomConsole web browser extension lets me describe and save web content in my private database where I can search and retrieve the information.</p>\n            <p>I think you will love it too!</p>\n            <p>Use BoomConsole to Organize Your Web</p>\n            <p>Capture your thoughts on Web Pages, Chats and Clients</p>\n            <p>The BoomConsole Filing System and Contacts are used to organize your internet experience!</p>\n            <ul>\n              <li><p>Capture ChatGPT, You.com, Google Bard & Poe.com chats to your personal database.</p></li>\n              <li><p>Upload your LinkedIn connections and Google maps data in to your personal Contacts.</p></li>\n              <li><p>Make private and public comments on the websites you visit for future reference.</p></li>\n              <li><p>Share your information with groups and colleagues in your sphere.</p></li>\n            </ul>\n            <p>You can use the extension with Chrome, Edge, Brave and Opera browsers (Firefox, Safari support coming soon).</p>\n            <p>It's my go-to tool for saving internet content, searching, viewing, and sharing ideas.</p>\n            <p>My referral code is '<strong>${t}</strong>'</p>\n            <p>Click on my invitation link (will be in bottom of the email) to join and\n              visit <a href="https://boomconsole.com/" target="_blank">BoomConsole.com</a> for more.</p>\n            <p>Best Regards,</p>\n            <p>${this.userName}</p>\n          `),this.inviteForm.patchValue({message:r})}})}getMyAffiliates(){var t=this;return(0,m.Z)(function*(){t._itemService.searchLinkMultipleClean([{composition:t.entityId,listLinkers:["affiliate_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{fullLinkers:["the_entity_user"],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:o=>{const r=o?.data?.the_entity?.the_entity_s_affiliate_s;t.myAffiliates=r?.map(l=>{const c=l?.data?.the_entity?.the_entity_user?.[0]?.data?.the_user,d=c?.entity?.person?.first_name,g=c?.entity?.person?.last_name,f=c?.user_data?.primary_email,y=l?.created_at;return{name:`${d} ${g}`,email:f,created_at:y}}),t.getInvitees(),t.getFriendsList()},error:o=>{console.error(o)}})})()}getEntityId(){return new Promise(t=>{this._itemService.checkEnitity(this.userConceptId).subscribe({next:n=>{const o=n?.entity;t(o)},error:n=>{console.error(n)}})})}_getMyAffiliates(){this._itemService.searchLinkMultipleClean([{composition:this.userConceptId,listLinkers:["affiliate_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{listLinkers:["bought_s"],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:n=>{const o=n?.data?.the_user?.the_user_s_affiliate_s;let r=[];o&&(r=o.map(l=>{const c={...l?.data?.the_user};c.created_at=l?.created_at,c.id=l?.id;const d=l?.data?.the_user?.the_user_s_bought_s;let g=[];return d&&d.length>0&&(g=d.map(y=>{const k={...y?.data?.internal_sales_item};k.created_at=y?.created_at,k.id=y?.id;const Y=k?.productId,V=Number(k.commissionRate)||0,P=Number(k?.price)/100*V,W=Number(k?.price),ne=Number(this.userAgentRate)/100||0,ee=Number((P*ne/100).toFixed(3)),ye={price:W,reward:Number(ee),created_at:y?.created_at};return Y&&(ye.productId=Y),ye})),{name:`${c?.entity?.person?.first_name} ${c?.entity?.person?.last_name}`,email:c?.user_data?.primary_email,created_at:c.created_at,affiliateBuys:g}})),this.getAffiliatePlanDetails(r)},error:n=>{console.error(n)},complete:()=>{}})}getAffiliatePlanDetails(t){const n=t.map(l=>l.affiliateBuys).flat();this.totalReward=n.reduce((l,c)=>(c.reward&&(l=Number(c.reward)+l),Number(l.toFixed(2))),0);const o=n.map(l=>l.productId),r=[...new Set(o)];this._itemService.getUserReports(r).subscribe({next:l=>{this.myAffiliates=t.map(c=>{const d={...c},g=d?.affiliateBuys.map(f=>(l.forEach(y=>{y.id==f.productId&&(f.productName=y?.data?.internal_product?.name,f.productBrand=y?.data?.internal_product?.brand)}),f));return d.affiliateBuys=g,d}),this.getInvitees()}})}listAffiliateCodes(){this.affiliateService.listAffiliateCode().subscribe({next:t=>{null!==t&&(this.codeList=t.data?.map(o=>o.affiliate_codes?.data),this.codeList=this.codeList.sort((o,r)=>{const l=o.name.toLowerCase(),c=r.name.toLowerCase();return l<c?-1:c>l?1:0}));const n=this.codeList[0]?.code;this.setupInviteTemplate(n),this.isCodeLoading=!1,this.isLoading=!1},error:t=>{console.error("err",t),this.isLoading=!1},complete:()=>{}})}copyCode(t){const o=t.target.parentNode.parentNode.parentNode.querySelector("code").textContent;navigator?.clipboard?.writeText(o)}useCodeInTemplate(t){const o=t.target.parentNode.parentNode.parentNode.querySelector("code").textContent;this.setupInviteTemplate(o)}updateInvitedFriends(){this.getInvitees()}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(u.qu),e.Y36(Z.e),e.Y36(qt.ux),e.Y36(N.e),e.Y36(M.FF),e.Y36(fe.C),e.Y36(G.o),e.Y36(e.sBO))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-affiliates"]],inputs:{active:"active"},outputs:{updateTabSelection:"updateTabSelection"},decls:6,vars:3,consts:[["class","loading",4,"ngIf"],[1,"row","mt-0"],[1,"col-md-12"],[4,"ngIf","ngIfElse"],["noAffiliateCode",""],[1,"loading"],[1,"loader"],[3,"inviterAffiliateCode","affiliateCodeList","agentCouponList","updateInvitedFriends"],[1,"p-4","mx-auto","text-center"],[1,"mb-0"],[1,"btn","btn-primary",3,"click"]],template:function(n,o){if(1&n&&(e.YNc(0,Tr,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2),e.YNc(3,wr,2,3,"ng-container",3),e.YNc(4,Ar,7,0,"ng-template",null,4,e.W1O),e.qZA()()),2&n){const r=e.MAs(5);e.Q6J("ngIf",o.isLoading),e.xp6(3),e.Q6J("ngIf",(null==o.codeList?null:o.codeList.length)&&o.invitedAffiliateCode)("ngIfElse",r)}},dependencies:[p.O5,_t],styles:['.level-box[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:.5rem;padding:1rem;text-align:center}.level-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fd7088;font-weight:700}.level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{opacity:.8}.invite-tags[_ngcontent-%COMP%]{padding-left:0;text-align:left;list-style:none;display:flex;flex-direction:column;align-items:center;margin-top:1rem}.invite-tags[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.invite-tags[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#9747ff}.mf-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;border:none;margin:1.25rem 0 1.5rem}.mf-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#fff;border-radius:0;color:#333}.mf-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));color:#fff;border:none}h2[_ngcontent-%COMP%]{color:#fd7088;font-size:1.5rem}.email-list[_ngcontent-%COMP%]{margin:1rem 0}.email-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;flex-wrap:wrap;background:#eee;padding:.75rem .5rem;margin-bottom:1rem;border-radius:4px}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]{cursor:pointer;color:#aaa}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]:hover, .email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]:focus{color:#f14141}.email-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#dedede;border-radius:1.5rem;padding:.5rem .75rem;margin-right:.5rem;margin-bottom:.5rem}.email-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.email-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]:hover{color:red}.invite-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}  .NgxEditor__Content{min-height:320px;overflow-y:scroll;height:400px}.code-list[_ngcontent-%COMP%]{padding-left:0;min-height:160px;overflow-y:auto}.code-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.code-copy[_ngcontent-%COMP%]{background-color:#eee;border-radius:6px;display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem}.code-copy[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#666}.code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover, .code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:focus{color:#d55b1e}.code-loading[_ngcontent-%COMP%]{margin-top:80px}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{line-height:1.5}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%]{border-bottom:none}.btn-custom[_ngcontent-%COMP%]{border:1px solid #dedede;background-color:#fff;font-size:.875rem;padding:.25rem 1rem;color:#666;display:flex;align-items:center;gap:.25rem}.btn-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.25rem}.btn-custom[_ngcontent-%COMP%]:hover, .btn-custom[_ngcontent-%COMP%]:focus{background-color:#dedede}.empty-agreement[_ngcontent-%COMP%]{padding:2rem 1rem}.empty-agreement[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:4rem!important;padding-bottom:1rem}.avatar[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%}.btn-close[_ngcontent-%COMP%]{cursor:pointer}.list[_ngcontent-%COMP%]{padding:0 1rem;margin:.75rem 0 0;max-height:260px;overflow-y:auto}.following-list[_ngcontent-%COMP%]{padding:.75rem .5rem;border-bottom:1px solid #efefef;border-radius:4px;list-style:none;cursor:pointer}.following-list[_ngcontent-%COMP%]:hover{background-color:#eee}.following-list[_ngcontent-%COMP%]:last-child{border-bottom:none}.following-image[_ngcontent-%COMP%]{position:relative}.following-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border:1px solid #ddd;border-radius:8px}.following-image[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:1.125rem;position:absolute;bottom:-4px;right:8px;font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 48}.share_wrapper[_ngcontent-%COMP%]{position:relative}.modal-title[_ngcontent-%COMP%]{clear:both;display:inline-block;overflow:hidden;white-space:nowrap;font-size:20px;text-overflow:ellipsis}.share_user_search[_ngcontent-%COMP%]{position:relative}.share_user_search[_ngcontent-%COMP%]   .share_user_search_input[_ngcontent-%COMP%]{height:45px;box-shadow:none}.share_user_search[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:absolute;color:#ccc;right:20px;top:50%;transform:translateY(-50%)}.share_user_search[_ngcontent-%COMP%]   .material-symbols-outlined.check-icon[_ngcontent-%COMP%]{right:10px;bottom:-4px;top:auto;transform:none;color:#333}.search_dropdown.show[_ngcontent-%COMP%]{display:block}.search_dropdown[_ngcontent-%COMP%]{display:none;width:94%;background-color:#fff;border-radius:10px;padding:20px;box-shadow:#959da533 0 8px 24px;position:absolute;top:100%;left:3%;color:#777;z-index:1}.search_dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.search_dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:10px 0}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;line-height:35px}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:relative;top:5px;font-size:22px}.item_chip[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:40px;background-color:#f3f3f3;margin:5px}.item_chip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;background-color:#eee}.item_chip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{display:inline-block;font-size:22px;position:relative;top:4px}.post_message[_ngcontent-%COMP%]{min-height:200px;box-shadow:#0000000f 0 2px 4px inset}.post_message[_ngcontent-%COMP%]:hover{box-shadow:#00000021 0 2px 4px inset}.post_message[_ngcontent-%COMP%]:focus{box-shadow:#00000021 0 2px 4px inset}.btn-dropdown[_ngcontent-%COMP%]{padding:5px 30px 5px 20px;text-transform:capitalize}.btn-dropdown[_ngcontent-%COMP%]:hover{background:#eee}.error_msg[_ngcontent-%COMP%]{background-color:#e86a6a;color:#fff}.code_template[_ngcontent-%COMP%]{height:180px;overflow-x:auto}']}),a})();function kr(a,s){1&a&&(e.TgZ(0,"small",23),e._uU(1," Please enter name "),e.qZA())}function Pr(a,s){1&a&&(e.TgZ(0,"small",23),e._uU(1," Please select agent type "),e.qZA())}function Zr(a,s){1&a&&(e.TgZ(0,"small",23),e._uU(1," Please enter detail "),e.qZA())}function Ir(a,s){1&a&&(e.TgZ(0,"button",24)(1,"div",25)(2,"span",26),e._uU(3,"."),e.qZA()(),e._uU(4," Adding... "),e.qZA()),2&a&&e.Q6J("disabled",!0)}function Or(a,s){1&a&&(e.TgZ(0,"button",27),e._uU(1," Apply "),e.qZA())}function Sr(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"form",2,3),e.NdJ("ngSubmit",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.submitAgentRequestForm())}),e.TgZ(2,"div",4)(3,"div",5)(4,"label",6),e._uU(5,"Name: "),e.TgZ(6,"span",7),e._uU(7,"*"),e.qZA()(),e._UZ(8,"input",8),e.YNc(9,kr,2,0,"small",9),e.qZA()(),e.TgZ(10,"div",4)(11,"div",5)(12,"label",10),e._uU(13,"Email: "),e.TgZ(14,"span",7),e._uU(15,"*"),e.qZA()(),e._UZ(16,"input",11),e.qZA()(),e.TgZ(17,"div",4)(18,"div",5)(19,"label",12),e._uU(20,"Agent type: "),e.TgZ(21,"span",7),e._uU(22,"*"),e.qZA()(),e.TgZ(23,"select",13)(24,"option",14),e._uU(25,"Select ..."),e.qZA(),e.TgZ(26,"option",15),e._uU(27,"Seller Agent"),e.qZA(),e.TgZ(28,"option",16),e._uU(29,"Listing Agent"),e.qZA(),e.TgZ(30,"option",17),e._uU(31,"Buyer Agent"),e.qZA()(),e.YNc(32,Pr,2,0,"small",9),e.qZA()(),e.TgZ(33,"div",4)(34,"div",5)(35,"label",18),e._uU(36,"Detail: "),e.TgZ(37,"span",7),e._uU(38,"*"),e.qZA()(),e._UZ(39,"textarea",19),e.YNc(40,Zr,2,0,"small",9),e.qZA()(),e.TgZ(41,"div",20),e.YNc(42,Ir,5,1,"ng-template",null,21,e.W1O),e.YNc(44,Or,2,0,"button",22),e.qZA()()}if(2&a){const i=e.MAs(1),t=e.MAs(43),n=e.oxw();e.Q6J("formGroup",n.agentRequestForm),e.xp6(9),e.Q6J("ngIf",n.name&&n.name.invalid&&(n.name.touched||i.submitted)),e.xp6(23),e.Q6J("ngIf",n.agentType&&n.agentType.invalid&&n.agentType.touched),e.xp6(8),e.Q6J("ngIf",n.detail&&n.detail.invalid&&(n.detail.touched||i.submitted)),e.xp6(4),e.Q6J("ngIf",!n.isAgentFormAdding)("ngIfElse",t)}}function qr(a,s){1&a&&(e.TgZ(0,"div",28)(1,"h3"),e._uU(2,"Thank you for your interest!"),e.qZA()())}let Fr=(()=>{const s=class{constructor(t,n,o,r,l){this._itemService=t,this.formBuilder=n,this.authService=o,this._nodeService=r,this._profileServiceV2=l,this.isAgentFormAdding=!1,this.userEmail="",this.userName="",this.userProfileImage="",this.userConceptId="",this.showThankYou=!1,this.updateTabSelection=new e.vpe,this.agentRequestForm=this.formBuilder.group({name:new u.NI("",u.kI.required),email:new u.NI("",u.kI.required),agentType:new u.NI("",u.kI.required),detail:new u.NI("",u.kI.required)})}ngOnInit(){var t=this;return(0,m.Z)(function*(){const n=t.authService.loadFromLocalStorage();t.userConceptId=n?.userConcept;const o=n?.entityId;t.userEmail=n?.email,t.showPageDetails(),t.updateTabSelection.emit(t.active),yield t.getuser(o)})()}get name(){return this.agentRequestForm.get("name")}get email(){return this.agentRequestForm.get("email")}get agentType(){return this.agentRequestForm.get("agentType")}get detail(){return this.agentRequestForm.get("detail")}showPageDetails(){this.agentRequestForm.patchValue({email:this.userEmail}),this.agentRequestForm.controls.email.disable()}getuser(t){var n=this;return(0,m.Z)(function*(){const o=yield n._profileServiceV2.fetchUserDetails(t);n.userDetails=o;const r=o?.firstname,l=o?.lastname;n.userEmail=o?.email,n.agentRequestForm.patchValue({name:`${r||""} ${l||""}`})})()}submitAgentRequestForm(){if(!this.agentRequestForm.valid)return void(this.isAgentFormAdding=!1);this.isAgentFormAdding=!0;const t=this.agentRequestForm.value,n={name:t.name,email:this.userEmail,agentType:t.agentType,detail:t.detail,userConceptId:this.userConceptId,isRequested:!0,timestamp:(new Date).toISOString()};this._nodeService.requestToBecomeAgent(n).subscribe({next:()=>{this.isAgentFormAdding=!1,this.showThankYou=!0,this.agentRequestForm.reset()},error:()=>{},complete:()=>{}})}_submitAgentRequestForm(){if(!this.agentRequestForm.valid)return void(this.isAgentFormAdding=!1);this.isAgentFormAdding=!0;const t=this.agentRequestForm.value,n={agent_request_info:{name:t.name,email:this.userEmail,agentType:t.agentType,detail:t.detail,userConceptId:this.userConceptId,isRequested:!0,timestamp:(new Date).toISOString()}};this._itemService.create(n).subscribe({next:()=>{this.isAgentFormAdding=!1,this.showThankYou=!0,this.sendAgentRequestEmail(n.agent_request_info),this.agentRequestForm.reset()},error:()=>{},complete:()=>{}})}sendAgentRequestEmail(t){this._itemService.sendEmail({heading:"Request: To become an agent - "+t.agentType,body:`<!doctype html><html><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Boomconsole: Agent Request Email</title><style>@media only screen and (max-width:620px){table.body h1{font-size:28px!important;margin-bottom:10px!important}table.body a,table.body ol,table.body p,table.body span,table.body td,table.body ul{font-size:16px!important}table.body .article,table.body .wrapper{padding:10px!important}table.body .content{padding:0!important}table.body .container{padding:0!important;width:100%!important}table.body .main{border-left-width:0!important;border-radius:0!important;border-right-width:0!important}table.body .btn table{width:100%!important}table.body .btn a{width:100%!important}table.body .img-responsive{height:auto!important;max-width:100%!important;width:auto!important}}@media all{.ExternalClass{width:100%}.ExternalClass,.ExternalClass div,.ExternalClass font,.ExternalClass p,.ExternalClass span,.ExternalClass td{line-height:100%}.apple-link a{color:inherit!important;font-family:inherit!important;font-size:inherit!important;font-weight:inherit!important;line-height:inherit!important;text-decoration:none!important}#MessageViewBody a{color:inherit;text-decoration:none;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit}.btn-primary table td:hover{background-color:#34495e!important}.btn-primary a:hover{background-color:#34495e!important;border-color:#34495e!important}}</style></head><body style="background-color:#f6f6f6;font-family:sans-serif;-webkit-font-smoothing:antialiased;font-size:14px;line-height:1.4;margin:0;padding:0;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%"><table role="presentation" border="0" cellpadding="0" cellspacing="0" class="body" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;background-color:#f6f6f6;width:100%" width="100%" bgcolor="#f6f6f6"><tr><td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">&nbsp;</td><td class="container" style="font-family:sans-serif;font-size:14px;vertical-align:top;display:block;max-width:580px;padding:10px;width:580px;margin:0 auto" width="580" valign="top"><div class="content" style="box-sizing:border-box;display:block;margin:0 auto;max-width:580px;padding:10px"><table role="presentation" class="main" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;background:#fff;border-radius:3px;width:100%" width="100%"><tr><td class="wrapper" style="font-family:sans-serif;font-size:14px;vertical-align:top;box-sizing:border-box;padding:20px" valign="top"><table role="presentation" border="0" cellpadding="0" cellspacing="0" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;width:100%" width="100%"><tr><td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top"><p style="font-family:sans-serif;font-size:14px;font-weight:400;margin:0;margin-bottom:15px">${t.detail}</p><p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0">From,</p><p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0"></p><p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0">${t.name}</p><p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0"><a href="mailto:${this.userEmail}" style="color:#004aad">${this.userEmail}</a></p></td></tr></table></td></tr></table><div class="footer" style="clear:both;margin-top:10px;text-align:center;width:100%"><table role="presentation" border="0" cellpadding="0" cellspacing="0" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;width:100%" width="100%"><tr><td class="content-block" style="font-family:sans-serif;font-weight:700;vertical-align:top;padding-bottom:5px;padding-top:10px;color:#999;font-size:12px;text-align:center" valign="top" align="center"><span class="apple-link" style="color:#999;font-size:12px;text-align:center">Boomconsole</span></td></tr><tr><td class="content-block" style="font-family:sans-serif;vertical-align:top;padding-bottom:10px;padding-top:5px;color:#999;font-size:12px;text-align:center" valign="top" align="center"><span class="apple-link" style="color:#999;font-size:12px;text-align:center"><a href="https://beta.boomconcole.com/" target="_blank">beta.boomconcole.com</a></span></td></tr></table></div></div></td><td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">&nbsp;</td></tr></table></body></html>`,toAddress:"info@boomconsole.com"}).subscribe({next:()=>{},error:()=>{}})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(Z.e),e.Y36(u.qu),e.Y36(N.e),e.Y36(O.s),e.Y36(ke.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-become-agent"]],inputs:{active:"active"},outputs:{updateTabSelection:"updateTabSelection"},decls:4,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["thankyou",""],[3,"formGroup","ngSubmit"],["agentRequestFormId","ngForm"],[1,"row","mb-3"],[1,"col-md-12"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","name","name","id","name","required","","formControlName","name",1,"form-control","p-2","mb-1","shadow-none"],["class","err_msg",4,"ngIf"],["for","email",1,"form-label"],["type","email","name","email","id","emal","placeholder","johndoe@email.com","required","","formControlName","email",1,"form-control","p-2","mb-1","shadow-none","text-secondary"],["for","agentType",1,"form-label"],["formControlName","agentType",1,"form-select","py-2","shadow-none"],["value","",1,"text-secondary"],["value","sellerAgent"],["value","listingAgent"],["value","buyerAgent"],["for","detail",1,"form-label"],["name","detail","id","detail","cols","30","rows","3","formControlName","detail","placeholder","Write details about why do you want to become an agent?",1,"w-100","form-control","p-2","mb-1","shadow-none"],[1,"col","text-right","m-3"],["requestLoading",""],["type","submit","class","btn btn-primary",4,"ngIf","ngIfElse"],[1,"err_msg"],[1,"btn","btn-primary","btn-disabled",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary"],[1,"d-flex","align-items-center","justify-content-center","py-5"]],template:function(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Sr,45,6,"form",0),e.YNc(2,qr,3,0,"ng-template",null,1,e.W1O),e.BQk()),2&n){const r=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!o.showThankYou)("ngIfElse",r)}},dependencies:[p.O5,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.Q7,u.sg,u.u]}),a})();var Er=_(7480);function Dr(a,s){if(1&a&&(e.TgZ(0,"p"),e._uU(1),e._UZ(2,"br"),e.TgZ(3,"small"),e._uU(4),e.qZA()()),2&a){const i=s.$implicit;e.xp6(1),e.hij(" ",null==i?null:i.name," "),e.xp6(3),e.hij(" ( ",null==i?null:i.email," ) ")}}function Nr(a,s){if(1&a&&(e.TgZ(0,"p")(1,"strong"),e._uU(2," Subscribed number of users: "),e.TgZ(3,"div",19)(4,"a",20),e._uU(5),e.qZA(),e.TgZ(6,"div",21),e.YNc(7,Dr,5,2,"p",22),e.qZA()()()()),2&a){const i=e.oxw();e.xp6(5),e.hij(" ",i.registeredUserCount," "),e.xp6(2),e.Q6J("ngForOf",i.registeredUserLists)}}function Ur(a,s){1&a&&(e.TgZ(0,"p"),e._uU(1,"No subscribed users yet."),e.qZA())}function Rr(a,s){1&a&&(e.ynx(0),e._uU(1,", "),e.BQk())}function Lr(a,s){if(1&a&&(e.ynx(0),e._uU(1),e.YNc(2,Rr,2,0,"ng-container",29),e.BQk()),2&a){const i=s.$implicit,t=s.index,n=e.oxw().$implicit;e.xp6(1),e.Oqu(null==i||null==i[0]||null==i[0].data||null==i[0].data.internal_product?null:i[0].data.internal_product.name),e.xp6(1),e.Q6J("ngIf",t!==(null==n||null==n.products?null:n.products.length)-1)}}function Br(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"option",28),e._uU(2),e.YNc(3,Lr,3,2,"ng-container",22),e._uU(4,"] "),e.qZA(),e.BQk()),2&a){const i=s.$implicit;e.xp6(1),e.Q6J("value",null==i?null:i.CoupounCode),e.xp6(1),e.lnq(" ",null==i?null:i.CoupounCode," - ",i.PercentOff,"% off - ",i.DurationInMonths," Month - ["),e.xp6(1),e.Q6J("ngForOf",null==i?null:i.products)}}function Yr(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",23)(1,"label",24),e._uU(2,"Coupon Code "),e.TgZ(3,"small",25),e._uU(4,"(Apply coupon code for a discount on the link below)"),e.qZA()(),e.TgZ(5,"select",26),e.NdJ("input",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.updateLinkWithCoupon(n,o.affiliateCode))}),e.TgZ(6,"option",27),e._uU(7,"Select ..."),e.qZA(),e.YNc(8,Br,5,5,"ng-container",22),e.qZA()()}if(2&a){const i=e.oxw();e.xp6(8),e.Q6J("ngForOf",i.agentCouponList)}}function Jr(a,s){1&a&&(e.TgZ(0,"button",33)(1,"div",34)(2,"span",35),e._uU(3,"."),e.qZA()(),e._uU(4," Updating... "),e.qZA())}function Qr(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.updateCodeDetailForLandingPage())}),e._uU(1," Update landing page "),e.qZA()}}function zr(a,s){if(1&a&&(e.TgZ(0,"div",30),e.YNc(1,Jr,5,0,"button",31),e.YNc(2,Qr,2,0,"ng-template",null,32,e.W1O),e.qZA()),2&a){const i=e.MAs(3),t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isSubmitting)("ngIfElse",i)}}let Hr=(()=>{const s=class{constructor(t,n,o,r,l){this.modalService=t,this.modal=n,this._itemService=o,this.authService=r,this._snackbarService=l,this.canUpdateCode=!0,this.coupon_code="",this.isSubmitting=!1}ngOnInit(){const t=this.authService.loadFromLocalStorage();this.userConcept=t.userConcept,this.getRegisteredUsersForThisCode()}closeModal(){this.modal.dismiss()}toggleWithGreeting(t,n,o){t.isOpen()?t.close():t.open({greeting:n,language:o})}getRegisteredUsersForThisCode(){const t=new T.LtL;t.typeConnection="the_entity_user",t.reverse=!0,t.name="reverse",t.selectors=["the_entity_firstname","the_entity_lastname","the_entity_email"];const n=new T.LtL;n.typeConnection="affiliate_codes_s_onboarded_user_s",n.selectors=["self"],n.name="user",n.freeschemaQueries=[t];const o=new T.LtL;o.outputFormat=T.yu5,o.conceptIds=[this.affiliateCode?.id],o.name="top",o.freeschemaQueries=[n],(0,T.og0)(o,"").subscribe(r=>{const l=r?.[0].affiliate_codes?.affiliate_codes_s_onboarded_user_s?.length,c=r?.flatMap(d=>d?.affiliate_codes?.affiliate_codes_s_onboarded_user_s?.map(g=>{const f=g?.the_user;return{name:f?.the_entity_user_reverse?.the_entity?.the_entity_firstname?.the_firstname?`${f.the_entity_user_reverse.the_entity.the_entity_firstname.the_firstname} ${f.the_entity_user_reverse.the_entity.the_entity_lastname.the_lastname}`:f?.the_entity?.the_person?.first_name?`${f.the_entity.the_person.first_name} ${f.the_entity.the_person.last_name}`:f?.the_entity?.session?.first_name?`${f.the_entity.session.first_name} ${f.the_entity.session.last_name}`:"User",email:f?.the_entity_user_reverse?.the_entity?.the_entity_email?.the_email||f?.the_entity?.the_person?.email||f?.the_entity?.session?.email||f?.the_user_data?.primary_email||"no email",profile_img:f?.the_entity_user_reverse?.the_entity?.the_entity_avatar?.the_avatar||f?.the_entity?.the_person?.avatar||f?.the_entity?.session?.avatar}})||[]);this.registeredUserCount=l,this.registeredUserLists=c})}copyLink(t){const o=t.target.parentNode.parentNode.parentNode.querySelector("code.agent-invite-link").textContent;navigator?.clipboard?.writeText(o)}updateLinkWithCoupon(t,n){var o=this;return(0,m.Z)(function*(){const r=t.target.value;n.isCouponSelected=!0,o.coupon_code=r;let l=window.location.protocol+"//"+window.location.hostname+"/landing";l+=`?bc=${n?.code}&cc=${r}`,o.inviteWithCouponURL=l,n.inviteLink=l;const c=yield o.createQR(l);n.qrImg=c})()}createQR(t){return new Promise(function(){var n=(0,m.Z)(function*(o){const r=_(3259),{createCanvas:l,loadImage:c}=_(808),f=l(200,200);r.toCanvas(f,t,{errorCorrectionLevel:"H",type:"image/jpeg",width:900,color:{dark:"#000000",light:"#ffffff"}});const y=f.getContext("2d"),k=yield c("./assets/logo-for-qr.png");y.drawImage(k,350,350,200,200),o(f.toDataURL("image/png"))});return function(o){return n.apply(this,arguments)}}())}updateCodeDetailForLandingPage(){this._itemService.getLink(this.userConcept,"landingpage_code_s").subscribe({next:t=>{t?.output?.[0]?.data?.landingPageCode?this.updateCoupon(t?.output?.[0]?.id):this.createCoupon()}})}updateCoupon(t){const n={compositionId:t,patcher:{affiliate_code:this.affiliateCode?.code,coupon_code:this.coupon_code}};this.isSubmitting=!0,this._itemService.patchv2(n).subscribe({next:()=>{this.isSubmitting=!1,this.closeModal(),this._snackbarService.openSnackBar("Landing Page Code Updated Successfully","success")},error:o=>{console.error("err",o)}})}createCoupon(){const t={affiliate_code:this.affiliateCode?.code,coupon_code:this.coupon_code};this.isSubmitting=!0,this._itemService.create({landingPageCode:t}).subscribe({next:n=>{const o=n?.data?.landingPageCode?.id;this._itemService.createComponentLink(this.userConcept,o,"landingpage_code").subscribe({next:()=>{this.isSubmitting=!1,this._snackbarService.openSnackBar("Landing Page Code Updated Successfully","success"),this.closeModal()},error:r=>{console.error("err",r)}})},error:n=>{console.error("err",n)}})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(M.FF),e.Y36(M.Kz),e.Y36(Z.e),e.Y36(N.e),e.Y36(G.o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-code-detail-modal"]],inputs:{affiliateCode:"affiliateCode",agentCouponList:"agentCouponList"},decls:25,vars:9,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["aria-label","Close","tabindex","",1,"btn-close",3,"click","keyup"],[1,"modal-body","p-0"],[1,"row"],[1,"col-md-8","d-flex","flex-column","justify-content-center"],[1,"user_registered"],[4,"ngIf","ngIfElse"],["noRegisteredUser",""],["class","my-2 mb-3",4,"ngIf"],[1,"code-copy","my-2","mb-3"],[1,"agent-invite-link"],[1,"d-flex","gap-2","mb-3"],[1,"btn","btn-custom",3,"click"],[1,"material-symbols-outlined"],[1,"col-md-4","d-flex","flex-column","justify-content-center"],["alt","invite qr",1,"img-fluid","invite-qr",3,"src"],[1,"btn","btn-primary",3,"href","download"],["class","btn_update",4,"ngIf"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle",""],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[4,"ngFor","ngForOf"],[1,"my-2","mb-3"],["for","agentCodes",1,"form-label","d-flex","align-items-center","gap-1"],[1,"ms-1"],["id","agentCodes","required","",1,"form-select","py-2","shadow-none",3,"input"],["value","","selected","",1,"text-secondary"],[3,"value"],[4,"ngIf"],[1,"btn_update"],["type","submit","class","btn btn-primary btn-loading btn-sm",4,"ngIf","ngIfElse"],["notLoading",""],["type","submit",1,"btn","btn-primary","btn-loading","btn-sm"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.qZA(),e.TgZ(3,"span",2),e.NdJ("click",function(){return o.closeModal()})("keyup",function(){return o.closeModal()}),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),e.YNc(8,Nr,8,2,"p",7),e.YNc(9,Ur,2,0,"ng-template",null,8,e.W1O),e.qZA(),e.YNc(11,Yr,9,1,"div",9),e.TgZ(12,"div",10)(13,"code",11),e._uU(14),e.qZA()(),e.TgZ(15,"div",12)(16,"button",13),e.NdJ("click",function(l){return o.copyLink(l)}),e._uU(17," Copy link "),e.TgZ(18,"span",14),e._uU(19,"content_copy"),e.qZA()()()(),e.TgZ(20,"div",15),e._UZ(21,"img",16),e.TgZ(22,"a",17),e._uU(23,"Download QR"),e.qZA()(),e.YNc(24,zr,4,2,"div",18),e.qZA()()),2&n){const r=e.MAs(10);e.xp6(2),e.Oqu(null==o.affiliateCode?null:o.affiliateCode.name),e.xp6(6),e.Q6J("ngIf",o.registeredUserCount)("ngIfElse",r),e.xp6(3),e.Q6J("ngIf",null==o.agentCouponList?null:o.agentCouponList.length),e.xp6(3),e.Oqu(o.affiliateCode.inviteLink),e.xp6(7),e.Q6J("src",null==o.affiliateCode?null:o.affiliateCode.qrImg,e.LSH),e.xp6(1),e.Q6J("href",null==o.affiliateCode?null:o.affiliateCode.qrImg,e.LSH)("download",null==o.affiliateCode?null:o.affiliateCode.code),e.xp6(2),e.Q6J("ngIf",o.canUpdateCode)}},dependencies:[p.sg,p.O5,M.jt,M.iD,M.Vi,u.YN,u.Kr],styles:[".btn-custom[_ngcontent-%COMP%]{border:1px solid #dedede;background-color:#fff;font-size:.875rem;padding:.25rem 1rem;color:#666;display:flex;align-items:center;gap:.25rem}.btn-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.25rem}.btn-custom[_ngcontent-%COMP%]:hover, .btn-custom[_ngcontent-%COMP%]:focus{background-color:#dedede}.user_registered[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00f}.code-copy[_ngcontent-%COMP%]{background-color:#eee;border-radius:6px;display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem}.code-copy[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#666}.btn-close[_ngcontent-%COMP%]{cursor:pointer}.dropdown-menu[_ngcontent-%COMP%]{width:250px;padding:10px;font-size:14px;font-weight:400;height:250px;overflow:auto}.dropdown-menu[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:auto;padding:8px 0;border-bottom:1px solid #ddd;line-height:16px}@media only screen and (max-width: 600px){.user_registered[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:static}.user_registered[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{width:100%;top:10px!important}.btn_update[_ngcontent-%COMP%]{margin-top:10px}.btn_update[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.invite-qr[_ngcontent-%COMP%]{border:2px solid rgb(242,112,156);border-radius:5px;margin-bottom:10px}"]}),a})();function jr(a,s){1&a&&(e.TgZ(0,"div",7)(1,"div",1),e._UZ(2,"app-affiliate-dashboard"),e.qZA()())}function Gr(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"li")(1,"div",14)(2,"div",15)(3,"strong",16),e.NdJ("keyup",function(){const o=e.CHM(i).$implicit,r=e.oxw(3);return e.KtG(r.openAffiliateCodeDetail(o))})("click",function(){const o=e.CHM(i).$implicit,r=e.oxw(3);return e.KtG(r.openAffiliateCodeDetail(o))}),e._uU(4),e.qZA()(),e._UZ(5,"hr"),e.qZA()()}if(2&a){const i=s.$implicit;e.xp6(4),e.Oqu(i.name)}}function $r(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"ul",12),e.YNc(2,Gr,6,1,"li",13),e.qZA(),e.BQk()),2&a){const i=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",i.codeList)}}function Vr(a,s){1&a&&(e.TgZ(0,"p"),e._uU(1,"No codes available."),e.qZA())}function Kr(a,s){if(1&a&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",1),e.YNc(3,$r,3,1,"ng-container",10),e.YNc(4,Vr,2,0,"ng-template",null,11,e.W1O),e.qZA()()()),2&a){const i=e.MAs(5),t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.codeList.length>0)("ngIfElse",i)}}let Wr=(()=>{const s=class{ngOnInit(){const t=this.authService.loadFromLocalStorage();this.userConceptId=t?.userConcept,this.checkUserAgentType(),this.updateTabSelection.emit(this.active)}constructor(t,n,o,r){this.modalService=t,this.authService=n,this._itemService=o,this.affiliateService=r,this.codeList=[],this.userAgentType="",this.isInviteesLoading=!1,this.isCheckingUserStatus=!1,this.isUserAgent=!1,this.userAgentRate="",this.isCodeLoading=!0,this.agentCouponList=[],this.showChartAgency=!1,this.updateTabSelection=new e.vpe}updateLinkWithCoupon(t,n){var o=this;return(0,m.Z)(function*(){const r=t.target.value;n.isCouponSelected=!0;let l=window.location.protocol+"//"+window.location.hostname+"/landing";l+=`?bc=${n?.code}&cc=${r}`,o.inviteWithCouponURL=l,n.inviteLink=l;const c=o.createQR(l);n.qrImg=c})()}toggleAgencyChartVisibility(){this.showChartAgency=!this.showChartAgency}openCreateAffiliateForm(){this.modalService.open(Er.c,{size:"md",backdrop:"static"}).result.then(()=>{},n=>{n?.isCodeCreated&&this.listAffiliateCodes()})}openAffiliateCodeDetail(t){const n=this.modalService.open(Hr,{size:"lg"});n.componentInstance.affiliateCode=t,n.componentInstance.agentCouponList=this.agentCouponList}checkUserAgentType(){this.isInviteesLoading=!0,this.isCheckingUserStatus=!0,this._itemService.getSemanticConnection({compositionId:this.userConceptId,linker:"isAgent_s"}).subscribe({next:n=>{const o=n?.output?.filter(r=>r?.data?.marketingAgent_agent);if(this.marketingAgentId=o?.[0]?.id,n.output&&Array.isArray(n.output)&&n.output.length>0){const r=n.output.reduce((d,g)=>{const f=Date.parse(d.data[Object.keys(d.data)[0]].timestamp);return Date.parse(g.data[Object.keys(g.data)[0]].timestamp)>f?g:d},n.output[0]);this.isUserAgent=!0;const l=Object.keys(n?.output[0]?.data)[0],c=r?.data?.agent_request_info?.agentType.split(/(?=[A-Z])/);this.userAgentType=c?.map(d=>d[0].toUpperCase()+d.slice(1)).join(" "),this.userAgentRate=n?.output[0]?.data[l].rate,this.getCouponCodes(),this.listAffiliateCodes(),this.getMyAffiliates()}},complete:()=>{}})}getCouponCodes(){const t=(new Date).toISOString().split("T")[0],n=[{composition:this.marketingAgentId,listLinkers:["couponcode_to_marketingAgents_by"],inpage:10,page:1,logic:"or",filterSearches:[{type:"RedeemBy",search:t,logicoperator:">"}]}],r=[this._itemService.searchLinkMultipleAll([{composition:this.userConceptId,listLinkers:["couponcode_to_marketingAgents_by"],inpage:10,page:1,logic:"or",filterSearches:[{type:"RedeemBy",search:t,logicoperator:">"}]}])];this.marketingAgentId&&r.push(this._itemService.searchLinkMultipleAll(n)),(0,ue.D)(r).subscribe({next:([l,c])=>{const f=[...l?.marketingAgent_agent?.marketingAgent_agent_s_couponcode_to_marketingAgents_by?.map(k=>k?.CoupounData?.data)||[],...c?.the_user?.the_user_s_couponcode_to_marketingAgents_by?.map(k=>k?.CoupounData?.data)||[]];let y=f.map(k=>k?.products?.data).flat();y=[...new Set(y)].map(k=>Number(k)),(0,T.EHb)(y).then(k=>{this.agentCouponList=f.map(Y=>(Y.products=Y.products.data.map(V=>k.filter(W=>Number(V)===W?.id)),Y))})}})}getAgentRate(t){const n=t+"_agent";this._itemService.searchAPIClean({compositionName:n,searchKey:t}).subscribe({next:r=>{this.userAgentRate=r?.[0]?.[n]?.rate}})}listAffiliateCodes(){var n,t=this;this.affiliateService.listAffiliateCode().subscribe({next:(n=(0,m.Z)(function*(o){null!==o&&(t.codeList=o.data?.map(r=>(r.affiliate_codes.data.isCouponSelected=!1,{...r.affiliate_codes?.data,id:r.affiliate_codes?.id})),t.codeList=t.codeList.sort((r,l)=>{const c=r.name.toLowerCase(),d=l.name.toLowerCase();return c<d?-1:d>c?1:0})),t.codeList=yield Promise.all(t.codeList?.map(function(){var r=(0,m.Z)(function*(l){const c={...l};let d=window.location.protocol+"//"+window.location.hostname+"/landing";d+=`?bc=${c?.code}`,c.inviteLink=d;const g=yield t.createQR(d);return c.qrImg=g,c});return function(l){return r.apply(this,arguments)}}())),t.isCodeLoading=!1,t.isCheckingUserStatus=!1}),function(r){return n.apply(this,arguments)}),complete:()=>{}})}createQR(t){return new Promise(n=>{try{const l=ze.toDataURL(t,{errorCorrectionLevel:"H",width:900,type:"image/jpeg"}),c=Ge.loadImage("./assets/logo-for-qr.png");Promise.all([l,c]).then(([d,g])=>{const f=Ge.createCanvas(200,200),y=f.getContext("2d"),k=new Image;k.onload=()=>{y.drawImage(k,0,0,200,200),y.drawImage(g,75,75,50,50);const W=f.toDataURL("image/png");n(W)},k.src=d}).catch(d=>{console.error(d)})}catch(o){console.error("Error generating QR code",o)}})}getMyAffiliates(){this._itemService.searchLinkMultipleAll([{composition:this.userConceptId,listLinkers:["affiliate_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{listLinkers:["bought_s"],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:n=>{n.the_user.the_user_s_affiliate_s&&n?.the_user?.the_user_s_affiliate_s.map(r=>{const l=r?.the_user?.data,c=r?.the_user?.the_user_s_bought_s;let d=[];return c&&c.length>0&&(d=c.map(f=>{const y=f?.internal_sales_item?.data,k=y?.productId,Y=(y.commissionRate||0)/100,V=Number(y?.price)/100*Y,P=Number(y?.price)/100,W=Number(this.userAgentRate)/100,ne=Number((V*W).toFixed(2)),ee={price:P,reward:Number(ne)};return k&&(ee.productId=k),ee})),{name:`${l?.entity?.data?.person?.data?.first_name} ${l?.entity?.data?.person?.data?.last_name}`,email:l?.user_data?.data?.primary_email,affiliateBuys:d}})},complete:()=>{}})}copyCode(t){const o=t.target.parentNode.parentNode.parentNode.querySelector("code.agent-code").textContent;navigator?.clipboard?.writeText(o)}copyLink(t){const o=t.target.parentNode.parentNode.parentNode.querySelector("code.agent-invite-link").textContent;navigator?.clipboard?.writeText(o)}copyLinkWithCoupon(t){const o=t.target.parentNode.parentNode.parentNode.querySelector("code.agent-invite-link-coupon").textContent;navigator?.clipboard?.writeText(o)}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(M.FF),e.Y36(N.e),e.Y36(Z.e),e.Y36(fe.C))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-affiliate-code"]],inputs:{active:"active"},outputs:{updateTabSelection:"updateTabSelection"},decls:10,vars:3,consts:[[1,"row","mt-2"],[1,"col-md-12"],[1,"d-flex","align-items-center","justify-content-between","my-0"],[1,"tab-title"],[1,"btn","btn-primary",3,"click"],["class","row mt-4",4,"ngIf"],["class","container",4,"ngIf"],[1,"row","mt-4"],[1,"container"],[1,"row"],[4,"ngIf","ngIfElse"],["noCode",""],[1,"code-list"],[4,"ngFor","ngForOf"],[1,"my-0"],[1,"col-md-6","py-1"],["tabindex","0",3,"keyup","click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4),e.qZA(),e.TgZ(5,"div")(6,"button",4),e.NdJ("click",function(){return o.openCreateAffiliateForm()}),e._uU(7," Create Code "),e.qZA()()()()(),e.YNc(8,jr,3,0,"div",5),e.YNc(9,Kr,6,2,"div",6)),2&n&&(e.xp6(4),e.hij("My Affiliate codes (",o.codeList.length,")"),e.xp6(4),e.Q6J("ngIf",o.showChartAgency),e.xp6(1),e.Q6J("ngIf",!o.isCodeLoading))},dependencies:[p.sg,p.O5,Ot],styles:[".email-list[_ngcontent-%COMP%]{margin:1rem 0}.email-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;flex-wrap:wrap;background:#eee;padding:.75rem .5rem;margin-bottom:1rem;border-radius:4px}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]{cursor:pointer;color:#aaa}.email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]:hover, .email-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.material-symbols-outlined[_ngcontent-%COMP%]:focus{color:#f14141}.email-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#dedede;border-radius:1.5rem;padding:.5rem .75rem;margin-right:.5rem;margin-bottom:.5rem}.email-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.email-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]:hover{color:red}.invite-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}  .NgxEditor__Content{min-height:320px}.code-list[_ngcontent-%COMP%]{min-height:310px;overflow-y:auto;list-style-type:disc}.code-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.code-copy[_ngcontent-%COMP%]{background-color:#eee;border-radius:6px;display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem}.code-copy[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#666}.code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover, .code-copy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:focus{color:#d55b1e}.code-loading[_ngcontent-%COMP%]{margin-top:80px}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{line-height:1.5}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%]{border-bottom:none}.btn-custom[_ngcontent-%COMP%]{border:1px solid #dedede;background-color:#fff;font-size:.875rem;padding:.25rem 1rem;color:#666;display:flex;align-items:center;gap:.25rem}.btn-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.25rem}.btn-custom[_ngcontent-%COMP%]:hover, .btn-custom[_ngcontent-%COMP%]:focus{background-color:#dedede}.empty-agreement[_ngcontent-%COMP%]{padding:2rem 1rem}.empty-agreement[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:4rem!important;padding-bottom:1rem}.reward[_ngcontent-%COMP%]{background-color:#ffd7e2;border:1px solid #ffbfd3}.container[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:#333}hr[_ngcontent-%COMP%]{border-color:#ccc;margin:5px}.code-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.code-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{cursor:pointer;color:#007bff}.code-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]:hover{text-decoration:underline}.agency-graph[_ngcontent-%COMP%]{background:white;padding:9px 15px;color:#000;border:1px solid #fd7088;border-radius:20px}.create-code[_ngcontent-%COMP%]{border:none;border-radius:20px;background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));padding:9px 15px}"]}),a})();function Xr(a,s){1&a&&(e.TgZ(0,"div",4),e._UZ(1,"span",5),e.qZA())}function el(a,s){1&a&&(e.TgZ(0,"div",23)(1,"div",24)(2,"p"),e._uU(3,"Looking for data ..."),e.qZA()()())}function tl(a,s){1&a&&(e.ynx(0),e.TgZ(1,"div",24)(2,"p"),e._uU(3,"No data available."),e.qZA()(),e.BQk())}const Et=function(a,s){return{"status-pending":a,"status-signup":s}};function nl(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span",28),e._uU(7),e.qZA()(),e.TgZ(8,"td")(9,"span",29),e.NdJ("keyup.enter",function(){const o=e.CHM(i).$implicit,r=e.oxw(5);return e.KtG(r.viewHistory(o))})("click",function(){const o=e.CHM(i).$implicit,r=e.oxw(5);return e.KtG(r.viewHistory(o))}),e._uU(10," View History "),e.qZA()()()}if(2&a){const i=s.$implicit,t=s.index,n=e.oxw(5);e.xp6(2),e.Oqu(t+1),e.xp6(2),e.Oqu(i),e.xp6(2),e.Q6J("ngClass",e.WLB(4,Et,"Pending"===n.emailAgentsStatuses.get(i),"Client"===n.emailAgentsStatuses.get(i))),e.xp6(1),e.hij(" ",n.emailAgentsStatuses.get(i)," ")}}function il(a,s){if(1&a&&(e.TgZ(0,"div",25)(1,"table",26)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"#"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Email"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Status"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Action"),e.qZA()()(),e.TgZ(12,"tbody"),e.YNc(13,nl,11,7,"tr",27),e.qZA()()()),2&a){const i=e.oxw(4);e.xp6(13),e.Q6J("ngForOf",i.uniqueAgentEmails)}}function al(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",18)(2,"input",19,20),e.NdJ("keyup",function(n){e.CHM(i);const o=e.oxw(3);return e.KtG(o.searchAgentUsers(n))}),e.qZA()(),e.YNc(4,el,4,0,"div",21),e.YNc(5,tl,4,0,"ng-container",3),e.YNc(6,il,14,1,"ng-template",null,22,e.W1O),e.BQk()}if(2&a){const i=e.MAs(7),t=e.oxw(3);e.xp6(4),e.Q6J("ngIf",t.looking)("ngIfElse",i),e.xp6(1),e.Q6J("ngIf",!t.looking&&0===t.uniqueAgentEmails.size)}}const Dt=function(a,s){return[a,s]};function ol(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"a",40),e.NdJ("keyup.enter",function(){e.CHM(i);const n=e.oxw().$implicit,o=e.oxw(5);return e.KtG(o.handleAccordionClick(null==n||null==n.EmailData?null:n.EmailData.id))})("click",function(){e.CHM(i);const n=e.oxw().$implicit,o=e.oxw(5);return e.KtG(o.handleAccordionClick(null==n||null==n.EmailData?null:n.EmailData.id))}),e._uU(1),e.qZA()}if(2&a){const i=e.oxw().$implicit,t=e.oxw(5);e.Q6J("ngClass",e.WLB(2,Dt,t.openedEmailTemplates.includes(null==i.EmailData?null:i.EmailData.id)&&t.accordionHasElements(null==i||null==i.EmailData?null:i.EmailData.id)?"":"collapsed",t.accordionHasElements(null==i||null==i.emailData?null:i.emailData.id)?"":"remove-accordion-icon")),e.xp6(1),e.hij(" ",null==i||null==i.EmailData||null==i.EmailData.data?null:i.EmailData.data.heading,"")}}function sl(a,s){if(1&a&&e._UZ(0,"p",46),2&a){const i=e.oxw(3).$implicit;e.Q6J("innerHTML",null==i||null==i.EmailData||null==i.EmailData.data?null:i.EmailData.data.body,e.oJD)}}function rl(a,s){if(1&a&&(e.TgZ(0,"div",43)(1,"div",44),e.YNc(2,sl,1,1,"p",45),e.qZA()()),2&a){const i=e.oxw(2).$implicit,t=e.oxw(5);e.xp6(2),e.Q6J("ngIf",t.getFirstAvailableType(i))}}function ll(a,s){if(1&a&&(e.TgZ(0,"div",41),e.YNc(1,rl,3,1,"div",42),e.qZA()),2&a){const i=e.oxw().$implicit,t=e.oxw(5);e.Q6J("id",null==i||null==i.EmailData?null:i.EmailData.id)("ngClass",t.openedEmailTemplates.includes(null==i.EmailData?null:i.EmailData.id)?"show":""),e.xp6(1),e.Q6J("ngIf",t.openedEmailTemplates.includes(null==i||null==i.EmailData?null:i.EmailData.id))}}function cl(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",33)(2,"h2",34)(3,"div",35),e.YNc(4,ol,2,5,"a",36),e.TgZ(5,"div")(6,"span",37),e.NdJ("keyup.enter",function(){const o=e.CHM(i).$implicit,r=e.oxw(5);return e.KtG(r.resendEmail(o))})("click",function(){const o=e.CHM(i).$implicit,r=e.oxw(5);return e.KtG(r.resendEmail(o))}),e.TgZ(7,"span",38),e._uU(8," send "),e.qZA()()()()(),e.YNc(9,ll,2,3,"div",39),e.qZA(),e.BQk()}if(2&a){const i=s.$implicit,t=e.oxw(5);e.xp6(4),e.Q6J("ngIf",t.getFirstAvailableType(i)),e.xp6(5),e.Q6J("ngIf",t.accordionHasElements(null==i||null==i.EmailData?null:i.EmailData.id))}}function dl(a,s){if(1&a&&(e.ynx(0),e.YNc(1,cl,10,2,"ng-container",27),e.BQk()),2&a){const i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",i.emailHistory)}}function ul(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",24)(2,"div",47)(3,"p"),e._uU(4,"No email history available."),e.qZA(),e.TgZ(5,"div")(6,"button",48),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(4);return e.KtG(n.goToAffiliatestab(n.selectedEmail))}),e._uU(7," Resend "),e.TgZ(8,"span",49),e._uU(9," send "),e.qZA()()()()(),e.BQk()}}function ml(a,s){if(1&a&&(e.ynx(0),e._UZ(1,"app-invite-template",50),e.BQk()),2&a){const i=e.oxw(4);e.xp6(1),e.Q6J("inviterAffiliateCode",i.invitedAffiliateCode)("affiliateCodeList",i.codeList)("templateFromEmailHistory",i.emailTemplate)("agentCouponList",i.agentCouponList)}}function gl(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"span",32),e.NdJ("keyup.enter",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.goBack())})("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.goBack())}),e._uU(3," arrow_back "),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Go back"),e.qZA()(),e.YNc(6,dl,2,1,"ng-container",3),e.YNc(7,ul,10,0,"ng-container",3),e.YNc(8,ml,2,4,"ng-container",3),e.qZA()}if(2&a){const i=e.oxw(3);e.xp6(6),e.Q6J("ngIf",i.emailHistory&&!i.inviteTemplate),e.xp6(1),e.Q6J("ngIf",void 0===(null==i.emailHistory?null:i.emailHistory.length)&&!1===i.isSendingEmail),e.xp6(1),e.Q6J("ngIf",i.inviteTemplate)}}function pl(a,s){if(1&a&&(e.TgZ(0,"div",13)(1,"div",14)(2,"h4",15),e._uU(3,"Clients"),e.qZA(),e.YNc(4,al,8,3,"ng-container",16),e.YNc(5,gl,9,3,"ng-template",null,17,e.W1O),e.qZA()()),2&a){const i=e.MAs(6),t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",!t.viewHistoryTemplate)("ngIfElse",i)}}function _l(a,s){1&a&&(e.TgZ(0,"div",23)(1,"div",24)(2,"p"),e._uU(3,"Looking for data ..."),e.qZA()()())}function hl(a,s){1&a&&(e.ynx(0),e.TgZ(1,"div",24)(2,"p"),e._uU(3,"No data available."),e.qZA()(),e.BQk())}function fl(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",53)(2,"div",23)(3,"p"),e._uU(4,"Looking for data..."),e.qZA()()()())}function bl(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span",28),e._uU(7),e.qZA()(),e.TgZ(8,"td")(9,"span",29),e.NdJ("keyup.enter",function(){const o=e.CHM(i).$implicit,r=e.oxw(5);return e.KtG(r.viewHistory(o))})("click",function(){const o=e.CHM(i).$implicit,r=e.oxw(5);return e.KtG(r.viewHistory(o))}),e._uU(10," View History "),e.qZA()()()}if(2&a){const i=s.$implicit,t=s.index,n=e.oxw(5);e.xp6(2),e.Oqu(t+1),e.xp6(2),e.Oqu(i),e.xp6(2),e.Q6J("ngClass",e.WLB(4,Et,"Pending"===n.emailFriendsStatuses.get(i),"Friend"===n.emailFriendsStatuses.get(i))),e.xp6(1),e.hij(" ",n.emailFriendsStatuses.get(i)," ")}}function yl(a,s){if(1&a&&(e.TgZ(0,"div",25)(1,"table",26)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"#"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Email"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Status"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Action"),e.qZA()()(),e.TgZ(12,"tbody"),e.YNc(13,fl,5,0,"tr",3),e.YNc(14,bl,11,7,"tr",27),e.qZA()()()),2&a){const i=e.oxw(4);e.xp6(13),e.Q6J("ngIf",i.looking),e.xp6(1),e.Q6J("ngForOf",i.uniqueFriendEmails)}}function Cl(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",18)(2,"input",51,20),e.NdJ("keyup",function(n){e.CHM(i);const o=e.oxw(3);return e.KtG(o.searchFriendUsers(n))}),e.qZA()(),e.YNc(4,_l,4,0,"div",21),e.YNc(5,hl,4,0,"ng-container",3),e.YNc(6,yl,15,2,"ng-template",null,52,e.W1O),e.BQk()}if(2&a){const i=e.MAs(7),t=e.oxw(3);e.xp6(4),e.Q6J("ngIf",t.looking)("ngIfElse",i),e.xp6(1),e.Q6J("ngIf",!t.looking&&0===t.uniqueFriendEmails.size)}}function vl(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"a",40),e.NdJ("keyup.enter",function(){e.CHM(i);const n=e.oxw().$implicit,o=e.oxw(5);return e.KtG(o.handleAccordionClick(null==n||null==n.EmailData?null:n.EmailData.id))})("click",function(){e.CHM(i);const n=e.oxw().$implicit,o=e.oxw(5);return e.KtG(o.handleAccordionClick(null==n||null==n.EmailData?null:n.EmailData.id))}),e._uU(1),e.qZA()}if(2&a){const i=e.oxw().$implicit,t=e.oxw(5);e.Q6J("ngClass",e.WLB(2,Dt,t.openedEmailTemplates.includes(null==i.EmailData?null:i.EmailData.id)&&t.accordionHasElements(null==i||null==i.EmailData?null:i.EmailData.id)?"":"collapsed",t.accordionHasElements(null==i||null==i.emailData?null:i.emailData.id)?"":"remove-accordion-icon")),e.xp6(1),e.hij(" ",null==i||null==i.EmailData||null==i.EmailData.data?null:i.EmailData.data.heading,"")}}function xl(a,s){if(1&a&&e._UZ(0,"p",46),2&a){const i=e.oxw(3).$implicit;e.Q6J("innerHTML",null==i||null==i.EmailData||null==i.EmailData.data?null:i.EmailData.data.body,e.oJD)}}function Tl(a,s){if(1&a&&(e.TgZ(0,"div",43)(1,"div",44),e.YNc(2,xl,1,1,"p",45),e.qZA()()),2&a){const i=e.oxw(2).$implicit,t=e.oxw(5);e.xp6(2),e.Q6J("ngIf",t.getFirstAvailableType(i))}}function wl(a,s){if(1&a&&(e.TgZ(0,"div",41),e.YNc(1,Tl,3,1,"div",42),e.qZA()),2&a){const i=e.oxw().$implicit,t=e.oxw(5);e.Q6J("id",null==i||null==i.EmailData?null:i.EmailData.id)("ngClass",t.openedEmailTemplates.includes(null==i.EmailData?null:i.EmailData.id)?"show":""),e.xp6(1),e.Q6J("ngIf",t.openedEmailTemplates.includes(null==i||null==i.EmailData?null:i.EmailData.id))}}function Al(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",33)(2,"h2",34)(3,"div",35),e.YNc(4,vl,2,5,"a",36),e.TgZ(5,"div")(6,"span",37),e.NdJ("keyup.enter",function(){const o=e.CHM(i).$implicit,r=e.oxw(5);return e.KtG(r.resendEmail(o))})("click",function(){const o=e.CHM(i).$implicit,r=e.oxw(5);return e.KtG(r.resendEmail(o))}),e.TgZ(7,"span",38),e._uU(8," send "),e.qZA()()()()(),e.YNc(9,wl,2,3,"div",39),e.qZA(),e.BQk()}if(2&a){const i=s.$implicit,t=e.oxw(5);e.xp6(4),e.Q6J("ngIf",t.getFirstAvailableType(i)),e.xp6(5),e.Q6J("ngIf",t.accordionHasElements(null==i||null==i.EmailData?null:i.EmailData.id))}}function Ml(a,s){if(1&a&&(e.ynx(0),e.YNc(1,Al,10,2,"ng-container",27),e.BQk()),2&a){const i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",i.emailHistory)}}function kl(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",24)(2,"div",47)(3,"p"),e._uU(4,"No email history available."),e.qZA(),e.TgZ(5,"div")(6,"button",48),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(4);return e.KtG(n.goToAffiliatestab(n.selectedEmail))}),e._uU(7," Resend "),e.TgZ(8,"span",49),e._uU(9," send "),e.qZA()()()()(),e.BQk()}}function Pl(a,s){if(1&a&&(e.ynx(0),e._UZ(1,"app-invite-template",50),e.BQk()),2&a){const i=e.oxw(4);e.xp6(1),e.Q6J("inviterAffiliateCode",i.invitedAffiliateCode)("affiliateCodeList",i.codeList)("templateFromEmailHistory",i.emailTemplate)("agentCouponList",i.agentCouponList)}}function Zl(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"span",32),e.NdJ("keyup.enter",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.goBack())})("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.goBack())}),e._uU(3," arrow_back "),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Go back"),e.qZA()(),e.YNc(6,Ml,2,1,"ng-container",3),e.YNc(7,kl,10,0,"ng-container",3),e.YNc(8,Pl,2,4,"ng-container",3),e.qZA()}if(2&a){const i=e.oxw(3);e.xp6(6),e.Q6J("ngIf",i.emailHistory&&!i.inviteTemplate),e.xp6(1),e.Q6J("ngIf",void 0===(null==i.emailHistory?null:i.emailHistory.length)&&!1===i.isSendingEmail),e.xp6(1),e.Q6J("ngIf",i.inviteTemplate)}}function Il(a,s){if(1&a&&(e.TgZ(0,"div",13)(1,"div",14)(2,"h4",15),e._uU(3,"Friends"),e.qZA(),e.YNc(4,Cl,8,3,"ng-container",16),e.YNc(5,Zl,9,3,"ng-template",null,17,e.W1O),e.qZA()()),2&a){const i=e.MAs(6),t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",!t.viewHistoryTemplate)("ngIfElse",i)}}function Ol(a,s){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"ul",6,7)(3,"li",8)(4,"a",9),e.NdJ("keyup",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.onTabChange(1))})("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.onTabChange(1))}),e._uU(5),e.qZA(),e.YNc(6,pl,7,2,"ng-template",10),e.qZA(),e.TgZ(7,"li",8)(8,"a",9),e.NdJ("keyup",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.onTabChange(2))})("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.onTabChange(2))}),e._uU(9),e.qZA(),e.YNc(10,Il,7,2,"ng-template",10),e.qZA(),e.TgZ(11,"a",11),e._uU(12),e.qZA()(),e._UZ(13,"div",12),e.BQk()}if(2&a){const i=e.MAs(2),t=e.oxw();e.xp6(1),e.Q6J("activeId",t.activeMenu),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(2),e.hij(" Clients (",t.uniqueAgentEmails.size,") "),e.xp6(2),e.Q6J("ngbNavItem",2),e.xp6(2),e.hij(" Friends (",t.uniqueFriendEmails.size,") "),e.xp6(3),e.hij("Total Invitations: ",t.uniqueAgentEmails.size+t.uniqueFriendEmails.size,""),e.xp6(1),e.Q6J("ngbNavOutlet",i)}}let Sl=(()=>{const s=class{constructor(t,n,o,r,l){this._itemService=t,this._authService=n,this.affiliateService=o,this._snackbarService=r,this.modalService=l,this.uniqueAgentEmails=new Set,this.uniqueFriendEmails=new Set,this.invitedList=[],this.loader=!1,this.viewHistoryTemplate=!1,this.openedEmailTemplates=[],this.inviteTemplate=!1,this.invitedAffiliateCode="",this.codeList=[],this.agentCouponList=[],this.isSendingEmail=!1,this.looking=!1,this.activeMenu=1,this.showAgentInvites=!1,this.showFriendInvites=!1,this.selectedEmails=[],this.invitations=[],this.isInviteesLoading=!1,this.friends=[],this.Secondfriends=[],this.Thirdfriends=[],this.data=[],this.agentUser=new de.x,this.friendsUser=new de.x,this.searchAgentUsers=c=>this.agentUser.next(c.target.value),this.searchFriendUsers=c=>this.friendsUser.next(c.target.value),this.emailAgentsStatuses=new Map,this.emailFriendsStatuses=new Map,this.firstLevelFriends=[],this.secondLevelFriends=[],this.friendListData=[],this.uniqueFriendEmailsArray=[],this.firstLevelFriends1=[],this.friendEmails=[],this.pendingEmails=[],this.updateTabSelection=new e.vpe,this.agentUser.pipe((0,He.b)(300),(0,je.x)()).subscribe({next:c=>{this.searchAgentsInvitation(c)}}),this.friendsUser.pipe((0,He.b)(300),(0,je.x)()).subscribe({next:c=>{this.searchFriendsInvitation(c)}})}ngOnInit(){this.looking=!0,this.updateTabSelection.emit(this.active);const t=this._authService.loadFromLocalStorage();this.userConceptId=t.userConcept,this.checkFriendInvite(),this.checkAgentInvite(),this.checkAllInvite(),this.getInvitees(),this.getMyAffiliates(),this.getFriendsLists()}getFriendsLists(){var t=this;return(0,m.Z)(function*(){const o=[{composition:t.entityId,listLinkers:[H.ym+"_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{fullLinkers:["the_entity_user"],listLinkers:["friend_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{fullLinkers:["the_entity_user"],listLinkers:["friend_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{fullLinkers:["the_entity_user"],listLinkers:["friend_s"],inpage:100,page:1,logic:"or",filterSearches:[]}];(0,ue.D)([t._itemService.searchLinkMultipleAll([{composition:t.userConceptId,listLinkers:[H.ym+"_s"],inpage:1e3,page:1,logic:"or"},{listLinkers:[H.ym+"_s"],inpage:1e3,page:1,logic:"or"},{listLinkers:[H.ym+"_s"],inpage:1e3,page:1,logic:"or"},{listLinkers:[H.ym+"_s"],inpage:1e3,page:1,logic:"or"}]),t._itemService.searchLinkMultipleAll(o)]).subscribe(([r,l])=>{let c=r?.the_user?.the_user_s_friend_s||[],d=[],g=[];c=c.map(P=>(P?.the_user?.the_user_s_friend_s?.length>0&&(d=[...d,...P.the_user.the_user_s_friend_s]),P.the_user)),d=d.map(P=>(P?.the_user?.the_user_s_friend_s?.length>0&&(g=[...g,...P.the_user.the_user_s_friend_s]),P.the_user));let f=l?.the_entity?.the_entity_s_friend_s||[],y=[],k=[];f=f.map(P=>(P?.the_entity?.the_entity_s_friend_s&&(y=[...y,...P.the_entity.the_entity_s_friend_s]),P?.the_entity?.the_entity_user?.[0]?.the_user)),y=y.map(P=>(P?.the_entity?.the_entity_s_friend_s&&(k=[...k,...P.the_entity.the_entity_s_friend_s]),P?.the_entity?.the_entity_user?.[0]?.the_user)),t.firstLevelFriends=[...c,...f],t.secondLevelFriends=[...d,...y],t.thirdLevelFriends=[...g,...k],t.friends=t.firstLevelFriends.map(P=>({conceptId:P?.person?.id,entityId:P?.id,person:P?.person?.first_name,entity:P?.data?.entity?.data||" ",entity_email:P?.data?.user_data?.data?.primary_email,email:P?.the_user?.data?.user_data?.data?.primary_email})),t.filteredFirstLevelFriends=t.friends,t.Secondfriends=t.secondLevelFriends.map(P=>({conceptId:P?.the_user?.id,entityId:P?.id,person:P?.the_user?.data?.entity?.data,entity:P?.data?.entity?.data||" ",entity_email:P?.data?.user_data?.data?.primary_email,email:P?.the_user?.data?.user_data?.data?.primary_email})),t.filteredSecondLevelFriends=t.Secondfriends,t.Thirdfriends=t.thirdLevelFriends.map(P=>({conceptId:P?.the_user?.id,entityId:P?.id,person:P?.the_user?.data?.entity?.data,entity:P?.data?.entity?.data||" ",the_entity:P?.the_entity?.the_entity_user?.[0]?.the_user?.data?.entity?.data||"",entity_email:P?.the_entity?.the_entity_user?.[0]?.the_user?.data?.user_data?.data?.primary_email,email:P?.the_user?.data?.user_data?.data?.primary_email})),t.filteredThirdLevelFriends=t.Thirdfriends;const Y=[...t.filteredFirstLevelFriends,...t.filteredSecondLevelFriends,...t.filteredThirdLevelFriends].map(P=>({email:P.email,entity_email:P.entity_email}));t.emailFriendsStatuses=new Map,Array.from(t.uniqueFriendEmails).forEach(P=>{const ne=Y.find(ee=>ee.email===P||ee.entity_email===P)?"Friend":"Pending";t.emailFriendsStatuses.set(P,ne)})})})()}getMyAffiliates(){var t=this;return(0,m.Z)(function*(){try{t.updateUniqueEmailsAgent(),t.entityId=yield t.getEntityId();const o=[{composition:t.entityId,listLinkers:["affiliate_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{fullLinkers:["the_entity_user"],inpage:100,page:1,logic:"or",filterSearches:[]}],r=l=>l.map(c=>{const d=c?.data?.the_user||c?.data?.the_entity?.the_entity_user?.[0]?.data?.the_user,k=d?.user_data?.primary_email,Y=c?.created_at;return{name:`${d?.entity?.person?.first_name||"User"} ${d?.entity?.person?.last_name||""}`,email:k,created_at:Y,profile_img:d?.entity?.person?.profile_img||"",status:t.uniqueAgentEmails.has(k)?"Client":"Pending"}});(0,ue.D)([t._itemService.searchLinkMultipleClean([{composition:t.userConceptId,listLinkers:["affiliate_s"],inpage:100,page:1,logic:"or"}]),t._itemService.searchLinkMultipleClean(o)]).subscribe(([l,c])=>{const g=c?.data?.the_entity?.the_entity_s_affiliate_s||[],k=[...r(l?.data?.the_user?.the_user_s_affiliate_s||[]),...r(g)],V=Array.from(new Set(k.map(P=>P.email))).map(P=>k.find(ne=>ne.email===P)||{email:P,status:"Pending"});t.myAffiliates=V,t.filteredAffiliates=V,t.emailAgentsStatuses.clear(),t.uniqueAgentEmails.forEach(P=>{const W=V.find(ne=>ne.email===P);t.emailAgentsStatuses.set(P,W?W.status:"Pending")}),t.getFriendsLists()},l=>{console.error("Error fetching affiliates:",l)})}catch(n){console.error("Error in getMyAffiliates:",n)}})()}getEntityId(){return new Promise(t=>{this._itemService.checkEnitity(this.userConceptId).subscribe({next:n=>{const o=n?.entity;t(o)},error:n=>{console.error(n)}})})}getInvitees(){this._itemService.getAll("invitees").subscribe({next:t=>{let o=t?.data.map(d=>{const g=[new Date(d?.data?.invitees?.timestamp).toLocaleString()],f=d?.data?.invitees?.email;let y;return Array.isArray(f)&&(y=f.map(k=>({email:k,invitedTime:g}))),y}).flat();o=o.filter(d=>void 0!==d),o.sort((d,g)=>{const f=new Date(d?.invitedTime).getTime();return new Date(g?.invitedTime).getTime()-f});const r=[],l={};o.forEach(d=>{const{email:g,invitedTime:f}=d;l[g]?r.forEach(y=>{y.email===g&&y.invitedTime.push(f)}):(l[g]=[f],r.push({email:g,invitedTime:[f]}))});const c=this.friendsList?.firstLevel?.map(d=>d?.the_user?.data?.user_data?.data?.primary_email)||[];this.invitedList=c.length>0?r.filter(d=>!c.includes(d.email)):r,this.isInviteesLoading=!1},error:t=>{console.error(t)}})}openInviteeList(){this.invitedList?.length>0&&(this.modalService.open(Ft,{size:"lg",centered:!0,scrollable:!0}).componentInstance.inviteeLists=this.invitedList)}viewHistory(t){this.viewHistoryTemplate=!0,this.selectedEmail=t,this._itemService.searchLinkMultipleAll([{composition:this.userConceptId,listLinkers:["email_history_s"],inpage:10,page:1,logic:"or",filterSearches:[{type:"toAddress",search:t,logicoperxator:"="}]}]).subscribe({next:r=>{this.looking=!1;const l=r?.the_user?.the_user_s_email_history_s;this.emailHistory=l?.filter(c=>c.EmailData)}})}handleAccordionClick(t){const n=this.openedEmailTemplates.indexOf(t);-1===n?this.openedEmailTemplates.push(t):this.openedEmailTemplates.splice(n,1)}resendEmail(t){this._itemService.sendEmail({heading:t?.EmailData?.data?.heading,body:t?.EmailData?.data?.body,toAddress:t?.EmailData?.data?.toAddress,attachments:t?.EmailData?.data?.attachments||[],ccAddresses:t?.EmailData?.data?.ccAddresses||[],bulkAddresses:t?.EmailData?.data?.bulkAddresses||[]}).subscribe({next:()=>{this._snackbarService.openSnackBar("Resend email successfull!","success")},error:()=>{this._snackbarService.openSnackBar("Couldnt send email! Please try again","success")}})}checkAgentInvite(){this._itemService.getSemanticConnection({compositionId:this.userConceptId,linker:`${H.M7}_s`}).subscribe({next:n=>{if(this.looking=!1,n&&n.count>0&&Array.isArray(n.output)){const o=n.output.map(r=>{const l=new Date(r.created_at).toLocaleString();return{email:r.data.signup_invitation.toAddress,invitedTime:l}});o.sort((r,l)=>{const c=new Date(r.invitedTime).getTime();return new Date(l.invitedTime).getTime()-c}),o.forEach(r=>{this.uniqueAgentEmails.add(r.email),this.looking=!1})}},error:n=>{console.error(n)}})}checkAllInvite(){this._itemService.getSemanticConnection({compositionId:this.userConceptId,linker:`${H.Es}_s`}).subscribe({next:n=>{n&&n.count>0&&Array.isArray(n.output)?n.output.forEach(o=>{this.looking=!1;const r=o.data.signup_invitation.tag,l=o.data.signup_invitation.toAddress;"friend"===r?this.uniqueFriendEmails.add(l):"agent"===r?this.uniqueAgentEmails.add(l):console.warn("Unknown invitation type.")}):console.warn("No invitations found.")},error:n=>{console.error(n)}})}checkFriendInvite(){this._itemService.getSemanticConnection({compositionId:this.userConceptId,linker:`${H.cG}_s`}).subscribe({next:n=>{if(this.looking=!1,n&&n.count>0&&Array.isArray(n.output)){const o=n.output.map(r=>{const l=new Date(r.created_at).toLocaleString();return{email:r.data.signup_invitation.toAddress,invitedTime:l}});o.sort((r,l)=>{const c=new Date(r.invitedTime).getTime();return new Date(l.invitedTime).getTime()-c}),o.forEach(r=>{this.uniqueFriendEmails.add(r.email),this.looking=!1})}else console.warn("No agent invitations found.")},error:n=>{console.error(n)}})}searchAgentsInvitation(t){var n=this;return(0,m.Z)(function*(){n.searchTerm=t,t.trim()?n._itemService.searchLinkMultipleAll([{composition:n.userConceptId,listLinkers:[`${H.M7}_s`,`${H.Es}_s`],inpage:10,page:1,logic:"or",filterSearches:[{type:"toAddress",search:`%${t}%`,logicoperator:"LIKE",index:1}]}]).subscribe({next:r=>{const l=r.the_user;n.invitations=(l.the_user_s_agent_invite_s||[]).concat(l.the_user_s_email_invite_s||[]),n.updateUniqueEmailsAgent(),n.looking=!1},error:r=>{console.error(r)},complete:()=>{}}):(n.checkAllInvite(),n.checkAgentInvite())})()}searchFriendsInvitation(t){var n=this;return(0,m.Z)(function*(){n.searchTerm=t,t.trim()?n._itemService.searchLinkMultipleAll([{composition:n.userConceptId,listLinkers:[`${H.cG}_s`,`${H.Es}_s`],inpage:10,page:1,logic:"or",filterSearches:[{type:"toAddress",search:`%${t}%`,logicoperator:"LIKE",index:1}]}]).subscribe({next:r=>{const l=r.the_user;n.invitations=(l.the_user_s_friend_invite_s||[]).concat(l.the_user_s_email_invite_s||[]),n.updateUniqueEmailsFriends(),n.looking=!1},error:r=>{console.error(r)},complete:()=>{}}):(n.checkAllInvite(),n.checkFriendInvite())})()}updateUniqueEmailsAgent(){const t=new Set;this.invitations&&Array.isArray(this.invitations)&&this.invitations.forEach(n=>{if(n.signup_invitation&&n.signup_invitation.data){const{tag:o,toAddress:r}=n.signup_invitation.data;"agent"===o&&r&&t.add(r)}}),this.uniqueAgentEmails=t}updateUniqueEmailsFriends(){const t=new Set;this.invitations&&Array.isArray(this.invitations)&&this.invitations.forEach(n=>{if(n.signup_invitation&&n.signup_invitation.data){const{tag:o,toAddress:r}=n.signup_invitation.data;"friend"===o&&r&&t.add(r)}}),this.uniqueFriendEmails=t}onTabChange(t){this.viewHistoryTemplate=!1,this.activeMenu=t}getFirstAvailableType(t){return!!t.EmailData.data}accordionHasElements(t){return this.emailHistory.some(n=>n.EmailData.id===t)}goBack(){this.viewHistoryTemplate=!1,this.inviteTemplate=!1,this.isSendingEmail=!1}goToAffiliatestab(t){this.emailTemplate=t?.EmailData?.data||{toAddress:t},this.loader=!0,this.isSendingEmail=!0,this.listAffiliateCodes()}listAffiliateCodes(){this.affiliateService.listAffiliateCode().subscribe({next:t=>{null!==t&&(this.codeList=t.data?.map(o=>o.affiliate_codes?.data),this.codeList=this.codeList.sort((o,r)=>{const l=o.name.toLowerCase(),c=r.name.toLowerCase();return l<c?-1:c>l?1:0}));const n=this.codeList[0]?.code;this.invitedAffiliateCode=n,this.checkUserAgentType()},error:t=>{console.error("err",t)}})}checkUserAgentType(){this._itemService.getSemanticConnection({compositionId:this.userConceptId,linker:"isAgent_s"}).subscribe({next:n=>{const o=n?.output?.filter(r=>r?.data?.marketingAgent_agent);this.marketingAgentId=o?.[0]?.id,this.getCouponCodes()},error:n=>{console.error(n)}})}getCouponCodes(){this.loader=!1;const t=(new Date).toISOString().split("T")[0],o=[{composition:this.userConceptId,listLinkers:["couponcode_to_marketingAgents_by"],inpage:10,page:1,logic:"or",filterSearches:[{type:"RedeemBy",search:t,logicoperator:">"}]}];(0,ue.D)([this._itemService.searchLinkMultipleAll([{composition:this.marketingAgentId,listLinkers:["couponcode_to_marketingAgents_by"],inpage:10,page:1,logic:"or",filterSearches:[{type:"RedeemBy",search:t,logicoperator:">"}]}]),this._itemService.searchLinkMultipleAll(o)]).subscribe({next:([r,l])=>{const g=[...r?.marketingAgent_agent?.marketingAgent_agent_s_couponcode_to_marketingAgents_by?.map(y=>y?.CoupounData?.data)||[],...l?.the_user?.the_user_s_couponcode_to_marketingAgents_by?.map(y=>y?.CoupounData?.data)||[]];let f=g.map(y=>y?.products?.data).flat();f=[...new Set(f)].map(y=>Number(y)),(0,T.EHb)(f).then(y=>{this.agentCouponList=g.map(k=>(k.products=k.products.data.map(Y=>y.filter(P=>Number(Y)===P?.id)),k))}).catch(y=>{console.error(y)})},error:r=>{console.error(r)}})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(Z.e),e.Y36(N.e),e.Y36(fe.C),e.Y36(G.o),e.Y36(M.FF))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-invitees"]],inputs:{active:"active"},outputs:{updateTabSelection:"updateTabSelection"},decls:4,vars:2,consts:[[1,"container","bg-white","mt-3"],[1,"col-md-18","mx-auto","mt-4"],["class","loading",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"loader"],["ngbNav","",1,"nav-tabs",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink","","tabindex","",3,"keyup","click"],["ngbNavContent",""],[1,"size","d-flex","align-items-end","justify-content-end"],[1,"mt-2",3,"ngbNavOutlet"],[1,"row"],[1,"col-md-12"],[1,"my-3"],[4,"ngIf","ngIfElse"],["historyView",""],[1,"search"],["type","text","placeholder","Search invited email...",3,"keyup"],["searchInput",""],["class","looking-loading",4,"ngIf","ngIfElse"],["data",""],[1,"looking-loading"],[1,"m-5","p-5","d-flex","align-items-center","justify-content-center","text-center"],[1,"fixed-table"],[1,"table","fixed_layout"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],["tabindex","0",1,"history_btn",3,"keyup.enter","click"],[1,"accordion"],[1,"d-flex","gap-2"],["tabindex","0",1,"material-symbols-outlined","cursor-pointer",3,"keyup.enter","click"],[1,"accordion-item"],[1,"accordion-header",3,"id"],[1,"d-flex","align-items-center","justify-content-between","w-100"],["role","button","tabindex","0","class","accordion-button fw-semibold gap-2",3,"ngClass","keyup.enter","click",4,"ngIf"],["tabindex","0",1,"cursor-pointer",3,"keyup.enter","click"],["title","resend email",1,"material-symbols-outlined","link-warning"],["class","accordion-collapse collapse",3,"id","ngClass",4,"ngIf"],["role","button","tabindex","0",1,"accordion-button","fw-semibold","gap-2",3,"ngClass","keyup.enter","click"],[1,"accordion-collapse","collapse",3,"id","ngClass"],["class","",4,"ngIf"],[1,""],[1,"accordion-body","overflow-auto","text-break"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"d-flex","align-items-center","flex-column"],[1,"btn","btn-primary","btn-sm","d-flex","align-items-center","resend_btn",3,"click"],["title","Resend email",1,"material-symbols-outlined"],[3,"inviterAffiliateCode","affiliateCodeList","templateFromEmailHistory","agentCouponList"],["type","text","placeholder","Search Invited Email...",3,"keyup"],["friendsData",""],["colspan","4",1,"text-center"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Xr,2,0,"div",2),e.YNc(3,Ol,14,7,"ng-container",3),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("ngIf",o.loader),e.xp6(1),e.Q6J("ngIf",!o.loader))},dependencies:[p.mk,p.sg,p.O5,M.uN,M.Pz,M.nv,M.Vx,M.tO,_t],styles:[".main_container[_ngcontent-%COMP%]{height:40vh;overflow:auto}.status-pending[_ngcontent-%COMP%]{background-color:#ff0;color:#000;padding:.25em .4em;border-radius:.25rem;font-weight:700}.status-signup[_ngcontent-%COMP%]{background-color:green;color:#fff;padding:.25em .4em;border-radius:.25rem;font-weight:700}.level-box[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:.5rem;padding:1rem;text-align:center}.level-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fd7088;font-weight:500;font-size:20px}.level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{opacity:.8}.list-container[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px;border:1px solid #ccc;border-radius:8px}.list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:24px;margin-bottom:10px}.list-container[_ngcontent-%COMP%]   .template-content[_ngcontent-%COMP%]{color:#666;font-size:16px}.history_btn[_ngcontent-%COMP%]{font-weight:500;font-size:16px;padding:5px;background-color:#ccc;border-radius:5px;cursor:pointer}.resend_btn[_ngcontent-%COMP%]{width:180px;display:flex;align-items:center;justify-content:center;font-size:18px}.code-copy[_ngcontent-%COMP%]{background-color:#eee;border-radius:6px;display:flex;align-items:center;justify-content:space-between;padding:.25rem 1rem}.code-copy[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#666}.btn-custom[_ngcontent-%COMP%]{border:1px solid #dedede;background-color:#fff;font-size:.875rem;padding:.25rem 1rem;color:#666;display:flex;align-items:center;gap:.25rem}.btn-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.25rem}.btn-custom[_ngcontent-%COMP%]:hover, .btn-custom[_ngcontent-%COMP%]:focus{background-color:#dedede}.user-list[_ngcontent-%COMP%]{display:flex;gap:1.5rem;align-items:center;padding:.5rem 1rem;border-radius:.5rem;border-bottom:1px solid #ddd}.user-list[_ngcontent-%COMP%]:hover, .user-list[_ngcontent-%COMP%]:focus{background-color:#eee;cursor:pointer}.profile-image[_ngcontent-%COMP%]{height:60px;width:60px;border-radius:50%;object-fit:cover;border:1px solid gray}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:rgba(17,17,17,.0666666667);margin-bottom:1rem;padding:5px 10px;border-radius:5px;width:100%;height:40px}.scrollable-tbody[_ngcontent-%COMP%]{max-height:50vh;overflow-y:auto}.fixed-table[_ngcontent-%COMP%]{overflow:auto;border-radius:0;max-height:calc(60vh - 118px)}.fixed-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background-color:#ccc}.size[_ngcontent-%COMP%]{margin-left:59%}"]}),a})();function ql(a,s){if(1&a&&(e.TgZ(0,"div",4)(1,"div",5)(2,"p",6),e._uU(3),e.TgZ(4,"small"),e._uU(5),e.qZA()(),e.TgZ(6,"p",6)(7,"small"),e._uU(8),e.ALo(9,"date"),e.qZA()()(),e.TgZ(10,"div",7)(11,"h3"),e._uU(12),e.qZA()()()),2&a){const i=s.$implicit;e.xp6(3),e.hij(" ",null==i?null:i.name," "),e.xp6(2),e.hij("(",null==i?null:i.time,")"),e.xp6(3),e.Oqu(e.xi3(9,4,null==i?null:i.timestamp,"medium")),e.xp6(4),e.hij("$",null==i?null:i.price,"")}}function Fl(a,s){if(1&a&&(e.ynx(0),e.YNc(1,ql,13,7,"div",3),e.BQk()),2&a){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.productPurchases)}}function El(a,s){1&a&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"p"),e._uU(4,"You have no purchase yet."),e.qZA()()()())}let Dl=(()=>{const s=class{constructor(t,n){this.itemService=t,this.authService=n,this.productPurchases=[]}ngOnInit(){const t=this.authService.loadFromLocalStorage();this.userConceptId=t?.userConcept,this.getPurchasesList()}getPurchasesList(){this.itemService.getSemanticConnection({compositionId:this.userConceptId,linker:H.PJ+"_s"}).subscribe({next:n=>{n.count&&n.output.length&&(this.productPurchases=n?.output?.map(o=>o?.data[X.LI]),this.productPurchases=this.productPurchases.sort((o,r)=>new Date(r.timestamp).getTime()-new Date(o.timestamp).getTime()))}})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(Z.e),e.Y36(N.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-friends-panel-purchases"]],decls:4,vars:2,consts:[[1,"container"],[4,"ngIf","ngIfElse"],["noPurchase",""],["class","row mx-auto border rounded p-3",4,"ngFor","ngForOf"],[1,"row","mx-auto","border","rounded","p-3"],[1,"col-md-6","purchase-details"],[1,"mb-0"],[1,"col-md-3","purchase-price"],[1,"row","border","rounded","p-3"],[1,"col-md-12"],[1,"my-5","py-5","text-center"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,Fl,2,1,"ng-container",1),e.YNc(2,El,5,0,"ng-template",null,2,e.W1O),e.qZA()),2&n){const r=e.MAs(3);e.xp6(1),e.Q6J("ngIf",o.productPurchases.length>0)("ngIfElse",r)}},dependencies:[p.sg,p.O5,p.uU],styles:[".purchase-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-weight:500}.purchase-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#b5b5b5}.purchase-price[_ngcontent-%COMP%]{text-align:right;color:#f4db73}"]}),a})();function Nl(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",10)(2,"div",11)(3,"h4",12),e._uU(4,"Affiliate Account"),e.qZA(),e.TgZ(5,"div",13)(6,"div",14)(7,"h6",15),e._uU(8,"Dr."),e.qZA(),e.TgZ(9,"table",16)(10,"thead",17)(11,"tr")(12,"th"),e._uU(13,"Date"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Particulars"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Amount"),e.qZA()()(),e.TgZ(18,"tbody")(19,"tr"),e._UZ(20,"td"),e.TgZ(21,"td"),e._uU(22,"To, Receivable a/c"),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA()()(),e.TgZ(25,"tfoot")(26,"tr")(27,"td",18)(28,"b"),e._uU(29,"Total"),e.qZA()(),e.TgZ(30,"td")(31,"b"),e._uU(32),e.qZA()()()()()(),e.TgZ(33,"div",14)(34,"h6",19),e._uU(35,"Cr."),e.qZA(),e.TgZ(36,"table",16)(37,"thead",17)(38,"tr")(39,"th"),e._uU(40,"Date"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"Particulars"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"Account"),e.qZA()()(),e.TgZ(45,"tbody")(46,"tr"),e._UZ(47,"td"),e.TgZ(48,"td"),e._uU(49,"By, Payable a/c"),e.qZA(),e.TgZ(50,"td"),e._uU(51),e.qZA()()(),e.TgZ(52,"tfoot")(53,"tr")(54,"td",18)(55,"b"),e._uU(56,"Total"),e.qZA()(),e.TgZ(57,"td")(58,"b"),e._uU(59),e.qZA()()()()()()()()(),e.BQk()),2&a){const i=e.oxw(2);e.xp6(24),e.Oqu(i.journalTotal.debitTotal),e.xp6(8),e.Oqu(i.journalTotal.debitTotal),e.xp6(19),e.Oqu(i.journalTotal.creditTotal),e.xp6(8),e.Oqu(i.journalTotal.creditTotal)}}function Ul(a,s){1&a&&(e.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"p"),e._uU(4,"Looking for data...."),e.qZA()()()())}function Rl(a,s){if(1&a&&(e.TgZ(0,"div",7),e.YNc(1,Nl,60,4,"ng-container",8),e.YNc(2,Ul,5,0,"ng-template",null,9,e.W1O),e.qZA()),2&a){const i=e.MAs(3),t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.loader)("ngIfElse",i)}}function Ll(a,s){1&a&&e._UZ(0,"app-friends-panel-purchases")}let Bl=(()=>{const s=class{constructor(t){this._itemService=t,this.updateSettingTab=new e.vpe,this.updateTabSelection=new e.vpe,this.loader=!1,this.journalTotal={debitTotal:0,creditTotal:0}}ngOnInit(){const t=localStorage.getItem("profile");let n;t&&(n=JSON.parse(t).email),n?.startsWith("admin@boomcon")?this._itemService.getOwner().subscribe({next:o=>{this.ownerConceptId=o.data,this.getEntries()}}):t&&(this.ownerConceptId=JSON.parse(t).userConcept,this.getEntries()),this.updateTabSelection.emit(this.active)}getEntries(){this.loader=!0,(0,ue.D)({debitValue:this._itemService.getLink(this.ownerConceptId,`${H.Tj}_s`,1,1e3),creditValue:this._itemService.getLink(this.ownerConceptId,`${H.Fc}_s`,1,1e3)}).subscribe({next:({debitValue:t,creditValue:n})=>{let o=0,r=0;t.output.map(l=>o+=parseFloat(l.data.journal_transaction.price)),n.output.map(l=>r+=parseFloat(l.data.journal_transaction.price)),console.log(o,r),this.journalTotal.debitTotal=parseFloat(o.toFixed(4)),this.journalTotal.creditTotal=parseFloat(r.toFixed(4))},error:t=>console.log(t),complete:()=>this.loader=!1})}updateNav(t){this.settingPageTab=t?.nextId,this.updateSettingTab.emit(this.settingPageTab)}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(Z.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-ledger-panel"]],inputs:{settingPageTab:"settingPageTab",active:"active"},outputs:{updateSettingTab:"updateSettingTab",updateTabSelection:"updateTabSelection"},decls:12,vars:4,consts:[[1,"mf-main"],["ngbNav","",1,"nav-tabs","mf-tabs",3,"activeId","navChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"m-4"],[4,"ngIf","ngIfElse"],["loading",""],[1,"card"],[1,"card-body"],[1,"text-center"],[1,"row"],[1,"col-md-6"],[1,"fw-bold"],[1,"table"],[1,"table-light"],["colspan","2",1,"text-end"],[1,"fw-bold","text-end"],[1,"row","border","rounded","p-3"],[1,"col-md-12"],[1,"my-5","py-5","text-center"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"ul",1,2),e.NdJ("navChange",function(l){return o.updateNav(l)}),e.TgZ(3,"li",3)(4,"a",4),e._uU(5,"Ledger"),e.qZA(),e.YNc(6,Rl,4,2,"ng-template",5),e.qZA(),e.TgZ(7,"li",3)(8,"a",4),e._uU(9,"Purchases"),e.qZA(),e.YNc(10,Ll,1,0,"ng-template",5),e.qZA()(),e._UZ(11,"div",6),e.qZA()),2&n){const r=e.MAs(2);e.xp6(1),e.Q6J("activeId",o.settingPageTab),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(4),e.Q6J("ngbNavOutlet",r)}},dependencies:[p.O5,M.uN,M.Pz,M.nv,M.Vx,M.tO,Dl],styles:[".disabled[_ngcontent-%COMP%]{cursor:no-drop}"]}),a})();var Yl=_(2851);function Jl(a,s){1&a&&(e.ynx(0),e.TgZ(1,"div",3),e._UZ(2,"span",4),e.qZA(),e.BQk())}function Ql(a,s){1&a&&(e.TgZ(0,"button",19)(1,"div",20)(2,"span",21),e._uU(3,"."),e.qZA()(),e._uU(4," Sending... "),e.qZA()),2&a&&e.Q6J("disabled",!0)}function zl(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(4);return e.KtG(n.sendVerificationEmail())}),e._uU(1," Send Verification Email "),e.qZA()}}function Hl(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",15)(2,"p",16),e._uU(3," Please verify your account before applying to become an agent. You can do this by clicking the 'Send verification link' button. "),e.qZA(),e.YNc(4,Ql,5,1,"ng-template",null,17,e.W1O),e.YNc(6,zl,2,0,"button",18),e.qZA(),e.BQk()),2&a){const i=e.MAs(5),t=e.oxw(3);e.xp6(6),e.Q6J("ngIf",!t.isVerificationSending)("ngIfElse",i)}}function jl(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",23)(1,"div",24)(2,"div",25),e._UZ(3,"img",26),e.qZA(),e.TgZ(4,"p",27),e._uU(5," We have sent a verification link to your email - "),e.TgZ(6,"strong"),e._uU(7),e.qZA()(),e.TgZ(8,"p",28)(9,"small"),e._uU(10,"Please check your inbox or spam/junk folder."),e.qZA()(),e.TgZ(11,"p",29)(12,"small"),e._uU(13,"Didn't receive email? "),e.TgZ(14,"a",30),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.sendVerificationEmail())})("keyup.enter",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.sendVerificationEmail())}),e._uU(15,"Send Again"),e.qZA()()()()()}if(2&a){const i=e.oxw(3);e.xp6(7),e.Oqu(i.userEmail)}}function Gl(a,s){if(1&a&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",8)(4,"div",11)(5,"h1"),e._uU(6,"Verify Your Account"),e.qZA()()(),e.TgZ(7,"div",12),e.YNc(8,Hl,7,2,"ng-container",13),e.qZA(),e.YNc(9,jl,16,1,"div",14),e.qZA()()()),2&a){const i=e.oxw(2);e.xp6(8),e.Q6J("ngIf",!i.isVerifyEmailSent),e.xp6(1),e.Q6J("ngIf",i.isVerifyEmailSent)}}function $l(a,s){1&a&&(e.TgZ(0,"small",55),e._uU(1," Please enter name "),e.qZA())}function Vl(a,s){1&a&&(e.TgZ(0,"small",55),e._uU(1," Please enter detail "),e.qZA())}function Kl(a,s){1&a&&(e.TgZ(0,"button",56)(1,"div",20)(2,"span",21),e._uU(3,"."),e.qZA()(),e._uU(4," Adding... "),e.qZA()),2&a&&e.Q6J("disabled",!0)}function Wl(a,s){1&a&&(e.TgZ(0,"button",57),e._uU(1," Apply "),e.qZA())}function Xl(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"form",41,42),e.NdJ("ngSubmit",function(){e.CHM(i);const n=e.oxw(5);return e.KtG(n.submitAgentRequestForm())}),e.TgZ(2,"div",43)(3,"div",35)(4,"label",44),e._uU(5,"Name: "),e.TgZ(6,"span",45),e._uU(7,"*"),e.qZA()(),e._UZ(8,"input",46),e.YNc(9,$l,2,0,"small",47),e.qZA()(),e.TgZ(10,"div",43)(11,"div",35)(12,"label",48),e._uU(13,"Email: "),e.TgZ(14,"span",45),e._uU(15,"*"),e.qZA()(),e._UZ(16,"input",49),e.qZA()(),e.TgZ(17,"div",43)(18,"div",35)(19,"label",50),e._uU(20,"Detail: "),e.TgZ(21,"span",45),e._uU(22,"*"),e.qZA()(),e._UZ(23,"textarea",51),e.YNc(24,Vl,2,0,"small",47),e.qZA()(),e.TgZ(25,"div",52),e.YNc(26,Kl,5,1,"ng-template",null,53,e.W1O),e.YNc(28,Wl,2,0,"button",54),e.qZA()()}if(2&a){const i=e.MAs(1),t=e.MAs(27),n=e.oxw(5);e.Q6J("formGroup",n.agentRequestForm),e.xp6(9),e.Q6J("ngIf",n.agentName&&n.agentName.invalid&&(n.agentName.touched||i.submitted)),e.xp6(15),e.Q6J("ngIf",n.detail&&n.detail.invalid&&(n.detail.touched||i.submitted)),e.xp6(4),e.Q6J("ngIf",!n.isAgentFormAdding)("ngIfElse",t)}}function ec(a,s){1&a&&(e.TgZ(0,"div",58)(1,"h3"),e._uU(2,"Thank you for your interest!"),e.qZA()())}function tc(a,s){if(1&a&&(e.ynx(0),e.YNc(1,Xl,29,5,"form",39),e.YNc(2,ec,3,0,"ng-template",null,40,e.W1O),e.BQk()),2&a){const i=e.MAs(3),t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",!t.showThankYou)("ngIfElse",i)}}function nc(a,s){1&a&&(e.ynx(0),e.TgZ(1,"h4",60),e._uU(2," Sorry! Unfortunately, your request to become an agent has been declined. Please check out your email for further information or email us at "),e.TgZ(3,"a",61),e._uU(4,"support@boomconsole.com"),e.qZA()(),e.BQk())}function ic(a,s){1&a&&(e.ynx(0),e.TgZ(1,"div",62)(2,"h3"),e._uU(3," Your request is pending."),e._UZ(4,"br"),e._uU(5,"We will confirm you soon. "),e.qZA()(),e.BQk())}function ac(a,s){if(1&a&&e.YNc(0,ic,6,0,"ng-container",13),2&a){const i=e.oxw(5);e.Q6J("ngIf",i.hasRequestedToBecomeAgent)}}function oc(a,s){if(1&a&&(e.YNc(0,nc,5,0,"ng-container",1),e.YNc(1,ac,1,1,"ng-template",null,59,e.W1O)),2&a){const i=e.MAs(2),t=e.oxw(4);e.Q6J("ngIf",t.hasRejectedToBecomeAgent)("ngIfElse",i)}}function sc(a,s){if(1&a&&(e.TgZ(0,"div",33)(1,"div",34)(2,"div",35)(3,"h2"),e._uU(4,"Become an Agent"),e.qZA(),e.TgZ(5,"p",36),e._uU(6," Want to become an agent for the Boomconsole? Apply. "),e.qZA(),e.TgZ(7,"p",37),e._uU(8," You can create affiliate links when you become an agent and get reward from those affiliate links when someone signup from those affiliate links and subscribe/buy any of Boomconsole plans. "),e.qZA()()(),e.YNc(9,tc,4,2,"ng-container",1),e.YNc(10,oc,3,2,"ng-template",null,38,e.W1O),e.qZA()),2&a){const i=e.MAs(11),t=e.oxw(3);e.xp6(9),e.Q6J("ngIf",!t.hasRequestedToBecomeAgent&&!t.hasRejectedToBecomeAgent)("ngIfElse",i)}}function rc(a,s){if(1&a&&(e.TgZ(0,"div",31),e.YNc(1,sc,12,2,"div",32),e.qZA()),2&a){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!i.isUserAgent)}}function lc(a,s){if(1&a&&(e.TgZ(0,"div",5),e.YNc(1,Gl,10,2,"div",6),e.YNc(2,rc,2,1,"div",7),e.qZA()),2&a){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!i.isUserVerified),e.xp6(1),e.Q6J("ngIf",i.isUserVerified)}}let cc=(()=>{const s=class{get agentName(){return this.agentRequestForm.get("name")}get agentEmail(){return this.agentRequestForm.get("email")}get detail(){return this.agentRequestForm.get("detail")}constructor(t,n,o,r,l,c){this.formBuilder=t,this.itemService=n,this.authService=o,this._snackbarService=r,this.modalService=l,this._profileServiceV2=c,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"],["image"]],this.isUserVerified=!1,this.isUserStepsCompleted=!1,this.userEmail="",this.personProfile={},this.isVerificationSending=!1,this.isVerifyEmailSent=!1,this.isAllStepsCompleted=!1,this.isUserAgent=!1,this.firstName="",this.lastName="",this.userName="",this.profileEmail="",this.location="",this.phone="",this.profile_img="",this.isPageLoading=!0,this.hasRequestedToBecomeAgent=!1,this.hasRejectedToBecomeAgent=!1,this.showThankYou=!1,this.isAgentFormAdding=!1,this.isCheckingUserStatus=!1,this.isMarketingAgent=!1,this.userDetailsExist=!1,this.agentRequestForm=this.formBuilder.group({agentName:new u.NI("",[u.kI.required]),agentEmail:new u.NI("",[u.kI.required]),detail:new u.NI("",[u.kI.required])}),this.loader=!1,this.isCreatingQuote=!1,this.requestQuote=[],this.requestQuoteSent=[],this.responseQuote=[],this.responseQuoteSent=[],this.projectRequests=[],this.selectedFilter="",this.filterTextRequested="",this.filterTextResponded="",this.tabName="",this.updateTabSelection=new e.vpe,this.verificationForm=this.formBuilder.group({name:new u.NI("",[u.kI.required]),email:new u.NI("",[u.kI.required,u.kI.email]),zipCode:new u.NI("",[u.kI.required]),phoneNumber:new u.NI("",[u.kI.required])}),this.inviteForm=this.formBuilder.group({message:new u.NI("",[u.kI.required])})}get subject(){return this.inviteForm.get("subject")}get message(){return this.inviteForm.get("message")}get name(){return this.verificationForm.get("name")}get email(){return this.verificationForm.get("email")}get zipCode(){return this.verificationForm.get("zipCode")}get phoneNumber(){return this.verificationForm.get("phoneNumber")}get verificationType(){return this.verificationForm.get("verificationType")}ngOnInit(){const t=this.authService.loadFromLocalStorage();this.userConceptId=t?.userConcept,this.entityId=t?.entityId,this.userId=t?.theUserId,this.checkEmailVerification(),this.checkAgentRequest(),this.checkAgentRequests(),this.checkuserAgentType(),this.getuser(this.entityId),this.updateTabSelection.emit(this.active)}getuser(t){var n=this;return(0,m.Z)(function*(){const o=yield n._profileServiceV2.fetchUserDetails(t);n.userDetails=o;const r=o?.firstname,l=o?.lastname;n.userEmail=o?.email,n.agentRequestForm.patchValue({agentName:`${r||""} ${l||""}`}),n.showPageDetails()})()}showPageDetails(){this.agentRequestForm.patchValue({agentEmail:this.userEmail}),this.agentRequestForm.controls.agentEmail.disable()}checkEmailVerification(){this.itemService.searchLinkMultipleAll([{composition:this.userConceptId,listLinkers:[`${H.iQ}_s`,`${H.Es}_s`,`${H.r1}_s`],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:n=>{this.isPageLoading=!1;const o=n?.the_user?.the_user_s_email_verify_s,r=n?.the_user?.the_user_s_email_invite_s,l=n?.the_user?.the_user_s_inviteFriends_steps_complete_s;r&&r.length&&(this.isUserStepsCompleted=!0),o&&o.length&&(this.isUserVerified=!0),l&&l.length&&(this.isAllStepsCompleted=!0)}})}checkuserAgentType(){this.itemService.getSemanticConnection({compositionId:this.userConceptId,linker:"isAgent_s"}).subscribe({next:n=>{if(n.output&&Array.isArray(n.output)&&n.output.length>0){const o=n.output.reduce((c,d)=>{const g=Date.parse(c.created_at);return Date.parse(d.created_at)>g?d:c},n.output[0]);let r="";const l=Object.keys(o.data);for(const c of l)if(c.includes("agent")){r=o.data[c].agentType;break}this.agentType=r.replace("_agent",""),this.isMarketingAgent="marketingAgent"==r,this.agentTypeName=this.agentType.split(/(?=[A-Z])/).join(" "),this.agentTypeName=this.agentTypeName.toLowerCase(),(void 0===this.agentType||"buyerAgent"!==this.agentType&&"sellerAgent"!==this.agentType&&"seller"!==this.agentType)&&(this.agentType="buyer")}}})}submitVerification(){if(this.isVerificationSending=!0,!this.verificationForm.valid)return void(this.isVerificationSending=!1);this.verificationForm.disable();const t=this.verificationForm.value.email,n=Math.floor(9e5*Math.random()+1e5),o=window.location.protocol+"//"+window.location.hostname+`/verify-email?vid=${n}&vmail=${t}&ucid=${this.userConceptId}`;this.verifyEmailData={heading:"Verify your email: Boomconsole.com",body:`<!doctype html>\n    <html>\n    \n    <head>\n      <meta name="viewport" content="width=device-width,initial-scale=1">\n      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n      <title>Boomconsole: Agent Request Email</title>\n      <style>\n        @media only screen and (max-width:620px) {\n          table.body h1 {\n            font-size: 28px !important;\n            margin-bottom: 10px !important\n          }\n    \n          table.body a,\n          table.body ol,\n          table.body p,\n          table.body span,\n          table.body td,\n          table.body ul {\n            font-size: 16px !important\n          }\n    \n          table.body .article,\n          table.body .wrapper {\n            padding: 10px !important\n          }\n    \n          table.body .content {\n            padding: 0 !important\n          }\n    \n          table.body .container {\n            padding: 0 !important;\n            width: 100% !important\n          }\n    \n          table.body .main {\n            border-left-width: 0 !important;\n            border-radius: 0 !important;\n            border-right-width: 0 !important\n          }\n    \n          table.body .btn table {\n            width: 100% !important\n          }\n    \n          table.body .btn a {\n            width: 100% !important\n          }\n    \n          table.body .img-responsive {\n            height: auto !important;\n            max-width: 100% !important;\n            width: auto !important\n          }\n        }\n    \n        @media all {\n          .ExternalClass {\n            width: 100%\n          }\n    \n          .ExternalClass,\n          .ExternalClass div,\n          .ExternalClass font,\n          .ExternalClass p,\n          .ExternalClass span,\n          .ExternalClass td {\n            line-height: 100%\n          }\n    \n          .apple-link a {\n            color: inherit !important;\n            font-family: inherit !important;\n            font-size: inherit !important;\n            font-weight: inherit !important;\n            line-height: inherit !important;\n            text-decoration: none !important\n          }\n    \n          #MessageViewBody a {\n            color: inherit;\n            text-decoration: none;\n            font-size: inherit;\n            font-family: inherit;\n            font-weight: inherit;\n            line-height: inherit\n          }\n    \n          .btn-primary table td:hover {\n            background-color: #34495e !important\n          }\n    \n          .btn-primary a:hover {\n            background-color: #34495e !important;\n            border-color: #34495e !important\n          }\n        }\n      </style>\n    </head>\n    \n    <body\n      style="background-color:#f6f6f6;font-family:sans-serif;-webkit-font-smoothing:antialiased;font-size:14px;line-height:1.4;margin:0;padding:0;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%">\n      <table role="presentation" border="0" cellpadding="0" cellspacing="0" class="body"\n        style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;background-color:#f6f6f6;width:100%"\n        width="100%" bgcolor="#f6f6f6">\n        <tr>\n          <td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">&nbsp;</td>\n          <td class="container"\n            style="font-family:sans-serif;font-size:14px;vertical-align:top;display:block;max-width:580px;padding:10px;width:580px;margin:0 auto"\n            width="580" valign="top">\n            <div class="content" style="box-sizing:border-box;display:block;margin:0 auto;max-width:580px;padding:10px">\n              <table role="presentation" class="main"\n                style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;background:#fff;border-radius:3px;width:100%"\n                width="100%">\n                <tr>\n                  <td class="wrapper"\n                    style="font-family:sans-serif;font-size:14px;vertical-align:top;box-sizing:border-box;padding:20px"\n                    valign="top">\n                    <table role="presentation" border="0" cellpadding="0" cellspacing="0"\n                      style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;width:100%" width="100%">\n                      <tr>\n                        <td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">\n                          <p style="font-family:sans-serif;font-size:14px;font-weight:400;margin:0;margin-bottom:15px">\n                            Verify your email address.</p>\n                          <p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0"></p>\n                          <p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0"><a\n                              href="${o}" style="color:#004aad" target="_blank">${o}</a></p>\n                          <p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0"></p>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n              </table>\n              <div class="footer" style="clear:both;margin-top:10px;text-align:center;width:100%">\n                <table role="presentation" border="0" cellpadding="0" cellspacing="0"\n                  style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;width:100%" width="100%">\n                  <tr>\n                    <td class="content-block"\n                      style="font-family:sans-serif;font-weight:700;vertical-align:top;padding-bottom:5px;padding-top:10px;color:#999;font-size:12px;text-align:center"\n                      valign="top" align="center"><span class="apple-link"\n                        style="color:#999;font-size:12px;text-align:center">Boomconsole</span></td>\n                  </tr>\n                  <tr>\n                    <td class="content-block"\n                      style="font-family:sans-serif;vertical-align:top;padding-bottom:10px;padding-top:5px;color:#999;font-size:12px;text-align:center"\n                      valign="top" align="center"><span class="apple-link"\n                        style="color:#999;font-size:12px;text-align:center"><a href="https://boomconsole.com/"\n                          target="_blank">boomconsole.com</a></span></td>\n                  </tr>\n                </table>\n              </div>\n            </div>\n          </td>\n          <td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">&nbsp;</td>\n        </tr>\n      </table>\n    </body>\n    \n    </html>`,toAddress:t},this.itemService.sendEmail(this.verifyEmailData).subscribe({next:()=>{this.isVerificationSending=!1,this.isVerifyEmailSent=!0},error:()=>{this._snackbarService.openSnackBar("Verification email couldnot sent.","error"),this.verificationForm.enable()},complete:()=>{this._snackbarService.openSnackBar("Verification email sent successfully!","success")}})}getEmailTemplates(t){return new Promise((n,o)=>{const l="emailverifymentorfriends";this.itemService.listAllWithoutAuthWithLinker([{type:"email_template",listLinkers:["email_template_linker_s"],inpage:10,page:1,logic:"or",filterSearches:[]}]).subscribe({next:c=>{this.emailTemplates=c.filter(f=>void 0!==f?.email_template?.data?.[l]);const d=this.emailTemplates[0].email_template.data?.[l].data.template,g=this.createEmailTemplate(d,t);n(g)},error:c=>{console.error("Error fetching email templates:",c),o(c)}})})}createEmailTemplate(t,n){const r=t.replace("{{{verificationlink}}}",`<a href="${n}" target="_blank">${n}</a>`);this.emailtemplate=`\n    <!DOCTYPE html>\n<html>\n\n<head>\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n  <style>\n    @media only screen and(max-width: 620px) {\n      table.body h1 {\n        font-size: 28px!important;\n        margin-bottom: 10px!important\n      }\n\n      table.body a,\n      table.body ol,\n      table.body p,\n      table.body span,\n      table.body td,\n      table.body ul {\n        font-size: 16px!important\n      }\n\n      table.body.article,\n      table.body.wrapper {\n        padding: 10px!important\n      }\n\n      table.body.content {\n        padding: 0!important\n      }\n\n      table.body.container {\n        padding: 0!important;\n        width: 100%!important\n      }\n\n      table.body.main {\n        border-left-width: 0!important;\n        border-radius: 0!important;\n        border-right-width: 0!important\n      }\n\n      table.body.btn table {\n        width: 100%!important\n      }\n\n      table.body.btn a {\n        width: 100%!important\n      }\n\n      table.body.img-responsive {\n        height: auto!important;\n        max-width: 100%!important;\n        width: auto!important\n      }\n    }\n\n    @media all {\n      .ExternalClass {\n        width: 100%\n      }\n\n      .ExternalClass,\n      .ExternalClass div,\n      .ExternalClass font,\n      .ExternalClass p,\n      .ExternalClass span,\n      .ExternalClass td {\n        line-height: 100%\n      }\n\n      .apple-link a {\n        color: inherit!important;\n        font-family: inherit!important;\n        font-size: inherit!important;\n        font-weight: inherit!important;\n        line-height: inherit!important;\n        text-decoration: none!important\n      }\n\n      #MessageViewBody a {\n        color: inherit;\n        text-decoration: none;\n        font-size: inherit;\n        font-family: inherit;\n        font-weight: inherit;\n        line-height: inherit\n      }\n\n      .btn-primary table td:hover {\n        background-color: #34495e!important\n      }\n\n      .btn-primary a:hover {\n        background-color: #34495e!important;\n        border-color: #34495e!important\n      }\n    }\n  </style>\n</head>\n\n<body style="background-color:#f6f6f6;font-family:sans-serif;-webkit-font-smoothing:antialiased;font-size:14px;line-height:1.4;margin:0;padding:0;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%">\n  <table role="presentation" border="0" cellpadding="0" cellspacing="0" class="body" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;background-color:#f6f6f6;width:100%" width="100%" bgcolor="#f6f6f6">\n    <tr>\n      <td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">&nbsp;</td>\n      <td class="container" style="font-family:sans-serif;font-size:14px;vertical-align:top;display:block;max-width:580px;padding:10px;width:580px;margin:0 auto" width="580" valign="top">\n        <div class="content" style="box-sizing:border-box;display:block;margin:0 auto;max-width:580px;padding:10px">\n          <table role="presentation" class="main" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;background:#fff;border-radius:3px;width:100%" width="100%">\n            <tr>\n              <td class="wrapper" style="font-family:sans-serif;font-size:14px;vertical-align:top;box-sizing:border-box;padding:20px" valign="top">\n                <table role="presentation" border="0" cellpadding="0" cellspacing="0" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;width:100%" width="100%">\n                  <tr>\n                    ${r}\n                  </tr>\n                </table>\n              </td>\n            </tr>\n          </table>\n          <div class="footer" style="clear:both;margin-top:10px;text-align:center;width:100%">\n            <table role="presentation" border="0" cellpadding="0" cellspacing="0" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;width:100%" width="100%">\n              <tr>\n                <td class="content-block" style="font-family:sans-serif;font-weight:700;vertical-align:top;padding-bottom:5px;padding-top:10px;color:#999;font-size:12px;text-align:center" valign="top" align="center">\n                  <span class="apple-link" style="color:#999;font-size:12px;text-align:center">Boomconsole</span>\n                </td>\n              </tr>\n              <tr>\n                <td class="content-block" style="font-family:sans-serif;vertical-align:top;padding-bottom:10px;padding-top:5px;color:#999;font-size:12px;text-align:center" valign="top" align="center">\n                  <span class="apple-link" style="color:#999;font-size:12px;text-align:center"><a href="https://boomconsole.com/" target="_blank">boomconsole.com</a></span>\n                </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n      </td>\n      <td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">&nbsp;</td>\n    </tr>\n  </table>\n</body>\n\n</html>\n\n    `}sendVerificationEmail(){var t=this;return(0,m.Z)(function*(){t.isVerificationSending=!0;const n=t.userEmail,r=window.btoa(JSON.stringify({verifyEmail:n,userId:t.userId,conceptId:t.userConceptId})),l=window.location.protocol+"//"+window.location.hostname+`/verify-email?vd=${r}`;yield t.getEmailTemplates(l),t.verifyEmailData={heading:"Verify your email: Boomconsole.com",body:t.emailtemplate,toAddress:n},t.itemService.sendEmail(t.verifyEmailData).subscribe({next:()=>{t.isVerificationSending=!1,t.isVerifyEmailSent=!0},error:()=>{t._snackbarService.openSnackBar("Verification email couldnot sent.","error"),t.verificationForm.enable()},complete:()=>{t._snackbarService.openSnackBar("Verification email sent successfully!","success")}})})()}resendVerifyEmail(){this.itemService.sendEmail(this.verifyEmailData).subscribe({next:()=>{},error:()=>{this._snackbarService.openSnackBar("Verification email couldnot sent.","error")},complete:()=>{this._snackbarService.openSnackBar("Verification email sent again successfully!","success")}})}submitAgentRequestForm(){var t=this;if(this.agentRequestForm.valid)if(this.userDetails?.email&&this.userDetails?.phone&&this.userDetails?.avatar&&this.userDetails?.username)this.applyForAgent();else{this._snackbarService.openSnackBar("Please complete your profile before becomming an agent","info");const n=this.modalService.open(Yl.z,{size:"lg"});n.componentInstance.currentUser=this.userDetails,n.componentInstance.currentUserId=this.userConceptId,n.componentInstance.updatedDetails.subscribe((0,m.Z)(function*(){t.applyForAgent()}))}else this.isAgentFormAdding=!1}applyForAgent(){this.isAgentFormAdding=!0;const t=this.agentRequestForm.value,o={agent_request_info:{name:t.agentName,email:this.userEmail,detail:t.detail,agentType:"marketingAgent",userConceptId:this.userConceptId,isRequested:!0,timestamp:(new Date).toISOString()}};this.itemService.create(o).subscribe({next:()=>{this.isAgentFormAdding=!1,this.showThankYou=!0,this.sendAgentRequestEmail(o.agent_request_info),this.agentRequestForm.reset(),this.hasRequestedToBecomeAgent=!0},error:()=>{this.isAgentFormAdding=!1,this._snackbarService.openSnackBar("An error occured. please try again","error"),this.showThankYou=!1,this.agentRequestForm.enable()},complete:()=>{}})}checkAgentRequests(){var t=this;return(0,m.Z)(function*(){const n=yield(0,T.Atv)("agent_request_info",t.userId);if(n){t.isCheckingUserStatus=!1;const r=t.authService.loadFromLocalStorage()?.userConcept;let l;l=n?.length>0?{data:n?.sort((g,f)=>new Date(f?.agent_request_info?.timestamp).getTime()-new Date(g?.agent_request_info?.timestamp).getTime())}:n,l?.data?.filter(d=>d?.agent_request_info?.userConceptId==r)?.map(d=>{"marketingAgent"===d?.agent_request_info?.agentType&&"True"===d?.agent_request_info?.isRequested&&(t.hasRequestedToBecomeAgent=!0),"marketingAgent"===d?.agent_request_info?.agentType&&"True"===d?.agent_request_info?.isRejected&&(t.hasRejectedToBecomeAgent=!0)})}})()}checkAgentRequest(){this.itemService.getSemanticConnection({compositionId:this.userConceptId,linker:"isAgent_s"}).subscribe({next:n=>{if(n?.output){const o=["seller_agent","sellerAgent_agent","listingAgent_agent","buyerAgent_agent","buyer_agent","marketingAgent_agent"];n.output.some(l=>l.data&&o.some(c=>l.data[c]))?(this.isMarketingAgent=!0,this.isUserStepsCompleted=!0,this.isAllStepsCompleted=!0):(this.isMarketingAgent=!1,this.isAllStepsCompleted=!1)}}})}sendAgentRequestEmail(t){this.itemService.sendEmail({heading:"Request: To become an agent - "+t.agentType,body:`<!doctype html><html><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Boomconsole: Agent Request Email</title><style>@media only screen and (max-width:620px){table.body h1{font-size:28px!important;margin-bottom:10px!important}table.body a,table.body ol,table.body p,table.body span,table.body td,table.body ul{font-size:16px!important}table.body .article,table.body .wrapper{padding:10px!important}table.body .content{padding:0!important}table.body .container{padding:0!important;width:100%!important}table.body .main{border-left-width:0!important;border-radius:0!important;border-right-width:0!important}table.body .btn table{width:100%!important}table.body .btn a{width:100%!important}table.body .img-responsive{height:auto!important;max-width:100%!important;width:auto!important}}@media all{.ExternalClass{width:100%}.ExternalClass,.ExternalClass div,.ExternalClass font,.ExternalClass p,.ExternalClass span,.ExternalClass td{line-height:100%}.apple-link a{color:inherit!important;font-family:inherit!important;font-size:inherit!important;font-weight:inherit!important;line-height:inherit!important;text-decoration:none!important}#MessageViewBody a{color:inherit;text-decoration:none;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit}.btn-primary table td:hover{background-color:#34495e!important}.btn-primary a:hover{background-color:#34495e!important;border-color:#34495e!important}}</style></head><body style="background-color:#f6f6f6;font-family:sans-serif;-webkit-font-smoothing:antialiased;font-size:14px;line-height:1.4;margin:0;padding:0;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%"><table role="presentation" border="0" cellpadding="0" cellspacing="0" class="body" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;background-color:#f6f6f6;width:100%" width="100%" bgcolor="#f6f6f6"><tr><td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">&nbsp;</td><td class="container" style="font-family:sans-serif;font-size:14px;vertical-align:top;display:block;max-width:580px;padding:10px;width:580px;margin:0 auto" width="580" valign="top"><div class="content" style="box-sizing:border-box;display:block;margin:0 auto;max-width:580px;padding:10px"><table role="presentation" class="main" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;background:#fff;border-radius:3px;width:100%" width="100%"><tr><td class="wrapper" style="font-family:sans-serif;font-size:14px;vertical-align:top;box-sizing:border-box;padding:20px" valign="top"><table role="presentation" border="0" cellpadding="0" cellspacing="0" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;width:100%" width="100%"><tr><td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top"><p style="font-family:sans-serif;font-size:14px;font-weight:400;margin:0;margin-bottom:15px">${t.detail}</p><p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0">From,</p><p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0"></p><p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0">${t.name}</p><p style="font-family:sans-serif;font-size:13px;font-weight:400;margin:0"><a href="mailto:${this.userEmail}" style="color:#004aad">${this.userEmail}</a></p></td></tr></table></td></tr></table><div class="footer" style="clear:both;margin-top:10px;text-align:center;width:100%"><table role="presentation" border="0" cellpadding="0" cellspacing="0" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;width:100%" width="100%"><tr><td class="content-block" style="font-family:sans-serif;font-weight:700;vertical-align:top;padding-bottom:5px;padding-top:10px;color:#999;font-size:12px;text-align:center" valign="top" align="center"><span class="apple-link" style="color:#999;font-size:12px;text-align:center">Boomconsole</span></td></tr><tr><td class="content-block" style="font-family:sans-serif;vertical-align:top;padding-bottom:10px;padding-top:5px;color:#999;font-size:12px;text-align:center" valign="top" align="center"><span class="apple-link" style="color:#999;font-size:12px;text-align:center"><a href="https://beta.boomconcole.com/" target="_blank">beta.boomconcole.com</a></span></td></tr></table></div></div></td><td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">&nbsp;</td></tr></table></body></html>`,toAddress:"info@boomconsole.com"}).subscribe({next:()=>{},error:()=>{}})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(u.qu),e.Y36(Z.e),e.Y36(N.e),e.Y36(G.o),e.Y36(M.FF),e.Y36(ke.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-become-an-agent"]],inputs:{active:"active"},outputs:{updateTabSelection:"updateTabSelection"},decls:4,vars:2,consts:[[1,"mf-main"],[4,"ngIf","ngIfElse"],["pageLoaded",""],[1,"loading"],[1,"loader"],[1,"container"],["class","row",4,"ngIf"],["class","row step_2 mt-5",4,"ngIf"],[1,"row"],[1,"col-md-7","m-auto","bg-light","mt-5"],[1,"verification-box"],[1,"col-md-12","text-center"],[1,"text-center","mb-4"],[4,"ngIf"],["class","text-center",4,"ngIf"],[1,"border","rounded","py-5","px-3"],[1,"mb-4"],["verifyChecking",""],["type","submit","class","btn btn-primary py-2",3,"click",4,"ngIf","ngIfElse"],[1,"btn","btn-primary","btn-disabled","py-2","px-3",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],["type","submit",1,"btn","btn-primary","py-2",3,"click"],[1,"text-center"],[1,"border","rounded","pt-2","pb-4","px-3","mb-4"],[1,"text-center","mt-2"],["src","./assets/mentor-friends/img-send.png","alt","send icon","width","100"],[1,"mt-3","mb-0"],[1,"mb-3"],[1,"mb-0"],["tabindex","",1,"text-primary",3,"click","keyup.enter"],[1,"row","step_2","mt-5"],["class","rounded bg-light p-1 mb-3 col-md-9",4,"ngIf"],[1,"rounded","bg-light","p-1","mb-3","col-md-9"],[1,"row","my-2"],[1,"col-md-12"],[1,"mt-3","mb-2"],[1,"mb-2"],["alreadyRequested",""],[3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["thankyou",""],[3,"formGroup","ngSubmit"],["agentRequestFormId","ngForm"],[1,"row","mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","name","name","id","name","placeholder","John Doe","required","","formControlName","agentName",1,"form-control","p-2","mb-1","shadow-none"],["class","err_msg",4,"ngIf"],["for","email",1,"form-label"],["type","email","name","email","id","emal","placeholder","johndoe@email.com","required","","formControlName","agentEmail",1,"form-control","p-2","mb-1","shadow-none","text-secondary"],["for","detail",1,"form-label"],["name","detail","id","detail","cols","30","rows","3","formControlName","detail","placeholder","Write details about why do you want to become an agent?",1,"w-100","form-control","p-2","mb-1","shadow-none"],[1,"col","text-right","m-3"],["requestLoading",""],["type","submit","class","btn btn-primary",4,"ngIf","ngIfElse"],[1,"err_msg"],[1,"btn","btn-primary","btn-disabled",3,"disabled"],["type","submit",1,"btn","btn-primary"],[1,"d-flex","align-items-center","justify-content-center","py-5"],["requested",""],[1,"my-5"],["href","mailto:support@boomconsole.com"],[1,"d-flex","align-items-center","justify-content-center","text-center","py-5"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,Jl,3,0,"ng-container",1),e.YNc(2,lc,3,2,"ng-template",null,2,e.W1O),e.qZA()),2&n){const r=e.MAs(3);e.xp6(1),e.Q6J("ngIf",o.isPageLoading)("ngIfElse",r)}},dependencies:[p.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u],styles:['.timeline[_ngcontent-%COMP%], .timeline-horizontal[_ngcontent-%COMP%]{list-style:none;padding:20px;position:relative}.timeline[_ngcontent-%COMP%]:before{top:40px;bottom:0;position:absolute;content:" ";width:3px;background-color:#545454;left:50%;margin-left:-1.5px}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{margin-bottom:20px;position:relative}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:before, .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:after{content:"";display:table}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:after{clear:both}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-badge[_ngcontent-%COMP%]{color:#fff;width:80px;height:80px;display:flex;align-items:center;justify-content:center;font-size:22px;text-align:center;position:absolute;top:18px;background-color:#333;border:3px solid #ffffff;z-index:100;border-radius:50%}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-badge[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-badge[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{top:2px;left:0}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-panel[_ngcontent-%COMP%]{position:relative;padding:20px 0}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-panel[_ngcontent-%COMP%]   .timeline-title[_ngcontent-%COMP%]{margin-top:0;color:inherit}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-panel[_ngcontent-%COMP%]   .timeline-body[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-panel[_ngcontent-%COMP%]   .timeline-body[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{margin-bottom:0}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-panel[_ngcontent-%COMP%]   .timeline-body[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] + p[_ngcontent-%COMP%]{margin-top:5px}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:last-child:nth-child(even){float:right}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:nth-child(even)   .timeline-panel[_ngcontent-%COMP%]{float:right;left:16px}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:nth-child(even)   .timeline-panel[_ngcontent-%COMP%]:before{border-left-width:0;border-right-width:14px;left:-14px;right:auto}.timeline-horizontal[_ngcontent-%COMP%]{list-style:none;position:relative;padding:20px 0;margin-top:4rem}.timeline-horizontal[_ngcontent-%COMP%]:before{height:3px;inset:auto 0 40px 56px;width:93%;margin-bottom:20px}.timeline-horizontal[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{margin:0 auto}.timeline-horizontal[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-panel[_ngcontent-%COMP%]{top:auto;bottom:64px;display:inline-block;float:none!important;left:0!important;right:0!important;width:100%;margin-bottom:20px}.timeline-horizontal[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-panel[_ngcontent-%COMP%]:before{top:auto;bottom:-16px;left:28px!important;right:auto;border-right:16px solid transparent!important;border-top:16px solid #777!important;border-bottom:0 solid #777!important;border-left:16px solid transparent!important}.timeline-horizontal[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:before, .timeline-horizontal[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:after{display:none}.timeline-horizontal[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-badge[_ngcontent-%COMP%]{top:auto;bottom:0;background-color:#38b6ff;box-shadow:inset 0 0 0 1px #333;border:4px solid #38b6ff;font-size:1.75rem;font-weight:700;color:#545454}.timeline-horizontal[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-badge.not-active[_ngcontent-%COMP%]{background-color:#abd5fd;color:#7f94a8;border-color:#abd5fd}.verification-box[_ngcontent-%COMP%]{padding:1rem}.verification-box[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;color:#fd7088}.btn-next[_ngcontent-%COMP%]{position:absolute;bottom:1rem}.timeline-one[_ngcontent-%COMP%]   .timeline-footer[_ngcontent-%COMP%]{margin-top:1.5rem;position:absolute;left:1.5rem}.timeline-two[_ngcontent-%COMP%]   .timeline-panel[_ngcontent-%COMP%]{text-align:center}.timeline-two[_ngcontent-%COMP%]   .timeline-badge[_ngcontent-%COMP%]{left:50%;transform:translate(-50%)}.timeline-two[_ngcontent-%COMP%]   .timeline-footer[_ngcontent-%COMP%]{margin-top:1.5rem;position:absolute;left:50%;transform:translate(-50%)}.timeline-three[_ngcontent-%COMP%]   .timeline-panel[_ngcontent-%COMP%]{text-align:right}.timeline-three[_ngcontent-%COMP%]   .timeline-badge[_ngcontent-%COMP%]{right:0}.timeline-three[_ngcontent-%COMP%]   .timeline-footer[_ngcontent-%COMP%]{margin-top:1.5rem;position:absolute;right:.5rem}.mf-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;border:none;margin-top:1rem}.mf-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#fff;border-radius:0;color:#333}.mf-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));color:#fff;border:none}.thankyou[_ngcontent-%COMP%]{text-align:center}.thankyou[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem auto}.thankyou[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fd7088}.send-box[_ngcontent-%COMP%]{margin-top:1.75rem}.send-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .send-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{opacity:.8}.email-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#dedede;border-radius:1.5rem;padding:.5rem .75rem;margin-right:.5rem;margin-bottom:.5rem}.email-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.email-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]:hover{color:red}.step_2[_ngcontent-%COMP%]{margin:auto;display:flex;align-items:center;justify-content:center}.wrapper-1[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-shadow:4px 8px 40px 8px #5892ff33}.wrapper-2[_ngcontent-%COMP%]{padding:30px;text-align:center}.heading[_ngcontent-%COMP%]{font-size:4em;letter-spacing:3px;color:#f2709c;margin:0 0 20px}.wrapper-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.3em;color:#aaa;font-family:Source Sans Pro,sans-serif;letter-spacing:1px}.go-home[_ngcontent-%COMP%]{color:#fff;background:rgb(242,112,156);border:none;padding:10px 50px;margin:30px 0;border-radius:30px;text-transform:capitalize;box-shadow:0 10px 16px 1px #aec7fb}.start_a_tour[_ngcontent-%COMP%]{position:absolute;padding:8px 20px 8px 40px;border-radius:20px;border:1px solid rgb(242,112,156);top:65px;margin-left:10px;right:20px}.start_a_tour[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:absolute;top:5px;left:10px}.start_a_tour[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));color:#fff}.start_a_tour[_ngcontent-%COMP%]:hover   .material-symbols-outlined[_ngcontent-%COMP%]{color:#fff}.show[_ngcontent-%COMP%]{display:none}.timeline-badge[_ngcontent-%COMP%]{top:auto;bottom:0;background-color:#38b6ff;box-shadow:inset 0 0 0 1px #333;border:4px solid #38b6ff;font-size:1.75rem;font-weight:700;color:#545454;color:#fff;width:80px;height:80px;display:flex;align-items:center;justify-content:center;font-size:22px;text-align:center;border:3px solid #ffffff;z-index:100;border-radius:50%}.timeline-badge.not-active[_ngcontent-%COMP%]{background-color:#abd5fd;color:#7f94a8;border-color:#abd5fd}@media only screen and (max-width: 600px){.hide[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:block}.show[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.show[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.show[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}}']}),a})();function dc(a,s){1&a&&(e.TgZ(0,"div",15),e._UZ(1,"div",16),e.qZA())}function uc(a,s){if(1&a&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&a){const i=s.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.title," ")}}function mc(a,s){1&a&&(e.TgZ(0,"div",18),e._uU(1,"Fetching your pages..."),e.qZA())}function gc(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",19)(1,"span"),e._uU(2,"Share this Investor Page URL:"),e.qZA(),e.TgZ(3,"div",20)(4,"a",21),e._uU(5),e.qZA(),e.TgZ(6,"button",22),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.copyUrl())}),e._uU(7,"Copy"),e.qZA()()()}if(2&a){const i=e.oxw();e.xp6(4),e.Q6J("href",i.investorPageUrl,e.LSH),e.xp6(1),e.Oqu(i.investorPageUrl)}}const pc=function(a){return{"content-loaded":a}};let _c=(()=>{const s=class{constructor(t,n,o){this._authService=t,this._snackbarService=n,this._profileServicev2=o,this.updateTabSelection=new e.vpe,this.fetchingPages=!0,this.pages=[],this.isCustomPageEnabled=!1,this.username="",this.investorPageUrl="",this.isInitialized=!1,this.setCustomPageForm=new u.cw({customPage:new u.NI({value:null,disabled:!0})})}ngOnInit(){var t=this;return(0,m.Z)(function*(){t.updateTabSelection.emit(t.active);const n=t._authService.loadFromLocalStorage(),o=n?.entityId,r=yield t._profileServicev2.fetchUserDetails(o);t.username=r?.username,t.userConceptId=parseInt(n.userConcept);const l=n?.token;yield t.getExistingCustomPage(),o&&t.fetchAllPages(parseInt(o),l),t.isInitialized=!0})()}getExistingCustomPage(){var t=this;return(0,m.Z)(function*(){const n=yield(0,T.$Er)(t.userConceptId,"the_user_custom_investor_page");t.customPageId=n?.[0]?.id,t.customPageId&&(t.isCustomPageEnabled=!0,t.setCustomPageForm.controls.customPage.setValue(t.customPageId),t.setCustomPageForm.controls.customPage.enable(),t.updateInvestorPageUrl())})()}toggleCustomPage(t){var n=this;return(0,m.Z)(function*(){n.isCustomPageEnabled=t.target.checked,n.isCustomPageEnabled?(n.setCustomPageForm.controls.customPage.enable(),n.setCustomPageForm.controls.customPage.value&&(yield n.setCustomPage())):(n.setCustomPageForm.controls.customPage.disable(),n.investorPageUrl="",yield n.removeCustomPage())})()}setCustomPage(){var t=this;return(0,m.Z)(function*(){if(!t.isCustomPageEnabled)return t._snackbarService.openSnackBar("Please enable Custom Investor Page first.","error"),void t.setCustomPageForm.controls.customPage.setValue(null);const n=t.setCustomPageForm.controls.customPage.value;n&&(yield t.removeCustomPage(),yield(0,T.G$0)(yield(0,T.J0M)(t.userConceptId),yield(0,T.J0M)(n),"custom_investor_page"),yield T.smK.SyncDataOnline(),t.customPageId=n,t.updateInvestorPageUrl(),t._snackbarService.openSnackBar("Custom Investor Page Set.","success"))})()}removeCustomPage(){var t=this;return(0,m.Z)(function*(){if(t.customPageId){const n=yield(0,T.kqu)(yield(0,T.J0M)(t.userConceptId),yield(0,T.J0M)(t.customPageId),"","the_user_custom_investor_page");yield(0,T.TAP)(n?.[0]?.id),t.customPageId=void 0}})()}fetchAllPages(t,n){var o=this;return(0,m.Z)(function*(){const r=new T.LtL;r.name="page",r.typeConnection="the_entity_s_page",r.selectors=["the_page_title"];const l=new T.LtL;l.name="entity",l.conceptIds=[t],l.freeschemaQueries=[r],l.outputFormat=T.Zec,(0,T.og0)(l,n).subscribe(function(){var c=(0,m.Z)(function*(d){o.pages=o.formatPages(d?.[0]?.the_entity?.the_entity_s_page),o.fetchingPages=!1});return function(d){return c.apply(this,arguments)}}())})()}formatPages(t){const n=[];if(t&&t?.length>0)for(let o=0;o<t.length;o++){const r=t[o];n.push({id:r?.the_page?.id,title:r?.the_page?.data?.the_page_title?.the_title?.data})}return n}updateInvestorPageUrl(){this.investorPageUrl=mt.N.baseDomain+`/invest/${this.username}`}copyUrl(){navigator.clipboard.writeText(this.investorPageUrl),this._snackbarService.openSnackBar("URL copied to clipboard!","success")}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(N.e),e.Y36(G.o),e.Y36(ke.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-investor"]],inputs:{active:"active"},outputs:{updateTabSelection:"updateTabSelection"},decls:21,vars:10,consts:[[1,"investor-container"],["class","loading-overlay",4,"ngIf"],[1,"content",3,"ngClass"],[1,"intro-text"],[1,"control-panel"],[1,"toggle-group"],[1,"switch"],["type","checkbox",3,"checked","change"],[1,"slider"],[3,"formGroup","ngSubmit"],["formControlName","customPage",1,"page-select",3,"disabled","change"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","loading",4,"ngIf"],["class","url-display",4,"ngIf"],[1,"loading-overlay"],[1,"spinner"],[3,"value"],[1,"loading"],[1,"url-display"],[1,"url-wrapper"],["target","_blank",3,"href"],[1,"copy-button",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.YNc(1,dc,2,0,"div",1),e.TgZ(2,"div",2)(3,"h2"),e._uU(4,"Create Your Investor Page"),e.qZA(),e.TgZ(5,"p",3),e._uU(6,"Set up a custom landing page"),e.qZA(),e.TgZ(7,"div",4)(8,"div",5)(9,"span"),e._uU(10,"Enable Investor Landing Page"),e.qZA(),e.TgZ(11,"label",6)(12,"input",7),e.NdJ("change",function(l){return o.toggleCustomPage(l)}),e.qZA(),e._UZ(13,"span",8),e.qZA()(),e.TgZ(14,"form",9),e.NdJ("ngSubmit",function(){return o.setCustomPage()}),e.TgZ(15,"select",10),e.NdJ("change",function(){return o.setCustomPage()}),e.TgZ(16,"option",11),e._uU(17,"Select a page"),e.qZA(),e.YNc(18,uc,2,2,"option",12),e.qZA(),e.YNc(19,mc,2,0,"div",13),e.qZA(),e.YNc(20,gc,8,2,"div",14),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("ngIf",o.fetchingPages||!o.isInitialized),e.xp6(1),e.Q6J("ngClass",e.VKq(8,pc,o.isInitialized&&!o.fetchingPages)),e.xp6(10),e.Q6J("checked",o.isCustomPageEnabled),e.xp6(2),e.Q6J("formGroup",o.setCustomPageForm),e.xp6(1),e.Q6J("disabled",o.fetchingPages||!o.isCustomPageEnabled),e.xp6(3),e.Q6J("ngForOf",o.pages),e.xp6(1),e.Q6J("ngIf",o.fetchingPages),e.xp6(1),e.Q6J("ngIf",o.investorPageUrl))},dependencies:[p.mk,p.sg,p.O5,u._Y,u.YN,u.Kr,u.EJ,u.JJ,u.JL,u.sg,u.u],styles:['.investor-container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;margin:0 auto;background:#f9fafb;display:flex;flex-direction:column;align-items:center;position:relative}.loading-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#f9fafb;display:flex;justify-content:center;align-items:center;z-index:10}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #0f766e;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.content[_ngcontent-%COMP%]{width:100%;opacity:0;transition:opacity .3s ease}.content-loaded[_ngcontent-%COMP%]{opacity:1}h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;color:#0f172a;text-align:center;margin-bottom:1rem}.intro-text[_ngcontent-%COMP%]{font-size:1rem;color:#475569;text-align:center;margin-bottom:2rem;max-width:500px}.control-panel[_ngcontent-%COMP%]{background:#ffffff;border-radius:1rem;padding:2rem;width:100%;box-shadow:0 4px 15px #0000000d;transition:transform .3s ease}.control-panel[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.toggle-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;min-height:24px}.toggle-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#0f172a}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:44px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background:#d1d5db;border-radius:24px;transition:background .3s ease}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:2px;bottom:2px;background:#ffffff;border-radius:50%;transition:transform .3s ease}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#0f766e}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(20px)}.page-select[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:1rem;border:1px solid #e2e8f0;border-radius:.5rem;background:#f8fafc;transition:border-color .3s ease,box-shadow .3s ease;min-height:40px}.page-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#f43f5e;box-shadow:0 0 0 3px #f43f5e1a}.page-select[_ngcontent-%COMP%]:disabled{background:#e5e7eb;cursor:not-allowed}.loading[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin-top:.75rem;text-align:center;min-height:20px}.url-display[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background:#f1f5f9;border-radius:.5rem;display:flex;flex-direction:column;gap:.75rem}.url-display[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#0f172a}.url-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.url-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.875rem;color:#0f766e;text-decoration:none;transition:color .3s ease}.url-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#134e4a}.copy-button[_ngcontent-%COMP%]{background:#f43f5e;color:#fff;border:none;padding:.5rem 1rem;border-radius:.5rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:background .3s ease,transform .3s ease}.copy-button[_ngcontent-%COMP%]:hover{background:#e11d48;transform:translateY(-2px)}@media (max-width: 500px){.investor-container[_ngcontent-%COMP%], .control-panel[_ngcontent-%COMP%]{padding:1.5rem}h2[_ngcontent-%COMP%]{font-size:1.5rem}}']}),a})();function hc(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){e.CHM(i);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.updateTabSelection(n.id))})("keyup.enter",function(){e.CHM(i);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.updateTabSelection(n.id))}),e.TgZ(1,"span",13),e._uU(2),e.qZA(),e._uU(3),e.qZA()}if(2&a){const i=e.oxw().$implicit,t=e.oxw();e.Gre("d-flex align-items-center gap-2 cursor-pointer p-2 tabs_name tour-tab-",i.id,""),e.ekj("active",i.id===t.activeMenu),e.xp6(2),e.Oqu(i.icon),e.xp6(1),e.hij(" ",i.name," ")}}function fc(a,s){if(1&a&&(e.ynx(0),e.YNc(1,hc,4,7,"div",18),e.BQk()),2&a){const i=s.$implicit;e.xp6(1),e.Q6J("ngIf",null==i?null:i.isActive)}}function bc(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.startTour())})("keyup",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.startTour())}),e._uU(1," Start a Tour "),e.TgZ(2,"span",13),e._uU(3," rocket_launch "),e.qZA()()}}function yc(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.enablelandingPage())})("keyup.enter",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.enablelandingPage())}),e.TgZ(1,"span",13),e._uU(2," done "),e.qZA(),e._uU(3," Enable Landing Page "),e.qZA()}}function Cc(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.customPageModal())})("keyup",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.customPageModal())}),e.TgZ(1,"span",13),e._uU(2,"manage_accounts"),e.qZA()()}}function vc(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"a",29),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.customPageModal())})("keyup",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.customPageModal())}),e.TgZ(1,"span",30),e._uU(2,"check_circle"),e.qZA()()}}function xc(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"a",24),e._uU(3),e.qZA(),e.TgZ(4,"a",25),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.copy_url(n.agentweblink))})("keyup",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.copy_url(n.agentweblink))}),e.TgZ(5,"span",13),e._uU(6," content_copy "),e.qZA()(),e.YNc(7,Cc,3,0,"a",26),e.YNc(8,vc,3,0,"a",27),e.qZA()()}if(2&a){const i=e.oxw();e.xp6(2),e.s9C("href",i.agentweblink,e.LSH),e.xp6(1),e.hij(" ",i.agentweblink," "),e.xp6(4),e.Q6J("ngIf",!i.customPageId),e.xp6(1),e.Q6J("ngIf",i.customPageId)}}function Tc(a,s){if(1&a&&e._UZ(0,"app-friends-panel-friends",31),2&a){const i=e.oxw();e.Q6J("active",i.activeMenu)}}function wc(a,s){if(1&a&&e._UZ(0,"app-become-an-agent",31),2&a){const i=e.oxw();e.Q6J("active",i.activeMenu)}}function Ac(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"app-affiliates",32),e.NdJ("updateTabSelection",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.updateTabSelection(n))}),e.qZA()}if(2&a){const i=e.oxw();e.Q6J("active",i.activeMenu)}}function Mc(a,s){if(1&a&&e._UZ(0,"app-affiliate-code",31),2&a){const i=e.oxw();e.Q6J("active",i.activeMenu)}}function kc(a,s){if(1&a&&e._UZ(0,"app-invitees",31),2&a){const i=e.oxw();e.Q6J("active",i.activeMenu)}}function Pc(a,s){if(1&a&&e._UZ(0,"app-ledger-panel",31),2&a){const i=e.oxw();e.Q6J("active",i.activeMenu)}}function Zc(a,s){if(1&a){const i=e.EpF();e.TgZ(0,"app-friends-panel-dashboard",32),e.NdJ("updateTabSelection",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.updateTabSelection(n))}),e.qZA()}if(2&a){const i=e.oxw();e.Q6J("active",i.activeMenu)}}function Ic(a,s){if(1&a&&e._UZ(0,"app-friends-panel-settings",31),2&a){const i=e.oxw();e.Q6J("active",i.activeMenu)}}function Oc(a,s){if(1&a&&e._UZ(0,"app-investor",31),2&a){const i=e.oxw();e.Q6J("active",i.activeMenu)}}function Sc(a,s){if(1&a&&e._UZ(0,"app-become-agent",31),2&a){const i=e.oxw();e.Q6J("active",i.activeMenu)}}const qc=[{component:(()=>{const s=class{constructor(t,n,o,r,l,c,d,g,f,y){this._tourService=t,this._itemService=n,this._authService=o,this._snackbar=r,this._modalService=l,this.affiliateService=c,this._profileServicev2=d,this.dialog=g,this.route=f,this.router=y,this.settingPageTab=1,this.activeMenu=1,this.isMarketingAgent=!1,this.loader=!1,this.isCreatingQuote=!1,this.requestQuote=[],this.requestQuoteSent=[],this.responseQuote=[],this.responseQuoteSent=[],this.projectRequests=[],this.selectedFilter="",this.filterTextRequested="",this.filterTextResponded="",this.tabName="",this.landingPageEnabled=!1,this.title="Invite Friends",this.tabs=[{name:"Invite Friends",id:1,icon:"group",isActive:!0},{name:"Become an agent",id:2,icon:"store",isActive:!0},{name:"Invite Clients",id:3,icon:"person_add",isActive:!1},{name:"Affiliate Code",id:4,icon:"content_copy",isActive:!1},{name:"Invite History",id:5,icon:"history",isActive:!1},{name:"Accounting",id:6,icon:"account_balance",isActive:!0},{name:"Report",id:7,icon:"lab_profile",isActive:!0},{name:"Settings",id:8,icon:"settings",isActive:!0},{name:"Investor",id:9,icon:"business",isActive:!0},{name:"Upgrade Agency",id:10,icon:"whatshot",isActive:!1}];const k=this._authService.loadFromLocalStorage();this.conceptId=k.userConcept,this.entityId=k?.entityId,this.getUserProfile()}ngOnInit(){this.settingPageTab=1,this.checkuserAgentType(),this.getExistingCustomPage(),this.route.queryParams.subscribe(n=>{const o=n.page;if(o){const r=this.tabs.find(l=>l.name.toLowerCase().replace(/\s+/g,"-")===o.toLowerCase());r&&(this.activeMenu=r.id,this.updateTabTitle())}}),localStorage.getItem("vd")&&(this.updateTabSelection(2),localStorage.removeItem("vd"))}openInviteDialog(){this.dialog.open(It,{width:"200px"})}copy_url(t){navigator.clipboard.writeText(t),alert("Copied your landing page url.")}getExistingCustomPage(){var t=this;return(0,m.Z)(function*(){const n=yield(0,T.$Er)(t.conceptId,"the_user_custom_invite_page");t.customPageId=n?.[0]?.id})()}updateMenu(t){this.activeMenu=t.menuNumber,"settings-payment"===t.tab&&(this.settingPageTab=3)}updateSettingTab(t){this.settingPageTab=t}ngAfterViewInit(){this.startTour(),this.checkuserAgentType(),this._tourService.notAgentYetInit(),this.checkCode()}startTour(){const t=document.getElementById("start_a_tour");t?t?.addEventListener("click",()=>{this._tourService.startAgencyTour()}):this._tourService.startAgencyTour()}checkuserAgentType(){this._itemService.getSemanticConnection({compositionId:this.conceptId,linker:"isAgent_s"}).subscribe({next:n=>{if(n.output&&Array.isArray(n.output)&&n.output.length>0){const o=n.output.reduce((d,g)=>{const f=Date.parse(d.created_at);return Date.parse(g.created_at)>f?g:d},n.output[0]);let r="";const l=Object.keys(o.data);for(const d of l)if(d.includes("agent")){r=o.data[d].agentType;break}this.agentType=r;const c=this.agentType.replace("_agent","");"True"!=o?.data?.agent_request_info?.isRejected&&"marketingAgent"==c||"buyerAgent"==c||"sellerAgent"==c||"listingAgent"==c||"seller"==c||"buyer"==c?(this.isMarketingAgent=!0,this.tabs=this.tabs.map(d=>[2].includes(d.id)?{...d,isActive:!1}:[3,4,5,10].includes(d.id)?{...d,isActive:!0}:d),this._tourService.FriendsInit()):this.isMarketingAgent=!1,this.agentTypeName=this.agentType.split(/(?=[A-Z])/).join(" "),this.agentTypeName=this.agentTypeName.toLowerCase(),(void 0===this.agentType||"buyerAgent"!==this.agentType&&"sellerAgent"!==this.agentType&&"seller"!==this.agentType)&&(this.agentType="buyer")}}})}checkCode(){this.affiliateService.listAffiliateCode().subscribe({next:t=>{const n=t.data?.filter(o=>"LANDING_PAGE"===o.affiliate_codes.data.name).some(Boolean);this.landingPageEnabled=n},error:t=>{console.error("Error:",t)}})}enablelandingPage(){void 0!==this.username&&""!==this.username?this.createAffiliateCode():this._snackbar.openSnackBar("Please update your profile.","warning")}createAffiliateCode(){this.affiliateService.createAffiliateCode({name:"LANDING_PAGE"}).subscribe({next:n=>{const o=n?.data?.affiliate_codes?.data?.code;this._snackbar.openSnackBar("Landing page enabled","success"),this.landingPageEnabled=!0,this.createCoupon(o)},error:()=>{this._snackbar.openSnackBar("Landing Page Already enabled","success")},complete:()=>{}})}createCoupon(t){this._itemService.create({landingPageCode:{affiliate_code:t,coupon_code:""}}).subscribe({next:o=>{const r=o?.data?.landingPageCode?.id;this._itemService.createComponentLink(this.conceptId,r,"landingpage_code").subscribe({next:()=>{},error:l=>{console.error("err",l)}})},error:o=>{console.error("err",o)}})}getUserProfile(){var t=this;return(0,m.Z)(function*(){const n=yield t._profileServicev2.fetchUserDetails(t.entityId);t.username=n?.username,t.agentweblink=mt.N.baseDomain+`/invite/${t.username}`})()}updateTabTitle(){switch(this.activeMenu){case 1:default:this.title="Invite Friends";break;case 2:this.title="Become an agent";break;case 3:this.title="Invite Clients";break;case 4:this.title="Affiliate Code";break;case 5:this.title="Invite History";break;case 6:this.title="Accounting";break;case 7:this.title="Report";break;case 8:this.title="Settings";break;case 9:this.title="Investor Dashboard";break;case 10:this.title="Upgrade Your Agency"}}updateTabSelection(t){this.activeMenu=t,this.updateTabTitle();const n=this.tabs.find(o=>o.id===t);if(n){const o=n.name.toLowerCase().replace(/\s+/g,"-");this.router.navigate([],{relativeTo:this.route,queryParams:{page:o},queryParamsHandling:"merge",replaceUrl:!0})}}customPageModal(){this._modalService.open(ua,{size:"lg"}).result.then(()=>{this.getExistingCustomPage()}).catch(()=>{})}};let a=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(ga),e.Y36(Z.e),e.Y36(N.e),e.Y36(G.o),e.Y36(M.FF),e.Y36(fe.C),e.Y36(ke.S),e.Y36(gt.uw),e.Y36(h.gz),e.Y36(h.F0))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-friends-dashboard"]],decls:30,vars:16,consts:[[1,"container","friends-dashboard"],[1,"friends-section"],[1,"tabs_section","d-flex","align-items-center","gap-3"],[4,"ngFor","ngForOf"],[1,"row","m-0","top_div"],[1,"col-md-12","top_content"],[1,"text","d-flex","justify-content-between","w-100"],[1,"text-center","m-0"],[1,"d-flex","align-items-center","gap-3"],["id","start_a_tour","class","start_a_tour","tabindex","",3,"click","keyup",4,"ngIf"],["class","start_a_tour","tabindex","0",3,"click","keyup.enter",4,"ngIf","ngIfElse"],["alreadyEnabled",""],[1,"btn","button-qr","d-flex","gap-2",3,"click"],[1,"material-symbols-outlined"],[1,"row","mt-0","d-flex","content_section"],[3,"ngSwitch"],[3,"active",4,"ngSwitchCase"],[3,"active","updateTabSelection",4,"ngSwitchCase"],["tabindex","0",3,"class","active","click","keyup.enter",4,"ngIf"],["tabindex","0",3,"click","keyup.enter"],["id","start_a_tour","tabindex","",1,"start_a_tour",3,"click","keyup"],["tabindex","0",1,"start_a_tour",3,"click","keyup.enter"],[1,"d-flex","flex-column","align-items-end"],[1,"landingpage_url"],["rel","noopener noreferrer","target","_blank",1,"web_link",3,"href"],["tabindex","",1,"copy_url",3,"click","keyup"],["class","custom_invite_page","role","button","title","Custom Invite Page","tabindex","",3,"click","keyup",4,"ngIf"],["class","custom_invite_page","role","button","title","Custom Invite Page Active","tabindex","",3,"click","keyup",4,"ngIf"],["role","button","title","Custom Invite Page","tabindex","",1,"custom_invite_page",3,"click","keyup"],["role","button","title","Custom Invite Page Active","tabindex","",1,"custom_invite_page",3,"click","keyup"],[1,"material-symbols-outlined","text-success"],[3,"active"],[3,"active","updateTabSelection"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,fc,2,1,"ng-container",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),e._uU(8),e.qZA(),e.TgZ(9,"div",8),e.YNc(10,bc,4,0,"a",9),e.YNc(11,yc,4,0,"a",10),e.YNc(12,xc,9,4,"ng-template",null,11,e.W1O),e.TgZ(14,"button",12),e.NdJ("click",function(){return o.openInviteDialog()}),e._uU(15," QR Code "),e.TgZ(16,"span",13),e._uU(17,"qr_code_2"),e.qZA()()()()()(),e.TgZ(18,"div",14)(19,"div",15),e.YNc(20,Tc,1,1,"app-friends-panel-friends",16),e.YNc(21,wc,1,1,"app-become-an-agent",16),e.YNc(22,Ac,1,1,"app-affiliates",17),e.YNc(23,Mc,1,1,"app-affiliate-code",16),e.YNc(24,kc,1,1,"app-invitees",16),e.YNc(25,Pc,1,1,"app-ledger-panel",16),e.YNc(26,Zc,1,1,"app-friends-panel-dashboard",17),e.YNc(27,Ic,1,1,"app-friends-panel-settings",16),e.YNc(28,Oc,1,1,"app-investor",16),e.YNc(29,Sc,1,1,"app-become-agent",16),e.qZA()()()()),2&n){const r=e.MAs(13);e.xp6(3),e.Q6J("ngForOf",o.tabs),e.xp6(5),e.Oqu(o.title),e.xp6(2),e.Q6J("ngIf",1===o.activeMenu),e.xp6(1),e.Q6J("ngIf",!o.landingPageEnabled)("ngIfElse",r),e.xp6(8),e.Q6J("ngSwitch",o.activeMenu),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3),e.xp6(1),e.Q6J("ngSwitchCase",4),e.xp6(1),e.Q6J("ngSwitchCase",5),e.xp6(1),e.Q6J("ngSwitchCase",6),e.xp6(1),e.Q6J("ngSwitchCase",7),e.xp6(1),e.Q6J("ngSwitchCase",8),e.xp6(1),e.Q6J("ngSwitchCase",9),e.xp6(1),e.Q6J("ngSwitchCase",10)}},dependencies:[p.sg,p.O5,p.RF,p.n9,Do,Ys,gr,Mr,Fr,Wr,Sl,Bl,cc,_c],styles:['.top_content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.web_link[_ngcontent-%COMP%]{color:inherit}.start_a_tour[_ngcontent-%COMP%]{color:#fff;background:#29303d;padding:4px 10px;display:flex;align-items:center;justify-content:center;border-radius:4px;height:32px;font-size:16px;gap:8px;transition:all ease-in .3s}.start_a_tour[_ngcontent-%COMP%]:hover{background-color:#364451}.start_a_tour[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:22px}.align-items-end[_ngcontent-%COMP%]{align-items:flex-end}.enable_landing_page[_ngcontent-%COMP%]{padding:1px 9px 0 6px;border-radius:30px;border:1px solid #fff;margin:5px 5px 0 0;float:right;color:#fff;line-height:30px;background:linear-gradient(to right,rgba(164,242,112,.363),rgba(114,255,208,.034));border:1px solid rgb(206,255,114)}.friends-dashboard[_ngcontent-%COMP%]{padding:40px;min-height:calc(100vh - 58px)}.friends-dashboard[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]{background:#394450;padding:1rem;min-width:25%}.friends-dashboard[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{background:#fff;min-width:75%;padding:2rem 1rem}.friends-dashboard[_ngcontent-%COMP%]   .top_div[_ngcontent-%COMP%]{border-radius:10px 10px 0 0;padding:20px;background:rgb(43,51,60);background:linear-gradient(0deg,rgb(43,51,60) 0%,rgb(57,68,80) 100%);color:#fff}.friends-dashboard[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .friends-dashboard[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background-color:#2b333c}.friends-dashboard-pills[_ngcontent-%COMP%]{min-width:20%}.friends-dashboard-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin:.25rem 0}.friends-dashboard-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#fff}.landingpage_url[_ngcontent-%COMP%]{align-items:center;justify-content:center;background-color:#29303d;padding:4px 10px;border-radius:4px;display:flex;transition:all ease-in .3s}.landingpage_url[_ngcontent-%COMP%]:hover{background-color:#364451}.landingpage_url[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:relative;display:flex;margin-left:10px;font-size:22px;color:#fff}.text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}@media only screen and (max-width: 768px){.top_content[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:flex-start}.top_content[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{margin-top:20px}.top_content[_ngcontent-%COMP%]   .landingpage_url[_ngcontent-%COMP%]{width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-right:55px}.top_content[_ngcontent-%COMP%]   .landingpage_url[_ngcontent-%COMP%]   .copy_url[_ngcontent-%COMP%]{position:absolute;right:10px}.top_content[_ngcontent-%COMP%]   .landingpage_url[_ngcontent-%COMP%]   .custom_invite_page[_ngcontent-%COMP%]{position:absolute;right:40px}}@media only screen and (max-width: 600px){.top_div[_ngcontent-%COMP%]{background-color:#22408b;padding:10px}.web_link[_ngcontent-%COMP%]{width:100%;text-wrap:nowrap}}.tabs_name[_ngcontent-%COMP%]{color:gray;font-weight:500;cursor:pointer;position:relative;padding-bottom:4px}.tabs_name[_ngcontent-%COMP%]:hover{color:#212529}.tabs_name.active[_ngcontent-%COMP%]{color:#212529;font-weight:700}.tabs_name.active[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;bottom:0;width:100%;height:2px;background-color:#212529}.content_section[_ngcontent-%COMP%]{box-shadow:#64646f33 0 7px 29px;padding:10px;min-height:500px}.tabs_section[_ngcontent-%COMP%]{margin-bottom:10px}.button-qr[_ngcontent-%COMP%]{background:#29303d;color:#fff;display:flex;align-items:center;height:32px}.material-symbols-outlined[_ngcontent-%COMP%]{font-size:22px}  .NgxEditor__Content::-webkit-scrollbar{width:5px}  .NgxEditor__Content::-webkit-scrollbar-track{background:#f0f0f0}  .NgxEditor__Content::-webkit-scrollbar-thumb{background:#f0f0f0;border-radius:10px}  .NgxEditor__Content::-webkit-scrollbar-thumb:hover{background:#333}']}),a})(),path:""},{component:Se,path:"all-requests"},{component:Rn,path:"request/create"},{component:aa,path:"quote/update/:id"},{component:Zt,path:"quote/response/:id"},{component:Gi,path:"quote/view/:id"}];let Fc=(()=>{const s=class{};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[h.Bz.forChild(qc),h.Bz]}),a})();var Ec=_(7392),Dc=_(6655),Nc=_(140),Uc=_(3848);let Rc=(()=>{const s=class{};let a=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[p.ez,Fc,be.Wt,M.IJ,u.u5,Nc.UserProfileModule,u.UX,le.dp,Ec.Ps,ut.ot,Qe.Tx,Dc.CapturesModule,Uc.Nh,me.FP.forRoot({locals:{bold:"Bold",italic:"Italic",code:"Code",blockquote:"Blockquote",underline:"Underline",strike:"Strike",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"}})]}),a})()},808:(j,v,_)=>{const p=_(975);v.parseFont=p,v.createCanvas=function(h,m){return Object.assign(document.createElement("canvas"),{width:h,height:m})},v.createImageData=function(h,m,b){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(h);case 2:return new ImageData(h,m);default:return new ImageData(h,m,b)}},v.loadImage=function(h,m){return new Promise(function(b,C){const x=Object.assign(document.createElement("img"),m);function w(){x.onload=null,x.onerror=null}x.onload=function(){w(),b(x)},x.onerror=function(){w(),C(new Error('Failed to load the image "'+h+'"'))},x.src=h})}},975:j=>{"use strict";const b="'([^']+)'|\"([^\"]+)\"|[\\w\\s-]+",C=new RegExp("(bold|bolder|lighter|[1-9]00) +","i"),x=new RegExp("(italic|oblique) +","i"),w=new RegExp("(small-caps) +","i"),A=new RegExp("(ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded) +","i"),I=new RegExp(`([\\d\\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q) *((?:${b})( *, *(?:${b}))*)`),e={};j.exports=S=>{if(e[S])return e[S];const M=I.exec(S);if(!M)return;const O={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(M[1]),unit:M[2],family:M[3].replace(/["']/g,"").replace(/ *, */g,",")};let $,G,B,J;const E=S.substring(0,M.index);switch(($=C.exec(E))&&(O.weight=$[1]),(G=x.exec(E))&&(O.style=G[1]),(B=w.exec(E))&&(O.variant=B[1]),(J=A.exec(E))&&(O.stretch=J[1]),O.unit){case"pt":O.size/=.75;break;case"pc":O.size*=16;break;case"in":O.size*=96;break;case"cm":O.size*=96/2.54;break;case"mm":O.size*=96/25.4;break;case"%":break;case"em":case"rem":O.size*=16/.75;break;case"q":O.size*=96/25.4/4}return e[S]=O}},4901:j=>{"use strict";var v={single_source_shortest_paths:function(_,p,h){var m={},b={};b[p]=0;var x,w,A,I,e,S,C=v.PriorityQueue.make();for(C.push(p,0);!C.empty();)for(A in I=(x=C.pop()).cost,e=_[w=x.value]||{})e.hasOwnProperty(A)&&(S=I+e[A],(typeof b[A]>"u"||b[A]>S)&&(b[A]=S,C.push(A,S),m[A]=w));if(typeof h<"u"&&typeof b[h]>"u"){var $=["Could not find a path from ",p," to ",h,"."].join("");throw new Error($)}return m},extract_shortest_path_from_predecessor_list:function(_,p){for(var h=[],m=p;m;)h.push(m),m=_[m];return h.reverse(),h},find_path:function(_,p,h){var m=v.single_source_shortest_paths(_,p,h);return v.extract_shortest_path_from_predecessor_list(m,h)},PriorityQueue:{make:function(_){var m,p=v.PriorityQueue,h={};for(m in _=_||{},p)p.hasOwnProperty(m)&&(h[m]=p[m]);return h.queue=[],h.sorter=_.sorter||p.default_sorter,h},default_sorter:function(_,p){return _.cost-p.cost},push:function(_,p){this.queue.push({value:_,cost:p}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};j.exports=v},3259:(j,v,_)=>{const p=_(8695),h=_(1465),m=_(3210),b=_(2334);function C(x,w,A,I,e){const u=[].slice.call(arguments,1),S=u.length,M="function"==typeof u[S-1];if(!M&&!p())throw new Error("Callback required as last argument");if(!M){if(S<1)throw new Error("Too few arguments provided");return 1===S?(A=w,w=I=void 0):2===S&&!w.getContext&&(I=A,A=w,w=void 0),new Promise(function(O,$){try{const G=h.create(A,I);O(x(G,w,I))}catch(G){$(G)}})}if(S<2)throw new Error("Too few arguments provided");2===S?(e=A,A=w,w=I=void 0):3===S&&(w.getContext&&typeof e>"u"?(e=I,I=void 0):(e=I,I=A,A=w,w=void 0));try{const O=h.create(A,I);e(null,x(O,w,I))}catch(O){e(O)}}v.create=h.create,v.toCanvas=C.bind(null,m.render),v.toDataURL=C.bind(null,m.renderToDataURL),v.toString=C.bind(null,function(x,w,A){return b.render(x,A)})},8695:j=>{j.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6221:(j,v,_)=>{const p=_(4792).getSymbolSize;v.getRowColCoords=function(m){if(1===m)return[];const b=Math.floor(m/7)+2,C=p(m),x=145===C?26:2*Math.ceil((C-13)/(2*b-2)),w=[C-7];for(let A=1;A<b-1;A++)w[A]=w[A-1]-x;return w.push(6),w.reverse()},v.getPositions=function(m){const b=[],C=v.getRowColCoords(m),x=C.length;for(let w=0;w<x;w++)for(let A=0;A<x;A++)0===w&&0===A||0===w&&A===x-1||w===x-1&&0===A||b.push([C[w],C[A]]);return b}},2424:(j,v,_)=>{const p=_(4016),h=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function m(b){this.mode=p.ALPHANUMERIC,this.data=b}m.getBitsLength=function(C){return 11*Math.floor(C/2)+C%2*6},m.prototype.getLength=function(){return this.data.length},m.prototype.getBitsLength=function(){return m.getBitsLength(this.data.length)},m.prototype.write=function(C){let x;for(x=0;x+2<=this.data.length;x+=2){let w=45*h.indexOf(this.data[x]);w+=h.indexOf(this.data[x+1]),C.put(w,11)}this.data.length%2&&C.put(h.indexOf(this.data[x]),6)},j.exports=m},2118:j=>{function v(){this.buffer=[],this.length=0}v.prototype={get:function(_){const p=Math.floor(_/8);return 1==(this.buffer[p]>>>7-_%8&1)},put:function(_,p){for(let h=0;h<p;h++)this.putBit(1==(_>>>p-h-1&1))},getLengthInBits:function(){return this.length},putBit:function(_){const p=Math.floor(this.length/8);this.buffer.length<=p&&this.buffer.push(0),_&&(this.buffer[p]|=128>>>this.length%8),this.length++}},j.exports=v},4425:j=>{function v(_){if(!_||_<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=_,this.data=new Uint8Array(_*_),this.reservedBit=new Uint8Array(_*_)}v.prototype.set=function(_,p,h,m){const b=_*this.size+p;this.data[b]=h,m&&(this.reservedBit[b]=!0)},v.prototype.get=function(_,p){return this.data[_*this.size+p]},v.prototype.xor=function(_,p,h){this.data[_*this.size+p]^=h},v.prototype.isReserved=function(_,p){return this.reservedBit[_*this.size+p]},j.exports=v},5663:(j,v,_)=>{const p=_(4016);function h(m){this.mode=p.BYTE,this.data="string"==typeof m?(new TextEncoder).encode(m):new Uint8Array(m)}h.getBitsLength=function(b){return 8*b},h.prototype.getLength=function(){return this.data.length},h.prototype.getBitsLength=function(){return h.getBitsLength(this.data.length)},h.prototype.write=function(m){for(let b=0,C=this.data.length;b<C;b++)m.put(this.data[b],8)},j.exports=h},4655:(j,v,_)=>{const p=_(2259),h=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],m=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];v.getBlocksCount=function(C,x){switch(x){case p.L:return h[4*(C-1)+0];case p.M:return h[4*(C-1)+1];case p.Q:return h[4*(C-1)+2];case p.H:return h[4*(C-1)+3];default:return}},v.getTotalCodewordsCount=function(C,x){switch(x){case p.L:return m[4*(C-1)+0];case p.M:return m[4*(C-1)+1];case p.Q:return m[4*(C-1)+2];case p.H:return m[4*(C-1)+3];default:return}}},2259:(j,v)=>{v.L={bit:1},v.M={bit:0},v.Q={bit:3},v.H={bit:2},v.isValid=function(h){return h&&typeof h.bit<"u"&&h.bit>=0&&h.bit<4},v.from=function(h,m){if(v.isValid(h))return h;try{return function _(p){if("string"!=typeof p)throw new Error("Param is not a string");switch(p.toLowerCase()){case"l":case"low":return v.L;case"m":case"medium":return v.M;case"q":case"quartile":return v.Q;case"h":case"high":return v.H;default:throw new Error("Unknown EC Level: "+p)}}(h)}catch{return m}}},3114:(j,v,_)=>{const p=_(4792).getSymbolSize;v.getPositions=function(b){const C=p(b);return[[0,0],[C-7,0],[0,C-7]]}},7078:(j,v,_)=>{const p=_(4792),b=p.getBCHDigit(1335);v.getEncodedBits=function(x,w){const A=x.bit<<3|w;let I=A<<10;for(;p.getBCHDigit(I)-b>=0;)I^=1335<<p.getBCHDigit(I)-b;return 21522^(A<<10|I)}},5339:(j,v)=>{const _=new Uint8Array(512),p=new Uint8Array(256);(function(){let m=1;for(let b=0;b<255;b++)_[b]=m,p[m]=b,m<<=1,256&m&&(m^=285);for(let b=255;b<512;b++)_[b]=_[b-255]})(),v.log=function(m){if(m<1)throw new Error("log("+m+")");return p[m]},v.exp=function(m){return _[m]},v.mul=function(m,b){return 0===m||0===b?0:_[p[m]+p[b]]}},449:(j,v,_)=>{const p=_(4016),h=_(4792);function m(b){this.mode=p.KANJI,this.data=b}m.getBitsLength=function(C){return 13*C},m.prototype.getLength=function(){return this.data.length},m.prototype.getBitsLength=function(){return m.getBitsLength(this.data.length)},m.prototype.write=function(b){let C;for(C=0;C<this.data.length;C++){let x=h.toSJIS(this.data[C]);if(x>=33088&&x<=40956)x-=33088;else{if(!(x>=57408&&x<=60351))throw new Error("Invalid SJIS character: "+this.data[C]+"\nMake sure your charset is UTF-8");x-=49472}x=192*(x>>>8&255)+(255&x),b.put(x,13)}},j.exports=m},3667:(j,v)=>{v.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function p(h,m,b){switch(h){case v.Patterns.PATTERN000:return(m+b)%2==0;case v.Patterns.PATTERN001:return m%2==0;case v.Patterns.PATTERN010:return b%3==0;case v.Patterns.PATTERN011:return(m+b)%3==0;case v.Patterns.PATTERN100:return(Math.floor(m/2)+Math.floor(b/3))%2==0;case v.Patterns.PATTERN101:return m*b%2+m*b%3==0;case v.Patterns.PATTERN110:return(m*b%2+m*b%3)%2==0;case v.Patterns.PATTERN111:return(m*b%3+(m+b)%2)%2==0;default:throw new Error("bad maskPattern:"+h)}}v.isValid=function(m){return null!=m&&""!==m&&!isNaN(m)&&m>=0&&m<=7},v.from=function(m){return v.isValid(m)?parseInt(m,10):void 0},v.getPenaltyN1=function(m){const b=m.size;let C=0,x=0,w=0,A=null,I=null;for(let e=0;e<b;e++){x=w=0,A=I=null;for(let u=0;u<b;u++){let S=m.get(e,u);S===A?x++:(x>=5&&(C+=x-5+3),A=S,x=1),S=m.get(u,e),S===I?w++:(w>=5&&(C+=w-5+3),I=S,w=1)}x>=5&&(C+=x-5+3),w>=5&&(C+=w-5+3)}return C},v.getPenaltyN2=function(m){const b=m.size;let C=0;for(let x=0;x<b-1;x++)for(let w=0;w<b-1;w++){const A=m.get(x,w)+m.get(x,w+1)+m.get(x+1,w)+m.get(x+1,w+1);(4===A||0===A)&&C++}return 3*C},v.getPenaltyN3=function(m){const b=m.size;let C=0,x=0,w=0;for(let A=0;A<b;A++){x=w=0;for(let I=0;I<b;I++)x=x<<1&2047|m.get(A,I),I>=10&&(1488===x||93===x)&&C++,w=w<<1&2047|m.get(I,A),I>=10&&(1488===w||93===w)&&C++}return 40*C},v.getPenaltyN4=function(m){let b=0;const C=m.data.length;for(let w=0;w<C;w++)b+=m.data[w];return 10*Math.abs(Math.ceil(100*b/C/5)-10)},v.applyMask=function(m,b){const C=b.size;for(let x=0;x<C;x++)for(let w=0;w<C;w++)b.isReserved(w,x)||b.xor(w,x,p(m,w,x))},v.getBestMask=function(m,b){const C=Object.keys(v.Patterns).length;let x=0,w=1/0;for(let A=0;A<C;A++){b(A),v.applyMask(A,m);const I=v.getPenaltyN1(m)+v.getPenaltyN2(m)+v.getPenaltyN3(m)+v.getPenaltyN4(m);v.applyMask(A,m),I<w&&(w=I,x=A)}return x}},4016:(j,v,_)=>{const p=_(4406),h=_(2699);v.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},v.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},v.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},v.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},v.MIXED={bit:-1},v.getCharCountIndicator=function(C,x){if(!C.ccBits)throw new Error("Invalid mode: "+C);if(!p.isValid(x))throw new Error("Invalid version: "+x);return x>=1&&x<10?C.ccBits[0]:x<27?C.ccBits[1]:C.ccBits[2]},v.getBestModeForData=function(C){return h.testNumeric(C)?v.NUMERIC:h.testAlphanumeric(C)?v.ALPHANUMERIC:h.testKanji(C)?v.KANJI:v.BYTE},v.toString=function(C){if(C&&C.id)return C.id;throw new Error("Invalid mode")},v.isValid=function(C){return C&&C.bit&&C.ccBits},v.from=function(C,x){if(v.isValid(C))return C;try{return function m(b){if("string"!=typeof b)throw new Error("Param is not a string");switch(b.toLowerCase()){case"numeric":return v.NUMERIC;case"alphanumeric":return v.ALPHANUMERIC;case"kanji":return v.KANJI;case"byte":return v.BYTE;default:throw new Error("Unknown mode: "+b)}}(C)}catch{return x}}},7783:(j,v,_)=>{const p=_(4016);function h(m){this.mode=p.NUMERIC,this.data=m.toString()}h.getBitsLength=function(b){return 10*Math.floor(b/3)+(b%3?b%3*3+1:0)},h.prototype.getLength=function(){return this.data.length},h.prototype.getBitsLength=function(){return h.getBitsLength(this.data.length)},h.prototype.write=function(b){let C,x,w;for(C=0;C+3<=this.data.length;C+=3)x=this.data.substr(C,3),w=parseInt(x,10),b.put(w,10);const A=this.data.length-C;A>0&&(x=this.data.substr(C),w=parseInt(x,10),b.put(w,3*A+1))},j.exports=h},1106:(j,v,_)=>{const p=_(5339);v.mul=function(m,b){const C=new Uint8Array(m.length+b.length-1);for(let x=0;x<m.length;x++)for(let w=0;w<b.length;w++)C[x+w]^=p.mul(m[x],b[w]);return C},v.mod=function(m,b){let C=new Uint8Array(m);for(;C.length-b.length>=0;){const x=C[0];for(let A=0;A<b.length;A++)C[A]^=p.mul(b[A],x);let w=0;for(;w<C.length&&0===C[w];)w++;C=C.slice(w)}return C},v.generateECPolynomial=function(m){let b=new Uint8Array([1]);for(let C=0;C<m;C++)b=v.mul(b,new Uint8Array([1,p.exp(C)]));return b}},1465:(j,v,_)=>{const p=_(4792),h=_(2259),m=_(2118),b=_(4425),C=_(6221),x=_(3114),w=_(3667),A=_(4655),I=_(2636),e=_(2088),u=_(7078),S=_(4016),M=_(7299);function J(q,R,D){const Z=q.size,L=u.getEncodedBits(R,D);let U,F;for(U=0;U<15;U++)F=1==(L>>U&1),q.set(U<6?U:U<8?U+1:Z-15+U,8,F,!0),q.set(8,U<8?Z-U-1:U<9?15-U-1+1:15-U-1,F,!0);q.set(Z-8,8,1,!0)}function te(q,R,D,Z){let L;if(Array.isArray(q))L=M.fromArray(q);else{if("string"!=typeof q)throw new Error("Invalid data");{let oe=R;if(!oe){const ce=M.rawSplit(q);oe=e.getBestVersionForData(ce,D)}L=M.fromString(q,oe||40)}}const U=e.getBestVersionForData(L,D);if(!U)throw new Error("The amount of data is too big to be stored in a QR Code");if(R){if(R<U)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+U+".\n")}else R=U;const F=function T(q,R,D){const Z=new m;D.forEach(function(Q){Z.put(Q.mode.bit,4),Z.put(Q.getLength(),S.getCharCountIndicator(Q.mode,q)),Q.write(Z)});const F=8*(p.getSymbolTotalCodewords(q)-A.getTotalCodewordsCount(q,R));for(Z.getLengthInBits()+4<=F&&Z.put(0,4);Z.getLengthInBits()%8!=0;)Z.putBit(0);const z=(F-Z.getLengthInBits())/8;for(let Q=0;Q<z;Q++)Z.put(Q%2?17:236,8);return function N(q,R,D){const Z=p.getSymbolTotalCodewords(R),U=Z-A.getTotalCodewordsCount(R,D),F=A.getBlocksCount(R,D),Q=F-Z%F,oe=Math.floor(Z/F),ce=Math.floor(U/F),Ze=ce+1,Ie=oe-ce,Ve=new I(Ie);let Ce=0;const ge=new Array(F),Oe=new Array(F);let ve=0;const Ke=new Uint8Array(q.buffer);for(let ie=0;ie<F;ie++){const Te=ie<Q?ce:Ze;ge[ie]=Ke.slice(Ce,Ce+Te),Oe[ie]=Ve.encode(ge[ie]),Ce+=Te,ve=Math.max(ve,Te)}const xe=new Uint8Array(Z);let K,ae,Se=0;for(K=0;K<ve;K++)for(ae=0;ae<F;ae++)K<ge[ae].length&&(xe[Se++]=ge[ae][K]);for(K=0;K<Ie;K++)for(ae=0;ae<F;ae++)xe[Se++]=Oe[ae][K];return xe}(Z,q,R)}(R,D,L),z=p.getSymbolSize(R),Q=new b(z);return function O(q,R){const D=q.size,Z=x.getPositions(R);for(let L=0;L<Z.length;L++){const U=Z[L][0],F=Z[L][1];for(let z=-1;z<=7;z++)if(!(U+z<=-1||D<=U+z))for(let Q=-1;Q<=7;Q++)F+Q<=-1||D<=F+Q||q.set(U+z,F+Q,z>=0&&z<=6&&(0===Q||6===Q)||Q>=0&&Q<=6&&(0===z||6===z)||z>=2&&z<=4&&Q>=2&&Q<=4,!0)}}(Q,R),function $(q){const R=q.size;for(let D=8;D<R-8;D++){const Z=D%2==0;q.set(D,6,Z,!0),q.set(6,D,Z,!0)}}(Q),function G(q,R){const D=C.getPositions(R);for(let Z=0;Z<D.length;Z++){const L=D[Z][0],U=D[Z][1];for(let F=-2;F<=2;F++)for(let z=-2;z<=2;z++)q.set(L+F,U+z,-2===F||2===F||-2===z||2===z||0===F&&0===z,!0)}}(Q,R),J(Q,D,0),R>=7&&function B(q,R){const D=q.size,Z=e.getEncodedBits(R);let L,U,F;for(let z=0;z<18;z++)L=Math.floor(z/3),U=z%3+D-8-3,F=1==(Z>>z&1),q.set(L,U,F,!0),q.set(U,L,F,!0)}(Q,R),function E(q,R){const D=q.size;let Z=-1,L=D-1,U=7,F=0;for(let z=D-1;z>0;z-=2)for(6===z&&z--;;){for(let Q=0;Q<2;Q++)if(!q.isReserved(L,z-Q)){let oe=!1;F<R.length&&(oe=1==(R[F]>>>U&1)),q.set(L,z-Q,oe),U--,-1===U&&(F++,U=7)}if(L+=Z,L<0||D<=L){L-=Z,Z=-Z;break}}}(Q,F),isNaN(Z)&&(Z=w.getBestMask(Q,J.bind(null,Q,D))),w.applyMask(Z,Q),J(Q,D,Z),{modules:Q,version:R,errorCorrectionLevel:D,maskPattern:Z,segments:L}}v.create=function(R,D){if(typeof R>"u"||""===R)throw new Error("No input text");let L,U,Z=h.M;return typeof D<"u"&&(Z=h.from(D.errorCorrectionLevel,h.M),L=e.from(D.version),U=w.from(D.maskPattern),D.toSJISFunc&&p.setToSJISFunction(D.toSJISFunc)),te(R,L,Z,U)}},2636:(j,v,_)=>{const p=_(1106);function h(m){this.genPoly=void 0,this.degree=m,this.degree&&this.initialize(this.degree)}h.prototype.initialize=function(b){this.degree=b,this.genPoly=p.generateECPolynomial(this.degree)},h.prototype.encode=function(b){if(!this.genPoly)throw new Error("Encoder not initialized");const C=new Uint8Array(b.length+this.degree);C.set(b);const x=p.mod(C,this.genPoly),w=this.degree-x.length;if(w>0){const A=new Uint8Array(this.degree);return A.set(x,w),A}return x},j.exports=h},2699:(j,v)=>{const _="[0-9]+";let h="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";h=h.replace(/u/g,"\\u");const m="(?:(?![A-Z0-9 $%*+\\-./:]|"+h+")(?:.|[\r\n]))+";v.KANJI=new RegExp(h,"g"),v.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),v.BYTE=new RegExp(m,"g"),v.NUMERIC=new RegExp(_,"g"),v.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const b=new RegExp("^"+h+"$"),C=new RegExp("^"+_+"$"),x=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");v.testKanji=function(A){return b.test(A)},v.testNumeric=function(A){return C.test(A)},v.testAlphanumeric=function(A){return x.test(A)}},7299:(j,v,_)=>{const p=_(4016),h=_(7783),m=_(2424),b=_(5663),C=_(449),x=_(2699),w=_(4792),A=_(4901);function I(B){return unescape(encodeURIComponent(B)).length}function e(B,J,E){const T=[];let N;for(;null!==(N=B.exec(E));)T.push({data:N[0],index:N.index,mode:J,length:N[0].length});return T}function u(B){const J=e(x.NUMERIC,p.NUMERIC,B),E=e(x.ALPHANUMERIC,p.ALPHANUMERIC,B);let T,N;return w.isKanjiModeEnabled()?(T=e(x.BYTE,p.BYTE,B),N=e(x.KANJI,p.KANJI,B)):(T=e(x.BYTE_KANJI,p.BYTE,B),N=[]),J.concat(E,T,N).sort(function(q,R){return q.index-R.index}).map(function(q){return{data:q.data,mode:q.mode,length:q.length}})}function S(B,J){switch(J){case p.NUMERIC:return h.getBitsLength(B);case p.ALPHANUMERIC:return m.getBitsLength(B);case p.KANJI:return C.getBitsLength(B);case p.BYTE:return b.getBitsLength(B)}}function G(B,J){let E;const T=p.getBestModeForData(B);if(E=p.from(J,T),E!==p.BYTE&&E.bit<T.bit)throw new Error('"'+B+'" cannot be encoded with mode '+p.toString(E)+".\n Suggested mode is: "+p.toString(T));switch(E===p.KANJI&&!w.isKanjiModeEnabled()&&(E=p.BYTE),E){case p.NUMERIC:return new h(B);case p.ALPHANUMERIC:return new m(B);case p.KANJI:return new C(B);case p.BYTE:return new b(B)}}v.fromArray=function(J){return J.reduce(function(E,T){return"string"==typeof T?E.push(G(T,null)):T.data&&E.push(G(T.data,T.mode)),E},[])},v.fromString=function(J,E){const N=function O(B){const J=[];for(let E=0;E<B.length;E++){const T=B[E];switch(T.mode){case p.NUMERIC:J.push([T,{data:T.data,mode:p.ALPHANUMERIC,length:T.length},{data:T.data,mode:p.BYTE,length:T.length}]);break;case p.ALPHANUMERIC:J.push([T,{data:T.data,mode:p.BYTE,length:T.length}]);break;case p.KANJI:J.push([T,{data:T.data,mode:p.BYTE,length:I(T.data)}]);break;case p.BYTE:J.push([{data:T.data,mode:p.BYTE,length:I(T.data)}])}}return J}(u(J,w.isKanjiModeEnabled())),te=function $(B,J){const E={},T={start:{}};let N=["start"];for(let te=0;te<B.length;te++){const q=B[te],R=[];for(let D=0;D<q.length;D++){const Z=q[D],L=""+te+D;R.push(L),E[L]={node:Z,lastCount:0},T[L]={};for(let U=0;U<N.length;U++){const F=N[U];E[F]&&E[F].node.mode===Z.mode?(T[F][L]=S(E[F].lastCount+Z.length,Z.mode)-S(E[F].lastCount,Z.mode),E[F].lastCount+=Z.length):(E[F]&&(E[F].lastCount=Z.length),T[F][L]=S(Z.length,Z.mode)+4+p.getCharCountIndicator(Z.mode,J))}}N=R}for(let te=0;te<N.length;te++)T[N[te]].end=0;return{map:T,table:E}}(N,E),q=A.find_path(te.map,"start","end"),R=[];for(let D=1;D<q.length-1;D++)R.push(te.table[q[D]].node);return v.fromArray(function M(B){return B.reduce(function(J,E){const T=J.length-1>=0?J[J.length-1]:null;return T&&T.mode===E.mode?(J[J.length-1].data+=E.data,J):(J.push(E),J)},[])}(R))},v.rawSplit=function(J){return v.fromArray(u(J,w.isKanjiModeEnabled()))}},4792:(j,v)=>{let _;const p=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];v.getSymbolSize=function(m){if(!m)throw new Error('"version" cannot be null or undefined');if(m<1||m>40)throw new Error('"version" should be in range from 1 to 40');return 4*m+17},v.getSymbolTotalCodewords=function(m){return p[m]},v.getBCHDigit=function(h){let m=0;for(;0!==h;)m++,h>>>=1;return m},v.setToSJISFunction=function(m){if("function"!=typeof m)throw new Error('"toSJISFunc" is not a valid function.');_=m},v.isKanjiModeEnabled=function(){return typeof _<"u"},v.toSJIS=function(m){return _(m)}},4406:(j,v)=>{v.isValid=function(p){return!isNaN(p)&&p>=1&&p<=40}},2088:(j,v,_)=>{const p=_(4792),h=_(4655),m=_(2259),b=_(4016),C=_(4406),w=p.getBCHDigit(7973);function I(S,M){return b.getCharCountIndicator(S,M)+4}function e(S,M){let O=0;return S.forEach(function($){const G=I($.mode,M);O+=G+$.getBitsLength()}),O}v.from=function(M,O){return C.isValid(M)?parseInt(M,10):O},v.getCapacity=function(M,O,$){if(!C.isValid(M))throw new Error("Invalid QR Code version");typeof $>"u"&&($=b.BYTE);const J=8*(p.getSymbolTotalCodewords(M)-h.getTotalCodewordsCount(M,O));if($===b.MIXED)return J;const E=J-I($,M);switch($){case b.NUMERIC:return Math.floor(E/10*3);case b.ALPHANUMERIC:return Math.floor(E/11*2);case b.KANJI:return Math.floor(E/13);default:return Math.floor(E/8)}},v.getBestVersionForData=function(M,O){let $;const G=m.from(O,m.M);if(Array.isArray(M)){if(M.length>1)return function u(S,M){for(let O=1;O<=40;O++)if(e(S,O)<=v.getCapacity(O,M,b.MIXED))return O}(M,G);if(0===M.length)return 1;$=M[0]}else $=M;return function A(S,M,O){for(let $=1;$<=40;$++)if(M<=v.getCapacity($,O,S))return $}($.mode,$.getLength(),G)},v.getEncodedBits=function(M){if(!C.isValid(M)||M<7)throw new Error("Invalid QR Code version");let O=M<<12;for(;p.getBCHDigit(O)-w>=0;)O^=7973<<p.getBCHDigit(O)-w;return M<<12|O}},3210:(j,v,_)=>{const p=_(6355);v.render=function(C,x,w){let A=w,I=x;typeof A>"u"&&(!x||!x.getContext)&&(A=x,x=void 0),x||(I=function m(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),A=p.getOptions(A);const e=p.getImageWidth(C.modules.size,A),u=I.getContext("2d"),S=u.createImageData(e,e);return p.qrToImageData(S.data,C,A),function h(b,C,x){b.clearRect(0,0,C.width,C.height),C.style||(C.style={}),C.height=x,C.width=x,C.style.height=x+"px",C.style.width=x+"px"}(u,I,e),u.putImageData(S,0,0),I},v.renderToDataURL=function(C,x,w){let A=w;return typeof A>"u"&&(!x||!x.getContext)&&(A=x,x=void 0),A||(A={}),v.render(C,x,A).toDataURL(A.type||"image/png",(A.rendererOpts||{}).quality)}},2334:(j,v,_)=>{const p=_(6355);function h(C,x){const w=C.a/255,A=x+'="'+C.hex+'"';return w<1?A+" "+x+'-opacity="'+w.toFixed(2).slice(1)+'"':A}function m(C,x,w){let A=C+x;return typeof w<"u"&&(A+=" "+w),A}v.render=function(x,w,A){const I=p.getOptions(w),e=x.modules.size,u=x.modules.data,S=e+2*I.margin,M=I.color.light.a?"<path "+h(I.color.light,"fill")+' d="M0 0h'+S+"v"+S+'H0z"/>':"",O="<path "+h(I.color.dark,"stroke")+' d="'+function b(C,x,w){let A="",I=0,e=!1,u=0;for(let S=0;S<C.length;S++){const M=Math.floor(S%x),O=Math.floor(S/x);!M&&!e&&(e=!0),C[S]?(u++,S>0&&M>0&&C[S-1]||(A+=e?m("M",M+w,.5+O+w):m("m",I,0),I=0,e=!1),M+1<x&&C[S+1]||(A+=m("h",u),u=0)):I++}return A}(u,e,I.margin)+'"/>',B='<svg xmlns="http://www.w3.org/2000/svg" '+(I.width?'width="'+I.width+'" height="'+I.width+'" ':"")+'viewBox="0 0 '+S+" "+S+'" shape-rendering="crispEdges">'+M+O+"</svg>\n";return"function"==typeof A&&A(null,B),B}},6355:(j,v)=>{function _(p){if("number"==typeof p&&(p=p.toString()),"string"!=typeof p)throw new Error("Color should be defined as hex string");let h=p.slice().replace("#","").split("");if(h.length<3||5===h.length||h.length>8)throw new Error("Invalid hex color: "+p);(3===h.length||4===h.length)&&(h=Array.prototype.concat.apply([],h.map(function(b){return[b,b]}))),6===h.length&&h.push("F","F");const m=parseInt(h.join(""),16);return{r:m>>24&255,g:m>>16&255,b:m>>8&255,a:255&m,hex:"#"+h.slice(0,6).join("")}}v.getOptions=function(h){h||(h={}),h.color||(h.color={});const b=h.width&&h.width>=21?h.width:void 0;return{width:b,scale:b?4:h.scale||4,margin:typeof h.margin>"u"||null===h.margin||h.margin<0?4:h.margin,color:{dark:_(h.color.dark||"#000000ff"),light:_(h.color.light||"#ffffffff")},type:h.type,rendererOpts:h.rendererOpts||{}}},v.getScale=function(h,m){return m.width&&m.width>=h+2*m.margin?m.width/(h+2*m.margin):m.scale},v.getImageWidth=function(h,m){const b=v.getScale(h,m);return Math.floor((h+2*m.margin)*b)},v.qrToImageData=function(h,m,b){const C=m.modules.size,x=m.modules.data,w=v.getScale(C,b),A=Math.floor((C+2*b.margin)*w),I=b.margin*w,e=[b.color.light,b.color.dark];for(let u=0;u<A;u++)for(let S=0;S<A;S++){let M=4*(u*A+S),O=b.color.light;u>=I&&S>=I&&u<A-I&&S<A-I&&(O=e[x[Math.floor((u-I)/w)*C+Math.floor((S-I)/w)]?1:0]),h[M++]=O.r,h[M++]=O.g,h[M++]=O.b,h[M]=O.a}}}}]);