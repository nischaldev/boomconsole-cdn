"use strict";(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[4680],{4680:(At,P,m)=>{m.r(P),m.d(P,{AgentsModule:()=>bt});var f=m(6895),y=m(9446),p=m(4006),T=m(7518),b=m(5861),g=m(9402),e=m(4650),x=m(8154),I=m(6367),k=m(384);function N(o,s){if(1&o&&(e.TgZ(0,"div",10)(1,"div",11)(2,"label"),e._uU(3,"Name:"),e.qZA()(),e.TgZ(4,"div",12),e._uU(5),e.qZA()()),2&o){const n=e.oxw();e.xp6(5),e.Oqu(n.agent.name)}}function F(o,s){if(1&o&&(e.TgZ(0,"div",10)(1,"div",11)(2,"label"),e._uU(3,"Email:"),e.qZA()(),e.TgZ(4,"div",12),e._uU(5),e.qZA()()),2&o){const n=e.oxw();e.xp6(5),e.Oqu(n.agent.email)}}function L(o,s){if(1&o&&(e.TgZ(0,"div",10)(1,"div",11)(2,"label"),e._uU(3,"Phone:"),e.qZA()(),e.TgZ(4,"div",12),e._uU(5),e.qZA()()),2&o){const n=e.oxw();e.xp6(5),e.Oqu(n.agent.phone)}}function R(o,s){if(1&o&&(e.TgZ(0,"div",10)(1,"div",11)(2,"label"),e._uU(3,"Location:"),e.qZA()(),e.TgZ(4,"div",12),e._uU(5),e.qZA()()),2&o){const n=e.oxw();e.xp6(5),e.Oqu(n.agent.location)}}function S(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"img",35),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==n?null:n.profile_img,e.LSH)("alt",(null==n?null:n.name)+" profile image")}}function K(o,s){1&o&&e._UZ(0,"img",36)}function J(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",32),e.YNc(5,S,2,2,"ng-container",33),e.YNc(6,K,1,0,"ng-template",null,34,e.W1O),e._uU(8),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&o){const n=s.$implicit,t=s.index,i=e.MAs(7);e.xp6(2),e.Oqu(t+1),e.xp6(3),e.Q6J("ngIf",null==n?null:n.profile_img)("ngIfElse",i),e.xp6(3),e.hij(" ",null==n?null:n.name," "),e.xp6(2),e.Oqu(n.email)}}function Q(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",37)(2,"p",38),e._uU(3,"There is no affiliate."),e.qZA()(),e.BQk())}function D(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"div",24)(1,"h2"),e._uU(2,"Affiliates"),e.qZA(),e.TgZ(3,"div",25)(4,"input",26),e.NdJ("ngModelChange",function(i){e.CHM(n);const a=e.oxw();return e.KtG(a.searchText=i)})("input",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.filterAffiliates())}),e.qZA()(),e.TgZ(5,"div",27)(6,"div",28)(7,"table",29)(8,"thead")(9,"tr")(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Email"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,J,11,5,"tr",30),e.qZA()()()(),e.YNc(18,Q,4,0,"ng-container",31),e.qZA()}if(2&o){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n.searchText),e.xp6(13),e.Q6J("ngForOf",n.filteredAffiliates),e.xp6(1),e.Q6J("ngIf",0===(null==n.filteredAffiliates?null:n.filteredAffiliates.length))}}function Y(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"img",35),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==n?null:n.profile_img,e.LSH)("alt",(null==n?null:n.name)+" profile image")}}function j(o,s){1&o&&e._UZ(0,"img",36)}function z(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",32),e.YNc(5,Y,2,2,"ng-container",33),e.YNc(6,j,1,0,"ng-template",null,34,e.W1O),e._uU(8),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&o){const n=s.$implicit,t=s.index,i=e.MAs(7);e.xp6(2),e.Oqu(t+1),e.xp6(3),e.Q6J("ngIf",null==n?null:n.profile_img)("ngIfElse",i),e.xp6(3),e.hij(" ",null==n?null:n.name," "),e.xp6(2),e.Oqu(null==n?null:n.email)}}function E(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",37)(2,"p"),e._uU(3,"No data available."),e.qZA()(),e.BQk())}function B(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"div",24)(1,"h2"),e._uU(2,"Level 1"),e.qZA(),e.TgZ(3,"div",25)(4,"input",39),e.NdJ("ngModelChange",function(i){e.CHM(n);const a=e.oxw();return e.KtG(a.searchTextFirstLevel=i)})("input",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.filterFirstLevelFriends())}),e.qZA()(),e.TgZ(5,"div",27)(6,"div",28)(7,"table",29)(8,"thead")(9,"tr")(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Email"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,z,11,5,"tr",30),e.qZA()()()(),e.YNc(18,E,4,0,"ng-container",31),e.qZA()}if(2&o){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n.searchTextFirstLevel),e.xp6(13),e.Q6J("ngForOf",n.filteredFirstLevelFriends),e.xp6(1),e.Q6J("ngIf",0===n.filteredFirstLevelFriends.length)}}function $(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"img",35),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==n?null:n.profile_img,e.LSH)("alt",(null==n?null:n.name)+" profile image")}}function W(o,s){1&o&&e._UZ(0,"img",36)}function H(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",32),e.YNc(5,$,2,2,"ng-container",33),e.YNc(6,W,1,0,"ng-template",null,34,e.W1O),e._uU(8),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&o){const n=s.$implicit,t=s.index,i=e.MAs(7);e.xp6(2),e.Oqu(t+1),e.xp6(3),e.Q6J("ngIf",null==n?null:n.profile_img)("ngIfElse",i),e.xp6(3),e.hij(" ",null==n?null:n.name," "),e.xp6(2),e.Oqu(null==n?null:n.email)}}function G(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",37)(2,"p"),e._uU(3,"No data available."),e.qZA()(),e.BQk())}function V(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"div",24)(1,"h2"),e._uU(2,"Level 2"),e.qZA(),e.TgZ(3,"div",25)(4,"input",40),e.NdJ("ngModelChange",function(i){e.CHM(n);const a=e.oxw();return e.KtG(a.searchTextSecondLevel=i)})("input",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.filterSecondLevelFriends())}),e.qZA()(),e.TgZ(5,"div",27)(6,"div",28)(7,"table",29)(8,"thead")(9,"tr")(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Email"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,H,11,5,"tr",30),e.qZA()()()(),e.YNc(18,G,4,0,"ng-container",31),e.qZA()}if(2&o){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n.searchTextSecondLevel),e.xp6(13),e.Q6J("ngForOf",n.filteredSecondLevelFriends),e.xp6(1),e.Q6J("ngIf",0===n.filteredSecondLevelFriends.length)}}function X(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"img",35),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==n?null:n.profile_img,e.LSH)("alt",(null==n?null:n.name)+" profile image")}}function ee(o,s){1&o&&e._UZ(0,"img",36)}function te(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",32),e.YNc(5,X,2,2,"ng-container",33),e.YNc(6,ee,1,0,"ng-template",null,34,e.W1O),e._uU(8),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&o){const n=s.$implicit,t=s.index,i=e.MAs(7),a=e.oxw(2);e.xp6(2),e.Oqu(t+1),e.xp6(3),e.Q6J("ngIf",null==n?null:n.profile_img)("ngIfElse",i),e.xp6(3),e.hij(" ",null==n?null:n.name," "),e.xp6(2),e.Oqu(null==n?null:n.email),e.xp6(2),e.Oqu(null==a.friends?null:a.friends.created_at)}}function ne(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",37)(2,"p"),e._uU(3,"No data available."),e.qZA()(),e.BQk())}function ae(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"div",24)(1,"h2"),e._uU(2,"Level 3"),e.qZA(),e.TgZ(3,"div",25)(4,"input",41),e.NdJ("ngModelChange",function(i){e.CHM(n);const a=e.oxw();return e.KtG(a.searchTextThirdLevel=i)})("input",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.filterThirdLevelFriends())}),e.qZA()(),e.TgZ(5,"div",27)(6,"div",28)(7,"table",29)(8,"thead")(9,"tr")(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Email"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,te,13,6,"tr",30),e.qZA()()()(),e.YNc(18,ne,4,0,"ng-container",31),e.qZA()}if(2&o){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n.searchTextThirdLevel),e.xp6(13),e.Q6J("ngForOf",n.filteredThirdLevelFriends),e.xp6(1),e.Q6J("ngIf",0===n.filteredThirdLevelFriends.length)}}let ie=(()=>{const s=class{constructor(t,i,a,r){this.modal=t,this._itemService=i,this._marketingService=a,this._authService=r,this.agentConceptId=0,this.agentAffiliates=[],this.totalReward=0,this.userAgentType="",this.userAgentRate=0,this.agent={},this.isFriends2TableVisible=!1,this.isFriends3TableVisible=!1,this.isFriendsTableVisible=!1,this.isAffiliatesTableVisible=!0,this.myAffiliates=[],this.friends=[],this.Secondfriends=[],this.Thirdfriends=[],this.friendListData=[],this.searchText="",this.searchTextFirstLevel="",this.searchTextSecondLevel="",this.searchTextThirdLevel=""}ngOnInit(){this.agentConceptId=this.agentInfo.id,this.agent.name=`${this.agentInfo?.data?.the_user?.entity?.person?.first_name} ${this.agentInfo?.data?.the_user?.entity?.person?.last_name}`,this.agent.email=this.agentInfo?.data?.the_user?.user_data?.primary_email,this.agent.profileImage=this.agentInfo?.data?.the_user?.entity?.person?.profile_img,this.agent.phone=this.agentInfo?.data?.the_user?.entity?.person?.phone,this.agent.location=this.agentInfo?.data?.the_user?.entity?.person?.location;const t=this._authService.loadFromLocalStorage();this.userConceptId=t?.userConcept,this.entityId=t?.entityId,this.checkAgentType()}checkAgentType(){this._itemService.getSemanticConnection({compositionId:this.agentConceptId,linker:"isAgent_s"}).subscribe({next:i=>{if(i.count&&i.output.length){const a=Object.keys(i?.output[0]?.data)[0],r=i?.output[0]?.data[a].agentType.split(/(?=[A-Z])/);this.userAgentType=r.map(l=>l[0].toUpperCase()+l.slice(1)).join(" "),this.userAgentRate=Number(i?.output[0]?.data[a].rate),this.getMyAffiliates()}},error:i=>{console.log(i)},complete:()=>{}})}getAgentAffiliates(){this._itemService.searchLinkMultipleAll([{composition:this.agentConceptId,listLinkers:["affiliate_s"],inpage:100,page:1,logic:"or",filterSearches:[]},{listLinkers:["bought_s"],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:i=>{let r=[];i.the_user.the_user_s_affiliate_s&&(r=i?.the_user?.the_user_s_affiliate_s.map(l=>{const c=l?.the_user?.data,d=l?.the_user?.the_user_s_bought_s;let _=[];return d&&d.length>0&&(_=d.map(C=>{const A=C?.internal_sales_item?.data,q=A?.productId,M=(A.commissionRate||0)/100,O=Number(A?.price)/100*M,yt=Number(A?.price)/100,Ct=Number(this.userAgentRate)/100,xt=Number((O*Ct).toFixed(2)),U={price:yt,reward:Number(xt)};return q&&(U.productId=q),U})),{name:`${c?.entity?.data?.person?.data?.first_name} ${c?.entity?.data?.person?.data?.last_name}`,email:c?.user_data?.data?.primary_email,affiliateBuys:_}})),this.getAffiliatePlanDetails(r)},error:i=>{console.log(i)},complete:()=>{}})}getAffiliatePlanDetails(t){const i=t.map(l=>l.affiliateBuys).flat();this.totalReward=i.reduce((l,c)=>(c.reward&&(l=Number(c.reward)+l),Number(l.toFixed(2))),0);const a=i.map(l=>l.productId),r=[...new Set(a)];this._itemService.getUserReports(r).subscribe({next:l=>{this.agentAffiliates=t.map(c=>{const d={...c},_=d?.affiliateBuys.map(h=>(l.forEach(C=>{C.id==h.productId&&(h.productName=C?.data?.internal_product?.name,h.productBrand=C?.data?.internal_product?.brand)}),h));return d.affiliateBuys=_,d})}})}toggleAffiliatesTable(){this.isFriends2TableVisible=!1,this.isFriends3TableVisible=!1,this.isFriendsTableVisible=!1,this.isAffiliatesTableVisible=!0}toggleLevel1Friends(){this.isAffiliatesTableVisible=!1,this.isFriends2TableVisible=!1,this.isFriends3TableVisible=!1,this.isFriendsTableVisible=!0}toggleLevel2Friends(){this.isAffiliatesTableVisible=!1,this.isFriendsTableVisible=!1,this.isFriends3TableVisible=!1,this.isFriends2TableVisible=!0}toggleLevel3Friends(){this.isAffiliatesTableVisible=!1,this.isFriendsTableVisible=!1,this.isFriends2TableVisible=!1,this.isFriends3TableVisible=!0}filterAffiliates(){if(!this.myAffiliates||0===this.myAffiliates.length)return void(this.filteredAffiliates=[]);const t=this.searchText?.trim().toLowerCase();this.filteredAffiliates=this.myAffiliates?.filter(i=>i.email?.trim().toLowerCase().includes(t))}filterFirstLevelFriends(){const t=this.searchTextFirstLevel.trim().toLowerCase();this.filteredFirstLevelFriends=""===t?this.friends:this.friends.filter(i=>i.email&&i.email.toLowerCase().includes(t)||i.email&&i.email.toLowerCase().includes(t))}filterSecondLevelFriends(){this.filteredSecondLevelFriends=""===this.searchTextSecondLevel.trim()?this.Secondfriends:this.Secondfriends.filter(t=>t.email&&t.email.toLowerCase().includes(this.searchTextSecondLevel.toLowerCase()))}filterThirdLevelFriends(){this.filteredThirdLevelFriends=""===this.searchTextThirdLevel.trim()?this.Thirdfriends:this.Thirdfriends.filter(t=>t.email&&t.email.toLowerCase().includes(this.searchTextThirdLevel.toLowerCase()))}GetEntityIdFromConceptId(t){return new Promise(i=>{const a=new g.LtL;a.typeConnection="the_entity_user",a.name="entity",a.reverse=!0;const r=new g.LtL;r.conceptIds=[t],r.name="user",r.freeschemaQueries=[a],r.outputFormat=g.xY7,(0,g.og0)(r,"").subscribe(l=>{console.log("x....",l);const c=l?.[0]?.data?.the_user?.the_entity_user_reverse?.id;c&&i(c)})})}getMyAffiliates(){var t=this;return(0,b.Z)(function*(){try{const i=yield t.GetEntityIdFromConceptId(t.agentConceptId),a=yield t._marketingService.getAffiliates(t.agentConceptId,Number(i));console.log(a,"affiliates"),t.myAffiliates=a,t.filteredAffiliates=a,t.getFriendsLists(t.agentConceptId,i)}catch(i){console.error("Error in getMyAffiliates:",i)}})()}getFriendsLists(t,i){var a=this;return(0,b.Z)(function*(){const r=yield a._marketingService.getFriendsLists(t,i);a.friendListData=r,a.friends=r?.firstLevel.map(l=>{const c=l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||l?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.first_name?.data?.the_first_name,d=l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||l?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.last_name?.data?.the_last_name;return{name:c&&d?`${c} ${d}`:c||d||"Unknown Name",email:l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_email?.data?.the_email||l?.data?.the_entity?.the_entity_email?.data?.the_email||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.email?.data?.the_email||l?.data?.the_user?.the_user_data?.data?.the_user_data?.primary_email?.data?.the_primary_email||"No Email",profile_img:l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||l?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.profile_img?.data?.the_profile_img}}),a.filteredFirstLevelFriends=a.friends,a.Secondfriends=r?.secondLevel.map(l=>{const c=l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||l?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.first_name?.data?.the_first_name,d=l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||l?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.last_name?.data?.the_last_name;return{name:c&&d?`${c} ${d}`:c||d||"Unknown Name",email:l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_email?.data?.the_email||l?.data?.the_entity?.the_entity_email?.data?.the_email||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.email?.data?.the_email||l?.data?.the_user?.the_user_data?.data?.the_user_data?.primary_email?.data?.the_primary_email||"No Email",profile_img:l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||l?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.profile_img?.data?.the_profile_img}}),a.filteredSecondLevelFriends=a.Secondfriends,a.Thirdfriends=r?.thirdLevel.map(l=>{const c=l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||l?.data?.the_entity?.the_entity_firstname?.data?.the_firstname||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.first_name?.data?.the_first_name,d=l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||l?.data?.the_entity?.the_entity_lastname?.data?.the_lastname||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.last_name?.data?.the_last_name;return{name:c&&d?`${c} ${d}`:c||d||"Unknown Name",email:l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_email?.data?.the_email||l?.data?.the_entity?.the_entity_email?.data?.the_email||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.email?.data?.the_email||l?.data?.the_user?.the_user_data?.data?.the_user_data?.primary_email?.data?.the_primary_email||"No Email",profile_img:l?.data?.the_user?.the_entity_user_reverse?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||l?.data?.the_entity?.the_entity_avatar?.data?.the_avatar||l?.data?.the_user?.the_entity?.data?.the_entity?.the_person?.data?.the_person?.profile_img?.data?.the_profile_img}}),a.filteredThirdLevelFriends=a.Thirdfriends})()}};let o=s;return s.\u0275fac=function(i){return new(i||s)(e.Y36(y.Kz),e.Y36(x.e),e.Y36(I.f),e.Y36(k.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-agent-details"]],inputs:{agentInfo:"agentInfo"},decls:59,vars:23,consts:[[1,"modal-header"],[1,"modal-title"],[1,"btn-close",3,"click"],[1,"modal-body","agent-modal-body"],[1,"mb-3"],[1,"row","column-gap-container","align-items-start"],[1,"col-md-2","col-4"],["width","70px",1,"img-fluid","border","rounded","small-profile-img",3,"src","alt"],[1,"col-md-4","col-4","compact-details"],["class","row mb-1",4,"ngIf"],[1,"row","mb-1"],[1,"col-md-4","col-5"],[1,"col-md-8","col-7"],[1,"row","my-0","friends-level","mt-4"],[1,"col-md-3"],["tabindex","",3,"click","keyup"],[1,"level-box"],[1,"level-box","box_level1_friends"],[1,"level-box","box_level2_friends"],[1,"col-md-3","text-center"],[1,"level-box","box_level3_friends"],["class","row mt-4 affiliate-table-all",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"row","mt-4","affiliate-table-all"],[1,"search"],["type","text","placeholder","Search invited email...",3,"ngModel","ngModelChange","input"],[1,"fixed-table"],[1,"table","fixed_layout"],[1,"table","affiliate-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"following-image"],[4,"ngIf","ngIfElse"],["defaultProfileImg",""],[1,"img-fluid",3,"src","alt"],["src","https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp","alt","Profile Image",1,"img-fluid"],[1,"m-3","p-3","d-flex","align-items-center","justify-content-center","text-center"],[1,"my-3"],["type","text","placeholder","Search Level 1 friends...",3,"ngModel","ngModelChange","input"],["type","text","placeholder","Search Level 2 friends...",3,"ngModel","ngModelChange","input"],["type","text","placeholder","Search Level 3 friends...",3,"ngModel","ngModelChange","input"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Agent Details"),e.qZA(),e.TgZ(3,"span",2),e.NdJ("click",function(){return a.modal.dismiss("Cross click")}),e.qZA()(),e.TgZ(4,"div",3)(5,"h4"),e._uU(6,"About"),e.qZA(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6),e._UZ(10,"img",7),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,N,6,1,"div",9),e.TgZ(13,"div",10)(14,"div",11)(15,"label"),e._uU(16,"Agent Type:"),e.qZA()(),e.TgZ(17,"div",12),e._uU(18),e.qZA()(),e.YNc(19,F,6,1,"div",9),e.qZA(),e.TgZ(20,"div",8),e.YNc(21,L,6,1,"div",9),e.YNc(22,R,6,1,"div",9),e.qZA()()(),e.TgZ(23,"div",13)(24,"div",14)(25,"a",15),e.NdJ("click",function(){return a.toggleAffiliatesTable()})("keyup",function(){return a.toggleAffiliatesTable()}),e.TgZ(26,"div",16)(27,"p"),e._uU(28,"Affiliates"),e.qZA(),e.TgZ(29,"h3"),e._uU(30),e.qZA()()()(),e.TgZ(31,"div",14)(32,"a",15),e.NdJ("click",function(){return a.toggleLevel1Friends()})("keyup",function(){return a.toggleLevel1Friends()}),e.TgZ(33,"div",17)(34,"p"),e._uU(35,"Level 1 Friends"),e.qZA(),e.TgZ(36,"h3"),e._uU(37),e.qZA()()()(),e.TgZ(38,"div",14)(39,"a",15),e.NdJ("click",function(){return a.toggleLevel2Friends()})("keyup",function(){return a.toggleLevel2Friends()}),e.TgZ(40,"div",18)(41,"p"),e._uU(42,"Level 2 Friends"),e.qZA(),e.TgZ(43,"h3"),e._uU(44),e.qZA()()()(),e.TgZ(45,"div",19)(46,"a",15),e.NdJ("click",function(){return a.toggleLevel3Friends()})("keyup",function(){return a.toggleLevel3Friends()}),e.TgZ(47,"div",20)(48,"p"),e._uU(49,"Level 3 Friends"),e.qZA(),e.TgZ(50,"h3"),e._uU(51),e.qZA()()()()(),e.YNc(52,D,19,3,"div",21),e.YNc(53,B,19,3,"div",21),e.YNc(54,V,19,3,"div",21),e.YNc(55,ae,19,3,"div",21),e.qZA(),e.TgZ(56,"div",22)(57,"button",23),e.NdJ("click",function(){return a.modal.dismiss("Cross click")}),e._uU(58," Close "),e.qZA()()),2&i&&(e.xp6(10),e.Q6J("src",(null==a.agent?null:a.agent.profileImage)||"https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp",e.LSH)("alt",null!=a.agent&&a.agent.name?a.agent.name+" profile image":"Profile avatar"),e.xp6(2),e.Q6J("ngIf",null==a.agent?null:a.agent.name),e.xp6(6),e.Oqu(a.userAgentType),e.xp6(1),e.Q6J("ngIf",null==a.agent?null:a.agent.email),e.xp6(2),e.Q6J("ngIf",null==a.agent?null:a.agent.phone),e.xp6(1),e.Q6J("ngIf",null==a.agent?null:a.agent.location),e.xp6(4),e.ekj("open",a.isAffiliatesTableVisible),e.xp6(4),e.Oqu((null==a.myAffiliates?null:a.myAffiliates.length)||0),e.xp6(3),e.ekj("open",a.isFriendsTableVisible),e.xp6(4),e.Oqu(null==a.friendListData||null==a.friendListData.firstLevel?null:a.friendListData.firstLevel.length),e.xp6(3),e.ekj("open",a.isFriends2TableVisible),e.xp6(4),e.Oqu(null==a.friendListData||null==a.friendListData.secondLevel?null:a.friendListData.secondLevel.length),e.xp6(3),e.ekj("open",a.isFriends3TableVisible),e.xp6(4),e.Oqu(null==a.friendListData||null==a.friendListData.thirdLevel?null:a.friendListData.thirdLevel.length),e.xp6(1),e.Q6J("ngIf",a.isAffiliatesTableVisible),e.xp6(1),e.Q6J("ngIf",a.isFriendsTableVisible),e.xp6(1),e.Q6J("ngIf",a.isFriends2TableVisible),e.xp6(1),e.Q6J("ngIf",a.isFriends3TableVisible))},dependencies:[f.sg,f.O5,p.Fj,p.JJ,p.On],styles:['.agent-modal-body[_ngcontent-%COMP%]{padding:1rem 2rem}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{line-height:1.5}.affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .affiliate-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   th[_ngcontent-%COMP%]{border-bottom:none}.tab-titles[_ngcontent-%COMP%]{color:#fd7088;font-size:1.5rem;font-weight:700}.hello[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;border-color:#f0f8ff;font-size:30px}.friends-graph[_ngcontent-%COMP%]{border:none;border-radius:20px;background:linear-gradient(to right,rgb(242,112,156),rgb(255,148,114));padding:9px 15px}.column-gap-container[_ngcontent-%COMP%]{gap:20px}.small-profile-img[_ngcontent-%COMP%]{max-width:70px;height:auto}.compact-details[_ngcontent-%COMP%]{font-size:.85rem;line-height:1.2}.compact-details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;margin-bottom:0;padding-right:5px}.compact-details[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:2px!important}@media (max-width: 768px){.column-gap-container[_ngcontent-%COMP%]{gap:15px;flex-wrap:nowrap!important}.small-profile-img[_ngcontent-%COMP%]{max-width:60px}.compact-details[_ngcontent-%COMP%], .compact-details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8rem}}.friends-tree[_ngcontent-%COMP%]{background:white;padding:9px 15px;color:#000;border:1px solid #fd7088;border-radius:20px}.level-box[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:.5rem;padding:1rem;text-align:center}.level-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fd7088;font-weight:500;font-size:20px}.level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .level-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{opacity:.8}.friends-level[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}.friends-level[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .friends-level[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .level-box.open[_ngcontent-%COMP%]{background-color:#fefbea}mat-tree[_ngcontent-%COMP%]{background:none}mat-tree[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}mat-tree[_ngcontent-%COMP%], mat-nested-tree-node[_ngcontent-%COMP%], mat-tree-node[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{position:relative}mat-tree-node[_ngcontent-%COMP%]:before, mat-nested-tree-node[_ngcontent-%COMP%]:before, mat-tree-node[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:before, mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]:before{content:"";width:10px;display:block;position:absolute;background:url(/assets/dot.svg) left top/2px 2px}mat-tree-node[_ngcontent-%COMP%]:before, mat-nested-tree-node[_ngcontent-%COMP%]:before{top:0;height:100%;background-repeat:repeat-y;left:14px}mat-tree-node[_ngcontent-%COMP%]:last-child:before{height:50%}mat-nested-tree-node[_ngcontent-%COMP%]:last-child:before{height:10px}mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]:before{left:40px}mat-tree-node[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:before{top:12px;height:calc(100% - 8px);background-repeat:repeat-x;left:-15px}.mat-tree-node[_ngcontent-%COMP%]{min-height:auto;position:relative;padding-left:31px;display:block;width:100%}.mat-tree-node[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:inherit;font-weight:700}.mat-tree-node[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;left:31px;top:7px;z-index:10}.mat-tree-node[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;display:block;padding-left:0;font-size:16px;text-wrap:nowrap;text-overflow:ellipsis;height:auto;line-height:normal;padding-bottom:12px}.mat-tree-node[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .profile_email[_ngcontent-%COMP%]{display:block;font-size:14px;color:#777}.mat-tree-node[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .profile_img[_ngcontent-%COMP%]{width:40px;float:left;margin-right:10px}.mat-tree-node[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .profile_img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.mat-tree-node[_ngcontent-%COMP%]   .edit_icon[_ngcontent-%COMP%]{color:#777;font-size:20px;position:absolute;right:5%;top:0}.mat-tree-node[_ngcontent-%COMP%]   .edit_icon.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{padding-left:0;text-align:center}.mat-tree-node[_ngcontent-%COMP%]   .edit_icon.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.mat-tree-node[_ngcontent-%COMP%]   .edit_icon.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{position:relative;top:3px;left:2px}.mat-tree-node[_ngcontent-%COMP%]   .toggle_button[_ngcontent-%COMP%]{background:linear-gradient(132deg,rgb(65,80,95) 0%,rgb(36,37,38) 100%);border:none;border-radius:50%;width:20px;height:20px;position:absolute;left:5px;top:2px;padding:10px}.mat-tree-node[_ngcontent-%COMP%]   .toggle_button[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{color:#fff;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-size:22px}.example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:30px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:30px}.affiliate-table-all[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;margin:0 10px;border-radius:5px;box-sizing:border-box}.affiliate-table-all[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fd7088;font-weight:500;font-size:30px;margin-bottom:20px}.affiliate-table-all[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-size:small;display:block}.mentor_friends_tree[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;margin:0 10px;border-radius:5px;box-sizing:border-box}.mentor_friends_tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fd7088;font-weight:500;font-size:30px;margin-bottom:20px}.scrollable-tbody[_ngcontent-%COMP%]{max-height:50vh;overflow-y:auto}.fixed-table[_ngcontent-%COMP%]{overflow:auto;border-radius:0;max-height:calc(60vh - 118px)}.fixed-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background-color:#ccc}.size[_ngcontent-%COMP%]{margin-left:59%}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:rgba(17,17,17,.0666666667);margin-bottom:1rem;padding:5px 10px;border-radius:5px;width:100%;height:40px}.btn-close[_ngcontent-%COMP%]{cursor:pointer}.following-section[_ngcontent-%COMP%]{height:360px;overflow-y:auto}.following-list[_ngcontent-%COMP%]{padding:.75rem .5rem;border-bottom:1px solid #efefef;cursor:pointer}.following-list[_ngcontent-%COMP%]:hover{background-color:#eee}.following-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border:1px solid #ddd;border-radius:8px}']}),o})();var v=m(7009),w=m(8180);function oe(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"div",23)(1,"label")(2,"input",26),e.NdJ("ngModelChange",function(i){const r=e.CHM(n).$implicit,l=e.oxw(2);return e.KtG(l.selectedFilters[r]=i)})("change",function(i){const r=e.CHM(n).$implicit,l=e.oxw(2);return e.KtG(l.updateSelectedOptions(r,i))}),e.qZA(),e._uU(3),e.ALo(4,"titlecase"),e.qZA()()}if(2&o){const n=s.$implicit,t=e.oxw(2);e.xp6(2),e.s9C("name",n),e.Q6J("ngModel",t.selectedFilters[n]),e.xp6(1),e.hij(" ",e.lcZ(4,3,t.agentTypeMappings[n]||n)," ")}}function re(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(1,"div",22)(2,"label",23)(3,"input",24),e.NdJ("ngModelChange",function(i){e.CHM(n);const a=e.oxw();return e.KtG(a.selectAllChecked=i)})("change",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.selectAllChanged())}),e.qZA(),e._uU(4," Select All "),e.qZA(),e.YNc(5,oe,5,5,"div",25),e.qZA()()}if(2&o){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.selectAllChecked),e.xp6(2),e.Q6J("ngForOf",n.agentTypes)}}function se(o,s){1&o&&(e.TgZ(0,"tr",27)(1,"td",28)(2,"div",29),e._uU(3,"Loading..."),e.qZA()()())}function le(o,s){1&o&&(e.TgZ(0,"tr",27)(1,"td",28),e._uU(2,"No agents found"),e.qZA()())}function ce(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"img",40),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==n.data||null==n.data.the_user||null==n.data.the_user.entity||null==n.data.the_user.entity.person?null:n.data.the_user.entity.person.profile_img,e.LSH)("alt",(null==n.data||null==n.data.the_user||null==n.data.the_user.entity||null==n.data.the_user.entity.person?null:n.data.the_user.entity.person.first_name)+" profile image")}}function de(o,s){1&o&&e._UZ(0,"img",41)}function pe(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"tr",31)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",32),e.YNc(5,ce,2,2,"ng-container",33),e.YNc(6,de,1,0,"ng-template",null,34,e.W1O),e.TgZ(8,"a",35),e._uU(9),e.qZA()()(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td")(17,"div",36)(18,"a",37),e.NdJ("click",function(){const a=e.CHM(n).$implicit,r=e.oxw(2);return e.KtG(r.openAgentDetailsModal(a))})("keyup",function(){const a=e.CHM(n).$implicit,r=e.oxw(2);return e.KtG(r.openAgentDetailsModal(a))}),e.TgZ(19,"span",38),e._uU(20,"visibility"),e.qZA()(),e.TgZ(21,"a",39),e.NdJ("click",function(){const a=e.CHM(n).$implicit,r=e.oxw(2);return e.KtG(r.removeAsAgent(a,a))})("keyup",function(){const a=e.CHM(n).$implicit,r=e.oxw(2);return e.KtG(r.removeAsAgent(a,a))}),e.TgZ(22,"span",38),e._uU(23,"delete"),e.qZA()()()()()}if(2&o){const n=s.$implicit,t=s.index,i=e.MAs(7),a=e.oxw(2);e.xp6(2),e.Oqu((a.currentPage-1)*a.pageSize+t+1),e.xp6(3),e.Q6J("ngIf",null==n.data||null==n.data.the_user||null==n.data.the_user.entity||null==n.data.the_user.entity.person?null:n.data.the_user.entity.person.profile_img)("ngIfElse",i),e.xp6(3),e.Q6J("routerLink","/bm/"+(null==n?null:n.id)),e.xp6(1),e.AsE("",null==n||null==n.data||null==n.data.the_user||null==n.data.the_user.entity||null==n.data.the_user.entity.person?null:n.data.the_user.entity.person.first_name," ",null==n||null==n.data||null==n.data.the_user||null==n.data.the_user.entity||null==n.data.the_user.entity.person?null:n.data.the_user.entity.person.last_name,""),e.xp6(2),e.Oqu(null==n||null==n.data||null==n.data.the_user||null==n.data.the_user.user_data?null:n.data.the_user.user_data.primary_email),e.xp6(2),e.hij(" ",a.agentTypeMappings[n.userAgentType]||n.userAgentType," "),e.xp6(2),e.Oqu(null==n?null:n.created_at)}}function ge(o,s){if(1&o&&e.YNc(0,pe,24,9,"tr",30),2&o){const n=e.oxw();e.Q6J("ngForOf",n.filteredAgents)}}function _e(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"li",42)(1,"a",43),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.handlePagination(i.currentPage-1))})("keyup.enter",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.handlePagination(i.currentPage-1))}),e.TgZ(2,"span",44),e._uU(3,"\xab"),e.qZA()()()}}const ue=function(o){return{active:o}};function me(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"li",45)(1,"a",46),e.NdJ("click",function(){const a=e.CHM(n).$implicit,r=e.oxw();return e.KtG(r.handlePagination(a))})("keyup.enter",function(){const a=e.CHM(n).$implicit,r=e.oxw();return e.KtG(r.handlePagination(a))}),e._uU(2),e.qZA()()}if(2&o){const n=s.$implicit,t=e.oxw();e.Q6J("ngClass",e.VKq(2,ue,t.currentPage===n)),e.xp6(2),e.hij(" ",n," ")}}function fe(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"li",42)(1,"a",47),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.handlePagination(i.currentPage+1))})("keyup.enter",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.handlePagination(i.currentPage+1))}),e.TgZ(2,"span",44),e._uU(3,"\xbb"),e.qZA()()()}}let he=(()=>{const s=class{constructor(t,i,a,r){this.itemService=t,this.snackBar=i,this._modalService=a,this._snackbar=r,this.agentTypeList=[],this.selectedFilters={},this.dropdownOpen=!1,this.selectAllChecked=!0,this.filteredAgents=[],this.allAgents=[],this.LodingAgent=!1,this.searchQuery="",this.currentPage=1,this.pageSize=7,this.totalPages=0,this.pageNumbers=[],this.agentTypes=["seller_agent","sellerAgent_agent","listingAgent_agent","buyerAgent_agent","buyer_agent","marketingAgent_agent"],this.agentTypeMappings={seller_agent:"Seller ",sellerAgent_agent:"Seller Agent",listingAgent_agent:"Listing Agent",buyerAgent_agent:"Buyer Agent",buyer_agent:"Buyer ",marketingAgent_agent:"Marketing Agent"}}ngOnInit(){this.initializeFilters(),this.listAgentTypes()}initializeFilters(){this.agentTypes.forEach(t=>{this.selectedFilters[t]=!0}),this.selectAllChecked=!0}selectAllChanged(){this.agentTypes.forEach(i=>{this.selectedFilters[i]=this.selectAllChecked});const t=this.filterAgents();this.filteredAgents=this.paginateAgents(t),this.calculatePagination()}extractAgentType(t){switch(Object.keys(t.data)[0]){case"seller_agent":return"seller_agent";case"sellerAgent_agent":return"sellerAgent_agent";case"listingAgent_agent":return"listingAgent_agent";case"buyerAgent_agent":return"buyerAgent_agent";case"buyer_agent":return"buyer_agent";case"marketingAgent_agent":return"marketingAgent_agent";default:return"Unknown"}}toggleDropdown(){this.dropdownOpen=!this.dropdownOpen}getAgentTypeDetails(t){return new Promise(i=>{this.itemService.getAll(t).subscribe({next:a=>{i(a.data.length?a.data[0]:{})}})})}handlePagination(t){t<1||t>this.totalPages||t===this.currentPage||(this.currentPage=t,this.filteredAgents=this.paginateAgents(this.allAgents),this.calculatePagination())}getAgentList(t){const a=Object.keys(t).length?Object.keys(t.data)[0]:"";if(!a)return;const r={compositionId:t.id,linker:"isAgent_by",agentType:a};return new Promise((l,c)=>{this.itemService.getSemanticConnection(r).subscribe({next:d=>{const _=d.output.map(h=>({...h,userAgentType:a}));l(_)},error:d=>{c(d)}})})}removeAsAgent(t,i){if(!window.confirm("Are you sure you want to remove?"))return;const r=t?.id,l=i?.compositionId;this.itemService.removeSemanticConnection({compositionId1:r,compositionId2:l,linker:"isAgent"}).subscribe({next:()=>{this._snackbar.openSnackBar("Deleted Successfully","success"),this.getAllAgents()}})}openAgentDetailsModal(t){this._modalService.open(ie,{size:"lg",scrollable:!0}).componentInstance.agentInfo=t}listAgentTypes(){var t=this;return(0,b.Z)(function*(){t.LodingAgent=!0;const i=t.agentTypes;t.agentTypeList=yield Promise.all(i.map(function(){var a=(0,b.Z)(function*(r){return yield t.getAgentTypeDetails(r)});return function(r){return a.apply(this,arguments)}}())),t.LodingAgent=!1,t.getAllAgents()})()}updateSelectedOptions(t,i){this.selectedFilters[t]=i.target.checked,this.selectAllChecked=this.agentTypes.every(r=>this.selectedFilters[r]),this.filteredAgents=this.filterAgents()}filterAgents(){const t=Object.keys(this.selectedFilters).filter(i=>this.selectedFilters[i]);return 0===t.length?[]:this.allAgents.filter(i=>t.includes(i.userAgentType))}filterAgent(){if(""===this.searchQuery){const t=this.filterAgents();this.filteredAgents=this.paginateAgents(t),this.calculatePagination()}else this.filteredAgents=this.allAgents.filter(t=>t.data?.the_user?.user_data?.primary_email.toLowerCase().includes(this.searchQuery.toLowerCase()))}getAllAgents(){var t=this;return(0,b.Z)(function*(){t.LodingAgent=!0;try{const i=t.agentTypeList.map(function(){var l=(0,b.Z)(function*(c){const d=yield t.getAgentList(c);if(!d||!Array.isArray(d))return[];const _=t.extractAgentType(c),h=c.id||"";return d.map(C=>({...C,userAgentType:_,compositionId:h}))});return function(c){return l.apply(this,arguments)}}()),a=yield Promise.all(i);t.allAgents=a.flat();const r=t.filterAgents();t.filteredAgents=t.paginateAgents(r),t.calculatePagination()}catch(i){console.error("Error fetching agents:",i)}finally{t.LodingAgent=!1}})()}paginateAgents(t){const i=(this.currentPage-1)*this.pageSize;return t.slice(i,i+this.pageSize)}calculatePagination(){if(this.totalPages=Math.ceil(this.allAgents.length/this.pageSize),this.totalPages<=3)this.pageNumbers=Array.from({length:this.totalPages},(t,i)=>i+1);else{const t=Math.max(this.currentPage-2,1),i=Math.min(this.currentPage+2,this.totalPages);this.pageNumbers=[],t>1&&(this.pageNumbers.push(1),t>2&&this.pageNumbers.push("..."));for(let a=t;a<=i;a++)this.pageNumbers.push(a);i<this.totalPages&&(i<this.totalPages-1&&this.pageNumbers.push("..."),this.pageNumbers.push(this.totalPages))}}};let o=s;return s.\u0275fac=function(i){return new(i||s)(e.Y36(x.e),e.Y36(v.ux),e.Y36(y.FF),e.Y36(w.o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-agents"]],decls:41,vars:8,consts:[[1,"container"],[1,"header","d-flex","align-items-center","justify-content-between","mb-4","mt-4"],[1,"header-title"],[1,"controls","d-flex","align-items-center","gap-3"],[1,"form-group"],["for","search",1,"form-label","fw-semibold"],["type","text","id","search","placeholder","Search by email",1,"form-control",3,"ngModel","ngModelChange"],["tabindex","0",1,"form-group","dropdown-wrapper",3,"click","keyup"],["for","filter",1,"form-label","fw-semibold"],[1,"form-select","text-start"],["class","dropdown-menu",3,"click",4,"ngIf"],[1,"agent-table","card"],[1,"table"],["scope","col"],["class","text-center",4,"ngIf","ngIfElse"],["class","text-center",4,"ngIf"],["data",""],["aria-label","Page navigation",1,"pagination-wrapper"],[1,"pagination"],["class","page-item",4,"ngIf"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"dropdown-menu",3,"click"],[1,"dropdown-content"],[1,"dropdown-item"],["type","checkbox","name","selectAll",3,"ngModel","ngModelChange","change"],["class","dropdown-item",4,"ngFor","ngForOf"],["type","checkbox",3,"name","ngModel","ngModelChange","change"],[1,"text-center"],["colspan","6"],[1,"spinner"],["class","agent-row",4,"ngFor","ngForOf"],[1,"agent-row"],[1,"agent-info","d-flex","align-items-center","gap-2"],[4,"ngIf","ngIfElse"],["defaultProfileImg",""],[3,"routerLink"],[1,"actions","d-flex","gap-2"],["tabindex","0","aria-label","View Agent Details",1,"btn","icon-button","btn-view",3,"click","keyup"],[1,"material-symbols-outlined"],["ngbTooltip","Remove from Agent","tabindex","0","aria-label","Remove Agent",1,"btn","icon-button","btn-remove",3,"click","keyup"],[1,"agent-avatar",3,"src","alt"],["src","https://boomconcole.com/freeschema/6aa4c5b4-7492-4364-a1ad-5843db46b41e_small.webp","alt","Profile Image",1,"agent-avatar"],[1,"page-item"],["role","button","tabindex","0","aria-label","Previous",1,"page-link",3,"click","keyup.enter"],["aria-hidden","true"],[1,"page-item",3,"ngClass"],["role","button","tabindex","0",1,"page-link",3,"click","keyup.enter"],["role","button","tabindex","0","aria-label","Next",1,"page-link",3,"click","keyup.enter"]],template:function(i,a){if(1&i&&(e.TgZ(0,"div",0)(1,"header",1)(2,"h2",2),e._uU(3,"Users as Agents"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Search"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(l){return a.searchQuery=l})("ngModelChange",function(){return a.filterAgent()}),e.qZA()(),e.TgZ(9,"div",7),e.NdJ("click",function(){return a.toggleDropdown()})("keyup",function(){return a.toggleDropdown()}),e.TgZ(10,"label",8),e._uU(11,"Filter"),e.qZA(),e.TgZ(12,"button",9),e._uU(13,"Filter By Agent Type"),e.qZA(),e.YNc(14,re,6,2,"div",10),e.qZA()()(),e.TgZ(15,"section",11)(16,"table",12)(17,"thead")(18,"tr")(19,"th",13),e._uU(20,"#"),e.qZA(),e.TgZ(21,"th",13),e._uU(22,"Agent Name"),e.qZA(),e.TgZ(23,"th",13),e._uU(24,"Email"),e.qZA(),e.TgZ(25,"th",13),e._uU(26,"Agent Type"),e.qZA(),e.TgZ(27,"th",13),e._uU(28,"Created At"),e.qZA(),e.TgZ(29,"th",13),e._uU(30,"Actions"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,se,4,0,"tr",14),e.YNc(33,le,3,0,"tr",15),e.YNc(34,ge,1,1,"ng-template",null,16,e.W1O),e.qZA()(),e.TgZ(36,"nav",17)(37,"ul",18),e.YNc(38,_e,4,0,"li",19),e.YNc(39,me,3,4,"li",20),e.YNc(40,fe,4,0,"li",19),e.qZA()()()()),2&i){const r=e.MAs(35);e.xp6(8),e.Q6J("ngModel",a.searchQuery),e.xp6(6),e.Q6J("ngIf",a.dropdownOpen),e.xp6(18),e.Q6J("ngIf",a.LodingAgent)("ngIfElse",r),e.xp6(1),e.Q6J("ngIf",!a.LodingAgent&&0===a.filteredAgents.length),e.xp6(5),e.Q6J("ngIf",a.currentPage>1),e.xp6(1),e.Q6J("ngForOf",a.pageNumbers),e.xp6(1),e.Q6J("ngIf",a.currentPage<a.totalPages)}},dependencies:[f.mk,f.sg,f.O5,T.rH,y._L,p.Fj,p.Wl,p.JJ,p.On,f.rS],styles:['.header[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border-radius:12px;box-shadow:0 2px 8px #0000000d}.header-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin:0;color:#1e293b}.controls[_ngcontent-%COMP%]{flex-wrap:wrap}.form-group[_ngcontent-%COMP%]{min-width:200px;position:relative}.form-label[_ngcontent-%COMP%]{font-size:.875rem;color:#475569;margin-bottom:.25rem}.form-control[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #e2e8f0;border-radius:8px;font-size:.875rem;transition:border-color .2s ease,box-shadow .2s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f633;outline:none}.dropdown-wrapper[_ngcontent-%COMP%]{position:relative}.form-select[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #e2e8f0;border-radius:8px;background-color:#fff;font-size:.875rem;color:#64748b;cursor:pointer;text-align:left;appearance:none}.dropdown-wrapper[_ngcontent-%COMP%]:focus-within   .dropdown-menu[_ngcontent-%COMP%], .dropdown-wrapper[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}.dropdown-menu[_ngcontent-%COMP%]{display:none;position:absolute;top:calc(100% + .25rem);left:0;width:100%;background-color:#fff;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 4px 12px #0000001a;padding:.5rem;z-index:1000}.dropdown-content[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.dropdown-item[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.875rem;color:#1e293b;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;overflow:hidden;margin-top:1.5rem}.table[_ngcontent-%COMP%]{margin-bottom:0;width:100%}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#fff}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#475569;background-color:#f8fafc;padding:1rem;border-bottom:2px solid #e2e8f0}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;font-size:.875rem}.agent-info[_ngcontent-%COMP%]{display:flex;align-items:center}.agent-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid #e2e8f0;transition:border-color .2s ease}.agent-avatar[_ngcontent-%COMP%]:hover{border-color:#3b82f6}.agent-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1e293b;text-decoration:none;font-weight:500}.agent-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#3b82f6}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.icon-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;padding:.5rem;cursor:pointer;transition:all .2s ease;text-decoration:none;border-radius:4px}.btn-view[_ngcontent-%COMP%]{color:#64748b}.btn-view[_ngcontent-%COMP%]:hover{color:#3b82f6;background-color:#3b82f61a}.btn-remove[_ngcontent-%COMP%]{color:#ef4444}.btn-remove[_ngcontent-%COMP%]:hover{color:#fff;background-color:#ef4444}.spinner[_ngcontent-%COMP%]{font-size:1rem;color:#64748b;display:inline-flex;align-items:center;gap:.5rem}.spinner[_ngcontent-%COMP%]:before{content:"";width:16px;height:16px;border:2px solid #64748b;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.pagination-wrapper[_ngcontent-%COMP%]{padding:1.5rem}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem}.page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #e2e8f0;border-radius:8px;color:#3b82f6;background-color:#fff;cursor:pointer;transition:all .2s ease;text-decoration:none}.page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#3b82f6;border-color:#3b82f6;color:#fff}.page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover:not(.active){background-color:#f1f5f9}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.controls[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1rem}.form-group[_ngcontent-%COMP%]{width:100%}.table[_ngcontent-%COMP%]{font-size:.75rem}.agent-avatar[_ngcontent-%COMP%]{width:32px;height:32px}.actions[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}']}),o})();var be=m(6613);function ye(o,s){1&o&&(e.TgZ(0,"div",11),e._UZ(1,"div",12),e.qZA())}function Ce(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"a",18),e._uU(4),e.qZA(),e.TgZ(5,"span",19),e._uU(6),e.qZA()(),e.TgZ(7,"div",20)(8,"div",21)(9,"span",22),e._uU(10,"schedule"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.ALo(13,"UTCToLocalTime"),e.qZA()(),e.TgZ(14,"div",21)(15,"span",22),e._uU(16,"mail"),e.qZA(),e.TgZ(17,"span"),e._uU(18),e.qZA()()(),e.TgZ(19,"p",23),e._uU(20),e.qZA()(),e.TgZ(21,"div",24)(22,"button",25),e.NdJ("click",function(){const a=e.CHM(n).$implicit,r=e.oxw(2);return e.KtG(r.approveAgentRequest(a))}),e.TgZ(23,"span",22),e._uU(24,"check"),e.qZA()(),e.TgZ(25,"button",26),e.NdJ("click",function(){const a=e.CHM(n).$implicit,r=e.oxw(2);return e.KtG(r.rejectAgentRequest(a))}),e.TgZ(26,"span",22),e._uU(27,"close"),e.qZA()()()()}if(2&o){const n=s.$implicit;e.xp6(3),e.Q6J("routerLink","/bm/"+(null==n?null:n.userConceptId)),e.xp6(1),e.hij(" ",n.name," "),e.xp6(2),e.hij(" ",n.agentType," "),e.xp6(6),e.Oqu(e.lcZ(13,6,n.timestamp)),e.xp6(6),e.Oqu(n.email),e.xp6(2),e.Oqu(n.detail)}}function xe(o,s){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,Ce,28,8,"div",14),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.agentRequests)}}function Ae(o,s){1&o&&(e.TgZ(0,"div",27)(1,"span",22),e._uU(2,"inbox"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"No Agent Requests Available"),e.qZA()())}function Te(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"div",24)(1,"button",25),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.approveAffiliateClaim(i))}),e.TgZ(2,"span",22),e._uU(3,"check"),e.qZA()(),e.TgZ(4,"button",26),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.rejectAffiliateClaim(i))}),e.TgZ(5,"span",22),e._uU(6,"close"),e.qZA()()()}}function ve(o,s){if(1&o&&(e.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"a",28),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"titlecase"),e.qZA()(),e.TgZ(8,"div",20)(9,"div",21)(10,"span",22),e._uU(11,"schedule"),e.qZA(),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"date"),e.qZA()(),e.TgZ(15,"div",21)(16,"span",22),e._uU(17,"mail"),e.qZA(),e.TgZ(18,"span"),e._uU(19),e.qZA()(),e.TgZ(20,"div",21)(21,"span",22),e._uU(22,"person"),e.qZA(),e.TgZ(23,"span"),e._uU(24),e.qZA()()(),e.TgZ(25,"p",23),e._uU(26," Affiliate claim request pending review. "),e.qZA()(),e.YNc(27,Te,7,0,"div",29),e.qZA()),2&o){const n=s.$implicit;e.xp6(3),e.MGl("href","/bm/",n.entityId,"",e.LSH),e.xp6(1),e.Oqu(n.name),e.xp6(1),e.Gre("agent-type-badge ","pending"===n.status?"pending":"affiliated",""),e.xp6(1),e.hij(" ",e.lcZ(7,10,n.status)," "),e.xp6(7),e.Oqu(e.xi3(14,12,n.created_on,"MMM dd, yyyy, hh:mm:ss a")),e.xp6(6),e.Oqu(n.email),e.xp6(5),e.hij("Requested by: ",null==n?null:n.requested_by,""),e.xp6(3),e.Q6J("ngIf","pending"===n.status)}}function we(o,s){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,ve,28,15,"div",14),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.claimRequest)}}function Ze(o,s){1&o&&(e.TgZ(0,"div",30),e._uU(1,"No affiliate claims requested yet."),e.qZA())}let qe=(()=>{const s=class{constructor(t,i,a){this.itemService=t,this.snackbarService=i,this._auth=a,this.agentRequests=[],this.agentRequestUpdating=!1,this.agentTypeList=[],this.emailTemplates=[],this.activeTab="agent-requests"}ngOnInit(){this.fetchAgentRequests(),this.fetchAgentTypes(),this.getAffiliateClaimRequests()}setActiveTab(t){this.activeTab=t}fetchAgentRequests(){this.itemService.getAll("agent_request_info").subscribe({next:t=>{this.agentRequests=this.processAgentRequests(t?.data)},error:t=>this.handleError(t,"Failed to fetch agent requests")})}processAgentRequests(t){return t.map(r=>{const l=r?.data?.agent_request_info?.agentType,c=this.formatAgentType(l),d=r?.data?.agent_request_info?.timestamp;return{...r?.data?.agent_request_info,agentType:c,timestamp:d,compositionId:r.id}}).filter(r=>!(!r.agentType||!r.email||r.isApproved||r.isRejected||!r.timestamp||isNaN(new Date(r.timestamp).getTime()))).sort((r,l)=>{const c=new Date(r.timestamp),d=new Date(l.timestamp),_=c.getTime();return d.getTime()-_})}formatAgentType(t){return t?.split(/(?=[A-Z])/).map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")||""}fetchAgentTypes(){var t=this;return(0,b.Z)(function*(){const a=yield Promise.all(["seller_agent","sellerAgent_agent","listingAgent_agent","buyerAgent_agent","buyer_agent","marketingAgent_agent"].map(r=>t.getAgentTypeDetails(r)));t.agentTypeList=a.filter(r=>null!==r&&void 0!==r.id&&Object.keys(r.data).length>0)})()}getAgentTypeDetails(t){return new Promise(i=>{this.itemService.getAll(t).subscribe({next:a=>{i(a.data[0]||{})}})})}approveAgentRequest(t){this.agentRequestUpdating=!0;const i=this.normalizeAgentTypeName(t.agentType),a=this.agentTypeList.find(l=>Object.keys(l.data)[0]===i);if(!this.validateRequest(t,a))return;const r={compositionId1:Number(t.userConceptId),compositionId2:a.id,linker:"isAgent"};this.itemService.createSemanticConnection(r).subscribe({next:()=>this.updateAgentRequest(t,"isApproved"),error:l=>this.handleError(l,"Failed to approve request")})}rejectAgentRequest(t){this.agentRequestUpdating=!0,this.updateAgentRequest(t,"isRejected")}updateAgentRequest(t,i){const a=this.prepareRequestUpdate(t,i);this.itemService.updatev2(a).subscribe({next:()=>{this.handleUpdateSuccess(t,i,a.id)},error:r=>this.handleError(r,"Failed to update request"),complete:()=>this.agentRequestUpdating=!1})}prepareRequestUpdate(t,i){const a={...t};return delete a.compositionId,delete a.isRequested,a[i]=!0,a.agentType=this.normalizeAgentTypeName(t.agentType),{id:t.compositionId,agent_request_info:a}}handleUpdateSuccess(t,i,a){var r=this;return(0,b.Z)(function*(){r.snackbarService.openSnackBar(`Request is ${"isApproved"===i?"approved":"rejected"} Successfully!`,"success"),yield r.sendUpdateAgentRequestEmail(t,i),r.createAgentConnection(t.userConceptId,a),r.fetchAgentRequests()})()}createAgentConnection(t,i){const a={compositionId1:Number(t),compositionId2:Number(i),linker:"isAgent"};this.itemService.createSemanticConnection(a).subscribe()}sendUpdateAgentRequestEmail(t,i){var a=this;return(0,b.Z)(function*(){const r=a.prepareEmailData(t),l=yield"isApproved"===i?a.getEmailTemplatesApprove(r):a.getEmailTemplatesRejected(r),c={heading:a.getEmailHeading(i),body:a.createEmailTemplate(l,r),toAddress:t.email};a.itemService.sendEmail(c).subscribe({next:()=>a.notifyRequestUpdate(t,i),error:d=>a.handleError(d,"Failed to send email")})})()}prepareEmailData(t){return{username:t.name,agentType:t.agentType,mentorURL:`${window.location.protocol}//${window.location.hostname}/marketing`}}getEmailHeading(t){return"isApproved"===t?"Congratulations! You are a BoomConsole Agent now!":"BoomConsole: Agent request status update!"}getEmailTemplatesApprove(t){return this.fetchEmailTemplate("agent_request_approve",t)}getEmailTemplatesRejected(t){return this.fetchEmailTemplate("agent_request_reject",t)}fetchEmailTemplate(t,i){return new Promise((a,r)=>{this.itemService.listAllWithoutAuthWithLinker([{type:"email_template",listLinkers:["email_template_linker_s"],inpage:10,page:1,logic:"or",filterSearches:[]}]).subscribe({next:c=>{this.emailTemplates=c.filter(h=>h.email_template?.data?.[t]);const _=this.createEmailTemplate(this.emailTemplates[0].email_template.data[t].data.template,i);a(_)},error:c=>r(c)})})}createEmailTemplate(t,i){let a=t.replace("{{{username}}}",i.username);return a=a.replace("{{{agentType}}}",i.agentType),a=a.replace("{{{mentorURL}}}",`<a href="${i.mentorURL}">${i.mentorURL}</a>`),`\n    <!DOCTYPE html>\n<html>\n\n<head>\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n  <style>\n    @media only screen and(max-width: 620px) {\n      table.body h1 {\n        font-size: 28px!important;\n        margin-bottom: 10px!important\n      }\n\n      table.body a,\n      table.body ol,\n      table.body p,\n      table.body span,\n      table.body td,\n      table.body ul {\n        font-size: 16px!important\n      }\n\n      table.body.article,\n      table.body.wrapper {\n        padding: 10px!important\n      }\n\n      table.body.content {\n        padding: 0!important\n      }\n\n      table.body.container {\n        padding: 0!important;\n        width: 100%!important\n      }\n\n      table.body.main {\n        border-left-width: 0!important;\n        border-radius: 0!important;\n        border-right-width: 0!important\n      }\n\n      table.body.btn table {\n        width: 100%!important\n      }\n\n      table.body.btn a {\n        width: 100%!important\n      }\n\n      table.body.img-responsive {\n        height: auto!important;\n        max-width: 100%!important;\n        width: auto!important\n      }\n    }\n\n    @media all {\n      .ExternalClass {\n        width: 100%\n      }\n\n      .ExternalClass,\n      .ExternalClass div,\n      .ExternalClass font,\n      .ExternalClass p,\n      .ExternalClass span,\n      .ExternalClass td {\n        line-height: 100%\n      }\n\n      .apple-link a {\n        color: inherit!important;\n        font-family: inherit!important;\n        font-size: inherit!important;\n        font-weight: inherit!important;\n        line-height: inherit!important;\n        text-decoration: none!important\n      }\n\n      #MessageViewBody a {\n        color: inherit;\n        text-decoration: none;\n        font-size: inherit;\n        font-family: inherit;\n        font-weight: inherit;\n        line-height: inherit\n      }\n\n      .btn-primary table td:hover {\n        background-color: #34495e!important\n      }\n\n      .btn-primary a:hover {\n        background-color: #34495e!important;\n        border-color: #34495e!important\n      }\n    }\n  </style>\n</head>\n\n<body style="background-color:#f6f6f6;font-family:sans-serif;-webkit-font-smoothing:antialiased;font-size:14px;line-height:1.4;margin:0;padding:0;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%">\n  <table role="presentation" border="0" cellpadding="0" cellspacing="0" class="body" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;background-color:#f6f6f6;width:100%" width="100%" bgcolor="#f6f6f6">\n    <tr>\n      <td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">&nbsp;</td>\n      <td class="container" style="font-family:sans-serif;font-size:14px;vertical-align:top;display:block;max-width:580px;padding:10px;width:580px;margin:0 auto" width="580" valign="top">\n        <div class="content" style="box-sizing:border-box;display:block;margin:0 auto;max-width:580px;padding:10px">\n          <table role="presentation" class="main" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;background:#fff;border-radius:3px;width:100%" width="100%">\n            <tr>\n              <td class="wrapper" style="font-family:sans-serif;font-size:14px;vertical-align:top;box-sizing:border-box;padding:20px" valign="top">\n                <table role="presentation" border="0" cellpadding="0" cellspacing="0" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;width:100%" width="100%">\n                  <tr>\n                    ${a}\n                  </tr>\n                </table>\n              </td>\n            </tr>\n          </table>\n          <div class="footer" style="clear:both;margin-top:10px;text-align:center;width:100%">\n            <table role="presentation" border="0" cellpadding="0" cellspacing="0" style="border-collapse:separate;mso-table-lspace:0;mso-table-rspace:0;width:100%" width="100%">\n              <tr>\n                <td class="content-block" style="font-family:sans-serif;font-weight:700;vertical-align:top;padding-bottom:5px;padding-top:10px;color:#999;font-size:12px;text-align:center" valign="top" align="center">\n                  <span class="apple-link" style="color:#999;font-size:12px;text-align:center">Boomconsole</span>\n                </td>\n              </tr>\n              <tr>\n                <td class="content-block" style="font-family:sans-serif;vertical-align:top;padding-bottom:10px;padding-top:5px;color:#999;font-size:12px;text-align:center" valign="top" align="center">\n                  <span class="apple-link" style="color:#999;font-size:12px;text-align:center"><a href="https://boomconsole.com/" target="_blank">boomconsole.com</a></span>\n                </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n      </td>\n      <td style="font-family:sans-serif;font-size:14px;vertical-align:top" valign="top">&nbsp;</td>\n    </tr>\n  </table>\n</body>\n</html>\n    `}notifyRequestUpdate(t,i){const a={userConceptIds:[t.userConceptId],fs_notification:{title:"isApproved"===i?"Congratulations! Your agent request is approved!":"Sorry! Your agent request is not approved!",timestamp:(new Date).toISOString()}};this.itemService.bulkNotification(a).subscribe()}normalizeAgentTypeName(t){const[i,a]=t.split(" ");return`${i.toLowerCase()}${a||""}_agent`}validateRequest(t,i){return!(!t?.userConceptId||!i?.id)||(this.agentRequestUpdating=!1,this.snackbarService.openSnackBar("Invalid request data!","warning"),!1)}handleError(t,i){console.error(t),this.agentRequestUpdating=!1,this.snackbarService.openSnackBar(i,"warning")}getAffiliateClaimRequests(){return new Promise(t=>{const i=new g.LtL;i.typeConnection="the_entity_s_affiliate_claim",i.reverse=!0,i.name="affiliate",i.selectors=["the_entity_email"];const a=new g.LtL;a.typeConnection="the_affiliate_claim_user",a.name="user",a.selectors=["the_entity_firstname","the_entity_lastname","the_entity_email"];const r=new g.LtL;r.type="the_affiliate_claim",r.name="top",r.selectors=["the_affiliate_claim_status","the_affiliate_claim_user"],r.freeschemaQueries=[a,i],r.outputFormat=g.xY7,(0,g.og0)(r,"").subscribe(l=>{const c=l?.map(d=>{const _=d?.data?.the_affiliate_claim?.the_affiliate_claim_status?.data?.the_status,h=d?.data?.the_affiliate_claim?.the_affiliate_claim_user?.data?.the_entity?.the_entity_email?.data?.the_email,A=d?.data?.the_affiliate_claim?.the_affiliate_claim_user?.id,q=d?.created_on,M=d?.data?.the_affiliate_claim?.the_entity_s_affiliate_claim_reverse?.[0]?.data?.the_entity?.the_entity_email?.data?.the_email,O=d?.data?.the_affiliate_claim?.the_entity_s_affiliate_claim_reverse?.[0]?.id;return{id:d?.id,entityId:A,name:`${d?.data?.the_affiliate_claim?.the_affiliate_claim_user?.data?.the_entity?.the_entity_firstname?.data?.the_firstname} ${d?.data?.the_affiliate_claim?.the_affiliate_claim_user?.data?.the_entity?.the_entity_lastname?.data?.the_lastname}`,email:h,status:_,created_on:q,requested_by:M,requestedById:O}}).filter(d=>d?.entityId)||[];this.claimRequest=c,t(c)})})}checkAlreadyAnAffiliateOfOther(t){return new Promise(i=>{const a=new g.LtL;a.typeConnection="the_entity_s_affiliate_by",a.isOldConnectionType=!0,a.name="entity";const r=new g.LtL;r.typeConnection="the_entity_s_affiliate_s",r.reverse=!0,r.name="entity1";const l=new g.LtL;l.typeConnection="the_entity_s_friend_by",l.isOldConnectionType=!0,l.name="entity4";const c=new g.LtL;c.typeConnection="the_entity_s_friend_s",c.reverse=!0,c.name="entity2";const d=new g.LtL;d.conceptIds=[parseInt(t)],d.name="top",d.freeschemaQueries=[a,l,r,c],d.outputFormat=g.xY7,(0,g.og0)(d,"").subscribe(_=>{i({isAffiliate:!!_?.[0]?.data?.the_entity?.the_entity_s_affiliate_by?.[0]?.id||!!_?.[0]?.data?.the_entity?.the_entity_s_affiliate_s_reverse?.[0].id,isFriend:!!_?.[0]?.data?.the_entity?.the_entity_s_friend_by?.[0]?.id||!!_?.[0]?.data?.the_entity?.the_entity_s_friend_s_reverse?.[0]?.id})})})}approveAffiliateClaim(t){var i=this;return(0,b.Z)(function*(){const a=i._auth.loadFromLocalStorage().theUserId;try{const r=yield i.checkAlreadyAnAffiliateOfOther(t?.entityId);if(r.isAffiliate||r.isFriend)return void i.snackbarService.openSnackBar("This user is already an affiliate of others.","warning");yield(0,g.eu4)(t?.id,"the_affiliate_claim_status");const l=yield(0,g.J0M)(Number(t?.id)),c=yield(0,g.J0M)(Number(t?.requestedById)),d=yield(0,g.J0M)(Number(t?.entityId)),_=yield(0,g.Fsb)("status","affiliated",!1,Number(a),4,999);yield(0,g.G$0)(l,_,"status"),yield(0,g.G$0)(c,d,"s_affiliate_s"),yield(0,g.G$0)(c,d,"s_friend_s"),yield g.smK.SyncDataOnline(),i.getAffiliateClaimRequests()}catch(r){console.error(r)}})()}rejectAffiliateClaim(t){var i=this;return(0,b.Z)(function*(){const a=i._auth.loadFromLocalStorage().theUserId;try{yield(0,g.eu4)(t?.id,"the_affiliate_claim_status");const r=yield(0,g.J0M)(Number(t?.id)),l=yield(0,g.Fsb)("status","rejected",!1,Number(a),4,999);yield(0,g.G$0)(r,l,"status"),yield g.smK.SyncDataOnline(),i.getAffiliateClaimRequests()}catch(r){console.error(r)}})()}};let o=s;return s.\u0275fac=function(i){return new(i||s)(e.Y36(x.e),e.Y36(w.o),e.Y36(k.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-agent-requests"]],decls:19,vars:13,consts:[[1,"page-card"],[1,"card-header"],[1,"tabs"],[1,"tab-button",3,"click"],[1,"card-content"],["class","loading-overlay",4,"ngIf"],["id","agent-requests",1,"tab-content","active"],["class","agent-requests-grid",4,"ngIf","ngIfElse"],["noRequests",""],["id","affiliate-claims",1,"tab-content"],["noClaims",""],[1,"loading-overlay"],[1,"spinner"],[1,"agent-requests-grid"],["class","request-card",4,"ngFor","ngForOf"],[1,"request-card"],[1,"request-info"],[1,"request-header"],[1,"request-name",3,"routerLink"],[1,"agent-type-badge"],[1,"request-meta"],[1,"meta-item"],[1,"material-symbols-outlined"],[1,"request-detail"],[1,"request-actions"],[1,"action-btn","approve",3,"click"],[1,"action-btn","reject",3,"click"],[1,"no-requests"],[1,"request-name",3,"href"],["class","request-actions",4,"ngIf"],[1,"no-data"]],template:function(i,a){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Requests Management"),e.qZA(),e.TgZ(4,"div",2)(5,"button",3),e.NdJ("click",function(){return a.setActiveTab("agent-requests")}),e._uU(6," Agent Requests "),e.qZA(),e.TgZ(7,"button",3),e.NdJ("click",function(){return a.setActiveTab("affiliate-claims")}),e._uU(8," Affiliate Claims Requests "),e.qZA()()(),e.TgZ(9,"div",4),e.YNc(10,ye,2,0,"div",5),e.TgZ(11,"div",6),e.YNc(12,xe,2,1,"div",7),e.YNc(13,Ae,5,0,"ng-template",null,8,e.W1O),e.qZA(),e.TgZ(15,"div",9),e.YNc(16,we,2,1,"div",7),e.YNc(17,Ze,2,0,"ng-template",null,10,e.W1O),e.qZA()()()),2&i){const r=e.MAs(14),l=e.MAs(18);e.xp6(5),e.ekj("active","agent-requests"===a.activeTab),e.xp6(2),e.ekj("active","affiliate-claims"===a.activeTab),e.xp6(3),e.Q6J("ngIf",a.agentRequestUpdating),e.xp6(1),e.ekj("active","agent-requests"===a.activeTab),e.xp6(1),e.Q6J("ngIf",a.agentRequests.length)("ngIfElse",r),e.xp6(3),e.ekj("active","affiliate-claims"===a.activeTab),e.xp6(1),e.Q6J("ngIf",null==a.claimRequest?null:a.claimRequest.length)("ngIfElse",l)}},dependencies:[f.sg,f.O5,T.rH,f.rS,f.uU,be.u],styles:[".page-card[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.card-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #eee}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#333}.tabs[_ngcontent-%COMP%]{margin-top:1rem;display:flex;gap:.5rem}.tab-button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;background:#f0f0f0;border-radius:4px;cursor:pointer;font-size:1rem;transition:background-color .2s ease,color .2s ease}.tab-button.active[_ngcontent-%COMP%]{background:#3498db;color:#fff}.tab-button[_ngcontent-%COMP%]:hover:not(.active){background:#e0e0e0}.card-content[_ngcontent-%COMP%]{position:relative;padding:1.5rem}.tab-content[_ngcontent-%COMP%]{display:none}.tab-content.active[_ngcontent-%COMP%]{display:block}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.1);display:flex;justify-content:center;align-items:center;z-index:10}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.agent-requests-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}.request-card[_ngcontent-%COMP%]{background:#f9f9f9;border-radius:6px;padding:1.5rem;display:flex;flex-direction:column;transition:transform .2s ease,box-shadow .2s ease}.request-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.request-info[_ngcontent-%COMP%]{flex:1}.request-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem;flex-wrap:wrap;gap:.5rem}.request-name[_ngcontent-%COMP%]{font-size:1.25rem;color:#2c3e50;text-decoration:none;font-weight:600}.request-name[_ngcontent-%COMP%]:hover{color:#3498db;text-decoration:underline}.agent-type-badge[_ngcontent-%COMP%]{background:#eef7ff;color:#2980b9;padding:.25rem .75rem;border-radius:12px;font-size:.875rem;font-weight:500}.request-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem;color:#666;font-size:.875rem}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.meta-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:1rem;color:#888}.request-detail[_ngcontent-%COMP%]{margin:0;color:#555;font-size:.9375rem;line-height:1.5}.request-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1rem;justify-content:flex-end}.action-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:transform .2s ease,background-color .2s ease}.action-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.action-btn.approve[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.action-btn.reject[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.no-requests[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 0;color:#777}.no-requests[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:#ddd}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.page-card[_ngcontent-%COMP%]{margin:1rem}.agent-requests-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.request-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.request-actions[_ngcontent-%COMP%]{justify-content:center}.tabs[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}}@media (max-width: 480px){.card-header[_ngcontent-%COMP%], .card-content[_ngcontent-%COMP%], .request-card[_ngcontent-%COMP%]{padding:1rem}.request-name[_ngcontent-%COMP%]{font-size:1.125rem}}"]}),o})();function Me(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&o){const n=s.$implicit,t=s.index;e.xp6(2),e.Oqu(t+1),e.xp6(2),e.Oqu(null==n?null:n.agentType),e.xp6(2),e.hij("",null==n?null:n.rate,"%"),e.xp6(2),e.Oqu(null==n?null:n.detail)}}function Oe(o,s){1&o&&(e.TgZ(0,"tr")(1,"td",32),e._uU(2,"No agent types available"),e.qZA()())}function Pe(o,s){1&o&&(e.TgZ(0,"small",33),e._uU(1," Please select an agent type "),e.qZA())}function ke(o,s){1&o&&(e.TgZ(0,"small",33),e._uU(1," Please enter a valid rate "),e.qZA())}function Ue(o,s){1&o&&(e.TgZ(0,"small",33),e._uU(1," Please enter details "),e.qZA())}function Ie(o,s){1&o&&(e.TgZ(0,"button",34),e._UZ(1,"span",35),e._uU(2," Updating... "),e.qZA())}function Ne(o,s){1&o&&(e.TgZ(0,"button",36),e._uU(1," Update Agent "),e.qZA())}let Fe=(()=>{const s=class{get rate(){return this.createAgentForm.get("rate")}get agentType(){return this.createAgentForm.get("agentType")}get detail(){return this.createAgentForm.get("detail")}constructor(t,i,a,r,l){this.itemService=t,this.formBuilder=i,this.snackBar=a,this.modalService=r,this._snackbarService=l,this.isAgentFormUpdating=!1,this.agentTypeList=[],this.agentTypeDetailList=[],this.createAgentForm=this.formBuilder.group({rate:new p.NI(0,[p.kI.required]),agentType:new p.NI("",[p.kI.required]),detail:new p.NI("",[p.kI.required])})}ngOnInit(){this.listAgentTypes()}listAgentTypes(){var t=this;return(0,b.Z)(function*(){const i=["seller_agent","sellerAgent_agent","listingAgent_agent","buyerAgent_agent","buyer_agent","marketingAgent_agent"];t.agentTypeList=yield Promise.all(i.map(function(){var l=(0,b.Z)(function*(c){return yield t.getAgentTypeDetails(c)});return function(c){return l.apply(this,arguments)}}()));const r=[...t.agentTypeList].map(l=>{if(!Object.keys(l).length)return{};{const c=Object.keys(l?.data)[0];if(i.includes(c))return l.data[c]}});t.agentTypeDetailList=r.filter(l=>{if(Object.keys(l).length>0){const d=l?.agentType?.split(/(?=[A-Z])/)?.map(_=>_[0].toUpperCase()+_.slice(1)).join(" ");return d&&(l.agentType=d),l}})})()}getAgentTypeDetails(t){return new Promise(i=>{this.itemService.getAll(t).subscribe({next:a=>{i(a.data.length?a.data[0]:{})}})})}submitAgentTypeForm(){if(!this.createAgentForm.valid)return void(this.isAgentFormUpdating=!1);this.isAgentFormUpdating=!0;const t=this.createAgentForm.value,i=`${t.agentType}_agent`;if(this.agentTypeList.map(r=>Object.keys(r).length?Object.keys(r.data)[0]:"").includes(i)){const r=this.agentTypeList.find(c=>(Object.keys(c).length?Object.keys(c.data)[0]:"")===i),l={[i]:{rate:t.rate,agentType:t.agentType,detail:t.detail,timestamp:(new Date).toISOString()},id:r.id};this.itemService.updatev2(l).subscribe({next:()=>{this.isAgentFormUpdating=!1,this.createAgentForm.reset(),this.listAgentTypes(),this._snackbarService.openSnackBar("Agent Type is updated Successfully!","success")},error:c=>{console.error(c)},complete:()=>{}})}else{const r={[i]:{rate:t.rate,agentType:t.agentType,detail:t.detail,timestamp:(new Date).toISOString()}};this.itemService.create(r).subscribe({next:()=>{this.isAgentFormUpdating=!1,this.createAgentForm.reset(),this._snackbarService.openSnackBar("Agent Type is added Successfully!","success"),this.listAgentTypes()},error:l=>{console.error(l),this._snackbarService.openSnackBar("Something went wrong, Please try again later.","error")},complete:()=>{}})}}};let o=s;return s.\u0275fac=function(i){return new(i||s)(e.Y36(x.e),e.Y36(p.qu),e.Y36(v.ux),e.Y36(y.FF),e.Y36(w.o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-agent-types"]],decls:69,vars:8,consts:[[1,"agent-types-container"],[1,"section-title"],[1,"agent-types-grid"],[1,"agent-types-card"],[1,"card-header"],[1,"table-container"],[1,"agent-types-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"agent-form",3,"formGroup","ngSubmit"],["createAgentId","ngForm"],[1,"form-grid"],[1,"form-group"],["for","agentType"],[1,"required"],["formControlName","agentType","id","agentType",1,"form-select"],["value","","disabled",""],["value","marketingAgent"],["value","seller"],["value","sellerAgent"],["value","listingAgent"],["value","buyerAgent"],["value","buyer"],["class","error-message",4,"ngIf"],["for","rate"],["type","number","id","rate","formControlName","rate","placeholder","Enter rate (%)","required","",1,"form-input"],[1,"form-group","full-width"],["for","detail"],["id","detail","formControlName","detail","placeholder","Write agent details...","rows","4",1,"form-textarea"],[1,"form-actions"],["requestLoading",""],["type","submit","class","btn btn-primary",4,"ngIf","ngIfElse"],["colspan","4",1,"no-data"],[1,"error-message"],["disabled","",1,"btn","btn-primary","btn-loading"],[1,"spinner"],["type","submit",1,"btn","btn-primary"]],template:function(i,a){if(1&i&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Agent Types"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3"),e._uU(7,"Current Agent Types"),e.qZA()(),e.TgZ(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),e._uU(13,"#"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Type"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Rate"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Details"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,Me,9,4,"tr",7),e.YNc(22,Oe,3,0,"tr",8),e.qZA()()()(),e.TgZ(23,"div",3)(24,"div",4)(25,"h3"),e._uU(26,"Update Agent Type"),e.qZA()(),e.TgZ(27,"form",9,10),e.NdJ("ngSubmit",function(){return a.submitAgentTypeForm()}),e.TgZ(29,"div",11)(30,"div",12)(31,"label",13),e._uU(32,"Agent Type "),e.TgZ(33,"span",14),e._uU(34,"*"),e.qZA()(),e.TgZ(35,"select",15)(36,"option",16),e._uU(37,"Select Agent Type"),e.qZA(),e.TgZ(38,"option",17),e._uU(39,"Marketing Agent"),e.qZA(),e.TgZ(40,"option",18),e._uU(41,"Seller"),e.qZA(),e.TgZ(42,"option",19),e._uU(43,"Seller Agent"),e.qZA(),e.TgZ(44,"option",20),e._uU(45,"Listing Agent"),e.qZA(),e.TgZ(46,"option",21),e._uU(47,"Buyer Agent"),e.qZA(),e.TgZ(48,"option",22),e._uU(49,"Buyer"),e.qZA()(),e.YNc(50,Pe,2,0,"small",23),e.qZA(),e.TgZ(51,"div",12)(52,"label",24),e._uU(53,"Agent Rate "),e.TgZ(54,"span",14),e._uU(55,"*"),e.qZA()(),e._UZ(56,"input",25),e.YNc(57,ke,2,0,"small",23),e.qZA(),e.TgZ(58,"div",26)(59,"label",27),e._uU(60,"Details "),e.TgZ(61,"span",14),e._uU(62,"*"),e.qZA()(),e._UZ(63,"textarea",28),e.YNc(64,Ue,2,0,"small",23),e.qZA()(),e.TgZ(65,"div",29),e.YNc(66,Ie,3,0,"ng-template",null,30,e.W1O),e.YNc(68,Ne,2,0,"button",31),e.qZA()()()()()),2&i){const r=e.MAs(28),l=e.MAs(67);e.xp6(21),e.Q6J("ngForOf",a.agentTypeDetailList),e.xp6(1),e.Q6J("ngIf",!(null!=a.agentTypeDetailList&&a.agentTypeDetailList.length)),e.xp6(5),e.Q6J("formGroup",a.createAgentForm),e.xp6(23),e.Q6J("ngIf",(null==a.agentType?null:a.agentType.invalid)&&((null==a.agentType?null:a.agentType.touched)||r.submitted)),e.xp6(7),e.Q6J("ngIf",(null==a.rate?null:a.rate.invalid)&&((null==a.rate?null:a.rate.touched)||r.submitted)),e.xp6(7),e.Q6J("ngIf",(null==a.detail?null:a.detail.invalid)&&((null==a.detail?null:a.detail.touched)||r.submitted)),e.xp6(4),e.Q6J("ngIf",!a.isAgentFormUpdating)("ngIfElse",l)}},dependencies:[f.sg,f.O5,p._Y,p.YN,p.Kr,p.Fj,p.wV,p.EJ,p.JJ,p.JL,p.Q7,p.sg,p.u],styles:[".agent-types-container[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:0 1rem}.section-title[_ngcontent-%COMP%]{font-size:1.75rem;color:#2c3e50;margin-bottom:2rem;text-align:center}.agent-types-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.agent-types-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#f8f9fa;border-bottom:1px solid #eee}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:#34495e}.table-container[_ngcontent-%COMP%]{padding:1.5rem;max-height:400px;overflow-y:auto}.agent-types-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.agent-types-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .agent-types-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;text-align:left;border-bottom:1px solid #eee}.agent-types-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f1f3f5;color:#495057;font-weight:600;position:sticky;top:0}.agent-types-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#555}.no-data[_ngcontent-%COMP%]{text-align:center;color:#777;padding:2rem}.agent-form[_ngcontent-%COMP%]{padding:1.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}label[_ngcontent-%COMP%]{font-weight:500;color:#34495e;margin-bottom:.5rem}.required[_ngcontent-%COMP%]{color:#e74c3c}.form-select[_ngcontent-%COMP%], .form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border-color .2s ease}.form-select[_ngcontent-%COMP%]:focus, .form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px #3498db33}.form-select[_ngcontent-%COMP%]{background:#fff;cursor:pointer}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.875rem;margin-top:.25rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.btn-primary[_ngcontent-%COMP%]{background:rgb(253,112,136);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:rgb(245,102,126)}.btn-loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;opacity:.8}.spinner[_ngcontent-%COMP%]{width:1rem;height:1rem;border:2px solid #fff;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.agent-types-grid[_ngcontent-%COMP%], .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 480px){.agent-types-container[_ngcontent-%COMP%]{padding:0 .5rem}.section-title[_ngcontent-%COMP%]{font-size:1.5rem}.agent-types-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .agent-types-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;font-size:.875rem}}"]}),o})();var u=m(7899),Le=m(2902);function Re(o,s){1&o&&(e.TgZ(0,"small",19),e._uU(1," Please enter completed payment receipt link. "),e.qZA())}function Se(o,s){1&o&&(e.TgZ(0,"button",20),e._uU(1,"Complete Now"),e.qZA())}function Ke(o,s){1&o&&(e.TgZ(0,"button",21)(1,"div",22)(2,"span",23),e._uU(3,"."),e.qZA()(),e._uU(4," Completing... "),e.qZA()),2&o&&e.Q6J("disabled",!0)}let Je=(()=>{const s=class{constructor(t,i,a,r,l){this.modal=t,this.formBuilder=i,this.itemService=a,this.snackBar=r,this._snackbarService=l,this.isPaymentCompleting=!1,this.withdrawCompleteForm=this.formBuilder.group({receipt:new p.NI("",[p.kI.required]),note:new p.NI("",[])})}get receipt(){return this.withdrawCompleteForm.get("receipt")}get note(){return this.withdrawCompleteForm.get("note")}ngOnInit(){}submitCompletePaymentForm(t){const i=this.withdrawCompleteForm.value;if(!this.withdrawCompleteForm.valid)return void(this.isPaymentCompleting=!1);const a=this.requestInfo?.data[u.Hw]?.userConceptId;this.isPaymentCompleting=!0,this.withdrawCompleteForm.disable();const r=this.requestInfo?.data[u.Hw];r.status="completed",r.timestamp=(new Date).toISOString(),r.payment=i,this.itemService.createCompositionAndLinker({compositionJsons:[{[u.sP]:r}],compositionToJoin:a,direction:"backward",linker:Le.hc,both:!0,count:!0}).subscribe({next:c=>{this.updateWithdrawRequest(i)},error:c=>{console.log(c),this._snackbarService.openSnackBar("Withdrawal payment could not mark as complete!","error")},complete:()=>{}})}updateWithdrawRequest(t){const i={id:this.requestInfo?.id,[u.Hw]:{...this.requestInfo?.data[u.Hw]}};i[u.Hw].timestamp=(new Date).toISOString(),i[u.Hw].status="completed",i[u.Hw].payment=t,this.itemService.updatev2(i).subscribe({next:a=>{this.isPaymentCompleting=!1,this.modal.dismiss()},error:a=>{console.log(a),this._snackbarService.openSnackBar("Withdrawal payment could not mark as complete!","error")},complete:()=>{this._snackbarService.openSnackBar("Withdrawal is marked as completed successfully!","success")}})}};let o=s;return s.\u0275fac=function(i){return new(i||s)(e.Y36(y.Kz),e.Y36(p.qu),e.Y36(x.e),e.Y36(v.ux),e.Y36(w.o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-complete-payment"]],inputs:{requestInfo:"requestInfo"},decls:25,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],[1,"btn-close",3,"click"],[1,"modal-body","pt-0","pb-2","px-3"],[3,"formGroup","ngSubmit"],["paymentForm","ngForm"],[1,"row"],[1,"col-md-12"],["for","receipt",1,"form-label"],[1,"text-danger"],["type","text","name","receipt","id","receipt","placeholder","","required","","formControlName","receipt",1,"form-control","p-2","mb-1","shadow-none"],["class","err_msg",4,"ngIf"],[1,"col-md-12","mt-3"],["for","note",1,"form-label"],["name","note","id","note","cols","30","rows","3","placeholder","Write note about payment...","formControlName","note",1,"form-control","p-2","mb-1","shadow-none","resize-none"],[1,"mb-2","text-right","footer-buttons"],["type","button",1,"btn","btn-secondary",3,"click"],["class","btn btn-primary ms-3","type","submit",4,"ngIf","ngIfElse"],["completing",""],[1,"err_msg"],["type","submit",1,"btn","btn-primary","ms-3"],[1,"btn","btn-primary","btn-disabled","ms-3",3,"disabled"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"]],template:function(i,a){if(1&i){const r=e.EpF();e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Complete Withdraw Payment"),e.qZA(),e.TgZ(3,"span",2),e.NdJ("click",function(){return a.modal.dismiss("Cross click")}),e.qZA()(),e.TgZ(4,"div",3)(5,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(r);const c=e.MAs(6);return e.KtG(a.submitCompletePaymentForm(c))}),e.TgZ(7,"div",6)(8,"div",7)(9,"label",8),e._uU(10,"Receipt Link / Id: "),e.TgZ(11,"span",9),e._uU(12,"*"),e.qZA()(),e._UZ(13,"input",10),e.YNc(14,Re,2,0,"small",11),e.qZA(),e.TgZ(15,"div",12)(16,"label",13),e._uU(17,"Note:"),e.qZA(),e._UZ(18,"textarea",14),e.qZA()(),e.TgZ(19,"div",15)(20,"button",16),e.NdJ("click",function(){return a.modal.dismiss("Cross click")}),e._uU(21,"Close"),e.qZA(),e.YNc(22,Se,2,0,"button",17),e.YNc(23,Ke,5,1,"ng-template",null,18,e.W1O),e.qZA()()()}if(2&i){const r=e.MAs(6),l=e.MAs(24);e.xp6(5),e.Q6J("formGroup",a.withdrawCompleteForm),e.xp6(9),e.Q6J("ngIf",a.receipt&&a.receipt.invalid&&(a.receipt.touched||r.submitted)),e.xp6(8),e.Q6J("ngIf",!a.isPaymentCompleting)("ngIfElse",l)}},dependencies:[f.O5,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.sg,p.u],styles:[".btn-close[_ngcontent-%COMP%]{cursor:pointer}.footer-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{padding:12px 25px;background-color:#aaa}.footer-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover, .footer-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:focus{background-color:#999}"]}),o})();function Qe(o,s){if(1&o&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij("(",n.completePayments.length,")")}}function De(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"h4"),e._uU(2,"Paypal Details"),e.qZA(),e.TgZ(3,"div",26)(4,"span"),e._uU(5,"Name:"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",26)(8,"span"),e._uU(9,"Email:"),e.qZA(),e._uU(10),e.qZA(),e.BQk()),2&o){const n=e.oxw().$implicit,t=e.oxw(2);e.xp6(6),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].fullName," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].paypalEmail," ")}}function Ye(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"h4"),e._uU(2,"BTC Details"),e.qZA(),e.TgZ(3,"div",26)(4,"span"),e._uU(5,"Name:"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",26)(8,"span"),e._uU(9,"Wallet:"),e.qZA(),e._uU(10),e.qZA(),e.BQk()),2&o){const n=e.oxw().$implicit,t=e.oxw(2);e.xp6(6),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].fullName," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].btcAddress," ")}}function je(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"h4"),e._uU(2,"Bank Details"),e.qZA(),e.TgZ(3,"div",26)(4,"span"),e._uU(5,"Name:"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",26)(8,"span"),e._uU(9,"Bank Name:"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"div",26)(12,"span"),e._uU(13,"A/C Number:"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"div",26)(16,"span"),e._uU(17,"SWIFT Code:"),e.qZA(),e._uU(18),e.qZA(),e.BQk()),2&o){const n=e.oxw().$implicit,t=e.oxw(2);e.xp6(6),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].fullName," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].bankName," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].bankAcNumber," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].transferCode," ")}}const Z=function(o){return["/bm",o]};function ze(o,s){if(1&o&&(e.TgZ(0,"div",18)(1,"div",19)(2,"a",20),e._uU(3),e.qZA(),e.TgZ(4,"span",21),e._uU(5),e.qZA()(),e.TgZ(6,"div",22)(7,"span",23),e._uU(8,"mail"),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div",24),e.YNc(11,De,11,2,"ng-container",25),e.YNc(12,Ye,11,2,"ng-container",25),e.YNc(13,je,19,4,"ng-container",25),e.TgZ(14,"div",26)(15,"span"),e._uU(16,"Amount:"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"h4"),e._uU(19,"Payment Details"),e.qZA(),e.TgZ(20,"div",26)(21,"span"),e._uU(22,"Receipt/ID:"),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"div",26)(25,"span"),e._uU(26,"Note:"),e.qZA(),e._uU(27),e.qZA(),e.TgZ(28,"div",27),e._uU(29),e.ALo(30,"date"),e.qZA()()()),2&o){const n=s.$implicit,t=e.oxw(2);e.xp6(2),e.Q6J("routerLink",e.VKq(14,Z,null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].userConceptId)),e.xp6(1),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]||null==n.data[t.withdrawaCompleteCompostionKey].agentInfo?null:n.data[t.withdrawaCompleteCompostionKey].agentInfo.name," "),e.xp6(2),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]||null==n.data[t.withdrawaCompleteCompostionKey].agentInfo?null:n.data[t.withdrawaCompleteCompostionKey].agentInfo.type," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]||null==n.data[t.withdrawaCompleteCompostionKey].agentInfo?null:n.data[t.withdrawaCompleteCompostionKey].agentInfo.email," "),e.xp6(2),e.Q6J("ngIf","paypal"===(null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].paymentMethod)),e.xp6(1),e.Q6J("ngIf","btc"===(null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].paymentMethod)),e.xp6(1),e.Q6J("ngIf","bank"===(null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].paymentMethod)),e.xp6(4),e.hij(" $",null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].amount," "),e.xp6(6),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]||null==n.data[t.withdrawaCompleteCompostionKey].payment?null:n.data[t.withdrawaCompleteCompostionKey].payment.receipt," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaCompleteCompostionKey]||null==n.data[t.withdrawaCompleteCompostionKey].payment?null:n.data[t.withdrawaCompleteCompostionKey].payment.note," "),e.xp6(2),e.hij(" Completed: ",e.xi3(30,11,null==n||null==n.data[t.withdrawaCompleteCompostionKey]?null:n.data[t.withdrawaCompleteCompostionKey].timestamp,"medium")," ")}}function Ee(o,s){if(1&o&&(e.ynx(0),e.YNc(1,ze,31,16,"div",17),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.completePayments)}}function Be(o,s){1&o&&(e.TgZ(0,"div",28),e._uU(1,"No withdrawal payments completed yet."),e.qZA())}function $e(o,s){if(1&o&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij("(",n.paypalWithdrawRequests.length,")")}}function We(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a.openCompleteWithdrawModal(i))}),e._uU(1," Mark as Complete "),e.qZA()}}function He(o,s){1&o&&(e.TgZ(0,"button",39),e._UZ(1,"span",40),e._uU(2," Mark as Complete "),e.qZA())}function Ge(o,s){if(1&o&&(e.TgZ(0,"div",31)(1,"div",32)(2,"p"),e._uU(3,"Requested by:"),e.qZA(),e.TgZ(4,"a",20),e._uU(5),e.qZA(),e.TgZ(6,"span",21),e._uU(7),e.qZA()(),e.TgZ(8,"div",33)(9,"span",23),e._uU(10,"schedule"),e.qZA(),e._uU(11),e.ALo(12,"date"),e.TgZ(13,"span",23),e._uU(14,"mail"),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"div",24)(17,"h4"),e._uU(18,"Paypal Details"),e.qZA(),e.TgZ(19,"div",26)(20,"span"),e._uU(21,"Name:"),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"div",26)(24,"span"),e._uU(25,"Email:"),e.qZA(),e._uU(26),e.qZA(),e.TgZ(27,"div",26)(28,"span"),e._uU(29,"Amount:"),e.qZA(),e._uU(30),e.qZA()(),e.TgZ(31,"div",34)(32,"a",35),e._uU(33,"Visit Paypal"),e.qZA(),e.YNc(34,We,2,0,"button",36),e.YNc(35,He,3,0,"button",37),e.qZA()()),2&o){const n=s.$implicit,t=e.oxw(3);e.xp6(4),e.Q6J("routerLink",e.VKq(13,Z,null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].userConceptId)),e.xp6(1),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]||null==n.data[t.withdrawaRequestCompostionKey].agentInfo?null:n.data[t.withdrawaRequestCompostionKey].agentInfo.name," "),e.xp6(2),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]||null==n.data[t.withdrawaRequestCompostionKey].agentInfo?null:n.data[t.withdrawaRequestCompostionKey].agentInfo.type," "),e.xp6(4),e.hij(" ",e.xi3(12,10,null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].timestamp,"medium")," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]||null==n.data[t.withdrawaRequestCompostionKey].agentInfo?null:n.data[t.withdrawaRequestCompostionKey].agentInfo.email," "),e.xp6(7),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].fullName," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].paypalEmail," "),e.xp6(4),e.hij(" $",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].amount," "),e.xp6(4),e.Q6J("ngIf",!t.isWithdrawCompleting),e.xp6(1),e.Q6J("ngIf",t.isWithdrawCompleting)}}function Ve(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Ge,36,15,"div",30),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.paypalWithdrawRequests)}}function Xe(o,s){1&o&&(e.TgZ(0,"div",28),e._uU(1,"No Paypal withdrawal requests."),e.qZA())}function et(o,s){if(1&o&&(e.YNc(0,Ve,2,1,"ng-container",6),e.YNc(1,Xe,2,0,"ng-template",null,29,e.W1O)),2&o){const n=e.MAs(2),t=e.oxw();e.Q6J("ngIf",t.paypalWithdrawRequests.length)("ngIfElse",n)}}function tt(o,s){if(1&o&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij("(",n.bankWithdrawRequests.length,")")}}function nt(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a.openCompleteWithdrawModal(i))}),e._uU(1," Mark as Complete "),e.qZA()}}function at(o,s){1&o&&(e.TgZ(0,"button",39),e._UZ(1,"span",40),e._uU(2," Mark as Complete "),e.qZA())}function it(o,s){if(1&o&&(e.TgZ(0,"div",31)(1,"div",32)(2,"p"),e._uU(3,"Requested by:"),e.qZA(),e.TgZ(4,"a",20),e._uU(5),e.qZA(),e.TgZ(6,"span",21),e._uU(7),e.qZA()(),e.TgZ(8,"div",33)(9,"span",23),e._uU(10,"schedule"),e.qZA(),e._uU(11),e.ALo(12,"date"),e.TgZ(13,"span",23),e._uU(14,"mail"),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"div",24)(17,"h4"),e._uU(18,"Bank Details"),e.qZA(),e.TgZ(19,"div",26)(20,"span"),e._uU(21,"Name:"),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"div",26)(24,"span"),e._uU(25,"Amount:"),e.qZA(),e._uU(26),e.qZA(),e.TgZ(27,"div",26)(28,"span"),e._uU(29,"Bank Name:"),e.qZA(),e._uU(30),e.qZA(),e.TgZ(31,"div",26)(32,"span"),e._uU(33,"A/C Number:"),e.qZA(),e._uU(34),e.qZA(),e.TgZ(35,"div",26)(36,"span"),e._uU(37,"SWIFT Code:"),e.qZA(),e._uU(38),e.qZA()(),e.TgZ(39,"div",34),e.YNc(40,nt,2,0,"button",36),e.YNc(41,at,3,0,"button",37),e.qZA()()),2&o){const n=s.$implicit,t=e.oxw(3);e.xp6(4),e.Q6J("routerLink",e.VKq(15,Z,null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].userConceptId)),e.xp6(1),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]||null==n.data[t.withdrawaRequestCompostionKey].agentInfo?null:n.data[t.withdrawaRequestCompostionKey].agentInfo.name," "),e.xp6(2),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]||null==n.data[t.withdrawaRequestCompostionKey].agentInfo?null:n.data[t.withdrawaRequestCompostionKey].agentInfo.type," "),e.xp6(4),e.hij(" ",e.xi3(12,12,null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].timestamp,"medium")," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]||null==n.data[t.withdrawaRequestCompostionKey].agentInfo?null:n.data[t.withdrawaRequestCompostionKey].agentInfo.email," "),e.xp6(7),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].fullName," "),e.xp6(4),e.hij(" $",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].amount," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].bankName," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].bankAcNumber," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].transferCode," "),e.xp6(2),e.Q6J("ngIf",!t.isWithdrawCompleting),e.xp6(1),e.Q6J("ngIf",t.isWithdrawCompleting)}}function ot(o,s){if(1&o&&(e.ynx(0),e.YNc(1,it,42,17,"div",30),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.bankWithdrawRequests)}}function rt(o,s){1&o&&(e.TgZ(0,"div",28),e._uU(1,"No Bank withdrawal requests."),e.qZA())}function st(o,s){if(1&o&&(e.YNc(0,ot,2,1,"ng-container",6),e.YNc(1,rt,2,0,"ng-template",null,41,e.W1O)),2&o){const n=e.MAs(2),t=e.oxw();e.Q6J("ngIf",t.bankWithdrawRequests.length)("ngIfElse",n)}}function lt(o,s){if(1&o&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij("(",n.btcWithdrawRequests.length,")")}}function ct(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a.openCompleteWithdrawModal(i))}),e._uU(1," Mark as Complete "),e.qZA()}}function dt(o,s){1&o&&(e.TgZ(0,"button",39),e._UZ(1,"span",40),e._uU(2," Mark as Complete "),e.qZA())}function pt(o,s){if(1&o&&(e.TgZ(0,"div",31)(1,"div",32)(2,"p"),e._uU(3,"Requested by:"),e.qZA(),e.TgZ(4,"a",20),e._uU(5),e.qZA(),e.TgZ(6,"span",21),e._uU(7),e.qZA()(),e.TgZ(8,"div",33)(9,"span",23),e._uU(10,"schedule"),e.qZA(),e._uU(11),e.ALo(12,"date"),e.TgZ(13,"span",23),e._uU(14,"mail"),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"div",24)(17,"h4"),e._uU(18,"BTC Details"),e.qZA(),e.TgZ(19,"div",26)(20,"span"),e._uU(21,"Name:"),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"div",26)(24,"span"),e._uU(25,"BTC Address:"),e.qZA(),e._uU(26),e.qZA(),e.TgZ(27,"div",26)(28,"span"),e._uU(29,"Amount:"),e.qZA(),e._uU(30),e.qZA()(),e.TgZ(31,"div",34),e.YNc(32,ct,2,0,"button",36),e.YNc(33,dt,3,0,"button",37),e.qZA()()),2&o){const n=s.$implicit,t=e.oxw(3);e.xp6(4),e.Q6J("routerLink",e.VKq(13,Z,null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].userConceptId)),e.xp6(1),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]||null==n.data[t.withdrawaRequestCompostionKey].agentInfo?null:n.data[t.withdrawaRequestCompostionKey].agentInfo.name," "),e.xp6(2),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]||null==n.data[t.withdrawaRequestCompostionKey].agentInfo?null:n.data[t.withdrawaRequestCompostionKey].agentInfo.type," "),e.xp6(4),e.hij(" ",e.xi3(12,10,null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].timestamp,"medium")," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]||null==n.data[t.withdrawaRequestCompostionKey].agentInfo?null:n.data[t.withdrawaRequestCompostionKey].agentInfo.email," "),e.xp6(7),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].fullName," "),e.xp6(4),e.hij(" ",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].btcAddress," "),e.xp6(4),e.hij(" $",null==n||null==n.data[t.withdrawaRequestCompostionKey]?null:n.data[t.withdrawaRequestCompostionKey].amount," "),e.xp6(2),e.Q6J("ngIf",!t.isWithdrawCompleting),e.xp6(1),e.Q6J("ngIf",t.isWithdrawCompleting)}}function gt(o,s){if(1&o&&(e.ynx(0),e.YNc(1,pt,34,15,"div",30),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.btcWithdrawRequests)}}function _t(o,s){1&o&&(e.TgZ(0,"div",28),e._uU(1,"No BTC withdrawal requests."),e.qZA())}function ut(o,s){if(1&o&&(e.YNc(0,gt,2,1,"ng-container",6),e.YNc(1,_t,2,0,"ng-template",null,42,e.W1O)),2&o){const n=e.MAs(2),t=e.oxw();e.Q6J("ngIf",t.btcWithdrawRequests.length)("ngIfElse",n)}}const mt=[{component:he,path:""},{component:qe,path:"agent-requests"},{component:Fe,path:"agent-types"},{component:(()=>{const s=class{constructor(t,i,a){this.itemService=t,this.snackBar=i,this.modalService=a,this.withdrawaRequestCompostionKey=u.Hw,this.withdrawaCompleteCompostionKey=u.sP,this.activeWithdrawRequest=1,this.withdrawRequests=[],this.paypalWithdrawRequests=[],this.bankWithdrawRequests=[],this.btcWithdrawRequests=[],this.isWithdrawCompleting=!1,this.completePayments=[]}ngOnInit(){this.getWithdrawRequests(),this.getCompleteWithdrawals()}getWithdrawRequests(){this.itemService.getAll(u.Hw).subscribe({next:t=>{const i=t?.data;this.withdrawRequests=i.map(a=>{const r={...a};return r.data[u.Hw].timestamp=new Date(r.data[u.Hw].timestamp).toLocaleString(),r}),this.paypalWithdrawRequests=this.withdrawRequests.filter(a=>"paypal"===a?.data[u.Hw]?.paymentMethod&&"requested"===a?.data[u.Hw]?.status),this.bankWithdrawRequests=this.withdrawRequests.filter(a=>"bank"===a?.data[u.Hw]?.paymentMethod&&"requested"===a?.data[u.Hw]?.status),this.btcWithdrawRequests=this.withdrawRequests.filter(a=>"btc"===a?.data[u.Hw]?.paymentMethod&&"requested"===a?.data[u.Hw]?.status)},error:t=>{console.log(t)},complete:()=>{}})}getCompleteWithdrawals(){this.itemService.getAll(u.sP).subscribe({next:t=>{const i=t?.data;this.completePayments=i.map(a=>{const r={...a};return r.data[u.sP].timestamp=new Date(r.data[u.sP].timestamp).toLocaleString(),r})}})}openCompleteWithdrawModal(t){this.modalService.open(Je,{size:"lg",scrollable:!0}).componentInstance.requestInfo=t}};let o=s;return s.\u0275fac=function(i){return new(i||s)(e.Y36(x.e),e.Y36(v.ux),e.Y36(y.FF))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-transactions"]],decls:32,vars:11,consts:[[1,"transactions-container"],[1,"section-title"],["class","count",4,"ngIf"],[1,"transactions-grid"],[1,"transactions-card"],[1,"card-content"],[4,"ngIf","ngIfElse"],["noCompletedPayment",""],[1,"requests-card","withdraw_request_wrap"],[1,"card-header"],["ngbNav","",1,"nav-tabs",3,"activeId"],["navRequest","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"tab-content",3,"ngbNavOutlet"],[1,"count"],["class","transaction-item",4,"ngFor","ngForOf"],[1,"transaction-item"],[1,"transaction-header"],[1,"agent-name",3,"routerLink"],[1,"agent-type-badge"],[1,"transaction-meta"],[1,"material-symbols-outlined"],[1,"payment-details"],[4,"ngIf"],[1,"detail-row"],[1,"timestamp"],[1,"no-data"],["noPaypalRequests",""],["class","request-item",4,"ngFor","ngForOf"],[1,"request-item"],[1,"request-header"],[1,"request-meta"],[1,"request-actions"],["href","http://paypal.com","target","_blank","rel","noopener noreferrer",1,"btn","btn-secondary"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-primary btn-loading","disabled","",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["disabled","",1,"btn","btn-primary","btn-loading"],[1,"spinner"],["noBankRequests",""],["noBTCRequests",""]],template:function(i,a){if(1&i&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2," Recent Transactions "),e.YNc(3,Qe,2,1,"span",2),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5),e.YNc(7,Ee,2,1,"ng-container",6),e.YNc(8,Be,2,0,"ng-template",null,7,e.W1O),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"h3"),e._uU(13,"Withdrawal Requests"),e.qZA()(),e.TgZ(14,"ul",10,11)(16,"li",12)(17,"a",13),e._uU(18,"Paypal "),e.YNc(19,$e,2,1,"span",2),e.qZA(),e.YNc(20,et,3,2,"ng-template",14),e.qZA(),e.TgZ(21,"li",12)(22,"a",13),e._uU(23,"Bank "),e.YNc(24,tt,2,1,"span",2),e.qZA(),e.YNc(25,st,3,2,"ng-template",14),e.qZA(),e.TgZ(26,"li",12)(27,"a",13),e._uU(28,"BTC "),e.YNc(29,lt,2,1,"span",2),e.qZA(),e.YNc(30,ut,3,2,"ng-template",14),e.qZA()(),e._UZ(31,"div",15),e.qZA()()()),2&i){const r=e.MAs(9),l=e.MAs(15);e.xp6(3),e.Q6J("ngIf",a.completePayments.length),e.xp6(4),e.Q6J("ngIf",a.completePayments.length)("ngIfElse",r),e.xp6(7),e.Q6J("activeId",a.activeWithdrawRequest),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(3),e.Q6J("ngIf",a.paypalWithdrawRequests.length),e.xp6(2),e.Q6J("ngbNavItem",2),e.xp6(3),e.Q6J("ngIf",a.bankWithdrawRequests.length),e.xp6(2),e.Q6J("ngbNavItem",3),e.xp6(3),e.Q6J("ngIf",a.btcWithdrawRequests.length),e.xp6(2),e.Q6J("ngbNavOutlet",l)}},dependencies:[f.sg,f.O5,T.rH,y.uN,y.Pz,y.nv,y.Vx,y.tO,f.uU],styles:[".transactions-container[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:0 1rem}.section-title[_ngcontent-%COMP%]{font-size:1.75rem;color:#2c3e50;margin-bottom:2rem;text-align:center}.count[_ngcontent-%COMP%]{font-size:1rem;color:#777;margin-left:.5rem}.transactions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:2rem}.transactions-card[_ngcontent-%COMP%], .requests-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.card-content[_ngcontent-%COMP%]{padding:1.5rem;max-height:calc(100vh - 200px);overflow-y:auto}.card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#f8f9fa;border-bottom:1px solid #eee}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:#34495e}.transaction-item[_ngcontent-%COMP%], .request-item[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #eee;transition:background-color .2s ease}.transaction-item[_ngcontent-%COMP%]:hover, .request-item[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.transaction-header[_ngcontent-%COMP%], .request-header[_ngcontent-%COMP%]{margin-bottom:1rem}.agent-name[_ngcontent-%COMP%]{font-size:1.25rem;color:#2c3e50;text-decoration:none;font-weight:600}.agent-name[_ngcontent-%COMP%]:hover{color:#3498db;text-decoration:underline}.agent-type-badge[_ngcontent-%COMP%]{background:#eef7ff;color:#2980b9;padding:.25rem .75rem;border-radius:12px;font-size:.875rem;font-weight:500;margin-left:.5rem}.transaction-meta[_ngcontent-%COMP%], .request-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#666;font-size:.875rem;margin-bottom:1rem;flex-wrap:wrap}.material-symbols-outlined[_ngcontent-%COMP%]{font-size:1rem;color:#888}.payment-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;color:#34495e;margin:1.5rem 0 .5rem}.detail-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.75rem;font-size:.9375rem}.detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:#495057;min-width:100px}.timestamp[_ngcontent-%COMP%]{margin-top:1.5rem;font-size:.875rem;color:#777}.no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#777}.nav-tabs[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;background:#f8f9fa;padding:0 1.5rem}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:1rem;color:#495057;font-weight:500;border:none}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#3498db;border-bottom:2px solid #3498db}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#2980b9}.tab-content[_ngcontent-%COMP%]{padding:1.5rem;max-height:calc(100vh - 300px);overflow-y:auto}.withdraw_request_wrap[_ngcontent-%COMP%]{position:sticky;top:80px}.request-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1.5rem;padding-top:1rem;border-top:1px solid #eee}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.btn-primary[_ngcontent-%COMP%]{background:rgb(253,112,136);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:rgb(245,105,128)}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;opacity:.8}.spinner[_ngcontent-%COMP%]{width:1rem;height:1rem;border:2px solid #fff;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.transactions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.detail-row[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:unset}.request-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}@media (max-width: 480px){.transactions-container[_ngcontent-%COMP%]{padding:0 .5rem}.section-title[_ngcontent-%COMP%]{font-size:1.5rem}.agent-name[_ngcontent-%COMP%]{font-size:1.125rem}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem}}"]}),o})(),path:"transactions"}];let ft=(()=>{const s=class{};let o=s;return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[T.Bz.forChild(mt),T.Bz]}),o})();var ht=m(5412);let bt=(()=>{const s=class{};let o=s;return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f.ez,ft,y.IJ,p.u5,p.UX,ht.Is]}),o})()}}]);