(self.webpackChunkngx_boomconsole=self.webpackChunkngx_boomconsole||[]).push([[9983],{4954:(Jn,Wn,St)=>{"use strict";St.d(Wn,{$:()=>Me});var st=St(4650),Zt=St(9446);let Me=(()=>{const at=class{constructor(ee){this._activeModal=ee,this.slides=[],this.currentSlideUrl="",this.i=0}ngOnInit(){this.slides=this.imageUrl||[],this.slides.length>0&&(this.currentSlideUrl=this.slides[this.i]?.url||this.slides[this.i]?.path)}showSlide(ee){this.slides&&this.slides.length>0&&ee>=0&&ee<this.slides.length&&(this.currentSlideUrl=this.slides[ee].url||this.slides[ee].path)}getPrev(){this.i>0&&(this.i=this.i-1),this.showSlide(this.i)}getNext(){this.i<this.slides.length-1&&(this.i=this.i+1),this.showSlide(this.i)}handleKeyboardEvent(ee){"ArrowLeft"===ee.key?this.getPrev():"ArrowRight"===ee.key&&this.getNext()}};let Wt=at;return at.\u0275fac=function(_t){return new(_t||at)(st.Y36(Zt.Kz))},at.\u0275cmp=st.Xpm({type:at,selectors:[["app-full-image-preview"]],hostBindings:function(_t,Rt){1&_t&&st.NdJ("keydown",function(Le){return Rt.handleKeyboardEvent(Le)},!1,st.Jf7)},inputs:{imageUrl:"imageUrl",i:"i"},decls:15,vars:3,consts:[["type","button","aria-label","Close",1,"btn-close",3,"click"],["id","carouselExampleControls",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","slide",1,"d-block","w-100",3,"src"],["role","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["role","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"carousel-index"]],template:function(_t,Rt){1&_t&&(st.TgZ(0,"button",0),st.NdJ("click",function(){return Rt._activeModal.dismiss()}),st.qZA(),st.TgZ(1,"div",1)(2,"div",2)(3,"div",3),st._UZ(4,"img",4),st.qZA()(),st.TgZ(5,"a",5),st.NdJ("click",function(){return Rt.getPrev()}),st._UZ(6,"span",6),st.TgZ(7,"span",7),st._uU(8,"Previous"),st.qZA()(),st.TgZ(9,"a",8),st.NdJ("click",function(){return Rt.getNext()}),st._UZ(10,"span",9),st.TgZ(11,"span",7),st._uU(12,"Next"),st.qZA()(),st.TgZ(13,"div",10),st._uU(14),st.qZA()()),2&_t&&(st.xp6(4),st.Q6J("src",Rt.currentSlideUrl,st.LSH),st.xp6(10),st.AsE("",Rt.i+1," / ",Rt.slides.length,""))},styles:[".btn-close[_ngcontent-%COMP%]{position:absolute;right:-10px;z-index:999;top:-10px;background-color:#fff;border-radius:50%;padding:8px;opacity:1;box-shadow:0 3px 3px #0000004d}#carouselExampleControls[_ngcontent-%COMP%]{position:relative;width:100%;max-width:800px;margin:auto}.carousel-inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%]{position:absolute;top:50%;width:5%;height:50px;background-color:#00000080;color:#fff;border:none;border-radius:50%;transform:translateY(-50%);display:flex;align-items:center;justify-content:center}.carousel-control-prev[_ngcontent-%COMP%]{left:10px}.carousel-control-next[_ngcontent-%COMP%]{right:10px}.carousel-control-prev-icon[_ngcontent-%COMP%], .carousel-control-next-icon[_ngcontent-%COMP%]{background-size:100%,100%;background-repeat:no-repeat;background-position:center}.carousel-index[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:50%;transform:translate(-50%);background-color:#00000080;color:#fff;padding:5px 10px;border-radius:5px}"]}),Wt})()},3139:(Jn,Wn,St)=>{"use strict";St.d(Wn,{f:()=>Tt});var st=St(5861),Zt=St(9808),Me=St(6251),Wt=St(7899),at=St(4006),zt=St(6636),ee=St.n(zt),_t=St(2340),Rt=St(9402),$=St(4650),Le=St(7518),Y=St(9446),Bt=St(7009),ut=St(384),Pt=St(8154),vt=St(8180),Ft=St(4383),ue=St(1685),Z=St(6895);function he(Qe,Ke){1&Qe&&($.TgZ(0,"div",18),$._UZ(1,"span",19),$.qZA())}function re(Qe,Ke){if(1&Qe&&($.TgZ(0,"div",20)(1,"p",21),$._uU(2),$.TgZ(3,"a",22),$._uU(4,"here"),$.qZA(),$._uU(5,". "),$.qZA()()),2&Qe){const We=$.oxw(2);$.xp6(2),$.hij(" Your quota for uploading file ",null==We.uploadFilesInfo?null:We.uploadFilesInfo.limit," has exceeded. Please upgrade your plan "),$.xp6(1),$.Q6J("routerLink","/subscription")}}function ae(Qe,Ke){if(1&Qe&&$._UZ(0,"img",38),2&Qe){const We=$.oxw(2).$implicit;$.Q6J("src",We.preview,$.LSH)}}function ce(Qe,Ke){if(1&Qe&&($.TgZ(0,"a",36),$.YNc(1,ae,1,1,"img",37),$.qZA()),2&Qe){const We=$.oxw().$implicit;$.Q6J("href",We.url,$.LSH),$.xp6(1),$.Q6J("ngIf",We.preview)}}function we(Qe,Ke){1&Qe&&($.TgZ(0,"span"),$._uU(1,"\u2022 Uploading..."),$.qZA())}function Ce(Qe,Ke){1&Qe&&($.TgZ(0,"span"),$._uU(1,"\u2022 Uploaded"),$.qZA())}function Ge(Qe,Ke){if(1&Qe&&($.TgZ(0,"span"),$._uU(1),$.qZA()),2&Qe){const We=$.oxw().$implicit;$.xp6(1),$.hij("\u2022 Error: ",We.error,"")}}function Re(Qe,Ke){if(1&Qe&&($.TgZ(0,"a",39),$._uU(1,"Open"),$.qZA()),2&Qe){const We=$.oxw().$implicit;$.Q6J("href",We.url,$.LSH)}}function Fe(Qe,Ke){if(1&Qe){const We=$.EpF();$.TgZ(0,"div",25),$.YNc(1,ce,2,2,"a",26),$.TgZ(2,"div",27)(3,"span",28),$._uU(4),$.qZA(),$.TgZ(5,"div",29)(6,"div",30),$._uU(7),$.qZA(),$.TgZ(8,"div",31),$._uU(9),$.YNc(10,we,2,0,"span",32),$.YNc(11,Ce,2,0,"span",32),$.YNc(12,Ge,2,1,"span",32),$.qZA()(),$.TgZ(13,"div",33),$.YNc(14,Re,2,1,"a",34),$.TgZ(15,"button",35),$.NdJ("click",function(){const dt=$.CHM(We).index,At=$.oxw(3);return $.KtG(At.removeFile(dt))}),$._uU(16," Remove "),$.qZA()()()()}if(2&Qe){const We=Ke.$implicit,se=$.oxw(3);$.xp6(1),$.Q6J("ngIf",We.url&&se.isImageExtension(We.extension)),$.xp6(3),$.Oqu(se.getFileIconFromExtension(We.extension)),$.xp6(2),$.s9C("title",We.file.name),$.xp6(1),$.hij(" ",We.file.name," "),$.xp6(2),$.hij(" ",se.formatFileSize(We.file.size)," "),$.xp6(1),$.Q6J("ngIf","uploading"===We.status),$.xp6(1),$.Q6J("ngIf","done"===We.status),$.xp6(1),$.Q6J("ngIf","error"===We.status),$.xp6(2),$.Q6J("ngIf",We.url)}}function ze(Qe,Ke){if(1&Qe&&($.TgZ(0,"div",23),$.YNc(1,Fe,17,9,"div",24),$.qZA()),2&Qe){const We=$.oxw(2);$.xp6(1),$.Q6J("ngForOf",We.uploadedFiles)}}function ve(Qe,Ke){if(1&Qe){const We=$.EpF();$.TgZ(0,"div",4)(1,"h2",5),$._uU(2,"Upload to Folder"),$.qZA(),$.TgZ(3,"div",6)(4,"label",7),$._uU(5,"Document(s)"),$.qZA(),$.YNc(6,he,2,0,"div",8),$.TgZ(7,"div",9)(8,"input",10),$.NdJ("change",function(me){$.CHM(We);const dt=$.oxw();return $.KtG(dt.uploadAttachments(me))}),$.qZA()(),$.YNc(9,re,6,2,"div",11),$.qZA(),$.YNc(10,ze,2,1,"div",12),$.TgZ(11,"div",6)(12,"label",13),$._uU(13,"Description"),$.qZA(),$.TgZ(14,"textarea",14),$.NdJ("keyup",function(me){$.CHM(We);const dt=$.oxw();return $.KtG(dt.handleDescriptionChange(me))}),$.qZA()(),$.TgZ(15,"div",15)(16,"button",16),$.NdJ("click",function(){$.CHM(We);const me=$.oxw();return $.KtG(me.saveUploadedCaptures())}),$._uU(17," Save Data "),$.qZA(),$.TgZ(18,"button",17),$.NdJ("click",function(){$.CHM(We);const me=$.oxw();return $.KtG(me._activeModal.close())}),$._uU(19," Close "),$.qZA()()()}if(2&Qe){const We=$.oxw();$.xp6(6),$.Q6J("ngIf",We.uploadLoader),$.xp6(3),$.Q6J("ngIf",!We.isAllowedToUploadFile),$.xp6(1),$.Q6J("ngIf",We.uploadedFiles&&We.uploadedFiles.length>0),$.xp6(6),$.Q6J("disabled",We.uploadLoader||We.loader||!We.isAllowedToUploadFile||!We.hasAnyUploadedFiles())}}function Je(Qe,Ke){1&Qe&&($.TgZ(0,"div",18),$._UZ(1,"span",19),$.qZA())}function nt(Qe,Ke){1&Qe&&($.TgZ(0,"div",18),$._UZ(1,"span",19),$.qZA())}function wt(Qe,Ke){1&Qe&&($.TgZ(0,"div",48),$._uU(1," Document name is required. "),$.qZA())}function kt(Qe,Ke){1&Qe&&($.TgZ(0,"div",48),$._uU(1," Document name cannot be longer than 10 characters. "),$.qZA())}const sn=function(Qe,Ke,We){return{"ng-untouched":Qe,"ng-pristine":Ke,"ng-invalid":We}};function xt(Qe,Ke){if(1&Qe){const We=$.EpF();$.TgZ(0,"input",46),$.NdJ("change",function(me){$.CHM(We);const dt=$.oxw(3);return $.KtG(dt.handleFileNameChange(me))}),$.qZA(),$.YNc(1,wt,2,0,"div",47),$.YNc(2,kt,2,0,"div",47)}if(2&Qe){const We=$.oxw(3);let se,me,dt;$.Q6J("ngClass",$.kEZ(3,sn,null==(se=We.myForm.get("documentName"))?null:se.untouched,null==(se=We.myForm.get("documentName"))?null:se.pristine,(null==(se=We.myForm.get("documentName"))?null:se.invalid)&&(null==(se=We.myForm.get("documentName"))?null:se.touched))),$.xp6(1),$.Q6J("ngIf",(null==(me=We.myForm.get("documentName"))?null:me.hasError("required"))&&(null==(me=We.myForm.get("documentName"))?null:me.touched)),$.xp6(1),$.Q6J("ngIf",(null==(dt=We.myForm.get("documentName"))?null:dt.hasError("maxlength"))&&(null==(dt=We.myForm.get("documentName"))?null:dt.touched))}}function en(Qe,Ke){if(1&Qe&&($.TgZ(0,"div",6)(1,"label",7),$._uU(2,"Document Name"),$.qZA(),$.YNc(3,Je,2,0,"div",44),$.YNc(4,nt,2,0,"div",8),$.YNc(5,xt,3,7,"ng-template",null,45,$.W1O),$.qZA()),2&Qe){const We=$.MAs(6),se=$.oxw(2);$.xp6(3),$.Q6J("ngIf",se.uploadLoader)("ngIfElse",We),$.xp6(1),$.Q6J("ngIf",se.loader)}}function nn(Qe,Ke){if(1&Qe){const We=$.EpF();$.TgZ(0,"button",16),$.NdJ("click",function(me){$.CHM(We);const dt=$.oxw(2);return $.KtG(dt.saveDocument(me))}),$._uU(1," Save Data "),$.qZA()}if(2&Qe){const We=$.oxw(2);$.Q6J("disabled",We.isSaving||We.uploadLoader||We.loader||!We.isAllowedToUploadFile)}}function yn(Qe,Ke){if(1&Qe){const We=$.EpF();$.TgZ(0,"button",16),$.NdJ("click",function(){$.CHM(We);const me=$.oxw(3);return $.KtG(me.updateDocument())}),$._uU(1," Update Data "),$.qZA()}if(2&Qe){const We=$.oxw(3);$.Q6J("disabled",We.uploadLoader||We.loader||!We.isAllowedToUploadFile)}}function Nn(Qe,Ke){if(1&Qe&&$.YNc(0,yn,2,1,"button",49),2&Qe){const We=$.oxw(2);$.Q6J("ngIf",We.documentId)}}function xn(Qe,Ke){if(1&Qe){const We=$.EpF();$.TgZ(0,"div",4)(1,"h2",5),$._uU(2,"Save to Folder"),$.qZA(),$.TgZ(3,"form",40),$.YNc(4,en,7,3,"div",41),$.TgZ(5,"div",15),$.YNc(6,nn,2,1,"button",42),$.YNc(7,Nn,1,1,"ng-template",null,43,$.W1O),$.TgZ(9,"button",17),$.NdJ("click",function(){$.CHM(We);const me=$.oxw();return $.KtG(me._activeModal.close(!0))}),$._uU(10," Close "),$.qZA()()()()}if(2&Qe){const We=$.MAs(8),se=$.oxw();$.xp6(3),$.Q6J("formGroup",se.myForm),$.xp6(1),$.Q6J("ngIf",!se.selectedFileURL),$.xp6(2),$.Q6J("ngIf",!se.documentId)("ngIfElse",We)}}let Tt=(()=>{const Ke=class{constructor(se,me,dt,At,le,fe,Ae,Ie){this._snapshot=se,this._activeModal=me,this._snackBar=dt,this._auth=At,this._itemService=le,this._snackbarService=fe,this._folder=Ae,this.captureService=Ie,this.upload=!1,this.isUploadFromConsole=!1,this.loader=!1,this.folderSelector="#boom-sidebar-upload",this.captureTypes=Me.Z,this.selectedFolders=[],this.boomgptComposition=Wt.rG,this.selectedFileURL="",this.uploadedFiles=[],this.selectedDescription="",this.uploadLoader=!1,this.isAllowedToUploadFile=!0,this.isSaving=!1,this.validImageField=["png","jpeg","jpg","svg","webp"],this.validDocumentField=["pdf","txt","docx","doc","xlsx","pptx","mp4","mov","avi","wmv","mpeg"],this.getUserProfile();const Se=this._auth.loadFromLocalStorage();this.userCompositionId=Se.userConcept}ngOnDestroy(){this.subs.unsubscribe()}ngOnInit(){let se=localStorage.getItem("profile");se&&(this.userDetails=se=JSON.parse(se)),ee()({token:se.token,userId:se.theUserId||se.userId,userConcept:se.userConcept,..._t.d}),zt.FolderTreeModule.renderTreeSidebar({sidebarQuerySelector:this.folderSelector,navigateThroughLabel:!0,showCheckbox:!0},!0),this.myForm=new at.cw({documentName:new at.NI(this.docTitle,[at.kI.required,at.kI.maxLength(50)])}),this.subs=this._snapshot.queryParams.subscribe(me=>{if(me.s){const dt=zt.FolderTreeModule.globalFolders;this.currentFolderId=me.s;const le=dt.filter(fe=>fe.id==me.s).map(fe=>({id:fe?.id,name:fe?.name}));zt.FolderTreeModule.updateSelectedFolders(this.folderSelector,le,!0)}else this.currentFolderId=""}),this.isUploadFromConsole||(zt.FolderTreeModule.updateSelectedFolders(this.folderSelector,[{id:this.projectId,name:""}],!0),zt.FolderTreeModule.setCurrentFolderId(this.projectId,this.folderSelector))}getUserProfile(){this._auth.getUserProfile().subscribe({next:se=>{const me=se?.data?.the_user?.entity.person;this.userProfile={first_name:me?.first_name,last_name:me?.last_name,profile_img:me?.profile_img,userid:se?.id}}})}getFileExtension(se){return se.split(".").pop()?.toLowerCase()||""}getFileIcon(se){switch(this.getFileExtension(se)){case"pdf":return"\u{1f4c4}";case"doc":case"docx":return"\u{1f4dd}";case"xls":case"xlsx":return"\u{1f4ca}";case"ppt":case"pptx":return"\u{1f4c8}";case"txt":return"\u{1f4c3}";case"mp4":case"mov":case"avi":case"wmv":case"mpeg":return"\u{1f3ac}";case"jpg":case"jpeg":case"png":case"gif":case"webp":return"\u{1f5bc}\ufe0f";default:return"\u{1f4c1}"}}uploadAttachment(se){var me=this;return(0,st.Z)(function*(){me.fileUploadErrorMessage="";const dt=["jpg","jpeg","png"],At=["doc","docx","xls","xlsx","ppt","pptx","txt","pdf","md","mp4","mov","avi","wmv","mpeg"];let le;if(se&&se.target&&se.target.files){if(!se.target.files[0])return null;le=se.target.files[0]}else{if(!se||!se.name&&!se.size)return null;le=se}if(!le)return null;const Ae=le.name.split(".").pop()?.toLowerCase()||"",Ie=le.size/1024,Se=yield me._folder.checkUserSubscription("fileSize"),$e=Se?.isAllowedToCreate,ct=Se?.limit;if(Ie>=$e)return me.fileUploadErrorMessage=`File size must be less than ${ct} KB`,me._snackbarService.openSnackBar(me.fileUploadErrorMessage,"warning"),null;me.uploadLoader=!0;try{if(dt.includes(Ae)){const Ze=new FormData;Ze.append("image",le);const Be=yield(0,Zt.n)(me._itemService.uploadNewImage(Ze));return me.uploadLoader=!1,{url:Be?.data,file:le,extension:Ae}}if(At.includes(Ae)){const Ze=new FormData;Ze.append("file",le);const Be=yield(0,Zt.n)(me._itemService.uploadFile(Ze));return me.uploadLoader=!1,{url:Be?.data,file:le,extension:Ae}}return me.uploadLoader=!1,me._snackbarService.openSnackBar("Invalid File Format","error"),null}catch{return me.uploadLoader=!1,me._snackbarService.openSnackBar("Sorry, couldn't upload file at the moment.","error"),null}})()}uploadAttachments(se){var me=this;return(0,st.Z)(function*(){if(!se.target.files||0===se.target.files.length)return;const dt=se.target.files,At=se.target;setTimeout(()=>At.value="",0);const le=Array.from(dt);le.forEach(Ae=>{const Ie=(Ae.name.split(".").pop()||"").toLowerCase(),Se={file:Ae,extension:Ie,preview:null,url:void 0,status:"pending"};if(me.validImageField.includes(Ie)){const $e=new FileReader;$e.onload=()=>Se.preview=$e.result,$e.readAsDataURL(Ae)}me.uploadedFiles.push(Se)}),me.uploadLoader=!0;const fe=me.uploadedFiles.slice(-le.length).map(Ae=>(Ae.status="uploading",me.uploadAttachment(Ae.file).then(Ie=>{Ie&&Ie.url?(Ae.url=Ie.url,Ae.status="done"):(Ae.status="error",Ae.error="Upload failed")})));yield Promise.allSettled(fe),me.uploadLoader=me.uploadedFiles.some(Ae=>"uploading"===Ae.status)})()}uploadImage(se){const me=new FormData;me.append("image",se),this._itemService.uploadNewImage(me).subscribe({next:dt=>{this.selectedFileURL=dt.data,this.uploadLoader=!1},error:()=>{this.uploadLoader=!1,this._snackbarService.openSnackBar("Sorry, couldn't upload file at the moment.","error")}})}uploadFile(se){const me=new FormData;me.append("file",se),this._itemService.uploadFile(me).subscribe({next:dt=>{this.selectedFileURL=dt.data,this.uploadLoader=!1},error:()=>{this.uploadLoader=!1,this._snackbarService.openSnackBar("Sorry, couldn't upload file at the moment.","error")}})}editSelectedFolders(se){this.selectedFolders=se}saveUploadedCaptures(){var se=this;return(0,st.Z)(function*(){if(se.fileUploadErrorMessage)return void se._snackbarService.openSnackBar(se.fileUploadErrorMessage,"warning");if(!se.hasAnyUploadedFiles())return void se._snackbarService.openSnackBar("No files ready for upload","warning");let me;se.loader=!0;const dt={};for(let At=0;At<se.uploadedFiles.length;At++){const le=se.uploadedFiles[At];if("done"!==le.status)continue;me={title:le.file.name,short_desc:"",data_type:se.validImageField.includes(le.extension)?Me.Z.Image:Me.Z.Document,image:le.url,filepath:le.url,filename:le.file.name,boom_folder:{category_name:"",category_id:""},source_url:"",created_at:String(Date.now()),note:se.selectedDescription},dt[se.boomgptComposition]=me;const fe=zt.FolderTreeModule.selectedFolders;se.selectedFolders=fe.map(Ie=>parseInt(Ie?.id||Ie.category_id));const Ae=fe.map(Ie=>({id:parseInt(Ie?.id||Ie.category_id),name:Ie?.name||Ie.category_name}));if(se.selectedFolders?.length>0)for(let Ie=0;Ie<Ae.length;Ie++){const Se=Ae[Ie],$e={category_name:Se?.name||"",category_id:Se?.id||""};me={...me,boom_folder:{...$e}},dt[se.boomgptComposition]=me,yield se.captureService.uploadDocument(dt,se.userDetails.theUserId,Se?.id||Se?.id,se.userDetails.userConcept)}else me={...me,boom_folder:{category_name:"",category_id:""}},dt[se.boomgptComposition]=me,yield se.captureService.uploadDocument(dt,se.userDetails.theUserId,se.userDetails.userConcept,se.userDetails.userConcept)}se._activeModal.close("Media Uploaded!")})()}removeFile(se){se>=0&&se<this.uploadedFiles.length&&this.uploadedFiles.splice(se,1)}hasAnyUploadedFiles(){return this.uploadedFiles.some(se=>"done"===se.status)}isImageExtension(se){return this.validImageField.includes(se)}getFileIconFromExtension(se){switch(se){case"pdf":return"\u{1f4c4}";case"doc":case"docx":return"\u{1f4dd}";case"xls":case"xlsx":return"\u{1f4ca}";case"ppt":case"pptx":return"\u{1f4c8}";case"txt":return"\u{1f4c3}";case"mp4":case"mov":case"avi":case"wmv":case"mpeg":return"\u{1f3ac}";case"jpg":case"jpeg":case"png":case"gif":case"webp":return"\u{1f5bc}\ufe0f";default:return"\u{1f4c1}"}}formatFileSize(se){if(0===se)return"0 B";const At=Math.floor(Math.log(se)/Math.log(1024));return parseFloat((se/Math.pow(1024,At)).toFixed(2))+" "+["B","KB","MB","GB","TB"][At]}handleFileNameChange(se){se.preventDefault(),this.isdocValue.docTitle=se.target.value}saveDocument(se){var me=this;return(0,st.Z)(function*(){if(se.preventDefault(),me.isdocValue.folderId=zt.FolderTreeModule.selectedFolders,me.myForm?.valid){me.isSaving=!0,me.loader=!0;try{const dt=localStorage.getItem("profile"),At=JSON.parse(dt);if((yield(0,Rt.oKR)(me.projectId,"my_console_s")).find(Ae=>Ae?.data?.the_createDocument?.docTitle==me.isdocValue.docTitle))return me._snackbarService.openSnackBar("document already exist","error"),me.isSaving=!1,void(me.loader=!1);{let Ae;if(yield Promise.all(me.isdocValue.folderId&&me.isdocValue.folderId?.map(function(){var Ie=(0,st.Z)(function*(Se){const $e={the_createDocument:{docTitle:me.isdocValue?.docTitle,folderId:parseInt(Se?.category_id),createdByEmail:At?.email||"",created_by:At?.userConcept||"",assignUsers:me.isdocValue?.assignUsers||"",content:me.isdocValue?.content||"",types:me.isdocValue?.types||"",methodTypes:me.isdocValue?.methodTypes||"",methodUrl:me.isdocValue?.methodUrl||"",authType:me.isdocValue?.authType||"",username:me.isdocValue?.username||"",password:me.isdocValue?.password||"",bearerToken:me.isdocValue?.bearerToken||"",jsonList:me.isdocValue?.jsonList||"",languageType:me.isdocValue?.languageType||"",codeEditor:me.isdocValue?.codeEditor||"",desAboutReturnOpt:me.isdocValue?.desAboutReturnOpt||"",docsUrl:me.isdocValue?.docsUrl||"",imagesUrl:me.isdocValue?.imagesUrl||""}},ct=yield(0,Rt.J0M)(parseInt(Se.category_id)),Ze=yield(0,Rt.joo)($e,void 0,void 0,void 0,At.theUserId,4);yield(0,Rt.GIn)(ct,Ze,"my_console"),yield Rt.smK.SyncDataOnline();const Be=yield(0,Rt.J0M)(Ze.id);Ae={title:"Document Invitaion",body:`You are assign for ${me.isdocValue?.docTitle} document`,timestamp:(new Date).toISOString(),link:`projects/view/${parseInt(Se?.category_id)}?tab=Documentation&docid=${Be.id}`}});return function(Se){return Ie.apply(this,arguments)}}())),me.isdocValue?.assignUsers.length>0){const Ie=me.isdocValue?.assignUsers?.map(Se=>Se.id);if(Ie.length>0){const Se={userConceptIds:Ie,fs_notification:Ae};(yield fetch(_t.N.baseUrl+"/notification-bulk/send",{method:"POST",body:JSON.stringify(Se),headers:{"Content-Type":"application/json",Authorization:`Bearer ${me.userDetails.token}`}})).ok||me._snackbarService.openSnackBar("Unable to send notification","error")}}me._snackbarService.openSnackBar("document created successful","success"),me.isSaving=!1,me.loader=!1,me.childComponent(),me._activeModal.close()}}catch{me._snackbarService.openSnackBar("Error creating Document","error")}}})()}updateDocument(){var se=this;return(0,st.Z)(function*(){if(se.isSaving=!0,se.loader=!0,se.myForm?.valid){se.isdocValue.folderId=zt.FolderTreeModule.selectedFolders,se.isdocValue.docTitle=se.myForm.value.documentName;try{let me;const dt=new Rt.MYZ;if(dt.userId=se.userProfile?.userid,dt.compositionId=se.documentId,se.isdocValue.folderId&&se.isdocValue?.folderId?.map(At=>{dt.patchObject={docTitle:se.isdocValue?.docTitle||"",folderId:parseInt(At?.category_id)||"",categoryName:At&&At?.category_name||"",last_updated_by:se.userProfile.first_name+" "+se.userProfile.last_name||"",assignUsers:se.isdocValue?.assignUsers||"",content:se.isdocValue?.content||"",types:se.isdocValue?.types||"",methodTypes:se.isdocValue?.methodTypes||"",methodUrl:se.isdocValue?.methodUrl||"",authType:se.isdocValue?.authType||"",username:se.isdocValue?.username||"",password:se.isdocValue?.password||"",bearerToken:se.isdocValue?.bearerToken||"",jsonList:se.isdocValue?.jsonList||"",languageType:se.isdocValue?.languageType||"",codeEditor:se.isdocValue?.codeEditor||"",desAboutReturnOpt:se.isdocValue?.desAboutReturnOpt||"",docsUrl:se.isdocValue?.docsUrl||"",imagesUrl:se.isdocValue?.imagesUrl||""},me={title:"Document Invitaion",body:`You are assign for ${se.isdocValue?.docTitle} document`,timestamp:(new Date).toISOString(),link:`projects/view/${parseInt(At?.category_id)}?tab=Documentation&docid=${se.documentId}`}}),yield(0,Rt.hrH)(dt),Rt.smK.SyncDataOnline(),se.isSaving=!1,se.loader=!1,se.isdocValue?.assignUsers.length>0){const At=se.isdocValue?.assignUsers?.map(le=>le.id);At.length>0&&(yield fetch("https://theta.boomconcole.com/api/notification-bulk/send",{method:"POST",body:JSON.stringify({userConceptIds:At,fs_notification:me}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${se.userDetails.token}`}}))}se._snackbarService.openSnackBar("Document Update successful","success"),se._activeModal.close()}catch{se._snackbarService.openSnackBar("Failed to Update Document","error")}se.childComponent()}})()}handleDescriptionChange(se){this.selectedDescription=se.target.value}};let Qe=Ke;return Ke.\u0275fac=function(me){return new(me||Ke)($.Y36(Le.gz),$.Y36(Y.Kz),$.Y36(Bt.ux),$.Y36(ut.e),$.Y36(Pt.e),$.Y36(vt.o),$.Y36(Ft.s),$.Y36(ue.F))},Ke.\u0275cmp=$.Xpm({type:Ke,selectors:[["app-folder-upload-modal"]],inputs:{upload:"upload",isdoc:"isdoc",isdocValue:"isdocValue",singleDocValue:"singleDocValue",projectId:"projectId",documentId:"documentId",docTitle:"docTitle",childComponent:"childComponent",isUploadFromConsole:"isUploadFromConsole"},decls:5,vars:2,consts:[[1,"modal-body","row"],[1,"col-lg-5","col-md-6","col-sm-12","sidebar_wrapper"],["id","boom-sidebar-upload",1,"sidebar","bg-white"],["class","col-lg-7 col-md-6 col-sm-12",4,"ngIf"],[1,"col-lg-7","col-md-6","col-sm-12"],[1,"mb-3"],[1,"form-group"],["for","document",1,"form-label"],["class","loading","style","position: relative; min-height: 70px",4,"ngIf"],[1,"mb-2"],["type","file","name","document","id","document","multiple","","accept","application/msword, .docx, .doc, application/vnd.ms-excel, application/vnd.ms-powerpoint, text/plain, application/pdf, image/jpeg, image/jpg, image/png, video/mp4, video/mpeg, video/quicktime, video/x-msvideo, video/x-ms-wmv",1,"form-control",3,"change"],["class","d-inline-block",4,"ngIf"],["class","uploaded-list",4,"ngIf"],["for","description",1,"form-label"],["name","description","id","description","rows","3","placeholder","Add Description",1,"form-control",3,"keyup"],[1,"d-flex","flex-row","gap-2"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-secondary",3,"click"],[1,"loading",2,"position","relative","min-height","70px"],[1,"loader",2,"position","relative"],[1,"d-inline-block"],[1,"text-danger","exceed-limit-msg"],["target","_blank",3,"routerLink"],[1,"uploaded-list"],["class","card d-flex align-items-center justify-content-start border rounded p-2 mb-2 uploaded-item",4,"ngFor","ngForOf"],[1,"card","d-flex","align-items-center","justify-content-start","border","rounded","p-2","mb-2","uploaded-item"],["target","_blank","class","d-flex align-items-center gap-2 no-decoration w-100",3,"href",4,"ngIf"],[1,"w-100","d-flex","align-items-center","gap-2"],[2,"font-size","24px","margin-right","10px"],[1,"file-meta"],[1,"file-name",3,"title"],[1,"file-sub","small","text-muted"],[4,"ngIf"],[1,"ms-auto","d-flex","gap-2"],["target","_blank","class","btn btn-sm btn-outline-secondary",3,"href",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["target","_blank",1,"d-flex","align-items-center","gap-2","no-decoration","w-100",3,"href"],["alt","Image","class","thumb",3,"src",4,"ngIf"],["alt","Image",1,"thumb",3,"src"],["target","_blank",1,"btn","btn-sm","btn-outline-secondary",3,"href"],[3,"formGroup"],["class","form-group",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateDocumentAs",""],["class","loading","style","position: relative; min-height: 70px",4,"ngIf","ngIfElse"],["loaded",""],["formControlName","documentName","type","text","name","documentName","id","document","required","",1,"form-control",3,"ngClass","change"],["style","color: red",4,"ngIf"],[2,"color","red"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"]],template:function(me,dt){1&me&&($.TgZ(0,"div",0)(1,"div",1),$._UZ(2,"div",2),$.qZA(),$.YNc(3,ve,20,4,"div",3),$.YNc(4,xn,11,4,"div",3),$.qZA()),2&me&&($.xp6(3),$.Q6J("ngIf",!dt.isdoc),$.xp6(1),$.Q6J("ngIf",dt.isdoc))},dependencies:[Z.mk,Z.sg,Z.O5,Le.rH,at._Y,at.Fj,at.JJ,at.JL,at.Q7,at.sg,at.u],styles:[".exceed-limit-msg[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.5rem;margin-bottom:0}.exceed-limit-msg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline;color:#1f75cb}.exceed-limit-msg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .exceed-limit-msg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#ff9472}.sidebar_wrapper[_ngcontent-%COMP%]{max-height:600px;overflow:scroll}.uploaded-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.uploaded-item[_ngcontent-%COMP%]{display:flex;align-items:center}.thumb[_ngcontent-%COMP%]{width:64px;height:48px;object-fit:cover;border-radius:4px;margin-right:8px;background:#f8f9fa;border:1px solid #e9ecef}.file-meta[_ngcontent-%COMP%]{overflow:hidden}.file-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}.no-decoration[_ngcontent-%COMP%]{text-decoration:none;color:inherit}"]}),Qe})()},1685:(Jn,Wn,St)=>{"use strict";St.d(Wn,{F:()=>ut});var st=St(5861),Zt=St(6296),Me=St(9402),Wt=St(7899),at=St(2902),zt=St(2340),ee=St(4650),_t=St(8154),Rt=St(4383),$=St(8180),Le=St(384),Y=St(5495);let Bt=(()=>{const vt=class{constructor(ue,Z){this._authService=ue,this._items=Z;const he=this._authService.loadFromLocalStorage();he&&(this.userConcept=he.userConcept,this.userId=he.theUserId)}formatDocumentation(ue){if(!ue)return[];const Z=ue?.[0]?.data?.the_documentation||[];return{isDocumentation:!0,types:Z?.the_documentation_type?.[0]?.data?.the_type,title:Z?.the_documentation_doc_title?.[0]?.data?.the_doc_title,data_type:"documentation",boom_folder:{category_name:Z.categoryName,category_id:Z.folderId},short_desc:Z?.the_documentation_doc_title?.[0]?.data?.the_doc_title,visual_text:Z?.the_documentation_content?.[0]?.data?.the_content,codeEditor:Z?.the_documentation_code_editor?.[0]?.data?.the_code_editor,desAboutReturnOpt:Z?.the_documentation_return?.[0]?.data?.the_return,methodTypes:Z?.the_documentation_method?.[0]?.data?.the_method,url:Z?.the_documentation_method_url?.[0]?.data?.the_method_url,authType:Z?.the_documentation_auth_type?.[0]?.data?.the_auth_type,jsonKeyValuePair:Array.isArray(Z?.the_documentation_s_json_list)?Z.the_documentation_s_json_list.map(he=>{const re=he.data.the_json_list.the_json_list_key?.[0],ae=he.data.the_json_list.the_json_list_value?.[0],ce=re?.data?.the_key,we=ae?.data?.the_value;return{keyValuePairs:{[ce]:we}}}):[],imagesUrl:Array.isArray(Z?.the_documentation_s_image_url)?Z.the_documentation_s_image_url.map(he=>he?.data?.the_image_url):[],docsUrl:Array.isArray(Z?.the_documentation_s_doc_url)?Z.the_documentation_s_doc_url.map(he=>he?.data?.the_doc_url):[],videoLinks:Array.isArray(Z?.the_documentation_s_video_link)?Z.the_documentation_s_video_link.map(he=>he?.data?.the_video_link):[],bearer_token:Z?.the_documentation_bearer_token?.[0]?.data?.the_bearer_token,basicAuthUserName:Z?.the_documentation_username?.[0]?.data?.the_username,basicAuthpassword:Z?.the_documentation_password?.[0]?.data?.the_password,note:"",created_by_email:Z?.the_documentation_creator_email?.[0]?.data?.the_creator_email,source_url:"",id:ue?.[0]?.id,created_at:ue?.[0]?.created_at}}getSingleDocumentationDetails(ue){var Z=this;return(0,st.Z)(function*(){try{const he=[{composition:ue,listLinkers:[],fullLinkers:["the_documentation_doc_title","the_documentation_type","the_documentation_created_by","the_documentation_creator_email","the_documentation_content","the_documentation_api_script","the_documentation_api_body","the_documentation_method","the_documentation_method_url","the_documentation_auth_type","the_documentation_username","the_documentation_password","the_documentation_bearer_token","the_documentation_language","the_documentation_code_editor","the_documentation_return","the_documentation_s_json_list","the_documentation_s_doc_url","the_documentation_s_video_link","the_documentation_s_image_url"],inpage:500,page:1,logic:"or",filterSearches:[]},{listLinkers:[],fullLinkers:["the_json_list_key","the_json_list_value"],inpage:1e3,page:1,logic:"or",filterSearches:[]}],re=yield(0,Me.eHe)(he);return Z.formatDocumentation([re])}catch(he){return console.error("Error fetching new doc data:",he),[]}})()}};let Pt=vt;return vt.\u0275fac=function(Z){return new(Z||vt)(ee.LFG(Le.e),ee.LFG(_t.e))},vt.\u0275prov=ee.Yz7({token:vt,factory:vt.\u0275fac,providedIn:"root"}),Pt})(),ut=(()=>{const vt=class{constructor(ue,Z,he,re,ae,ce){this._apiServices=ue,this._folderService=Z,this._snackbarService=he,this._authService=re,this.crmService=ae,this.documentationService=ce,this.allCapturesInCurrentFolder=[],this.allFolders=[],this.storeBoomconsoleEntity=zt.N.storeBoomconsoleEntityId,this.types=[],this.userConcept=this._authService.loadFromLocalStorage().userConcept,this.entityId=this._authService.loadFromLocalStorage()?.entityId}getCaptures(ue,Z){var he=this;return(0,st.Z)(function*(){const re=yield he.getAllTypes();he.types=re;const ae=[];re.forEach(Ge=>{if(Ge.connections)try{const Re=JSON.parse(Ge.connections);Re.connections&&Array.isArray(Re.connections)&&ae.push(...Re.connections)}catch(Re){console.error("Error parsing connections for type:",Ge.name,Re)}});const ce=[...new Set(ae)],we=new Set(re.map(Ge=>Ge.name)),Ce=["the_entity_title","the_entity_type","the_entity_name","the_entity_data_type","the_entity_first_name","the_entity_last_name","the_entity_tag","the_entity_note","the_entity_source_url","the_entity_avatar","the_documentation_doc_title","the_documentation_type","the_documentation_created_by","the_documentation_creator_email","the_documentation_content","the_documentation_api_script","the_documentation_api_body","the_documentation_method","the_documentation_method_url","the_documentation_auth_type","the_documentation_username","the_documentation_password","the_documentation_bearer_token","the_documentation_language","the_documentation_code_editor","the_documentation_return","the_documentation_s_json_list","the_documentation_s_doc_url","the_documentation_s_video_link","the_documentation_s_image_url","self",...ce];return new Promise(Ge=>{const Re=new Me.LtL;Re.typeConnection="the_documentation_s_json_list",Re.name="json",Re.selectors=["the_json_list_key","the_json_list_value"];const Fe=new Me.LtL;Fe.name="access1",Fe.typeConnection=at.Oc,Fe.reverse=!0;const ze=new Me.LtL;ze.name="access2",ze.typeConnection=at.Oc,ze.reverse=!0;const ve=new Me.LtL;ve.typeConnection=at.u,ve.name="contain",ve.freeschemaQueries=[Re,Fe],ve.selectors=Ce;const Je=new Me.LtL;Je.name="folder",Je.typeConnection=at.NF,Je.freeschemaQueries=[ze],Je.selectors=Ce;const nt=new Me.LtL;nt.name="top",nt.conceptIds=[Number(ue)],nt.outputFormat=Me.xY7,nt.freeschemaQueries=[Je,ve],(0,Me.og0)(nt,Z).subscribe(wt=>{const sn=(wt?.[0]?.data?Object.keys(wt[0]?.data):[]).find(Tt=>"id"!==Tt);let xt=[];const en=wt?.[0]?.data?.boomFolder?.[at.u],nn=we,yn=re;if(en?.length){let Tt=[];en.forEach(Qe=>{if(Qe?.data?.the_entity){const Ke=he.crmService.formatNewEntityContactsConsole([Qe],"preview"),We=Nn(Qe);We?.shared&&Ke.forEach(se=>{se.shared=We.shared}),Tt=[...Tt,...Ke]}else if(Qe?.data?.[Wt.rG]?.crm_data){const Ke=he.crmService.formatOldEntityContactsConsole([Qe],"preview"),We=Nn(Qe);We?.shared&&Tt.push(We?.shared),We?.shared&&Ke.forEach(se=>{se.shared=We.shared}),Tt=[...Tt,...Ke]}else{const Ke=xn(Qe);Ke&&Tt.push(Ke)}}),xt=Tt,Ge(xt)}else{let Tt=[];sn===at.TB?Tt=wt?.[0]?.data?.[at.TB]?.[at.u]:"the_user"===sn&&(Tt=wt?.[0]?.data?.the_user?.[at.u]),xt=Tt?.map(Qe=>xn(Qe)),xt=xt?.filter(Boolean),xt=xt.map(Qe=>{const Ke=Qe?.types||Qe?.the_entity_type||Qe?.type||Qe?.data_type;if(Ke){const We=Tt.find(se=>se.id===Qe.id);if(We&&We.data){let se=We.data?.the_documentation||We.data?.the_entity;!se&&Ke&&(se=We.data?.[Ke]),se||(se=We.data);const me=he.extractDynamicConnections(se,Ke);Object.keys(me).length>0&&(Qe.dynamicConnections=me)}}return Qe}),Ge(xt||[])}function Nn(Tt){if(Tt?.data){const Qe={...Tt},Ke=Tt?.data?.the_entity?.the_user_s_read_access_reverse||Tt?.data?.boomgpt?.the_user_s_read_access_reverse;return Ke&&(Qe.shared=Ke),Qe}}function xn(Tt){if(Tt?.data?.[at.TB]&&Object.keys(Tt?.data?.[at.TB]).length){const se={name:Tt?.data?.[at.TB]?.name?.data?.the_name,parent:Tt?.data?.[at.TB]?.parent?.data?.the_parent,id:Tt?.id,created_at:Tt?.created_on},me=Tt?.data?.[at.TB][`${at.Oc}_reverse`];return me&&(se.shared=me,delete Tt?.data?.[at.TB][`${at.Oc}_reverse`]),se}if(Tt?.data?.[Wt.rG]){const me={...function We(se,me,dt){const At={};for(const le in se)if(le===`${me}_s_${dt}_by`)At.shared=se[le];else{if("comment"===le)continue;{const fe=se[le]?.data;if(fe&&"object"==typeof fe){const Ae=Object.keys(fe)[0];At[le]=fe[Ae]}}}return At}(Tt.data[Wt.rG],Wt.rG,at.Zm),id:Tt.id,created_at:Tt.created_on},dt=Tt?.data?.[Wt.rG][`${at.Oc}_reverse`];return dt&&(me.shared=dt,delete Tt?.data?.[Wt.rG][`${at.Oc}_reverse`]),me}if(Tt?.data?.the_documentation)return function Ke(se){if(!se?.data?.the_documentation)return null;const me=se.data.the_documentation,dt=function Qe(se){const me={};for(const dt in se){const At=se[dt];if(At?.data&&"object"==typeof At.data){const le=Object.keys(At.data)[0];me[dt]=At.data[le]}}return me}(me);return{isDocumentation:!0,data_type:"documentation",id:se.id,created_at:se.created_on,title:dt.the_documentation_doc_title,short_desc:dt.the_documentation_doc_title,visual_text:dt.the_documentation_content,types:dt.the_documentation_type,codeEditor:dt.the_documentation_code_editor,desAboutReturnOpt:dt.the_documentation_return,methodTypes:dt.the_documentation_method,url:dt.the_documentation_method_url,authType:dt.the_documentation_auth_type,bearer_token:dt.the_documentation_bearer_token,basicAuthUserName:dt.the_documentation_username,basicAuthpassword:dt.the_documentation_password,created_by_email:dt.the_documentation_creator_email,jsonKeyValuePair:Array.isArray(me.the_documentation_s_json_list)?me.the_documentation_s_json_list.map(At=>{const le=At.data?.the_json_list?.the_json_list_key?.[0],fe=At.data?.the_json_list?.the_json_list_value?.[0],Ae=le?.data?.the_key,Ie=fe?.data?.the_value;return{keyValuePairs:{[Ae]:Ie}}}):[],imagesUrl:Array.isArray(me.the_documentation_s_image_url)?me.the_documentation_s_image_url.map(At=>At?.data?.the_image_url):[],docsUrl:Array.isArray(me.the_documentation_s_doc_url)?me.the_documentation_s_doc_url.map(At=>At?.data?.the_doc_url):[],videoLinks:Array.isArray(me.the_documentation_s_video_link)?me.the_documentation_s_video_link.map(At=>At?.data?.the_video_link):[],note:"",source_url:""}}(Tt);if(Tt?.data){const me=Object.keys(Tt.data).find(dt=>nn.has(dt)&&"object"==typeof Tt.data[dt]);if(me){const dt=Tt.data[me],At=yn.find(Ie=>Ie.name===me),le={id:Tt.id,created_at:Tt.created_on,type:me,data_type:me,type_id:At?.id||null,icon:At?.icon||"",viewWidget:At?.viewWidget||null};for(const Ie in dt){const Se=dt[Ie];if(Se?.data){const $e=Object.keys(Se.data);$e.length>0&&(le[Ie]=Se.data[$e[0]])}else if(Array.isArray(Se)&&Se.length>0){const $e=Se[0];if($e?.data){const ct=Object.keys($e.data);ct.length>0&&(le[Ie]=$e.data[ct[0]])}}}const fe=Object.keys(le).find(Ie=>(Ie.endsWith("_name")||Ie.endsWith("_title"))&&le[Ie]&&"string"==typeof le[Ie]);fe&&le[fe]?(le.title=le[fe],le.name=le[fe]):(le.title=me.replace(/_/g," ").replace(/^the /,""),le.name=le.title);const Ae=Object.keys(le).find(Ie=>(Ie.endsWith("_note")||Ie.endsWith("_description"))&&le[Ie]&&"string"==typeof le[Ie]);return Ae&&le[Ae]&&(le.note=le[Ae]),le}}return null}Ge(wt)})})})()}getAllTypes(){var ue=this;return(0,st.Z)(function*(){try{const Z=new Me.LtL;Z.name="viewWidget",Z.typeConnection="the_type_s_view_widget",Z.selectors=["the_widget_name"];const he=new Me.LtL;he.name="icon",he.typeConnection="the_type_icon",he.selectors=["the_icon"];const re=new Me.LtL;re.name="type",re.typeConnection="the_entity_s_type",re.selectors=["the_type_name","the_type_connections"],re.freeschemaQueries=[Z,he];const ae=new Me.LtL;ae.name="top",ae.conceptIds=[ue.storeBoomconsoleEntity],ae.freeschemaQueries=[re],ae.outputFormat=Me.xY7;const ce=yield(0,Me.T0c)(ae,""),we=[],Ce=ce?.[0]?.data?.the_entity;return Ce?.the_entity_s_type&&Ce.the_entity_s_type.forEach(Re=>{const Fe=Re.data?.the_type,ze=Fe?.the_type_name?.data?.the_name||"",ve=Fe?.the_type_connections?.data?.the_connections||"",Je=Fe?.the_type_icon?.data?.the_icon||"";let nt=null;Fe?.the_type_s_view_widget?.[0]&&(nt=Fe.the_type_s_view_widget[0].id.toString()),we.push({id:Re.id.toString(),name:ze,connections:ve,viewWidget:nt,icon:Je})}),we}catch(Z){return console.error("Error fetching types:",Z),[]}})()}getIconForType(ue){return this.types.find(he=>he.name===ue)?.icon||""}getViewWidgetForType(ue){return this.types.find(he=>he.name===ue)?.viewWidget||null}getConnectionsForType(ue){const Z=this.types.find(he=>he.name===ue);if(!Z||!Z.connections)return[];try{const he=JSON.parse(Z.connections);if(he.connections&&Array.isArray(he.connections))return he.connections}catch(he){console.error("Error parsing connections for type:",ue,he)}return[]}getConnectionValuesForItem(ue){const Z=ue?.the_entity_type||ue?.type;if(!Z)return{};const he=this.getConnectionsForType(Z),re={};return he.forEach(ae=>{const ce=ue?.[ae]||ue?.data?.[ae];ce&&(re[ae]=ce)}),re}extractDynamicConnections(ue,Z){if(!Z)return{};const he=this.getConnectionsForType(Z),re={};return he.forEach(ae=>{if(ue?.[ae]){const ce=ue[ae];if(Array.isArray(ce)&&ce.length>0){const we=ce[0];if(we?.data){const Ce=Object.keys(we.data);Ce.length>0&&(re[ae]=we.data[Ce[0]])}}else if(ce?.data){const we=Object.keys(ce.data);we.length>0&&(re[ae]=ce.data[we[0]])}}}),re}getCategories(ue){return new Promise((Z,he)=>{const re=`${at.CH}_s`;(0,Me.zAo)(Number(ue),[re]).then(ae=>{let ce=ae?.filter(Ce=>Ce?.data?.[at.TB]&&Ce?.data?.[at.TB]?.name);ce=ce?.map(Ce=>{const Ge={...Ce};return{name:Ge?.data?.[at.TB]?.name,parent:Ge?.data?.[at.TB]?.parent,description:Ge?.data?.[at.TB]?.description,id:Ge?.id}}),ce=ce?.sort(function(Ce,Ge){const Re=Ce?.name?.toLowerCase(),Fe=Ge?.name?.toLowerCase();return Re.localeCompare(Fe)}),Z({message:"success",status:200,data:ce})}).catch(ae=>{he({message:"error",status:500,error:ae.message})})})}getCategoriesById(ue,Z){return new Promise((he,re)=>{(0,Me.zAo)(ue,[`${at.CH}_s`]).then(ce=>{let we=ce?.filter(Ge=>Ge?.data?.[at.TB]&&Ge?.data?.[at.TB]?.name);we=we?.map(Ge=>{const Re={...Ge};return{name:Re?.data?.[at.TB]?.name,parent:Re?.data?.[at.TB]?.parent,description:Re?.data?.[at.TB]?.description,id:Re?.id}}),we=we?.filter(Ge=>Ge?.id!==Z),we=we?.sort(function(Ge,Re){const Fe=Ge?.name?.toLowerCase(),ze=Re?.name?.toLowerCase();return Fe.localeCompare(ze)});let Ce={};if(Z===ue)Ce={count:we?.length,data:we};else{const Ge=[],Re=Fe=>{we?.forEach(ze=>{ze?.parent==Fe&&(Ge.push(ze),Re(ze?.id))})};Re(Z),Ce={count:Ge?.length,data:Ge},he(Ce)}}).catch(ce=>{re(ce)})})}getSharedCaptures(ue){var Z=this;return new Promise((he,re)=>{(0,Me.$Er)(ue,at.Oc,100,1).then(function(){var ce=(0,st.Z)(function*(we){const Ce=we,Ge=new Map;Ce.forEach((Ke,We)=>{Ge.set(Ke.id,We)});const Re=Ce?.map(Ke=>({...Ke})),Fe=Re?.filter(Ke=>Ke?.data?.boomgpt?.crm_data),ze=Z.crmService.formatOldEntityContacts(Fe,"preview"),ve=Ce?.filter(Ke=>null!=Ke?.data?.the_entity),nt=(yield Promise.all(ve.map(function(){var Ke=(0,st.Z)(function*(We){return yield Z.crmService.getSingleEntityDetails(We?.id,"sharedwithme")});return function(We){return Ke.apply(this,arguments)}}()))).flat().map(Ke=>({...Ke,title:Ke?.profileInformation?.name?.value,data_type:Ke?.type})),wt=Ce?.filter(Ke=>null!=Ke?.data?.the_documentation),sn=(yield Promise.all(wt.map(function(){var Ke=(0,st.Z)(function*(We){return yield Z.documentationService.getSingleDocumentationDetails(We?.id)});return function(We){return Ke.apply(this,arguments)}}()))).flat().map(Ke=>({...Ke,title:Ke?.title,data_type:Ke?.data_type}));let xt=Re?.filter(Ke=>Object.prototype.hasOwnProperty.call(Ke?.data,Wt.co));xt=xt?.map(Ke=>{let We;return Object.prototype.hasOwnProperty.call(Ke?.data,Wt.co)&&(We={parent:"1",name:Ke?.data?.boomFolder?.name,created_at:Ke?.created_at,id:Ke?.id}),We});let en=Re?.filter(Ke=>Object.prototype.hasOwnProperty.call(Ke?.data,Wt.rG));en=en?.map(Ke=>{let We;return Object.prototype.hasOwnProperty.call(Ke?.data,Wt.rG)&&(We={...Ke?.data?.[Wt.rG],created_at:Ke?.created_at,id:Ke?.id},We.boom_folder={category_id:1,category_parent:"",category_name:"Shared With Me"}),We});const Nn=[...xt,...en,...nt,...sn,...ze],xn=new Map;Nn.forEach(Ke=>{Ke&&Ke.id&&xn.set(Ke.id,Ke)});const Qe=Array.from(xn.values()).sort((Ke,We)=>(Ge.get(Ke.id)??1/0)-(Ge.get(We.id)??1/0));he(Qe)});return function(we){return ce.apply(this,arguments)}}()).catch(ce=>{re(ce)})})}selectFilteredCaptures(ue,Z,he,re,ae){let ce=[];if(!ae)return[];const we=ae?.filter(ve=>ve?.data_type),Ce=ae?.filter(ve=>ve?.name&&!ve?.type),Re=[...new Map(Ce?.map(ve=>[ve?.id,ve])).values()].sort((ve,Je)=>{const nt=ve?.name,wt=Je?.name;return nt?.localeCompare(wt)});ue||Re.push({id:1,name:"Shared With Me"});const Fe=Re?.map(ve=>({...ve,data_type:ve?.data_type?ve?.data_type:"1folder"})),ze=new Set(this.types.map(ve=>ve.name));switch(ce=[...Fe,...we].filter(ve=>"1folder"===ve?.data_type&&re?.folder||("extension_youchat"==ve?.data_type||"extension_poechat"==ve?.data_type||"extension_googlebard"==ve?.data_type||"extension_chatgpt"==ve?.data_type)&&re?.aichat||"extension_whatsapp_chat"==ve?.data_type&&re?.human_chat||("screenshot"==ve?.data_type||"traced_url"==ve?.data_type||"plain_text"==ve?.data_type||"visual_text"==ve?.data_type||"url"==ve?.data_type||"only_images"==ve?.data_type||"all_but_css"==ve?.data_type||"full_page"==ve?.data_type||"youtube_notes"==ve?.data_type||"all"==ve?.data_type)&&re?.captures||("Document"==ve?.data_type||"markdown"==ve?.data_type||"Image"==ve?.data_type)&&re?.document_image||("extension_linkedin"==ve?.data_type||"extension_whatsapp"==ve?.data_type||"individual"==ve?.data_type||"company"==ve?.data_type||"student"==ve?.data_type||"employee"==ve?.data_type||"patient"==ve?.data_type||"extension_merojob"==ve?.data_type||"government"==ve?.data_type||"extension_indeed"==ve?.data_type||"extension_maps"==ve?.data_type||"maps"==ve?.data_type||"web_crm"==ve?.data_type||"extension_monster"==ve?.data_type)&&re?.crm||"item_amazon"===ve?.data_type||"item_ebay"===ve?.data_type||"item_costco"===ve?.data_type||"item_kayak"===ve?.data_type||"item_expedia"===ve?.data_type||"item_agoda"===ve?.data_type||"documentation"===ve?.data_type||"sticky_note"===ve?.data_type||"widget"===ve?.data_type||"lms_chat"===ve?.data_type||ze.has(ve?.data_type)&&re?.captures),Z){case"type":ce.sort(he?(ve,Je)=>{const nt=ve?.data_type,wt=Je?.data_type;return nt?.localeCompare(wt)}:(ve,Je)=>{const nt=ve?.data_type;return Je?.data_type.localeCompare(nt)});break;case"title":ce.sort(he?(ve,Je)=>(ve?.title||ve?.name).localeCompare(Je?.title||Je?.name):(ve,Je)=>(Je?.title||Je?.name).localeCompare(ve?.title||ve?.name));break;case"note":ce.sort(he?(ve,Je)=>ve?.note.localeCompare(Je?.note):(ve,Je)=>Je?.note.localeCompare(ve?.note))}return ce}selectCaptureListsByIds(ue,Z){if(!ue)return;const he=[];return Z.forEach(re=>{const ae=ue?.filter(ce=>ce?.id==re);he.push(ae[0])}),0==Z?.length?null:he}searchCaptures(ue,Z){return new Promise(he=>{this._apiServices.getRecursiveSearchData(ue,[],Z).subscribe(re=>{let ae=re?.map(Ce=>{if(Ce?.data?.data?.[Wt.rG]||Ce?.data?.data?.the_entity)return{...Ce?.data?.data?.[Wt.rG]||Ce?.data?.data?.the_entity,id:Ce?.id,parent:[...Ce?.parent]}});ae=ae?.filter(Ce=>Ce);const we=(ae?.length>0?[...ae]:[])?.map(Ce=>{let Ge="",Re="",Fe="";if("extension_chatgpt"===Ce?.data_type||"extension_googlebard"===Ce?.data_type||"extension_poechat"===Ce?.data_type||"extension_youchat"===Ce?.data_type){const ve=Ce?.answer,Je=document.createElement("div");Je.innerHTML=ve,Re=Je?.textContent,Fe=Je?.textContent?.toLowerCase()}else"item_amazon"===Ce?.data_type||"item_ebay"===Ce?.data_type||"item_costco"===Ce?.data_type||"item_kayak"===Ce?.data_type||"item_expedia"===Ce?.data_type||"item_agoda"===Ce?.data_type?(Re=`${Ce?.itemData?.description} ${Ce?.itemData?.delivery}`,Fe=Re?.toLowerCase()):("extension_indeed"===Ce?.data_type||"extension_indeed"===Ce?.type||"extension_linkedin"===Ce?.data_type||"extension_linkedin"===Ce?.type||"extension_monster"===Ce?.data_type||"extension_monster"===Ce?.type||"extension_maps"===Ce?.data_type||"extension_maps"===Ce?.type||"web_crm"===Ce?.data_type||"extension_whatsapp"===Ce?.data_type||"extension_whatsapp"===Ce?.type||"individual"==Ce?.type||"company"==Ce?.type||"student"==Ce?.type||"employee"==Ce?.type||"patient"==Ce?.type||"extension_merojob"==Ce?.type||"government"==Ce?.type||"extension_whatsapp_chat"===Ce?.data_type)&&(Re=`${Ce?.crm_data?.name} ${Ce?.crm_data?.addresses?.[0]?.location||""} ${Ce?.crm_data?.companyWebsite||""}  ${Ce?.crm_data?.ceo||""} ${Ce?.crm_data?.founded||""} ${Ce?.crm_data?.companySize||""} ${Ce?.crm_data?.companyRevenue||""} ${Ce?.crm_data?.about} || ''`,Fe=Re?.toLowerCase());const ze=Fe?.indexOf(Z.toLowerCase());if(-1!==ze){const ve=Math.max(0,ze-20),Je=Math.min(Fe?.length,ze+Z?.length+20);Ge=Re?.substring(ve,Je)}else Ge="";return{...Ce,searchedContent:Ge}});if(we?.length){let Ce=[];we.forEach(Ge=>{let Re=[];Re=Ge?.the_entity_type?this.crmService.formatNewEntityContacts([Ge],"preview"):Ge?.crm_data?this.crmService.formatOldEntityContacts([Ge],"preview"):[{...Ge}],Re=Re?.map(Fe=>({...Fe,searchedContent:Ge.searchedContent,parent:Ge.parent})),Ce=[...Ce,...Re]}),he(Ce)}else he(we)})})}moveDataToFolder(ue,Z,he,re,ae){var ce=this;return(0,st.Z)(function*(){let we=localStorage.getItem("profile");we&&(we=JSON.parse(we)),ce.allCapturesInCurrentFolder=[...ae];const Ce=Z,Ge=Ce?.filter(Fe=>Fe?.title),Re=Ce?.filter(Fe=>Fe?.name&&!Fe.type);ue.ctrlKey?(Ge?.length>0&&(yield ce.copyCapturesToNewFolder(Ge,he.id||we.userConcept)),Re?.length>0&&ce.validFolderCopy(Re,he.id||we.userConcept)&&(yield ce.copyFoldersToNewFolder(Re,he.id||we.userConcept)),ce._snackbarService.openSnackBar("Data copied to folder!","success")):(Ge?.length>0&&(yield ce.moveCapturesToNewFolder(Ge,re||we.userConcept,he.id||we.userConcept)),Re?.length>0&&ce.validFolderMove(Re,he.id||we.userConcept)&&(yield ce.moveFoldersToNewFolder(Re,re||we.userConcept,he.id||we.userConcept)),ce._snackbarService.openSnackBar("Data moved to folder!","success"))})()}moveCapturesToNewFolder(ue,Z,he){return(0,st.Z)(function*(){var ce,re=!1,ae=!1;try{for(var Ce,we=(0,Zt.Z)(ue);re=!(Ce=yield we.next()).done;re=!1){const xt=Ce.value;{const en=yield(0,Me.Mu8)(Number(xt?.id)),nn=yield(0,Me.J0M)(Number(xt?.id)),yn=yield(0,Me.Mu8)(Number(Z)),Nn=yield(0,Me.J0M)(Number(he)),xn=yield(0,Me.kqu)(yn,en,"",at.u,!0);var Fe,Ge=!1,Re=!1;try{for(var ve,ze=(0,Zt.Z)(xn);Ge=!(ve=yield ze.next()).done;Ge=!1){const Tt=ve.value;yield(0,Me.TAP)(Tt?.id)}}catch(Tt){Re=!0,Fe=Tt}finally{try{Ge&&null!=ze.return&&(yield ze.return())}finally{if(Re)throw Fe}}if("isBoomgpt"in xt){const Tt=yield(0,Me.kqu)(yn,en,"",at.u,!0);var wt,Je=!1,nt=!1;try{for(var sn,kt=(0,Zt.Z)(Tt);Je=!(sn=yield kt.next()).done;Je=!1){const Qe=sn.value;yield(0,Me.TAP)(Qe?.id)}}catch(Qe){nt=!0,wt=Qe}finally{try{Je&&null!=kt.return&&(yield kt.return())}finally{if(nt)throw wt}}}yield(0,Me.KFq)(Nn,nn,at.u)}}}catch(xt){ae=!0,ce=xt}finally{try{re&&null!=we.return&&(yield we.return())}finally{if(ae)throw ce}}yield Me.smK.SyncDataOnline()})()}moveFoldersToNewFolder(ue,Z,he){return(0,st.Z)(function*(){try{var ce,re=!1,ae=!1;try{for(var Ce,we=(0,Zt.Z)(ue);re=!(Ce=yield we.next()).done;re=!1){const xt=Ce.value;{const en=yield(0,Me.Mu8)(xt?.id),nn=yield(0,Me.J0M)(xt?.id),yn=yield(0,Me.Mu8)(Z),Nn=yield(0,Me.J0M)(he),xn=yield(0,Me.kqu)(yn,en,"",at.u,!0),Tt=yield(0,Me.kqu)(yn,en,"",at.NF,!0);var Fe,Ge=!1,Re=!1;try{for(var ve,ze=(0,Zt.Z)(xn);Ge=!(ve=yield ze.next()).done;Ge=!1){const Qe=ve.value;yield(0,Me.TAP)(Qe?.id)}}catch(Qe){Re=!0,Fe=Qe}finally{try{Ge&&null!=ze.return&&(yield ze.return())}finally{if(Re)throw Fe}}var wt,Je=!1,nt=!1;try{for(var sn,kt=(0,Zt.Z)(Tt);Je=!(sn=yield kt.next()).done;Je=!1){const Qe=sn.value;yield(0,Me.TAP)(Qe?.id)}}catch(Qe){nt=!0,wt=Qe}finally{try{Je&&null!=kt.return&&(yield kt.return())}finally{if(nt)throw wt}}yield(0,Me.KFq)(Nn,nn,at.u),yield(0,Me.KFq)(Nn,nn,at.NF)}}}catch(xt){ae=!0,ce=xt}finally{try{re&&null!=we.return&&(yield we.return())}finally{if(ae)throw ce}}yield Me.smK.SyncDataOnline()}catch(xt){console.warn(xt)}})()}validFolderMove(ue,Z){return ue.some(re=>re.id==Z)?(this._snackbarService.openSnackBar("Cannot move a folder inside same folder!","error"),!1):!ue?.map(re=>{const ae=[];return this._folderService.getAllDescendentFolders(re?.id,ae,this.allCapturesInCurrentFolder),!ae?.length||!ae.includes(Number(Z))||(this._snackbarService.openSnackBar("The destination folder is a subfolder of the source folder.","error"),!1)}).includes(!1)}copyCapturesToNewFolder(ue,Z){return(0,st.Z)(function*(){var ae,he=!1,re=!1;try{for(var we,ce=(0,Zt.Z)(ue);he=!(we=yield ce.next()).done;he=!1){const Ce=we.value;{const Ge=yield(0,Me.J0M)(Ce?.id),Re=yield(0,Me.J0M)(Z);yield(0,Me.KFq)(Re,Ge,at.u)}}}catch(Ce){re=!0,ae=Ce}finally{try{he&&null!=ce.return&&(yield ce.return())}finally{if(re)throw ae}}yield Me.smK.SyncDataOnline()})()}copyFoldersToNewFolder(ue,Z){return(0,st.Z)(function*(){try{var ae,he=!1,re=!1;try{for(var we,ce=(0,Zt.Z)(ue);he=!(we=yield ce.next()).done;he=!1){const Ce=we.value;{const Ge=yield(0,Me.J0M)(Z),Re={};Re[Wt.co]={...Ce};const Fe=yield(0,Me.joo)(Re);yield(0,Me.KFq)(Ge,Fe,at.u),yield(0,Me.KFq)(Ge,Fe,at.NF)}}}catch(Ce){re=!0,ae=Ce}finally{try{he&&null!=ce.return&&(yield ce.return())}finally{if(re)throw ae}}yield Me.smK.SyncDataOnline()}catch(Ce){console.warn(Ce)}})()}validFolderCopy(ue,Z){return ue.some(re=>re.id==Z)?(this._snackbarService.openSnackBar("Cannot copy a folder inside same folder!","error"),!1):!ue?.map(re=>{const ae=[];return this._folderService.getAllDescendentFolders(re?.id,ae,this.allCapturesInCurrentFolder),!ae?.length||!ae.includes(Number(Z))||(this._snackbarService.openSnackBar("The destination folder is a subfolder of the source folder.","error"),!1)}).includes(!1)}uploadDocument(ue,Z,he,re){return(0,st.Z)(function*(){try{const ae=yield(0,Me.joo)(ue,null,null,null,Z,null,null),ce=yield(0,Me.J0M)(he);yield(0,Me.KFq)(ce,ae,at.u);const we=yield(0,Me.J0M)(re);yield(0,Me.GIn)(we,ae,at.cx,!0),yield Me.smK.SyncDataOnline();const Ce=yield(0,Me.J0M)(ae?.id);return{...ue?.[Wt.rG],id:Ce?.id}}catch(ae){throw console.error("Error uploading document:",ae),ae}})()}deleteCaptureConnection(ue,Z,he,re){var ae=this;return(0,st.Z)(function*(){const ce=yield(0,Me.Mu8)(Number(ue)),we=[];for(const Ce of Z){const Ge=yield(0,Me.Mu8)(Number(Ce)),Re=yield(0,Me.kqu)(ce,Ge,"",at.u,!0),Fe=yield(0,Me.Mu8)(Number(ae.entityId)),ze=yield(0,Me.kqu)(Fe,Ge,"","the_entity_s_crm_contact_s",!0);yield Promise.all([Re?.map(function(){var Je=(0,st.Z)(function*(nt){yield(0,Me.TAP)(nt?.id)});return function(nt){return Je.apply(this,arguments)}}()),ze?.map(function(){var Je=(0,st.Z)(function*(nt){yield(0,Me.TAP)(nt?.id)});return function(nt){return Je.apply(this,arguments)}}())]);const ve=["extension_indeed","extension_linkedin","extension_monster","extension_maps","extension_whatsapp","extension_merojob","web_crm"];if(Array.isArray(re))for(const Je of re)if(ve.includes(Je)){let nt=Je;nt=nt.replace("extension_","")+"_contact";const wt=`the_entity_s_${nt}_s`;yield ae.searchAndDeleteEntityContact(Ce,wt,nt)}we.push({success:!0,id:Ce})}return we})()}searchAndDeleteEntityContact(ue,Z,he){var re=this;return(0,st.Z)(function*(){try{const ae=new Me.LtL;ae.typeConnection=Z,ae.name="entity";const ce=new Me.LtL;ce.typeConnection=Z,ce.isOldConnectionType=!0,ce.reverse=!0,ce.name="contact",ce.freeschemaQueries=[ae];const we=new Me.LtL;we.conceptIds=[ue],we.name="top",we.freeschemaQueries=[ce],we.selectors=["self"],we.outputFormat=Me.xY7,(0,Me.og0)(we,"").subscribe(function(){var Ce=(0,st.Z)(function*(Ge){const Re=Ge?.[0].id,Fe=Ge?.[0]?.data?.boomgpt?.[Z+"_reverse"]?.[0]?.id;if(Re==ue){const ze=yield(0,Me.J0M)(Number(Re)),ve=yield(0,Me.J0M)(Number(Fe)),Je=Ge?.[0]?.data?.boomgpt?.[Z+"_reverse"]?.[0]?.data?.the_entity?.[Z];if((yield(0,Me.kqu)(ve,ze,he,"",!0))?.map(function(){var wt=(0,st.Z)(function*(kt){yield(0,Me.TAP)(kt?.id)});return function(kt){return wt.apply(this,arguments)}}()),Je&&1==Je?.length){const wt=yield(0,Me.J0M)(Number(re.userConcept));(yield(0,Me.kqu)(wt,ve,"contact","",!0))?.map(function(){var sn=(0,st.Z)(function*(xt){yield(0,Me.TAP)(xt?.id)});return function(xt){return sn.apply(this,arguments)}}())}}});return function(Ge){return Ce.apply(this,arguments)}}())}catch{console.error("Error: search and delete Entity Contact")}})()}deleteFolderConnection(ue,Z){return(0,st.Z)(function*(){const he=yield(0,Me.Mu8)(Number(ue)),re=[];for(const ae of Z){const ce=yield(0,Me.Mu8)(Number(ae)),we=yield(0,Me.kqu)(he,ce,"",at.u,!0),Ce=yield(0,Me.kqu)(he,ce,"",at.NF,!0);yield Promise.all(Ce?.map(function(){var Ge=(0,st.Z)(function*(Re){yield(0,Me.TAP)(Re?.id)});return function(Re){return Ge.apply(this,arguments)}}())),we?.map(function(){var Ge=(0,st.Z)(function*(Re){yield(0,Me.TAP)(Re?.id)});return function(Re){return Ge.apply(this,arguments)}}()),re.push({success:!0,id:ae})}return re})()}};let Pt=vt;return vt.\u0275fac=function(Z){return new(Z||vt)(ee.LFG(_t.e),ee.LFG(Rt.s),ee.LFG($.o),ee.LFG(Le.e),ee.LFG(Y._),ee.LFG(Bt))},vt.\u0275prov=ee.Yz7({token:vt,factory:vt.\u0275fac,providedIn:"root"}),Pt})()},4383:(Jn,Wn,St)=>{"use strict";St.d(Wn,{s:()=>ut});var st=St(5861),Zt=St(7899),Me=St(2902),Wt=St(9653);const at=(0,Wt.ZF)("mycategories");var Le=St(4650),Y=St(384),Bt=St(8154);let ut=(()=>{const vt=class{constructor(ue,Z,he){this.authService=ue,this.itemService=Z,this.store=he,this.allCategories$=this.store.pipe((0,Wt.Ys)((0,Wt.P1)(at,vt=>typeof vt>"u"?null:vt.filter(ue=>ue?.name)))),this.allTotalFolders=[],this.canCreateFolder=!1}nest(ue,Z=""){return ue.filter(he=>he?.parent==Z).map(he=>({...he,children:this.nest(ue,he?.id)}))}getSiblingFolders(ue,Z){return Z.filter(re=>ue?re?.parent==ue:""==re?.parent).map(re=>re?.name)}getFolderDirectory(ue,Z,he=[]){if(ue){const re=Z.filter(ce=>ce?.id==ue)[0],ae=re?.parent;he.unshift(re),ae&&this.getFolderDirectory(ae,Z,he)}}getNodeDirectory(ue,Z){const he=[];let re=[...Z];if(ue?.length>0)return ue.forEach(ae=>{const ce=re.filter(we=>we?.id==ae?.id)[0];he.push(ce),re=ce?.children}),he}getAllDescendentFolders(ue,Z=[],he){const re=[...he];for(const ae in re)re[ae]?.category_parent==ue&&(Z.push(re[ae]?.category_name?.toLowerCase()),this.getAllDescendentFolders(re[ae]?.id,Z,he))}checkUserSubscription(ue){var Z=this;return(0,st.Z)(function*(){return new Promise((he,re)=>{Z.checkDataType=ue;const ae=Z.authService.loadFromLocalStorage();var ce;Z.userConceptId=ae.userConcept,Z.itemService.getMySubscription().subscribe({next:(ce=(0,st.Z)(function*(we){Z.subscribedPlanId=we?.pricings?.[0]?.productId;let Ce="",Ge=!1;if(!Z.subscribedPlanId){const nt=(yield Z.getFreePlanDetails())?.filter(kt=>"0"===kt?.internal_product?.data?.price);Ce=nt[0]?.internal_product?.data?.name,Z.subscribedPlanId=Number(nt[0]?.internal_product?.id)}Ge=yield Z.checkPlanLimitation();let Fe=0,ze=0;"folder"===Z.checkDataType?(Fe=Number(Z.userFolderLimit),ze=Z.allTotalFolders.length):"file"===Z.checkDataType?(Fe=Z.filesUploadLimit,ze=Z.uploadedFilesCount):"fileSize"===Z.checkDataType&&(Fe=Z.filesUploadSizeLimit,ze=0),he({limit:Fe,createdCount:ze,isAllowedToCreate:Ge,subscription:Ce})}),function(Ce){return ce.apply(this,arguments)}),error:ce=>{console.error(ce),re(ce)},complete:()=>{}})})})()}checkPlanLimitation(){var ue=this;return(0,st.Z)(function*(){return new Promise(Z=>{var re;ue.itemService.searchLinkMultipleAll([{composition:ue.subscribedPlanId,listLinkers:[`${Me.$t}_s`,`${Me.aJ}_s`,`${Me.r}_s`],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:(re=(0,st.Z)(function*(ae){if(console.log("RESPONSE",ae),ue.userFolderLimit=ae?.internal_product?.[`internal_product_s_${Me.$t}_s`]?.[0]?.[Zt.FK]?.data?.limit,ue.filesUploadLimit=ae?.internal_product?.[`internal_product_s_${Me.aJ}_s`]?.[0]?.[Zt.aK]?.data?.limit,ue.filesUploadSizeLimit=ae?.internal_product?.[`internal_product_s_${Me.r}_s`]?.[0]?.[Zt.s$]?.data?.limit,"folder"===ue.checkDataType){const ce=yield ue.checkCreatedFolders();Z(ce)}else if("file"===ue.checkDataType){const ce=yield ue.checkUploadFileLimitations();Z(ce)}else if("fileSize"===ue.checkDataType){const ce=ue.filesUploadSizeLimit?.toLowerCase();let we,Ce;if(ce&&(we=ce.includes("mb"),Ce=ce.includes("gb")),we){const Ge=ce.split("mb"),Re=1024*Number(Ge[0]);Z(Re)}else if(Ce){const Ge=ce.split("gb"),Re=1024*Number(Ge[0])*1024;Z(Re)}}}),function(ce){return re.apply(this,arguments)})})})})()}checkUserSubscription_old(ue){var Z=this;return(0,st.Z)(function*(){return new Promise((he,re)=>{Z.checkDataType=ue;const ae=Z.authService.loadFromLocalStorage();var we;Z.userConceptId=ae.userConcept,Z.itemService.getSemanticConnection({compositionId:Z.userConceptId,linker:Me.PJ+"_s"}).subscribe({next:(we=(0,st.Z)(function*(Ce){let Ge="",Re=!1;if(Ce.count&&Ce.output.length){const wt=Ce?.output?.sort((sn,xt)=>{const en=new Date(sn?.data[Zt.LI].timestamp).getTime(),nn=new Date(xt?.data[Zt.LI].timestamp).getTime();return Number(nn)-Number(en)});Z.subscribedPlanId=Number(wt[0]?.id),Ge=wt[0]?.data[Zt.LI]?.name,Re=yield Z.checkLimitation()}else{const kt=(yield Z.getFreePlanDetails())?.filter(nn=>"0"===nn?.internal_product?.data?.price);Ge=kt[0]?.internal_product?.data?.name;const xt=Number(kt[0]?.internal_product?.id);Re=yield Z.updateUserToFreePackage(xt)}const ze={...Z.authService.loadFromLocalStorage(),pkg:Ge};Z.authService.saveToLocalStorage(ze);let ve=0,Je=0;"folder"===Z.checkDataType?(ve=Number(Z.userFolderLimit),Je=Z.allTotalFolders.length):"file"===Z.checkDataType&&(ve=Z.filesUploadLimit,Je=Z.uploadedFilesCount),he({limit:ve,createdCount:Je,isAllowedToCreate:Re,subscription:Ge,subscriptionId:Z.subscribedPlanId})}),function(Ge){return we.apply(this,arguments)}),error:we=>{console.error(we),re(we)},complete:()=>{}})})})()}updateUserToFreePackage(ue){var Z=this;return(0,st.Z)(function*(){return new Promise((he,re)=>{const ae={compositionJsons:[{[Zt.LI]:{id:ue,name:"Free",time:"yearly",price:0,timestamp:(new Date).toISOString(),expireDate:"Never"}}],compositionToJoin:Z.userConceptId,direction:"backward",linker:Me.PJ,both:!0,count:!0};Z.itemService.createCompositionAndLinker(ae).subscribe({next:ce=>{const we=ce?.data[0][Zt.LI]?.id;Z.subscribedPlanId=we;const Ce=Z.connectPackageToProductDetails(ue);he(Ce)},error:ce=>{console.error(ce),re(ce)},complete:()=>{}})})})()}connectPackageToProductDetails(ue){var Z=this;return(0,st.Z)(function*(){return new Promise(he=>{var ae;Z.itemService.createSemanticConnection({compositionId1:ue,compositionId2:Z.subscribedPlanId,linker:Me.uC}).subscribe({next:(ae=(0,st.Z)(function*(){const ce=yield Z.checkLimitation();he(ce)}),function(){return ae.apply(this,arguments)}),error:ae=>{console.error(ae)},complete:()=>{}})})})()}checkLimitation(){var ue=this;return(0,st.Z)(function*(){return new Promise(Z=>{var re;ue.itemService.searchLinkMultipleAll([{composition:ue.userConceptId,listLinkers:[`${Me.PJ}_s`],inpage:100,page:1,logic:"or",filterSearches:[]},{listLinkers:[`${Me.uC}_by`]},{listLinkers:[`${Me.$t}_s`,`${Me.aJ}_s`]}]).subscribe({next:(re=(0,st.Z)(function*(ae){const ce=ae?.the_user?.the_user_s_get_package_s;if(ce.length){let we={};if(we=ae?.the_user?.the_user_s_get_package_s[0],ce.length>1&&(we=ce?.sort((Re,Fe)=>{const ze=new Date(Re[Zt.LI]?.data?.timestamp).getTime(),ve=new Date(Fe[Zt.LI]?.data?.timestamp).getTime();return Number(ve)-Number(ze)})[0]),we?.[Zt.LI]?.subscription_package_s_package_product_by){const Ge=we?.[Zt.LI]?.subscription_package_s_package_product_by?.[0]?.internal_product?.internal_product_s_folder_limit_s?.[0]?.[Zt.FK]?.data?.limit;ue.userFolderLimit=Ge;const Re=we?.[Zt.LI]?.subscription_package_s_package_product_by?.[0]?.internal_product?.internal_product_s_upload_file_limit_s?.[0]?.[Zt.aK]?.data?.limit;ue.filesUploadLimit=Re}}if("folder"===ue.checkDataType){const we=yield ue.checkCreatedFolders();Z(we)}if("file"===ue.checkDataType){const we=yield ue.checkUploadFileLimitations();Z(we)}}),function(ce){return re.apply(this,arguments)})})})})()}checkCreatedFolders(){return new Promise((ue,Z)=>{this.allCategories$.subscribe({next:he=>{this.allTotalFolders=he;const re=Number(this.userFolderLimit);this.canCreateFolder=this.allTotalFolders.length<re||!0===isNaN(re),ue(this.canCreateFolder)},error:he=>{console.error(he),Z(he)}})})}getFreePlanDetails(){return new Promise(ue=>{this.itemService.listAllWithoutAuthWithLinker([{type:"internal_product",listLinkers:[`${Me.$t}_s`,`${Me.aJ}_s`],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:he=>{ue(he)}})})}checkUploadFileLimitations(){return new Promise((ue,Z)=>{this.itemService.getSemanticConnection({compositionId:this.userConceptId,linker:`${Me.cx}_s`}).subscribe({next:re=>{const ae=re?.output;this.uploadedFilesCount=ae?ae.length:0;let ce=!1;const we=Number(this.filesUploadLimit);ce=this.uploadedFilesCount<we||!0===isNaN(we),ue(ce)},error:re=>{console.error(re),Z(re)}})})}checkUploadFileLimitations_old(){return new Promise((ue,Z)=>{this.itemService.searchLinkMultipleAll([{composition:this.userConceptId,listLinkers:[`${Me.cx}_s`],inpage:100,page:1,logic:"or",filterSearches:[]}]).subscribe({next:re=>{const ae=re?.the_user?.[`the_user_s_${Me.cx}_s`];this.uploadedFilesCount=ae?ae.length:0;let ce=!1;const we=Number(this.filesUploadLimit);ce=this.uploadedFilesCount<we||!0===isNaN(we),ue(ce)},error:re=>{console.error(re),Z(re)}})})}};let Pt=vt;return vt.\u0275fac=function(Z){return new(Z||vt)(Le.LFG(Y.e),Le.LFG(Bt.e),Le.LFG(Wt.yh))},vt.\u0275prov=Le.Yz7({token:vt,factory:vt.\u0275fac,providedIn:"root"}),Pt})()},9808:(Jn,Wn,St)=>{"use strict";St.d(Wn,{n:()=>Zt});var st=St(6805);function Zt(Me,Wt){const at="object"==typeof Wt;return new Promise((zt,ee)=>{let Rt,_t=!1;Me.subscribe({next:$=>{Rt=$,_t=!0},error:ee,complete:()=>{_t?zt(Rt):at?zt(Wt.defaultValue):ee(new st.K)}})})}},6636:(Jn,Wn,St)=>{var st=St(7156).default;self,Jn.exports=(()=>{"use strict";var Zt={26:function(zt,ee,_t){var Rt=this&&this.__createBinding||(Object.create?function(le,fe,Ae,Ie){void 0===Ie&&(Ie=Ae);var Se=Object.getOwnPropertyDescriptor(fe,Ae);(!Se||("get"in Se?!fe.__esModule:Se.writable||Se.configurable))&&(Se={enumerable:!0,get:function(){return fe[Ae]}}),Object.defineProperty(le,Ie,Se)}:function(le,fe,Ae,Ie){void 0===Ie&&(Ie=Ae),le[Ie]=fe[Ae]}),$=this&&this.__setModuleDefault||(Object.create?function(le,fe){Object.defineProperty(le,"default",{enumerable:!0,value:fe})}:function(le,fe){le.default=fe}),Le=this&&this.__importStar||function(le){if(le&&le.__esModule)return le;var fe={};if(null!=le)for(var Ae in le)"default"!==Ae&&Object.prototype.hasOwnProperty.call(le,Ae)&&Rt(fe,le,Ae);return $(fe,le),fe},Y=this&&this.__awaiter||function(le,fe,Ae,Ie){return new(Ae||(Ae=Promise))(function($e,ct){function Ze(Ct){try{qe(Ie.next(Ct))}catch(Ut){ct(Ut)}}function Be(Ct){try{qe(Ie.throw(Ct))}catch(Ut){ct(Ut)}}function qe(Ct){Ct.done?$e(Ct.value):function Se($e){return $e instanceof Ae?$e:new Ae(function(ct){ct($e)})}(Ct.value).then(Ze,Be)}qe((Ie=Ie.apply(le,fe||[])).next())})};Object.defineProperty(ee,"__esModule",{value:!0}),ee.handleAddSharedWithMeFolder=ee.getPathToFolder=ee.deleteFolder=ee.createFolder=ee.setCurrentFolderId=ee.updateSelectedFolders=ee.insertFolderListItem=ee.handleFolderRightOption=ee.getAllFolders=ee.nestedInsertFolderTree=ee.addEventListenerToCheckboxElement=ee.folderToggler=ee.createNestedTreeAndAddToDOM=ee.currentFolderId=ee.globalFolders=ee.selectedFolders=void 0;const Bt=Le(_t(215)),ut=_t(793),Pt=Le(_t(793)),vt=_t(726),Ft=_t(777),ue=_t(356);ee.selectedFolders=[],ee.globalFolders=[];let Z=[],he={},re=[],ae=!1,ce=!1,we=!1,Ce=[],Ge=[];function Re(le){return Y(this,void 0,void 0,function*(){try{const fe=le.querySelectorAll(`#${ut.myprefix}category_list_tree`);if(!fe.length)return;le.getElementById(`${ut.myprefix}loader`);const Ie=yield Bt.getUser();fe?.forEach(Se=>{for(var $e;Se?.firstChild;)null===($e=Se?.firstChild)||void 0===$e||$e.remove();let ct=le.querySelectorAll(`.${ut.myprefix}root_folder`);ct?.length>0&&ct.forEach(qe=>qe?.remove());let Ze=document.createElement("div");Ze.classList.add(`${ut.myprefix}root_folder`),Ze.textContent="Boom",Ze.addEventListener("contextmenu",qe=>{qe.preventDefault(),Be?.params.disableRightClick||en(qe,le,!1)});const Be=(0,ue.getCurrentTreeParams)(le);yn(Ze,Be),nn(Ze,Be),Se.before(Ze),console.log("Folder MS Completed Adding root listeners"),ve(Se,Ie.userConcept,le,Be),console.log("Folder MS Completed Adding nested tree"),Fe(le)}),Ke(le)}catch(fe){console.error("Error in creating nested tree",fe)}})}function Fe(le){let fe=le.querySelectorAll(`.${ut.myprefix}toggler`);for(let Ae=0;Ae<fe.length;Ae++)fe[Ae].addEventListener("click",function(){this.parentElement.querySelector(`.${ut.myprefix}submenuLevel`).classList.toggle(`${ut.myprefix}active`);let Ie=this.parentElement.querySelector(`.${ut.myprefix}openFolderContent`).getAttribute("data-folder-id");Z=Z.includes(Ie)?Z.filter(Se=>Se!==Ie):[...Z,Ie]})}function ze(le){le?.addEventListener("change",fe=>{null!=ee.selectedFolders&&ee.selectedFolders.some(Ae=>Ae.id==fe.target.value)?ee.selectedFolders=null==ee.selectedFolders?void 0:ee.selectedFolders.filter(Ae=>Ae.id!=fe.target.value):ee.selectedFolders.push({name:fe.target.name,id:fe.target.value})})}function ve(le,fe,Ae,Ie,Se=!1){var $e,ct,Ze,Be;try{const qe=Ge.find(it=>"the_user_s_read_access"==it.characterValue),Ct=new Map;re.filter(it=>{var Ot,Gt;return 1==fe?qe?.id==it.typeId&&(null===(Gt=null===(Ot=he?.[it.toTheConceptId])||void 0===Ot?void 0:Ot.data)||void 0===Gt?void 0:Gt.boomFolder):it.ofTheConceptId==fe&&qe?.id!=it.typeId}).sort((it,Ot)=>{var Gt,on,Ht,an;if(1===it.toTheConceptId)return 1;if(1===Ot.toTheConceptId)return-1;const Tn=he?.[it.toTheConceptId],On=he?.[Ot.toTheConceptId],Jt=(null===(on=null===(Gt=Tn?.data)||void 0===Gt?void 0:Gt[vt.boomFolderComposition])||void 0===on?void 0:on.name)||"",vn=(null===(an=null===(Ht=On?.data)||void 0===Ht?void 0:Ht[vt.boomFolderComposition])||void 0===an?void 0:an.name)||"";return Jt?.localeCompare(vn||"")}).map(it=>{const Ot=`${it.ofTheConceptId}-${it.toTheConceptId}`;Ct.has(Ot)||Ct.set(Ot,it)});const Ut=Array.from(Ct.values());let Nt=0;for(let it=0;it<Ut.length;it++){let Ot=Ut[it],Gt=he[Ot.toTheConceptId],on=Gt?.id,Ht="";if(!(null===($e=Gt?.data)||void 0===$e)&&$e[vt.boomFolderComposition]&&(Ht=null===(Ze=null===(ct=Gt?.data)||void 0===ct?void 0:ct[vt.boomFolderComposition])||void 0===Ze?void 0:Ze.name),!Ht||!on){Nt+=1;continue}let an=kt(le,on,Ht,Ae,Ie,Se);null!==(Be=Ie?.params)&&void 0!==Be&&Be.showCheckbox&&ze(an);let Tn=!1;if(1==Ot.id&&re.some(On=>{var Jt,vn;return qe?.id==On.typeId&&(null===(vn=null===(Jt=he?.[On.toTheConceptId])||void 0===Jt?void 0:Jt.data)||void 0===vn?void 0:vn.boomFolder)})&&(Tn=!0),re.some(On=>Ot.toTheConceptId==On.ofTheConceptId)||Tn){let On=le.querySelectorAll(":scope > li")[it-Nt];On.setAttribute("class",`${ut.myprefix}has_submenu`);let Jt=document.createElement("ul"),vn=document.createElement("span");vn.setAttribute("class",`${ut.myprefix}toggler`),Jt.setAttribute("class",`${ut.myprefix}submenuLevel`),(Z.includes(Gt.id.toString())||ee.currentFolderId==on)&&Jt.classList.add(`${ut.myprefix}active`),On.append(Jt);let to=On.querySelectorAll("ul")[0];On.insertBefore(vn,to),ve(to,Ot.toTheConceptId,Ae,Ie,!!Tn||Se)}}}catch(qe){console.error("FolderMS nested Intert Folder Error:",qe)}}function Je(le,fe){return Y(this,void 0,void 0,function*(){Ft.Logger.logfunction("getAllFolders");try{ce=!0;const Ie=(yield Bt.getUser())?.userConcept;let Se=yield(0,Ft.RecursiveSearchApiRaw)(Ie,[],"",["the_boom_folder_s_folder","the_user_s_read_access"]);console.log("FolderMS",Se);let $e=Se.compositionIds,ct=Se.internalConnections,Ze=Se.externalConnections,Be=yield(0,Ft.GetCompositionFromConnectionsWithDataIdIndex)($e,ct),qe=yield(0,Ft.GetConnectionBulk)(Ze),Ct=[],Ut=[],Nt=[];he=Be,re=yield Promise.all(qe.filter(it=>{var Ot;const Gt=`${it.ofTheConceptId}-${it.toTheConceptId}`,on=`${it.toTheConceptId}-${it.ofTheConceptId}`;if(Nt.includes(Gt))return!1;Nt.push(Gt),Nt.push(on),Ct.includes(it.typeId)||Ct.push(it.typeId);const Ht=he?.[it.toTheConceptId];return!!(null===(Ot=Ht?.data)||void 0===Ot?void 0:Ot[vt.boomFolderComposition])}));for(let it=0;it<Ct.length;it++)Ut.push((0,Ft.GetTheConcept)(Ct[it]));if(Ge=yield Promise.all(Ut),yield me(Ie,le,fe),yield function dt(le,fe,Ae){var Ie,Se,$e,ct;return Y(this,void 0,void 0,function*(){Ft.Logger.logfunction("setGlobalFolders",[fe]);let Ze=[];for(let Be=0;Be<le.length;Be++){const qe=le[Be],Ct=Ae[qe.toTheConceptId];null!==(Se=null===(Ie=Ct?.data)||void 0===Ie?void 0:Ie[vt.boomFolderComposition])&&void 0!==Se&&Se.name&&Ze.push({id:qe.toTheConceptId,name:(null===(ct=null===($e=Ct?.data)||void 0===$e?void 0:$e[vt.boomFolderComposition])||void 0===ct?void 0:ct.name)||"",parent:qe.ofTheConceptId==fe?"":qe.ofTheConceptId.toString()})}ee.globalFolders=Ze?.filter(Be=>Be&&Be?.name),ee.globalFolders=null==ee.globalFolders?void 0:ee.globalFolders.sort(function(Be,qe){var Ct,Ut;let Nt=null===(Ct=Be?.name)||void 0===Ct?void 0:Ct.toLowerCase(),it=null===(Ut=qe?.name)||void 0===Ut?void 0:Ut.toLowerCase();return Nt.localeCompare(it)})})}(qe,Ie,Be),console.log("FolderMS fetched all folders adding to tree"),we=!0,ce=!1,le){const it=(0,ue.getShadowRoot)(le);if(!it)return ee.globalFolders;yield Re(it)}else fe&&(yield Re(fe));return ee.globalFolders}catch(Ae){console.error("Error in fetching folders",Ae)}})}function nt(le,fe,Ae,Ie=!1){var Se,$e;Z=[...Z,fe.toString()];let ct=Ae.querySelectorAll(`#${ut.myprefix}new_category_wrapper`);ct?.length>0&&ct.forEach(Jt=>Jt?.remove());let Ze=document.createElement("div");Ze.setAttribute("id",`${ut.myprefix}new_category_wrapper`);let Be=document.createElement("input");Be.setAttribute("type","text"),Be.setAttribute("id",`${ut.myprefix}new_category_input`),Be.setAttribute("class",`${ut.myprefix}field_input`),Be.setAttribute("placeholder","New Folder name");const qe="New Folder";let Ut=ee.globalFolders.filter(Jt=>Jt?.parent==fe).filter(Jt=>{let vn=Jt?.name;return Jt?.parent==fe&&vn.match(/^New Folder \([0-9]*\)/gm)||vn.match(/^New Folder/gm)}),Nt=Ut.sort((Jt,vn)=>{var to,jo;return(null===(to=Jt?.name)||void 0===to?void 0:to.replace(/\D/g,""))-(null===(jo=vn?.name)||void 0===jo?void 0:jo.replace(/\D/g,""))}),Ot=(null===(Se=Nt[Nt.length-1])||void 0===Se?void 0:Se.name)?.replace(/\D/g,"");Be.value=Ut.length>0?qe+` (${Number(Ot)+1})`:qe,Ie&&(Be.value=le.getAttribute("data-name"));let Gt=document.createElement("div");Gt.setAttribute("class",`${ut.myprefix}field_error`);let on=document.createElement("div");on.setAttribute("class",`${ut.myprefix}field_success`);let Ht=document.createElement("input");Ht.setAttribute("type","button"),Ht.setAttribute("id",`${ut.myprefix}new_category_button`),Ht.setAttribute("value","Save");let an=document.createElement("input");if(an.setAttribute("type","button"),an.setAttribute("id",`${ut.myprefix}small_close_button`),an.setAttribute("value","Close"),Ze.append(Be),Ze.append(Gt),Ze.append(Ht),Ze.append(an),Ie){const Jt=ee.globalFolders.find(to=>to.id.toString()==le.getAttribute("data-id"));Ae.querySelector(`[data-id="${Jt.id}"]`)?.insertAdjacentElement("afterend",Ze)}else le?.append(Ze);Be.focus(),Be.select();let Tn=!1;Be.addEventListener("focusout",Jt=>{Tn?Tn=!1:wt(fe,Be,Ze,Gt,on,Ae,Ie)}),Be.addEventListener("keyup",Jt=>{"Escape"==Jt.key?(Tn=!0,Ze?.remove(),setTimeout(()=>{Tn&&(Tn=!1)},200)):"Enter"==Jt.key&&wt(fe,Be,Ze,Gt,on,Ae,Ie)}),null===($e=document.querySelectorAll(`.${ut.myprefix}sidebar_body`)[0])||void 0===$e||$e.append(on),Ht.addEventListener("click",Jt=>Y(this,void 0,void 0,function*(){return wt(fe,Be,Ze,Gt,on,Ae,Ie)})),an.addEventListener("click",Jt=>{Ze?.remove()})}function wt(le,fe,Ae,Ie,Se,$e,ct){if(ae)return;ae=!0;const Ze=ee.globalFolders.find(qe=>qe.id==le);let Be=!1;if(ct?Ze&&Ze?.name&&"Contacts"!=Ze.name&&"Projects"!=Ze.name&&"Chats"!=Ze.name&&(Be=""!=fe.value.trim()&&!(null!=ee.globalFolders&&ee.globalFolders.some(qe=>qe?.name==fe.value.trim()&&qe?.parent==Ze.parent))):Be=""!=fe.value.trim()&&!(null!=ee.globalFolders&&ee.globalFolders.some(qe=>qe?.name==fe.value.trim()&&qe?.parent==le)),!ct&&Be){let qe={};qe=le?{name:fe.value.trim(),parent:le}:{name:fe.value.trim(),parent:""},Ae?.remove(),Y(this,void 0,void 0,function*(){yield Tt(qe.name,""==qe.parent?void 0:parseInt(qe.parent),$e),Se.innerHTML="New Folder Created!",setTimeout(()=>{Se.remove()},2500),Ie.innerHTML=""})}else ct&&Be?Y(this,void 0,void 0,function*(){var qe;const Ct=he[Ze.id],Ut=new Ft.PatcherStructure;Ut.compositionId=Ze.id,!(null===(qe=Ct?.data)||void 0===qe)&&qe.boomFolder&&(Ut.patchObject={name:fe.value.trim()},he[Ze.id].data.boomFolder.name=fe.value.trim()),ee.globalFolders=ee.globalFolders.map(Nt=>Nt.id==Ze.id?Object.assign(Object.assign({},Nt),{name:fe.value.trim()}):Nt),setTimeout(()=>{if(Ae?.parentNode)try{Ae?.remove()}catch(Nt){console.log(Nt)}},0),yield Re($e),yield(0,Ft.UpdateCompositionLocal)(Ut),xn({id:Ze.id,name:fe.value,parent:Ze.parent},"update"),Se.innerHTML="Updated Folder!",setTimeout(()=>{Se?.remove()},2500),Ie.innerHTML="",setTimeout(()=>Y(this,void 0,void 0,function*(){yield Je(void 0,$e)}),500)}):ct&&!Be?(console.log(Ae,"formwrapper not allwoed but is update"),Se.innerHTML="",Ie.innerHTML="Folder already exists or not valid."):(Se.innerHTML="",Ie.innerHTML="Folder already exists or not valid.");ae=!1}function kt(le,fe,Ae,Ie,Se,$e=!1){var ct,Ze;let Be=document.createElement("li");Be.setAttribute("data-id",fe),Be.setAttribute("data-name",Ae);let qe=document.createElement("label"),Ct=null;Se.params.showCheckbox&&(Ct=document.createElement("input"),Ct.setAttribute("type","checkbox"),Ct.setAttribute("id",ut.myprefix+Ae),Ct.setAttribute("value",fe),Ct.setAttribute("name",Ae),Ct.checked=function sn(le){return!!Array.isArray(ee.selectedFolders)&&!(null==ee.selectedFolders||!ee.selectedFolders.find(fe=>fe.id==le))}(fe),Ct.setAttribute("class",`${ut.myprefix}folder_checkbox`),(null!==(ct=parseInt(fe))&&void 0!==ct?ct:0)<0&&(Ct.style.display="none"),qe.append(Ct)),!(null===(Ze=Se?.params)||void 0===Ze)&&Ze.onCurrentFolderChange&&ee.currentFolderId==parseInt(fe)&&qe.classList.add(`${ut.myprefix}current_folder`),yn(qe,Se),"1"!=fe&&nn(Be,Se),Be.append(qe);const Ut=document.createElement("span");return Ut.innerText=Ae,Ut.classList.add(ut.myprefix+"openFolderContent"),Ut.setAttribute("data-folder-id",fe),qe.append(Ut),qe.addEventListener("contextmenu",Nt=>{var it;Nt.preventDefault(),"1"!=fe&&(null===(it=Se?.params)||void 0===it||!it.disableRightClick)&&!$e&&en(Nt,Ie)}),le.append(Be),Ct}function en(le,fe,Ae=!0){var Ie,Se,$e,ct,Ze;null===(Ie=fe.getElementById(`${ut.myprefix}folder_actions`))||void 0===Ie||Ie.remove();const Be=le.currentTarget.parentElement;let qe=Be.getAttribute("data-id"),Ct=le.pageY+5-window.scrollY,Ut=le.pageX+5-window.scrollX;window.innerHeight>200&&window.innerHeight-Ct<115?Ct-=125:window.innerWidth>300&&window.innerWidth-Ut<130&&(Ut-=125);let Nt=`\n  <div id="${ut.myprefix}folder_actions" \n    style="top: ${Ct}px; left: ${Ut}px;">\n    <ul>\n      <li><a id="${ut.myprefix}folder_action_create" role="button">New Folder</a></li>\n      ${Ae?`\n        <li><a id="${ut.myprefix}folder_action_rename" role="button">Rename Folder</a></li>\n        <li><a id="${ut.myprefix}folder_action_delete" role="button">Delete Folder</a></li>\n        `:""}\n    </ul>\n  </div>\n  `;null===(Se=fe.querySelector(`.${ut.myprefix}boom_sidebar`))||void 0===Se||Se.insertAdjacentHTML("beforeend",Nt);const it=()=>{var Ot;null===(Ot=fe.getElementById(`${ut.myprefix}folder_actions`))||void 0===Ot||Ot.remove(),window.removeEventListener("click",it)};window.addEventListener("click",it),fe.addEventListener("click",Ot=>{var Gt,on;null!==(Gt=fe.querySelector(`.${ut.myprefix}boom_sidebar #${ut.myprefix}folder_actions`))&&void 0!==Gt&&Gt.contains(Ot.target)||null===(on=fe.getElementById(`${ut.myprefix}folder_actions`))||void 0===on||on.remove()}),null===($e=fe.getElementById(`${ut.myprefix}folder_action_create`))||void 0===$e||$e.addEventListener("click",()=>{var Ot;nt(Be,qe,fe),null===(Ot=fe.getElementById(`${ut.myprefix}folder_actions`))||void 0===Ot||Ot.remove()}),null===(ct=fe.getElementById(`${ut.myprefix}folder_action_rename`))||void 0===ct||ct.addEventListener("click",()=>{nt(Be,qe,fe,!0)}),null===(Ze=fe.getElementById(`${ut.myprefix}folder_action_delete`))||void 0===Ze||Ze.addEventListener("click",()=>Y(this,void 0,void 0,function*(){var Ot,Gt,on;null===(Ot=fe.getElementById(`${ut.myprefix}folder_actions`))||void 0===Ot||Ot.remove();const Ht=ee.globalFolders.find(Tn=>Tn.id==parseInt(qe));let an=(0,ue.getCurrentTreeParams)(fe);null!==(Gt=an?.params)&&void 0!==Gt&&Gt.manualDeleteFn?null===(on=an?.params)||void 0===on||on.manualDeleteFn(Ht):(yield Qe(Ht,fe),yield Je(void 0,fe))}))}function nn(le,fe){var Ae;null!=(null===(Ae=fe?.params)||void 0===Ae?void 0:Ae.dropFn)&&(le.addEventListener("dragover",Ie=>{var Se,$e,ct,Ze;if(Ie.preventDefault(),null===(Se=Ie.currentTarget)||void 0===Se||!Se.querySelector(`.${ut.myprefix}dragover`)){let Be=document.createElement("div");null===($e=Be?.classList)||void 0===$e||$e.add(`${ut.myprefix}dragover`),Ie.currentTarget.querySelector("label")?null===(ct=Ie.currentTarget.querySelector("label"))||void 0===ct||ct.insertAdjacentElement("afterend",Be):null===(Ze=Ie.currentTarget)||void 0===Ze||Ze.append(Be)}}),le.addEventListener("dragleave",Ie=>{var Se,$e;Ie.preventDefault(),null===($e=null===(Se=Ie.currentTarget)||void 0===Se?void 0:Se.querySelector(`.${ut.myprefix}dragover`))||void 0===$e||$e.remove()}),le.addEventListener("drop",Ie=>{var Se,$e,ct,Ze;Ie.preventDefault(),Ie.stopPropagation(),null===($e=null===(Se=Ie.currentTarget)||void 0===Se?void 0:Se.querySelector(`.${ut.myprefix}dragover`))||void 0===$e||$e.remove();let Be=ee.globalFolders.find(qe=>qe.id.toString()==Ie.currentTarget.getAttribute("data-id"));Be||(Be={id:void 0,name:void 0}),null!==(ct=fe?.params)&&void 0!==ct&&ct.dropFn&&(null===(Ze=fe?.params)||void 0===Ze||Ze.dropFn(Ie,Be))}))}function yn(le,fe){var Ae,Ie,Se,$e,ct;if(null!==(Ae=fe?.params)&&void 0!==Ae&&Ae.onCurrentFolderChange){le.addEventListener("click",Be=>{var qe,Ct,Ut,Nt;const it=null===(qe=Be?.currentTarget)||void 0===qe?void 0:qe.parentElement,Ot=it?.getAttribute("data-id");if("li"==it.tagName.toLowerCase()&&it.querySelector(":scope > ul")){null===(Ct=it.querySelector(":scope > ul"))||void 0===Ct||Ct.classList.add(`${ut.myprefix}active`);let Gt=it.getAttribute("data-id");Z=[...Z,Gt]}null!==(Ut=fe?.params)&&void 0!==Ut&&Ut.onCurrentFolderChange&&(null===(Nt=fe?.params)||void 0===Nt||Nt.onCurrentFolderChange(Ot?parseInt(Ot):void 0))});const Ze=document.createElement("span");Ze.classList.add(`${ut.myprefix}clickable_folder_icon_placeholder`),le.prepend(Ze),"span"==(null===(Ie=le?.tagName)||void 0===Ie?void 0:Ie.toLowerCase())&&"li"==(null===($e=null===(Se=le?.parentElement)||void 0===Se?void 0:Se.tagName)||void 0===$e?void 0:$e.toLowerCase())&&null!==(ct=le?.parentElement)&&void 0!==ct&&ct.querySelector(":scope > ul")&&le.parentElement.addEventListener("click",Be=>{var qe,Ct,Ut,Nt;const it=null===(qe=Be?.currentTarget)||void 0===qe?void 0:qe.parentElement,Ot=it?.getAttribute("data-id");if("li"==it.tagName.toLowerCase()&&it.querySelector(":scope > ul")){null===(Ct=it.querySelector(":scope > ul"))||void 0===Ct||Ct.classList.add(`${ut.myprefix}active`);let Gt=it.getAttribute("data-id");Z=[...Z,Gt]}null!==(Ut=fe?.params)&&void 0!==Ut&&Ut.onCurrentFolderChange&&(null===(Nt=fe?.params)||void 0===Nt||Nt.onCurrentFolderChange(Ot?parseInt(Ot):void 0))})}}function xn(le,fe){const Ae=document.createEvent("Event");Ae.initEvent("onBCFolderCreated",!0,!0),Ae.folder=le,Ae.actionType=fe,document.dispatchEvent(Ae)}function Tt(le,fe,Ae){var Ie,Se,$e;return Y(this,void 0,void 0,function*(){const ct=new Ft.LocalTransaction;try{yield ct.initialize(),Date.now();const Be=fe||Pt.config.userConcept;if(Ce.some(Ht=>Ht.name==le&&Ht.parent==Be))for(;Ce.some(Ht=>Ht.name==le&&Ht.parent==Be);)yield At(100);Ce.push({name:le,parent:Be});let qe=ee.globalFolders.find(Ht=>Ht.name==le&&Ht.parent==Be);if(qe)return(0,Ft.GetTheConceptLocal)(qe.id);let Ut,Nt,Ct=!1;const it=yield Bt.getUser();if(fe){if("Projects"==(null===(Se=null===(Ie=he[fe]?.data)||void 0===Ie?void 0:Ie[vt.boomFolderComposition])||void 0===Se?void 0:Se.name)&&fe==it.userConcept){Ct=!0;const an=yield Bt.createProject({title:le});Ut=null===($e=an?.data)||void 0===$e?void 0:$e.projectId,Nt=yield(0,Ft.GetTheConceptLocal)(Ut)}}else fe=it.userConcept;let Ot;if(!Ct){const Ht={[vt.boomFolderComposition]:{name:le,parent:it.userConcept!=fe?fe:""}};Nt=yield ct.CreateTheCompositionLocal(Ht),Ut=Nt.id;const an=yield(0,Ft.GetTheConcept)(fe||it.userConcept);yield ct.CreateConnection(an,Nt,"the_boom_folder_s_contain");const Tn=yield ct.CreateConnection(an,Nt,"the_boom_folder_s_folder");re.push(Tn),he[Nt.id.toString()]={id:Nt.id,data:Ht},Ot=ct.commitTransaction()}let Gt={id:Ut,name:le,parent:fe||""};ee.globalFolders.push(Gt),Ce=Ce.filter(Ht=>Ht.name!=le&&Ht.parent!=Be),Ae&&(yield Re(Ae)),null!=Ot&&(yield Ot);const on=yield(0,Ft.GetTheConceptLocal)(Nt.id);return on>0&&(Gt.id=on.id),xn(Gt,"create"),Ae&&setTimeout(()=>Y(this,void 0,void 0,function*(){yield Je(void 0,Ae)}),50),on||void 0}catch(Ze){console.error("Error in creating folder",Ze),ct.rollbackTransaction()}})}function Qe(le,fe){var Ae,Ie,Se;return Y(this,void 0,void 0,function*(){try{let $e=le.parent;if(we||(yield Je()),!le)return;$e=$e?parseInt($e):Pt.config.userConcept;let ct=re.filter(Be=>Be.ofTheConceptId==$e&&Be.toTheConceptId==le.id);for(let Be=0;Be<ct.length;Be++){const qe=ct[Be];yield(0,Ft.DeleteConnectionById)(qe.id)}if((yield(0,Ft.GetTheConcept)(le.id)).userId==Pt.config.userId&&(yield(0,Ft.DeleteConceptById)(le.id)),yield Ft.SyncData.SyncDataOnline(),ee.globalFolders=ee.globalFolders.filter(Be=>Be.id!=le.id),xn(le,"delete"),fe){const Be=fe.querySelector(`li[data-id="${le.id}"]`);0==(null===(Ie=null===(Ae=Be?.querySelector(":scope > ul"))||void 0===Ae?void 0:Ae.children)||void 0===Ie?void 0:Ie.length)&&(Be?.querySelector(`${ut.myprefix}toggler`),null===(Se=Be?.querySelector(":scope > ul"))||void 0===Se||Se.remove()),Be?.remove()}return!0}catch($e){console.error("Error in deleting folder",$e)}})}function Ke(le){var fe,Ae,Ie,Se;if(ee.currentFolderId){let $e=le.querySelector(`[data-id="${ee.currentFolderId}"]`);for(;$e?.closest("li");){null===(Ie=null===(Ae=null===(fe=$e?.closest("li"))||void 0===fe?void 0:fe.querySelector(":scope > ul"))||void 0===Ae?void 0:Ae.classList)||void 0===Ie||Ie.add(`${ut.myprefix}active`);const ct=$e.getAttribute("data-id");ct&&(Z=[...Z,ct]),$e=(null===(Se=$e.parentElement)||void 0===Se?void 0:Se.closest("li"))||null}}}function se(le){var fe,Ae,Ie;let Se={};return!(null===(fe=le?.data)||void 0===fe)&&fe[vt.boomFolderComposition]&&(Se={id:le.id,name:null===(Ie=null===(Ae=le?.data)||void 0===Ae?void 0:Ae[vt.boomFolderComposition])||void 0===Ie?void 0:Ie.name}),Se}function me(le,fe,Ae){var Ie;return Y(this,void 0,void 0,function*(){let Se;Ft.Logger.logfunction("handleAddSharedWithMeFolder",[le]),fe?Se=(0,ue.getRenderTreeSidebarOption)(fe):Ae&&(Se=(0,ue.getCurrentTreeParams)(Ae)),null!==(Ie=Se?.params)&&void 0!==Ie&&Ie.sharedFolder&&(he[1]={id:1,data:{[vt.boomFolderComposition]:{name:"Shared With Me",parent:""}}},re.push({id:1,ofTheConceptId:le,toTheConceptId:1,userId:0,mainKey:0,orderId:1e3,typeId:100201749,accessId:0}))})}function At(le){return new Promise(fe=>setTimeout(fe,le))}ee.createNestedTreeAndAddToDOM=Re,ee.folderToggler=Fe,ee.addEventListenerToCheckboxElement=ze,ee.nestedInsertFolderTree=ve,ee.getAllFolders=Je,ee.handleFolderRightOption=nt,ee.insertFolderListItem=kt,ee.updateSelectedFolders=function xt(le){ee.selectedFolders=le||[]},ee.setCurrentFolderId=function Nn(le,fe){var Ae,Ie;if(ee.currentFolderId!=le&&(ee.currentFolderId=le,fe)){const Se=(0,ue.getShadowRoot)(fe);let $e=Se?.querySelectorAll("[data-id]");$e?.forEach(ct=>{var Ze,Be;"li"==ct.tagName.toLowerCase()&&(null===(Be=null===(Ze=ct.querySelector(":scope > label"))||void 0===Ze?void 0:Ze.classList)||void 0===Be||Be.remove(`${ut.myprefix}current_folder`))}),ee.currentFolderId&&(null===(Ie=null===(Ae=Se?.querySelector(`[data-id="${ee.currentFolderId}"]`))||void 0===Ae?void 0:Ae.querySelector(":scope > label"))||void 0===Ie||Ie.classList.add(`${ut.myprefix}current_folder`),Se&&Ke(Se))}},ee.createFolder=Tt,ee.deleteFolder=Qe,ee.getPathToFolder=function We(le){var fe,Ae,Ie;return Y(this,void 0,void 0,function*(){try{if(!le||le==Pt.config.userConcept)return[];we||(yield Je());let Se=le,$e=[];const ct={id:1,name:"Shared With Me"};if(1==le||"1"==le.toString())return[ct];for(;ce;)yield At(500);for(;Pt.config.userConcept&&Se&&Se!=Pt.config.userConcept;){let Ze=ee.globalFolders.find(Be=>Be.id==Se);Ze&&$e.push({id:Ze.id,name:Ze.name}),Se=Ze?.parent}if($e.length>0){const Ze=Ge.find(qe=>"the_user_s_read_access"==qe.characterValue);re.find(qe=>qe.ofTheConceptId==Pt.config.userConcept&&qe.toTheConceptId==$e?.[$e.length-1].id&&qe.typeId==Ze?.id)&&$e.push(ct)}if(0==$e.length){const Ze=yield(0,Ft.GetLink)(Pt.config.userConcept,"read_access_s",100,1),Be=Ze.map(Nt=>Nt.id);if(Be.includes(le)){const Nt=Ze.find(it=>it.id=le);return[ct,{id:Nt.id,name:null===(Ae=null===(fe=Nt?.data)||void 0===fe?void 0:fe.boomFolder)||void 0===Ae?void 0:Ae.name}]}const qe=se(yield(0,Ft.GetCompositionWithId)(le));if(!qe?.id)return[];$e.push({id:qe?.id,name:qe?.name});let Ct=le,Ut=0;for(;Ct&&Ut<10;){Ut++;const Nt=yield(0,Ft.GetLink)(Ct,"console_folder_by");if(null!==(Ie=Nt?.[0])&&void 0!==Ie&&Ie.id){const it=se(Nt[0]);if(it.id&&it.name&&$e.push({id:it?.id,name:it?.name}),Ct=it?.id,Be.includes(Ct))break}else Ct=void 0}$e.push(ct)}return $e.reverse()}catch(Se){console.error("Error in getting path to folder",Se)}})},ee.handleAddSharedWithMeFolder=me},156:function(zt,ee,_t){var Rt=this&&this.__createBinding||(Object.create?function(Z,he,re,ae){void 0===ae&&(ae=re);var ce=Object.getOwnPropertyDescriptor(he,re);(!ce||("get"in ce?!he.__esModule:ce.writable||ce.configurable))&&(ce={enumerable:!0,get:function(){return he[re]}}),Object.defineProperty(Z,ae,ce)}:function(Z,he,re,ae){void 0===ae&&(ae=re),Z[ae]=he[re]}),$=this&&this.__setModuleDefault||(Object.create?function(Z,he){Object.defineProperty(Z,"default",{enumerable:!0,value:he})}:function(Z,he){Z.default=he}),Le=this&&this.__importStar||function(Z){if(Z&&Z.__esModule)return Z;var he={};if(null!=Z)for(var re in Z)"default"!==re&&Object.prototype.hasOwnProperty.call(Z,re)&&Rt(he,Z,re);return $(he,Z),he},Y=this&&this.__awaiter||function(Z,he,re,ae){return new(re||(re=Promise))(function(we,Ce){function Ge(ze){try{Fe(ae.next(ze))}catch(ve){Ce(ve)}}function Re(ze){try{Fe(ae.throw(ze))}catch(ve){Ce(ve)}}function Fe(ze){ze.done?we(ze.value):function ce(we){return we instanceof re?we:new re(function(Ce){Ce(we)})}(ze.value).then(Ge,Re)}Fe((ae=ae.apply(Z,he||[])).next())})};Object.defineProperty(ee,"__esModule",{value:!0}),ee.FolderTreeModule=ee.hasInitialized=ee.globalFolders=ee.selectedFolders=void 0;const Bt=Le(_t(793)),ut=_t(777);var Pt=_t(26);Object.defineProperty(ee,"selectedFolders",{enumerable:!0,get:function(){return Pt.selectedFolders}});var vt=_t(26);Object.defineProperty(ee,"globalFolders",{enumerable:!0,get:function(){return vt.globalFolders}}),ee.hasInitialized=!1,ee.default=function Ft(Z){return Y(this,void 0,void 0,function*(){Bt.setConfiguration({userToken:Z.token,userId:Z.userId,userConcept:Z.userConcept,apiUrl:Z.apiUrl,aiUrl:Z.aiUrl,nodeUrl:Z.nodeUrl,icons:Z?.icons||{}}),ee.hasInitialized||(yield(0,ut.init)(Z.apiUrl,Z.aiUrl,Z.token,Z.nodeUrl.replace("/api/v1",""),!1,"Boomconsole_FMS",Z.enableSW,Z.flags,Z.parameters)),ee.hasInitialized=!0})};const ue=Le(_t(356));ee.FolderTreeModule=ue,console.debug(ue)},215:function(zt,ee,_t){var Rt=this&&this.__createBinding||(Object.create?function(re,ae,ce,we){void 0===we&&(we=ce);var Ce=Object.getOwnPropertyDescriptor(ae,ce);(!Ce||("get"in Ce?!ae.__esModule:Ce.writable||Ce.configurable))&&(Ce={enumerable:!0,get:function(){return ae[ce]}}),Object.defineProperty(re,we,Ce)}:function(re,ae,ce,we){void 0===we&&(we=ce),re[we]=ae[ce]}),$=this&&this.__setModuleDefault||(Object.create?function(re,ae){Object.defineProperty(re,"default",{enumerable:!0,value:ae})}:function(re,ae){re.default=ae}),Le=this&&this.__importStar||function(re){if(re&&re.__esModule)return re;var ae={};if(null!=re)for(var ce in re)"default"!==ce&&Object.prototype.hasOwnProperty.call(re,ce)&&Rt(ae,re,ce);return $(ae,re),ae},Y=this&&this.__awaiter||function(re,ae,ce,we){return new(ce||(ce=Promise))(function(Ge,Re){function Fe(Je){try{ve(we.next(Je))}catch(nt){Re(nt)}}function ze(Je){try{ve(we.throw(Je))}catch(nt){Re(nt)}}function ve(Je){Je.done?Ge(Je.value):function Ce(Ge){return Ge instanceof ce?Ge:new ce(function(Re){Re(Ge)})}(Je.value).then(Fe,ze)}ve((we=we.apply(re,ae||[])).next())})};Object.defineProperty(ee,"__esModule",{value:!0}),ee.recursiveSearchNestedLinks=ee.createLink=ee.getUser=ee.createProject=ee.createFolder=ee.getFolders=ee.getToken=void 0;const Bt=Le(_t(793));function ut(){return Bt.config.userToken}ee.getToken=ut,ee.getFolders=function Pt(){return Y(this,void 0,void 0,function*(){const re=ut(),ae=`${Bt.config.nodeUrl}/folders`;console.log("what start");const ce=yield fetch(ae,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+re}});return console.log(ce," yay yar res"),ce.json()})},ee.createFolder=function vt(re,ae){return Y(this,void 0,void 0,function*(){const ce=ut();return re=`${Bt.config.nodeUrl}/folders`,yield(yield fetch(re,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+ce},body:JSON.stringify(ae)})).json()})},ee.createProject=function Ft(re){return Y(this,void 0,void 0,function*(){const ae=ut();let ce=`${Bt.config.nodeUrl}/projects`;return yield(yield fetch(ce,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+ae},body:JSON.stringify(re)})).json()})},ee.getUser=function ue(){return{theUserId:Bt.config.userId,token:Bt.config.userToken,userConcept:Bt.config.userConcept}},ee.createLink=function Z(re,ae,ce){return Y(this,void 0,void 0,function*(){const we=yield ut();return(yield we)?yield(yield fetch(`${Bt.config.apiUrl}/api/Connection/create-link?composition1=${re}&composition2=${ae}&linker=${ce}&both=true`,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:`bearer ${we}`}})).json():[]})},ee.recursiveSearchNestedLinks=function he(re){return Y(this,void 0,void 0,function*(){const ae=yield ut();return(yield ae)?yield(yield fetch(`${Bt.config.apiUrl}/api/Connection/recursivesearch`,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:`bearer ${ae}`},body:JSON.stringify(re)})).json():[]})}},356:function(zt,ee,_t){var Rt=this&&this.__createBinding||(Object.create?function(Fe,ze,ve,Je){void 0===Je&&(Je=ve);var nt=Object.getOwnPropertyDescriptor(ze,ve);(!nt||("get"in nt?!ze.__esModule:nt.writable||nt.configurable))&&(nt={enumerable:!0,get:function(){return ze[ve]}}),Object.defineProperty(Fe,Je,nt)}:function(Fe,ze,ve,Je){void 0===Je&&(Je=ve),Fe[Je]=ze[ve]}),$=this&&this.__setModuleDefault||(Object.create?function(Fe,ze){Object.defineProperty(Fe,"default",{enumerable:!0,value:ze})}:function(Fe,ze){Fe.default=ze}),Le=this&&this.__importStar||function(Fe){if(Fe&&Fe.__esModule)return Fe;var ze={};if(null!=Fe)for(var ve in Fe)"default"!==ve&&Object.prototype.hasOwnProperty.call(Fe,ve)&&Rt(ze,Fe,ve);return $(ze,Fe),ze},Y=this&&this.__awaiter||function(Fe,ze,ve,Je){return new(ve||(ve=Promise))(function(wt,kt){function sn(nn){try{en(Je.next(nn))}catch(yn){kt(yn)}}function xt(nn){try{en(Je.throw(nn))}catch(yn){kt(yn)}}function en(nn){nn.done?wt(nn.value):function nt(wt){return wt instanceof ve?wt:new ve(function(kt){kt(wt)})}(nn.value).then(sn,xt)}en((Je=Je.apply(Fe,ze||[])).next())})};Object.defineProperty(ee,"__esModule",{value:!0}),ee.getRenderTreeSidebarOption=ee.removeShadowRoot=ee.setShadowRoot=ee.getCurrentTreeParams=ee.getShadowRoot=ee.updateSelectedFolders=ee.removeRenderedTreeSidebar=ee.renderTreeSidebar=ee.shadowRoot=ee.deleteFolder=ee.getPathToFolder=ee.createFolder=ee.setCurrentFolderId=ee.currentFolderId=ee.getAllFolders=ee.globalFolders=ee.selectedFolders=void 0;const Bt=_t(793),ut=Le(_t(26)),Pt=Le(_t(687));var vt=_t(26);Object.defineProperty(ee,"selectedFolders",{enumerable:!0,get:function(){return vt.selectedFolders}}),Object.defineProperty(ee,"globalFolders",{enumerable:!0,get:function(){return vt.globalFolders}}),Object.defineProperty(ee,"getAllFolders",{enumerable:!0,get:function(){return vt.getAllFolders}}),Object.defineProperty(ee,"currentFolderId",{enumerable:!0,get:function(){return vt.currentFolderId}}),Object.defineProperty(ee,"setCurrentFolderId",{enumerable:!0,get:function(){return vt.setCurrentFolderId}}),Object.defineProperty(ee,"createFolder",{enumerable:!0,get:function(){return vt.createFolder}}),Object.defineProperty(ee,"getPathToFolder",{enumerable:!0,get:function(){return vt.getPathToFolder}}),Object.defineProperty(ee,"deleteFolder",{enumerable:!0,get:function(){return vt.deleteFolder}});let Ft=[];function ue(Fe,ze=!1){var ve,Je,nt;return Y(this,void 0,void 0,function*(){try{const wt=Ft.find(xt=>xt.key==Fe.sidebarQuerySelector);wt?Ft=Ft.map(xt=>xt.key==Fe.sidebarQuerySelector?{params:Fe,showHeader:ze,key:wt.key}:xt):Ft.push({params:Fe,showHeader:ze,key:Fe.sidebarQuerySelector});const kt=Ce(Fe.sidebarQuerySelector);if(!kt)return;null===(ve=kt?.querySelector(`.${Bt.myprefix}boom_sidebar`))||void 0===ve||ve.remove(),kt.innerHTML=yield Pt.sideBarHTML(!!Fe.uploadFn),function re(Fe){var ze,ve;const Je=document.createElement("style");Je.textContent=`\n        /* Reset styles for shadow DOM */\n        /* .${Bt.myprefix}boom_sidebar { */\n          /* all: unset; */\n         *:not(svg path) {\n          all: revert;\n        }\n    \n        /* Styles specific to the shadow root */\n        .${Bt.myprefix}boom_sidebar {\n            width: 100%;\n            color: black;\n            font-family: sans-serif;\n        }\n        /* Other styles */\n    `,Fe.prepend(Je),Fe.getElementById(`${Bt.myprefix}generic_boomconsole_style`)&&(null===(ze=Fe.getElementById(`${Bt.myprefix}generic_boomconsole_style`))||void 0===ze||ze.remove());let nt=document.createElement("style");nt.id=Bt.myprefix+"generic_boomconsole_style",nt.textContent=Pt.generic_boomconsole_style(Bt.config.icons),Fe.prepend(nt),Fe.getElementById(`${Bt.myprefix}dialog_styles`)&&(null===(ve=Fe.getElementById(`${Bt.myprefix}dialog_styles`))||void 0===ve||ve.remove());let wt=document.createElement("style");wt.id=Bt.myprefix+"dialog_styles",wt.textContent=Pt.dialog_styles(Bt.config.icons),Fe.prepend(wt)}(kt),console.log("FolderMS creating tree with old data"),ut.createNestedTreeAndAddToDOM(kt),yield ut.getAllFolders(Fe.sidebarQuerySelector);let sn=ut.globalFolders;if(console.log("FolderMS get all folders fetched and completed 123"),!(sn?.length>0)){const xt=kt.querySelector(`#${Bt.myprefix}loader`);return null===(nt=xt?.classList)||void 0===nt||nt.add(`${Bt.myprefix}hide`),document.createElement("p").append("You have not created folders yet!"),sn}{let xt=kt?.querySelector(`.${Bt.myprefix}boom_sidebar`);xt&&(xt.style.width="100%");const en=kt.querySelector(`#${Bt.myprefix}loader`);null===(Je=en?.classList)||void 0===Je||Je.add(`${Bt.myprefix}hide`);let nn=kt.querySelector(`#${Bt.myprefix}boom_sidebar_header`);ze&&nn&&(nn.style.display="flex");const yn=kt.getElementById(`${Bt.myprefix}upload_icon`);yn&&Fe.uploadFn&&yn.addEventListener("click",Nn=>{Fe.uploadFn&&Fe.uploadFn(Nn)})}}catch(wt){console.error("Error occured during folder rendering",wt)}})}function Z(Fe,ze=[]){var ve,Je,nt,wt;return Y(this,void 0,void 0,function*(){try{const kt=Re(Fe);null!==(ve=kt?.params)&&void 0!==ve&&ve.sidebarQuerySelector?null===(nt=document.querySelector(`${null===(Je=kt?.params)||void 0===Je?void 0:Je.sidebarQuerySelector} .${Bt.myprefix}boom_sidebar`))||void 0===nt||nt.remove():null===(wt=document.querySelector(`.${Bt.myprefix}boom_sidebar`))||void 0===wt||wt.remove(),ut.updateSelectedFolders(ze||[])}catch(kt){console.error("Error occured during folder removal",kt)}})}ee.renderTreeSidebar=ue,ee.removeRenderedTreeSidebar=Z,ee.updateSelectedFolders=function he(Fe,ze,ve=!0){var Je;return Y(this,void 0,void 0,function*(){try{yield ut.updateSelectedFolders(ze||[]);const nt=Re(Fe);ve&&(yield Z(Fe,ze||[]),null!==(Je=nt?.params)&&void 0!==Je&&Je.sidebarQuerySelector&&(yield ue(nt.params,nt.showHeader)))}catch(nt){console.error("Error occured during category update",nt)}})};let ae=[];function Ce(Fe){let ze=document.querySelector(Fe);if(!ze)return;const ve=ae.find(nt=>nt.domSelector==Fe);if(ve&&ze.shadowRoot)return ve.shadowRoot;ae=ae.filter(nt=>nt.domSelector!=Fe);let Je={domSelector:Fe,shadowRoot:ze.attachShadow({mode:"open"})};return ae.push(Je),Je.shadowRoot}function Re(Fe){return Ft?.find(ze=>ze.key==Fe)}ee.getShadowRoot=function ce(Fe){const ze=ae.find(ve=>ve.domSelector==Fe);if(ze)return ze.shadowRoot},ee.getCurrentTreeParams=function we(Fe){const ze=ae.find(ve=>ve.shadowRoot==Fe);if(ze)return Re(ze.domSelector)},ee.setShadowRoot=Ce,ee.removeShadowRoot=function Ge(Fe){const ze=document.querySelector(Fe);ze&&(ze.innerHTML=""),ae=ae.filter(ve=>ve.domSelector!=Fe)},ee.getRenderTreeSidebarOption=Re},687:function(zt,ee,_t){var Rt=this&&this.__awaiter||function(ue,Z,he,re){return new(he||(he=Promise))(function(ce,we){function Ce(Fe){try{Re(re.next(Fe))}catch(ze){we(ze)}}function Ge(Fe){try{Re(re.throw(Fe))}catch(ze){we(ze)}}function Re(Fe){Fe.done?ce(Fe.value):function ae(ce){return ce instanceof he?ce:new he(function(we){we(ce)})}(Fe.value).then(Ce,Ge)}Re((re=re.apply(ue,Z||[])).next())})};Object.defineProperty(ee,"__esModule",{value:!0}),ee.dialog_styles=ee.generic_boomconsole_style=ee.sideBarHTML=ee.boom_theme=void 0;const $=_t(215),Le=_t(793),Y="https://boomconcole.com/freeschema/dfe603bd-7cd0-403a-9941-d379e5acd5e8.png";ee.boom_theme="light",ee.sideBarHTML=(ue=!1)=>Rt(void 0,void 0,void 0,function*(){return yield(0,$.getUser)(),`\n  <div class="${Le.myprefix}boom_sidebar">\n      <div id="${Le.myprefix}boom_sidebar_header" class="${Le.myprefix}boom_sidebar_header">\n          <h3>Folders</h3>\n          ${ue?`<span id="${Le.myprefix}upload_icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M260-160q-91 0-155.5-63T40-377q0-78 47-139t123-78q25-92 100-149t170-57q117 0 198.5 81.5T760-520q69 8 114.5 59.5T920-340q0 75-52.5 127.5T740-160H520q-33 0-56.5-23.5T440-240v-206l-64 62-56-56 160-160 160 160-56 56-64-62v206h220q42 0 71-29t29-71q0-42-29-71t-71-29h-60v-80q0-83-58.5-141.5T480-720q-83 0-141.5 58.5T280-520h-20q-58 0-99 41t-41 99q0 58 41 99t99 41h100v80H260Zm220-280Z"/></svg></span>`:""}\n      </div>\n      <div class="${Le.myprefix}sidebar_body" data-id=""> \n          <div class="${Le.myprefix}loader" id="${Le.myprefix}loader"></div>  \n          <ul id="${Le.myprefix}category_list_tree"></ul>\n      </div>\n  </div>\n  `}),ee.generic_boomconsole_style=(ue={})=>`\n  .${Le.myprefix}root_folder {\n    font-weight: 700;\n  }\n  .${Le.myprefix}current_folder {\n    font-weight: 700 !important;\n    font-size: 14px;\n  }\n  #${Le.myprefix}boom_dialog label,\n  #${Le.myprefix}root_folder{\n    font-size: 14px;\n    cursor: pointer;\n  }\n  a.${Le.myprefix}btn_plus {\n    padding: 0;\n    position: relative;\n    left: 5px;\n    cursor: pointer;\n    background: #aaa;\n    display: inline-block;\n    width: 20px;\n    height: 20px;\n    color: #fff;\n    text-align: center;\n    line-height: 18px;\n    border-radius: 20px;\n    margin-right: 10px;\n    text-decoration: none;\n    display: inline-flex;\n    /* align-items: center; */\n    justify-content: center;\n    font-weight: 500;\n    font-size: 16px\n  }\n  a.${Le.myprefix}btn_plus:hover{\n    background: #555;\n  }\n  .${Le.myprefix}folder_checkbox {\n    opacity: 1 !important; \n    position: relative !important; \n    width: 14px; \n    height: 14px; \n    border-radius: 2px; \n    -webkit-appearance: checkbox;\n    color-scheme: only light;\n  }\n  #${Le.myprefix}category_list_tree li,\n  .${Le.myprefix}root_folder {\n    text-align: start;\n    cursor: pointer;\n    background: url(${ue?.folderIcon?ue.folderIcon:Y}) 16px 3px no-repeat;\n    background-size: 16px auto !important;\n    padding-left: 35px !important;\n    position: relative !important;\n    text-wrap: nowrap !important;\n    font-size: 13px;\n    line-height: 24px;\n  }\n  .${Le.myprefix}root_folder,\n  li.${Le.myprefix}has_submenu:has(> ul.${Le.myprefix}active) {\n    background: url(${ue?.openIcon?ue.openIcon:"https://boomconcole.com/freeschema/60491cf1-2a5b-46b6-9aea-c1bd45e081ab.png"}) 16px 3px no-repeat !important;\n    background-size: 16px auto !important;\n  }\n  #${Le.myprefix}category_list_tree li label{\n    display: inline-block !important;\n    width: auto !important;\n    cursor: pointer;\n    font-weight: 500;\n  }\n  .${Le.myprefix}clickable_folder_icon_placeholder {\n    height: 16px;\n    width: 16px;\n    position: absolute;\n    left: 16px;\n    top: 3px;\n  }\n  .${Le.myprefix}is_virtual > label::before {\n    background: url('http://localhost:4200/assets/app-icons/open-folder.png') 16px 3px no-repeat;\n    content: "";\n    background: mediumvioletred;\n    width: 5px;\n    height: 5px;\n    z-index: 1000;\n    position: absolute;\n    border-radius: 50%;\n    top: 3px;\n    left: 30px;\n  }\n  .${Le.myprefix}is_virtual a.btn_plus {\n    display: none\n  }\n  #${Le.myprefix}small_close_button,\n  #${Le.myprefix}new_category_button{\n    background: #777;\n    color: #fff;\n    cursor: pointer;\n    border: none;\n    padding: 4px 10px;\n    margin-left: 10px;\n    font-size: 14px;\n    width: auto;\n    display: none;\n  }\n  #${Le.myprefix}new_category_button{\n    background: #333;\n    margin: 0;\n  }\n  #${Le.myprefix}new_category_wrapper{\n    margin: 5px 0;\n    cursor: pointer;\n    background: url(${ue?.folderIcon?ue.folderIcon:Y}) 16px 3px no-repeat;\n    background-size: 16px auto;\n    padding-left: 40px;\n    text-wrap: nowrap;\n    position: relative;\n    left: -15px;\n  }\n\n  /* New Folder CSS right click */\n  #${Le.myprefix}folder_actions {\n    position: fixed;\n    z-index: 999999;\n    font-size: 14px;\n    line-height: 16px;\n  }\n  #${Le.myprefix}folder_actions a {\n    display: block;\n    background: white;\n    color: black;\n    padding: 10px 15px;\n    border: 1px solid lightgray;\n    text-wrap: nowrap;\n    cursor: pointer;\n  }\n  .${Le.myprefix}dragover {\n    background-color: rgba(0,0,0, 0.1);\n    display: block;\n    position: relative;\n    transition: all 0.4s;\n    height: 40px;\n    width: 10px;\n    margin-top: -20px;\n  }\n  #${Le.myprefix}upload_icon {\n    width: 25px;\n    cursor: pointer;\n  }\n  #${Le.myprefix}upload_icon svg {\n    fill: white;\n  }\n  `,ee.dialog_styles=(ue={})=>(console.log("icons",ue),`\n  .${Le.myprefix}boom_sidebar{\n    font-family: Arial, Helvetica, sans-serif;\n    width: 40%;\n    position: relative;\n    margin-right: 20px;\n  }\n  .${Le.myprefix}sidebar_body{\n      /* max-height: 400px; */\n      overflow: auto;\n      padding: 12px 0;\n      min-height: 250px;\n      position: relative;\n      z-index: 3;\n      line-height: 22px;\n  }\n  .${Le.myprefix}boom_sidebar ul{\n    margin: 0;\n    padding: 0;\n    list-style: none;\n  }\n  .${Le.myprefix}submenuLevel.${Le.myprefix}active {\n    position: relative;\n    left: -15px\n  }\n  .${Le.myprefix}boom_dialog  *{\n    color: #333;\n    box-sizing: border-box;\n  }\n  .${Le.myprefix}boom-field{\n    margin: 20px 0;\n  }\n  .${Le.myprefix}boom-field select,\n  .${Le.myprefix}boom-field input,\n  .${Le.myprefix}boom-field textarea{\n    width: 100%;\n    background: #fff;\n  }\n  .${Le.myprefix}field_input,\n  .${Le.myprefix}field_select{\n    width: 100%;\n    font-size: 14px;\n    // margin: 0 0 5px;\n    border: 1px solid #aaa;\n    padding: 5px;\n    background-color: white;\n    display: block;\n    min-width: 150px;\n    color: black;\n  }\n  .${Le.myprefix}boom-field textarea{\n    min-height: 130px;\n  }\n  #${Le.myprefix}boom_dialog .${Le.myprefix}boom_question {\n    margin-bottom: 10px;\n    border-bottom: 1px solid #ccc;\n    padding: 20px 0;   \n  }\n  .${Le.myprefix}boom_answer{\n    height: 400px;\n    overflow: auto;\n    position: relative;\n  }\n  .${Le.myprefix}boom-field select,\n  .${Le.myprefix}boom-field input,\n  .${Le.myprefix}boom-field textarea{\n      box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;\n      min-width: 250px;\n      border: 1px solid #ccc;\n      border-radius: 5px;\n      padding: 12px;\n  }\n  #${Le.myprefix}closeButton {\n    background: #aaa;\n      padding: 8px 20px;\n      border-radius: 5px;\n      margin: 10px 20px 0 0;\n      color: #fff;\n  }\n  #${Le.myprefix}redirect_button,button[${Le.myprefix}submit_dialog],\n  button[${Le.myprefix}redirect_button],\n  button[${Le.myprefix}submit_boom_the_chat_dialog]\n  .${Le.myprefix}boom_button{\n    background-color: initial;\n    background-image: linear-gradient(-180deg, #FF7E31, #E62C03);\n    border-radius: 6px;\n    box-shadow: rgba(0, 0, 0, 0.1) 0 2px 4px;\n    color: #FFFFFF;\n    cursor: pointer;\n    display: inline-block;\n    padding: 8px 20px;\n    pointer-events: auto;\n    position: relative;\n    text-align: center;\n    touch-action: manipulation;\n    user-select: none;\n    -webkit-user-select: none;\n    white-space: nowrap;\n    z-index: 9;\n    border: 0;\n    transition: box-shadow .2s;\n  }\n  #${Le.myprefix}redirect_button,button[${Le.myprefix}submit_dialog]:hover,\n  button[${Le.myprefix}submit_boom_the_chat_dialog]:hover,   button[${Le.myprefix}redirect_button]:hover {\n    box-shadow: rgba(253, 76, 0, 0.5) 0 3px 8px;\n  }\n  \n  #${Le.myprefix}boom_dialog::backdrop{\n    background: rgba(0,0,0,0.7);\n  }\n  \n  .${Le.myprefix}success_message {\n      padding: 20px;\n      color: green;\n      background: rgba(255,255,255,0.94);\n      left: 0;\n      z-index: 999;\n      top: 0;\n      width: 100%;\n      text-align: center;\n      position: fixed;\n      font-size: 30px;\n      text-transform: capitalize;\n      height: 100%;\n      padding: 50px 0;\n  }\n  \n  #${Le.myprefix}dialog_form{\n    position: relative;\n    padding: 0px 20px 20px;\n  }\n  #${Le.myprefix}category_results{\n    display: none;\n    box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n    position: absolute;\n    list-style: none;\n      left: 0;\n      width: 100%;\n      top: 57px;\n      border-radius: 5px;\n      z-index: 100;\n      margin: 10px 0;\n      background: #fff;\n      padding: 0;\n  }\n  #${Le.myprefix}category_results.show{\n    display: block;\n  }\n  #${Le.myprefix}category_results li a{\n    cursor: pointer;\n      display: block;\n      padding: 12px 20px;\n      border-bottom: 1px solid #eee;\n  }\n  #${Le.myprefix}category_results li a:hover{\n    background: #f3f3f3;\n  }\n  .${Le.myprefix}boom_sidebar_header{\n    color:white;\n    background: linear-gradient(132deg, rgb(36, 37, 38) 0%, rgb(65, 80, 95) 100%);\n    padding: 10px 30px;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n    display: none;\n    align-items: center;\n    justify-content: space-between;\n  }\n  .${Le.myprefix}boom_sidebar_header h3 {\n      margin: 0px;\n      color: white;\n      font-weight: bold;\n      font-size: 16px;\n  }\n  .${Le.myprefix}boom_category {\n    position: relative;\n  }\n  .${Le.myprefix}boom_the_chat{\n    border-width: 1px;\n    padding: 0.5rem 0.75rem;\n    font-family: inherit;\n    font-weight: inherit;\n  }\n  .${Le.myprefix}loader {\n    border: 5px solid #f3f3f3; /* Light grey */\n    border-top: 5px solid #E62C03; /* pink */\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    animation: ${Le.myprefix}spin 2s linear infinite;\n    z-index: 12;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n  \n  @keyframes ${Le.myprefix}spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n  \n  .${Le.myprefix}hide{\n    display:none;\n  }\n  .${Le.myprefix}submenuLevel{\n    display: none;\n    list-style: none;\n  }\n  .${Le.myprefix}has_submenu {\n    user-select: none; /* Prevent text selection */\n  }\n  #${Le.myprefix}category_list_tree input[type="checkbox"]{\n    margin: 0px 7px 5px 3px;\n  }\n  \n    .${Le.myprefix}category_list_tree input[type="checkbox"]{\n      margin: 3px;\n      position: relative !important;\n      opacity: 1 !important;\n      pointer-events: auto;\n    }\n  \n  .${Le.myprefix}has_submenu::before {\n    content: '';\n    color: black;\n    display: inline-block;\n    margin-right: 6px;\n  }\n  \n  .${Le.myprefix}has_submenu_down::before {\n    transform: rotate(90deg);\n  }\n  .${Le.myprefix}active {\n    display: block;\n  }\n  #${Le.myprefix}category_list_tree{\n    position: relative;\n    margin-left: 20px;  \n    padding-left: 0px;\n    list-style: none;\n  }\n  \n  /* #${Le.myprefix}category_list_tree li {\n    cursor: pointer;\n    background: url(${ue?.folderIcon?ue.folderIcon:Y}) 16px 3px no-repeat !important;\n    background-size: 16px auto !important;\n    padding-left: 35px !important;\n    position: relative !important;\n    text-wrap: nowrap !important;\n  } */\n  #${Le.myprefix}category_list_tree li:before{\n    background: #000;\n    content: "";\n    width: 17px;\n    height: 2px;\n    position: absolute;\n    left: 0;\n    top: 9px;\n    z-index: 99\n  }\n  #${Le.myprefix}category_list_tree li:after{\n    background: #000;\n    content: "";\n    width: 2px;\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100%;\n    z-index: 99\n  }\n  #${Le.myprefix}category_list_tree li:last-child:after{\n    height: 10px;\n  }\n  .${Le.myprefix}toggler {\n    background: url(${ue?.nextIcon?ue.nextIcon:"https://boomconcole.com/freeschema/d122f7dd-b0ec-409a-8131-d90a6c2b146a.png"}) left top no-repeat;\n      background-size: 100% auto;\n      display: block;\n      width: 18px;\n      height: 18px;\n      background-color: #fff;\n      position: absolute;\n      left: -9px;\n      top: 1px;\n      border-radius: 50%;\n      z-index: 100;\n      cursor: pointer;\n  }\n  #${Le.myprefix}create_category{\n    cursor: pointer;\n      position: absolute;\n      right: 0;\n      top: 10px;\n      padding: 5px 14px;\n      background: #333;\n      color: #fff;\n      border-radius: 20px;\n  }\n  #${Le.myprefix}create_category span{\n    color: #fff;\n  }\n  .${Le.myprefix}toggler:has(+ .${Le.myprefix}active){\n    transform: rotate(90deg);\n  }\n  .${Le.myprefix}boom_form{\n    margin: 0 8px 2px;\n    border: 1px solid #ccc\n  }\n  #${Le.myprefix}new_category_button{\n    background: #333;\n    color: #fff;\n    cursor: pointer;\n    border: none;\n    padding: 4px 10px;\n    \n  }\n  .${Le.myprefix}field_error{\n    font-size: 14px;\n    color:red;\n  }\n  .${Le.myprefix}field_success{\n    font-size: 14px;\n    color:green;\n  }\n  \n  /*\n  Theme: Dark\n  */\n  .${Le.myprefix}boom_dialog.${ee.boom_theme}{\n    background: linear-gradient(\n      132deg,\n      rgb(90, 115, 139) 0%,\n      rgb(66, 73, 76) 100%\n    );\n    color: #f5f5f5;\n    border: rgb(90, 115, 139);\n  }\n  .${Le.myprefix}boom_dialog.${ee.boom_theme} *{\n    color: #f5f5f5;\n  }\n  .${Le.myprefix}boom_dialog.${ee.boom_theme} input,\n  .${Le.myprefix}boom_dialog.${ee.boom_theme} select{\n    color: #555;\n  }\n  \n  .${Le.myprefix}preview{\n    border: 1px solid #666;\n    border-radius: 5px;\n    padding: 10px;\n    max-height: 250px;\n    overflow-y: auto;\n    margin: 20px 0;\n  }\n  .${Le.myprefix}preview h3{\n    font-size: 20px;\n    margin: 0 0 8px;\n  }\n  `)},726:(zt,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.boomFolderComposition=ee.captureBoomGPTComposition=void 0,ee.captureBoomGPTComposition="boomgpt",ee.boomFolderComposition="boomFolder"},777:(zt,ee,_t)=>{_t.r(ee),_t.d(ee,{ADMIN:()=>Bt,ALLID:()=>ut,AccessTracker:()=>Pt,AddGhostConcept:()=>vt,Anomaly:()=>Ft,BaseUrl:()=>ue,BinaryTree:()=>Z,BuildWidgetFromId:()=>he,BuilderStatefulWidget:()=>re,Composition:()=>ae,CompositionBinaryTree:()=>ce,CompositionNode:()=>we,Concept:()=>Ce,ConceptsData:()=>Ge,Connection:()=>Re,ConnectionData:()=>Fe,CountInfo:()=>ze,CreateComposition:()=>ve,CreateConnection:()=>Je,CreateConnectionBetweenEntityLocal:()=>nt,CreateConnectionBetweenTwoConcepts:()=>wt,CreateConnectionBetweenTwoConceptsGeneral:()=>kt,CreateConnectionBetweenTwoConceptsLocal:()=>sn,CreateData:()=>xt,CreateDefaultConcept:()=>en,CreateDefaultLConcept:()=>nn,CreateSession:()=>yn,CreateSessionVisit:()=>Nn,CreateTheCompositionLocal:()=>xn,CreateTheCompositionWithCache:()=>Tt,CreateTheConnection:()=>Qe,CreateTheConnectionGeneral:()=>Ke,CreateTheConnectionLocal:()=>We,DATAID:()=>se,DATAIDDATE:()=>me,DATAV2:()=>dt,DelayFunctionExecution:()=>At,DeleteConceptById:()=>le,DeleteConceptLocal:()=>fe,DeleteConnectionById:()=>Ae,DeleteConnectionByIdBulk:()=>Ie,DeleteConnectionByType:()=>Se,DeleteConnectionByTypeBulk:()=>$e,DeleteUser:()=>ct,DependencyObserver:()=>Ze,Environments:()=>Be,FilterSearch:()=>qe,FormatFromConnections:()=>Ct,FormatFromConnectionsAltered:()=>Ut,FreeschemaQuery:()=>Nt,FreeschemaQueryApi:()=>it,GetAllConnectionsOfComposition:()=>Ot,GetAllConnectionsOfCompositionBulk:()=>Gt,GetAllTheConnectionsByTypeAndOfTheConcept:()=>on,GetComposition:()=>Ht,GetCompositionBulk:()=>an,GetCompositionBulkWithDataId:()=>Tn,GetCompositionFromConnectionsWithDataId:()=>On,GetCompositionFromConnectionsWithDataIdFromConnections:()=>Jt,GetCompositionFromConnectionsWithDataIdInObject:()=>vn,GetCompositionFromConnectionsWithDataIdIndex:()=>to,GetCompositionFromConnectionsWithIndex:()=>jo,GetCompositionFromConnectionsWithIndexFromConnections:()=>Ii,GetCompositionFromMemoryWithConnections:()=>ki,GetCompositionList:()=>ua,GetCompositionListAll:()=>ha,GetCompositionListAllWithId:()=>pa,GetCompositionListListener:()=>fa,GetCompositionListLocal:()=>ya,GetCompositionListLocalWithId:()=>ga,GetCompositionListWithId:()=>va,GetCompositionListWithIdUpdated:()=>ma,GetCompositionListener:()=>Ca,GetCompositionLocal:()=>_a,GetCompositionLocalWithId:()=>wa,GetCompositionWithAllIds:()=>Ta,GetCompositionWithCache:()=>ba,GetCompositionWithDataIdBulk:()=>Ia,GetCompositionWithDataIdWithCache:()=>ka,GetCompositionWithId:()=>Sa,GetCompositionWithIdAndDateFromMemory:()=>Aa,GetConceptBulk:()=>La,GetConceptByCharacter:()=>Na,GetConceptByCharacterAndCategoryLocal:()=>xa,GetConceptByCharacterAndType:()=>Ea,GetConnectionBetweenTwoConceptsLinker:()=>Fa,GetConnectionBulk:()=>Oa,GetConnectionById:()=>Da,GetConnectionDataPrefetch:()=>Ba,GetConnectionOfTheConcept:()=>Pa,GetConnectionTypeForCount:()=>Ua,GetFreeschemaImage:()=>Ma,GetFreeschemaImageUrl:()=>Ra,GetImageApi:()=>Ga,GetLink:()=>Wa,GetLinkListListener:()=>ja,GetLinkListener:()=>Va,GetLinkRaw:()=>$a,GetLinkerConnectionFromConcepts:()=>Ha,GetLinkerConnectionToConcepts:()=>qa,GetRelation:()=>za,GetRelationLocal:()=>Ja,GetRelationRaw:()=>Za,GetTheConcept:()=>Qa,GetTheConceptLocal:()=>Ya,GetUserGhostId:()=>Ka,JUSTDATA:()=>Xa,LConcept:()=>ec,LConnection:()=>tc,LISTNORMAL:()=>nc,LocalConceptsData:()=>oc,LocalSyncData:()=>ic,LocalTransaction:()=>rc,LogEvent:()=>sc,Logger:()=>ac,LoginToBackend:()=>cc,MakeTheInstanceConcept:()=>lc,MakeTheInstanceConceptLocal:()=>dc,MakeTheTimestamp:()=>uc,MakeTheTypeConceptApi:()=>hc,MakeTheTypeConceptLocal:()=>pc,NORMAL:()=>fc,PRIVATE:()=>yc,PUBLIC:()=>gc,PatcherStructure:()=>vc,Prototype:()=>mc,RAW:()=>Cc,RecursiveSearchApi:()=>_c,RecursiveSearchApiNewRawFullLinker:()=>wc,RecursiveSearchApiRaw:()=>Tc,RecursiveSearchApiRawFullLinker:()=>bc,RecursiveSearchApiWithInternalConnections:()=>Ic,RecursiveSearchListener:()=>kc,SchemaQuery:()=>Sc,SchemaQueryListener:()=>Ac,SearchAllConcepts:()=>Lc,SearchLinkInternal:()=>Nc,SearchLinkInternalAll:()=>xc,SearchLinkMultipleAll:()=>Ec,SearchLinkMultipleAllObservable:()=>Fc,SearchLinkMultipleApi:()=>Oc,SearchQuery:()=>Dc,SearchStructure:()=>Bc,SearchWithLinker:()=>Pc,SearchWithTypeAndLinker:()=>Uc,SearchWithTypeAndLinkerApi:()=>Mc,Selector:()=>Rc,SessionData:()=>Gc,Signin:()=>Wc,Signup:()=>jc,SignupEntity:()=>Vc,SplitStrings:()=>$c,StatefulWidget:()=>Hc,SyncData:()=>qc,TrashTheConcept:()=>zc,UpdateComposition:()=>Jc,UpdateCompositionLocal:()=>Zc,UserBinaryTree:()=>Qc,Validator:()=>Yc,ViewInternalData:()=>Kc,ViewInternalDataApi:()=>Xc,WidgetTree:()=>el,convertFromConceptToLConcept:()=>tl,convertFromLConceptToConcept:()=>nl,convertWidgetTreeToWidget:()=>ol,convertWidgetTreeToWidgetWithWrapper:()=>il,createFormFieldData:()=>rl,createPrototypeLocal:()=>sl,dispatchIdEvent:()=>al,getFromDatabaseWithType:()=>cl,getObjectsFromIndexDb:()=>ll,getUploadFileLimit:()=>dl,getUserDetails:()=>ul,getWidgetBulkFromId:()=>hl,getWidgetFromId:()=>pl,handleServiceWorkerException:()=>fl,hasActivatedSW:()=>yl,importLatestWidget:()=>gl,importRecentWidget:()=>vl,init:()=>ml,orderTheConnections:()=>Cl,recursiveFetch:()=>_l,recursiveFetchNew:()=>wl,removeAllChildren:()=>Tl,renderImportedWidget:()=>bl,renderLatestWidget:()=>Il,renderPage:()=>kl,renderWidget:()=>Sl,searchLinkMultipleListener:()=>Al,sendEmail:()=>Ll,sendMessage:()=>Nl,serviceWorker:()=>xl,setHasActivatedSW:()=>El,storeToDatabase:()=>Fl,subscribedListeners:()=>Ol,unwrapContainers:()=>Dl,updateAccessToken:()=>Bl,uploadAttachment:()=>Pl,uploadFile:()=>Ul,uploadImage:()=>Ml,uploadImageV2:()=>Rl,validDocumentFormats:()=>Gl,validImageFormats:()=>Wl});var Rt={2:(X,E,g)=>{g.d(E,{s:()=>e});var S=g(8286),N=g(9581),n=g(1412),h=g(3518),_=g(1863),I=g(5205),r=function(l,f,v,T){return new(v||(v=Promise))(function(s,a){function t(b){try{C(T.next(b))}catch(m){a(m)}}function c(b){try{C(T.throw(b))}catch(m){a(m)}}function C(b){var m;b.done?s(b.value):(m=b.value,m instanceof v?m:new v(function(L){L(m)})).then(t,c)}C((T=T.apply(l,f||[])).next())})};function e(l){var f=arguments;return r(this,void 0,void 0,function*(){const v=I.Logger.logfunction("GetAllConnectionsOfComposition",f);var T=[];if(0==(T=yield S.d.GetConnectionsOfConcept(l)).length)T=yield o(l);else{var s=yield o(l);(0,n.e)(s,T),T=s}return I.Logger.logUpdate(v),T})}function o(l){var f=arguments;return r(this,void 0,void 0,function*(){const v=I.Logger.logfunction("GetAllConnectionsOfCompositionOnline",f);var T=[];try{(0,h.Xr)("application/json");const a=new Headers,t=new FormData;t.append("composition_id",l.toString());const c=yield fetch(N.B.GetAllConnectionsOfCompositionUrl(),{method:"POST",headers:a,body:t});if(console.log("this is getting connection from online",N.B.GetAllConnectionsOfCompositionUrl(),l),!c.ok)throw(0,_.ry)(c),new Error(`Error! status: ${c.status}`);const C=yield c.json();for(var s=0;s<C.length;s++)S.d.AddConnection(C[s]),T.push(C[s]);return I.Logger.logUpdate(v),T}catch(a){a instanceof Error?console.log("Get all connection of composition error : ",a.message):console.log("Get all connection of composition error : ",a),(0,_.Mb)(a,N.B.GetAllConnectionsOfCompositionUrl()),(0,_.ey)(v,"GetAllConnectionsOfCompositionOnline",a)}})}},38:X=>{class E{constructor(S,N={}){if(this.type="warning",this.text=S,N.node&&N.node.source){let n=N.node.rangeBy(N);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in N)this[n]=N[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}X.exports=E,E.default=E},71:(X,E)=>{E.__esModule=!0,E.word=E.tilde=E.tab=E.str=E.space=E.slash=E.singleQuote=E.semicolon=E.plus=E.pipe=E.openSquare=E.openParenthesis=E.newline=E.greaterThan=E.feed=E.equals=E.doubleQuote=E.dollar=E.cr=E.comment=E.comma=E.combinator=E.colon=E.closeSquare=E.closeParenthesis=E.caret=E.bang=E.backslash=E.at=E.asterisk=E.ampersand=void 0,E.ampersand=38,E.asterisk=42,E.at=64,E.comma=44,E.colon=58,E.semicolon=59,E.openParenthesis=40,E.closeParenthesis=41,E.openSquare=91,E.closeSquare=93,E.dollar=36,E.tilde=126,E.caret=94,E.plus=43,E.equals=61,E.pipe=124,E.greaterThan=62,E.space=32,E.singleQuote=39,E.doubleQuote=34,E.slash=47,E.bang=33,E.backslash=92,E.cr=13,E.feed=12,E.newline=10,E.tab=9,E.str=39,E.comment=-1,E.word=-2,E.combinator=-3},145:(X,E,g)=>{let S,N,n=g(7793);class h extends n{constructor(I){super({type:"document",...I}),this.nodes||(this.nodes=[])}toResult(I={}){return new S(new N,this,I).stringify()}}h.registerLazyResult=_=>{S=_},h.registerProcessor=_=>{N=_},X.exports=h,h.default=h},176:(X,E,g)=>{g.d(E,{F4:()=>h,P6:()=>I,dp:()=>_});var S=g(2155),N=g(7282),n=g(6416);function h(r){var e,o;const l=(0,n.u)();return l.id=r.id,l.ghostId=r.ghostId,l.userId=r.userId,l.accessId=r.accessId,l.categoryId=r.categoryId,l.characterValue=r.characterValue,l.entryTimeStamp=r.entryTimeStamp,l.typeId=r.typeId,l.type=r.type,l.isTemp=!1,l.typeCharacter=null!==(o=null===(e=r?.type)||void 0===e?void 0:e.characterValue)&&void 0!==o?o:"",l}function _(r){const e=(0,N.o)();return e.id=r.id,e.ghostId=r.ghostId,e.userId=r.userId,e.accessId=r.accessId,e.entryTimeStamp=r.entryTimeStamp,e.typeId=r.typeId,e.categoryId=r.categoryId,e}function I(r){const e=new S.N(0,0,0,0,0,0,0);return e.id=r.id,e.ghostId=r.ghostId,e.accessId=r.accessId,e.ofTheConceptId=r.ofTheConceptId,e.toTheConceptId=r.toTheConceptId,e.entryTimeStamp=r.entryTimeStamp,e.typeId=r.typeId,e.isTemp=!1,e}},197:()=>{},205:(X,E,g)=>{g.d(E,{B:()=>S});class S{}S.isTypeLoaded=!1,S.isCharacterLoaded=!1,S.isDataLoaded=!1,S.isLocalDataLoaded=!1,S.isLocalCharacterLoaded=!1,S.isLocalTypeLoaded=!1,S.isConnectionLoaded=!1,S.isConnectionTypeLoaded=!1,S.isLocalConnectionLoaded=!1},263:(X,E)=>{E.__esModule=!0,E.default=function(g){return g.sort(function(S,N){return S-N})},X.exports=E.default},276:(X,E,g)=>{g.d(E,{y:()=>S});class S{constructor(){this.conceptId=0,this.connectionTypeId=0,this.connectionType="",this.count=0}}},339:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(3631))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.SELECTOR,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,X.exports=E.default},396:(X,E,g)=>{let S=g(7793);class N extends S{constructor(h){super(h),this.type="atrule"}append(...h){return this.proxyOf.nodes||(this.nodes=[]),super.append(...h)}prepend(...h){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...h)}}X.exports=N,N.default=N,S.registerAtRule(N)},425:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.COMMENT,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,X.exports=E.default},442:(X,E,g)=>{g.d(E,{Y:()=>o});var S=g(1167),N=g(2155),n=g(9581),h=g(3518),_=g(1863),I=g(3026),r=g(8286),e=g(5205);class o{static CheckContains(f){for(var v=!1,T=0;T<this.conceptsSyncArray.length;T++)this.conceptsSyncArray[T].id==f.id&&(v=!0);return v}static SyncDataDelete(f){for(var v=0;v<this.conceptsSyncArray.length;v++)f==this.conceptsSyncArray[v].id&&this.conceptsSyncArray.splice(v,1);for(v=0;v<this.connectionSyncArray.length;v++)this.connectionSyncArray[v].ofTheConceptId!=f&&this.connectionSyncArray[v].toTheConceptId!=f&&this.connectionSyncArray[v].typeId!=f||this.connectionSyncArray.splice(v,1)}static CheckContainsConnection(f){for(var v=!1,T=0;T<this.connectionSyncArray.length;T++)this.connectionSyncArray[T].id==f.id&&(v=!0);return v}static AddConcept(f){this.conceptsSyncArray.push(f)}static RemoveConcept(f){for(var v=0;v<this.conceptsSyncArray.length;v++)this.conceptsSyncArray[v].id==f.id&&this.conceptsSyncArray.splice(v,1)}static AddConnection(f){this.connectionSyncArray.push(f)}static RemoveConnection(f){for(var v=0;v<this.connectionSyncArray.length;v++)this.connectionSyncArray[v].id==f.id&&this.connectionSyncArray.splice(v,1)}static SyncDataOnline(){return f=this,s=function*(){if(e.serviceWorker)try{return(yield(0,e.sendMessage)("SyncData__SyncDataOnline",{})).data}catch(a){console.error("SyncData__SyncDataOnline sw error: ",a),(0,e.handleServiceWorkerException)(a)}for(let a=0;a<this.conceptsSyncArray.length;a++)I.I.AddConcept(this.conceptsSyncArray[a]);for(let a=0;a<this.connectionSyncArray.length;a++)r.d.AddConnection(this.connectionSyncArray[a]);if(this.conceptsSyncArray.length>0){let a=this.conceptsSyncArray.slice();this.conceptsSyncArray=[],(0,S.Y)(a)}if(this.connectionSyncArray.length>0){let a=this.connectionSyncArray.slice();this.connectionSyncArray=[],yield function(t){return c=this,m=function*(){let L=new N.N(0,0,0,0,0,0,0);try{var A=(0,h.Xr)(),O=JSON.stringify(t);const B=yield fetch(n.B.CreateTheConnectionUrl(),{method:"POST",headers:A,body:O});return B.ok?yield B.json():(console.log("Create the connection error message: ",B.status),(0,_.ry)(B)),L}catch(B){throw B instanceof Error?console.log("Create the connection error message: ",B.message):console.log(" Create the connection unexpected error: ",B),B}},new((b=void 0)||(b=Promise))(function(L,A){function O(R){try{G(m.next(R))}catch(M){A(M)}}function B(R){try{G(m.throw(R))}catch(M){A(M)}}function G(R){var M;R.done?L(R.value):(M=R.value,M instanceof b?M:new b(function(W){W(M)})).then(O,B)}G((m=m.apply(c,[])).next())});var c,b,m}(a)}return"done"},new((T=void 0)||(T=Promise))(function(a,t){function c(m){try{b(s.next(m))}catch(L){t(L)}}function C(m){try{b(s.throw(m))}catch(L){t(L)}}function b(m){var L;m.done?a(m.value):(L=m.value,L instanceof T?L:new T(function(A){A(L)})).then(c,C)}b((s=s.apply(f,[])).next())});var f,T,s}}o.conceptsSyncArray=[],o.connectionSyncArray=[]},490:(X,E,g)=>{function S(){var N,n,h,_;let I={entity:0,userConcept:0,userId:0,token:""};try{let r=(null==localStorage?void 0:localStorage.getItem("profile"))||"";if(r){const e=JSON.parse(r);I.entity=null!==(N=e?.entityId)&&void 0!==N?N:0,I.userConcept=null!==(n=e?.userConcept)&&void 0!==n?n:0,I.userId=null!==(h=e?.userId)&&void 0!==h?h:0,I.token=null!==(_=e?.token)&&void 0!==_?_:""}}catch{console.log("This is the exception in getting user details from local storage")}return I}g.d(E,{s:()=>S})},518:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(3631))&&S.__esModule?S:{default:S},n=g(1581);function _(r,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o})(r,e)}var I=function(r){var e,o;function l(s){var a;return(a=r.call(this,s)||this).type=n.ROOT,a}o=r,(e=l).prototype=Object.create(o.prototype),e.prototype.constructor=e,_(e,o);var f,v,T=l.prototype;return T.toString=function(){var s=this.reduce(function(a,t){return a.push(String(t)),a},[]).join(",");return this.trailingComma?s+",":s},T.error=function(s,a){return this._error?this._error(s,a):new Error(s)},f=l,(v=[{key:"errorGenerator",set:function(s){this._error=s}}])&&function h(r,e){for(var o=0;o<e.length;o++){var l=e[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}(f.prototype,v),Object.defineProperty(f,"prototype",{writable:!1}),l}(N.default);E.default=I,X.exports=E.default},628:(X,E,g)=>{g.d(E,{H:()=>T});var S=g(9581),N=g(3278),n=g(5205),h=g(1863),_=function(s,a,t,c){return new(t||(t=Promise))(function(C,b){function m(O){try{A(c.next(O))}catch(B){b(B)}}function L(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){var B;O.done?C(O.value):(B=O.value,B instanceof t?B:new t(function(G){G(B)})).then(m,L)}A((c=c.apply(s,a||[])).next())})};const I=(s,a,...t)=>_(void 0,[s,a,...t],void 0,function*(c,C,b=!0){let m={concepts:[],connections:[]};try{const L=new Headers;let A={concepts:c,connections:C};L.set("Content-Type","application/json"),L.set("Authorization","Bearer "+N.b.BearerAccessToken),L.set("Accept","application/json"),L.set("X-Session-Id",N.b.sessionId.toString()),L.set("Randomizer",S.B.getRandomizer().toString());const O=yield fetch(S.B.CreateGhostConceptApiUrl(b),{method:"POST",headers:L,body:JSON.stringify(A)});if(!O.ok)throw(0,h.ry)(O),new Error(`Error! status: ${O.status}`);const B=yield O.json();return m.concepts=B.concepts,m.connections=B.connections,m}catch(L){throw L instanceof Error?console.log("Create the concept api error message: ",L.message):console.log("Create the concept api unexpected error: ",L),L}});function r(s,a){const t=[];for(let c=0;c<s.length;c+=a){const C=s.slice(c,c+a);t.push(C)}return t}const e=(...s)=>_(void 0,[...s],void 0,function*(a=[]){return yield Promise.all(a.map(t=>{let c=JSON.parse(JSON.stringify(t));return delete c.type,delete c.ofConcept,delete c.toConcept,c}))});var o=g(9003),l=g(9736),f=g(4864),v=function(s,a,t,c){return new(t||(t=Promise))(function(C,b){function m(O){try{A(c.next(O))}catch(B){b(B)}}function L(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){var B;O.done?C(O.value):(B=O.value,B instanceof t?B:new t(function(G){G(B)})).then(m,L)}A((c=c.apply(s,a||[])).next())})};class T{static CheckContains(a){for(var t=!1,c=0;c<this.conceptsSyncArray.length;c++)this.conceptsSyncArray[c].id==a.id&&(t=!0);return t}static SyncDataDelete(a){for(var t=0;t<this.conceptsSyncArray.length;t++)a==this.conceptsSyncArray[t].id&&this.conceptsSyncArray.splice(t,1);for(t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].ofTheConceptId!=a&&this.connectionSyncArray[t].toTheConceptId!=a&&this.connectionSyncArray[t].typeId!=a||this.connectionSyncArray.splice(t,1)}static CheckContainsConnection(a){for(var t=!1,c=0;c<this.connectionSyncArray.length;c++)this.connectionSyncArray[c].id==a.id&&(t=!0);return t}static AddConcept(a){try{let t=!1;0!=T.CheckIfTheConceptIdExists(a.id,this.conceptsSyncArray).id&&(t=!0),t||this.conceptsSyncArray.push(a)}catch(t){throw t}}static RemoveConcept(a){for(var t=0;t<this.conceptsSyncArray.length;t++)this.conceptsSyncArray[t].id==a.id&&this.conceptsSyncArray.splice(t,1)}static SyncDataOnlineWithoutAuth(a,t){return v(this,arguments,void 0,function*(c,C,b=!1){return T.SyncDataOnline(c,C,b)})}static SyncDataOnline(a,t){return v(this,arguments,void 0,function*(c,C,b=!0){let m=performance.now();console.log("syncing...",c,C,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!n.serviceWorker,b),setTimeout(()=>{console.log("syncing...",c,C,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!n.serviceWorker,b)},5e3);try{if(n.serviceWorker)try{return console.log("syncing in the service worker",c,b),(yield(0,n.sendMessage)("LocalSyncData__SyncDataOnline",{transactionId:c,withAuth:b})).data}catch(M){console.error("LocalSyncData__SyncDataOnline sw error: ",M),(0,n.handleServiceWorkerException)(M)}console.log("syncing in the without service worker syncing",c,b);let L=[],A=[];if(c&&this.transactionCollections.some(M=>M.id==c)){const M=this.transactionCollections.find(W=>W.id==c);if(this.transactionCollections=this.transactionCollections.filter(W=>W.id!=c),this.transactionCollections=this.transactionCollections.filter(W=>new Date(W.createdDate).getTime()>(new Date).getTime()-6048e5),!M)return;L=M.data.concepts.slice(),A=M.data.connections.slice()}else Array.isArray(C?.concepts)&&Array.isArray(C?.connections)?(console.log("this is the concepts and connections array",C?.concepts,C?.connections),L=C.concepts.slice(),A=C.connections.slice(),console.log("this is the concepts and connections array",L,A),this.conceptsSyncArray=this.conceptsSyncArray.filter(M=>{const W=C.concepts.some(V=>M.id==V.id||M.ghostId==V.ghostId);return W||console.warn(`Concept not found in sync array: ${M.id||M.ghostId}`),W}),this.connectionSyncArray=this.connectionSyncArray.filter(M=>{const W=C.connections.some(V=>M.id==V.id||M.ghostId==V.ghostId);return W||console.warn(`Connection not found in sync array: ${M.id||M.ghostId}`),W})):(console.warn("Syncing this way has been Depreceted in service worker."),console.info("Only if serive worker is not running"),L=this.conceptsSyncArray.slice()||[],A=this.connectionSyncArray.slice()||[],this.connectionSyncArray=[],this.conceptsSyncArray=[]);console.log("syncing... inside the syncer",b);let O=[];for(let M=0;M<L.length;M++)O.push(L[M]),yield l.v.UpdateConceptSyncStatus(L[M].id);console.log("syncing... inside the syncer 2",b,L),yield this.UpdateConceptListToIncludeRelatedConcepts(A,O);let B=yield function(M,W){return _(this,arguments,void 0,function*(V,Q,te=!0){const ne=n.Logger.logfunction("CreateTheGhostConceptApi",[V.length,Q.length]);try{let H={concepts:[],connections:[]};const ye=yield e(V),xe=yield e(Q);if(V.length+Q.length<=2e3){const ke=yield I(ye,xe,te);return Array.isArray(ke?.concepts)&&(H.concepts=[...H.concepts,...ke.concepts]),Array.isArray(ke?.connections)&&(H.connections=[...H.connections,...ke.connections]),n.Logger.logUpdate(ne),H}const oe=r(ye,1e3),K=r(xe,1e3),ie=[],pe=[];console.log("This is the with auth in syncing",te);for(let ke=0;ke<oe.length;ke++)ie.push(I(oe[ke],[],te));const z=yield Promise.all(ie);for(let ke=0;ke<z.length;ke++){const Te=z[ke];Array.isArray(Te?.concepts)&&(H.concepts=[...H.concepts,...Te.concepts]),Array.isArray(Te?.connections)&&(H.connections=[...H.connections,...Te.connections])}for(let ke=0;ke<K.length;ke++)pe.push(I([],K[ke],te));const ge=yield Promise.all(pe);for(let ke=0;ke<ge.length;ke++){const Te=ge[ke];Array.isArray(Te?.concepts)&&(H.concepts=[...H.concepts,...Te.concepts]),Array.isArray(Te?.connections)&&(H.connections=[...H.connections,...Te.connections])}return n.Logger.logUpdate(ne),H}catch(_e){throw console.log(_e),(0,h.ey)(ne,"CreateTheGhostConceptApi",_e),_e}})}(O,A,b);console.log("syncing... inside the syncer 3",b);let G=B.concepts,R=B.connections;for(let M=0;M<G.length;M++)l.v.AddPermanentConcept(G[M]);for(let M=0;M<R.length;M++)f.G.AddPermanentConnection(R[M]);return L}catch(L){throw n.Logger.logError(m,"unknown",void 0,"unknown",void 0,500,L,"SyncDataOnline",[],"unknown",void 0),L}})}static ConvertGhostIdsInConnections(a){var t,c,C;for(let b=0;b<a.length;b++){let m=a[b].ofTheConceptId,L=a[b].toTheConceptId,A=a[b].typeId,O=null!==(t=T.ghostIdMap.get(m))&&void 0!==t?t:m,B=null!==(c=T.ghostIdMap.get(L))&&void 0!==c?c:L,G=null!==(C=T.ghostIdMap.get(A))&&void 0!==C?C:A;a[b].ofTheConceptId=O,a[b].toTheConceptId=B,a[b].typeId=G}}static UpdateConceptListToIncludeRelatedConcepts(a,t){return v(this,void 0,void 0,function*(){for(let c=0;c<a.length;c++){let C=a[c].ofTheConceptId,b=a[c].toTheConceptId,m=a[c].typeId;if(C<0){let L=this.CheckIfTheConceptIdExists(C,t);0==L.id&&(L=yield l.v.GetConceptByGhostId(C),0!=L.id?L.id!=L.ghostId&&(a[c].ofTheConceptId=L.id):(L=yield l.v.GetConcept(C),this.AddConceptIfDoesNotExist(L,t)))}if(b<0){let L=this.CheckIfTheConceptIdExists(b,t);0==L.id&&(L=yield l.v.GetConceptByGhostId(b),0!=L.id?L.id!=L.ghostId&&(a[c].toTheConceptId=L.id):(L=yield l.v.GetConcept(b),this.AddConceptIfDoesNotExist(L,t)))}if(m<0){let L=this.CheckIfTheConceptIdExists(m,t);0==L.id&&(L=yield l.v.GetConceptByGhostId(m),0!=L.id?L.id!=L.ghostId&&(a[c].typeId=L.id):(L=yield l.v.GetConcept(m),this.AddConceptIfDoesNotExist(L,t)))}}})}static AddConceptIfDoesNotExist(a,t=[]){let c=!1;for(let C=0;C<t.length;C++)a.ghostId==t[C].ghostId&&(c=!0);c||t.push(a)}static CheckIfTheConceptIdExists(a,t=[]){let c=(0,n.CreateDefaultLConcept)();for(let C=0;C<t.length;C++)a!=t[C].ghostId&&a!=t[C].id||(c=t[C]);return c}static AddConnection(a){this.connectionSyncArray.push(a)}static RemoveConnection(a){for(var t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].id==a.id&&this.connectionSyncArray.splice(t,1)}static RemoveConnectionById(a){for(var t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].id==a&&this.connectionSyncArray.splice(t,1)}static syncDataLocalDb(){return v(this,void 0,void 0,function*(){if(this.conceptsSyncArray.length>0){for(let a=0;a<this.conceptsSyncArray.length;a++)(0,o.kH)("localconcept",this.conceptsSyncArray[a]);this.conceptsSyncArray=[]}if(this.connectionSyncArray.length>0){for(let a=0;a<this.connectionSyncArray.length;a++)(0,o.kH)("localconnection",this.connectionSyncArray[a]);this.connectionSyncArray=[]}return"done"})}static initializeTransaction(a){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__initializeTransaction",{transactionId:a})).data}catch(t){console.error("LocalSyncData__initializeTransaction sw error: ",t),(0,n.handleServiceWorkerException)(t)}if(this.transactionCollections.some(t=>t.id==a))return;this.transactionCollections.push({id:a,data:{concepts:[],connections:[]},createdDate:(new Date).toISOString()})}catch(t){console.log("error in initializeTransaction",t)}})}static markTransactionActions(a,t){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__markTransactionActions",{transactionId:a,actions:t})).data}catch(c){console.error("LocalSyncData__markTransactionActions sw error: ",c),(0,n.handleServiceWorkerException)(c)}this.transactionCollections=this.transactionCollections.map(c=>c.id==a?Object.assign(Object.assign({},c),{data:JSON.parse(JSON.stringify(t))}):c),this.conceptsSyncArray=this.conceptsSyncArray.filter(c=>!t.concepts.some(C=>C.id==c.id||C.ghostId==c.id)),this.connectionSyncArray=this.connectionSyncArray.filter(c=>!t.connections.some(C=>C.id==c.id||C.ghostId==c.id))}catch(c){console.log("error in markTransactionActions",c)}})}static rollbackTransaction(a,t){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__rollbackTransaction",{transactionId:a,actions:t})).data}catch(c){console.error("LocalSyncData__rollbackTransaction sw error: ",c),(0,n.handleServiceWorkerException)(c)}if(this.transactionCollections.some(c=>c.id==a))return;this.transactionCollections=this.transactionCollections.filter(c=>c.id!=a)}catch(c){console.log("LocalSyncData, roll",c)}})}}T.conceptsSyncArray=[],T.connectionSyncArray=[],T.ghostIdMap=new Map,T.transactionCollections=[]},680:(X,E,g)=>{E.__esModule=!0;var S=g(1581);Object.keys(S).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in E&&E[h]===S[h]||(E[h]=S[h]))});var N=g(4451);Object.keys(N).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in E&&E[h]===N[h]||(E[h]=N[h]))});var n=g(8500);Object.keys(n).forEach(function(h){"default"!==h&&"__esModule"!==h&&(h in E&&E[h]===n[h]||(E[h]=n[h]))})},843:(X,E,g)=>{g.d(E,{Az:()=>f,Hi:()=>v});var S=g(8146),N=g(3026),n=g(9581),h=g(3518),_=g(5205),I=g(1863),r=g(7876),e=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})},o=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})},l=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};function f(T){return l(this,void 0,void 0,function*(){const s=_.Logger.logfunction("GetConceptByCharacterAndCategory",T);let a=(0,_.CreateDefaultConcept)();if("the"==T)return a.id=1,a.typeId=5,a.characterValue="the",a;let t=(0,_.SplitStrings)(T);if(t.length>1){let c=1,C=yield f(t[0]);0!=C.id&&(c=C.id),a=yield function(b,m){var L=arguments;return l(this,void 0,void 0,function*(){const A=_.Logger.logfunction("GetConceptByCharacterAndCategoryFromMemory",L);let O=yield _.ConceptsData.GetConceptByCharacterAndCategoryLocal(b,m);return 0==O.id&&(O=yield function(B,G){var R=arguments;return e(this,void 0,void 0,function*(){const M=_.Logger.logfunction("GetConceptByCharacterAndCategoryDirectApi",R);let W=(0,_.CreateDefaultConcept)();try{var V=(0,h.Xr)("application/x-www-form-urlencoded");const Q=yield fetch(n.B.GetConceptByCharacterAndCategoryDirectUrl(),{method:"POST",headers:V,body:`character_value=${B}&category_id=${G}`});Q.ok?(W=yield Q.json(),(0,r.K)(W).then(()=>{N.I.AddConcept(W)})):(console.log("This is the concept by category and character error",Q.status),(0,I.ry)(Q)),_.Logger.logUpdate(M)}catch(Q){Q instanceof Error?console.log(" This is the concept by category and character error message: ",Q.message):console.log(" This is the concept by category and character unexpected error: ",Q),(0,I.Mb)(Q,n.B.GetConceptByCharacterAndCategoryDirectUrl()),(0,I.ey)(M,"GetConceptByCharacterAndCategoryDirectApi",Q)}return W})}(b,m)),_.Logger.logUpdate(A),O})}(T,c)}else t[0]==T&&(a=yield function(c){var C=arguments;return l(this,void 0,void 0,function*(){const b=_.Logger.logfunction("GetConceptByCharacter",C);let m=yield _.ConceptsData.GetConceptByCharacterAndTypeLocal(c,51);return 0==m.id&&(m=yield(0,S.Y)(c)),_.Logger.logUpdate(b),m})}(T));return _.Logger.logUpdate(s),a})}function v(T){return l(this,void 0,void 0,function*(){let s=[];try{s=yield function(a){return o(this,void 0,void 0,function*(){let t=[];try{let c=JSON.stringify(a),C=(0,h.Xr)();const b=yield fetch(_.BaseUrl.GetTypeConceptBulk(),{method:"POST",headers:C,body:c});if(b.ok){let m=yield b.json();t=yield(0,_.GetConceptBulk)(m)}else console.log("This is the GetTypeConceptByBulk error",b.status),(0,I.ry)(b)}catch(c){c instanceof Error?console.log(" This is the GetTypeConceptByBulk error message: ",c.message):console.log(" This is the GetTypeConceptByBulk unexpected error: ",c),(0,I.Mb)(c,_.BaseUrl.GetConceptByCharacterAndCategoryDirectUrl())}return t})}(T)}catch(a){console.log(" This is the GetTypeConceptsByCharacterAndCategoryBulk error message: ",a)}return s})}},991:(X,E,g)=>{g.d(E,{H:()=>_});var S=g(5205),N=g(3996);class n extends N.i{constructor(r,e,o,l){super(r,e,o,l),this.key="",this.value=[],this.height=1,this.key=r,this.value=e,this.leftNode=o,this.rightNode=l}addNode(r,e,o){if(null==e)return r;let f=e.rightNode;if(e.key>r.key)e.leftNode=this.addNode(r,e.leftNode,o);else{if(!(e.key<r.key))return e;e.rightNode=this.addNode(r,f,o)}e.height=1+Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(this.getBalanceFactor(e.leftNode)>=0)return this.rightRotate(e);if(this.getBalanceFactor(e.leftNode)<0)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(this.getBalanceFactor(e.rightNode)<=0)return this.leftRotate(e);if(this.getBalanceFactor(e.rightNode)>0)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}}var h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};let _=(()=>{class I{static CreateCompositionKey(e,o){return e}static GetConnectionByOfTheConceptAndTypeId(e,o){let l=this.CreateCompositionKey(e,o);if(this.node){let f=this.node.getFromNode(l,this.node);if(f)return f.value}return null}static addConnection(e){if(e.id>0){let o=this.CreateCompositionKey(e.ofTheConceptId,e.typeId);if(this.node){let l=this.node.getFromNode(o,this.node);if(l){let f=l?.value;0==f.length&&(l.value=[]),f.includes(e.id)||f.push(e.id)}else{let f=[];f.push(e.id);let v=new n(o,f,null,null);this.addNodeToTree(v)}}else{let l=[];l.push(e.id);let f=new n(o,l,null,null);this.addNodeToTree(f)}new Event(`${o}`)}else console.log("cannot insert key id with  n 0 to the connection tree",e)}static addNodeToTree(e){return h(this,void 0,void 0,function*(){return null==this.node?(this.node=e,console.log("this is type dispatch in connection",e),(0,S.dispatchIdEvent)(e.key),this.node):(this.node=this.node.addNode(e,this.node,this.node.height),this.node)})}static removeNodeFromTree(e){return h(this,void 0,void 0,function*(){this.node&&(this.node=this.node.removeNode(this.node,e))})}}return I.node=null,I})()},999:(X,E,g)=>{g.d(E,{R:()=>r});var S=g(5205),N=g(1863),n=g(6416),h=g(4711),_=g(5868),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function r(e){return I(this,arguments,void 0,function*(o,l=null,f=null,v=null,T=null,s=null,a=null,t=!1,c={concepts:[],connections:[]}){var C,b,m,L;const A=S.Logger.logfunction("CreateTheCompositionLocal")||{};if(S.serviceWorker){A.serviceWorker=!0;try{const W=yield(0,S.sendMessage)("CreateTheCompositionLocal",{json:o,ofTheConceptId:l,ofTheConceptUserId:f,mainKey:v,userId:T,accessId:s,sessionInformationId:a,actions:c});return!(null===(b=null===(C=W?.actions)||void 0===C?void 0:C.concepts)||void 0===b)&&b.length&&(c.concepts=JSON.parse(JSON.stringify(W.actions.concepts))),!(null===(L=null===(m=W?.actions)||void 0===m?void 0:m.connections)||void 0===L)&&L.length&&(c.connections=JSON.parse(JSON.stringify(W.actions.connections))),S.Logger.logUpdate(A),W.data}catch(W){console.error("CreateTheCompositionLocal error sw: ",W),(0,N.ey)(A,"CreateTheCompositionLocal",W),(0,S.handleServiceWorkerException)(W)}}let O=T??999,B=s??999,G=a??999,R=v??0,M=(0,n.u)();for(const W in o)if("string"!=typeof o[W]&&"number"!=typeof o[W])if(null==l&&null==f){let V=R,Q=yield(0,_.k)(W,"",!0,O,B,G,void 0,c);M=Q,V=Q.id,R=Q.id,yield r(o[W],Q.id,Q.userId,V,T,s,a,void 0,c)}else{let V=l??999,Q=R,te=yield(0,_.k)(W,"",!0,O,B,G,void 0,c);yield(0,h.F)(V,te.id,Q,void 0,void 0,void 0,c),yield r(o[W],te.id,te.userId,Q,T,s,a,void 0,c)}else{let V=l??999,Q=R,te=yield(0,_.k)(W,o[W].toString(),!1,O,B,G,void 0,c);yield(0,h.F)(V,te.id,Q,void 0,void 0,void 0,c)}return S.Logger.logUpdate(A),M})}},1106:(X,E,g)=>{let{nanoid:S}=g(5042),{isAbsolute:N,resolve:n}=g(197),{SourceMapConsumer:h,SourceMapGenerator:_}=g(1866),{fileURLToPath:I,pathToFileURL:r}=g(2739),e=g(3614),o=g(3878),l=g(9746),f=Symbol("lineToIndexCache"),v=Boolean(h&&_),T=Boolean(n&&N);function s(t){if(t[f])return t[f];let c=t.css.split("\n"),C=new Array(c.length),b=0;for(let m=0,L=c.length;m<L;m++)C[m]=b,b+=c[m].length+1;return t[f]=C,C}class a{get from(){return this.file||this.id}constructor(c,C={}){if(null==c||"object"==typeof c&&!c.toString)throw new Error(`PostCSS received ${c} instead of CSS string`);if(this.css=c.toString(),"\ufeff"===this.css[0]||"\ufffe"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,C.document&&(this.document=C.document.toString()),C.from&&(this.file=!T||/^\w+:\/\//.test(C.from)||N(C.from)?C.from:n(C.from)),T&&v){let b=new o(this.css,C);if(b.text){this.map=b;let m=b.consumer().file;!this.file&&m&&(this.file=this.mapResolve(m))}}this.file||(this.id="<input css "+S(6)+">"),this.map&&(this.map.file=this.from)}error(c,C,b,m={}){let L,A,O,B,G;if(C&&"object"==typeof C){let M=C,W=b;if("number"==typeof M.offset){B=M.offset;let V=this.fromOffset(B);C=V.line,b=V.col}else B=this.fromLineAndColumn(C=M.line,b=M.column);if("number"==typeof W.offset){O=W.offset;let V=this.fromOffset(O);A=V.line,L=V.col}else A=W.line,L=W.column,O=this.fromLineAndColumn(W.line,W.column)}else if(b)B=this.fromLineAndColumn(C,b);else{B=C;let M=this.fromOffset(B);C=M.line,b=M.col}let R=this.origin(C,b,A,L);return G=R?new e(c,void 0===R.endLine?R.line:{column:R.column,line:R.line},void 0===R.endLine?R.column:{column:R.endColumn,line:R.endLine},R.source,R.file,m.plugin):new e(c,void 0===A?C:{column:b,line:C},void 0===A?b:{column:L,line:A},this.css,this.file,m.plugin),G.input={column:b,endColumn:L,endLine:A,endOffset:O,line:C,offset:B,source:this.css},this.file&&(r&&(G.input.url=r(this.file).toString()),G.input.file=this.file),G}fromLineAndColumn(c,C){return s(this)[c-1]+C-1}fromOffset(c){let C=s(this),b=0;if(c>=C[C.length-1])b=C.length-1;else{let m,L=C.length-2;for(;b<L;)if(m=b+(L-b>>1),c<C[m])L=m-1;else{if(!(c>=C[m+1])){b=m;break}b=m+1}}return{col:c-C[b]+1,line:b+1}}mapResolve(c){return/^\w+:\/\//.test(c)?c:n(this.map.consumer().sourceRoot||this.map.root||".",c)}origin(c,C,b,m){if(!this.map)return!1;let L,A,O=this.map.consumer(),B=O.originalPositionFor({column:C,line:c});if(!B.source)return!1;"number"==typeof b&&(L=O.originalPositionFor({column:m,line:b})),A=N(B.source)?r(B.source):new URL(B.source,this.map.consumer().sourceRoot||r(this.map.mapFile));let G={column:B.column,endColumn:L&&L.column,endLine:L&&L.line,line:B.line,url:A.toString()};if("file:"===A.protocol){if(!I)throw new Error("file: protocol is not available in this PostCSS build");G.file=I(A)}let R=O.sourceContentFor(B.source);return R&&(G.source=R),G}toJSON(){let c={};for(let C of["hasBOM","css","file","id"])null!=this[C]&&(c[C]=this[C]);return this.map&&(c.map={...this.map},c.map.consumerCache&&(c.map.consumerCache=void 0)),c}}X.exports=a,a.default=a,l&&l.registerInput&&l.registerInput(a)},1167:(X,E,g)=>{g.d(E,{Y:()=>I});var S=g(9581),N=g(3518),n=g(5205),h=g(1863),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};function I(r){return _(this,void 0,void 0,function*(){const e=n.Logger.logfunction("CreateTheConceptApi",r);let o=(0,n.CreateDefaultConcept)();try{var l=(0,N.Xr)();const f=yield fetch(S.B.CreateTheConceptUrl(),{method:"POST",headers:l,body:JSON.stringify(r)});if(!f.ok)throw(0,h.ry)(f),new Error(`Error! status: ${f.status}`);return o=yield f.json(),n.Logger.logUpdate(e),o}catch(f){f instanceof Error?console.log("Create the concept api error message: ",f.message):console.log("Create the concept api unexpected error: ",f),(0,h.Mb)(f,S.B.CreateTheConceptUrl()),(0,h.ey)(e,"CreateTheConceptApi",f)}})}},1213:(X,E,g)=>{g.d(E,{f:()=>I});var S=g(9736),N=g(7820),n=g(5205),h=g(176),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};function I(r){return _(this,void 0,void 0,function*(){let e=performance.now();try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetTheConceptLocal",{id:r})).data}catch(l){console.error("GetTheConceptLocal error sw: ",l),(0,n.handleServiceWorkerException)(l)}let o=(0,n.CreateDefaultLConcept)();if(r<0){if(o=yield S.v.GetConcept(r),0==o.id){let l=yield N.G.getNodeFromTree(r);if(l?.value){let f=l.value;f&&(o=f)}}}else{let l=yield(0,n.GetTheConcept)(r);o=(0,h.F4)(l)}return o}catch(o){throw n.Logger.logError(e,"unknown","read","unknown",void 0,200,void 0,"GetTheConceptLocal",[r],"unknown",void 0),o}})}},1218:(X,E,g)=>{g.d(E,{A:()=>I});var S=g(5205),N=g(7282),n=g(1666),h=g(8407),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};function I(r){return _(this,arguments,void 0,function*(e,o=null,l=null,f=null,v=null,T=null,s=null){if(S.serviceWorker)try{return(yield(0,S.sendMessage)("CreateTheComposition",{json:e,ofTheConceptId:o,ofTheConceptUserId:l,mainKey:f,userId:v,accessId:T,sessionInformationId:s})).data}catch(m){console.error("CreateTheComposition sw error: ",m),(0,S.handleServiceWorkerException)(m)}let a=v??999,t=T??4,c=s??999,C=f??0,b=(0,N.o)();for(const m in e)if("string"!=typeof e[m]&&"number"!=typeof e[m])if(null==o&&null==l){let L=C,A=yield(0,h.A)(m,"",!0,a,t,c);b=A,L=A.id,C=A.id,yield I(e[m],A.id,A.userId,L,v,T,s)}else{let L=o??999,A=l??999,O=C,B=yield(0,h.A)(m,"",!0,a,t,c);b=B,yield(0,n.q)(L,A,B.id,O),yield I(e[m],B.id,B.userId,O,v,T,s)}else{let L=o??999,A=l??10267,O=C,B=yield(0,h.A)(m,e[m].toString(),!1,a,t,c);yield(0,n.q)(L,A,B.id,O)}return b})}},1239:(X,E,g)=>{g.d(E,{I:()=>o,r:()=>e});var S=g(3026),N=g(9581),n=g(3518),h=g(1863),_=g(5205),I=g(1596),r=function(l,f,v,T){return new(v||(v=Promise))(function(s,a){function t(b){try{C(T.next(b))}catch(m){a(m)}}function c(b){try{C(T.throw(b))}catch(m){a(m)}}function C(b){var m;b.done?s(b.value):(m=b.value,m instanceof v?m:new v(function(L){L(m)})).then(t,c)}C((T=T.apply(l,f||[])).next())})};function e(l){return r(this,void 0,void 0,function*(){const f=_.Logger.logfunction("GetConceptBulk",[l.length])||{};let v=[],T=((new Date).getTime(),performance.now()),s=Array.from(new Set(l));try{if(_.serviceWorker){f.serviceWorker=!0;try{const a=yield(0,_.sendMessage)("GetConceptBulk",{passedConcepts:l});return _.Logger.logUpdate(f),a.data}catch(a){console.error("GetConceptBulk sw error: ",a),(0,h.ey)(f,"GetConceptBulk",a),(0,_.handleServiceWorkerException)(a)}}if(s.length>0){let a=[];for(let t=0;t<s.length;t++)if(!S.I.GetNpc(s[t])){let c=yield S.I.GetConcept(s[t]);0==c.id?a.push(s[t]):v.push(c)}if(0==a.length)return _.Logger.logfunction(f),v;{let t;const c={method:"POST",headers:(0,n.Xr)(),body:JSON.stringify(a)};try{t=yield fetch(N.B.GetConceptBulkUrl(),c)}catch{t=yield(0,I.g)(c,"/api/get_concept_bulk")}yield function(C,b,m,L,A){return r(this,void 0,void 0,function*(){if(C.ok){let O=yield C.json();if(O.length>0)for(let B=0;B<O.length;B++){let G=O[B];S.I.AddConcept(G),m.push(G)}_.Logger.logUpdate(L)}else console.log("Get Concept Bulk error",C.status),_.Logger.logError(A,"unknown","read","unknown",void 0,C.status,C,"GetConceptBulk",[b],"unknown",void 0),(0,h.ry)(C)})}(t,l,v,f,T)}}}catch(a){a instanceof Error?console.log("Get Concept Bulk  error message: ",a.message):console.log("Get Concept Bulk  unexpected error: ",a),_.Logger.logError(T,"unknown","read","unknown",void 0,500,a,"GetConceptBulk",[l],"unknown",void 0),(0,h.Mb)(a,N.B.GetConceptBulkUrl()),(0,h.ey)(f,"GetConceptBulk",a)}return v})}function o(l){return r(this,void 0,void 0,function*(){const f=[];if(l.length>0){const v={"Content-Type":"application/json"};try{const T=yield fetch(N.B.GetConceptBulkUrl(),{method:"POST",headers:v,body:JSON.stringify(l)});if(T.ok){const s=yield T.json();if(s.length>0)for(let a=0;a<s.length;a++){const t=s[a];f.push(t),S.I.AddConcept(t)}}else console.log("bulk concept getter api error: ",T.status),(0,h.ry)(T)}catch(T){T instanceof Error?console.log("bulk concept getter api error: ",T.message):console.log("bulk concept getter api error: ",T),(0,h.Mb)(T,N.B.GetConceptBulkUrl())}}return f})}},1320:(X,E,g)=>{g.d(E,{zl:()=>a,b6:()=>C,e$:()=>m,y6:()=>b,rq:()=>L,yV:()=>t,_W:()=>c});var S=g(5205),N=g(6687);function n(A){return A.startsWith("the_")?A.slice(4):A}var h=function(A,O,B,G){return new(B||(B=Promise))(function(R,M){function W(te){try{Q(G.next(te))}catch(ne){M(ne)}}function V(te){try{Q(G.throw(te))}catch(ne){M(ne)}}function Q(te){var ne;te.done?R(te.value):(ne=te.value,ne instanceof B?ne:new B(function(_e){_e(ne)})).then(W,V)}Q((G=G.apply(A,O||[])).next())})};function _(A,O,B){return h(this,void 0,void 0,function*(){var G,R,M,W,V,Q,te,ne;let _e=[];for(let H=0;H<A.length;H++)_e.push(A[H].toTheConceptId),_e.push(A[H].ofTheConceptId),_e.push(A[H].typeId);for(let H=0;H<A.length;H++){let ye=!1;B.includes(A[H].id)&&(ye=!0);let xe=yield(0,S.GetTheConcept)(A[H].ofTheConceptId),oe=yield(0,S.GetTheConcept)(A[H].toTheConceptId);if(1==ye&&0!=xe.id&&0!=oe.id){let K,ie=null!==(R=null===(G=oe.type)||void 0===G?void 0:G.characterValue)&&void 0!==R?R:"self";A[H].toTheConceptId in O?K=O[A[H].toTheConceptId]:(K={},K[ie]={},O[A[H].toTheConceptId]=K);let pe=yield(0,S.GetTheConcept)(A[H].typeId);try{let z=null!==(W=null===(M=xe?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:"none",ge=xe.characterValue;pe.characterValue.includes("_s_")&&(xe.id in O||(O[xe.id]={}),O[xe.id][z]=ge),O[oe.id]={}}catch(z){console.log("this is error",z)}}if(0!=xe.id&&0!=oe.id){let K,ie=null!==(Q=null===(V=xe.type)||void 0===V?void 0:V.characterValue)&&void 0!==Q?Q:"self";A[H].ofTheConceptId in O?K=O[A[H].ofTheConceptId]:(K={},K[ie]={},O[A[H].ofTheConceptId]=K);let pe=yield(0,S.GetTheConcept)(A[H].typeId);try{let z=null!==(ne=null===(te=oe?.type)||void 0===te?void 0:te.characterValue)&&void 0!==ne?ne:"none",ge=oe.characterValue;pe.characterValue.includes("_s_")&&(oe.id in O||(O[oe.id]={}),O[oe.id][z]=ge),O[xe.id]={}}catch(z){console.log("this is error",z)}}}return O})}var I=g(5312),r=g(7876),e=function(A,O,B,G){return new(B||(B=Promise))(function(R,M){function W(te){try{Q(G.next(te))}catch(ne){M(ne)}}function V(te){try{Q(G.throw(te))}catch(ne){M(ne)}}function Q(te){var ne;te.done?R(te.value):(ne=te.value,ne instanceof B?ne:new B(function(_e){_e(ne)})).then(W,V)}Q((G=G.apply(A,O||[])).next())})};function o(A,O,B){if(A in O){let G=O[A];G&&(B[G.connectionType+"_count"]=G.count)}}var l=function(A,O,B,G){return new(B||(B=Promise))(function(R,M){function W(te){try{Q(G.next(te))}catch(ne){M(ne)}}function V(te){try{Q(G.throw(te))}catch(ne){M(ne)}}function Q(te){var ne;te.done?R(te.value):(ne=te.value,ne instanceof B?ne:new B(function(_e){_e(ne)})).then(W,V)}Q((G=G.apply(A,O||[])).next())})},f=g(4698),v=g(6915),T=function(A,O,B,G){return new(B||(B=Promise))(function(R,M){function W(te){try{Q(G.next(te))}catch(ne){M(ne)}}function V(te){try{Q(G.throw(te))}catch(ne){M(ne)}}function Q(te){var ne;te.done?R(te.value):(ne=te.value,ne instanceof B?ne:new B(function(_e){_e(ne)})).then(W,V)}Q((G=G.apply(A,O||[])).next())})},s=function(A,O,B,G){return new(B||(B=Promise))(function(R,M){function W(te){try{Q(G.next(te))}catch(ne){M(ne)}}function V(te){try{Q(G.throw(te))}catch(ne){M(ne)}}function Q(te){var ne;te.done?R(te.value):(ne=te.value,ne instanceof B?ne:new B(function(_e){_e(ne)})).then(W,V)}Q((G=G.apply(A,O||[])).next())})};function a(A,O){return s(this,arguments,void 0,function*(B,G,R=""){let M=yield(0,S.SearchWithTypeAndLinkerApi)(B,G,R),W=M.compositionIds,V=M.internalConnections,Q=M.linkers,te=M.reverse,ne=M.mainCompositionIds,_e=yield(0,N.QL)(Q),H=yield(0,N.MT)(W,V);return yield(0,I.NK)(_e,H,ne,te)})}function t(A,O,B,G,R){return s(this,void 0,void 0,function*(){let M=yield(0,N.QL)(A),W=yield(0,N.rv)(O,B);return yield(0,I.Ve)(M,W,O,G,R)})}function c(A,O,B,G,R){return s(this,void 0,void 0,function*(){let M=yield(0,N.QL)(A),W=yield(0,N.D)(O,B);return yield(0,I.NK)(M,W,G,R)})}function C(A,O,B,G,R){return s(this,void 0,void 0,function*(){if(S.serviceWorker)try{return(yield(0,S.sendMessage)("formatConnections",{linkers:A,conceptIds:O,mainCompositionIds:B,reverse:G,countInfos:R})).data}catch(Q){console.error("formatConnections error sw: ",Q),(0,S.handleServiceWorkerException)(Q)}let M=yield(0,N.QL)(A);M=(0,v.X)(M);let W=[];return W=yield _(M,W,G),W=yield function(Q,te,ne){return h(this,void 0,void 0,function*(){var _e,H,ye,xe,oe,K,ie,pe;let z=[];for(let ge=0;ge<Q.length;ge++)z.push(Q[ge].toTheConceptId),z.push(Q[ge].ofTheConceptId),z.push(Q[ge].typeId);Q.sort(function(ge,ke){return ke.id-ge.id});for(let ge=0;ge<Q.length;ge++){let ke=!1;ne.includes(Q[ge].id)&&(ke=!0);let Te=yield(0,S.GetTheConcept)(Q[ge].ofTheConceptId),Ee=yield(0,S.GetTheConcept)(Q[ge].toTheConceptId);if(1==ke&&0!=Te.id&&0!=Ee.id){let He,Ye=null!==(H=null===(_e=Ee.type)||void 0===_e?void 0:_e.characterValue)&&void 0!==H?H:"self";Q[ge].toTheConceptId in te?(He=te[Q[ge].toTheConceptId],Ye in He||(He[Ye]={})):(He={},He[Ye]={},te[Q[ge].toTheConceptId]=He);let je=yield(0,S.GetTheConcept)(Q[ge].typeId);try{let et=null!==(xe=null===(ye=Te?.type)||void 0===ye?void 0:ye.characterValue)&&void 0!==xe?xe:"none",ft=Te.characterValue,Pe=je.characterValue;""==Pe&&(Pe=et,Pe=n(Pe));let yt={[et]:ft},rt=Pe+"_reverse";je.characterValue.includes("_s_")||("string"==typeof He[Ye]&&(He[Ye]={}),He[Ye][rt]=yt)}catch(et){console.log("this is error",et)}}if(0!=Te.id&&0!=Ee.id){let He,Ye=null!==(K=null===(oe=Te.type)||void 0===oe?void 0:oe.characterValue)&&void 0!==K?K:"self";Q[ge].ofTheConceptId in te?(He=te[Q[ge].ofTheConceptId],Ye in He||(He[Ye]={})):(He={},He[Ye]={},te[Q[ge].ofTheConceptId]=He);let je=yield(0,S.GetTheConcept)(Q[ge].typeId);try{let et=null!==(pe=null===(ie=Ee?.type)||void 0===ie?void 0:ie.characterValue)&&void 0!==pe?pe:"none",ft=Ee.characterValue,Pe=je.characterValue,yt=!1;""==Pe&&(Pe=et,Pe=n(Pe),yt=!0);let rt={[et]:ft};isNaN(Number(Pe))?je.characterValue.includes("_s_")||("string"==typeof He[Ye]&&(He[Ye]={}),He[Ye][Pe]=yt?ft:rt):(Array.isArray(He[Ye])||(He[Ye]=[]),He[Ye].push(ft))}catch(et){console.log("this is error",et)}}}return te})}(M,W,G),yield function(Q,te,ne,_e){return h(this,arguments,void 0,function*(H,ye,xe,oe,K=[]){var ie,pe,z,ge,ke,Te;let Ee=[],He=[];for(let Ye=0;Ye<H.length;Ye++)He.push(H[Ye].toTheConceptId),He.push(H[Ye].ofTheConceptId),He.push(H[Ye].typeId);H.sort(function(Ye,je){return je.id-Ye.id});for(let Ye=0;Ye<H.length;Ye++){let je=!1;K.includes(H[Ye].id)&&(je=!0);let et=yield(0,S.GetTheConcept)(H[Ye].ofTheConceptId),ft=yield(0,S.GetTheConcept)(H[Ye].toTheConceptId);if(1==je&&0!=et.id&&0!=ft.id&&ft.id in ye){let Pe,yt=null!==(pe=null===(ie=ft.type)||void 0===ie?void 0:ie.characterValue)&&void 0!==pe?pe:"self";H[Ye].toTheConceptId in ye?Pe=ye[H[Ye].toTheConceptId]:(Pe={},Pe[yt]={},ye[H[Ye].toTheConceptId]=Pe);let rt=yield(0,S.GetTheConcept)(H[Ye].typeId);try{let be=rt.characterValue+"_reverse",Xe=ye[H[Ye].ofTheConceptId];Xe&&(Array.isArray(Pe[yt][be])?Pe[yt][be].push(Xe):rt.characterValue.includes("_s_")?(Pe[yt][be]=[],Pe[yt][be].push(Xe)):Pe[yt][be]=Xe)}catch(be){console.log("this is error",be)}}if(0!=et.id&&0!=ft.id&&et.id in ye){let Pe,yt=null!==(ge=null===(z=et.type)||void 0===z?void 0:z.characterValue)&&void 0!==ge?ge:"self";H[Ye].ofTheConceptId in ye?(Pe=ye[H[Ye].ofTheConceptId],"string"==typeof Pe[yt]&&(Pe[yt]={})):(Pe={},Pe[yt]={},ye[H[Ye].ofTheConceptId]=Pe);let rt=!1,be=(yield(0,S.GetTheConcept)(H[Ye].typeId)).characterValue;""==be&&(be=ft.characterValue,rt=!0),""==be&&(be=null!==(Te=null===(ke=ft?.type)||void 0===ke?void 0:ke.characterValue)&&void 0!==Te?Te:"");try{let Xe=ye[H[Ye].toTheConceptId];Xe&&(Array.isArray(Pe[yt])?Pe[yt].push(rt?Xe[be]:Xe):Array.isArray(Pe[yt][be])?Pe[yt][be].push(Xe):be.includes("_s_")?(Pe[yt][be]=[],Pe[yt][be].push(rt?Xe[be]:Xe)):Pe[yt][be]=rt?Xe[be]:Xe)}catch(Xe){console.log("this is error",Xe)}}}for(let Ye=0;Ye<xe.length;Ye++){let je=ye[xe[Ye]];je?(je.id=xe[Ye],Ee.push(je)):0!=(yield S.ConceptsData.GetConcept(xe[Ye])).id&&(je={},je.id=xe[Ye],Ee.push(je))}return Ee})}(M,W,B,[],G)})}function b(A,O,B,G,R){return s(this,arguments,void 0,function*(M,W,V,Q,te,ne="DESC"){if(S.serviceWorker)try{return(yield(0,S.sendMessage)("formatConnectionsJustId",{linkers:M,conceptIds:W,mainCompositionIds:V,reverse:Q,countInfos:te,order:ne})).data}catch(oe){console.error("formatConnectionsJustId error sw: ",oe),(0,S.handleServiceWorkerException)(oe)}let _e=yield(0,N.QL)(M),H=yield(0,f.V)(te);_e=(0,v.X)(_e,ne);let ye=[];return ye=yield _(_e,ye,Q),ye=yield function(oe,K){return e(this,arguments,void 0,function*(ie,pe,z=[]){var ge,ke,Te,Ee,He,Ye,je,et;let ft=[];for(let Pe=0;Pe<ie.length;Pe++)ft.push(ie[Pe].toTheConceptId),ft.push(ie[Pe].ofTheConceptId),ft.push(ie[Pe].typeId);for(let Pe=0;Pe<ie.length;Pe++){let yt=!1,rt=yield(0,r.A)(ie[Pe].ofTheConceptId),be=yield(0,r.A)(ie[Pe].toTheConceptId);if(z.includes(ie[Pe].id)&&(yt=!0),1==yt&&0!=rt.id&&0!=be.id){let Xe,mt=yield(0,r.A)(ie[Pe].typeId),ht=null!==(ke=null===(ge=be.type)||void 0===ge?void 0:ge.characterValue)&&void 0!==ke?ke:"self";ie[Pe].toTheConceptId in pe?(Xe=pe[ie[Pe].toTheConceptId],ht in Xe||(Xe[ht]={})):(Xe={},Xe[ht]={},pe[ie[Pe].toTheConceptId]=Xe);try{let Oe=null!==(Ee=null===(Te=rt?.type)||void 0===Te?void 0:Te.characterValue)&&void 0!==Ee?Ee:"none",Et=rt.characterValue,pt=mt.characterValue;""==pt&&(pt=Oe,pt=n(pt));let bt={id:rt.id,[Oe]:Et,created_on:ie[Pe].entryTimeStamp},gt=pt+"_reverse";gt.includes("_s_")||("string"==typeof Xe[ht]&&(Xe[ht]={}),Xe[ht][gt]=bt)}catch(Oe){console.log("this is error",Oe)}}if(0!=rt.id&&0!=be.id){let Xe,mt=yield(0,r.A)(ie[Pe].typeId),ht=null!==(Ye=null===(He=rt.type)||void 0===He?void 0:He.characterValue)&&void 0!==Ye?Ye:"self";ie[Pe].ofTheConceptId in pe?(Xe=pe[ie[Pe].ofTheConceptId],ht in Xe||(Xe[ht]={})):(Xe={},Xe[ht]={},pe[ie[Pe].ofTheConceptId]=Xe);try{let Oe=null!==(et=null===(je=be?.type)||void 0===je?void 0:je.characterValue)&&void 0!==et?et:"none",Et=be.characterValue,pt=mt.characterValue,bt=!1;""==pt&&(pt=Oe,pt=n(pt),bt=!0);let gt={};gt[Oe]={id:be.id,data:Et,created_on:ie[Pe].entryTimeStamp},isNaN(Number(pt))?pt.includes("_s_")||("string"==typeof Xe[ht]&&(Xe[ht]={}),Xe[ht][pt]=bt?gt[Oe]:gt):(Array.isArray(Xe[ht])||(Xe[ht]=[]),Xe[ht].push(gt[Oe]))}catch(Oe){console.log("this is error",Oe)}}}return pe})}(_e,ye,Q),yield function(oe,K,ie){return e(this,arguments,void 0,function*(pe,z,ge,ke=[],Te){var Ee,He,Ye,je,et,ft,Pe;(new Date).getTime();let yt=[],rt=[];for(let be=0;be<pe.length;be++)rt.push(pe[be].toTheConceptId),rt.push(pe[be].ofTheConceptId),rt.push(pe[be].typeId);for(let be=0;be<pe.length;be++){let Xe=!1,mt=yield(0,r.A)(pe[be].ofTheConceptId),ht=yield(0,r.A)(pe[be].toTheConceptId);if(ke.includes(pe[be].id)&&(Xe=!0),1==Xe&&0!=mt.id&&0!=ht.id&&ht.id in z){let Oe,Et=yield(0,r.A)(pe[be].typeId),pt=null!==(He=null===(Ee=ht.type)||void 0===Ee?void 0:Ee.characterValue)&&void 0!==He?He:"self",bt=!1;pe[be].toTheConceptId in z&&(bt=!0),pe[be].toTheConceptId in z?(Oe=z[pe[be].toTheConceptId],"string"==typeof Oe[pt]&&(Oe[pt]={})):(Oe={},Oe[pt]={},z[pe[be].toTheConceptId]=Oe);try{if(z[pe[be].ofTheConceptId]){let gt=z[pe[be].ofTheConceptId];gt&&(gt.id=mt.id,gt.created_on=mt.entryTimeStamp);let It=Et.characterValue+"_reverse";Array.isArray(Oe[pt][It])?Oe[pt][It].push(gt):It.includes("_s_")?(Oe[pt][It]=[],Oe[pt][It].push(gt)):Oe[pt][It]=gt}}catch(gt){console.log("this is error",gt)}}if(0!=mt.id&&0!=ht.id&&mt.id in z){let Oe,Et=yield(0,r.A)(pe[be].typeId),pt=null!==(je=null===(Ye=mt.type)||void 0===Ye?void 0:Ye.characterValue)&&void 0!==je?je:"self",bt=!1;pe[be].toTheConceptId in z&&(bt=!0),pe[be].ofTheConceptId in z?(Oe=z[pe[be].ofTheConceptId],"string"==typeof Oe[pt]&&(Oe[pt]={})):(Oe={},Oe[pt]={},z[pe[be].ofTheConceptId]=Oe),o(mt.id,Te,Oe);let gt=!1,It=Et.characterValue;""==It&&(It=ht.characterValue,gt=!0),""==It&&(It=(null===(et=ht?.type)||void 0===et?void 0:et.characterValue)||"");try{let Qt=null!==(Pe=null===(ft=ht?.type)||void 0===ft?void 0:ft.characterValue)&&void 0!==Pe?Pe:"none",cn=z[pe[be].toTheConceptId];if(cn){let bn={};bn[Qt]={data:cn[Qt],id:ht.id,created_on:pe[be].entryTimeStamp},Array.isArray(Oe[pt])?Oe[pt].push(gt?cn[It]:cn):Array.isArray(Oe[pt][It])?Oe[pt][It].push(bn):It.includes("_s_")?(Oe[pt][It]=[],Oe[pt][It].push(gt?bn[Qt]:bn)):Oe[pt][It]=gt?bn[Qt]:bn,o(ht.id,Te,bn)}}catch(Qt){console.log("this is error",Qt)}}}for(let be=0;be<ge.length;be++){let Xe={};Xe=z[ge[be]],Xe?Xe.id=ge[be]:0!=(yield S.ConceptsData.GetConcept(ge[be])).id&&(Xe={},Xe.id=ge[be]),yt.push(Xe)}return yt})}(_e,ye,V,Q,H)})}function m(A,O,B,G,R){return s(this,arguments,void 0,function*(M,W,V,Q,te,ne="DESC"){try{if(S.serviceWorker)try{return(yield(0,S.sendMessage)("formatConnectionsDataId",{linkers:M,conceptIds:W,mainCompositionIds:V,reverse:Q,countInfos:te,order:ne})).data}catch(K){console.error("formatConnectionsDataId error sw: ",K),(0,S.handleServiceWorkerException)(K)}let _e,H;try{_e=yield(0,N.QL)(M)}catch(K){throw console.error("Error in GetConnectionDataPrefetch:",K),new Error(`Failed to prefetch connections: ${K instanceof Error?K.message:String(K)}`)}try{H=yield(0,f.V)(te)}catch(K){throw console.error("Error in GetConnectionTypeForCount:",K),new Error(`Failed to get connection type for count: ${K instanceof Error?K.message:String(K)}`)}try{_e=(0,v.X)(_e,ne)}catch(K){throw console.error("Error in orderTheConnections:",K),new Error(`Failed to order connections: ${K instanceof Error?K.message:String(K)}`)}let ye,xe=[],oe=[];try{xe=yield function(K,ie){var pe=arguments;return l(this,arguments,void 0,function*(z,ge,ke=[]){var Te,Ee,He,Ye,je,et,ft,Pe;try{const yt=S.Logger.logfunction("FormatFunctionData",pe);let rt=[];for(let be=0;be<z.length;be++)rt.push(z[be].toTheConceptId),rt.push(z[be].ofTheConceptId),rt.push(z[be].typeId);for(let be=0;be<z.length;be++)try{let Xe=!1,mt=yield(0,S.GetTheConcept)(z[be].ofTheConceptId),ht=yield(0,S.GetTheConcept)(z[be].toTheConceptId);if(ke.includes(z[be].id)&&(Xe=!0),1==Xe&&0!=mt.id&&0!=ht.id){let Oe,Et=yield(0,S.GetTheConcept)(z[be].typeId),pt=null!==(Ee=null===(Te=ht.type)||void 0===Te?void 0:Te.characterValue)&&void 0!==Ee?Ee:"self";z[be].toTheConceptId in ge?Oe=ge[z[be].toTheConceptId]:(Oe={},Oe[pt]={},ge[z[be].toTheConceptId]=Oe);try{let bt=null!==(Ye=null===(He=mt?.type)||void 0===He?void 0:He.characterValue)&&void 0!==Ye?Ye:"none",gt=mt.characterValue;(Et.characterValue+"_reverse").includes("_s_")&&(mt.id in ge||(ge[mt.id]={}),ge[mt.id][bt]=gt),ge[ht.id]={}}catch(bt){console.log("this is error",bt)}}if(0!=mt.id&&0!=ht.id){let Oe,Et=yield(0,S.GetTheConcept)(z[be].typeId),pt=null!==(et=null===(je=mt.type)||void 0===je?void 0:je.characterValue)&&void 0!==et?et:"self";z[be].ofTheConceptId in ge?Oe=ge[z[be].ofTheConceptId]:(Oe={},Oe[pt]={},ge[z[be].ofTheConceptId]=Oe);try{let bt=null!==(Pe=null===(ft=ht?.type)||void 0===ft?void 0:ft.characterValue)&&void 0!==Pe?Pe:"none",gt=ht.characterValue;Et.characterValue.includes("_s_")&&(ht.id in ge||(ge[ht.id]={}),ge[ht.id][bt]=gt),ge[mt.id]={}}catch(bt){console.log("this is error",bt)}}}catch(Xe){console.log("Error processing connection at index",be,Xe)}return S.Logger.logUpdate(yt),ge}catch(yt){throw console.log("Error in FormatFunctionData",yt),yt}})}(_e,xe,Q)}catch(K){throw console.error("Error in FormatFunctionData:",K),new Error(`Failed to format function data: ${K instanceof Error?K.message:String(K)}`)}try{xe=yield function(K,ie){var pe=arguments;return l(this,arguments,void 0,function*(z,ge,ke=[]){var Te,Ee,He,Ye,je,et,ft,Pe;try{const yt=S.Logger.logfunction("FormatFunctionDataForData",pe);let rt=[];for(let be=0;be<z.length;be++)rt.push(z[be].toTheConceptId),rt.push(z[be].ofTheConceptId),rt.push(z[be].typeId);for(let be=0;be<z.length;be++)try{let Xe=!1,mt=yield(0,S.GetTheConcept)(z[be].ofTheConceptId),ht=yield(0,S.GetTheConcept)(z[be].toTheConceptId);if(ke.includes(z[be].id)&&(Xe=!0),1==Xe&&0!=mt.id&&0!=ht.id){let Oe,Et=yield(0,S.GetTheConcept)(z[be].typeId),pt=null!==(Ee=null===(Te=ht.type)||void 0===Te?void 0:Te.characterValue)&&void 0!==Ee?Ee:"self";z[be].toTheConceptId in ge?(Oe=ge[z[be].toTheConceptId],pt in Oe||(Oe[pt]={})):(Oe={},Oe[pt]={},ge[z[be].toTheConceptId]=Oe);try{let bt=null!==(Ye=null===(He=mt?.type)||void 0===He?void 0:He.characterValue)&&void 0!==Ye?Ye:"none",gt=mt.characterValue,It=Et.characterValue;""==It&&(It=bt,It=n(It));let Qt={id:mt.id,data:{[bt]:gt}},cn=It+"_reverse";cn.includes("_s_")||("string"==typeof Oe[pt]&&(Oe[pt]={}),Oe[pt][cn]=Qt)}catch(bt){console.log("this is error",bt)}}if(0!=mt.id&&0!=ht.id){let Oe,Et=yield(0,S.GetTheConcept)(z[be].typeId),pt=null!==(et=null===(je=mt.type)||void 0===je?void 0:je.characterValue)&&void 0!==et?et:"self";z[be].ofTheConceptId in ge?(Oe=ge[z[be].ofTheConceptId],pt in Oe||(Oe[pt]={})):(Oe={},Oe[pt]={},ge[z[be].ofTheConceptId]=Oe);try{let bt=null!==(Pe=null===(ft=ht?.type)||void 0===ft?void 0:ft.characterValue)&&void 0!==Pe?Pe:"none",gt=ht.characterValue,It=Et.characterValue,Qt=!1;""==It&&(It=bt,It=n(It),Qt=!0);let cn={id:ht.id,data:{[bt]:gt}};isNaN(Number(It))?It.includes("_s_")||("string"==typeof Oe[pt]&&(Oe[pt]={}),Oe[pt][It]=cn):(Array.isArray(Oe[pt])||(Oe[pt]=[]),Oe[pt].push(cn))}catch(bt){console.log("this is error",bt)}}}catch(Xe){console.log("Error processing connection at index",be,Xe)}return S.Logger.logUpdate(yt),ge}catch(yt){throw console.log("Error in FormatFunctionDataForData",yt),yt}})}(_e,xe,Q)}catch(K){throw console.error("Error in FormatFunctionDataForData:",K),new Error(`Failed to format function data for data: ${K instanceof Error?K.message:String(K)}`)}try{ye=yield function(K,ie,pe,z){var ge=arguments;return l(this,arguments,void 0,function*(ke,Te,Ee,He,Ye=[],je){var et,ft,Pe,yt,rt;try{const Xe=S.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",ge);let mt=[],ht=[];for(let Oe=0;Oe<ke.length;Oe++)ht.push(ke[Oe].toTheConceptId),ht.push(ke[Oe].ofTheConceptId),ht.push(ke[Oe].typeId);for(let Oe=0;Oe<ke.length;Oe++)try{let Et=!1,pt=yield(0,S.GetTheConcept)(ke[Oe].ofTheConceptId),bt=yield(0,S.GetTheConcept)(ke[Oe].toTheConceptId);if(Ye.includes(ke[Oe].id)&&(Et=!0),1==Et&&0!=pt.id&&0!=bt.id&&bt.id in Te){let gt,It=yield(0,S.GetTheConcept)(ke[Oe].typeId),Qt=null!==(ft=null===(et=bt.type)||void 0===et?void 0:et.characterValue)&&void 0!==ft?ft:"self",cn=!1;ke[Oe].toTheConceptId in Te&&(cn=!0),ke[Oe].toTheConceptId in Te?(gt=Te[ke[Oe].toTheConceptId],"string"==typeof gt[Qt]&&(gt[Qt]={})):(gt={},gt[Qt]={},Te[ke[Oe].toTheConceptId]=gt),o(bt.id,je,gt);try{if(Te[ke[Oe].ofTheConceptId]){let bn={id:pt.id,data:Te[ke[Oe].ofTheConceptId],created_on:ke[Oe].entryTimeStamp},An=It.characterValue+"_reverse";Array.isArray(gt[Qt][An])?gt[Qt][An].push(bn):An.includes("_s_")?(gt[Qt][An]=[],gt[Qt][An].push(bn)):gt[Qt][An]=bn}}catch(bn){console.log("this is error",bn)}}if(0!=pt.id&&0!=bt.id&&pt.id in Te){let gt,It=yield(0,S.GetTheConcept)(ke[Oe].typeId),Qt=null!==(yt=null===(Pe=pt.type)||void 0===Pe?void 0:Pe.characterValue)&&void 0!==yt?yt:"self",cn=!1;ke[Oe].toTheConceptId in Te&&(cn=!0),ke[Oe].ofTheConceptId in Te?(gt=Te[ke[Oe].ofTheConceptId],"string"==typeof gt[Qt]&&(gt[Qt]={})):(gt={},gt[Qt]={},Te[ke[Oe].ofTheConceptId]=gt),o(pt.id,je,gt);let bn=!0,An=It.characterValue;""==An&&(An=bt.characterValue,bn=!0),""==An&&(An=(null===(rt=bt?.type)||void 0===rt?void 0:rt.characterValue)||"");try{let mo=Te[ke[Oe].toTheConceptId];if(mo){let Co={id:bt.id,data:Te[ke[Oe].toTheConceptId],created_on:ke[Oe].entryTimeStamp};Array.isArray(gt[Qt])?gt[Qt].push(mo):Array.isArray(gt[Qt][An])?gt[Qt][It.characterValue].push(Co):An.includes("_s_")?(gt[Qt][An]=[],gt[Qt][An].push(Co)):gt[Qt][An]=Co,o(bt.id,je,Co)}}catch(mo){console.log("this is error",mo)}}}catch(Et){console.log("Error processing connection at index",Oe,Et)}for(let Oe=0;Oe<He.length;Oe++)try{let Et={};Et.id=He[Oe];let pt=yield(0,S.GetTheConcept)(Et.id);Et.data=Te[He[Oe]],Et.created_on=pt.entryTimeStamp,mt.push(Et)}catch(Et){console.log("Error processing main composition at index",Oe,Et)}return S.Logger.logUpdate(Xe),mt}catch(Xe){throw console.log("Error in FormatFromConnectionsAlteredArrayExternal",Xe),Xe}})}(_e,xe,oe,V,Q,H)}catch(K){throw console.error("Error in FormatFromConnectionsAlteredArrayExternal:",K),new Error(`Failed to format from connections altered array external: ${K instanceof Error?K.message:String(K)}`)}return ye}catch(_e){throw console.error("Error in formatConnectionsDataId:",_e),_e}})}function L(A,O,B,G,R){return s(this,arguments,void 0,function*(M,W,V,Q,te,ne="DESC"){if(S.serviceWorker)try{return(yield(0,S.sendMessage)("formatConnectionsV2",{linkers:M,conceptIds:W,mainCompositionIds:V,reverse:Q,countInfos:te,order:ne})).data}catch(oe){console.error("formatConnectionsV2 error sw: ",oe),(0,S.handleServiceWorkerException)(oe)}let _e=yield(0,N.QL)(M),H=yield(0,f.V)(te);_e=(0,v.X)(_e,ne);let ye={};return ye=yield function(oe){var K=arguments;return T(this,arguments,void 0,function*(ie,pe={},z=[]){var ge,ke,Te,Ee,He;const Ye=S.Logger.logfunction("FormatFunctionDataV2",K);for(const je of ie){const et=z.includes(je.id),ft=yield(0,S.GetTheConcept)(je.ofTheConceptId),Pe=yield(0,S.GetTheConcept)(je.toTheConceptId),yt=yield(0,S.GetTheConcept)(je.typeId);if(0===ft.id||0===Pe.id)continue;const rt=et?Pe:ft,be=et?ft:Pe,Xe=null!==(ke=null===(ge=rt.type)||void 0===ge?void 0:ge.characterValue)&&void 0!==ke?ke:"self",mt=null!==(Ee=null===(Te=be.type)||void 0===Te?void 0:Te.characterValue)&&void 0!==Ee?Ee:"none",ht=be.characterValue;null===(He=yt.characterValue)||void 0===He||He.includes("_s_"),pe[rt.id]||(pe[rt.id]={}),pe[rt.id][Xe]||(pe[rt.id][Xe]={}),pe[be.id]||(pe[be.id]={}),pe[be.id][mt]=ht}return S.Logger.logUpdate(Ye),pe})}(_e,ye,Q),ye=yield function(oe){var K=arguments;return T(this,arguments,void 0,function*(ie,pe={},z=[]){var ge,ke,Te,Ee,He;const Ye=S.Logger.logfunction("FormatFunctionDataForDataV2",K);for(const je of ie){const et=z.includes(je.id),ft=yield(0,S.GetTheConcept)(je.ofTheConceptId),Pe=yield(0,S.GetTheConcept)(je.toTheConceptId),yt=yield(0,S.GetTheConcept)(je.typeId);if(0===ft.id||0===Pe.id)continue;const rt=et?Pe:ft,be=et?ft:Pe,Xe=null!==(ke=null===(ge=rt.type)||void 0===ge?void 0:ge.characterValue)&&void 0!==ke?ke:"self",mt=null!==(Ee=null===(Te=be.type)||void 0===Te?void 0:Te.characterValue)&&void 0!==Ee?Ee:"none",ht=be.characterValue,Oe=null!==(He=yt.characterValue)&&void 0!==He?He:"";let Et=""===Oe?n(mt):Oe;const pt=Et.includes("_s_"),bt=!isNaN(Number(Et)),gt={id:be.id,data:{[mt]:ht}};pe[rt.id]||(pe[rt.id]={}),Xe in pe[rt.id]&&"string"!=typeof pe[rt.id][Xe]||(pe[rt.id][Xe]=bt?[]:{});try{if(pt)continue;bt?pe[rt.id][Xe].push(gt):pe[rt.id][Xe][et?`${Et}_reverse`:Et]=gt}catch(It){console.error("Error formatting concept data:",It)}}return S.Logger.logUpdate(Ye),pe})}(_e,ye,Q),yield function(oe,K,ie){var pe=arguments;return T(this,arguments,void 0,function*(z,ge,ke,Te=[],Ee){var He,Ye,je;const et=S.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",pe),ft=[];for(const Pe of z){const yt=Te.includes(Pe.id),rt=yield(0,S.GetTheConcept)(Pe.ofTheConceptId),be=yield(0,S.GetTheConcept)(Pe.toTheConceptId),Xe=yield(0,S.GetTheConcept)(Pe.typeId);if(0===rt.id||0===be.id)continue;const mt=yt?be:rt,ht=yt?rt:be,Oe=mt.id,Et=ht.id,pt=null!==(Ye=null===(He=mt.type)||void 0===He?void 0:He.characterValue)&&void 0!==Ye?Ye:"self",bt=Xe.characterValue+"_reverse",gt=Xe.characterValue||ht.characterValue||(null===(je=ht.type)||void 0===je?void 0:je.characterValue)||"";if(ge[Oe]){const It=ge[Oe][pt],Qt=ge[Et],cn={id:ht.id,data:Qt,created_on:Pe.entryTimeStamp};o(Oe,Ee,ge[Oe]);try{yt?Array.isArray(It[bt])?It[bt].push(cn):It[bt]=[cn]:Array.isArray(It)?It.push(Qt):Array.isArray(It[gt])?It[gt].push(cn):gt.includes("_s_")?(It[gt]=[],It[gt].push(cn)):It[gt]=[cn],o(Et,Ee,cn)}catch(bn){console.error("Error processing connection:",bn)}}else console.log("This is the error in the source")}for(const Pe of ke){const yt=yield(0,S.GetTheConcept)(Pe);ft.push({id:Pe,data:ge[Pe],created_on:yt.entryTimeStamp})}return S.Logger.logUpdate(et),ft})}(_e,ye,V,Q,H)})}},1412:(X,E,g)=>{function S(N=[],n=[]){}g.d(E,{e:()=>S})},1534:(X,E,g)=>{let S=g(7793),N=g(1752);class n extends S{get selectors(){return N.comma(this.selector)}set selectors(_){let I=this.selector?this.selector.match(/,\s*/):null,r=I?I[0]:","+this.raw("between","beforeOpen");this.selector=_.join(r)}constructor(_){super(_),this.type="rule",this.nodes||(this.nodes=[])}}X.exports=n,n.default=n,S.registerRule(n)},1557:(X,E)=>{E.__esModule=!0,E.default=function(g){for(var S=arguments.length,N=new Array(S>1?S-1:0),n=1;n<S;n++)N[n-1]=arguments[n];for(;N.length>0;){var h=N.shift();g[h]||(g[h]={}),g=g[h]}},X.exports=E.default},1581:(X,E)=>{E.__esModule=!0,E.UNIVERSAL=E.TAG=E.STRING=E.SELECTOR=E.ROOT=E.PSEUDO=E.NESTING=E.ID=E.COMMENT=E.COMBINATOR=E.CLASS=E.ATTRIBUTE=void 0,E.TAG="tag",E.STRING="string",E.SELECTOR="selector",E.ROOT="root",E.PSEUDO="pseudo",E.NESTING="nesting",E.ID="id",E.COMMENT="comment",E.COMBINATOR="combinator",E.CLASS="class",E.ATTRIBUTE="attribute",E.UNIVERSAL="universal"},1596:(X,E,g)=>{g.d(E,{g:()=>h});var S=g(5205),N=g(3278),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};function h(_,I){return n(this,void 0,void 0,function*(){if(typeof self<"u"&&typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)throw new Error("Cannot switch server from service worker");try{!function(){const r=S.BaseUrl.NODE_CACHE_URL;let e=S.BaseUrl.BASE_APPLICATION+"_cacheServers";if(r===S.BaseUrl.BASE_URL)throw new Error("Base Server Down");let o=sessionStorage.getItem(e);o=JSON.parse(o);const l=o.indexOf(r);S.BaseUrl.isNearestCache=!1,o.includes(r)&&-1!==l&&o.splice(l,1),sessionStorage.setItem(e,JSON.stringify(o)),S.BaseUrl.NODE_CACHE_URL=o.length?o[0]:S.BaseUrl.BASE_URL,console.log("before the payload",N.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&(0,S.sendMessage)("SESSION_DATA",{type:"SESSION_DATA",data:S.BaseUrl.NODE_CACHE_URL,session:N.b.sessionId})}();try{return yield fetch(`${S.BaseUrl.NODE_CACHE_URL}${I}`,_)}catch{return yield h(_,I)}}catch(r){throw r}})}},1666:(X,E,g)=>{g.d(E,{q:()=>h});var S=g(2155),N=g(442),n=g(1863);function h(_,I,r,e){var l=new S.N(0,_,r,I,e,1,4);if(_==r)return l.ofTheConceptId=0,l.toTheConceptId=1,l;try{l.isTemp=!0,l.id=Math.floor(1e8*Math.random()),N.Y.AddConnection(l)}catch(f){(0,n.Mb)(f)}return l}},1669:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(3295))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.UNIVERSAL,f.value="*",f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,X.exports=E.default},1704:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.COMBINATOR,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,X.exports=E.default},1735:(X,E,g)=>{g.d(E,{J:()=>_});var S,N=g(5205),n=g(3278),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};class _{static incrementConcept(r){try{r&&(this.conceptsData[r]=(this.conceptsData[r]||0)+1)}catch{console.error("Failed on increment concept")}}static incrementConnection(r){try{r&&(this.connectionsData[r]=(this.connectionsData[r]||0)+1)}catch{console.error("Failed on increment connection")}}static getTopConcepts(r){return Object.entries(this.conceptsData).map(([e,o])=>[parseInt(e),o]).sort((e,o)=>o[1]-e[1]).slice(0,r)}static getTopConnections(r){return Object.entries(this.connectionsData).map(([e,o])=>[parseInt(e),o]).sort((e,o)=>o[1]-e[1]).slice(0,r)}static saveDataToLocalStorage(){localStorage?.setItem(this.accessData,JSON.stringify({concepts:this.conceptsData,connections:this.connectionsData}))}static loadDataFromLocalStorage(){const r=null==localStorage?void 0:localStorage.getItem(this.accessData);if(r){const e=JSON.parse(r);this.conceptsData=e.concepts||{},this.connectionsData=e.connections||{}}}static sendToServer(){return h(this,void 0,void 0,function*(){try{yield this.syncToServer()}catch{console.error("Failed to process Access Tracker Sync with Server")}})}static syncToServer(){return h(this,void 0,void 0,function*(){try{if(!Object.keys(this.conceptsData).length&&!Object.keys(this.connectionsData).length)return;const r=n.b.BearerAccessToken;if(!r)return;const e=this.conceptsData&&Object.keys(this.conceptsData).length>0?this.conceptsData:{},o=this.connectionsData&&Object.keys(this.connectionsData).length>0?this.connectionsData:{},l=yield fetch(N.BaseUrl.PostPrefetchConceptConnections(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({concepts:e,connections:o})});if(!l.ok)throw new Error("Failed to sync data to the server.");yield l.json(),this.conceptsData={},this.connectionsData={},this.setNextSyncTime()}catch(r){console.error("Sync error:",r)}})}static setNextSyncTime(){this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS}static startAutoSync(){setInterval(()=>{const r=Date.now();this.nextSyncTime&&r>=this.nextSyncTime&&this.syncNow().catch(console.error)},6e4)}static syncNow(){return h(this,void 0,void 0,function*(){try{this.activateStatus?yield this.syncToServer():console.warn("Access Tracker inactive.")}catch{console.error("Error on sync access tracker")}})}static GetSuggestedConcepts(r){return h(this,void 0,void 0,function*(){try{const e=n.b.BearerAccessToken,o=new URL(N.BaseUrl.GetSuggestedConcepts());void 0!==r&&o.searchParams.append("top",r.toString());const l=yield fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!l.ok){const v=yield l.text();throw new Error(`Failed to load concepts: ${l.status} ${l.statusText}. Details: ${v}`)}const f=(yield l.json())||[];return yield this.addConceptToBinaryTree(f.data),f}catch(e){throw e instanceof Error?(console.error("Error fetching suggested concepts:",e.message),new Error("Unable to fetch suggested concepts. Please try again later.")):(console.error("An unexpected error occurred:",e),new Error("An unexpected error occurred while fetching suggested concepts."))}})}static GetSuggestedConnections(r){return h(this,void 0,void 0,function*(){try{const e=n.b.BearerAccessToken,o=new URL(N.BaseUrl.GetSuggestedConnections());void 0!==r&&o.searchParams.append("top",r.toString());const l=yield fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!l.ok){const v=yield l.text();throw new Error(`Failed to load connections: ${l.status} ${l.statusText}. Details: ${v}`)}const f=(yield l.json())||[];return yield this.addConnectionToBinaryTree(f.data),f}catch(e){throw e instanceof Error?(console.error("Error fetching suggested Connections:",e.message),new Error("Unable to fetch suggested connections. Please try again later.")):(console.error("An unexpected error occurred:",e),new Error("An unexpected error occurred while fetching suggested Connections."))}})}static addConceptToBinaryTree(r){return h(this,void 0,void 0,function*(){try{r.forEach(e=>{N.ConceptsData.AddConcept(e)})}catch{console.error("Error on adding Concepts Data into tree")}})}static addConnectionToBinaryTree(r){return h(this,void 0,void 0,function*(){try{r.forEach(e=>{N.ConnectionData.AddConnection(e)})}catch{console.error("Error on adding Connections Data into tree")}})}}S=_,_.conceptsData={},_.connectionsData={},_.SYNC_INTERVAL_MS=12e4,_.nextSyncTime=Date.now(),_.activateStatus=!1,_.accessData="Access Data",S.startAutoSync()},1752:X=>{let E={comma:g=>E.split(g,[","],!0),space:g=>E.split(g,[" ","\n","\t"]),split(g,S,N){let n=[],h="",_=!1,I=0,r=!1,e="",o=!1;for(let l of g)o?o=!1:"\\"===l?o=!0:r?l===e&&(r=!1):'"'===l||"'"===l?(r=!0,e=l):"("===l?I+=1:")"===l?I>0&&(I-=1):0===I&&S.includes(l)&&(_=!0),_?(""!==h&&n.push(h.trim()),h="",_=!1):h+=l;return(N||""!==h)&&n.push(h.trim()),n}};X.exports=E,E.default=E},1863:(X,E,g)=>{g.d(E,{ER:()=>h,Mb:()=>_,ey:()=>I,ry:()=>n});var S=g(5205),N=g(7273);function n(r){if(S.Logger.log("ERROR",r.statusText,{code:r.status,data:r.statusText}),401==r.status||406==r.status){let e=new N.z(r.statusText,!1,r.status,"");throw e.setUrl(r.url),e}if(500==r.status){let e=new N.z(r.statusText,!1,r.status,"");throw e.setUrl(r.url),e}}function h(r,e={}){if(S.Logger.log("ERROR",e.statusText,{code:r.status,data:r.status}),401==r.status||406==r.status){let o=new N.z(e.statusText,!1,r.status,"");throw o.setUrl(r.url),o}if(500==r.status){let o=new N.z(e.statusText,!1,r.status,"");throw o.setUrl(r.url),o}}function _(r,e=""){if(S.Logger.log("ERROR",r.message,{code:r.status,data:r.stack}),r.status){let o=new N.z(r.message,!1,r.status,r.stack);throw o.setUrl(e),o}{let o=new N.z(r.message,!1,500,r.stack);throw o.setUrl(e),o}}function I(r,e,o){var l;try{if(!r)return void console.error(`Error in ${e}: logData is undefined`);const f=Date.now();r.startTime=null!==(l=r.startTime)&&void 0!==l?l:f,r.responseTime=f-r.startTime+" ms",r.level="ERROR",r.errorMessage=o?.message||"Unknown error occurred",console.error(`Error in function ${e}:`,o)}catch(f){console.error("Failed to handle package function error:",f)}}},1866:()=>{},2013:(X,E,g)=>{g.d(E,{A:()=>I,w:()=>r});var S=g(8146),N=g(5205),n=g(3026),h=g(1863),_=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function I(e){var o=arguments;return _(this,void 0,void 0,function*(){const l=N.Logger.logfunction("GetConceptByCharacter",o)||{};if(N.serviceWorker){l.serviceWorker=!0;try{const T=yield(0,N.sendMessage)("GetConceptByCharacter",{characterValue:e});return N.Logger.logUpdate(l),T.data}catch(T){console.error("GetConceptByCharacter sw error: ",T),(0,h.ey)(l,"GetConceptByCharacter",T),(0,N.handleServiceWorkerException)(T)}}let f=yield n.I.GetConceptByCharacter(e);return null!=f&&0!=f?.id||!`${e}`||(yield(0,S.Y)(e),f=yield n.I.GetConceptByCharacterAndTypeLocal(e,51),0==f.id&&(f=yield n.I.GetConceptByCharacter(e))),N.Logger.logUpdate(l),f})}function r(e){var o=arguments;return _(this,void 0,void 0,function*(){const l=N.Logger.logfunction("GetConceptByCharacterUpdated",o)||{};if(N.serviceWorker){l.serviceWorker=!0;try{const T=yield(0,N.sendMessage)("GetConceptByCharacterUpdated",{characterValue:e});return N.Logger.logUpdate(l),T.data}catch(T){console.error("GetConceptByCharacterUpdated error sw: ",T),(0,h.ey)(l,"GetConceptByCharacterUpdated",T),(0,N.handleServiceWorkerException)(T)}}let f=yield n.I.GetConceptByCharacter(e);return null!=f&&0!=f?.id||!`${e}`||(yield(0,S.Y)(e),f=yield n.I.GetConceptByCharacter(e)),N.Logger.logUpdate(l),f})}},2110:(X,E,g)=>{const{AtRule:S,Rule:N}=g(2895);let n=g(7149);function h(s,a){let t;try{n(c=>{t=c}).processSync(s)}catch(c){throw s.includes(":")?a?a.error("Missed semicolon"):c:a?a.error(c.message):c}return t.at(0)}function _(s,a){let t=!1;return s.each(c=>{if("nesting"===c.type){let C=a.clone({});c.replaceWith("&"!==c.value?h(c.value.replace("&",C.toString())):C),t=!0}else"nodes"in c&&c.nodes&&_(c,a)&&(t=!0)}),t}function I(s,a){let t=[];for(let c of s.selectors){let C=h(c,s);for(let b of a.selectors){if(!b)continue;let m=h(b,a);_(m,C)||(m.prepend(n.combinator({value:" "})),m.prepend(C.clone({}))),t.push(m.toString())}}return t}function r(s,a){if("comment"!==s.prev()?.type)return a.after(s),s;let t=s.prev();return s.parent.toString().match(/[*]\/ *\n.*{/)?a.after(s).after(t):a.after(s),s}function e(s,a,t,c=!0){return a.length?(t=function(C,b,m){let L=new N({nodes:[],selector:C});return L.append(b),m.after(L),L}(s,a,t),c&&(a=[]),[t,a]):[t,a]}function o(s,a=""){let t=s.concat(a),c={};for(let C of t)c[C.replace(/^@/,"")]=!0;return c}function l(s){let a=s[v];if(a){let t,c,C,b,m=s.nodes,L=-1,A=function(O){let B=[],G=O.parent;for(;G&&G instanceof S;)B.push(G),G=G.parent;return B}(s);if(A.forEach((O,B)=>{if(a(O.name))t=O,L=B,C=b;else{let G=b;b=O.clone({nodes:[]}),G&&b.append(G),c=c||b}}),t?C?(c.append(m),t.after(C)):t.after(m):s.after(m),s.next()&&t){let O;A.slice(0,L+1).forEach((B,G,R)=>{let M=O;O=B.clone({nodes:[]}),M&&O.append(M);let W=[],V=(R[G-1]||s).next();for(;V;)W.push(V),V=V.next();O.append(W)}),O&&(C||m[m.length-1]).after(O)}}else s.after(s.nodes);s.remove()}const f=Symbol("rootRuleMergeSel"),v=Symbol("rootRuleEscapes"),T=Symbol("hasRootRule");X.exports=(s={})=>{let a=o(["media","supports","layer","container","starting-style"],s.bubble),t=(m=a,function L(A,O,B,G=B){let R=[];if(O.each(M=>{"rule"===M.type&&B?G&&(M.selectors=I(A,M)):"atrule"===M.type&&M.nodes?m[M.name]?L(A,M,G):!1!==O[f]&&R.push(M):R.push(M)}),B&&R.length){let M=A.clone({nodes:[]});for(let W of R)M.append(W);O.prepend(M)}}),c=o(["document","font-face","keyframes","-webkit-keyframes","-moz-keyframes"],s.unwrap),C=(s.rootRuleName||"at-root").replace(/^@/,""),b=s.preserveEmpty;var m;return{Once(m){m.walkAtRules(C,L=>{(function(A){let{params:O}=A,{escapes:B,selector:G,type:R}=function(M){let W=(M=M.trim()).match(/^\((.*)\)$/);if(!W)return{selector:M,type:"basic"};let V=W[1].match(/^(with(?:out)?):(.+)$/);if(V){let Q="with"===V[1],te=Object.fromEntries(V[2].trim().split(/\s+/).map(_e=>[_e,!0]));if(Q&&te.all)return{type:"noop"};let ne=_e=>!!te[_e];return te.all?ne=()=>!0:Q&&(ne=_e=>"all"!==_e&&!te[_e]),{escapes:ne,type:"withrules"}}return{type:"unknown"}}(O);if("unknown"===R)throw A.error(`Unknown @${A.name} parameter ${JSON.stringify(O)}`);if("basic"===R&&G){let M=new N({nodes:A.nodes,selector:G});A.removeAll(),A.append(M)}A[v]=B,A[f]=B?!B("all"):"noop"===R})(L),m[T]=!0})},postcssPlugin:"postcss-nested",RootExit(m){m[T]&&(m.walkAtRules(C,l),m[T]=!1)},Rule(m){let L=!1,A=m,O=!1,B=[];m.each(G=>{switch(G.type){case"atrule":[A,B]=e(m.selector,B,A),G.name===C?(L=!0,t(m,G,!0,G[f]),A=r(G,A)):a[G.name]?(O=!0,L=!0,t(m,G,!0),A=r(G,A)):c[G.name]?(O=!0,L=!0,t(m,G,!1),A=r(G,A)):O&&B.push(G);break;case"decl":O&&B.push(G);break;case"rule":[A,B]=e(m.selector,B,A),O=!0,L=!0,G.selectors=I(m,G),A=r(G,A)}}),e(m.selector,B,A,!1),L&&!0!==b&&(m.raws.semicolon=!0,0===m.nodes.length&&m.remove())}}},X.exports.postcss=!0},2155:(X,E,g)=>{g.d(E,{N:()=>n});var S=g(7282),N=g(9581);class n{constructor(_=0,I,r,e,o,l,f){this.count=0,this.isTemp=!1,this.toUpdate=!1,this.applicationId=N.B.getRandomizer(),this.type=(0,S.o)(),this.ofConcept=(0,S.o)(),this.toConcept=(0,S.o)(),this.id=_,this.ofTheConceptId=I,this.toTheConceptId=r,this.userId=e,this.typeId=o,this.ghostId=_,this.orderId=l,this.accessId=f,this.entryTimeStamp=(0,S.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date,this.typeCharacter=""}}},2202:(X,E,g)=>{g.d(E,{W:()=>I});var S=g(6963),N=g(6731),n=g(205),h=g(5205),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};let I=(()=>{class r{static addNodeToTree(o){if(null==this.root)return this.root=o,this.root;this.root=this.root.addNode(o,this.root,this.root.height)}static waitForDataToLoad(){return _(this,void 0,void 0,function*(){return new Promise((o,l)=>{this.checkFlag(o),setTimeout(()=>{l("not")},25e3)})})}static checkFlag(o){if(n.B.isDataLoaded)return o("done");setTimeout(r.checkFlag,1e3,o)}static addConceptToTree(o){let l=new N.b(o.id,o,null,null),f=new N.b(o.characterValue,o,null,null);S.f.addNodeToTree(f),this.addNodeToTree(l)}static getNodeFromTree(o){return _(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(o,this.root):null})}static removeNodeFromTree(o){return _(this,void 0,void 0,function*(){if(this.root){let l=new Event(`${o}`);console.log("this is the fired event after delete",l),(0,h.dispatchIdEvent)(o),this.root=this.root.removeNode(this.root,o)}})}static getConceptListFromIds(o,l,f){return _(this,void 0,void 0,function*(){this.root&&this.root.checkIfIdsInNode(this.root,o,l,f)})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}return r.root=null,r})()},2212:(X,E,g)=>{g.d(E,{Ay:()=>r,N:()=>e});var S=g(1167),N=g(2615),n=g(5976),h=g(442),_=g(5205),I=function(o,l,f,v){return new(f||(f=Promise))(function(T,s){function a(C){try{c(v.next(C))}catch(b){s(b)}}function t(C){try{c(v.throw(C))}catch(b){s(b)}}function c(C){var b;C.done?T(C.value):(b=C.value,b instanceof f?b:new f(function(m){m(b)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function r(o,l,f,v,T,s,a){return I(this,void 0,void 0,function*(){let t=yield n.B.getId(),b=new N.j(t,l,v,f,T,o,s,!0,new Date,new Date,a);return b.isTemp=!1,h.Y.AddConcept(b),b})}function e(o,l,f,v,T,s,a){return I(this,void 0,void 0,function*(){let t=yield n.B.getId(),b=new N.j(t,l,v,f,T,o,s,!1,new Date,new Date,a);return _.ConceptsData.AddConcept(b),(0,S.Y)([b]),b})}},2289:(X,E,g)=>{g.d(E,{$S:()=>e,L0:()=>o,WC:()=>l});var S=g(8675),N=g(6058),n=g(5205),h=g(1863);g(3518);var _=g(843),I=g(4818),r=function(f,v,T,s){return new(T||(T=Promise))(function(a,t){function c(m){try{b(s.next(m))}catch(L){t(L)}}function C(m){try{b(s.throw(m))}catch(L){t(L)}}function b(m){var L;m.done?a(m.value):(L=m.value,L instanceof T?L:new T(function(A){A(L)})).then(c,C)}b((s=s.apply(f,v||[])).next())})};function e(f,v){var T=arguments;return r(this,void 0,void 0,function*(){const s=n.Logger.logfunction("DeleteConnectionByType",T)||{};if(n.serviceWorker){s.serviceWorker=!0;try{const m=yield(0,n.sendMessage)("DeleteConnectionByType",{id:f,linker:v});return n.Logger.logUpdate(s),m.data}catch(m){console.error("DeleteConnectionByType sw error: ",m),(0,h.ey)(s,"DeleteConnectionByType",m),(0,n.handleServiceWorkerException)(m)}}let a=yield(0,S.l)(f);for(let m=0;m<a.length;m++)n.ConnectionData.AddConnection(a[m]);let t=yield n.ConnectionData.GetConnectionsOfConcept(f),c=yield(0,n.GetConceptByCharacter)(v),C=[];for(let m=0;m<t.length;m++)t[m].typeId==c.id&&C.push(t[m]);let b=!1;for(let m=0;m<C.length;m++)b=yield(0,n.DeleteConnectionById)(C[m].id);return n.Logger.logUpdate(s),b})}function o(f,v){var T=arguments;return r(this,void 0,void 0,function*(){const s=n.Logger.logfunction("DeleteConnectionByTypeBulk",T)||{};if(n.serviceWorker){s.serviceWorker=!0;try{const b=yield(0,n.sendMessage)("DeleteConnectionByTypeBulk",{id:f,linkers:v});return n.Logger.logUpdate(s),b.data}catch(b){console.error("DeleteConnectionByTypeBulk sw error: ",b),(0,h.ey)(s,"DeleteConnectionByTypeBulk",b),(0,n.handleServiceWorkerException)(b)}}let a=yield(0,S.l)(f);for(let b=0;b<a.length;b++)n.ConnectionData.AddConnection(a[b]);let t=yield n.ConnectionData.GetConnectionsOfConcept(f),c=[];c=yield(0,_.Hi)(v);let C=[];console.log("this is all the connections for deleting taken",t,c,v);for(let b=0;b<t.length;b++)for(let m=0;m<c.length;m++)t[b].typeId==c[m].id&&C.push(t[b].id);return console.log("these are the to delete",C),n.Logger.logUpdate(s),yield(0,I.E)(C)})}function l(f,v){return r(this,arguments,void 0,function*(T,s,a=!1){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetAllTheConnectionsByTypeAndOfTheConcept",{id:T,linker:s,reverse:a})).data}catch(c){console.error("GetAllTheConnectionsByTypeAndOfTheConcept sw error: ",c),(0,n.handleServiceWorkerException)(c)}let t=[];if(a){let c=yield(0,N.W)(T),C=yield(0,n.MakeTheTypeConceptApi)(s,999);for(let b=0;b<c.length;b++)c[b].typeId==C.id&&t.push(c[b])}else{let c=yield(0,S.l)(T);for(let m=0;m<c.length;m++)n.ConnectionData.AddConnection(c[m]);let C=yield n.ConnectionData.GetConnectionsOfConcept(T),b=yield(0,n.GetConceptByCharacter)(s);for(let m=0;m<C.length;m++)C[m].typeId==b.id&&t.push(C[m])}return t})}},2299:(X,E,g)=>{g.d(E,{B:()=>S});class S{constructor(n){this.id=1,this.isOnlineSync=!1,this.isOnlineSync=n}}},2515:(X,E,g)=>{g.d(E,{x:()=>S});class S{constructor(n,h,_,I){this.variants=[],this.height=1,this.key=n,this.value=h,this.leftNode=_,this.rightNode=I,this.currentNode=null}addCurrentNode(n,h){return null==h?h=n:(n.value.typeId!=h.value.typeId&&(h.currentNode=this.addCurrentNode(n,h.currentNode)),h)}addCurrentNodeType(n,h){if(null==h)return n;var _=!1;for(let I=0;I<h.variants.length;I++)h.variants[I].value.id==n.value.id&&(_=!0);return _||h.variants.push(n),h}addNode(n,h,_){if(null==h)return n;var r=h.rightNode;if(h.key>n.key)h.leftNode=this.addNode(n,h.leftNode,_);else{if(!(h.key<n.key))return h;h.rightNode=this.addNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}return h}addCharacterNode(n,h,_){if(""!=n.value.characterValue){if(null==h)return n;var r=h.rightNode;if(h.key>n.key)h.leftNode=this.addCharacterNode(n,h.leftNode,_);else{if(!(h.key<n.key))return h.key==n.key&&""!=h.key&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),h;h.rightNode=this.addCharacterNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}addTypeNode(n,h,_){if(0!=n.value.typeId){if(null==h)return n;var r=h.rightNode;if(h.key>n.key)h.leftNode=this.addTypeNode(n,h.leftNode,_);else{if(!(h.key<n.key))return h.key==n.key&&0!=h.key&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),h;h.rightNode=this.addTypeNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}rightRotate(n){if(n){let h=n.leftNode;if(h)return n.leftNode=h.rightNode,h.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,h}return n}leftRotate(n){if(n){let h=n.rightNode;if(h){let _=h.leftNode;return h.leftNode=n,n.rightNode=_,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(n.rightNode))+1,h}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return null==n?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}getFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getFromNode(n,h.leftNode):n>h.key?this.getFromNode(n,h.rightNode):h)}updateNodeSyncStatus(n,h,_){if(_){if(n==_.key){let I=_.value;return I.isSynced=h,_.value=I,_}return n<_.key?this.updateNodeSyncStatus(n,h,_.leftNode):n>_.key?this.updateNodeSyncStatus(n,h,_.rightNode):_}return _}getCharacterFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getCharacterFromNode(n,h.leftNode):n>h.key?this.getCharacterFromNode(n,h.rightNode):h)}getFromNodeWithCharacterAndType(n,h,_){if(n=`${n}`,_){if(n==_.key){if(n==_.value.characterValue&&h==_.value.typeId)return _;for(let I=0;I<_.variants.length;I++)if(_.variants[I].value.typeId==h)return _.variants[I]}else{if(n<_.key)return this.getFromNodeWithCharacterAndType(n,h,_.leftNode);if(n>_.key)return this.getFromNodeWithCharacterAndType(n,h,_.rightNode)}return null}return _}getFromNodeWithCharacterAndCategory(n,h,_){if(n=`${n}`,_){if(n==_.key){if(n==_.value.characterValue&&h==_.value.categoryId)return _;for(let I=0;I<_.variants.length;I++)if(_.variants[I].value.categoryId==h)return _.variants[I]}else{if(n<_.key)return this.getFromNodeWithCharacterAndCategory(n,h,_.leftNode);if(n>_.key)return this.getFromNodeWithCharacterAndCategory(n,h,_.rightNode)}return null}return _}removeNode(n,h){if(null==n)return n;if(n.key>h)return n.leftNode=this.removeNode(n.leftNode,h),n;if(n.key<h)return n.rightNode=this.removeNode(n.rightNode,h),n;if(null==n.leftNode){let I=n.rightNode;return n=null,I}if(null==n.rightNode){let I=n.leftNode;return n=null,I}var _=this.inOrderSuccessor(n.rightNode);return n.value=_.value,n.key=_.key,n.variants=_.variants,n.currentNode=_.currentNode,n.rightNode=this.removeNode(n.rightNode,_.key),n}removeNodeWithVariants(n,h,_){if(null==n)return n;if(n.key>h)return n.leftNode=this.removeNodeWithVariants(n.leftNode,h,_),n;if(n.key<h)return n.rightNode=this.removeNodeWithVariants(n.rightNode,h,_),n;if(n.variants.length>0)if(n.value.id==_){var I=n.variants[0];if(I)return n.value=I.value,n.key=I.key,n.currentNode=I.currentNode,n.variants.splice(0,1),n}else for(let e=0;e<n.variants.length;e++)if(_==n.variants[e].value.id)return n.variants.splice(e,1),n;if(null==n.leftNode){let e=n.rightNode;return n=null,e}if(null==n.rightNode){let e=n.leftNode;return n=null,e}var r=this.inOrderSuccessor(n.rightNode);return n.value=r.value,n.key=r.key,n.variants=r.variants,n.currentNode=r.currentNode,n.rightNode=this.removeNodeWithVariants(n.rightNode,r.key,_),n}countNodeBelow(n){return null==n?0:1+this.countNodeBelow(n.leftNode)+this.countNodeBelow(n.rightNode)}inOrderSuccessor(n){for(;null!=n.leftNode;)n=n.leftNode;return n}}},2615:(X,E,g)=>{g.d(E,{j:()=>N});var S=g(5205);class N{constructor(h,_,I,r,e,o,l,f=!1,v,T,s){this.count=0,this.typeCharacter="",this.referent=null,this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=S.BaseUrl.getRandomizer(),this.x=0,this.y=0,this.id=h,this.userId=_,this.typeId=I,this.ghostId=h,this.categoryId=r,this.referentId=e,this.characterValue=`${o}`,this.accessId=l,this.typeCharacter=s,this.type=null,this.isNew=f,this.entryTimeStamp=v,this.updatedTimeStamp=T}getType(){console.log(this.typeId)}}},2648:(X,E,g)=>{E.__esModule=!0,E.FIELDS=void 0,E.default=function(f){var v,T,s,a,t,c,C,b,m,L,A,O,B=[],G=f.css.valueOf(),R=G.length,M=-1,W=1,V=0,Q=0;function te(ne,_e){if(!f.safe)throw f.error("Unclosed "+ne,W,V-M,V);b=(G+=_e).length-1}for(;V<R;){switch((v=G.charCodeAt(V))===n.newline&&(M=V,W+=1),v){case n.space:case n.tab:case n.newline:case n.cr:case n.feed:b=V;do{(v=G.charCodeAt(b+=1))===n.newline&&(M=b,W+=1)}while(v===n.space||v===n.newline||v===n.tab||v===n.cr||v===n.feed);O=n.space,s=W,T=b-M-1,Q=b;break;case n.plus:case n.greaterThan:case n.tilde:case n.pipe:b=V;do{v=G.charCodeAt(b+=1)}while(v===n.plus||v===n.greaterThan||v===n.tilde||v===n.pipe);O=n.combinator,s=W,T=V-M,Q=b;break;case n.asterisk:case n.ampersand:case n.bang:case n.comma:case n.equals:case n.dollar:case n.caret:case n.openSquare:case n.closeSquare:case n.colon:case n.semicolon:case n.openParenthesis:case n.closeParenthesis:O=v,s=W,T=V-M,Q=(b=V)+1;break;case n.singleQuote:case n.doubleQuote:A=v===n.singleQuote?"'":'"',b=V;do{for(a=!1,-1===(b=G.indexOf(A,b+1))&&te("quote",A),t=b;G.charCodeAt(t-1)===n.backslash;)t-=1,a=!a}while(a);O=n.str,s=W,T=V-M,Q=b+1;break;default:v===n.slash&&G.charCodeAt(V+1)===n.asterisk?(0===(b=G.indexOf("*/",V+2)+1)&&te("comment","*/"),(c=(C=G.slice(V,b+1).split("\n")).length-1)>0?(m=W+c,L=b-C[c].length):(m=W,L=M),O=n.comment,W=m,s=m,T=b-L):v===n.slash?(O=v,s=W,T=V-M,Q=(b=V)+1):(b=o(G,V),O=n.word,s=W,T=b-M),Q=b+1}B.push([O,W,V-M,s,T,V,Q]),L&&(M=L,L=null),V=Q}return B};var S,N,n=function(f,v){if(f&&f.__esModule)return f;if(null===f||"object"!=typeof f&&"function"!=typeof f)return{default:f};var T=h(void 0);if(T&&T.has(f))return T.get(f);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in f)if("default"!==t&&Object.prototype.hasOwnProperty.call(f,t)){var c=a?Object.getOwnPropertyDescriptor(f,t):null;c&&(c.get||c.set)?Object.defineProperty(s,t,c):s[t]=f[t]}return s.default=f,T&&T.set(f,s),s}(g(71));function h(f){if("function"!=typeof WeakMap)return null;var v=new WeakMap,T=new WeakMap;return(h=function(s){return s?T:v})(f)}for(var _=((S={})[n.tab]=!0,S[n.newline]=!0,S[n.cr]=!0,S[n.feed]=!0,S),I=((N={})[n.space]=!0,N[n.tab]=!0,N[n.newline]=!0,N[n.cr]=!0,N[n.feed]=!0,N[n.ampersand]=!0,N[n.asterisk]=!0,N[n.bang]=!0,N[n.comma]=!0,N[n.colon]=!0,N[n.semicolon]=!0,N[n.openParenthesis]=!0,N[n.closeParenthesis]=!0,N[n.openSquare]=!0,N[n.closeSquare]=!0,N[n.singleQuote]=!0,N[n.doubleQuote]=!0,N[n.plus]=!0,N[n.pipe]=!0,N[n.tilde]=!0,N[n.greaterThan]=!0,N[n.equals]=!0,N[n.dollar]=!0,N[n.caret]=!0,N[n.slash]=!0,N),r={},e=0;e<22;e++)r["0123456789abcdefABCDEF".charCodeAt(e)]=!0;function o(f,v){var T,s=v;do{if(T=f.charCodeAt(s),I[T])return s-1;T===n.backslash?s=l(f,s)+1:s++}while(s<f.length);return s-1}function l(f,v){var T=v,s=f.charCodeAt(T+1);if(!_[s])if(r[s]){var a=0;do{T++,a++,s=f.charCodeAt(T+1)}while(r[s]&&a<6);a<6&&s===n.space&&T++}else T++;return T}E.FIELDS={TYPE:0,START_LINE:1,START_COL:2,END_LINE:3,END_COL:4,START_POS:5,END_POS:6}},2739:()=>{},2803:(X,E,g)=>{g.d(E,{x:()=>I});var S=g(8286),N=g(9581),n=g(1863),h=g(5205),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};function I(r,e,o){var l=arguments;return _(this,void 0,void 0,function*(){const f=h.Logger.logfunction("GetCompositionConnectionsBetweenTwoConcepts",l)||{};var v=[];try{if(h.serviceWorker){f.serviceWorker=!0;try{const t=yield(0,h.sendMessage)("GetCompositionConnectionsBetweenTwoConcepts",{ofConceptId:r,toConcept:e,mainKey:o});return h.Logger.logUpdate(f),t.data}catch(t){console.error("GetCompositionConnectionsBetweenTwoConcepts sw error: ",t),(0,n.ey)(f,"GetCompositionConnectionsBetweenTwoConcepts",t),(0,h.handleServiceWorkerException)(t)}}var T=new FormData;T.append("ofConceptId",r.toString()),T.append("mainKey",o.toString()),T.append("toConceptId",e.toString());const a=yield fetch(N.B.GetCompositionConnectionBetweenTwoConceptsUrl(),{method:"POST",body:T,redirect:"follow"});if(a.ok){const t=yield a.json();for(var s=0;s<t.length;s++)S.d.AddConnection(t[s]),v.push(t[s]);h.Logger.logUpdate(f)}else console.log("Get composition connection between two concepts",a.status),(0,n.ry)(a)}catch(a){a instanceof Error?console.log("Get composition connection between two concepts error message: ",a.message):console.log("Get composition connection between two concepts unexpected error: ",a),(0,n.Mb)(a,N.B.GetCompositionConnectionBetweenTwoConceptsUrl()),(0,n.ey)(f,"GetCompositionConnectionsBetweenTwoConcepts",a)}return v})}},2832:(X,E,g)=>{g.d(E,{j:()=>I});var S=g(5205),N=g(9581),n=g(1863),h=g(3518),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};function I(r){var e=arguments;return _(this,arguments,void 0,function*(o,l=""){const f=S.Logger.logfunction("SearchLinkMultipleApi",e);let v=performance.now();var T=(0,h.ab)("application/json",l);const s=N.B.SearchLinkMultipleAllApiUrl(),a=JSON.stringify(o);try{const t=yield fetch(s,{method:"POST",headers:T,body:a});if(t.ok){let c=yield t.json();return S.Logger.logUpdate(f),c}return(0,n.ry)(t),console.log("This is the searching multiple error",t.status),S.Logger.logError(v,"unknown","search","unknown",void 0,t.status,t,"SearchLinkMultipleApi",[o,l],"unknown",void 0),[]}catch(t){console.log("This is the searching multiple error",t),S.Logger.logError(v,"unknown","search","unknown",void 0,500,t,"SearchLinkMultipleApi",[o,l],"unknown",void 0),(0,n.Mb)(t,s),(0,n.ey)(f,"SearchLinkMultipleApi",t)}})}},2895:(X,E,g)=>{let S=g(396),N=g(9371),n=g(7793),h=g(3614),_=g(5238),I=g(145),r=g(3438),e=g(1106),o=g(6966),l=g(1752),f=g(3152),v=g(9577),T=g(6846),s=g(3717),a=g(5644),t=g(1534),c=g(3303),C=g(38);function b(...m){return 1===m.length&&Array.isArray(m[0])&&(m=m[0]),new T(m)}b.plugin=function(m,L){let A,O=!1;function B(...G){console&&console.warn&&!O&&(O=!0,console.warn(m+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(m+": \u91cc\u9762 postcss.plugin \u88ab\u5f03\u7528. \u8fc1\u79fb\u6307\u5357:\nhttps://www.w3ctech.com/topic/2226"));let R=L(...G);return R.postcssPlugin=m,R.postcssVersion=(new T).version,R}return Object.defineProperty(B,"postcss",{get:()=>(A||(A=B()),A)}),B.process=function(G,R,M){return b([B(M)]).process(G,R)},B},b.stringify=c,b.parse=v,b.fromJSON=r,b.list=l,b.comment=m=>new N(m),b.atRule=m=>new S(m),b.decl=m=>new _(m),b.rule=m=>new t(m),b.root=m=>new a(m),b.document=m=>new I(m),b.CssSyntaxError=h,b.Declaration=_,b.Container=n,b.Processor=T,b.Document=I,b.Comment=N,b.Warning=C,b.AtRule=S,b.Result=s,b.Input=e,b.Rule=t,b.Root=a,b.Node=f,o.registerPostcss(b),X.exports=b,b.default=b},2918:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.NESTING,f.value="&",f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,X.exports=E.default},3026:(X,E,g)=>{g.d(E,{I:()=>v});var S=g(3655),N=g(2202),n=g(6963),h=g(5457),_=g(7282),I=g(5205);class r{constructor(s,a,t,c){this.height=1,this.key=s,this.value=a,this.leftNode=t,this.rightNode=c}addNode(s,a,t){if(null==a)return s;let C=a.rightNode;if(a.key>s.key)a.leftNode=this.addNode(s,a.leftNode,t);else{if(!(a.key<s.key))return a;a.rightNode=this.addNode(s,C,t)}a.height=1+Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode));let b=this.getBalanceFactor(a);if(b>1&&a.leftNode){if(s.key<a.leftNode.key)return this.rightRotate(a);if(s.key>a.leftNode.key)return a.leftNode=this.leftRotate(a.leftNode),this.rightRotate(a)}if(b<-1&&a.rightNode){if(s.key>a.rightNode.key)return this.leftRotate(a);if(s.key<a.rightNode.key)return a.rightNode=this.rightRotate(a.rightNode),this.leftRotate(a)}return a}rightRotate(s){if(s){let a=s.leftNode;if(a)return s.leftNode=a.rightNode,a.rightNode=s,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,a.height=Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode))+1,a}return s}leftRotate(s){if(s){let a=s.rightNode;if(a){let t=a.leftNode;return a.leftNode=s,s.rightNode=t,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,a.height=Math.max(this.getHeight(a.leftNode),this.getHeight(s.rightNode))+1,a}}return s}getHeight(s){return s?s.height:0}getBalanceFactor(s){return null==s?0:this.getHeight(s.leftNode)-this.getHeight(s.rightNode)}getFromNode(s,a){return a&&(s==a.key?a:s<a.key?this.getFromNode(s,a.leftNode):s>a.key?this.getFromNode(s,a.rightNode):a)}removeNode(s,a){if(null==s)return s;if(s.key>a)return s.leftNode=this.removeNode(s.leftNode,a),s;if(s.key<a)return s.rightNode=this.removeNode(s.rightNode,a),s;if(null==s.leftNode){let t=s.rightNode;return s=null,t}if(null==s.rightNode){let t=s.leftNode;return s=null,t}{let t=this.inOrderSuccessor(s.rightNode);return s.value=t.value,s.key=t.key,s.rightNode=this.removeNode(s.rightNode,t.key),s}}countNodeBelow(s){return null==s?0:1+this.countNodeBelow(s.leftNode)+this.countNodeBelow(s.rightNode)}inOrderSuccessor(s){for(;null!=s.leftNode;)s=s.leftNode;return s}}var e=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};let o=(()=>{class T{static addNodeToTree(a){if(null==this.root)return this.root=a,this.root;this.root=this.root.addNode(a,this.root,this.root.height)}static addWidgetToTree(a){let t=new r(a.widgetId,a,null,null);this.addNodeToTree(t)}static getNodeFromTree(a){return e(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(a,this.root):null})}static removeNodeFromTree(a){return e(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,a))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}return T.root=null,T})();class l{constructor(){this.widgetId=0,this.mainId=0,this.conceptIds=[],this.linkers=[],this.reverse=[],this.mainCompositionIds=[],this.countinfo=[]}}var f=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};class v{constructor(){this.name="conceptsArray"}static CheckContains(s){for(var a=!1,t=0;t<this.conceptsArray.length;t++)this.conceptsArray[t].id==s.id&&(a=!0);return a}static AddNpc(s){this.NPC.includes(s)||(this.NPC.length>10&&(this.NPC=[]),this.NPC.push(s))}static GetNpc(s){return!!this.NPC.includes(s)}static AddConceptToStorage(s){s.id>0&&(0,S.kH)("concept",s)}static GetConceptBulkData(s,a,t){return f(this,void 0,void 0,function*(){yield N.W.getConceptListFromIds(s,a,t)})}static AddWidget(s){if(I.serviceWorker)try{(0,I.sendMessage)("ConceptsData__AddWidget",{widgetDetails:s})}catch(a){console.error("Concept Data, Add Widget sw error: ",a),(0,I.handleServiceWorkerException)(a)}s.widgetId>0&&o.addWidgetToTree(s)}static AddConcept(s){if(I.serviceWorker)try{(0,I.sendMessage)("ConceptsData__AddConcept",{concept:s})}catch(a){console.error("Concept Data, Add Concpet sw error: ",a),(0,I.handleServiceWorkerException)(a)}s.id>0&&(N.W.addConceptToTree(s),h.c.addConceptToTree(s))}static AddConceptToMemory(s){s.id>0&&(N.W.addConceptToTree(s),h.c.addConceptToTree(s))}static AddConceptTemporary(s){var a=this.CheckContains(s);this.conceptDictionary[s.id]=s,a&&this.RemoveConcept(s),this.conceptsArray.push(s)}static RemoveConcept(s){for(var a=0;a<this.conceptsArray.length;a++)this.conceptsArray[a].id==s.id&&this.conceptsArray.splice(a,1);(0,S.wh)("concept",s.id)}static GetWidget(s){return f(this,void 0,void 0,function*(){let a=new l;if(I.serviceWorker)try{return(yield(0,I.sendMessage)("ConceptsData__GetWidget",{id:s})).data}catch(c){console.error("Concept Data, Get Widget sw error: ",c),(0,I.handleServiceWorkerException)(c)}let t=yield o.getNodeFromTree(s);return null!=t&&(a=t.value),a})}static RemoveWidget(s){return f(this,void 0,void 0,function*(){if(I.serviceWorker)try{return(yield(0,I.sendMessage)("ConceptsData__RemoveWidget",{id:s})).data}catch(a){console.error("Concept Data, Remove Widget sw error: ",a),(0,I.handleServiceWorkerException)(a)}yield o.removeNodeFromTree(s)})}static GetConcept(s){return f(this,void 0,void 0,function*(){if(I.serviceWorker)try{return(yield(0,I.sendMessage)("ConceptsData__GetConcept",{id:s})).data}catch(C){console.error("Concept Data, Get Concpet sw error: ",C),(0,I.handleServiceWorkerException)(C)}if(0==s||null==s||null==s)return(0,_.o)();var a=(0,_.o)(),t=yield N.W.getNodeFromTree(s);if(t?.value){var c=t.value;c&&(a=c)}return a})}static GetConceptByCharacter(s){return f(this,void 0,void 0,function*(){var a=(0,_.o)(),t=n.f.getNodeFromTree(s);return t&&(a=t.value),a})}static GetConceptByCharacterUpdated(s){return f(this,void 0,void 0,function*(){var a=(0,_.o)(),t=n.f.getNodeFromTree(s);return t&&(a=t.value),a})}static GetConceptByCharacterAndTypeLocal(s,a){return f(this,void 0,void 0,function*(){return(0,_.o)(),yield h.c.getTypeVariantsWithCharacterValueNew(s,a)})}static GetConceptByCharacterAndCategoryLocal(s,a){return f(this,void 0,void 0,function*(){var t=(0,_.o)(),c=yield n.f.getCharacterAndCategoryFromTree(s,a);return c&&(t=c.value),t})}static GetConceptsByTypeId(s){let a=[];for(var t=0;t<this.conceptsArray.length;t++)this.conceptsArray[t].typeId==s&&a.push(this.conceptsArray[t]);return a}static GetConceptsByTypeIdAndUser(s,a){var t=arguments;return f(this,void 0,void 0,function*(){if(I.Logger.logfunction("ConceptsData.GetConceptsByTypeIdAndUser",t),I.serviceWorker)try{return(yield(0,I.sendMessage)("ConceptsData__GetConceptsByTypeIdAndUser",{typeId:s,userId:a})).data}catch(C){console.error("Concept Data, Get Concpet sw error:",C),(0,I.handleServiceWorkerException)(C)}let c=[];return c=yield h.c.getTypeVariantsFromTreeWithUserIdNew(s,a),c})}static GetBinaryCharacterTree(){return n.f.characterRoot}getName(){return this.name}}v.conceptsArray=[],v.NPC=[],v.conceptDictionary=[]},3075:(X,E,g)=>{g.d(E,{Ay:()=>e,EO:()=>o,xd:()=>l});var S=g(205),N=g(9736),n=g(5257),h=g(9003),_=g(5205),I=g(1863),r=function(f,v,T,s){return new(T||(T=Promise))(function(a,t){function c(m){try{b(s.next(m))}catch(L){t(L)}}function C(m){try{b(s.throw(m))}catch(L){t(L)}}function b(m){var L;m.done?a(m.value):(L=m.value,L instanceof T?L:new T(function(A){A(L)})).then(c,C)}b((s=s.apply(f,v||[])).next())})};function e(){return r(this,void 0,void 0,function*(){const f=_.Logger.logfunction("CreateLocalBinaryTreeFromIndexDb");try{let v=[];if(Array.isArray(v))for(let T=0;T<v.length;T++)N.v.AddConceptToMemory(v[T]);S.B.isLocalDataLoaded=!0,S.B.isLocalTypeLoaded=!0,S.B.isLocalCharacterLoaded=!0,_.Logger.logUpdate(f)}catch(v){yield(0,_.DelayFunctionExecution)(2e3,e());let T={message:"Cannot create local binary tree from index db",data:v,ok:!1,status:400};throw(0,I.ey)(f,"CreateLocalBinaryTreeFromIndexDb",v),T}})}function o(){return r(this,void 0,void 0,function*(){var f;const v=_.Logger.logfunction("PopulateTheLocalConceptsToMemory");try{yield null===(f=navigator.locks)||void 0===f?void 0:f.request("dblock",T=>r(this,void 0,void 0,function*(){let s=yield(0,h.S5)("localid");if(Array.isArray(s)&&s[0]){let a=s[0].value;if(a)n.R.AddConceptId(s[0]),yield(0,h.kH)("localid",{id:0,value:a-10});else{a=-Math.floor(1e8*Math.random());let c={id:0,value:a-10};n.R.AddConceptId({id:0,value:a}),yield(0,h.kH)("localid",c)}}})),_.Logger.logUpdate(v)}catch(T){let s={message:"Cannot populate Local Ids from the Index Db",data:T,ok:!1,status:400};throw(0,I.ey)(v,"PopulateTheLocalConceptsToMemory",T),s}})}function l(){return r(this,void 0,void 0,function*(){var f;const v=_.Logger.logfunction("PopulateTheLocalConnectionToMemory");try{yield null===(f=navigator.locks)||void 0===f?void 0:f.request("dblock",T=>r(this,void 0,void 0,function*(){let s=yield(0,h.S5)("localid");if(Array.isArray(s)&&s[1]){let a=s[1].value;if(a)n.R.AddConnectionId(s[1]),yield(0,h.kH)("localid",{id:1,value:a-10});else{a=-Math.floor(1e8*Math.random());let c={id:0,value:a-10};n.R.AddConnectionId({id:0,value:a}),yield(0,h.kH)("localid",c)}}})),_.Logger.logUpdate(v)}catch(T){let s={message:"Cannot populate Local Ids from the Index Db",data:T,ok:!1,status:400};throw(0,I.ey)(v,"PopulateTheLocalConnectionToMemory",T),s}})}},3077:(X,E,g)=>{g.d(E,{A:()=>r});var S=g(5205),N=g(2615),n=g(9736),h=g(5257),_=g(9700),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function r(e,o,l,f,v,T){return I(this,arguments,void 0,function*(s,a,t,c,C,b,m=!1,L=0,A={concepts:[],connections:[]}){var O,B,G,R;let M=performance.now();try{if(S.serviceWorker)try{const _e=yield(0,S.sendMessage)("CreateTheConceptLocal",{referent:s,typecharacter:a,userId:t,categoryId:c,typeId:C,accessId:b,isComposition:m,referentId:L});return!(null===(B=null===(O=_e?.actions)||void 0===O?void 0:O.concepts)||void 0===B)&&B.length&&(A.concepts=JSON.parse(JSON.stringify(_e.actions.concepts))),!(null===(R=null===(G=_e?.actions)||void 0===G?void 0:G.connections)||void 0===R)&&R.length&&(A.connections=JSON.parse(JSON.stringify(_e.actions.connections))),_e.data}catch(_e){console.error("CreateTheConceptLocal error sw: ",_e),(0,S.handleServiceWorkerException)(_e)}let W=yield h.R.getConceptId(),V=!0,Q=new Date,te=new Date;if("the"==s)return new N.j(1,999,5,5,L,s,b,V,Q,te,a);let ne=new N.j(W,t,C,c,L,s,b,V,Q,te,a);return ne.isTemp=!0,ne.isComposition=m,n.v.AddConcept(ne),A.concepts.push(ne),ne}catch(W){throw _.V.logError(M,t,"create","unknown","unknown",500,void 0,"createTheConceptLocal",[s,a,t,c,C,b,m],void 0),W}})}},3130:(X,E,g)=>{g.d(E,{BG:()=>I,SL:()=>r,XZ:()=>_,ZJ:()=>n,iw:()=>h,pU:()=>e,y0:()=>N,yv:()=>S});const S=1,N=2,n=3,h=4,_=5,I=6,r=7,e=8},3152:(X,E,g)=>{let S=g(3614),N=g(7668),n=g(3303),{isClean:h,my:_}=g(4151);function I(o,l){let f=new o.constructor;for(let v in o){if(!Object.prototype.hasOwnProperty.call(o,v)||"proxyCache"===v)continue;let T=o[v],s=typeof T;"parent"===v&&"object"===s?l&&(f[v]=l):"source"===v?f[v]=T:Array.isArray(T)?f[v]=T.map(a=>I(a,f)):("object"===s&&null!==T&&(T=I(T)),f[v]=T)}return f}function r(o,l){if(l&&void 0!==l.offset)return l.offset;let f=1,v=1,T=0;for(let s=0;s<o.length;s++){if(v===l.line&&f===l.column){T=s;break}"\n"===o[s]?(f=1,v+=1):f+=1}return T}class e{get proxyOf(){return this}constructor(l={}){this.raws={},this[h]=!1,this[_]=!0;for(let f in l)if("nodes"===f){this.nodes=[];for(let v of l[f])this.append("function"==typeof v.clone?v.clone():v)}else this[f]=l[f]}addToError(l){if(l.postcssNode=this,l.stack&&this.source&&/\n\s{4}at /.test(l.stack)){let f=this.source;l.stack=l.stack.replace(/\n\s{4}at /,`$&${f.input.from}:${f.start.line}:${f.start.column}$&`)}return l}after(l){return this.parent.insertAfter(this,l),this}assign(l={}){for(let f in l)this[f]=l[f];return this}before(l){return this.parent.insertBefore(this,l),this}cleanRaws(l){delete this.raws.before,delete this.raws.after,l||delete this.raws.between}clone(l={}){let f=I(this);for(let v in l)f[v]=l[v];return f}cloneAfter(l={}){let f=this.clone(l);return this.parent.insertAfter(this,f),f}cloneBefore(l={}){let f=this.clone(l);return this.parent.insertBefore(this,f),f}error(l,f={}){if(this.source){let{end:v,start:T}=this.rangeBy(f);return this.source.input.error(l,{column:T.column,line:T.line},{column:v.column,line:v.line},f)}return new S(l)}getProxyProcessor(){return{get:(l,f)=>"proxyOf"===f?l:"root"===f?()=>l.root().toProxy():l[f],set:(l,f,v)=>(l[f]===v||(l[f]=v,"prop"!==f&&"value"!==f&&"name"!==f&&"params"!==f&&"important"!==f&&"text"!==f||l.markDirty()),!0)}}markClean(){this[h]=!0}markDirty(){if(this[h]){this[h]=!1;let l=this;for(;l=l.parent;)l[h]=!1}}next(){if(!this.parent)return;let l=this.parent.index(this);return this.parent.nodes[l+1]}positionBy(l={}){let f=this.source.start;if(l.index)f=this.positionInside(l.index);else if(l.word){let v="document"in this.source.input?this.source.input.document:this.source.input.css,T=v.slice(r(v,this.source.start),r(v,this.source.end)).indexOf(l.word);-1!==T&&(f=this.positionInside(T))}return f}positionInside(l){let f=this.source.start.column,v=this.source.start.line,T="document"in this.source.input?this.source.input.document:this.source.input.css,s=r(T,this.source.start),a=s+l;for(let t=s;t<a;t++)"\n"===T[t]?(f=1,v+=1):f+=1;return{column:f,line:v,offset:a}}prev(){if(!this.parent)return;let l=this.parent.index(this);return this.parent.nodes[l-1]}rangeBy(l={}){let f="document"in this.source.input?this.source.input.document:this.source.input.css,v={column:this.source.start.column,line:this.source.start.line,offset:r(f,this.source.start)},T=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:"number"==typeof this.source.end.offset?this.source.end.offset:r(f,this.source.end)+1}:{column:v.column+1,line:v.line,offset:v.offset+1};if(l.word){let s=f.slice(r(f,this.source.start),r(f,this.source.end)).indexOf(l.word);-1!==s&&(v=this.positionInside(s),T=this.positionInside(s+l.word.length))}else l.start?v={column:l.start.column,line:l.start.line,offset:r(f,l.start)}:l.index&&(v=this.positionInside(l.index)),l.end?T={column:l.end.column,line:l.end.line,offset:r(f,l.end)}:"number"==typeof l.endIndex?T=this.positionInside(l.endIndex):l.index&&(T=this.positionInside(l.index+1));return(T.line<v.line||T.line===v.line&&T.column<=v.column)&&(T={column:v.column+1,line:v.line,offset:v.offset+1}),{end:T,start:v}}raw(l,f){return(new N).raw(this,l,f)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...l){if(this.parent){let f=this,v=!1;for(let T of l)T===this?v=!0:v?(this.parent.insertAfter(f,T),f=T):this.parent.insertBefore(f,T);v||this.remove()}return this}root(){let l=this;for(;l.parent&&"document"!==l.parent.type;)l=l.parent;return l}toJSON(l,f){let v={},T=null==f;f=f||new Map;let s=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||"parent"===a||"proxyCache"===a)continue;let t=this[a];if(Array.isArray(t))v[a]=t.map(c=>"object"==typeof c&&c.toJSON?c.toJSON(null,f):c);else if("object"==typeof t&&t.toJSON)v[a]=t.toJSON(null,f);else if("source"===a){if(null==t)continue;let c=f.get(t.input);null==c&&(c=s,f.set(t.input,s),s++),v[a]={end:t.end,inputId:c,start:t.start}}else v[a]=t}return T&&(v.inputs=[...f.keys()].map(a=>a.toJSON())),v}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(l=n){l.stringify&&(l=l.stringify);let f="";return l(this,v=>{f+=v}),f}warn(l,f,v={}){let T={node:this};for(let s in v)T[s]=v[s];return l.warn(f,T)}}X.exports=e,e.default=e},3278:(X,E,g)=>{g.d(E,{b:()=>S});class S{static setSession(n){n&&(S.sessionId=n)}}S.BearerAccessToken="",S.sessionId=998},3295:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S=n(g(8937)),N=g(9606);function n(r){return r&&r.__esModule?r:{default:r}}function _(r,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o})(r,e)}var I=function(r){var e,o;function l(){return r.apply(this,arguments)||this}o=r,(e=l).prototype=Object.create(o.prototype),e.prototype.constructor=e,_(e,o);var f,v,T=l.prototype;return T.qualifiedName=function(s){return this.namespace?this.namespaceString+"|"+s:s},T.valueToString=function(){return this.qualifiedName(r.prototype.valueToString.call(this))},f=l,(v=[{key:"namespace",get:function(){return this._namespace},set:function(s){if(!0===s||"*"===s||"&"===s)return this._namespace=s,void(this.raws&&delete this.raws.namespace);var a=(0,S.default)(s,{isIdentifier:!0});this._namespace=s,a!==s?((0,N.ensureObject)(this,"raws"),this.raws.namespace=a):this.raws&&delete this.raws.namespace}},{key:"ns",get:function(){return this._namespace},set:function(s){this.namespace=s}},{key:"namespaceString",get:function(){if(this.namespace){var s=this.stringifyProperty("namespace");return!0===s?"":s}return""}}])&&function h(r,e){for(var o=0;o<e.length;o++){var l=e[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}(f.prototype,v),Object.defineProperty(f,"prototype",{writable:!1}),l}(n(g(4646)).default);E.default=I,X.exports=E.default},3303:(X,E,g)=>{let S=g(7668);function N(n,h){new S(h).stringify(n)}X.exports=N,N.default=N},3438:(X,E,g)=>{let S=g(396),N=g(9371),n=g(5238),h=g(1106),_=g(3878),I=g(5644),r=g(1534);function e(o,l){if(Array.isArray(o))return o.map(T=>e(T));let{inputs:f,...v}=o;if(f){l=[];for(let T of f){let s={...T,__proto__:h.prototype};s.map&&(s.map={...s.map,__proto__:_.prototype}),l.push(s)}}if(v.nodes&&(v.nodes=o.nodes.map(T=>e(T,l))),v.source){let{inputId:T,...s}=v.source;v.source=s,null!=T&&(v.source.input=l[T])}if("root"===v.type)return new I(v);if("decl"===v.type)return new n(v);if("rule"===v.type)return new r(v);if("comment"===v.type)return new N(v);if("atrule"===v.type)return new S(v);throw new Error("Unknown node type: "+o.type)}X.exports=e,e.default=e},3518:(X,E,g)=>{g.d(E,{BZ:()=>_,Xr:()=>n,ab:()=>h});var S=g(3278),N=g(490);function n(I="application/json",r="application/json"){var e;let o={},l=null===(e=S.b.sessionId)||void 0===e?void 0:e.toString();return o=""!=S.b.BearerAccessToken?{"Content-Type":I,Authorization:"Bearer "+S.b.BearerAccessToken,Accept:r,"X-Session-id":l}:{"Content-Type":I,Accept:r,"X-Session-id":l},o}function h(I="application/json",r="",e="application/json"){var o;""==r&&(r=S.b.BearerAccessToken);let l={},f=null===(o=S.b.sessionId)||void 0===o?void 0:o.toString();return l=""!=r?{"Content-Type":I,Authorization:"Bearer "+r,Accept:e,"X-Session-id":f}:{"Content-Type":I,Accept:e,"X-Session-id":f},l}function _(){var I;let r=S.b.BearerAccessToken,e=null===(I=S.b.sessionId)||void 0===I?void 0:I.toString();if(""==r){let l=(0,N.s)();""!=l.token&&(S.b.BearerAccessToken=l.token,r=l.token)}let o=new Headers;return o.append("Authorization","Bearer "+r),o.append("X-Session-Id",e),o}},3604:(X,E,g)=>{let{dirname:S,relative:N,resolve:n,sep:h}=g(197),{SourceMapConsumer:_,SourceMapGenerator:I}=g(1866),{pathToFileURL:r}=g(2739),e=g(1106),o=Boolean(_&&I),l=Boolean(S&&n&&N&&h);X.exports=class{constructor(f,v,T,s){this.stringify=f,this.mapOpts=T.map||{},this.root=v,this.opts=T,this.css=s,this.originalCSS=s,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let f;f=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let v="\n";this.css.includes("\r\n")&&(v="\r\n"),this.css+=v+"/*# sourceMappingURL="+f+" */"}applyPrevMaps(){for(let f of this.previous()){let v,T=this.toUrl(this.path(f.file)),s=f.root||S(f.file);!1===this.mapOpts.sourcesContent?(v=new _(f.text),v.sourcesContent&&(v.sourcesContent=null)):v=f.consumer(),this.map.applySourceMap(v,T,this.toUrl(this.path(s)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let f;for(let v=this.root.nodes.length-1;v>=0;v--)f=this.root.nodes[v],"comment"===f.type&&f.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(v)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),l&&o&&this.isMap())return this.generateMap();{let f="";return this.stringify(this.root,v=>{f+=v}),[f]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let f=this.previous()[0].consumer();f.file=this.outputFile(),this.map=I.fromSourceMap(f,{ignoreInvalidMapping:!0})}else this.map=new I({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new I({file:this.outputFile(),ignoreInvalidMapping:!0});let f,v,T=1,s=1,a="<no source>",t={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(c,C,b)=>{if(this.css+=c,C&&"end"!==b&&(t.generated.line=T,t.generated.column=s-1,C.source&&C.source.start?(t.source=this.sourcePath(C),t.original.line=C.source.start.line,t.original.column=C.source.start.column-1,this.map.addMapping(t)):(t.source=a,t.original.line=1,t.original.column=0,this.map.addMapping(t))),v=c.match(/\n/g),v?(T+=v.length,f=c.lastIndexOf("\n"),s=c.length-f):s+=c.length,C&&"start"!==b){let m=C.parent||{raws:{}};("decl"===C.type||"atrule"===C.type&&!C.nodes)&&C===m.last&&!m.raws.semicolon||(C.source&&C.source.end?(t.source=this.sourcePath(C),t.original.line=C.source.end.line,t.original.column=C.source.end.column-1,t.generated.line=T,t.generated.column=s-2,this.map.addMapping(t)):(t.source=a,t.original.line=1,t.original.column=0,t.generated.line=T,t.generated.column=s-1,this.map.addMapping(t)))}})}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(f=>f.annotation))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let f=this.mapOpts.annotation;return(void 0===f||!0===f)&&(!this.previous().length||this.previous().some(v=>v.inline))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(f=>f.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(f){if(this.mapOpts.absolute||60===f.charCodeAt(0)||/^\w+:\/\//.test(f))return f;let v=this.memoizedPaths.get(f);if(v)return v;let T=this.opts.to?S(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(T=S(n(T,this.mapOpts.annotation)));let s=N(T,f);return this.memoizedPaths.set(f,s),s}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(f=>{if(f.source&&f.source.input.map){let v=f.source.input.map;this.previousMaps.includes(v)||this.previousMaps.push(v)}});else{let f=new e(this.originalCSS,this.opts);f.map&&this.previousMaps.push(f.map)}return this.previousMaps}setSourcesContent(){let f={};if(this.root)this.root.walk(v=>{if(v.source){let T=v.source.input.from;if(T&&!f[T]){f[T]=!0;let s=this.usesFileUrls?this.toFileUrl(T):this.toUrl(this.path(T));this.map.setSourceContent(s,v.source.input.css)}}});else if(this.css){let v=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(v,this.css)}}sourcePath(f){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(f.source.input.from):this.toUrl(this.path(f.source.input.from))}toBase64(f){return Buffer?Buffer.from(f).toString("base64"):window.btoa(unescape(encodeURIComponent(f)))}toFileUrl(f){let v=this.memoizedFileURLs.get(f);if(v)return v;if(r){let T=r(f).toString();return this.memoizedFileURLs.set(f,T),T}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(f){let v=this.memoizedURLs.get(f);if(v)return v;"\\"===h&&(f=f.replace(/\\/g,"/"));let T=encodeURI(f).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(f,T),T}}},3614:(X,E,g)=>{let S=g(8633),N=g(9746);class n extends Error{constructor(_,I,r,e,o,l){super(_),this.name="CssSyntaxError",this.reason=_,o&&(this.file=o),e&&(this.source=e),l&&(this.plugin=l),void 0!==I&&void 0!==r&&("number"==typeof I?(this.line=I,this.column=r):(this.line=I.line,this.column=I.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,n)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(_){if(!this.source)return"";let I=this.source;null==_&&(_=S.isColorSupported);let r=s=>s,e=s=>s,o=s=>s;if(_){let{bold:s,gray:a,red:t}=S.createColors(!0);e=c=>s(t(c)),r=c=>a(c),N&&(o=c=>N(c))}let l=I.split(/\r?\n/),f=Math.max(this.line-3,0),v=Math.min(this.line+2,l.length),T=String(v).length;return l.slice(f,v).map((s,a)=>{let t=f+1+a,c=" "+(" "+t).slice(-T)+" | ";if(t===this.line){if(s.length>160){let b=20,m=Math.max(0,this.column-b),L=Math.max(this.column+b,this.endColumn+b),A=s.slice(m,L),O=r(c.replace(/\d/g," "))+s.slice(0,Math.min(this.column-1,b-1)).replace(/[^\t]/g," ");return e(">")+r(c)+o(A)+"\n "+O+e("^")}let C=r(c.replace(/\d/g," "))+s.slice(0,this.column-1).replace(/[^\t]/g," ");return e(">")+r(c)+o(s)+"\n "+C+e("^")}return" "+r(c)+o(s)}).join("\n")}toString(){let _=this.showSourceCode();return _&&(_="\n\n"+_+"\n"),this.name+": "+this.message+_}}X.exports=n,n.default=n},3631:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=function(o,l){if(o&&o.__esModule)return o;if(null===o||"object"!=typeof o&&"function"!=typeof o)return{default:o};var f=h(void 0);if(f&&f.has(o))return f.get(o);var v={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in o)if("default"!==s&&Object.prototype.hasOwnProperty.call(o,s)){var a=T?Object.getOwnPropertyDescriptor(o,s):null;a&&(a.get||a.set)?Object.defineProperty(v,s,a):v[s]=o[s]}return v.default=o,f&&f.set(o,v),v}(g(1581));function h(o){if("function"!=typeof WeakMap)return null;var l=new WeakMap,f=new WeakMap;return(h=function(v){return v?f:l})(o)}function _(o,l){(null==l||l>o.length)&&(l=o.length);for(var f=0,v=new Array(l);f<l;f++)v[f]=o[f];return v}function r(o,l){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f})(o,l)}var e=function(o){var l,f;function v(t){var c;return(c=o.call(this,t)||this).nodes||(c.nodes=[]),c}f=o,(l=v).prototype=Object.create(f.prototype),l.prototype.constructor=l,r(l,f);var T,s,a=v.prototype;return a.append=function(t){return t.parent=this,this.nodes.push(t),this},a.prepend=function(t){for(var c in t.parent=this,this.nodes.unshift(t),this.indexes)this.indexes[c]++;return this},a.at=function(t){return this.nodes[t]},a.index=function(t){return"number"==typeof t?t:this.nodes.indexOf(t)},a.removeChild=function(t){var c;for(var C in t=this.index(t),this.at(t).parent=void 0,this.nodes.splice(t,1),this.indexes)(c=this.indexes[C])>=t&&(this.indexes[C]=c-1);return this},a.removeAll=function(){for(var t,c=function(C,b){var m=typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(m)return(m=m.call(C)).next.bind(m);if(Array.isArray(C)||(m=function(A,O){if(A){if("string"==typeof A)return _(A,O);var B=Object.prototype.toString.call(A).slice(8,-1);return"Object"===B&&A.constructor&&(B=A.constructor.name),"Map"===B||"Set"===B?Array.from(A):"Arguments"===B||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?_(A,O):void 0}}(C))){m&&(C=m);var L=0;return function(){return L>=C.length?{done:!0}:{done:!1,value:C[L++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.nodes);!(t=c()).done;)t.value.parent=void 0;return this.nodes=[],this},a.empty=function(){return this.removeAll()},a.insertAfter=function(t,c){var C;c.parent=this;for(var b,m=this.index(t),L=[],A=2;A<arguments.length;A++)L.push(arguments[A]);for(var O in(C=this.nodes).splice.apply(C,[m+1,0,c].concat(L)),c.parent=this,this.indexes)m<(b=this.indexes[O])&&(this.indexes[O]=b+arguments.length-1);return this},a.insertBefore=function(t,c){var C;c.parent=this;for(var b,m=this.index(t),L=[],A=2;A<arguments.length;A++)L.push(arguments[A]);for(var O in(C=this.nodes).splice.apply(C,[m,0,c].concat(L)),c.parent=this,this.indexes)(b=this.indexes[O])>=m&&(this.indexes[O]=b+arguments.length-1);return this},a._findChildAtPosition=function(t,c){var C=void 0;return this.each(function(b){if(b.atPosition){var m=b.atPosition(t,c);if(m)return C=m,!1}else if(b.isAtPosition(t,c))return C=b,!1}),C},a.atPosition=function(t,c){return this.isAtPosition(t,c)?this._findChildAtPosition(t,c)||this:void 0},a._inferEndPosition=function(){this.last&&this.last.source&&this.last.source.end&&(this.source=this.source||{},this.source.end=this.source.end||{},Object.assign(this.source.end,this.last.source.end))},a.each=function(t){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var c=this.lastEach;if(this.indexes[c]=0,this.length){for(var C,b;this.indexes[c]<this.length&&!1!==(b=t(this.at(C=this.indexes[c]),C));)this.indexes[c]+=1;return delete this.indexes[c],!1!==b&&void 0}},a.walk=function(t){return this.each(function(c,C){var b=t(c,C);if(!1!==b&&c.length&&(b=c.walk(t)),!1===b)return!1})},a.walkAttributes=function(t){var c=this;return this.walk(function(C){if(C.type===n.ATTRIBUTE)return t.call(c,C)})},a.walkClasses=function(t){var c=this;return this.walk(function(C){if(C.type===n.CLASS)return t.call(c,C)})},a.walkCombinators=function(t){var c=this;return this.walk(function(C){if(C.type===n.COMBINATOR)return t.call(c,C)})},a.walkComments=function(t){var c=this;return this.walk(function(C){if(C.type===n.COMMENT)return t.call(c,C)})},a.walkIds=function(t){var c=this;return this.walk(function(C){if(C.type===n.ID)return t.call(c,C)})},a.walkNesting=function(t){var c=this;return this.walk(function(C){if(C.type===n.NESTING)return t.call(c,C)})},a.walkPseudos=function(t){var c=this;return this.walk(function(C){if(C.type===n.PSEUDO)return t.call(c,C)})},a.walkTags=function(t){var c=this;return this.walk(function(C){if(C.type===n.TAG)return t.call(c,C)})},a.walkUniversals=function(t){var c=this;return this.walk(function(C){if(C.type===n.UNIVERSAL)return t.call(c,C)})},a.split=function(t){var c=this,C=[];return this.reduce(function(b,m,L){var A=t.call(c,m);return C.push(m),A?(b.push(C),C=[]):L===c.length-1&&b.push(C),b},[])},a.map=function(t){return this.nodes.map(t)},a.reduce=function(t,c){return this.nodes.reduce(t,c)},a.every=function(t){return this.nodes.every(t)},a.some=function(t){return this.nodes.some(t)},a.filter=function(t){return this.nodes.filter(t)},a.sort=function(t){return this.nodes.sort(t)},a.toString=function(){return this.map(String).join("")},T=v,(s=[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}])&&function I(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}(T.prototype,s),Object.defineProperty(T,"prototype",{writable:!1}),v}(N.default);E.default=e,X.exports=E.default},3655:(X,E,g)=>{g.d(E,{El:()=>l,b8:()=>o,kH:()=>e,qI:()=>r,wh:()=>f});var S=g(2299),N=g(9581),n=g(5205),h=g(1863);let _=10;class I{}function r(v){const T=n.Logger.logfunction("openDatabase",[v,"indexdb"]);return new Promise(function(s,a){I.db&&(n.Logger.logUpdate(T),s(I.db));let t=N.B.BASE_URL+"_FreeSchema"+N.B.BASE_APPLICATION;const c=indexedDB.open(t,_);console.log("this is the update version",_,c),c.onupgradeneeded=C=>{let b=C.target.result,m="concept",L="connection",A="settings";console.log("this is the version update for index",_),b.objectStoreNames.contains(m)&&b.deleteObjectStore(m),b.objectStoreNames.contains(L)&&b.deleteObjectStore(L),b.objectStoreNames.contains(A)&&b.deleteObjectStore(A),b.objectStoreNames.contains(m)||(b.createObjectStore(m,{keyPath:"id"}).transaction.oncomplete=O=>{}),b.objectStoreNames.contains(L)||(b.createObjectStore(L,{keyPath:"id"}).transaction.oncomplete=O=>{}),b.objectStoreNames.contains(A)||(b.createObjectStore(A,{keyPath:"id"}).transaction.oncomplete=O=>{}),n.Logger.logUpdate(T),s(b)},c.onerror=C=>{console.error("Why didn't you allow my web app to use IndexedDB?!",C),indexedDB.deleteDatabase(t),r(v),(0,h.ey)(T,"openDatabase",C),a(C)},c.onsuccess=function(C){I.db=C.target.result,n.Logger.logUpdate(T),s(I.db)}})}function e(v,T){const s=n.Logger.logfunction("UpdateToDatabase",[v,"indexdb"]);return new Promise(function(a,t){r(v).then(c=>{const C=c.transaction(v,"readwrite").objectStore(v).put(T);C.onsuccess=b=>{n.Logger.logUpdate(s),a(T)},C.onerror=b=>{let m={status:400,ok:!1,message:"Cannot Update to the database"+v,data:b,body:T};(0,h.ey)(s,"UpdateToDatabase",m),t(m)}}).catch(c=>{let C={status:400,ok:!1,message:"Cannot update to database because you cannot open the database",data:c};(0,h.ey)(s,"UpdateToDatabase",C),t(C)})})}function o(){const v=n.Logger.logfunction("GetLastSettingsFromDatabase",["indexdb"]);return new Promise(function(T,s){let a="settings";r(a).then(t=>{let c=t.transaction(a,"readwrite").objectStore(a).getAll();c.onsuccess=()=>{let C=new S.B(!1),b=c.result;for(let m=0;m<b.length;m++)C=b[m];n.Logger.logUpdate(v),T(C)},c.onerror=C=>{(0,h.ey)(v,"GetLastSettingsFromDatabase",C),s(C)}}).catch(t=>{let c={status:400,ok:!1,message:"Cannot get last object from database because you cannot open the database",data:t};(0,h.ey)(v,"GetLastSettingsFromDatabase",c),s(c)})})}function l(v){const T=n.Logger.logfunction("AiUpdateFlag",["indexdb"]);return new Promise(function(s,a){let t="settings";r(t).then(c=>{const C=c.transaction(t,"readwrite").objectStore(t).put(v);C.onsuccess=b=>{n.Logger.logUpdate(T),s(v)},C.onerror=b=>{let m={status:400,ok:!1,message:"Cannot update AI flag",data:b,body:v};(0,h.ey)(T,"AiUpdateFlag",m),a(m)}}).catch(c=>{let C={status:400,ok:!1,message:"Cannot update AI flag because you cannot open the database",data:c};(0,h.ey)(T,"AiUpdateFlag",C),a(C)})})}function f(v,T){const s=n.Logger.logfunction("removeFromDatabase",[v,"indexdb"]);return new Promise(function(a,t){r(v).then(c=>{const C=c.transaction(v,"readwrite").objectStore(v).delete(Number(T));C.onsuccess=function(b){n.Logger.logUpdate(s),a(T)},C.onerror=b=>{let m={status:400,ok:!1,message:"Cannot remove from the database"+v,data:b};(0,h.ey)(s,"removeFromDatabase",m),t(m)}}).catch(c=>{let C={status:400,ok:!1,message:"Cannot remove from the database because you cannot open the database",data:c,body:T};(0,h.ey)(s,"removeFromDatabase",C),t(C)})})}},3717:(X,E,g)=>{let S=g(38);class N{get content(){return this.css}constructor(h,_,I){this.processor=h,this.messages=[],this.root=_,this.opts=I,this.css="",this.map=void 0}toString(){return this.css}warn(h,_={}){_.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(_.plugin=this.lastPlugin.postcssPlugin);let I=new S(h,_);return this.messages.push(I),I}warnings(){return this.messages.filter(h=>"warning"===h.type)}}X.exports=N,N.default=N},3729:(X,E,g)=>{g.d(E,{D:()=>f});var S=g(9934),N=g(4485),n=g(2),h=g(7876),_=g(4818),I=g(999),r=g(5868),e=g(5205),o=g(176),l=function(v,T,s,a){return new(s||(s=Promise))(function(t,c){function C(L){try{m(a.next(L))}catch(A){c(A)}}function b(L){try{m(a.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof s?A:new s(function(O){O(A)})).then(C,b)}m((a=a.apply(v,T||[])).next())})};function f(v){return l(this,arguments,void 0,function*(T,s={concepts:[],connections:[]}){var a,t,c,C;if(performance.now(),e.serviceWorker)try{const ye=yield(0,e.sendMessage)("UpdateCompositionLocal",{patcherStructure:T,actions:s});return!(null===(t=null===(a=ye?.actions)||void 0===a?void 0:a.concepts)||void 0===t)&&t.length&&(s.concepts=JSON.parse(JSON.stringify(ye.actions.concepts))),!(null===(C=null===(c=ye?.actions)||void 0===c?void 0:c.connections)||void 0===C)&&C.length&&(s.connections=JSON.parse(JSON.stringify(ye.actions.connections))),ye.data}catch(ye){console.error("UpdateCompositionLocal error sw: ",ye),(0,e.handleServiceWorkerException)(ye)}const b=T.userId,m=T.sessionId,L=T.accessId;let A=[];const O=[];let B=(0,e.CreateDefaultLConcept)(),G=(0,e.CreateDefaultLConcept)();const R=[],M=T.compositionId,W=T.ofTheCompositionId;let V=[],Q=yield(0,n.s)(M);for(let ye=0;ye<Q.length;ye++)A.push((0,o.P6)(Q[ye]));const te=[],ne=[];let _e=[];for(let ye=0;ye<A.length;ye++)(0,S.A)(ne,A[ye].ofTheConceptId),(0,S.A)(te,A[ye].ofTheConceptId),(0,S.A)(te,A[ye].toTheConceptId),_e.push(A[ye].ofTheConceptId);for(let ye=0;ye<te.length;ye++){const xe=yield(0,h.A)(te[ye]);M==te[ye]&&(B=(0,o.F4)(xe)),W==te[ye]&&(G=(0,o.F4)(xe)),O.push((0,o.F4)(xe))}const H=T.patchObject;for(const ye in H){let xe=(0,e.CreateDefaultLConcept)();const oe=H[ye];let K=B;G.id>0&&(K=G),Array.isArray(oe)||"object"==typeof oe?(xe=yield(0,r.k)(ye,"",!0,B.userId,4,999,void 0,s),yield(0,I.R)(H[ye],xe.id,xe.userId,B.id,B.userId,4,999,void 0,s)):xe=yield(0,r.k)(ye,oe,!1,b,L,m,void 0,s);const ie=(0,N.nm)(O,xe);for(let pe=0;pe<ie.length;pe++)if(ie[pe].id>0){const z=(0,N.gt)(A,ie[pe].id);V=V.concat(z),R.push(ie[pe])}yield(0,e.CreateTheConnectionLocal)(K.id,xe.id,B.id,2,void 0,void 0,s),O.push(xe)}for(let ye=0;ye<V.length;ye++)yield(0,_.m)(V[ye].id);yield e.LocalSyncData.SyncDataOnline(void 0,s)})}},3878:(X,E,g)=>{let{existsSync:S,readFileSync:N}=g(9977),{dirname:n,join:h}=g(197),{SourceMapConsumer:_,SourceMapGenerator:I}=g(1866);class r{constructor(o,l){if(!1===l.map)return;this.loadAnnotation(o),this.inline=this.startWith(this.annotation,"data:");let v=this.loadMap(l.from,l.map?l.map.prev:void 0);!this.mapFile&&l.from&&(this.mapFile=l.from),this.mapFile&&(this.root=n(this.mapFile)),v&&(this.text=v)}consumer(){return this.consumerCache||(this.consumerCache=new _(this.text)),this.consumerCache}decodeInline(o){let l=o.match(/^data:application\/json;charset=utf-?8,/)||o.match(/^data:application\/json,/);if(l)return decodeURIComponent(o.substr(l[0].length));let f=o.match(/^data:application\/json;charset=utf-?8;base64,/)||o.match(/^data:application\/json;base64,/);if(f)return v=o.substr(f[0].length),Buffer?Buffer.from(v,"base64").toString():window.atob(v);var v;let T=o.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+T)}getAnnotationURL(o){return o.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(o){return"object"==typeof o&&("string"==typeof o.mappings||"string"==typeof o._mappings||Array.isArray(o.sections))}loadAnnotation(o){let l=o.match(/\/\*\s*# sourceMappingURL=/g);if(!l)return;let f=o.lastIndexOf(l.pop()),v=o.indexOf("*/",f);f>-1&&v>-1&&(this.annotation=this.getAnnotationURL(o.substring(f,v)))}loadFile(o){if(this.root=n(o),S(o))return this.mapFile=o,N(o,"utf-8").toString().trim()}loadMap(o,l){if(!1===l)return!1;if(l){if("string"==typeof l)return l;if("function"!=typeof l){if(l instanceof _)return I.fromSourceMap(l).toString();if(l instanceof I)return l.toString();if(this.isMap(l))return JSON.stringify(l);throw new Error("Unsupported previous source map format: "+l.toString())}{let f=l(o);if(f){let v=this.loadFile(f);if(!v)throw new Error("Unable to load previous source map: "+f.toString());return v}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let f=this.annotation;return o&&(f=h(n(o),f)),this.loadFile(f)}}}startWith(o,l){return!!o&&o.substr(0,l.length)===l}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}X.exports=r,r.default=r},3996:(X,E,g)=>{g.d(E,{i:()=>S});class S{constructor(n,h,_,I){this.key="",this.value=[],this.height=1,this.key=n,this.value=h,this.leftNode=_,this.rightNode=I}getFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getFromNode(n,h.leftNode):n>h.key?this.getFromNode(n,h.rightNode):h)}rightRotate(n){if(n){let h=n.leftNode;if(h)return n.leftNode=h.rightNode,h.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,h}return n}leftRotate(n){if(n){let h=n.rightNode;if(h){let _=h.leftNode;return h.leftNode=n,n.rightNode=_,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(n.rightNode))+1,h}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return null==n?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}removeNode(n,h){if(null==n)return n;if(n.key>h)return n.leftNode=this.removeNode(n.leftNode,h),n;if(n.key<h)return n.rightNode=this.removeNode(n.rightNode,h),n;if(null==n.leftNode){let _=n.rightNode;return n=null,_}if(null==n.rightNode){let _=n.leftNode;return n=null,_}{let _=this.inOrderSuccessor(n.rightNode);return n.value=_.value,n.key=_.key,n.variants=_.variants,n.currentNode=_.currentNode,n.rightNode=this.removeNode(n.rightNode,_.key),n}}inOrderSuccessor(n){for(;null!=n.leftNode;)n=n.leftNode;return n}}},4151:X=>{X.exports.isClean=Symbol("isClean"),X.exports.my=Symbol("my")},4195:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S=_(g(8937)),N=g(9606),n=_(g(4646)),h=g(1581);function _(o){return o&&o.__esModule?o:{default:o}}function r(o,l){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f})(o,l)}var e=function(o){var l,f,v,T;function s(a){var t;return(t=o.call(this,a)||this).type=h.CLASS,t._constructed=!0,t}return f=o,(l=s).prototype=Object.create(f.prototype),l.prototype.constructor=l,r(l,f),s.prototype.valueToString=function(){return"."+o.prototype.valueToString.call(this)},v=s,(T=[{key:"value",get:function(){return this._value},set:function(a){if(this._constructed){var t=(0,S.default)(a,{isIdentifier:!0});t!==a?((0,N.ensureObject)(this,"raws"),this.raws.value=t):this.raws&&delete this.raws.value}this._value=a}}])&&function I(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}(v.prototype,T),Object.defineProperty(v,"prototype",{writable:!1}),s}(n.default);E.default=e,X.exports=E.default},4211:(X,E,g)=>{let S=g(3604),N=g(9577);const n=g(3717);let h=g(3303);g(6156);class _{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let r,e=N;try{r=e(this._css,this._opts)}catch(o){this.error=o}if(this.error)throw this.error;return this._root=r,r}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(r,e,o){let l;e=e.toString(),this.stringified=!1,this._processor=r,this._css=e,this._opts=o,this._map=void 0;let f=h;this.result=new n(this._processor,l,this._opts),this.result.css=e;let v=this;Object.defineProperty(this.result,"root",{get:()=>v.root});let T=new S(f,l,this._opts,e);if(T.isMap()){let[s,a]=T.generate();s&&(this.result.css=s),a&&(this.result.map=a)}else T.clearAnnotation(),this.result.css=T.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(r){return this.async().catch(r)}finally(r){return this.async().then(r,r)}sync(){if(this.error)throw this.error;return this.result}then(r,e){return this.async().then(r,e)}toString(){return this._css}warnings(){return[]}}X.exports=_,_.default=_},4287:(X,E,g)=>{g.d(E,{w:()=>h});var S=g(5205),N=g(3130),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};class h{constructor(){this.subscribers=[],this.mainConcept=0,this.compositionIds=[],this.conceptIds=[],this.internalConnections=[],this.reverse=[],this.linkers=[],this.newIds=[],this.dependency=[],this.isDataLoaded=!1,this.isUpdating=!1,this.fetched=!1,this.format=N.yv,this.eventHandlers={}}listenToEventType(I){if(this.eventHandlers[I])return;const r=e=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){try{let l=e;if(!o.compositionIds.includes(l?.detail)){o.compositionIds.unshift(l?.detail),o.listenToEvent(l?.detail);let f=l?.detail,v=yield S.ConnectionData.GetConnectionByOfTheConceptAndType(f,f);for(let T=0;T<v.length;T++)yield S.ConnectionData.GetConnection(v[T]).then(s=>{s.typeId==o.mainConcept?o.internalConnections.includes(s.id)||o.internalConnections.push(s.id):o.linkers.includes(s.id)||o.linkers.push(s.id),o.conceptIds.includes(s.toTheConceptId)||o.conceptIds.push(s.toTheConceptId),o.compositionIds.includes(s.ofTheConceptId)||o.compositionIds.push(s.ofTheConceptId)})}o.isUpdating=!1,yield o.bind(),o.notify()}catch(l){throw console.error("Error in typeHandler event listener:",l),o.isUpdating=!1,l}})},200)}});this.eventHandlers[I]=r,window.addEventListener(`${I}`,r)}listenToEvent(I){if(this.eventHandlers[I])return;const r=e=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){try{let l=yield S.ConnectionData.GetConnectionByOfTheConceptAndType(I,I);for(let f=0;f<l.length;f++)yield S.ConnectionData.GetConnection(l[f]).then(v=>{v.typeId==o.mainConcept?o.internalConnections.includes(v.id)||o.internalConnections.push(v.id):o.linkers.includes(v.id)||o.linkers.push(v.id),o.conceptIds.includes(v.toTheConceptId)||o.conceptIds.push(v.toTheConceptId),o.compositionIds.includes(v.ofTheConceptId)||(o.compositionIds.push(v.ofTheConceptId),o.newIds.includes(v.ofTheConceptId)||o.newIds.push(v.ofTheConceptId))});o.isUpdating=!1,yield o.bind(),o.notify()}catch(l){throw console.error("Error in event listener for concept",I,":",l),o.isUpdating=!1,l}})},200)}});this.eventHandlers[I]=r,window.addEventListener(`${I}`,r)}removeListenToEvent(I){const r=this.eventHandlers[I];r&&(window.removeEventListener(`${I}`,r),delete this.eventHandlers[I])}listenToEventConnectionType(I,r){const e=`${I}_type_${r}`;if(this.eventHandlers[e])return;const o=l=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let f=this;setTimeout(function(){return n(this,void 0,void 0,function*(){try{let v=yield S.ConnectionData.GetConnectionByOfTheConceptAndType(I,I);for(let T=0;T<v.length;T++)v[T].typeId==r&&(yield S.ConnectionData.GetConnection(v[T]).then(s=>{s.typeId==f.mainConcept?f.internalConnections.includes(s.id)||f.internalConnections.push(s.id):f.linkers.includes(s.id)||f.linkers.push(s.id),f.conceptIds.includes(s.toTheConceptId)||f.conceptIds.push(s.toTheConceptId),f.compositionIds.includes(s.ofTheConceptId)||f.compositionIds.push(s.ofTheConceptId)}));f.isUpdating=!1,yield f.bind(),f.notify()}catch(v){throw console.error("Error in connectionType handler:",v),f.isUpdating=!1,v}})},200)}});this.eventHandlers[e]=o,window.addEventListener(`${I}`,o)}bind(){return n(this,void 0,void 0,function*(){console.log("this is the old execute data")})}run(){return n(this,void 0,void 0,function*(){console.log("this is non subscriber data")})}update(){return n(this,void 0,void 0,function*(){this.isDataLoaded=!1,yield this.bind(),this.notify()})}subscribe(I,r){return n(this,void 0,void 0,function*(){this.subscribers.push(I);try{return yield this.bind(),I(this.data,this)}catch(e){throw console.error("Error in subscribe:",e),r&&r(e),e}})}execute(){return n(this,void 0,void 0,function*(){return yield this.run()})}unsubscribe(I){return this.subscribers.filter(r=>r!=I),this.subscribers.length}notify(){this.subscribers.map(I=>{I(this.data,this)})}}},4310:(X,E,g)=>{g.d(E,{Cp:()=>f,ix:()=>s,ml:()=>T,qj:()=>v});var S=g(5205),N=g(1596),n=g(4698),h=g(1863),_=g(1320),I=g(3518),r=function(a,t,c,C){return new(c||(c=Promise))(function(b,m){function L(B){try{O(C.next(B))}catch(G){m(G)}}function A(B){try{O(C.throw(B))}catch(G){m(G)}}function O(B){var G;B.done?b(B.value):(G=B.value,G instanceof c?G:new c(function(R){R(G)})).then(L,A)}O((C=C.apply(a,t||[])).next())})};const e=new Map,o=new Map,l=new Map;function f(a){var t=arguments;return r(this,void 0,void 0,function*(){S.Logger.logfunction("BuildWidgetFromId",t);try{if(S.serviceWorker)return(yield(0,S.sendMessage)("BuildWidgetFromId",{id:a})).data}catch(b){console.error("BuildWidgetFromId error sw: ",b),(0,S.handleServiceWorkerException)(b)}let c={};if(e.has(a))return e.get(a)||c;const C=(()=>r(this,void 0,void 0,function*(){try{let b=[],m=[],L=[],A=[],O="DESC",B=[],G={},R=(0,I.Xr)("application/json"),M=S.BaseUrl.getWidgetData()+"?id="+a;const W=yield fetch(M,{method:"GET",headers:R});if(!W.ok)return(0,h.ry)(W),console.log("This is the BuildWidgetFromId error",W.status),[];G=yield W.json(),b=G.conceptIds,m=G.linkers,L=G.reverse,A=G.mainCompositionIds,B=G.countinfo;let V=(0,n.w)(B);return c=yield(0,_.e$)(m,b,A,L,V,O),c}catch(b){throw console.log("this is the error in the build widget",b),b}finally{e.delete(a)}}))();return e.set(a,C),C})}function v(a){var t=arguments;return r(this,void 0,void 0,function*(){S.Logger.logfunction("BuildWidgetFromIdForLatest",t);try{if(S.serviceWorker)return(yield(0,S.sendMessage)("BuildWidgetFromIdForLatest",{id:a})).data}catch(b){console.error("BuildWidgetFromIdForLatest error sw: ",b),(0,S.handleServiceWorkerException)(b)}let c={};if(o.has(a))return o.get(a)||c;const C=(()=>r(this,void 0,void 0,function*(){try{let b,m=[],L=[],A=[],O=[],B="DESC",G=[],R={},M=(0,I.Xr)("application/json");try{let V=S.BaseUrl.getLatestWidgetData()+"?id="+a;b=yield fetch(V,{method:"GET",headers:M})}catch{b=yield(0,N.g)({method:"GET",headers:M},"?id="+a)}if(!b.ok)return(0,h.ry)(b),console.log("This is the BuildWidgetFromId error",b.status),[];R=yield b.json(),m=R.conceptIds,L=R.linkers,A=R.reverse,O=R.mainCompositionIds,G=R.countinfo;let W=(0,n.w)(G);return c=yield(0,_.e$)(L,m,O,A,W,B),{data:c,mainId:R.mainId}}catch(b){throw console.log("this is the error in the build widget",b),b}finally{o.delete(a)}}))();return o.set(a,C),C})}function T(a){var t=arguments;return r(this,void 0,void 0,function*(){S.Logger.logfunction("BuildWidgetFromIdForRecent",t);try{if(S.serviceWorker)return(yield(0,S.sendMessage)("BuildWidgetFromIdForRecent",{id:a})).data}catch(b){console.error("BuildWidgetFromIdForRecent error sw: ",b),(0,S.handleServiceWorkerException)(b)}let c={};if(l.has(a))return l.get(a)||c;const C=(()=>r(this,void 0,void 0,function*(){try{let b,m=[],L=[],A=[],O=[],B="DESC",G=[],R={},M=(0,I.Xr)("application/json");try{let V=S.BaseUrl.getRecentWidgetData()+"?id="+a;b=yield fetch(V,{method:"GET",headers:M})}catch{b=yield(0,N.g)({method:"GET",headers:M},"?id="+a)}if(!b.ok)return(0,h.ry)(b),console.log("This is the BuildWidgetFromId error",b.status),[];R=yield b.json(),m=R.conceptIds,L=R.linkers,A=R.reverse,O=R.mainCompositionIds,G=R.countinfo;let W=(0,n.w)(G);return c=yield(0,_.e$)(L,m,O,A,W,B),{data:c,mainId:R.mainId}}catch(b){throw console.log("this is the error in the build widget",b),b}finally{l.delete(a)}}))();return l.set(a,C),C})}function s(a,t){for(let c=0;c<a.length;c++)if(a[c].id==t)return a[c]}},4364:(X,E,g)=>{g.d(E,{s:()=>h});var S=g(1239),N=g(5205),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};function h(){return n(this,arguments,void 0,function*(_=[]){const I=N.Logger.logfunction("FindConceptsFromConnections",[_.length]);let r=[];if(_.length>0){for(let e=0;e<_.length;e++)r.includes(_[e].ofTheConceptId)||r.push(_[e].ofTheConceptId),r.includes(_[e].toTheConceptId)||r.push(_[e].toTheConceptId),r.includes(_[e].typeId)||r.push(_[e].typeId);yield(0,S.r)(r)}N.Logger.logUpdate(I)})}},4402:(X,E,g)=>{g.d(E,{A:()=>e});var S=g(3026),N=g(9581),n=g(3518),h=g(1863),_=g(5205),I=g(7876),r=function(o,l,f,v){return new(f||(f=Promise))(function(T,s){function a(C){try{c(v.next(C))}catch(b){s(b)}}function t(C){try{c(v.throw(C))}catch(b){s(b)}}function c(C){var b;C.done?T(C.value):(b=C.value,b instanceof f?b:new f(function(m){m(b)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function e(o,l){var f=arguments;return r(this,void 0,void 0,function*(){const v=_.Logger.logfunction("GetConceptByCharacterAndType",f);try{if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetConceptByCharacterAndType",{characterValue:o,typeId:l})).data}catch(c){console.error("GetConceptByCharacterAndType sw error: ",c),(0,_.handleServiceWorkerException)(c)}let t=yield S.I.GetConceptByCharacterAndTypeLocal(o,l);if(null==t||0==t.id){var T={character_value:`${o}`,type_id:l},s=JSON.stringify(T),a=(0,n.Xr)();const c=yield fetch(N.B.GetConceptByCharacterAndTypeUrl(),{method:"POST",headers:a,body:s});c.ok?(t=yield c.json(),(0,I.K)(t).then(b=>{S.I.AddConcept(t)})):((0,h.ry)(c),console.log("This is the concept by type and character error",c.status))}return _.Logger.logUpdate(v),t}catch(t){t instanceof Error?console.log(" This is the concept by type and character error message: ",t.message):console.log(" This is the concept by type and character unexpected error: ",t),(0,h.Mb)(t,N.B.GetConceptByCharacterAndTypeUrl()),(0,h.ey)(v,"GetConceptByCharacterAndType",t)}})}},4451:(X,E,g)=>{E.__esModule=!0,E.universal=E.tag=E.string=E.selector=E.root=E.pseudo=E.nesting=E.id=E.comment=E.combinator=E.className=E.attribute=void 0;var S=T(g(5588)),N=T(g(4195)),n=T(g(1704)),h=T(g(425)),_=T(g(7071)),I=T(g(2918)),r=T(g(7324)),e=T(g(518)),o=T(g(339)),l=T(g(5799)),f=T(g(9720)),v=T(g(1669));function T(s){return s&&s.__esModule?s:{default:s}}E.attribute=function(s){return new S.default(s)},E.className=function(s){return new N.default(s)},E.combinator=function(s){return new n.default(s)},E.comment=function(s){return new h.default(s)},E.id=function(s){return new _.default(s)},E.nesting=function(s){return new I.default(s)},E.pseudo=function(s){return new r.default(s)},E.root=function(s){return new e.default(s)},E.selector=function(s){return new o.default(s)},E.string=function(s){return new l.default(s)},E.tag=function(s){return new f.default(s)},E.universal=function(s){return new v.default(s)}},4485:(X,E,g)=>{function S(_=[],I){var r,e;let o=[],l=null===(r=I.type)||void 0===r?void 0:r.characterValue;if(l?.startsWith("the_")||(l="the_"+l),Array.isArray(_))for(let f=0;f<_.length;f++){let v=null===(e=_[f].type)||void 0===e?void 0:e.characterValue;v?.startsWith("the_")||(v="the_"+v),I.typeId!=_[f].typeId&&l!=v||o.push(_[f])}return o}function N(_=[],I){let r=[],e=I.typeCharacter;if(e?.startsWith("the_")||(e="the_"+e),Array.isArray(_))for(let o=0;o<_.length;o++){let l=_[o].typeCharacter;l?.startsWith("the_")||(l="the_"+l),I.typeId!=_[o].typeId&&e!=l||r.push(_[o])}return r}function n(_=[],I){let r=[];if(Array.isArray(_)){const e=_.find(l=>l.toTheConceptId==I);e&&r.push(e);const o=_.find(l=>l.ofTheConceptId==I);o&&r.push(o)}return r}function h(_=[],I){let r=[];if(Array.isArray(_)){const e=_.find(l=>l.toTheConceptId==I);e&&r.push(e);const o=_.find(l=>l.ofTheConceptId==I);o&&r.push(o)}return r}g.d(E,{gt:()=>h,nm:()=>N,vo:()=>S,wS:()=>n}),g(2155),g(7282)},4643:(X,E,g)=>{function S(N){try{if(!g.g.localStorage)return!1}catch{return!1}var n=g.g.localStorage[N];return null!=n&&"true"===String(n).toLowerCase()}X.exports=function(N,n){if(S("noDeprecation"))return N;var h=!1;return function(){if(!h){if(S("throwDeprecation"))throw new Error(n);S("traceDeprecation")?console.trace(n):console.warn(n),h=!0}return N.apply(this,arguments)}}},4646:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S=g(9606),n=function _(I,r){if("object"!=typeof I||null===I)return I;var e=new I.constructor;for(var o in I)if(I.hasOwnProperty(o)){var l=I[o];"parent"===o&&"object"==typeof l?r&&(e[o]=r):e[o]=l instanceof Array?l.map(function(f){return _(f,e)}):_(l,e)}return e},h=function(){function _(o){void 0===o&&(o={}),Object.assign(this,o),this.spaces=this.spaces||{},this.spaces.before=this.spaces.before||"",this.spaces.after=this.spaces.after||""}var I,r,e=_.prototype;return e.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.replaceWith=function(){if(this.parent){for(var o in arguments)this.parent.insertBefore(this,arguments[o]);this.remove()}return this},e.next=function(){return this.parent.at(this.parent.index(this)+1)},e.prev=function(){return this.parent.at(this.parent.index(this)-1)},e.clone=function(o){void 0===o&&(o={});var l=n(this);for(var f in o)l[f]=o[f];return l},e.appendToPropertyAndEscape=function(o,l,f){this.raws||(this.raws={});var v=this[o],T=this.raws[o];this[o]=v+l,T||f!==l?this.raws[o]=(T||v)+f:delete this.raws[o]},e.setPropertyAndEscape=function(o,l,f){this.raws||(this.raws={}),this[o]=l,this.raws[o]=f},e.setPropertyWithoutEscape=function(o,l){this[o]=l,this.raws&&delete this.raws[o]},e.isAtPosition=function(o,l){if(this.source&&this.source.start&&this.source.end)return!(this.source.start.line>o||this.source.end.line<o||this.source.start.line===o&&this.source.start.column>l||this.source.end.line===o&&this.source.end.column<l)},e.stringifyProperty=function(o){return this.raws&&this.raws[o]||this[o]},e.valueToString=function(){return String(this.stringifyProperty("value"))},e.toString=function(){return[this.rawSpaceBefore,this.valueToString(),this.rawSpaceAfter].join("")},I=_,(r=[{key:"rawSpaceBefore",get:function(){var o=this.raws&&this.raws.spaces&&this.raws.spaces.before;return void 0===o&&(o=this.spaces&&this.spaces.before),o||""},set:function(o){(0,S.ensureObject)(this,"raws","spaces"),this.raws.spaces.before=o}},{key:"rawSpaceAfter",get:function(){var o=this.raws&&this.raws.spaces&&this.raws.spaces.after;return void 0===o&&(o=this.spaces.after),o||""},set:function(o){(0,S.ensureObject)(this,"raws","spaces"),this.raws.spaces.after=o}}])&&function N(_,I){for(var r=0;r<I.length;r++){var e=I[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(_,e.key,e)}}(I.prototype,r),Object.defineProperty(I,"prototype",{writable:!1}),_}();E.default=h,X.exports=E.default},4698:(X,E,g)=>{g.d(E,{V:()=>I,w:()=>_});var S=g(7139),N=g(5205),n=g(276),h=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function _(e=[]){let o=[];if(e.length>0)for(let l=0;l<e.length;l++){let f=r(e[l]);o.push(f)}return o}function I(e){var o=arguments;return h(this,void 0,void 0,function*(){const l=N.Logger.logfunction("GetConnectionTypeForCount",o);let f={};for(let v=0;v<e.length;v++){let T=yield(0,S.r)(e[v].connectionTypeId);e[v].connectionType=T.characterValue,f[e[v].conceptId]=e[v]}return N.Logger.logUpdate(l),f})}function r(e){const o=e.split("_");if(3===o.length){let l=new n.y;return l.conceptId=Number(o[0]),l.connectionTypeId=Number(o[1]),l.count=Number(o[2]),l}throw new Error("Input string must contain exactly three parts separated by underscores.")}},4711:(X,E,g)=>{g.d(E,{F:()=>r,d:()=>e});var S=g(2155),N=g(4864),n=g(5257),h=g(9700),_=g(5205),I=function(o,l,f,v){return new(f||(f=Promise))(function(T,s){function a(C){try{c(v.next(C))}catch(b){s(b)}}function t(C){try{c(v.throw(C))}catch(b){s(b)}}function c(C){var b;C.done?T(C.value):(b=C.value,b instanceof f?b:new f(function(m){m(b)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function r(o,l,f){return I(this,arguments,void 0,function*(v,T,s,a=1,t="",c=999,C={concepts:[],connections:[]}){var b,m,L,A;let O=performance.now();if(_.serviceWorker)try{const B=yield(0,_.sendMessage)("CreateTheConnectionLocal",{ofTheConceptId:v,toTheConceptId:T,typeId:s,orderId:a,typeString:t,userId:c,actions:C});return!(null===(m=null===(b=B?.actions)||void 0===b?void 0:b.concepts)||void 0===m)&&m.length&&(C.concepts=JSON.parse(JSON.stringify(B.actions.concepts))),!(null===(A=null===(L=B?.actions)||void 0===L?void 0:L.connections)||void 0===A)&&A.length&&(C.connections=JSON.parse(JSON.stringify(B.actions.connections))),B.data}catch(B){console.log("CreateTheConnectionLocal error sw: ",B),(0,_.handleServiceWorkerException)(B)}try{let B=4,G=yield n.R.getConnectionId(),R=0,M=0,W=0;R=v,M=T,W=s;let V=new S.N(0,0,0,0,0,0,0);return v!=T&&(V=new S.N(G,R,M,c,s,a,B),V.isTemp=!0,V.typeCharacter=t,_.LocalSyncData.AddConnection(V),N.G.AddConnection(V),C.connections.push(V)),V}catch(B){throw h.V.logError(O,c,"create","Unknown","Unknown",500,void 0,"CreateTheConnectionLocal",[v,T,s,a,t,c],"UnknownUserAgent",[]),B}})}function e(o,l,f){return I(this,arguments,void 0,function*(v,T,s,a={concepts:[],connections:[]}){var t,c,C,b;if(_.serviceWorker)try{const A=yield(0,_.sendMessage)("CreateConnection",{ofTheConcept:v,toTheConcept:T,connectionTypeString:s,actions:a});return!(null===(c=null===(t=A?.actions)||void 0===t?void 0:t.concepts)||void 0===c)&&c.length&&(a.concepts=JSON.parse(JSON.stringify(A.actions.concepts))),!(null===(b=null===(C=A?.actions)||void 0===C?void 0:C.connections)||void 0===b)&&b.length&&(a.connections=JSON.parse(JSON.stringify(A.actions.connections))),A.data}catch(A){console.log("CreateConnection error sw: ",A),(0,_.handleServiceWorkerException)(A)}let m=yield(0,_.MakeTheTypeConceptLocal)(s,999,999,999),L=v.userId;return yield r(v.id,T.id,m.id,1e3,s,L,a)})}},4818:(X,E,g)=>{g.d(E,{m:()=>l,E:()=>f});var S=g(5205),N=g(1863),n=g(3518),h=function(v,T,s,a){return new(s||(s=Promise))(function(t,c){function C(L){try{m(a.next(L))}catch(A){c(A)}}function b(L){try{m(a.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof s?A:new s(function(O){O(A)})).then(C,b)}m((a=a.apply(v,T||[])).next())})},_=g(9581),I=function(v,T,s,a){return new(s||(s=Promise))(function(t,c){function C(L){try{m(a.next(L))}catch(A){c(A)}}function b(L){try{m(a.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof s?A:new s(function(O){O(A)})).then(C,b)}m((a=a.apply(v,T||[])).next())})},r=g(5239),e=g(4864),o=function(v,T,s,a){return new(s||(s=Promise))(function(t,c){function C(L){try{m(a.next(L))}catch(A){c(A)}}function b(L){try{m(a.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof s?A:new s(function(O){O(A)})).then(C,b)}m((a=a.apply(v,T||[])).next())})};function l(v){var T=arguments;return o(this,void 0,void 0,function*(){const s=S.Logger.logfunction("DeleteConnectionById",T);if(S.serviceWorker)try{return(yield(0,S.sendMessage)("DeleteConnectionById",{id:v})).data}catch(t){console.error("DeleteConnectionById sw error: ",t),(0,S.handleServiceWorkerException)(t)}let a=!0;return v>0?(a=yield function(t){var c=arguments;return I(this,void 0,void 0,function*(){const C=S.Logger.logfunction("DeleteTheConnection",c);let b=!1;try{const m=new FormData;m.append("id",t.toString());let L=(0,n.BZ)();const A=yield fetch(_.B.DeleteTheConnectionUrl(),{method:"POST",headers:L,body:m,redirect:"follow"});S.Logger.logUpdate(C),A.ok?b=(yield A.json()).success:(console.log("Delete connection error status: ",A.status),(0,N.ry)(A)),b&&S.ConnectionData.AddNpConn(t)}catch(m){m instanceof Error?console.log("Delete connection error message: ",m.message):console.log("Delete connection unexpected error: ",m),(0,N.Mb)(m,_.B.DeleteTheConnectionUrl()),(0,N.ey)(C,"DeleteTheConnection",m)}return b})}(v),r.O.removeNodeFromTree(v)):e.G.RemoveConnectionById(v),S.Logger.logUpdate(s),a})}function f(v){var T=arguments;return o(this,void 0,void 0,function*(){const s=S.Logger.logfunction("DeleteConnectionByIdBulk",T);if(S.serviceWorker)try{return(yield(0,S.sendMessage)("DeleteConnectionByIdBulk",{ids:v})).data}catch(t){console.error("DeleteConnectionByIdBulk sw error: ",t),(0,S.handleServiceWorkerException)(t)}let a=yield function(t){var c=arguments;return h(this,void 0,void 0,function*(){const C=S.Logger.logfunction("DeleteTheConnectionBulkApi",c);let b=!1;try{let m=(0,n.BZ)();m.append("Content-Type","application/json");const L=yield fetch(S.BaseUrl.DeleteTheConnectionBulkUrl(),{method:"POST",headers:m,body:JSON.stringify(t)});if(S.Logger.logUpdate(C),L.ok?b=(yield L.json()).success:(console.log("Delete connection Bulk Api error status: ",L.status),(0,N.ry)(L)),b)for(let A=0;A<t.length;A++)S.ConnectionData.AddNpConn(t[A])}catch(m){m instanceof Error?console.log("Delete connection Bulk Api error message: ",m.message):console.log("Delete connection Bulk Api unexpected error: ",m),(0,N.Mb)(m,S.BaseUrl.DeleteTheConnectionUrl()),(0,N.ey)(C,"DeleteTheConnectionBulkApi",m)}return b})}(v);if(a)for(let t=0;t<v.length;t++){let c=v[t];c>0?r.O.removeNodeFromTree(c):e.G.RemoveConnectionById(c)}return S.Logger.logUpdate(s),a})}},4864:(X,E,g)=>{g.d(E,{G:()=>I});var S=g(2155),N=g(8286),n=g(205),h=g(628),_=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};class I{constructor(){this.name="Connection Array"}static CheckContains(e){for(var o=!1,l=0;l<this.connectionArray.length;l++)this.connectionArray[l].id==e.id&&(o=!0);return o}static AddConnection(e){this.CheckContains(e)&&this.RemoveConnection(e),this.connectionArray.push(e)}static AddConnectionToMemory(e){this.CheckContains(e)&&this.RemoveConnection(e),this.connectionArray.push(e)}static AddToDictionary(e){this.connectionDictionary[e.id]=e}static RemoveConnection(e){for(var o=0;o<this.connectionArray.length;o++)this.connectionArray[o].id==e.id&&this.connectionArray.splice(o,1)}static RemoveConnectionById(e){for(var o=0;o<this.connectionArray.length;o++)this.connectionArray[o].id==e&&this.connectionArray.splice(o,1);h.H.RemoveConnectionById(e)}static AddPermanentConnection(e){e.id>0&&N.d.AddConnection(function(o){let l=new S.N(0,0,0,0,0,0,0);return l.ofTheConceptId=o.ofTheConceptId,l.toTheConceptId=o.toTheConceptId,l.typeId=o.typeId,l.orderId=o.orderId,l.id=o.id,l}(e))}static GetConnection(e){var o;o=null;for(var l=0;l<this.connectionArray.length;l++)this.connectionArray[l].id==e&&(o=this.connectionArray[l]);return o}static waitForDataToLoad(){return _(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isLocalConnectionLoaded)return e("done");setTimeout(I.checkFlag,1e3,e)}static GetConnectionsOfCompositionLocal(e){return _(this,void 0,void 0,function*(){var o=[];try{for(var l=0;l<this.connectionArray.length;l++)this.connectionArray[l].typeId==e&&o.push(this.connectionArray[l]);return o}catch{return o}})}static GetConnectionOfCompositionAndTypeLocal(e,o){return _(this,void 0,void 0,function*(){var l=[];try{for(var f=0;f<this.connectionArray.length;f++)this.connectionArray[f].typeId==e&&this.connectionArray[f].ofTheConceptId==o&&l.push(this.connectionArray[f]);return l}catch{return l}})}getName(){return this.name}}I.connectionArray=[],I.connectionDictionary=[]},5020:(X,E,g)=>{g.d(E,{A:()=>_});var S=g(5205),N=g(3026),n=g(205),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(){return h(this,void 0,void 0,function*(){try{let I=[];if(Array.isArray(I))for(let r=0;r<I.length;r++)N.I.AddConceptToMemory(I[r]);n.B.isDataLoaded=!0,n.B.isCharacterLoaded=!0,n.B.isTypeLoaded=!0}catch(I){throw yield(0,S.DelayFunctionExecution)(2e3,_()),{message:"Cannot create Binary Tree Concept",ok:!1,status:400,data:I}}})}},5042:X=>{X.exports={nanoid:(E=21)=>{let g="",S=0|E;for(;S--;)g+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return g},customAlphabet:(E,g=21)=>(S=g)=>{let N="",n=0|S;for(;n--;)N+=E[Math.random()*E.length|0];return N}}},5170:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N,n=A(g(518)),h=A(g(339)),_=A(g(4195)),I=A(g(425)),r=A(g(7071)),e=A(g(9720)),o=A(g(5799)),l=A(g(7324)),f=L(g(5588)),v=A(g(1669)),T=A(g(1704)),s=A(g(2918)),a=A(g(263)),t=L(g(2648)),c=L(g(71)),C=L(g(1581)),b=g(9606);function m(H){if("function"!=typeof WeakMap)return null;var ye=new WeakMap,xe=new WeakMap;return(m=function(oe){return oe?xe:ye})(H)}function L(H,ye){if(!ye&&H&&H.__esModule)return H;if(null===H||"object"!=typeof H&&"function"!=typeof H)return{default:H};var xe=m(ye);if(xe&&xe.has(H))return xe.get(H);var oe={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in H)if("default"!==ie&&Object.prototype.hasOwnProperty.call(H,ie)){var pe=K?Object.getOwnPropertyDescriptor(H,ie):null;pe&&(pe.get||pe.set)?Object.defineProperty(oe,ie,pe):oe[ie]=H[ie]}return oe.default=H,xe&&xe.set(H,oe),oe}function A(H){return H&&H.__esModule?H:{default:H}}var B=((S={})[c.space]=!0,S[c.cr]=!0,S[c.feed]=!0,S[c.newline]=!0,S[c.tab]=!0,S),G=Object.assign({},B,((N={})[c.comment]=!0,N));function R(H){return{line:H[t.FIELDS.START_LINE],column:H[t.FIELDS.START_COL]}}function M(H){return{line:H[t.FIELDS.END_LINE],column:H[t.FIELDS.END_COL]}}function W(H,ye,xe,oe){return{start:{line:H,column:ye},end:{line:xe,column:oe}}}function V(H){return W(H[t.FIELDS.START_LINE],H[t.FIELDS.START_COL],H[t.FIELDS.END_LINE],H[t.FIELDS.END_COL])}function Q(H,ye){if(H)return W(H[t.FIELDS.START_LINE],H[t.FIELDS.START_COL],ye[t.FIELDS.END_LINE],ye[t.FIELDS.END_COL])}function te(H,ye){var xe=H[ye];if("string"==typeof xe)return-1!==xe.indexOf("\\")&&((0,b.ensureObject)(H,"raws"),H[ye]=(0,b.unesc)(xe),void 0===H.raws[ye]&&(H.raws[ye]=xe)),H}function ne(H,ye){for(var xe=-1,oe=[];-1!==(xe=H.indexOf(ye,xe+1));)oe.push(xe);return oe}var _e=function(){function H(K,ie){void 0===ie&&(ie={}),this.rule=K,this.options=Object.assign({lossy:!1,safe:!1},ie),this.position=0,this.css="string"==typeof this.rule?this.rule:this.rule.selector,this.tokens=(0,t.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var pe=Q(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new n.default({source:pe}),this.root.errorGenerator=this._errorGenerator();var z=new h.default({source:{start:{line:1,column:1}},sourceIndex:0});this.root.append(z),this.current=z,this.loop()}var ye,xe,oe=H.prototype;return oe._errorGenerator=function(){var K=this;return function(ie,pe){return"string"==typeof K.rule?new Error(ie):K.rule.error(ie,pe)}},oe.attribute=function(){var K=[],ie=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[t.FIELDS.TYPE]!==c.closeSquare;)K.push(this.currToken),this.position++;if(this.currToken[t.FIELDS.TYPE]!==c.closeSquare)return this.expected("closing square bracket",this.currToken[t.FIELDS.START_POS]);var pe=K.length,z={source:W(ie[1],ie[2],this.currToken[3],this.currToken[4]),sourceIndex:ie[t.FIELDS.START_POS]};if(1===pe&&!~[c.word].indexOf(K[0][t.FIELDS.TYPE]))return this.expected("attribute",K[0][t.FIELDS.START_POS]);for(var ge=0,ke="",Te="",Ee=null,He=!1;ge<pe;){var Ye=K[ge],je=this.content(Ye),et=K[ge+1];switch(Ye[t.FIELDS.TYPE]){case c.space:if(He=!0,this.options.lossy)break;if(Ee){(0,b.ensureObject)(z,"spaces",Ee),z.spaces[Ee].after=(z.spaces[Ee].after||"")+je;var Pe=(0,b.getProp)(z,"raws","spaces",Ee,"after")||null;Pe&&(z.raws.spaces[Ee].after=Pe+je)}else ke+=je,Te+=je;break;case c.asterisk:et[t.FIELDS.TYPE]===c.equals?(z.operator=je,Ee="operator"):z.namespace&&("namespace"!==Ee||He)||!et||(ke&&((0,b.ensureObject)(z,"spaces","attribute"),z.spaces.attribute.before=ke,ke=""),Te&&((0,b.ensureObject)(z,"raws","spaces","attribute"),z.raws.spaces.attribute.before=ke,Te=""),z.namespace=(z.namespace||"")+je,(0,b.getProp)(z,"raws","namespace")&&(z.raws.namespace+=je),Ee="namespace"),He=!1;break;case c.dollar:if("value"===Ee){var yt=(0,b.getProp)(z,"raws","value");z.value+="$",yt&&(z.raws.value=yt+"$");break}case c.caret:et[t.FIELDS.TYPE]===c.equals&&(z.operator=je,Ee="operator"),He=!1;break;case c.combinator:if("~"===je&&et[t.FIELDS.TYPE]===c.equals&&(z.operator=je,Ee="operator"),"|"!==je){He=!1;break}et[t.FIELDS.TYPE]===c.equals?(z.operator=je,Ee="operator"):z.namespace||z.attribute||(z.namespace=!0),He=!1;break;case c.word:if(et&&"|"===this.content(et)&&K[ge+2]&&K[ge+2][t.FIELDS.TYPE]!==c.equals&&!z.operator&&!z.namespace)z.namespace=je,Ee="namespace";else if(!z.attribute||"attribute"===Ee&&!He)ke&&((0,b.ensureObject)(z,"spaces","attribute"),z.spaces.attribute.before=ke,ke=""),Te&&((0,b.ensureObject)(z,"raws","spaces","attribute"),z.raws.spaces.attribute.before=Te,Te=""),z.attribute=(z.attribute||"")+je,(0,b.getProp)(z,"raws","attribute")&&(z.raws.attribute+=je),Ee="attribute";else if(!z.value&&""!==z.value||"value"===Ee&&!He&&!z.quoteMark){var rt=(0,b.unesc)(je),be=(0,b.getProp)(z,"raws","value")||"",Xe=z.value||"";z.value=Xe+rt,z.quoteMark=null,(rt!==je||be)&&((0,b.ensureObject)(z,"raws"),z.raws.value=(be||Xe)+je),Ee="value"}else{var mt="i"===je||"I"===je;!z.value&&""!==z.value||!z.quoteMark&&!He?(z.value||""===z.value)&&(Ee="value",z.value+=je,z.raws.value&&(z.raws.value+=je)):(z.insensitive=mt,mt&&"I"!==je||((0,b.ensureObject)(z,"raws"),z.raws.insensitiveFlag=je),Ee="insensitive",ke&&((0,b.ensureObject)(z,"spaces","insensitive"),z.spaces.insensitive.before=ke,ke=""),Te&&((0,b.ensureObject)(z,"raws","spaces","insensitive"),z.raws.spaces.insensitive.before=Te,Te=""))}He=!1;break;case c.str:if(!z.attribute||!z.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:Ye[t.FIELDS.START_POS]});var ht=(0,f.unescapeValue)(je),Et=ht.quoteMark;z.value=ht.unescaped,z.quoteMark=Et,Ee="value",(0,b.ensureObject)(z,"raws"),z.raws.value=je,He=!1;break;case c.equals:if(!z.attribute)return this.expected("attribute",Ye[t.FIELDS.START_POS],je);if(z.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:Ye[t.FIELDS.START_POS]});z.operator=z.operator?z.operator+je:je,Ee="operator",He=!1;break;case c.comment:if(Ee)if(He||et&&et[t.FIELDS.TYPE]===c.space||"insensitive"===Ee){var pt=(0,b.getProp)(z,"spaces",Ee,"after")||"",bt=(0,b.getProp)(z,"raws","spaces",Ee,"after")||pt;(0,b.ensureObject)(z,"raws","spaces",Ee),z.raws.spaces[Ee].after=bt+je}else{var gt=z[Ee]||"",It=(0,b.getProp)(z,"raws",Ee)||gt;(0,b.ensureObject)(z,"raws"),z.raws[Ee]=It+je}else Te+=je;break;default:return this.error('Unexpected "'+je+'" found.',{index:Ye[t.FIELDS.START_POS]})}ge++}te(z,"attribute"),te(z,"namespace"),this.newNode(new f.default(z)),this.position++},oe.parseWhitespaceEquivalentTokens=function(K){K<0&&(K=this.tokens.length);var ie=this.position,pe=[],z="",ge=void 0;do{if(B[this.currToken[t.FIELDS.TYPE]])this.options.lossy||(z+=this.content());else if(this.currToken[t.FIELDS.TYPE]===c.comment){var ke={};z&&(ke.before=z,z=""),ge=new I.default({value:this.content(),source:V(this.currToken),sourceIndex:this.currToken[t.FIELDS.START_POS],spaces:ke}),pe.push(ge)}}while(++this.position<K);if(z)if(ge)ge.spaces.after=z;else if(!this.options.lossy){var Te=this.tokens[ie],Ee=this.tokens[this.position-1];pe.push(new o.default({value:"",source:W(Te[t.FIELDS.START_LINE],Te[t.FIELDS.START_COL],Ee[t.FIELDS.END_LINE],Ee[t.FIELDS.END_COL]),sourceIndex:Te[t.FIELDS.START_POS],spaces:{before:z,after:""}}))}return pe},oe.convertWhitespaceNodesToSpace=function(K,ie){var pe=this;void 0===ie&&(ie=!1);var z="",ge="";return K.forEach(function(ke){var Te=pe.lossySpace(ke.spaces.before,ie),Ee=pe.lossySpace(ke.rawSpaceBefore,ie);z+=Te+pe.lossySpace(ke.spaces.after,ie&&0===Te.length),ge+=Te+ke.value+pe.lossySpace(ke.rawSpaceAfter,ie&&0===Ee.length)}),ge===z&&(ge=void 0),{space:z,rawSpace:ge}},oe.isNamedCombinator=function(K){return void 0===K&&(K=this.position),this.tokens[K+0]&&this.tokens[K+0][t.FIELDS.TYPE]===c.slash&&this.tokens[K+1]&&this.tokens[K+1][t.FIELDS.TYPE]===c.word&&this.tokens[K+2]&&this.tokens[K+2][t.FIELDS.TYPE]===c.slash},oe.namedCombinator=function(){if(this.isNamedCombinator()){var K=this.content(this.tokens[this.position+1]),ie=(0,b.unesc)(K).toLowerCase(),pe={};ie!==K&&(pe.value="/"+K+"/");var z=new T.default({value:"/"+ie+"/",source:W(this.currToken[t.FIELDS.START_LINE],this.currToken[t.FIELDS.START_COL],this.tokens[this.position+2][t.FIELDS.END_LINE],this.tokens[this.position+2][t.FIELDS.END_COL]),sourceIndex:this.currToken[t.FIELDS.START_POS],raws:pe});return this.position=this.position+3,z}this.unexpected()},oe.combinator=function(){var K=this;if("|"===this.content())return this.namespace();var ie=this.locateNextMeaningfulToken(this.position);if(!(ie<0||this.tokens[ie][t.FIELDS.TYPE]===c.comma||this.tokens[ie][t.FIELDS.TYPE]===c.closeParenthesis)){var pe,z=this.currToken,ge=void 0;if(ie>this.position&&(ge=this.parseWhitespaceEquivalentTokens(ie)),this.isNamedCombinator()?pe=this.namedCombinator():this.currToken[t.FIELDS.TYPE]===c.combinator?(pe=new T.default({value:this.content(),source:V(this.currToken),sourceIndex:this.currToken[t.FIELDS.START_POS]}),this.position++):B[this.currToken[t.FIELDS.TYPE]]||ge||this.unexpected(),pe){if(ge){var ke=this.convertWhitespaceNodesToSpace(ge),Ee=ke.rawSpace;pe.spaces.before=ke.space,pe.rawSpaceBefore=Ee}}else{var He=this.convertWhitespaceNodesToSpace(ge,!0),Ye=He.space,je=He.rawSpace;je||(je=Ye);var et={},ft={spaces:{}};Ye.endsWith(" ")&&je.endsWith(" ")?(et.before=Ye.slice(0,Ye.length-1),ft.spaces.before=je.slice(0,je.length-1)):Ye.startsWith(" ")&&je.startsWith(" ")?(et.after=Ye.slice(1),ft.spaces.after=je.slice(1)):ft.value=je,pe=new T.default({value:" ",source:Q(z,this.tokens[this.position-1]),sourceIndex:z[t.FIELDS.START_POS],spaces:et,raws:ft})}return this.currToken&&this.currToken[t.FIELDS.TYPE]===c.space&&(pe.spaces.after=this.optionalSpace(this.content()),this.position++),this.newNode(pe)}var Pe=this.parseWhitespaceEquivalentTokens(ie);if(Pe.length>0){var yt=this.current.last;if(yt){var rt=this.convertWhitespaceNodesToSpace(Pe),be=rt.space,Xe=rt.rawSpace;void 0!==Xe&&(yt.rawSpaceAfter+=Xe),yt.spaces.after+=be}else Pe.forEach(function(mt){return K.newNode(mt)})}},oe.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;this.current._inferEndPosition();var K=new h.default({source:{start:R(this.tokens[this.position+1])},sourceIndex:this.tokens[this.position+1][t.FIELDS.START_POS]});this.current.parent.append(K),this.current=K,this.position++},oe.comment=function(){var K=this.currToken;this.newNode(new I.default({value:this.content(),source:V(K),sourceIndex:K[t.FIELDS.START_POS]})),this.position++},oe.error=function(K,ie){throw this.root.error(K,ie)},oe.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[t.FIELDS.START_POS]})},oe.missingParenthesis=function(){return this.expected("opening parenthesis",this.currToken[t.FIELDS.START_POS])},oe.missingSquareBracket=function(){return this.expected("opening square bracket",this.currToken[t.FIELDS.START_POS])},oe.unexpected=function(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[t.FIELDS.START_POS])},oe.unexpectedPipe=function(){return this.error("Unexpected '|'.",this.currToken[t.FIELDS.START_POS])},oe.namespace=function(){var K=this.prevToken&&this.content(this.prevToken)||!0;return this.nextToken[t.FIELDS.TYPE]===c.word?(this.position++,this.word(K)):this.nextToken[t.FIELDS.TYPE]===c.asterisk?(this.position++,this.universal(K)):void this.unexpectedPipe()},oe.nesting=function(){if(this.nextToken&&"|"===this.content(this.nextToken))this.position++;else{var K=this.currToken;this.newNode(new s.default({value:this.content(),source:V(K),sourceIndex:K[t.FIELDS.START_POS]})),this.position++}},oe.parentheses=function(){var K=this.current.last,ie=1;if(this.position++,K&&K.type===C.PSEUDO){var pe=new h.default({source:{start:R(this.tokens[this.position])},sourceIndex:this.tokens[this.position][t.FIELDS.START_POS]}),z=this.current;for(K.append(pe),this.current=pe;this.position<this.tokens.length&&ie;)this.currToken[t.FIELDS.TYPE]===c.openParenthesis&&ie++,this.currToken[t.FIELDS.TYPE]===c.closeParenthesis&&ie--,ie?this.parse():(this.current.source.end=M(this.currToken),this.current.parent.source.end=M(this.currToken),this.position++);this.current=z}else{for(var ge,ke=this.currToken,Te="(";this.position<this.tokens.length&&ie;)this.currToken[t.FIELDS.TYPE]===c.openParenthesis&&ie++,this.currToken[t.FIELDS.TYPE]===c.closeParenthesis&&ie--,ge=this.currToken,Te+=this.parseParenthesisToken(this.currToken),this.position++;K?K.appendToPropertyAndEscape("value",Te,Te):this.newNode(new o.default({value:Te,source:W(ke[t.FIELDS.START_LINE],ke[t.FIELDS.START_COL],ge[t.FIELDS.END_LINE],ge[t.FIELDS.END_COL]),sourceIndex:ke[t.FIELDS.START_POS]}))}if(ie)return this.expected("closing parenthesis",this.currToken[t.FIELDS.START_POS])},oe.pseudo=function(){for(var K=this,ie="",pe=this.currToken;this.currToken&&this.currToken[t.FIELDS.TYPE]===c.colon;)ie+=this.content(),this.position++;return this.currToken?this.currToken[t.FIELDS.TYPE]!==c.word?this.expected(["pseudo-class","pseudo-element"],this.currToken[t.FIELDS.START_POS]):void this.splitWord(!1,function(z,ge){K.newNode(new l.default({value:ie+=z,source:Q(pe,K.currToken),sourceIndex:pe[t.FIELDS.START_POS]})),ge>1&&K.nextToken&&K.nextToken[t.FIELDS.TYPE]===c.openParenthesis&&K.error("Misplaced parenthesis.",{index:K.nextToken[t.FIELDS.START_POS]})}):this.expected(["pseudo-class","pseudo-element"],this.position-1)},oe.space=function(){var K=this.content();0===this.position||this.prevToken[t.FIELDS.TYPE]===c.comma||this.prevToken[t.FIELDS.TYPE]===c.openParenthesis||this.current.nodes.every(function(ie){return"comment"===ie.type})?(this.spaces=this.optionalSpace(K),this.position++):this.position===this.tokens.length-1||this.nextToken[t.FIELDS.TYPE]===c.comma||this.nextToken[t.FIELDS.TYPE]===c.closeParenthesis?(this.current.last.spaces.after=this.optionalSpace(K),this.position++):this.combinator()},oe.string=function(){var K=this.currToken;this.newNode(new o.default({value:this.content(),source:V(K),sourceIndex:K[t.FIELDS.START_POS]})),this.position++},oe.universal=function(K){var ie=this.nextToken;if(ie&&"|"===this.content(ie))return this.position++,this.namespace();var pe=this.currToken;this.newNode(new v.default({value:this.content(),source:V(pe),sourceIndex:pe[t.FIELDS.START_POS]}),K),this.position++},oe.splitWord=function(K,ie){for(var pe=this,z=this.nextToken,ge=this.content();z&&~[c.dollar,c.caret,c.equals,c.word].indexOf(z[t.FIELDS.TYPE]);){this.position++;var ke=this.content();if(ge+=ke,ke.lastIndexOf("\\")===ke.length-1){var Te=this.nextToken;Te&&Te[t.FIELDS.TYPE]===c.space&&(ge+=this.requiredSpace(this.content(Te)),this.position++)}z=this.nextToken}var Ee=ne(ge,".").filter(function(et){var ft="\\"===ge[et-1],Pe=/^\d+\.\d+%$/.test(ge);return!ft&&!Pe}),He=ne(ge,"#").filter(function(et){return"\\"!==ge[et-1]}),Ye=ne(ge,"#{");Ye.length&&(He=He.filter(function(et){return!~Ye.indexOf(et)}));var je=(0,a.default)(function(){var et=Array.prototype.concat.apply([],arguments);return et.filter(function(ft,Pe){return Pe===et.indexOf(ft)})}([0].concat(Ee,He)));je.forEach(function(et,ft){var Pe,yt=je[ft+1]||ge.length,rt=ge.slice(et,yt);if(0===ft&&ie)return ie.call(pe,rt,je.length);var be=pe.currToken,Xe=be[t.FIELDS.START_POS]+je[ft],mt=W(be[1],be[2]+et,be[3],be[2]+(yt-1));if(~Ee.indexOf(et)){var ht={value:rt.slice(1),source:mt,sourceIndex:Xe};Pe=new _.default(te(ht,"value"))}else if(~He.indexOf(et)){var Oe={value:rt.slice(1),source:mt,sourceIndex:Xe};Pe=new r.default(te(Oe,"value"))}else{var Et={value:rt,source:mt,sourceIndex:Xe};te(Et,"value"),Pe=new e.default(Et)}pe.newNode(Pe,K),K=null}),this.position++},oe.word=function(K){var ie=this.nextToken;return ie&&"|"===this.content(ie)?(this.position++,this.namespace()):this.splitWord(K)},oe.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.current._inferEndPosition(),this.root},oe.parse=function(K){switch(this.currToken[t.FIELDS.TYPE]){case c.space:this.space();break;case c.comment:this.comment();break;case c.openParenthesis:this.parentheses();break;case c.closeParenthesis:K&&this.missingParenthesis();break;case c.openSquare:this.attribute();break;case c.dollar:case c.caret:case c.equals:case c.word:this.word();break;case c.colon:this.pseudo();break;case c.comma:this.comma();break;case c.asterisk:this.universal();break;case c.ampersand:this.nesting();break;case c.slash:case c.combinator:this.combinator();break;case c.str:this.string();break;case c.closeSquare:this.missingSquareBracket();case c.semicolon:this.missingBackslash();default:this.unexpected()}},oe.expected=function(K,ie,pe){if(Array.isArray(K)){var z=K.pop();K=K.join(", ")+" or "+z}var ge=/^[aeiou]/.test(K[0])?"an":"a";return this.error(pe?"Expected "+ge+" "+K+', found "'+pe+'" instead.':"Expected "+ge+" "+K+".",{index:ie})},oe.requiredSpace=function(K){return this.options.lossy?" ":K},oe.optionalSpace=function(K){return this.options.lossy?"":K},oe.lossySpace=function(K,ie){return this.options.lossy?ie?" ":"":K},oe.parseParenthesisToken=function(K){var ie=this.content(K);return K[t.FIELDS.TYPE]===c.space?this.requiredSpace(ie):ie},oe.newNode=function(K,ie){return ie&&(/^ +$/.test(ie)&&(this.options.lossy||(this.spaces=(this.spaces||"")+ie),ie=!0),K.namespace=ie,te(K,"namespace")),this.spaces&&(K.spaces.before=this.spaces,this.spaces=""),this.current.append(K)},oe.content=function(K){return void 0===K&&(K=this.currToken),this.css.slice(K[t.FIELDS.START_POS],K[t.FIELDS.END_POS])},oe.locateNextMeaningfulToken=function(K){void 0===K&&(K=this.position+1);for(var ie=K;ie<this.tokens.length;){if(!G[this.tokens[ie][t.FIELDS.TYPE]])return ie;ie++}return-1},ye=H,(xe=[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}])&&function O(H,ye){for(var xe=0;xe<ye.length;xe++){var oe=ye[xe];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(H,oe.key,oe)}}(ye.prototype,xe),Object.defineProperty(ye,"prototype",{writable:!1}),H}();E.default=_e,X.exports=E.default},5205:(X,E,g)=>{g.d(E,{ADMIN:()=>os,ALLID:()=>Vt.BG,AccessTracker:()=>Vo.J,AddGhostConcept:()=>qr,Anomaly:()=>dn,BaseUrl:()=>r.B,BinaryTree:()=>Si.W,BuildWidgetFromId:()=>oo.Cp,BuilderStatefulWidget:()=>Zo,Composition:()=>qo,CompositionBinaryTree:()=>wo,CompositionNode:()=>Bi,Concept:()=>ys.j,ConceptsData:()=>I.I,Connection:()=>oe.N,ConnectionData:()=>ro.d,CountInfo:()=>Fs.y,CreateComposition:()=>_e.A,CreateConnection:()=>no.d,CreateConnectionBetweenEntityLocal:()=>Xi,CreateConnectionBetweenTwoConcepts:()=>je,CreateConnectionBetweenTwoConceptsGeneral:()=>ft,CreateConnectionBetweenTwoConceptsLocal:()=>$i.h,CreateData:()=>wi,CreateDefaultConcept:()=>ie.o,CreateDefaultLConcept:()=>Ri.u,CreateSession:()=>Rr,CreateSessionVisit:()=>Gr,CreateTheCompositionLocal:()=>H.R,CreateTheCompositionWithCache:()=>zo,CreateTheConnection:()=>mt.q,CreateTheConnectionGeneral:()=>ke,CreateTheConnectionLocal:()=>no.F,DATAID:()=>Vt.y0,DATAIDDATE:()=>Vt.iw,DATAV2:()=>Vt.pU,DelayFunctionExecution:()=>ns,DeleteConceptById:()=>Ai,DeleteConceptLocal:()=>Xr,DeleteConnectionById:()=>Te.m,DeleteConnectionByIdBulk:()=>Te.E,DeleteConnectionByType:()=>Mo.$S,DeleteConnectionByTypeBulk:()=>Mo.L0,DeleteUser:()=>fr,DependencyObserver:()=>ho.w,Environments:()=>or,FilterSearch:()=>yi,FormatFromConnections:()=>To.vw,FormatFromConnectionsAltered:()=>To.y8,FreeschemaQuery:()=>Vn,FreeschemaQueryApi:()=>vi,GetAllConnectionsOfComposition:()=>ne.s,GetAllConnectionsOfCompositionBulk:()=>v.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>Mo.WC,GetComposition:()=>s.Nj,GetCompositionBulk:()=>mn.dF,GetCompositionBulkWithDataId:()=>mn.cw,GetCompositionFromConnectionsWithDataId:()=>mn.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>mn.km,GetCompositionFromConnectionsWithDataIdInObject:()=>mn.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>mn.Nt,GetCompositionFromConnectionsWithIndex:()=>mn.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>mn.hG,GetCompositionFromMemoryWithConnections:()=>s.JA,GetCompositionList:()=>C,GetCompositionListAll:()=>b,GetCompositionListAllWithId:()=>m,GetCompositionListListener:()=>ds,GetCompositionListLocal:()=>Q,GetCompositionListLocalWithId:()=>te,GetCompositionListWithId:()=>L,GetCompositionListWithIdUpdated:()=>A,GetCompositionListener:()=>cs,GetCompositionLocal:()=>R,GetCompositionLocalWithId:()=>M,GetCompositionWithAllIds:()=>s.Mb,GetCompositionWithCache:()=>Br,GetCompositionWithDataIdBulk:()=>Ur,GetCompositionWithDataIdWithCache:()=>Ui,GetCompositionWithId:()=>s.yz,GetCompositionWithIdAndDateFromMemory:()=>s.Ez,GetConceptBulk:()=>Bo.r,GetConceptByCharacter:()=>a.A,GetConceptByCharacterAndCategoryLocal:()=>t.$I,GetConceptByCharacterAndType:()=>ht.A,GetConnectionBetweenTwoConceptsLinker:()=>ts,GetConnectionBulk:()=>li.j,GetConnectionById:()=>vr,GetConnectionDataPrefetch:()=>mn.QL,GetConnectionOfTheConcept:()=>xe,GetConnectionTypeForCount:()=>zi.V,GetFreeschemaImage:()=>ra,GetFreeschemaImageUrl:()=>sa,GetImageApi:()=>rr,GetLink:()=>Et,GetLinkListListener:()=>ps,GetLinkListener:()=>us.d,GetLinkRaw:()=>pt,GetLinkerConnectionFromConcepts:()=>Co,GetLinkerConnectionToConcepts:()=>hr,GetRelation:()=>Mi,GetRelationLocal:()=>Jr,GetRelationRaw:()=>Vr,GetTheConcept:()=>Ee.A,GetTheConceptLocal:()=>Wi.f,GetUserGhostId:()=>Hr,JUSTDATA:()=>Vt.ZJ,LConcept:()=>gs,LConnection:()=>vs,LISTNORMAL:()=>Vt.SL,LocalConceptsData:()=>T.v,LocalSyncData:()=>bo.H,LocalTransaction:()=>Zi,LogEvent:()=>Os,Logger:()=>Ue.V,LoginToBackend:()=>Sr,MakeTheInstanceConcept:()=>He.A,MakeTheInstanceConceptLocal:()=>Pe.k,MakeTheTimestamp:()=>mr,MakeTheTypeConceptApi:()=>cn,MakeTheTypeConceptLocal:()=>bt.$,NORMAL:()=>Vt.yv,PRIVATE:()=>is,PUBLIC:()=>rs,PatcherStructure:()=>ms,Prototype:()=>na,RAW:()=>Vt.XZ,RecursiveSearchApi:()=>Cr,RecursiveSearchApiNewRawFullLinker:()=>Tr,RecursiveSearchApiRaw:()=>Li,RecursiveSearchApiRawFullLinker:()=>wr,RecursiveSearchApiWithInternalConnections:()=>_r,RecursiveSearchListener:()=>hs,SchemaQuery:()=>xs,SchemaQueryListener:()=>Ro,SearchAllConcepts:()=>Fr,SearchLinkInternal:()=>Yr,SearchLinkInternalAll:()=>Kr,SearchLinkMultipleAll:()=>To.cf,SearchLinkMultipleAllObservable:()=>qi,SearchLinkMultipleApi:()=>h.j,SearchQuery:()=>_o,SearchStructure:()=>_s,SearchWithLinker:()=>Or,SearchWithTypeAndLinker:()=>po.zl,SearchWithTypeAndLinkerApi:()=>Hi,Selector:()=>Ds,SessionData:()=>Cs,Signin:()=>Nr,Signup:()=>Ar,SignupEntity:()=>Lr,SplitStrings:()=>_.f,StatefulWidget:()=>gi,SyncData:()=>K.Y,TrashTheConcept:()=>yr,UpdateComposition:()=>Er,UpdateCompositionLocal:()=>zr.D,UserBinaryTree:()=>ui,Validator:()=>As,ViewInternalData:()=>Vi,ViewInternalDataApi:()=>ji,WidgetTree:()=>Ki,convertFromConceptToLConcept:()=>hi.F4,convertFromLConceptToConcept:()=>hi.dp,convertWidgetTreeToWidget:()=>Yo,convertWidgetTreeToWidgetWithWrapper:()=>tr,createFormFieldData:()=>Ls,createPrototypeLocal:()=>ir,dispatchIdEvent:()=>da,getFromDatabaseWithType:()=>be,getObjectsFromIndexDb:()=>Xe,getUploadFileLimit:()=>kr,getUserDetails:()=>Es.s,getWidgetBulkFromId:()=>ko,getWidgetFromId:()=>Js,handleServiceWorkerException:()=>rn,hasActivatedSW:()=>ar,importLatestWidget:()=>js,importRecentWidget:()=>Vs,init:()=>ca,orderTheConnections:()=>fs.X,recursiveFetch:()=>s.zN,recursiveFetchNew:()=>Po,removeAllChildren:()=>er,renderImportedWidget:()=>$s,renderLatestWidget:()=>Ci,renderPage:()=>Ws,renderWidget:()=>Hs,searchLinkMultipleListener:()=>ss,sendEmail:()=>ks,sendMessage:()=>Yt,serviceWorker:()=>Dt,setHasActivatedSW:()=>aa,storeToDatabase:()=>rt,subscribedListeners:()=>sr,unwrapContainers:()=>nr,updateAccessToken:()=>cr,uploadAttachment:()=>br,uploadFile:()=>Fi,uploadImage:()=>Ei,uploadImageV2:()=>Ir,validDocumentFormats:()=>xi,validImageFormats:()=>Ni}),g.r(E);var S={};g.r(S),g.d(S,{ADMIN:()=>os,ALLID:()=>Vt.BG,AccessTracker:()=>Vo.J,AddGhostConcept:()=>qr,Anomaly:()=>dn,BaseUrl:()=>r.B,BinaryTree:()=>Si.W,BuildWidgetFromId:()=>oo.Cp,BuilderStatefulWidget:()=>Zo,Composition:()=>qo,CompositionBinaryTree:()=>wo,CompositionNode:()=>Bi,Concept:()=>ys.j,ConceptsData:()=>I.I,Connection:()=>oe.N,ConnectionData:()=>ro.d,CountInfo:()=>Fs.y,CreateComposition:()=>_e.A,CreateConnection:()=>no.d,CreateConnectionBetweenEntityLocal:()=>Xi,CreateConnectionBetweenTwoConcepts:()=>je,CreateConnectionBetweenTwoConceptsGeneral:()=>ft,CreateConnectionBetweenTwoConceptsLocal:()=>$i.h,CreateData:()=>wi,CreateDefaultConcept:()=>ie.o,CreateDefaultLConcept:()=>Ri.u,CreateSession:()=>Rr,CreateSessionVisit:()=>Gr,CreateTheCompositionLocal:()=>H.R,CreateTheCompositionWithCache:()=>zo,CreateTheConnection:()=>mt.q,CreateTheConnectionGeneral:()=>ke,CreateTheConnectionLocal:()=>no.F,DATAID:()=>Vt.y0,DATAIDDATE:()=>Vt.iw,DATAV2:()=>Vt.pU,DelayFunctionExecution:()=>ns,DeleteConceptById:()=>Ai,DeleteConceptLocal:()=>Xr,DeleteConnectionById:()=>Te.m,DeleteConnectionByIdBulk:()=>Te.E,DeleteConnectionByType:()=>Mo.$S,DeleteConnectionByTypeBulk:()=>Mo.L0,DeleteUser:()=>fr,DependencyObserver:()=>ho.w,Environments:()=>or,FilterSearch:()=>yi,FormatFromConnections:()=>To.vw,FormatFromConnectionsAltered:()=>To.y8,FreeschemaQuery:()=>Vn,FreeschemaQueryApi:()=>vi,GetAllConnectionsOfComposition:()=>ne.s,GetAllConnectionsOfCompositionBulk:()=>v.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>Mo.WC,GetComposition:()=>s.Nj,GetCompositionBulk:()=>mn.dF,GetCompositionBulkWithDataId:()=>mn.cw,GetCompositionFromConnectionsWithDataId:()=>mn.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>mn.km,GetCompositionFromConnectionsWithDataIdInObject:()=>mn.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>mn.Nt,GetCompositionFromConnectionsWithIndex:()=>mn.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>mn.hG,GetCompositionFromMemoryWithConnections:()=>s.JA,GetCompositionList:()=>C,GetCompositionListAll:()=>b,GetCompositionListAllWithId:()=>m,GetCompositionListListener:()=>ds,GetCompositionListLocal:()=>Q,GetCompositionListLocalWithId:()=>te,GetCompositionListWithId:()=>L,GetCompositionListWithIdUpdated:()=>A,GetCompositionListener:()=>cs,GetCompositionLocal:()=>R,GetCompositionLocalWithId:()=>M,GetCompositionWithAllIds:()=>s.Mb,GetCompositionWithCache:()=>Br,GetCompositionWithDataIdBulk:()=>Ur,GetCompositionWithDataIdWithCache:()=>Ui,GetCompositionWithId:()=>s.yz,GetCompositionWithIdAndDateFromMemory:()=>s.Ez,GetConceptBulk:()=>Bo.r,GetConceptByCharacter:()=>a.A,GetConceptByCharacterAndCategoryLocal:()=>t.$I,GetConceptByCharacterAndType:()=>ht.A,GetConnectionBetweenTwoConceptsLinker:()=>ts,GetConnectionBulk:()=>li.j,GetConnectionById:()=>vr,GetConnectionDataPrefetch:()=>mn.QL,GetConnectionOfTheConcept:()=>xe,GetConnectionTypeForCount:()=>zi.V,GetFreeschemaImage:()=>ra,GetFreeschemaImageUrl:()=>sa,GetImageApi:()=>rr,GetLink:()=>Et,GetLinkListListener:()=>ps,GetLinkListener:()=>us.d,GetLinkRaw:()=>pt,GetLinkerConnectionFromConcepts:()=>Co,GetLinkerConnectionToConcepts:()=>hr,GetRelation:()=>Mi,GetRelationLocal:()=>Jr,GetRelationRaw:()=>Vr,GetTheConcept:()=>Ee.A,GetTheConceptLocal:()=>Wi.f,GetUserGhostId:()=>Hr,JUSTDATA:()=>Vt.ZJ,LConcept:()=>gs,LConnection:()=>vs,LISTNORMAL:()=>Vt.SL,LocalConceptsData:()=>T.v,LocalSyncData:()=>bo.H,LocalTransaction:()=>Zi,LogEvent:()=>Os,Logger:()=>Ue.V,LoginToBackend:()=>Sr,MakeTheInstanceConcept:()=>He.A,MakeTheInstanceConceptLocal:()=>Pe.k,MakeTheTimestamp:()=>mr,MakeTheTypeConceptApi:()=>cn,MakeTheTypeConceptLocal:()=>bt.$,NORMAL:()=>Vt.yv,PRIVATE:()=>is,PUBLIC:()=>rs,PatcherStructure:()=>ms,Prototype:()=>na,RAW:()=>Vt.XZ,RecursiveSearchApi:()=>Cr,RecursiveSearchApiNewRawFullLinker:()=>Tr,RecursiveSearchApiRaw:()=>Li,RecursiveSearchApiRawFullLinker:()=>wr,RecursiveSearchApiWithInternalConnections:()=>_r,RecursiveSearchListener:()=>hs,SchemaQuery:()=>xs,SchemaQueryListener:()=>Ro,SearchAllConcepts:()=>Fr,SearchLinkInternal:()=>Yr,SearchLinkInternalAll:()=>Kr,SearchLinkMultipleAll:()=>To.cf,SearchLinkMultipleAllObservable:()=>qi,SearchLinkMultipleApi:()=>h.j,SearchQuery:()=>_o,SearchStructure:()=>_s,SearchWithLinker:()=>Or,SearchWithTypeAndLinker:()=>po.zl,SearchWithTypeAndLinkerApi:()=>Hi,Selector:()=>Ds,SessionData:()=>Cs,Signin:()=>Nr,Signup:()=>Ar,SignupEntity:()=>Lr,SplitStrings:()=>_.f,StatefulWidget:()=>gi,SyncData:()=>K.Y,TrashTheConcept:()=>yr,UpdateComposition:()=>Er,UpdateCompositionLocal:()=>zr.D,UserBinaryTree:()=>ui,Validator:()=>As,ViewInternalData:()=>Vi,ViewInternalDataApi:()=>ji,WidgetTree:()=>Ki,convertFromConceptToLConcept:()=>hi.F4,convertFromLConceptToConcept:()=>hi.dp,convertWidgetTreeToWidget:()=>Yo,convertWidgetTreeToWidgetWithWrapper:()=>tr,createFormFieldData:()=>Ls,createPrototypeLocal:()=>ir,dispatchIdEvent:()=>da,getFromDatabaseWithType:()=>be,getObjectsFromIndexDb:()=>Xe,getUploadFileLimit:()=>kr,getUserDetails:()=>Es.s,getWidgetBulkFromId:()=>ko,getWidgetFromId:()=>Js,handleServiceWorkerException:()=>rn,hasActivatedSW:()=>ar,importLatestWidget:()=>js,importRecentWidget:()=>Vs,init:()=>ca,orderTheConnections:()=>fs.X,recursiveFetch:()=>s.zN,recursiveFetchNew:()=>Po,removeAllChildren:()=>er,renderImportedWidget:()=>$s,renderLatestWidget:()=>Ci,renderPage:()=>Ws,renderWidget:()=>Hs,searchLinkMultipleListener:()=>ss,sendEmail:()=>ks,sendMessage:()=>Yt,serviceWorker:()=>Dt,setHasActivatedSW:()=>aa,storeToDatabase:()=>rt,subscribedListeners:()=>sr,unwrapContainers:()=>nr,updateAccessToken:()=>cr,uploadAttachment:()=>br,uploadFile:()=>Fi,uploadImage:()=>Ei,uploadImageV2:()=>Ir,validDocumentFormats:()=>xi,validImageFormats:()=>Ni});var N=g(5020),n=g(205),h=g(2832),_=g(6467),I=g(3026),r=g(9581),e=g(3518),o=g(1863),l=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function f(D,d){var i=arguments;return l(this,void 0,void 0,function*(){const p=Ue.V.logfunction("GetAllConceptsByType",i);try{var w=new URLSearchParams;w.append("type",D),w.append("user_id",d.toString());var k=(0,e.Xr)("application/x-www-form-urlencoded");const P=yield fetch(r.B.GetAllConceptsByTypeUrl(),{method:"POST",headers:k,body:w});if(P.ok){const x=yield P.json();for(var F=0;F<x.length;F++)I.I.AddConcept(x[F])}else console.log("GetAllConceptsByType error",P.status),(0,o.ry)(P)}catch(P){P instanceof Error?console.log("GetAllConceptsByType error message: ",P.message):console.log("GetAllConceptsByType unexpected error: ",P),(0,o.Mb)(P,r.B.GetAllConceptsByTypeUrl()),(0,o.ey)(p,"GetAllConceptsByType",P)}})}var v=g(8642),T=g(9736),s=g(8939),a=g(2013),t=g(8064),c=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function C(D,d){var i=arguments;return c(this,arguments,void 0,function*(p,w,k=10,F=1){const P=Ue.V.logfunction("GetCompositionList",i)||{};if(Dt){P.serviceWorker=!0;try{const u=yield Yt("GetCompositionList",{compositionName:p,userId:w,inpage:k,page:F});return Ue.V.logUpdate(P),u.data}catch(u){console.error("GetCompositionList sw error: ",u),(0,o.ey)(P,"GetCompositionList",u),rn(u)}}let x=yield(0,a.A)(p),y=[];if(x){yield f(p,w);let u=yield I.I.GetConceptsByTypeIdAndUser(x.id,w),U=k*(F-1),j=[];for(let J=U;J<U+k;J++)u[J]&&j.push(u[J].id);yield(0,v.Y)(j);for(let J=U;J<U+k;J++)if(u[J]){let q=yield(0,s.kx)(u[J].id);y.push(q)}}return Ue.V.logUpdate(P),y})}function b(D,d){return c(this,arguments,void 0,function*(i,p,w=10,k=1){let F=Q(i,p),P=C(i,p),x=[];return Promise.race([F,P]).then(y=>{console.log("Promise result",y),x.push(...y)}).catch(y=>{console.log("error in handling",y)}),P.then(y=>{console.log("This is the second promise result",y),x.push(...y)}),x})}function m(D,d){return c(this,arguments,void 0,function*(i,p,w=10,k=1){if(Dt)try{return(yield Yt("GetCompositionListAllWithId",{compositionName:i,userId:p,inpage:w,page:k})).data}catch(J){console.error("GetCompositionListAllWithId sw error: ",J),rn(J)}let F=yield(0,t.Ay)(i),P=yield(0,a.A)(i),x=[],y=[],u=[],U=[];0!=F.id&&(y=yield T.v.GetConceptsByTypeIdAndUser(F.id,p)),0!=P.id&&(yield f(i,p),U=yield I.I.GetConceptsByTypeIdAndUser(P.id,p),x=U);for(let J=0;J<y.length;J++){let q=!1;for(let de=0;de<U.length;de++)y[J].ghostId==U[de].ghostId&&(q=!0);q||u.push(y[J])}console.log("This is the all list",u);let j=[];return j=yield function(J,q){return c(this,arguments,void 0,function*(de,Ne,Ve=10,tt=1){let De=[],ot=Ve*(tt-1),Lt=[],qt=Ne.length;for(let Mt=ot;Mt<ot+Ve-qt;Mt++)de[Mt]&&Lt.push(de[Mt].id);for(let Mt=0;Mt<Ne.length;Mt++){let lt=yield M(Ne[Mt].id);De.push(lt)}yield(0,v.Y)(Lt);for(let Mt=ot;Mt<ot+Ve-qt;Mt++)if(de[Mt]){let lt=yield(0,s.RW)(de[Mt].id);De.push(lt)}return De})}(x,u,w,k),j})}function L(D,d){return c(this,arguments,void 0,function*(i,p,w=10,k=1){if(Dt)try{return(yield Yt("GetCompositionListWithId",{compositionName:i,userId:p,inpage:w,page:k})).data}catch(x){console.error("GetCompositionListWithId sw error: ",x),rn(x)}let F=yield(0,a.A)(i),P=[];if(F){yield f(i,p);let x=yield I.I.GetConceptsByTypeIdAndUser(F.id,p),y=w*(k-1),u=[];for(let U=y;U<y+w;U++)x[U]&&u.push(x[U].id);yield(0,v.Y)(u);for(let U=y;U<y+w;U++)if(x[U]){let j=yield(0,s.RW)(x[U].id);P.push(j)}}return P})}function A(D,d){return c(this,arguments,void 0,function*(i,p,w=10,k=1){let F=yield(0,a.w)(i),P=[];if(F){yield f(i,p);let x=yield I.I.GetConceptsByTypeIdAndUser(F.id,p),y=w*(k-1),u=[];for(let U=y;U<y+w;U++)x[U]&&u.push(x[U].id);yield(0,v.Y)(u);for(let U=y;U<y+w;U++)if(x[U]){let j=yield(0,s.RW)(x[U].id);P.push(j)}}return P})}var O=g(4864),B=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},G=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function R(D){return G(this,void 0,void 0,function*(){var d,i;try{if(Dt)try{return(yield Yt("GetCompositionLocal",{id:D})).data}catch(x){console.error("GetCompositionLocal error sw: ",x),rn(x)}let p=[],w={};p=yield O.G.GetConnectionsOfCompositionLocal(D);let k=[];for(let x=0;x<p.length;x++)k.includes(p[x].ofTheConceptId)||k.push(p[x].ofTheConceptId);let F=yield T.v.GetConcept(D);if(0==F.id){let x=yield function(y){var u=arguments;return B(this,void 0,void 0,function*(){const U=Ue.V.logfunction("TranslateLocalToReal",u);let j=(0,ie.o)();try{var J=(0,e.ab)("application/x-www-form-urlencoded");const q=yield fetch(r.B.GetRealConceptById(),{method:"POST",headers:J,body:`id=${y}`});if(q.ok)return j=yield q.json(),j.id>0&&I.I.AddConcept(j),j;console.log("Error in Getting Translating concept Error",q.status),(0,o.ry)(q),Ue.V.logUpdate(U)}catch(q){q instanceof Error?console.log("Error in Getting Translating concept error message: ",q):console.log("Error in Getting Translating concept unexpected error: ",q),(0,o.Mb)(q,r.B.GetRealConceptById()),(0,o.ey)(U,"TranslateLocalToReal",q)}return j})}(D);if(x.id>0)return yield(0,s.Nj)(x.id)}let P=yield W(D,p,k);return w[null!==(i=null===(d=F?.type)||void 0===d?void 0:d.characterValue)&&void 0!==i?i:"top"]=P,w}catch(p){throw p}})}function M(D){return G(this,void 0,void 0,function*(){var d,i;try{if(Dt)try{return(yield Yt("GetCompositionLocalWithId",{id:D})).data}catch(x){console.error("GetCompositionLocalWithId error sw: ",x),rn(x)}let p=[],w={},k={};p=yield O.G.GetConnectionsOfCompositionLocal(D);let F=[];for(let x=0;x<p.length;x++)F.includes(p[x].ofTheConceptId)||F.push(p[x].ofTheConceptId);let P=yield T.v.GetConcept(D);if(0!=P.id){let x=yield W(D,p,F);w[null!==(i=null===(d=P?.type)||void 0===d?void 0:d.characterValue)&&void 0!==i?i:"top"]=x}return k.data=w,k.id=D,k}catch(p){throw p}})}function W(D,d,i){return G(this,arguments,void 0,function*(p,w,k,F=[]){var x,y;let u={},U=[],j=yield T.v.GetConcept(p);if(0!=j.id&&null==j.type){let J=j.typeId,q=yield T.v.GetConcept(J);j.type=q}if(!k.includes(p))return j?.characterValue;if(F.includes(p))return"";F.push(p);for(let J=0;J<w.length;J++)if(w[J].ofTheConceptId==p){let q=w[J].toTheConceptId,de=yield T.v.GetConcept(q);if(0!=de.id&&null==de?.type){let tt=de.typeId,De=yield T.v.GetConcept(tt);de.type=De}let Ve=(null!==(y=null===(x=de?.type)||void 0===x?void 0:x.characterValue)&&void 0!==y?y:"top").replace("the_","");if(isNaN(Number(Ve))){if(Ve){const tt=yield W(q,w,k);u[Ve]=tt}}else{const tt=yield W(q,w,k);U[Ve]=tt,u=U}}return u})}var V=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Q(D,d){return V(this,void 0,void 0,function*(){if(Dt)try{return(yield Yt("GetCompositionListLocal",{compositionName:D,userId:d})).data}catch(i){console.error("GetCompositionListLocal error sw: ",i),rn(i)}try{let i=yield(0,t.Ay)(D),p=[];if(0!=i.id){let w=yield T.v.GetConceptsByTypeIdAndUser(i.id,d);for(let k=0;k<w.length;k++){let F=yield R(w[k].id);p.push(F)}}return p}catch(i){throw i}})}function te(D,d){return V(this,void 0,void 0,function*(){if(Dt)try{return(yield Yt("GetCompositionListLocalWithId",{compositionName:D,userId:d})).data}catch(i){console.error("GetCompositionListLocalWithId error sw: ",i),rn(i)}try{let i=yield(0,t.Ay)(D),p=[];if(0!=i.id){let w=yield T.v.GetConceptsByTypeIdAndUser(i.id,d);for(let k=0;k<w.length;k++){let F=yield M(w[k].id);p.push(F)}}return p}catch(i){throw i}})}var ne=g(2),_e=g(1218),H=g(999),ye=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function xe(D,d,i){var p=arguments;return ye(this,arguments,void 0,function*(w,k,F,P=10,x=1){const y=Ue.V.logfunction("GetConnectionOfTheConcept",p)||{};let u=[];try{if(Dt){y.serviceWorker=!0;try{const q=yield Yt("GetConnectionOfTheConcept",{typeId:w,ofTheConceptId:k,userId:F,inpage:P,page:x});return Ue.V.logUpdate(y),q.data}catch(q){console.error("GetConnectionOfTheConcept sw error: ",q),(0,o.ey)(y,"GetConnectionOfTheConcept",q),rn(q)}}let U=new URLSearchParams;U.append("typeId",`${w}`),U.append("ofTheConceptId",`${k}`),U.append("userId",`${F}`),U.append("inpage",`${P}`),U.append("page",`${x}`);let j=(0,e.Xr)("application/x-www-form-urlencoded");const J=yield fetch(r.B.GetAllConnectionsOfConceptUrl(),{method:"POST",headers:j,body:U});return J.ok?u=yield J.json():((0,o.ey)(y,"GetConnectionOfTheConcept",J.status),(0,o.ry)(J),console.log("Get connection of concept error",J.status)),Ue.V.logUpdate(y),u}catch(U){U instanceof Error?console.log("Get connection of concept  error message: ",U.message):console.log("Get connection of concept unexpected error: ",U),(0,o.Mb)(U,r.B.GetAllConnectionsOfConceptUrl()),(0,o.ey)(y,"GetConnectionOfTheConcept",U)}})}var oe=g(2155),K=g(442),ie=g(7282),pe=g(5976),z=g(7273),ge=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function ke(D,d,i,p){return ge(this,arguments,void 0,function*(w,k,F,P,x=1,y=4){if(w>0&&F>0){var u=k,U=yield pe.p.getId(),j=new oe.N(U,w,F,u,P,x,y);return w==F?(j.ofTheConceptId=0,j.toTheConceptId=1,j):(j.toUpdate=!0,j.isTemp=!1,K.Y.AddConnection(j),j)}throw new z.z("cannot create connection because id are negative ",!1,400,"")})}var Te=g(4818),Ee=g(7876),He=g(8407),Ye=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function je(D,d,i){return Ye(this,arguments,void 0,function*(p,w,k,F=!1,P=!1){var x,y;if(Dt)try{return(yield Yt("CreateConnectionBetweenTwoConcepts",{ofTheConcept:p,toTheConcept:w,linker:k,both:F,count:P})).data}catch(de){console.error("CreateConnectionBetweenTwoConcepts sw error: ",de),rn(de)}let u=p.userId;if(F){let de=k+"_by",Ne=(null===(x=w.type)||void 0===x?void 0:x.characterValue)+"_s_"+de;P&&(yield et(de,w,u));let Ve=yield(0,He.A)("connection",Ne,!1,999,999,999),tt=new oe.N(0,w.id,p.id,u,Ve.id,1e3,4);K.Y.AddConnection(tt)}let U=k+"_s",j=(null===(y=p.type)||void 0===y?void 0:y.characterValue)+"_s_"+U;P&&(yield et(U,p,u));let J=yield(0,He.A)("connection",j,!1,999,999,999),q=new oe.N(0,p.id,w.id,u,J.id,1e3,4);return K.Y.AddConnection(q),q})}function et(D,d){return Ye(this,arguments,void 0,function*(i,p,w=null){var k;let F=p,P=w??p.userId,y=(null===(k=p.type)||void 0===k?void 0:k.characterValue)+"_s_"+i+"_count",u=yield(0,He.A)("connection",y,!1,P,4,999),U=yield xe(u.id,p.id,P,10,1),j=[],J=(0,ie.o)();for(let de=0;de<U.length;de++){let Ne=yield(0,Ee.A)(U[de].toTheConceptId);j.push(Ne)}if(j.length<1)J=yield(0,He.A)("count","1",!1,P,4,999);else{let de=j[0],Ne=0;try{Ne=Number(de.characterValue)}catch{Ne=0}Ne+=1,J=yield(0,He.A)("count",Ne.toString(),!1,P,4,999);for(let Ve=0;Ve<U.length;Ve++)(0,Te.m)(U[Ve].id)}let q=new oe.N(0,F.id,J.id,F.userId,u.id,1e3,4);yield K.Y.AddConnection(q)})}function ft(D,d,i){return Ye(this,arguments,void 0,function*(p,w,k,F=!1,P=!1){var x,y;let u=p.userId;if(F){let q=k+"_by",de=(null===(x=w.type)||void 0===x?void 0:x.characterValue)+"_s_"+q;P&&(yield et(q,w,u));let Ne=yield(0,He.A)("connection",de,!1,999,999,999),Ve=new oe.N(0,w.id,p.id,u,Ne.id,1e3,4);K.Y.AddConnection(Ve)}let U=k+"_s",j=(null===(y=p.type)||void 0===y?void 0:y.characterValue)+"_s_"+U;P&&(yield et(U,p,u));let J=yield(0,He.A)("connection",j,!1,999,999,999);return yield ke(p.id,p.userId,w.id,J.id,1e3,4)})}var Pe=g(5868),yt=(g(3655),function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})});function rt(D,d){const i=Ue.V.logfunction("storeToDatabase",[D,"noindexdb"]);Ue.V.logUpdate(i)}function be(D,d,i){return yt(this,void 0,void 0,function*(){const p=Ue.V.logfunction("getFromDatabaseWithType",[D,"noindexdb"]);Ue.V.logUpdate(p)})}function Xe(D){return yt(this,void 0,void 0,function*(){const d=Ue.V.logfunction("getObjectsFromIndexDb",[D,"noindexdb"]);Ue.V.logUpdate(d)})}var mt=g(1666),ht=g(4402),Oe=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Et(D,d){var i=arguments;return Oe(this,arguments,void 0,function*(p,w,k=10,F=1){var P;const x=Ue.V.logfunction("GetLink",i)||{};if(Dt){x.serviceWorker=!0;try{const J=yield Yt("GetLink",{id:p,linker:w,inpage:k,page:F});return Ue.V.logUpdate(x),J.data}catch(J){console.error("GetLink sw error: ",J),(0,o.ey)(x,"GetLink",J),rn(J)}}let y=[],u=yield(0,Ee.A)(p),U=(null===(P=u.type)||void 0===P?void 0:P.characterValue)+"_s_"+w,j=yield(0,ht.A)(U,16);if(j.id>0){let J=yield xe(j.id,u.id,u.userId,k,F),q=[];for(let de=0;de<J.length;de++)q.push(J[de].toTheConceptId);yield(0,v.Y)(q);for(let de=0;de<J.length;de++){let Ne=J[de].toTheConceptId,Ve=yield(0,Ee.A)(Ne),tt=yield(0,s.Ez)(Ve.id);y.push(tt)}}return Ue.V.logUpdate(x),y})}function pt(D,d){var i=arguments;return Oe(this,arguments,void 0,function*(p,w,k=10,F=1){var P;const x=Ue.V.logfunction("GetLinkRaw",i);let y=[],u=yield(0,Ee.A)(p),U=(null===(P=u.type)||void 0===P?void 0:P.characterValue)+"_s_"+w,j=yield(0,ht.A)(U,16);if(j.id>0){let J=yield xe(j.id,u.id,u.userId,k,F),q=[];for(let de=0;de<J.length;de++)q.push(J[de].toTheConceptId);for(let de=0;de<J.length;de++){let Ne=J[de].toTheConceptId,Ve=yield(0,Ee.A)(Ne);y.push(Ve)}}return Ue.V.logUpdate(x),y})}var bt=g(8357),gt=g(843),It=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};const Qt=new Map;function cn(D,d){var i=arguments;return It(this,void 0,void 0,function*(){const p=Ue.V.logfunction("MakeTheTypeConceptApi",i);let w=(0,ie.o)();if(Qt.has(D))return Qt.get(D)||w;const k=(()=>It(this,void 0,void 0,function*(){try{if(w=yield(0,gt.Az)(D),0==w.id||4==w.typeId){let F=(0,e.Xr)("application/x-www-form-urlencoded");const P=yield fetch(r.B.MakeTheTypeConceptUrl(),{method:"POST",headers:F,body:`type=${D}`});if(!P.ok)throw(0,o.ry)(P),new Error(`Error! status: ${P.status}`);w=yield P.json(),Ue.V.logUpdate(p)}}catch(F){F instanceof Error?console.log("Make The Type Concept Api error : ",F.message):console.log("Make The Type Concept Api error : ",F),(0,o.Mb)(F,r.B.MakeTheTypeConceptUrl()),(0,o.ey)(p,"MakeTheTypeConceptApi",F)}finally{Qt.delete(D)}return w}))();return Qt.set(D,k),k})}var bn=g(8675),An=g(6058),mo=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Co(D){var d=arguments;return mo(this,void 0,void 0,function*(){const i=Ue.V.logfunction("GetLinkerConnectionFromConcepts",d);let p=yield(0,bn.l)(D);for(let w=0;w<p.length;w++){let k=p[w],F=k.typeId,P=yield(0,Ee.A)(F);k.type=P}return Ue.V.logUpdate(i),p})}function hr(D){var d=arguments;return mo(this,void 0,void 0,function*(){const i=Ue.V.logfunction("GetLinkerConnectionToConcepts",d);let p=yield(0,An.W)(D);for(let w=0;w<p.length;w++){let k=p[w],F=k.typeId,P=yield(0,Ee.A)(F);k.type=P}return Ue.V.logUpdate(i),p})}var jl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},Vl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},$l=g(6963),Si=g(2202),Hl=g(5457),ql=g(991),pr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Ai(D){var d=arguments;return pr(this,void 0,void 0,function*(){const i=Ue.V.logfunction("DeleteConceptById",d);if(Dt)try{return(yield Yt("DeleteConceptById",{id:D})).data}catch(F){console.error("DeleteConceptById sw error: ",F),rn(F)}if(D>0){var p=yield I.I.GetConcept(D);if(p.id>0){var w=p.typeId,k=p.characterValue;yield Hl.c.removeTypeConcept(w,D),yield $l.f.removeNodeByCharacter(k,D),yield function(F){var P=arguments;return Vl(this,void 0,void 0,function*(){let x=!1;const y=Ue.V.logfunction("DeleteTheConcept",P);try{const u=new FormData;u.append("id",F.toString());let U=(0,e.BZ)();const j=yield fetch(r.B.DeleteConceptUrl(),{method:"POST",headers:U,body:u});j.ok?x=(yield j.json()).success:(console.log("Delete concept error",j.status),(0,o.ry)(j)),x&&I.I.AddNpc(F),Ue.V.logUpdate(y)}catch(u){u instanceof Error?console.log("Delete concept error message: ",u.message):console.log("Delete concept unexpected error: ",u),(0,o.Mb)(u,r.B.DeleteConceptUrl()),(0,o.ey)(y,"DeleteTheConcept",u)}return x})}(D),yield Si.W.removeNodeFromTree(D),yield ql.H.removeNodeFromTree(D)}}else T.v.RemoveConceptById(D);Ue.V.logUpdate(i)})}function fr(D){return pr(this,void 0,void 0,function*(){if(Dt)try{return(yield Yt("DeleteUser",{id:D})).data}catch(d){console.error("DeleteUser sw error: ",d),rn(d)}D>0?function(d){var i=arguments;jl(this,void 0,void 0,function*(){const p=Ue.V.logfunction("DeleteUserInBackend",i);try{var w=(0,e.ab)("application/json","");let k=r.B.DeleteUserUrl();k=k+"?conceptId="+d+"&apiKey=freeschema";const F=yield fetch(k,{method:"POST",headers:w});if(F.ok){let P=yield F.json(),x=Number(P.data);return console.log("this is the delete email concept",x),Ai(x),Ue.V.logUpdate(p),x}throw(0,o.ry)(F),new Error(`Delete composition Error! status: ${F.status}`)}catch(k){k instanceof Error?console.log("Delete composition error message: ",k.message):console.log("Delete composition unexpected error: ",k),(0,o.Mb)(k,r.B.DeleteConceptUrl()),(0,o.ey)(p,"DeleteUserInBackend",k)}})}(D):T.v.RemoveConceptById(D)})}var zl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function yr(D,d){return zl(this,void 0,void 0,function*(){try{const i=new Headers;i.append("Authorization","Bearer "+d);const p=new FormData;p.append("id",D.toString());const w=yield fetch(r.B.DeleteConceptUrl(),{method:"POST",body:p,headers:i});if(!w.ok)throw(0,o.ry)(w),new Error(`Delete composition Error! status: ${w.status}`)}catch(i){i instanceof Error?console.log("Delete composition error message: ",i.message):console.log("Delete composition unexpected error: ",i),(0,o.Mb)(i,r.B.DeleteConceptUrl())}})}var Vo=g(1735),ro=g(8286),Jl=g(1596),tn=g(3278),gr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},Zl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function vr(D){var d=arguments;return Zl(this,void 0,void 0,function*(){const i=Ue.V.logfunction("GetConnectionById",d);if(console.log("AccessTracker activation status from GetConnectionById"),!0===Vo.J.activateStatus)try{Vo.J.incrementConnection(D)}catch{console.error("Error adding connection in access tracker"),Ue.V.log("ERROR","Error Adding Connection")}if(Dt)try{return(yield Yt("GetConnectionById",{id:D})).data}catch(w){console.error("GetConnectionById sw error: ",w),rn(w)}let p=yield ro.d.GetConnection(D);return null!=p&&0!=p.id||null==D||null==D||(p=yield function(w){var k=arguments;return gr(this,void 0,void 0,function*(){const F=Ue.V.logfunction("GetConnection",k);let P=yield ro.d.GetConnection(w);try{if(0!=P.id)return P;{const x=new FormData;x.append("id",w.toString());const y={method:"POST",headers:{Authorization:"Bearer "+tn.b.BearerAccessToken},body:x};let u;try{u=yield fetch(r.B.GetConnectionUrl(),y)}catch{u=yield(0,Jl.g)(y,"/api/get-connection-by-id")}return yield function(U,j){return gr(this,void 0,void 0,function*(){U.ok?(j=yield U.json(),ro.d.AddConnection(j)):((0,o.ry)(U),console.log("Get Connection Error",U.status))})}(u,P),Ue.V.logUpdate(F),P}}catch(x){x instanceof Error?console.log("Get Connection error message: ",x.message):console.log("Get Connection unexpected error: ",x),(0,o.Mb)(x,r.B.GetConnectionUrl()),(0,o.ey)(F,"GetConnection",x)}})}(D)),Ue.V.logUpdate(i),p})}var Ql=g(2212),Yl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},Kl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function mr(D,d,i){return Kl(this,arguments,void 0,function*(p,w,k,F=4,P=999){const x=Ue.V.logfunction("MakeTheTimestamp")||{};if(Dt){x.serviceWorker=!0;try{const q=yield Yt("MakeTheTimestamp",{type:p,referent:w,userId:k,accessId:F,sessionInformationId:P});return Ue.V.logUpdate(x),q.data}catch(q){console.error("MakeTheTimestamp sw error: ",q),(0,o.ey)(x,"MakeTheTimestamp",q),rn(q)}}let y,u="",U=p.startsWith("the_"),j=(0,ie.o)();return u=U?p:"the_"+p,j=yield cn(u,k),y=yield function(q,de,Ne,Ve,tt,De,ot){return Yl(this,void 0,void 0,function*(){let Lt=yield(0,ht.A)(q,Ve),qt=Lt;return 0==qt.id&&(Lt=yield(0,Ql.Ay)(q,de,4,Ve,0,De,ot),qt=Lt),qt})}(w,k,0,j.id,0,F,u),Ue.V.logUpdate(x),y})}class _o{constructor(){this.composition=0,this.type="",this.linker="",this.inpage=10,this.page=1,this.listLinkers=[],this.fullLinkers=[],this.textSearch="",this.logic="or",this.reverse=!1,this.doFilter=!1,this.filterSearches=[],this.selectors=[],this.ofCompositions=[]}}var mn=g(6687),$o=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Cr(){var D=arguments;return $o(this,arguments,void 0,function*(d=0,i=[],p="",w=[]){const k=Ue.V.logfunction("RecursiveSearchApi",D)||{};let F=[];try{if(Dt){k.serviceWorker=!0;try{const U=yield Yt("RecursiveSearchApi",{composition:d,listLinkers:i,textSearch:p,fullLinkers:w});return Ue.V.logUpdate(k),U.data}catch(U){console.error("RecursiveSearchApi sw error: ",U),(0,o.ey)(k,"RecursiveSearchApi",U),rn(U)}}let P=new _o;P.composition=d,P.listLinkers=i,P.fullLinkers=w,P.textSearch=p;let x=JSON.stringify(P),y=(0,e.Xr)();const u=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:y,body:x});if(u.ok){const U=yield u.json();let j=U.compositionIds,J=U.internalConnections;F=yield(0,mn.p8)(j,J)}else console.log("recursive search error ",u.status),(0,o.ey)(k,"RecursiveSearchApi",u.status),(0,o.ry)(u);Ue.V.logUpdate(k)}catch(P){P instanceof Error?console.log("recursive search error message: ",P.message):console.log("recursive search unexpected error: ",P),(0,o.ey)(k,"RecursiveSearchApi",P),(0,o.Mb)(P,r.B.RecursiveSearchUrl())}return F})}function _r(){var D=arguments;return $o(this,arguments,void 0,function*(d=0,i=[],p=""){const w=Ue.V.logfunction("RecursiveSearchApiWithInternalConnections",D)||{};let k=[];try{if(Dt){w.serviceWorker=!0;try{const u=yield Yt("RecursiveSearchApiWithInternalConnections",{composition:d,listLinkers:i,textSearch:p});return Ue.V.logUpdate(w),u.data}catch(u){console.error("RecursiveSearchApiWithInternalConnections sw error: ",u),(0,o.ey)(w,"RecursiveSearchApiWithInternalConnections",u),rn(u)}}let F=new _o;F.composition=d,F.listLinkers=i,F.textSearch=p;let P=JSON.stringify(F),x=(0,e.Xr)();const y=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:x,body:P});if(y.ok){const u=yield y.json();let U=u.compositionIds,j=u.internalConnections;k=yield(0,mn.km)(U,j),Ue.V.logUpdate(w)}else console.log("recursive search error ",y.status),(0,o.ey)(w,"GetCompositionConnectionsBetweenTwoConcepts",y.status),(0,o.ry)(y)}catch(F){F instanceof Error?console.log("recursive search error message: ",F.message):console.log("recursive search unexpected error: ",F),(0,o.ey)(w,"GetCompositionConnectionsBetweenTwoConcepts",F),(0,o.Mb)(F,r.B.RecursiveSearchUrl())}return k})}function Li(){var D=arguments;return $o(this,arguments,void 0,function*(d=0,i=[],p="",w=[]){const k=Ue.V.logfunction("RecursiveSearchApiRaw",D)||{};try{if(Dt){k.serviceWorker=!0;try{const u=yield Yt("RecursiveSearchApiRaw",{composition:d,listLinkers:i,textSearch:p,fullLinkers:w});return Ue.V.logUpdate(k),u.data}catch(u){console.error("RecursiveSearchApiRaw sw error: ",u),(0,o.ey)(k,"RecursiveSearchApiRaw",u),rn(u)}}let F=new _o;F.composition=d,F.listLinkers=i,F.textSearch=p,F.fullLinkers=w;let P=JSON.stringify(F),x=(0,e.Xr)();const y=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:x,body:P});if(y.ok){const u=yield y.json();return Ue.V.logUpdate(k),u}return console.log("recursive search error ",y.status),(0,o.ey)(k,"RecursiveSearchApiRaw",y.status),(0,o.ry)(y),Ue.V.logUpdate(k),[]}catch(F){F instanceof Error?console.log("recursive search error message: ",F.message):console.log("recursive search unexpected error: ",F),(0,o.ey)(k,"RecursiveSearchApiRaw",F),(0,o.Mb)(F,r.B.RecursiveSearchUrl())}})}function wr(){var D=arguments;return $o(this,arguments,void 0,function*(d=0,i=[],p=""){const w=Ue.V.logfunction("RecursiveSearchApiRawFullLinker",D)||{};try{if(Dt){w.serviceWorker=!0;try{const y=yield Yt("RecursiveSearchApiRawFullLinker",{composition:d,fullLinkers:i,textSearch:p});return Ue.V.logUpdate(w),y.data}catch(y){console.error("RecursiveSearchApiRawFullLinker sw error: ",y),(0,o.ey)(w,"RecursiveSearchApiRawFullLinker",y),rn(y)}}let k=new _o;k.composition=d,k.fullLinkers=i,k.textSearch=p;let F=JSON.stringify(k),P=(0,e.Xr)();const x=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:P,body:F});if(x.ok){const y=yield x.json();return Ue.V.logUpdate(w),y}return console.log("recursive search error ",x.status),(0,o.ey)(w,"RecursiveSearchApiRawFullLinker",x.status),(0,o.ry)(x),Ue.V.logUpdate(w),[]}catch(k){k instanceof Error?console.log("recursive search error message: ",k.message):console.log("recursive search unexpected error: ",k),(0,o.Mb)(k,r.B.RecursiveSearchUrl()),(0,o.ey)(w,"RecursiveSearchApiRawFullLinker",k)}})}function Tr(){var D=arguments;return $o(this,arguments,void 0,function*(d=0,i=[],p=""){const w=Ue.V.logfunction("RecursiveSearchApiRawFullLinker",D)||{};try{if(Dt)try{w.serviceWorker=!0;const y=yield Yt("RecursiveSearchApiNewRawFullLinker",{composition:d,fullLinkers:i,textSearch:p});return Ue.V.logUpdate(w),y.data}catch(y){console.error("RecursiveSearchApiNewRawFullLinker sw error: ",y),(0,o.ey)(w,"RecursiveSearchApiNewRawFullLinker",y),rn(y)}let k=new _o;k.composition=d,k.fullLinkers=i,k.textSearch=p;let F=JSON.stringify(k),P=(0,e.Xr)();const x=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:P,body:F});if(x.ok){const y=yield x.json();return Ue.V.logUpdate(w),y}return console.log("recursive search error ",x.status),(0,o.ey)(w,"RecursiveSearchApiNewRawFullLinker",x.status),(0,o.ry)(x),Ue.V.logUpdate(w),[]}catch(k){k instanceof Error?console.log("recursive search error message: ",k.message):console.log("recursive search unexpected error: ",k),(0,o.Mb)(k,r.B.RecursiveSearchUrl()),(0,o.ey)(w,"RecursiveSearchApiNewRawFullLinker",k)}})}var Ho=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};const Ni=["image/jpeg","image/jpg","image/png","image/webp"],xi=["application/msword","application/vnd.ms-excel","application/vnd.ms-powerpoint","text/plain","application/pdf"];function br(D,d){return Ho(this,void 0,void 0,function*(){const i=Ue.V.logfunction("uploadAttachment");try{console.log("File Type",D.type);const p=new FormData;let w;if(xi.includes(D.type)||D.name.toLowerCase().endsWith(".md"))p.append("file",D,D.name),w=yield Fi(p,d);else{if(!Ni.includes(D.type))return{message:"Invalid File Format",success:!1};p.append("image",D,D.name),w=yield Ei(p,d)}return w?.data?(Ue.V.logUpdate(i),{message:"Upload Success",success:!0,url:w.data}):{message:"File Upload Failed",success:!1}}catch(p){throw console.error(p),(0,o.ey)(i,"uploadAttachment",p),p}})}function Ei(D){return Ho(this,arguments,void 0,function*(d,i=""){const p=Ue.V.logfunction("uploadImage");try{const w=yield fetch(r.B.uploadImageUrl(),{method:"POST",body:d,headers:{Authorization:`Bearer ${i}`}});if(!w.ok){const k=w.headers.get("content-type");k&&k.includes("text/plain")&&console.info(w?.text());const F=yield w?.text();return console.error(`${w.status} ${F}`),Ue.V.logUpdate(p),null}return yield w.json()}catch(w){return console.error(w),(0,o.ey)(p,"uploadImage",w),null}})}function Ir(D){return Ho(this,arguments,void 0,function*(d,i=""){const p=Ue.V.logfunction("uploadImageV2");try{const w=yield fetch(r.B.uploadImageUrlWithSmall(),{method:"POST",body:d,headers:{Authorization:`Bearer ${i}`}});if(!w.ok){const k=w.headers.get("content-type");k&&k.includes("text/plain")&&console.info(w?.text());const F=yield w?.text();return console.error(`${w.status} ${F}`),Ue.V.logUpdate(p),null}return yield w.json()}catch(w){return console.error(w),(0,o.ey)(p,"uploadImageV2",w),null}})}function Fi(D){return Ho(this,arguments,void 0,function*(d,i=""){const p=Ue.V.logfunction("uploadFile");try{const w=yield fetch(r.B.uploadFileUrl(),{method:"POST",body:d,headers:{Authorization:`Bearer ${i}`}});if(!w.ok){const k=w.headers.get("content-type");k&&k.includes("text/plain")&&console.info(w.text());const F=yield w.text();return console.error(`${w.status} ${F}`),null}return Ue.V.logUpdate(p),yield w.json()}catch(w){return console.error(w),(0,o.ey)(p,"uploadFile",w),null}})}function kr(){return Ho(this,void 0,void 0,function*(){let D=yield(0,e.Xr)(),d={};try{const i=yield fetch(r.B.UploadFileLimitUrl(),{method:"GET",headers:D});i.ok&&(d=i.json())}catch(i){throw console.error(i),i}return d})}var Bo=g(1239),li=g(7467),Xl=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Sr(D,d){var i=arguments;return Xl(this,arguments,void 0,function*(p,w,k="boomconsole.com"){const F=Ue.V.logfunction("LoginToBackend",i);try{let P={email:p,password:w,application:k},x=new Headers;x.append("Content-Type","application/json");let y=JSON.stringify(P);const u=yield fetch(r.B.LoginUrl(),{method:"POST",headers:x,body:y}),U=yield u.json();if(u.ok)return tn.b.BearerAccessToken=U.data.token,Ue.V.logUpdate(F),U;console.log("Login tsccs error message: ",u.status),(0,o.ER)(u,U)}catch(P){P instanceof Error?console.log("Login tsccs error message: ",P.message):console.log(" Login tsccs  unexpected error: ",P),(0,o.Mb)(P,r.B.LoginUrl()),(0,o.ey)(F,"LoginToBackend",P)}})}var Oi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Ar(D){return Oi(this,void 0,void 0,function*(){return yield function(){return Oi(this,arguments,void 0,function*(i="",p={}){let w={message:"success",status:!1,statusCode:200,data:"cannot signup"};try{const k=yield fetch(i,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(p)}),F=yield k.json();return k.ok?w={message:"success",status:!0,statusCode:200,data:F}:(0,o.ER)(k,F),w}catch(k){console.log("Signup Error: ",k),(0,o.Mb)(k,i)}})}(r.B.SignupUrl(),D)})}function Lr(D){return Oi(this,void 0,void 0,function*(){const d=r.B.NODE_URL,i=yield fetch(`${d}/api/v1/entity/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(i.ok)return i.json();{if(404===i.status)throw new Error("404, Not found");if(500===i.status)throw new Error("500, internal server error");let p=yield i.json();throw console.log("This is the error from package",p),new Error(p.message)}})}var ed=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Nr(D){return ed(this,void 0,void 0,function*(){const d=JSON.stringify({email:D.email,password:D.password});let i={message:"success",status:!1,statusCode:200,data:""};const p=new Headers;p.append("Content-Type","application/json");const w=r.B.LoginUrl();try{const k=yield fetch(w,{method:"POST",headers:p,body:d,redirect:"follow"}),F=yield k.json();return k.ok?i={message:"success",status:!0,statusCode:200,data:F?.data}:(0,o.ER)(k,F),i}catch(k){console.log("Sign in api error",k),(0,o.Mb)(k,w)}})}var Di=g(9934),di=g(4485);function td(D=[],d){Array.isArray(D)&&D.splice(D.findIndex(function(i){return i.id===d.id}),1)}function nd(D=[],d){Array.isArray(D)&&D.splice(D.findIndex(function(i){return i.id===d.id}),1)}class Bi{constructor(d,i,p,w){this.expiryTime=new Date(Date.now()+6e5),this.height=1,this.key=d,this.value=i,this.leftNode=p,this.rightNode=w}isValid(){const d=new Date(Date.now());return!(this.expiryTime<d&&(wo.removeNodeFromTree(this.key),1))}saveToCache(d){this.value.cached=d}addNode(d,i,p){if(null==i)return d;const k=i.rightNode;if(i.key>d.key)i.leftNode=this.addNode(d,i.leftNode,p);else{if(!(i.key<d.key))return this.isValid(),d;i.rightNode=this.addNode(d,k,p)}i.height=1+Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode));const F=this.getBalanceFactor(i);if(F>1&&i.leftNode){if(d.key<i.leftNode.key)return this.rightRotate(i);if(d.key>i.leftNode.key)return i.leftNode=this.leftRotate(i.leftNode),this.rightRotate(i)}if(F<-1&&i.rightNode){if(d.key>i.rightNode.key)return this.leftRotate(i);if(d.key<i.rightNode.key)return i.rightNode=this.rightRotate(i.rightNode),this.leftRotate(i)}return this.isValid(),i}rightRotate(d){if(d){const i=d.leftNode;if(i)return d.leftNode=i.rightNode,i.rightNode=d,d.height=Math.max(this.getHeight(d.leftNode),this.getHeight(d.rightNode))+1,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,i}return d}leftRotate(d){if(d){const i=d.rightNode;if(i){const p=i.leftNode;return i.leftNode=d,d.rightNode=p,d.height=Math.max(this.getHeight(d.leftNode),this.getHeight(d.rightNode))+1,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(d.rightNode))+1,i}}return d}getHeight(d){return d?d.height:0}getBalanceFactor(d){return null==d?0:this.getHeight(d.leftNode)-this.getHeight(d.rightNode)}getFromNode(d,i){return i&&(d==i.key&&i.isValid()?i:d<i.key?this.getFromNode(d,i.leftNode):d>i.key?this.getFromNode(d,i.rightNode):i)}removeNode(d,i){if(null==d)return d;if(d.key>i)return d.leftNode=this.removeNode(d.leftNode,i),d;if(d.key<i)return d.rightNode=this.removeNode(d.rightNode,i),d;if(null==d.leftNode){const p=d.rightNode;return d=null,p}if(null==d.rightNode){const p=d.leftNode;return d=null,p}{const p=this.inOrderSuccessor(d.rightNode);return d.value=p.value,d.key=p.key,d.rightNode=this.removeNode(d.rightNode,p.key),d}}countNodeBelow(d){return null==d?0:1+this.countNodeBelow(d.leftNode)+this.countNodeBelow(d.rightNode)}inOrderSuccessor(d){for(;null!=d.leftNode;)d=d.leftNode;return d}}var xr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};let wo=(()=>{class D{static addNodeToTree(i){if(null==this.root)return this.root=i,this.root;this.root=this.root.addNode(i,this.root,this.root.height)}static addCompositionToTree(i){const p=new Bi(i.id,i,null,null);this.addNodeToTree(p)}static getNodeFromTree(i){return xr(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(i,this.root):null})}static removeNodeFromTree(i){return xr(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,i))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}return D.root=null,D})();var od=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Po(D,d,i,p){return od(this,arguments,void 0,function*(w,k,F,P,x=[]){var y,u;let U={};const j=[];if(0==w)return"";let J=Pi(F,w);if(null!=J&&0!=J.id||null==w||null==w||(J=yield(0,Ee.A)(w)),0!=J.id&&null==J.type){const q=J.typeId;let de=Pi(F,q);J.type=de,null==de&&null!=q&&null!=q&&(de=yield(0,Ee.A)(q),J.type=de)}if(!P.includes(w))return J?.characterValue;if(x.includes(w))return"";x.push(w);for(let q=0;q<k.length;q++)if(k[q].ofTheConceptId==w){const de=k[q].toTheConceptId;if(P.includes(w)){let Ne=Pi(F,de);if(null!=Ne&&0!=Ne.id||null==de||null==de||(Ne=yield(0,Ee.A)(de)),0!=Ne.id&&null==Ne?.type){const De=Ne.typeId;let ot=yield I.I.GetConcept(De);Ne.type=ot,null==ot&&null!=De&&null!=De&&(ot=yield(0,Ee.A)(De),Ne.type=ot)}const tt=(null!==(u=null===(y=Ne?.type)||void 0===y?void 0:y.characterValue)&&void 0!==u?u:"").replace("the_","");if(isNaN(Number(tt))){if(tt){const De=yield Po(de,k,F,P,x);U[tt]=De}}else{const De=yield Po(de,k,F,P,x);j[tt]=De,U=j}}}return U})}function Pi(D,d){let i=(0,ie.o)();for(let p=0;p<D.length;p++)if(d==D[p].id)return i=D[p],i;return i}class qo{constructor(){this.id=0,this.mainConcept=(0,ie.o)(),this.connections=[],this.concepts=[],this.subcompositions=[],this.cached={}}updateCache(){return d=this,w=function*(){if(0==this.mainConcept.id)for(let k=0;k<this.concepts.length;k++)this.concepts[k].id==this.id&&(this.mainConcept=this.concepts[k]);this.cached=yield Po(this.id,this.connections,this.concepts,this.subcompositions,[])},new((p=void 0)||(p=Promise))(function(k,F){function P(u){try{y(w.next(u))}catch(U){F(U)}}function x(u){try{y(w.throw(u))}catch(U){F(U)}}function y(u){var U;u.done?k(u.value):(U=u.value,U instanceof p?U:new p(function(j){j(U)})).then(P,x)}y((w=w.apply(d,[])).next())});var d,p,w}UpdateAcrossDistributedSystem(){var d,i;try{0!=this.id&&(i=null===(d=this.id)||void 0===d?void 0:d.toString(),r.B.MQTT_CONNECTION&&r.B.MQTT_CONNECTION.publish("compositionUpdate",i))}catch(p){console.log("Error while publishing message",p)}}isUpdating(){this.UpdateAcrossDistributedSystem()}GetDataCache(){var d,i,p;const w={};w[null!==(p=null===(i=null===(d=this.mainConcept)||void 0===d?void 0:d.type)||void 0===i?void 0:i.characterValue)&&void 0!==p?p:""]=this.cached;const k={};return k.data=w,k.id=this.id,k}}var id=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function zo(D){return id(this,arguments,void 0,function*(d,i=null,p=null,w=null,k=null,F=null,P=null,x=null){const y=k??999,u=F??4,U=P??999;let j=w??0,J=(0,ie.o)();null==x&&(x=new qo);for(const q in d)if("object"==typeof d[q]||Array.isArray(d[q])){const de=yield(0,He.A)(q,"",!0,y,u,U);if(null==i&&null==p){let Ne=j;J=de,Ne=de.id,j=de.id,x.concepts.push(de),x.id=de.id,yield zo(d[q],de.id,de.userId,Ne,k,F,P,x)}else{const Ne=i??999,Ve=p??999,tt=j;J=de,x.concepts.push(de);const De=yield(0,mt.q)(Ne,Ve,de.id,tt);x.connections.push(De),yield zo(d[q],de.id,de.userId,tt,k,F,P,x)}null!=d[q]&&null!=d[q]&&x.subcompositions.push(de.id)}else{const de=i??999,Ne=p??999,Ve=j,tt=yield(0,He.A)(q,d[q],!1,y,u,U);x.concepts.push(tt);const De=yield(0,mt.q)(de,Ne,tt.id,Ve);x.connections.push(De)}return J})}var rd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Er(D){return rd(this,void 0,void 0,function*(){const d=Ue.V.logfunction("UpdateComposition")||{};if(Dt){d.serviceWorker=!0;try{const De=yield Yt("UpdateComposition",{patcherStructure:D});return Ue.V.logUpdate(d),De.data}catch(De){console.error("UpdateComposition sw error: ",De),(0,o.ey)(d,"UpdateComposition",De),rn(De)}}const i=D.userId,p=D.sessionId,w=D.accessId;let k=[];const F=[];let P=(0,ie.o)(),x=(0,ie.o)();const y=[];let u=D.compositionId;const U=D.ofTheCompositionId;let j=[];if(u<0){let De=yield(0,Ee.A)(u,i);if(!(De.id>0))return null;u=De.id}k=yield(0,ne.s)(u);const J=[],q=new qo,de=[];q.id=u,q.isUpdating();let Ne=[];for(let De=0;De<k.length;De++)(0,Di.A)(de,k[De].ofTheConceptId),(0,Di.A)(J,k[De].ofTheConceptId),(0,Di.A)(J,k[De].toTheConceptId),Ne.push(k[De].ofTheConceptId);q.subcompositions=de,q.connections=k;for(let De=0;De<J.length;De++){const ot=yield(0,Ee.A)(J[De]);u==J[De]&&(P=ot),U==J[De]&&(x=ot),F.push(ot)}const Ve=D.patchObject;for(const De in Ve){let ot=(0,ie.o)();const Lt=Ve[De];let qt=P;if(x.id>0&&(qt=x),Array.isArray(Lt)||"object"==typeof Lt){ot=yield(0,He.A)(De,"",!0,P.userId,4,999),q.subcompositions.push(ot.id);const lt=(0,di.vo)(F,ot);for(let ln=0;ln<lt.length;ln++)if(lt[ln].id>0){const In=(0,di.wS)(q.connections,lt[ln].id);j=j.concat(In),y.push(lt[ln])}yield zo(Ve[De],ot.id,ot.userId,P.id,P.userId,4,999,q)}else{ot=yield(0,He.A)(De,Lt,!1,i,w,p);const lt=(0,di.vo)(F,ot);for(let ln=0;ln<lt.length;ln++)if(lt[ln].id>0){const In=(0,di.wS)(q.connections,lt[ln].id);j=j.concat(In),y.push(lt[ln])}}const Mt=(0,mt.q)(qt.id,qt.userId,ot.id,P.id);F.push(ot),q.connections.push(Mt)}for(let De=0;De<j.length;De++)nd(q.connections,j[De]),(0,Te.m)(j[De].id);for(let De=0;De<y.length;De++)td(F,y[De]);q.concepts=q.concepts.concat(F),q.mainConcept=P,q.id=P.id,yield q.updateCache(),wo.addCompositionToTree(q),K.Y.SyncDataOnline();let tt=q.GetDataCache();return Ue.V.logUpdate(d),tt})}var sd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Fr(D,d,i,p){return sd(this,arguments,void 0,function*(w,k,F,P,x=10,y=1){var u=(0,e.ab)("application/x-www-form-urlencoded",P),U=new URLSearchParams;U.append("type",w),U.append("search",k),U.append("composition",F),U.append("inpage",x.toString()),U.append("page",y.toString());const j=r.B.SearchCompositionsUrl()+"?"+U.toString();try{const J=yield fetch(j,{method:"GET",headers:u});return J.ok?yield J.json():((0,o.ry)(J),[])}catch(J){console.log("This is the searching error",J),(0,o.Mb)(J,j)}})}var ad=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Or(D){return ad(this,arguments,void 0,function*(d,i=""){var p=(0,e.ab)("application/json",i);const w=r.B.SearchLinkMultipleAll(),k=JSON.stringify(d);try{const F=yield fetch(w,{method:"POST",headers:p,body:k});return F.ok?yield F.json():(console.log("This is the searching error",F.status),(0,o.ry)(F),[])}catch(F){console.log("This is the searching error",F),(0,o.Mb)(F,w)}})}var Dr=g(7139),Jo=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Br(D){return Jo(this,arguments,void 0,function*(d,i=[]){var p,w;let k=[];const F=[];let P={},x={};const y=yield wo.getNodeFromTree(d),u=[];let U=yield I.I.GetConcept(d);if(0==U.id&&null!=d&&null!=d&&(U=yield(0,Dr.r)(d)),null==y){let j=[];j=i.length>0?Pr(d,i):yield(0,ne.s)(d),k=j;for(let q=0;q<k.length;q++)u.includes(k[q].ofTheConceptId)||(u.push(k[q].ofTheConceptId),F.push(k[q].ofTheConceptId)),F.includes(k[q].toTheConceptId)||F.push(k[q].toTheConceptId);Mr(U,k,F,u);let J=[];x=yield(0,s.zN)(d,k,u,J),P[null!==(w=null===(p=U?.type)||void 0===p?void 0:p.characterValue)&&void 0!==w?w:""]=x}else x=y.value.GetDataCache(),P=x;return 0==U.id?"":P})}function Pr(D,d){const i=[];for(let p=0;p<d.length;p++)d[p].typeId==D&&i.push(d[p]);return i}function Ui(D){return Jo(this,arguments,void 0,function*(d,i=[]){var p,w;let k={},F=[];const P=[];let x;const y={},u=yield wo.getNodeFromTree(d),U=[];let j=yield I.I.GetConcept(d);if(0==j.id&&null!=d&&null!=d&&(j=yield(0,Dr.r)(d)),null==u){let J=[];J=i.length>0?Pr(d,i):yield(0,ne.s)(d),F=J;for(let q=0;q<F.length;q++)U.includes(F[q].ofTheConceptId)||(U.push(F[q].ofTheConceptId),P.push(F[q].ofTheConceptId)),P.includes(F[q].toTheConceptId)||P.push(F[q].toTheConceptId);Mr(j,F,P,U),x=yield(0,s.zN)(d,F,U),y[null!==(w=null===(p=j?.type)||void 0===p?void 0:p.characterValue)&&void 0!==w?w:""]=x,k.created_at=j.entryTimeStamp,k.data=y,k.id=d}else x=u.value.GetDataCache(),k=x;return 0==j.id?"":k})}function Ur(D,d){return Jo(this,void 0,void 0,function*(){let i=[];const p=[];i=yield(0,li.j)(d);for(let w=0;w<D.length;w++){const k=yield Ui(D[w],i);k&&p.push(k)}return p})}function Mr(D,d,i,p){return Jo(this,void 0,void 0,function*(){const w=new qo,k=yield function(P){return Jo(this,void 0,void 0,function*(){let x=[];const y=[];for(let u=0;u<P?.length;u++){const U=yield I.I.GetConcept(P[u]);0==U.id?y.push(P[u]):x.push(U)}return 0==y?.length||(x=yield(0,Bo.I)(y)),x})}(i);w.connections=d,w.concepts=k,w.id=D.id,w.subcompositions=p,w.mainConcept=D;const F=yield Po(D.id,d,k,p,[]);w.cached=F,wo.addCompositionToTree(w)})}var cd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Rr(D){return cd(this,void 0,void 0,function*(){try{var d=(0,e.Xr)();const i=JSON.stringify(D),p=yield fetch(r.B.CreateSessionId(),{method:"POST",headers:d,body:i});return p.ok?p.json():(console.log("Creating session failed",yield p.json()),(0,o.ry)(p),null)}catch(i){console.log("Creating session failed",i),(0,o.Mb)(i,r.B.CreateSessionId())}})}var ld=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Gr(D,d){return ld(this,void 0,void 0,function*(){try{var i=(0,e.Xr)("application/x-www-form-urlencoded");const p=new URLSearchParams;p.append("sessionId",D.toString()),p.append("url",d);const w=yield fetch(r.B.CreateSessionVisitUrl(),{method:"POST",headers:i,body:p});return w.ok?w.json():(console.log("Creating session url failed",yield w.json()),(0,o.ry)(w),null)}catch(p){console.log("Creating session url failed",p),(0,o.Mb)(p,r.B.CreateSessionVisitUrl())}})}var dd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Wr(D,d,i){return dd(this,arguments,void 0,function*(p,w,k,F=10,P=1){let x=[];try{var y=new URLSearchParams;y.append("typeId",`${p}`),y.append("toTheConceptId",`${w}`),y.append("userId",`${k}`),y.append("inpage",`${F}`),y.append("page",`${P}`);var u=(0,e.Xr)("application/x-www-form-urlencoded");const U=yield fetch(r.B.GetAllConnectionsToConceptUrl(),{method:"POST",headers:u,body:y});return U.ok?x=yield U.json():(console.log("Get connection of concept error",U.status),(0,o.ry)(U)),x}catch(U){throw U instanceof Error?console.log("Get connection of concept  error message: ",U.message):console.log("Get connection of concept unexpected error: ",U),U}})}var jr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Mi(D,d){var i=arguments;return jr(this,arguments,void 0,function*(p,w,k=10,F=1,P=!1){const x=Ue.V.logfunction("GetRelation",i)||{};if(Dt){x.serviceWorker=!0;try{const q=yield Yt("GetRelation",{id:p,relation:w,inpage:k,page:F,reverse:P});return Ue.V.logUpdate(x),q.data}catch(q){console.error("GetRelation error sw: ",q),(0,o.ey)(x,"GetRelation",q),rn(q)}}let y=[],u=yield(0,Ee.A)(p),U=yield(0,gt.Az)(w),j=[];if(U.id>0)if(P){j=yield Wr(U.id,u.id,u.userId,k,F);let q=[];for(var J=0;J<j.length;J++)q.push(j[J].ofTheConceptId);yield(0,v.Y)(q);for(let de=0;de<j.length;de++){let Ne=j[de].ofTheConceptId,Ve=yield(0,Ee.A)(Ne),tt=yield(0,s.Ez)(Ve.id);y.push(tt)}}else{j=yield xe(U.id,u.id,u.userId,k,F);let q=[];for(let de=0;de<j.length;de++)q.push(j[de].toTheConceptId);yield(0,v.Y)(q);for(let de=0;de<j.length;de++){let Ne=j[de].toTheConceptId,Ve=yield(0,Ee.A)(Ne),tt=yield(0,s.Ez)(Ve.id);y.push(tt)}}return Ue.V.logUpdate(x),y})}function Vr(D,d){var i=arguments;return jr(this,arguments,void 0,function*(p,w,k=10,F=1,P=!1){const x=Ue.V.logfunction("GetRelationRaw",i)||{};if(Dt){x.serviceWorker=!0;try{const de=yield Yt("GetRelationRaw",{id:p,relation:w,inpage:k,page:F,reverse:P});return Ue.V.logUpdate(x),de.data}catch(de){console.error("GetRelationRaw error sw: ",de),(0,o.ey)(x,"GetRelationRaw",de),rn(de)}}let y=[],u=yield(0,Ee.A)(p),U=yield(0,gt.Az)(w),j=[],J=[];if(U.id>0){if(P){j=yield Wr(U.id,u.id,u.userId,k,F);for(var q=0;q<j.length;q++)J.push(j[q].ofTheConceptId)}else{j=yield xe(U.id,u.id,u.userId,k,F);for(let de=0;de<j.length;de++)J.push(j[de].toTheConceptId)}y=yield(0,Bo.r)(J)}return Ue.V.logUpdate(x),y})}var Ri=g(6416),no=g(4711);class ud{constructor(d,i,p,w){this.value=[],this.height=1,this.key=d,this.value.push(i),this.leftNode=p,this.rightNode=w}addNode(d,i,p){if(null==i)return d;var k=i.rightNode;if(i.key>d.key)i.leftNode=this.addNode(d,i.leftNode,p);else{if(!(i.key<d.key))return i.value.push(...d.value),i;i.rightNode=this.addNode(d,k,p)}i.height=1+Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode));let F=this.getBalanceFactor(i);if(F>1&&i.leftNode){if(d.key<i.leftNode.key)return this.rightRotate(i);if(d.key>i.leftNode.key)return i.leftNode=this.leftRotate(i.leftNode),this.rightRotate(i)}if(F<-1&&i.rightNode){if(d.key>i.rightNode.key)return this.leftRotate(i);if(d.key<i.rightNode.key)return i.rightNode=this.rightRotate(i.rightNode),this.leftRotate(i)}return i}rightRotate(d){if(d){let i=d.leftNode;if(i)return d.leftNode=i.rightNode,i.rightNode=d,d.height=Math.max(this.getHeight(d.leftNode),this.getHeight(d.rightNode))+1,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,i}return d}leftRotate(d){if(d){let i=d.rightNode;if(i){let p=i.leftNode;return i.leftNode=d,d.rightNode=p,d.height=Math.max(this.getHeight(d.leftNode),this.getHeight(d.rightNode))+1,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(d.rightNode))+1,i}}return d}getHeight(d){return d?d.height:0}getBalanceFactor(d){return null==d?0:this.getHeight(d.leftNode)-this.getHeight(d.rightNode)}getFromNode(d,i){return i&&(d==i.key?i:d<i.key?this.getFromNode(d,i.leftNode):d>i.key?this.getFromNode(d,i.rightNode):i)}removeNode(d,i){if(null==d)return d;if(d.key>i)return d.leftNode=this.removeNode(d.leftNode,i),d;if(d.key<i)return d.rightNode=this.removeNode(d.rightNode,i),d;if(null==d.leftNode){let w=d.rightNode;return d=null,w}if(null==d.rightNode){let w=d.leftNode;return d=null,w}var p=this.inOrderSuccessor(d.rightNode);return d.value=p.value,d.key=p.key,d.rightNode=this.removeNode(d.rightNode,p.key),d}countNodeBelow(d){return null==d?0:1+this.countNodeBelow(d.leftNode)+this.countNodeBelow(d.rightNode)}inOrderSuccessor(d){for(;null!=d.leftNode;)d=d.leftNode;return d}}var Gi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};let ui=(()=>{class D{static compositeKey(i,p){return("0000"+i.toString(16).toUpperCase()).slice(-4)+("0000"+p.toString(16).toUpperCase()).slice(-4)}static addNodeToTree(i){if(null==this.root)return this.root=i,this.root;this.root=this.root.addNode(i,this.root,this.root.height)}static waitForDataToLoad(){return Gi(this,void 0,void 0,function*(){return new Promise((i,p)=>{this.checkFlag(i),setTimeout(()=>{p("not")},25e3)})})}static checkFlag(i){if(n.B.isDataLoaded)return i("done");setTimeout(D.checkFlag,1e3,i)}static addConceptToTree(i,p,w=999){let k=this.compositeKey(p,w);var F=new ud(k,i,null,null);this.addNodeToTree(F)}static getNodeFromTree(i,p){return Gi(this,void 0,void 0,function*(){let w=this.compositeKey(i,p);return this.root?this.root.getFromNode(w,this.root):null})}static removeNodeFromTree(i){return Gi(this,arguments,void 0,function*(p,w=999){if(this.root){let k=this.compositeKey(p,w);this.root=this.root.removeNode(this.root,k)}})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}return D.root=null,D})();var $r=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Hr(D,d){return $r(this,arguments,void 0,function*(i,p,w=999){let k=yield ui.getNodeFromTree(i,w),F=(0,Ri.u)();if(k)for(let P=0;P<k.value.length;P++){let x=k.value[P];x.ghostId==p&&(F=x)}return F})}function qr(D,d){return $r(this,arguments,void 0,function*(i,p,w=999){ui.addConceptToTree(i,p,w)})}var To=g(5312),Wi=g(1213),zr=g(3729),hd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},pd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Jr(D,d,i){return pd(this,void 0,void 0,function*(){try{if(Dt)try{return(yield Yt("GetRelationLocal",{id:D,relation:d,userId:i})).data}catch(F){console.error("GetRelationLocal error sw: ",F),rn(F)}let p=yield(0,t.$I)(d),w=[];0!=p.id&&(w=yield function(F,P){return hd(this,void 0,void 0,function*(){try{return yield O.G.GetConnectionOfCompositionAndTypeLocal(P,F)}catch(x){throw x}})}(D,p.id));let k=[];for(let F=0;F<w.length;F++){let P=yield R(w[F].toTheConceptId);k.push(P)}return k}catch(p){throw p}})}var fd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function ji(D){return fd(this,void 0,void 0,function*(){let d=[];try{var i=(0,e.Xr)();const p=yield fetch(r.B.ViewInternalDataUrl(),{method:"POST",headers:i,body:JSON.stringify(D)});if(p.ok){let w=yield p.json(),k={};for(let F=0;F<w.length;F++){d=w[F].connections;let x=w[F].id;(0,Bo.r)(w[F].concepts),k[x]=d}return k}return console.log("View Internal Data error",p.status),(0,o.ry)(p),d}catch(p){throw p instanceof Error?console.log(" This is the view internal data error message: ",p.message):console.log(" This is the view internal data unexpected error: ",p),p}})}var yd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Vi(D){return yd(this,void 0,void 0,function*(){var d;try{let i=yield ji(D),p=[];for(let w=0;w<D.length;w++){let k=D[w],F=i[k];if(k&&F){let P=[],x={};for(let u=0;u<F.length;u++)P.includes(F[u].ofTheConceptId)||P.push(F[u].ofTheConceptId);let y=yield(0,s.zN)(k,F,P);x.data=y,x.id=k,p.push(x)}else{let P={};P.id=k;let x=yield(0,Ee.A)(k),y={};x.type&&(y[null===(d=x?.type)||void 0===d?void 0:d.characterValue]=x.characterValue,P.data=y,p.push(P))}}return p}catch(i){throw i}})}var hi=g(176),Zr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})},Qr=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Yr(D){return Qr(this,arguments,void 0,function*(d,i=""){try{let p=yield function(w){return Zr(this,arguments,void 0,function*(k,F=""){var P=(0,e.ab)("application/json",F);let x=r.B.SearchInternalWithAuthenticatedCcsUrl();x=x+"?composition="+k.composition+"&search="+k.search+"&internalComposition="+k.internalComposition+"&type="+k.type+"&inpage="+k.inpage+"&page="+k.page;try{const y=yield fetch(x,{method:"GET",headers:P});return y.ok?yield y.json():(console.log("This is the searching internal error",y.status),(0,o.ry)(y),[])}catch(y){console.log("This is the searching internal error",y),(0,o.Mb)(y,x)}})}(d,i);return yield Vi(p)}catch(p){throw p}})}function Kr(D){return Qr(this,arguments,void 0,function*(d,i=""){try{return yield function(p){return Zr(this,void 0,void 0,function*(){var w=(0,e.ab)("application/json","");let k=r.B.SearchInternalWithCcsUrl();k=k+"?composition="+p.composition+"&search="+p.search+"&internalComposition="+p.internalComposition+"&type="+p.type+"&inpage="+p.inpage+"&page="+p.page;try{const F=yield fetch(k,{method:"GET",headers:w});return F.ok?yield F.json():(console.log("This is the searching internal error",F.status),(0,o.ry)(F),[])}catch(F){console.log("This is the searching internal error",F),(0,o.Mb)(F,k)}})}(d)}catch(p){throw p}})}var $i=g(8095),gd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Xr(D){return gd(this,void 0,void 0,function*(){if(Dt)try{return(yield Yt("DeleteConceptLocal",{id:D})).data}catch(i){console.error("DeleteConceptLocal error sw: ",i),rn(i)}let d=yield(0,Wi.f)(D);T.v.RemoveConcept(d)})}var es=g(2803),vd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function ts(D,d,i,p){return vd(this,arguments,void 0,function*(w,k,F,P,x=!0){var y,u;const U=Ue.V.logfunction("GetConnectionBetweenTwoConceptsLinker")||{};if(Dt){U.serviceWorker=!0;try{const q=yield Yt("GetConnectionBetweenTwoConceptsLinker",{ofTheConcept:w,toTheConcept:k,linker:F,fullLinker:P,forward:x});return Ue.V.logUpdate(U),q.data}catch(q){console.error("GetConnectionBetweenTwoConceptsLinker sw error: ",q),(0,o.ey)(U,"GetConnectionBetweenTwoConceptsLinker",q),rn(q)}}let j=(0,ie.o)();if(""!=F){let q="";q=x?(null===(y=w.type)||void 0===y?void 0:y.characterValue)+"_s_"+F+"_s":(null===(u=k.type)||void 0===u?void 0:u.characterValue)+"_s_"+F+"_by",j=yield(0,He.A)("connection",q,!1,999)}""!=P&&(j=yield cn(P,999));let J=[];return J=x?yield(0,es.x)(w.id,k.id,j.id):yield(0,es.x)(k.id,w.id,j.id),Ue.V.logUpdate(U),J})}function ns(D,d){return new Promise((i,p)=>{setTimeout(()=>{i(d)},D)})}var Vt=g(3130);const os=3,is=4,rs=5;var md=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Hi(D,d){return md(this,arguments,void 0,function*(i,p,w=""){let k=r.B.SearchAllTypeWithLinker(i.auth);var F=(0,e.ab)("application/json",w);k=k+"?search="+i.search+"&type="+i.type+"&inpage="+i.inpage+"&page="+i.page;const P=JSON.stringify(p);try{const x=yield fetch(k,{method:"POST",headers:F,body:P});return x.ok?yield x.json():((0,o.ry)(x),console.log("This is the searching multiple error",x.status),[])}catch(x){console.log("This is the searching SearchWithTypeAndLinker error",x),(0,o.Mb)(x,k)}})}var ho=g(4287);class qi extends ho.w{constructor(d,i,p=Vt.y0){super(),this.searchQuery=[],this.format=Vt.y0,this.searchQuery=d,this.format=p}bind(){return d=this,w=function*(){return this.data=yield(0,To.cf)(this.searchQuery,"",this,this.format),this.mainConcept=this.searchQuery[0].composition,this.listenToEvent(this.mainConcept),console.log("this is the data",this.data),this.data},new((p=void 0)||(p=Promise))(function(k,F){function P(u){try{y(w.next(u))}catch(U){F(U)}}function x(u){try{y(w.throw(u))}catch(U){F(U)}}function y(u){var U;u.done?k(u.value):(U=u.value,U instanceof p?U:new p(function(j){j(U)})).then(P,x)}y((w=w.apply(d,[])).next())});var d,p,w}}function ss(D,d,i=Vt.y0){return new qi(D,d??"",i)}var as=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class Cd extends ho.w{constructor(d,i=Vt.ZJ){super(),this.id=d,this.format=i}bind(){return as(this,void 0,void 0,function*(){if(!this.isDataLoaded){let d=yield(0,s.hL)(this.id);this.mainConcept=this.id,this.compositionIds=d.compositionList;let i=d.connectionList;for(let p=0;p<i.length;p++)this.internalConnections.push(i[p].id);this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return as(this,void 0,void 0,function*(){let d=[],i=this.internalConnections;for(let p=0;p<i.length;p++)d.push(yield ro.d.GetConnection(i[p]));return this.data=this.format==Vt.ZJ?yield(0,s.ay)(this.mainConcept,d,this.compositionIds):this.format==Vt.y0?yield(0,s.$V)(this.mainConcept,d,this.compositionIds):this.format==Vt.yv?yield(0,s.re)(this.mainConcept,d,this.compositionIds):yield(0,s.ay)(this.mainConcept,d,this.compositionIds),this.data})}}function cs(D,d=Vt.ZJ){return new Cd(D,d)}var ls=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class _d extends ho.w{constructor(d,i,p,w,k){super(),this.data=[],this.startPage=0,this.compositionName=d,this.userId=i,this.inpage=p,this.page=w,this.format=k}bind(){return ls(this,void 0,void 0,function*(){if(!this.isDataLoaded){var d=yield(0,a.A)(this.compositionName);if(d){yield f(this.compositionName,this.userId);let w=yield I.I.GetConceptsByTypeIdAndUser(d.id,this.userId);for(var i=this.inpage*(this.page-1),p=i;p<i+this.inpage;p++)w[p]&&this.compositionIds.push(w[p].id)}yield(0,v.Y)(this.compositionIds),this.isDataLoaded=!0,this.listenToEventType(d.id);for(let w=0;w<this.compositionIds.length;w++)this.listenToEvent(this.compositionIds[w])}return yield this.build()})}build(){return ls(this,void 0,void 0,function*(){if(this.data=[],this.format==Vt.ZJ){for(let d=this.startPage;d<this.startPage+this.inpage;d++)if(this.compositionIds[d]){let i=yield(0,s.kx)(this.compositionIds[d]);this.data.push(i)}}else if(this.format==Vt.y0){for(let d=this.startPage;d<this.startPage+this.inpage;d++)if(this.compositionIds[d]){let i=yield(0,s.RW)(this.compositionIds[d]);this.data.push(i)}}else if(this.format==Vt.yv){for(let d=this.startPage;d<this.startPage+this.inpage;d++)if(this.compositionIds[d]){let i=yield(0,s.XI)(this.compositionIds[d]);this.data.push(i)}}else for(let d=this.startPage;d<this.startPage+this.inpage;d++)if(this.compositionIds[d]){let i=yield(0,s.kx)(this.compositionIds[d]);this.data.push(i)}return this.data})}}function ds(D,d,i,p,w=Vt.ZJ){return new _d(D,d,i,p,w)}var po=g(1320),us=g(5328),pi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class wd extends ho.w{constructor(d,i,p="",w){super(),this.searchText="",this.connections=[],this.externalConnectionIds=[],this.data=[],this.mainConcept=d,this.searchLinkers=i,this.textSearch=p,w&&(this.format=w)}listenToEvent(d){if(this.eventHandlers[d])return;const i=p=>pi(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let w=this;setTimeout(function(){return pi(this,void 0,void 0,function*(){try{let k=yield ro.d.GetConnectionByOfTheConceptAndType(d,d);for(let F=0;F<k.length;F++)yield ro.d.GetConnection(k[F]).then(P=>{P.typeId==w.mainConcept?w.internalConnections.includes(P.id)||w.internalConnections.push(P.id):w.linkers.includes(P.id)||w.linkers.push(P.id),w.conceptIds.includes(P.toTheConceptId)||w.conceptIds.push(P.toTheConceptId),w.compositionIds.includes(P.ofTheConceptId)||w.compositionIds.push(P.ofTheConceptId),w.compositionIds.includes(P.toTheConceptId)||w.compositionIds.push(P.toTheConceptId)});w.isUpdating=!1,yield w.bind(),w.notify()}catch(k){throw console.error("Error in RecursiveSearchObservable event listener:",k),w.isUpdating=!1,k}})},200)}});this.eventHandlers[d]=i,window.addEventListener(`${d}`,i)}bind(){return pi(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;const d=yield Li(this.mainConcept,this.searchLinkers,this.textSearch);this.compositionIds=d.compositionIds||[],this.internalConnections=d.internalConnections||[],this.externalConnectionIds=d.externalConnections||[],this.linkers=this.externalConnectionIds,this.connections=yield(0,li.j)(this.externalConnectionIds);for(let i=0;i<this.compositionIds.length;i++)this.listenToEvent(this.compositionIds[i]);this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return pi(this,void 0,void 0,function*(){return this.externalConnectionIds=this.linkers,this.data=this.format&&this.format==Vt.XZ?{compositionIds:this.compositionIds,internalConnections:this.internalConnections,externalConnections:this.externalConnectionIds}:yield(0,mn.p8)(this.compositionIds,this.internalConnections),this.data})}}function hs(D,d,i="",p){return new wd(D,d,i,p)}var fi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class Td extends ho.w{constructor(d,i,p,w=Vt.y0){super(),this.searchQuery=[],this.format=Vt.y0,this.mainCompositionIds=[],this.searchCharacter="",this.token="",this.searchStructure=d,this.searchQuery=i,this.searchQuery[0].type=d.composition,this.searchCharacter=d.composition,this.format=w,this.token=tn.b.BearerAccessToken}listenToEventType(d){if(this.eventHandlers[d])return;const i=p=>fi(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let w=this;setTimeout(function(){return fi(this,void 0,void 0,function*(){try{let k=p;w.mainCompositionIds.includes(k?.detail)||(w.mainCompositionIds.unshift(k?.detail),w.conceptIds.push(k?.detail),w.listenToEvent(k?.detail),ro.d.GetConnectionsOfConcept(k?.detail).then(F=>{for(let P=0;P<F.length;P++)w.linkers.push(F[P].id)})),w.isUpdating=!1,yield w.bind(),w.notify()}catch(k){throw console.error("Error in GetLinkListObservable event listener:",k),w.isUpdating=!1,k}})},200)}});this.eventHandlers[d]=i,window.addEventListener(`${d}`,i)}bind(){return fi(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;var d=yield(0,a.A)(this.searchCharacter);let i=yield Hi(this.searchStructure,this.searchQuery,this.token);this.conceptIds=i.compositionIds,this.internalConnections=i.internalConnections,this.linkers=i.linkers,this.reverse=i.reverse,this.mainCompositionIds=i.mainCompositionIds,this.listenToEventType(d.id);for(let p=0;p<this.mainCompositionIds.length;p++)this.listenToEvent(this.mainCompositionIds[p])}return yield this.build()})}build(){return fi(this,void 0,void 0,function*(){return yield(0,Bo.r)(this.conceptIds),this.data=this.format==Vt.y0?yield(0,po.yV)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse):yield(0,po._W)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse),this.data})}}function ps(D,d,i,p=Vt.y0){return new Td(D,d,i,p)}var zi=g(4698),fs=g(6915),ys=g(2615);class gs{constructor(d,i,p,w,k,F,P,x=!1,y,u,U){this.structureType="lconcept",this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=r.B.getRandomizer(),this.id=d,this.userId=i,this.typeId=p,this.ghostId=d,this.categoryId=w,this.characterValue=F,this.accessId=k,this.type=null,this.isNew=x,this.typeCharacter=P,this.entryTimeStamp=y,this.updatedTimeStamp=u,this.isSynced=!1,this.referentId=U}getType(){console.log(this.typeId)}}class vs{constructor(d,i,p,w,k,F){this.isTemp=!1,this.applicationId=r.B.getRandomizer(),this.type=(0,ie.o)(),this.id=d,this.ofTheConceptId=i,this.toTheConceptId=p,this.typeId=w,this.ghostId=d,this.orderId=k,this.typeCharacter="",this.accessId=F,this.typeCharacter="",this.entryTimeStamp=(0,ie.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date}}class ms{constructor(){this.compositionId=0,this.userId=999,this.sessionId=999,this.accessId=4,this.ofTheCompositionId=0,this.patchObject={}}}class Cs{constructor(){this.id="0",this.remote_address="",this.server_port="",this.server_address="",this.server_name="",this.server_software="",this.http_user_agent="",this.self="",this.port="",this.userId="",this.email=""}}var bo=g(628);class yi{constructor(){this.type="",this.search="",this.logicoperator="=",this.index=0,this.composition=!0,this.name="",this.operateon=""}}class _s{constructor(){this.type="",this.search="",this.composition="",this.internalComposition="",this.userId=999,this.inpage=10,this.page=1,this.auth=!0}}var ws=g(7887),Ts=g(3075),bd=g(7869),bs=g(9635),Ue=g(9700);class Ji{static initialize(){try{console.warn("Initialized Application Monitoring for tracking errors..."),this.initGlobalErrorHandlers(),this.logCatchError(),this.logErrorEvent(),this.logUnhandledError(),this.logUserInteractions(),this.logNetworkRequests(),this.logRouteChanges()}catch(d){console.error("Error during Application Monitoring initialization:",d)}}static initGlobalErrorHandlers(){try{if(console.log("this is the window",window),void 0===typeof window)return;window.onerror=(d,i,p,w,k)=>{const P={message:d,source:i,lineno:p,colno:w,stack:k?.stack||"undefined",requestFrom:r.B.BASE_APPLICATION,sessionId:tn.b.sessionId||"unknown"};Ue.V.logApplication("ERROR","Runtime Error",P),Ue.V.log("ERROR","Runtime Error",P)},window.onunhandledrejection=d=>{const i=tn.b.sessionId||"unknown";Ue.V.logApplication("ERROR","Unhandled Promise Rejection",{message:d.reason?d.reason.message:d.reason,stack:d.reason?d.reason.stack:null,requestFrom:r.B.BASE_APPLICATION,sessionId:i}),Ue.V.log("ERROR","Unhandled Promise Rejection",{message:d.reason?d.reason.message:d.reason,stack:d.reason?d.reason.stack:null,requestFrom:r.B.BASE_APPLICATION,sessionId:i})}}catch(d){console.warn("Failed to initialize global error handlers:",d)}}static logCatchError(){try{const d=console.error;console.log("Inside originalConsoleError..."),console.error=function(...i){if("Intercepted Fetch Error:"==i?.[0])return;const p="Console Error",w=tn.b.sessionId||"unknown",k={arguments:i.map(F=>Is(F)),requestFrom:r.B.BASE_APPLICATION,sessionId:w};Ue.V.logApplication("ERROR",p,k),Ue.V.log("ERROR",p,k),d.apply(console,i)}}catch(d){console.warn("Failed to override console.error:",d)}}static logErrorEvent(){try{window.addEventListener("error",d=>{var i;console.log("Inside error event...");const p=tn.b.sessionId||"unknown",w={error:(null===(i=d.error)||void 0===i?void 0:i.message)||d.message,source:d.filename,line:d.lineno,column:d.colno,stack:d.error?Is(d.error.stack):void 0,requestFrom:r.B.BASE_APPLICATION,sessionId:p},k="Unhandled Error";Ue.V.logApplication("ERROR",k,w),Ue.V.log("ERROR",k,w)})}catch(d){console.warn("Failed to add error event listener:",d)}}static logUnhandledError(){try{window.addEventListener("unhandledrejection",d=>{var i,p;console.log("Inside unhandledrejection...");const w=tn.b.sessionId||"unknown",k={reason:(null===(i=d.reason)||void 0===i?void 0:i.message)||String(d.reason),stack:(null===(p=d.reason)||void 0===p?void 0:p.stack)||"No stack trace available",requestFrom:r.B.BASE_APPLICATION,sessionId:w};Ue.V.logApplication("ERROR","Unhandled Promise Rejection",k),Ue.V.log("ERROR","Unhandled Promise Rejection",k)})}catch(d){console.warn("Failed to add unhandled rejection event listener:",d)}}static logUserInteractions(){document.addEventListener("click",d=>{var i;const p=tn.b.sessionId||"unknown",w=d.target,k={element:w.tagName,id:w.id,classes:w.className,text:null===(i=w.innerText)||void 0===i?void 0:i.slice(0,50),requestFrom:r.B.BASE_APPLICATION,sessionId:p};Ue.V.logApplication("INFO","User Click",k)}),document.addEventListener("input",d=>{}),document.addEventListener("scroll",()=>{window})}static logNetworkRequests(){try{if(void 0===typeof window)return;const d=window?.fetch;if(!d)throw new Error("Original fetch is not available.");const i=[r.B.PostLogger(),r.B.PostPrefetchConceptConnections()];window.fetch=(...p)=>{return w=this,P=function*(){const x=tn.b.sessionId||"unknown",[y,u]=p,U=y instanceof Request?y.url:y instanceof URL?y.toString():y;if(i.includes(U))return console.log("Ignored URLs detected : ",U),d(...p);let j={request:{type:"REQUEST",message:"Network Request",method:u?.method||"GET",url:U,body:u?.body,requestFrom:r.B.BASE_APPLICATION,sessionId:x}};try{const J=yield d(...p);return j.response={type:"RESPONSE",message:"Network Response",url:U,status:J.status,requestFrom:r.B.BASE_APPLICATION,sessionId:x},J}catch(J){throw j.response={type:"ERROR",message:"Network Request Failed",url:U,error:J instanceof Error?J.message:String(J),requestFrom:r.B.BASE_APPLICATION,sessionId:x},Ue.V.logApplication("ERROR","Failed Network Request",j),new Error(`Network request failed for ${U}: ${J.message}`)}},new((F=void 0)||(F=Promise))(function(x,y){function u(J){try{j(P.next(J))}catch(q){y(q)}}function U(J){try{j(P.throw(J))}catch(q){y(q)}}function j(J){var q;J.done?x(J.value):(q=J.value,q instanceof F?q:new F(function(de){de(q)})).then(u,U)}j((P=P.apply(w,[])).next())});var w,F,P}}catch(d){console.warn("Failed to override network requests:",d)}}static logPerformanceMetrics(){void 0!==typeof window&&window?.addEventListener("load",()=>{performance})}static logRouteChanges(){const d=history.pushState;setTimeout(()=>{Ji.logOnWindowLoad()},3e3),history.pushState=function(...i){const p=tn.b.sessionId||"unknown",w={url:i[2]?new URL(i[2],location.origin).href:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:p};return Ue.V.logApplication("ROUTE","Route Change",w),d.apply(this,i)},window?.addEventListener("beforeunload",()=>{const p={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:tn.b.sessionId||"unknown"};Ue.V.logApplication("ROUTE","Unload",p)}),window?.addEventListener("popstate",()=>{const p={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:tn.b.sessionId||"unknown"};Ue.V.logApplication("ROUTE","Route Changed (Back/Forward)",p)})}static logOnWindowLoad(){const i={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:tn.b.sessionId||"unknown"};Ue.V.logApplication("ROUTE","Initial Load",i)}static logSample(){const i={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:tn.b.sessionId||"unknown"};Ue.V.logApplication("ROUTE","Sample",i)}static logWebSocketEvents(){if(void 0===typeof window)return;const d=tn.b.sessionId||"unknown",i=WebSocket;window.WebSocket=class extends i{constructor(p,w){super(p,w);const k={url:p.toString(),requestFrom:r.B.BASE_APPLICATION,sessionId:d};Ue.V.logApplication("INFO","WebSocket Open",k),this.addEventListener("message",F=>{Ue.V.logApplication("INFO","WebSocket Message",{url:p,data:F.data,requestFrom:r.B.BASE_APPLICATION,sessionId:tn.b.sessionId||"unknown"})}),this.addEventListener("error",F=>{const P=tn.b.sessionId||"unknown",x={url:p,error:F instanceof Error?F.message:String(F),requestFrom:r.B.BASE_APPLICATION,sessionId:P};Ue.V.logApplication("ERROR","WebSocket Error",x)}),this.addEventListener("close",()=>{Ue.V.logApplication("INFO","WebSocket Closed",{url:p,requestFrom:r.B.BASE_APPLICATION,sessionId:tn.b.sessionId||"unknown"})})}}}}function Is(D){try{return JSON.stringify(D,(d,i)=>i&&"object"==typeof i&&i instanceof Error?{message:i.message,stack:i.stack}:i)}catch{return"Error while serializing value"}}const ks=(D,d,...i)=>{return w=[D,d,...i],F=function*(P,x,y=!1){try{let u=r.B.sendMail();y&&(u=r.B.sendBulkMail());const U=yield fetch(u,{method:"POST",body:P instanceof FormData?P:JSON.stringify(P),headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`}}),j=U.headers.get("content-type");if(!U.ok){const q=yield U.json();return console.info(`${U.status} ${q}`),null}const J=yield U.json();return j&&j.includes("text/plain")?yield U.text():J}catch(u){return console.error(u),null}},new((k=void 0)||(k=Promise))(function(P,x){function y(j){try{U(F.next(j))}catch(J){x(J)}}function u(j){try{U(F.throw(j))}catch(J){x(J)}}function U(j){var J;j.done?P(j.value):(J=j.value,J instanceof k?J:new k(function(q){q(J)})).then(y,u)}U((F=F.apply(void 0,w||[])).next())});var w,k,F};class Id{constructor(){this.inDevelopment=!1,this.subscribers=[]}notify(d=null){this.subscribers.map(i=>{i(d||this.data)})}dataChange(d){this.subscribers.push(d)}}class kd extends Id{constructor(){super(...arguments),this.element=null,this.elementIdentifier=0,this.widgetMounted=!1}getComponent(){return this.element}getElementById(d){let i=this.getComponent(),p=document.body;if(i){let w=i.querySelector("#"+d);if(w)return p=w,p}return null}createWidgetWrapperIdentifier(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier.toString()}}class gi extends kd{constructor(){super(...arguments),this.html="",this.css="",this.js="",this.state={},this.previousState={},this.childWidgets=[],this.childWidgetElement=[],this.widgetState={},this.parentElement=""}querySelector(d){return this.element?this.element.querySelector(d):null}querySelectorAll(d){return this.element?this.element.querySelectorAll(d):null}getElement(){return this.element}setTitle(d){document.title=d}getHtml(){return this.html}UpdateChildData(d,i){let p=i;p.data=d,p.render(),p.update()}update(){}setState(d){this.previousState=Object.assign({},this),this.data=d,this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}setStateProperty(d){this.previousState=Object.assign({},this),Object.assign(this,d),this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}hasStateChanged(){return!this.isPropertyEqual(this.state,this.previousState)}isPropertyEqual(d,i){if(d===i)return!0;if("object"!=typeof d||"object"!=typeof i||null===d||null===i)return!1;const p=Object.keys(d),w=Object.keys(i);if(p.length!==w.length)return!1;for(let k of p){if(!w.includes(k))return!1;for(let F of w)if(k==F&&"state"!=k&&"previousState"!=k&&d[k]!=i[k])return!1}return!0}loadChildWidgets(){this.childWidgets.map(d=>{let i=this.getElementById(d.parentElement);i&&(i.innerHTML=""),d.mount(i)})}render(){this.element&&(this.element.innerHTML=this.getHtml()),this.loadChildWidgets(),this.after_render()}getElementByClassName(d){let i=this.getComponent();return i?i?.querySelectorAll("."+d):[]}mount_child(){}mount(d){return i=this,k=function*(){d&&(this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier(),this.element.innerHTML=this.getHtml(),this.element.classList.add("mftsccs-marking-rendered"),d.appendChild(this.element),this.parentElement=d.id,this.before_render(),this.mount_child(),this.widgetMounted=!0)},new((w=void 0)||(w=Promise))(function(F,P){function x(U){try{u(k.next(U))}catch(j){P(j)}}function y(U){try{u(k.throw(U))}catch(j){P(j)}}function u(U){var j;U.done?F(U.value):(j=U.value,j instanceof w?j:new w(function(J){J(j)})).then(x,y)}u((k=k.apply(i,[])).next())});var i,w,k}before_render(){this.render()}after_render(){console.log("this is calling the after render",this)}renderChildWidgets(){function d(i){var p;i&&(null===(p=i.childWidgets)||void 0===p||p.forEach(w=>{d(w)}),i.render())}console.log("this is the render child widget",this),this.childWidgets.forEach(i=>{d(i)})}setWidgetState(d,i){this.widgetState[d]=i,function p(w){w&&Array.isArray(w.childWidgets)&&w.childWidgets.forEach(k=>{k.widgetState=Object.assign(Object.assign({},k.widgetState),w.widgetState),p(k)})}(this),this.renderChildWidgets()}getWidgetState(d,i){return Object.keys.length&&this.widgetState[d]?this.widgetState[d]:i}}var Io=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class Zo extends gi{constructor(){super(...arguments),this.childComponents=[],this.componentMounted=!1,this.oldHtml=null,this.phonebooks=[],this.childrenData={},this.childWidgets=[],this.typeValueList=[],this.widgetType="the_element_name",this.parentConceptList=[],this.customFunctions=[],this.widgetDependenciesData=""}getUserId(){return Io(this,void 0,void 0,function*(){return(yield new Promise(i=>{let p=(null==localStorage?void 0:localStorage.getItem("profile"))||"";p?i(JSON.parse(p)):i()}))?.userId})}getTypeValueList(){return Io(this,arguments,void 0,function*(d=""){return new Promise(i=>Io(this,void 0,void 0,function*(){const p=null==(d=this.widgetType)?void 0:d.match(/^[a-z0-9]+_[a-z0-9]+/i),w=p?p[0]:"",k=d?.match(/^([a-z0-9]+).*_([a-z0-9]+)$/i),F=k?`${k[1]}_${k[2]}`:"";let P=[],x=new yi;x.type=F,x.search="1",x.logicoperator=">",x.name="emailfilter",x.operateon="entityEmail",x.composition=!1,P.push(x);let y=new Vn;y.typeConnection=d,y.name="entityEmail";let u=new Vn;u.type=w,u.filterLogic="( emailfilter )",u.filters=P,u.name="top",u.inpage=100,u.freeschemaQueries=[y],u.outputFormat=Vt.y0,Ro(u,"").subscribe(U=>{if(U?.length){const j=U?.map(J=>{var q,de,Ne,Ve,tt,De,ot;const Lt=null===(Ve=null===(Ne=null===(de=null===(q=J.data)||void 0===q?void 0:q[w])||void 0===de?void 0:de[d])||void 0===Ne?void 0:Ne.data)||void 0===Ve?void 0:Ve[F];return{id:null===(ot=null===(De=null===(tt=J.data)||void 0===tt?void 0:tt[w])||void 0===De?void 0:De[d])||void 0===ot?void 0:ot.id,name:Lt,text:Lt}});return this.typeValueList=j,i(j),j}})}))})}setTitle(d){document.title=d}getHtml(){return this.html}createRandomNumber(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier}mount_child(){return Io(this,void 0,void 0,function*(){try{new Function("tsccs",`\n        return (async function() {\n          ${this.mountChildWidgetsFunction}\n        }).call(this);\n      `).bind(this)(S)}catch(d){throw console.log("This is the error in the mount child",d),d}})}setProperty(d){return Io(this,void 0,void 0,function*(){return this.widgetType=d,this.getTypeValueList(this.widgetType).then(()=>{var i,p,w;null===(i=this.element)||void 0===i||i.setAttribute("data-type-value",this.widgetType),null===(w=null===(p=this.element)||void 0===p?void 0:p.parentElement)||void 0===w||w.setAttribute("data-type-value",this.widgetType),this.render()}),this})}createTypeEditor(d){!function(i,p){if(i){const w=document.querySelector("#widget-properties #widget-type"),k=w?.querySelectorAll("input");k?.forEach(U=>{U?.remove()});const F=i.target.closest(".added-widget-container"),P=i.target.closest("div");let x="";F?x=F?.getAttribute("data-type-value"):P&&(x=P?.getAttribute("data-type-value"));const y=document.createElement("input");y.setAttribute("type","text"),y.setAttribute("name","input-widgetTypeValue"),y.setAttribute("of",p.elementIdentifier.toString()),y.setAttribute("class","form-control"),y.setAttribute("id","widgetType"),y.setAttribute("onchange","updateWidgetTypeValue(event)"),p.widgetType?y.value=p.widgetType:y.setAttribute("placeholder","e.g. the_entity");let u=p;y.addEventListener("change",function(U){var j,J,q;const de=null===(j=U?.target)||void 0===j?void 0:j.value;u.widgetType=de,u.before_render(),u.loadChildWidgets(),null===(q=null===(J=u.element)||void 0===J?void 0:J.parentElement)||void 0===q||q.setAttribute("data-type-value",u.widgetType)}),w?.appendChild(y)}}(d,this)}mount(d){return Io(this,void 0,void 0,function*(){if(d){this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier();let i=this;this.inDevelopment?(this.element.onclick=function(p){p.preventDefault(),i.createTypeEditor(p)},this.element.className="mftsccs-marking-element"):this.element.classList.add("mftsccs-marking-rendered"),this.element.innerHTML=this.getHtml(),d?.setAttribute("data-type-value",i.widgetType),d.appendChild(this.element),this.parentElement=d.id,0==this.componentMounted||0==this.widgetMounted?(this.render_custom_functions(),this.render_widgetDependencies(),this.before_render(),this.mount_child(),this.widgetMounted=!0,this.componentMounted=!0):this.render(),this.childWidgetElement=this.getElementByClassName("added-widget-container")}})}render_widgetDependencies(){try{new Function("tsccs",`\n        return (async function() {\n          ${this.widgetDependenciesData}\n        }).call(this);\n      `).bind(this)(S)}catch(d){throw console.log("This is the error in the before render",d),d}}render_custom_functions(){var d;const i=null===(d=this.customFunctions)||void 0===d?void 0:d.map(p=>p?.code).join("");try{new Function("tsccs",`\n          return (async function() {\n            ${i}\n          }).call(this);\n        `).bind(this)(S)}catch(p){throw console.error("This is the error in the render_custom_functions",p),p}}before_render(){try{new Function("tsccs",`\n        return (async function() {\n          ${this.componentDidMountFunction}\n        }).call(this);\n      `).bind(this)(S)}catch(d){throw console.log("This is the error in the before render",d),d}}after_render(){try{new Function("tsccs",`\n        return (async function() {\n          ${this.addEventFunction}\n        }).call(this);\n      `).bind(this)(S)}catch(d){throw console.log("This is the error in the after render",d),d}}CreateConnectionBetweenEntityLocal(d,i,p){return Io(this,void 0,void 0,function*(){var w;const k=d.userId,F=(null===(w=d.type)||void 0===w?void 0:w.characterValue)+"_"+p,P=yield(0,bt.$)(F,999,999,k);return yield(0,no.F)(d.id,i.id,P.id,1e3),"connection created"})}}var Sd=g(3077),jn=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class Zi{constructor(){this.actions={concepts:[],connections:[]},this.success=!0,this.transactionId=Math.random().toString().substring(5)}initialize(){return jn(this,void 0,void 0,function*(){yield bo.H.initializeTransaction(this.transactionId)})}commitTransaction(){return jn(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield bo.H.SyncDataOnline(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}commitTransactionWithoutAuth(){return jn(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield bo.H.SyncDataOnlineWithoutAuth(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}rollbackTransaction(){return jn(this,void 0,void 0,function*(){this.success=!1,this.actions={concepts:[],connections:[]},yield bo.H.rollbackTransaction(this.transactionId,this.actions)})}markAction(){return jn(this,void 0,void 0,function*(){yield bo.H.markTransactionActions(this.transactionId,this.actions)})}MakeTheInstanceConceptLocal(d,i){return jn(this,arguments,void 0,function*(p,w,k=!1,F,P,x=999,y=0){try{if(!this.success)throw Error("Query Transaction Expired");const u=yield(0,Pe.k)(p,w,k,F,P,x,y,this.actions);return yield this.markAction(),u}catch(u){throw console.log(u),this.success=!1,u}})}MakeTheTypeConceptLocal(d,i,p,w){return jn(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const k=yield(0,bt.$)(d,i,p,w,this.actions);return yield this.markAction(),k}catch(k){throw console.log(k),this.success=!1,k}})}CreateTheConceptLocal(d,i,p,w,k,F){return jn(this,arguments,void 0,function*(P,x,y,u,U,j,J=!1,q=0,de={concepts:[],connections:[]}){try{if(!this.success)throw Error("Query Transaction Expired");const Ne=yield(0,Sd.A)(P,x,y,u,U,j,J,q,this.actions);return yield this.markAction(),Ne}catch(Ne){throw console.log(Ne),this.success=!1,Ne}})}CreateConnectionBetweenTwoConceptsLocal(d,i,p){return jn(this,arguments,void 0,function*(w,k,F,P=!1){try{if(!this.success)throw Error("Query Transaction Expired");const x=yield(0,$i.h)(w,k,F,P,this.actions);return yield this.markAction(),x}catch(x){throw console.log(x),this.success=!1,x}})}CreateTheConnectionLocal(d,i,p){return jn(this,arguments,void 0,function*(w,k,F,P=1,x="",y=999){try{if(!this.success)throw Error("Query Transaction Expired");const u=yield(0,no.F)(w,k,F,P,x,y,this.actions);return yield this.markAction(),u}catch(u){throw console.log(u),this.success=!1,u}})}CreateConnection(d,i,p){return jn(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const w=yield(0,no.d)(d,i,p,this.actions);return yield this.markAction(),w}catch(w){throw console.log(w),this.success=!1,w}})}CreateConnectionBetweenEntityLocal(d,i,p){return jn(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const w=yield Xi(d,i,p,this.actions);return yield this.markAction(),w}catch(w){throw console.log(w),this.success=!1,w}})}CreateTheCompositionLocal(d){return jn(this,arguments,void 0,function*(i,p=null,w=null,k=null,F=null,P=null,x=null,y=!1){try{if(!this.success)throw Error("Query Transaction Expired");const u=yield(0,H.R)(i,p,w,k,F,P,x,y,this.actions);return yield this.markAction(),u}catch(u){throw console.log(u),this.success=!1,u}})}}const Ss={number:/^\d+(\.\d+)?$/,text:/^[\s\S]*$/,textOnly:/^[A-Za-z\s]+$/,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,document:/\.(pdf|docx?|pptx?|xlsx?)$/i,sound:/\.(mp3|wav|ogg|flac)$/i,image:/\.(jpg|jpeg|png|gif|bmp|svg|webp)$/i,video:/\.(mp4|avi|mov|mkv|flv|webm)$/i,url:/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/,date:/^\d{4}-\d{2}-\d{2}$/,time:/^(?:[01]\d|2[0-3]):[0-5]\d$/,password:/^.{6,}$/,ipaddress:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$|^([0-9a-fA-F]{1,4}:){7}([0-9a-fA-F]{1,4})$/,uuid:/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/};var Uo=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class dn{constructor(){dn.cacheInitialized||dn.initializeAnomalyParameters()}static initializeAnomalyParameters(){return Uo(this,void 0,void 0,function*(){try{yield dn.getAnomalyParameters(),dn.refreshCache(),dn.cacheInitialized=!0}catch(d){console.error("Error during anomaly parameter initialization:",d)}})}static getAnomalyParameters(){return Uo(this,void 0,void 0,function*(){const d=Date.now();if(dn.anomalyParamsCache&&d-dn.lastFetchedTime<dn.cacheExpiryThreshold)return console.log("Returning cached anomaly parameters"),dn.anomalyParamsCache;try{return yield dn.fetchAnomalyParameters()}catch(i){throw console.error("Error fetching anomaly parameters:",i),i}})}static fetchAnomalyParameters(){return Uo(this,void 0,void 0,function*(){try{const d=yield fetch("https://devai.freeschema.com/v1/get-frontend-anomaly-parameters",{method:"GET",headers:{"Content-Type":"application/json"}});if(!d.ok)throw new Error("Failed to fetch anomaly parameters");const i=yield d.json();return dn.anomalyParamsCache=i.data,dn.lastFetchedTime=Date.now(),i.data}catch(d){throw console.error("API Fetch Error:",d),d}})}static refreshCache(){return Uo(this,void 0,void 0,function*(){try{Date.now()-dn.lastFetchedTime>dn.cacheExpiryThreshold&&(yield dn.getAnomalyParameters())}catch(d){console.error("Error refreshing anomaly parameters cache:",d)}})}detectDataType(d){for(const[i,p]of Object.entries(Ss))if(p.test(d))return i;return null}checkConceptAnomaly(d,i){return Uo(this,void 0,void 0,function*(){const p=[];try{if(!i)return p.push("Null value"),{valid:!1,warnings:p};const w=dn.anomalyParamsCache;d.startsWith("the_")||(d=`the_${d}`);const k=w[d];if(console.log("Concept Details : ",k),!k)return console.warn(`No concept details found for type: ${d}`),p.push(`No concept details found for type: ${d}`),{valid:!1,warnings:p};const F=i.length,{min_length:P,max_length:x,data_types:y}=k,u=F>=P&&F<=x,U=this.detectDataType(i),j=y.includes(U);return u||p.push(`Length of '${i}' is outside the allowed range (min: ${P}, max: ${x}). Current length: ${F}.`),j||p.push(`Type mismatch for '${i}'. Expected types: ${y.join(", ")}, detected type: ${U}.`),u&&j&&p.push(`Concept ${d} is valid. Length: ${F}, Type: ${U}`),{valid:u&&j,warnings:p}}catch(w){return console.error(`Error checking anomaly for ${d} with value ${i}:`,w),{valid:!1,warnings:p}}})}static checkAnomalyInBulk(d){return Uo(this,void 0,void 0,function*(){dn.cacheInitialized||(yield dn.initializeAnomalyParameters());try{const i={};for(const[p,w]of Object.entries(d)){const k=w.value,{valid:F,warnings:P}=yield(new dn).checkConceptAnomaly(p,k);i[p]={valid:F,warnings:P}}return i}catch(i){throw console.error("Bulk Anomaly Check Error:",i),i}})}static getExportedFunction(){console.log("Main : ",S);const d=Object.keys(S);return console.log("The exported List : ",d),d}static getFunctionaAnomalyParameters(){}}dn.anomalyParamsCache=null,dn.cacheInitialized=!1,dn.lastFetchedTime=0,dn.cacheExpiryThreshold=6e5;var Qi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class As{checkUniqueness(d,i){return Qi(this,void 0,void 0,function*(){const p=Ue.V.logfunction("checkUniqueness");d.startsWith("the_")||(d="the_"+d);let w=(yield cn(d,999)).id,k=yield(0,ht.A)(i,w);return console.log("This is the concept for validator",k),!(k.id>0||(Ue.V.logUpdate(p),0))})}validateField(d){return Qi(this,void 0,void 0,function*(){var i;const p=Ue.V.logfunction("validateField");try{performance.now();const w={},{name:k,value:F,type:P,dataType:x,pattern:y,conceptType:u,maxLength:U,minLength:j,minValue:J,maxValue:q,accept:de,file:Ne,required:Ve,isUnique:tt}=d;if(console.log("Validation is happening on : \n",d),!Ve||null!==F&&""!==F||(w.required=`The field ${k} is required.`),x&&F){let De=Ss[x];De&&""!==F&&!De.test(F)&&(w.dataType=`Invalid value for ${x}`)}if(y&&F){const De="string"==typeof y?new RegExp(y):y;""===F||De.test(F)||(w.pattern="Pattern doesn't match with value")}if(F&&null!=U&&F.length>U&&(w.maxLength=`Length exceeds the maximum length of ${U}`),F&&null!=j&&F.length<j&&(w.minLength=`Length must be at least ${j} characters long`),null!=J&&F&&!isNaN(Number(F))&&Number(F)<J&&(w.minValue=`Value must be greater than or equal to ${J}`),null!=q&&F&&!isNaN(Number(F))&&Number(F)>q&&(w.maxValue=`Value must be less than or equal to ${q}`),Ne&&P&&de){const De=de.split(",").map(Lt=>Lt.trim().toLowerCase()),ot=null===(i=Ne.name.split(".").pop())||void 0===i?void 0:i.toLowerCase();ot&&!De.includes(ot)&&(w.accept=`File must be a valid file type: ${De.join(", ")}`)}return u&&tt&&F&&((yield this.checkUniqueness(u,F))||(w.unique="Value is not unique")),Ue.V.logUpdate(p),console.log("Before Validation Result : ",w),w}catch(w){throw(0,o.ey)(p,"Validator.validateField",w),w}})}validateForm(d){return Qi(this,void 0,void 0,function*(){const i=Ue.V.logfunction("validateForm");try{performance.now();const p={};for(const w in d){const k=yield this.validateField(d[w]);Object.keys(k).length>0&&(p[w]=k)}return Ue.V.logUpdate(i),p}catch(p){throw(0,o.ey)(i,"Validator.validateForm",p),p}})}validate(d){const i=Ue.V.logfunction("validate");try{let p={};return this.validateField(d).then(w=>{Object.keys(w).length>0?(p.status=!1,p.details=w):p.status=!0}),console.error("Error on validate object"),Ue.V.logUpdate(i),p}catch(p){(0,o.ey)(i,"Validator.validate",p)}}}const Ls=D=>{var d;const i=document.getElementsByName(D)[0];if(!i)return console.warn(`Element with NAME "${D}" not found.`),{name:null,value:null,type:null,dataType:null,pattern:null,conceptType:null,maxLength:null,minLength:null,minValue:null,maxValue:null,accept:null,file:null,required:!1,isUnique:!0};const p=i.hasAttribute("required")||"true"===i.getAttribute("data-required"),w=i.hasAttribute("isUnique")&&"true"===i.getAttribute("isUnique");return{name:i.name,value:i.value,type:i.type,dataType:i.getAttribute("data-type"),pattern:i.getAttribute("data-pattern"),conceptType:i.getAttribute("concept-type"),maxLength:i.getAttribute("maxlength")?parseInt(i.getAttribute("maxlength")):null,minLength:i.getAttribute("minlength")?parseInt(i.getAttribute("minlength")):null,minValue:i.getAttribute("min")?parseInt(i.getAttribute("min")):null,maxValue:i.getAttribute("max")?parseInt(i.getAttribute("max")):null,accept:i.getAttribute("accept")||null,file:"file"===i.type&&(null===(d=i.files)||void 0===d?void 0:d[0])||null,required:p,isUnique:w}};var Mo=g(2289);class Vn{constructor(){this.type="",this.inpage=10,this.page=1,this.concepts=[],this.conceptIds=[],this.selectors=[],this.freeschemaQueries=[],this.filters=[],this.filterLogic="",this.typeConnection="",this.order="DESC",this.outputFormat=Vt.yv,this.name="",this.filterAncestor="",this.reverse=!1,this.limit=!1,this.isSecure=!1,this.includeInFilter=!1,this.isOldConnectionType=!1}}var Ad=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function vi(D){var d=arguments;return Ad(this,arguments,void 0,function*(i,p=""){const w=Ue.V.logfunction("FreeschemaQueryApi",d);var k=(0,e.ab)("application/json",p);const F=r.B.FreeschemaQueryUrl(),P=JSON.stringify(i);try{const x=yield fetch(F,{method:"POST",headers:k,body:P});return x.ok?yield x.json():((0,o.ry)(x),console.log("This is the freeschema query error",x.status),[])}catch(x){console.log("This is the freeschema query error others",x),(0,o.Mb)(x,F),(0,o.ey)(w,"FreeschemaQueryApi",x)}})}var Yi=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class Ns extends ho.w{constructor(d,i){super(),this.query=new Vn,this.countInfoStrings=[],this.order="DESC",this.totalCount=0,this.query=d,this.format=d.outputFormat,this.order=d.order}run(){return Yi(this,void 0,void 0,function*(){var d,i;try{this.query.outputFormat=Vt.BG,this.compositionIds=[];let p=yield vi(this.query,"");return this.conceptIds=p.conceptIds,this.internalConnections=null!==(d=p.internalConnections)&&void 0!==d?d:[],this.linkers=null!==(i=p.linkers)&&void 0!==i?i:[],this.reverse=p.reverse,this.compositionIds=p.mainCompositionIds,this.totalCount=p.mainCount,this.countInfoStrings=p.countinfo,yield this.build()}catch(p){throw console.error("Error in SchemaQueryObservable.run():",p),p}})}bind(){return Yi(this,void 0,void 0,function*(){var d,i;try{if(this.compositionIds.length>0)for(let w=0;w<this.compositionIds.length;w++)this.removeListenToEvent(this.compositionIds[w]);if(this.isDataLoaded)for(let w=0;w<this.compositionIds.length;w++)this.listenToEvent(this.compositionIds[w]);else{this.query.outputFormat=Vt.BG,this.compositionIds=[];let w=yield vi(this.query,"");this.conceptIds=w.conceptIds,this.internalConnections=null!==(d=w.internalConnections)&&void 0!==d?d:[],this.linkers=null!==(i=w.linkers)&&void 0!==i?i:[],this.reverse=w.reverse,this.compositionIds=w.mainCompositionIds,this.totalCount=w.mainCount,this.countInfoStrings=w.countinfo}let p=yield this.build();if(!this.isDataLoaded){this.isDataLoaded=!0;for(let w=0;w<this.compositionIds.length;w++)this.listenToEvent(this.compositionIds[w]);if(""!=this.query.type){let w=yield cn(this.query.type,999);w.id>0&&this.listenToEventType(w.id)}}for(let w=0;w<this.newIds.length;w++)this.listenToEvent(this.newIds[w]);return this.newIds=[],p}catch(p){throw console.error("Error in SchemaQueryObservable.bind():",p),p}})}build(){return Yi(this,void 0,void 0,function*(){try{Ue.V.logfunction("build",["schemaquery",this.compositionIds]);let d=(0,zi.w)(this.countInfoStrings);return this.format==Vt.y0?this.data=yield(0,po.e$)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,d,this.order):this.format==Vt.ZJ?this.data=yield(0,po.y6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,d,this.order):this.format==Vt.pU?this.data=yield(0,po.rq)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,d,this.order):this.format==Vt.XZ?(console.log("this is the raw format"),this.data={},this.data.linkers=this.linkers,this.data.conceptIds=this.conceptIds,this.data.compositionIds=this.compositionIds,this.data.reverse=this.reverse,this.data.countInfos=d,this.data.order=this.order):this.data=yield(0,po.b6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,d),this.data}catch(d){throw console.error("Error in SchemaQueryObservable.build():",d),d}})}}function Ro(D,d){return new Ns(D,d)}function xs(D,d){return new Ns(D,d).execute()}class Ki{constructor(){this.id=0,this.name="",this.html="",this.css="",this.js="",this.library={css:[],js:[]},this.assistant={id:"",input:"",type:""},this.timestamp="",this.widgetId=0,this.type="",this.clean="",this.after_render="",this.before_render="",this.custom_functions=[],this.update="",this.origin=0,this.version=0,this.mount_child="",this.children=[],this.wrapper="0",this.widget=new Zo,this.dependency="",this.root=0}}var Ld=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Xi(D,d,i){return Ld(this,arguments,void 0,function*(p,w,k,F={concepts:[],connections:[]}){var P,x,y,u,U;const j=Ue.V.logfunction("CreateConnectionBetweenEntityLocal",[p.id,w.id,k]);if(Dt)try{const Ne=yield Yt("CreateConnectionBetweenEntityLocal",{concept1Data:p,concept2Data:w,linker:k,actions:F});return!(null===(x=null===(P=Ne?.actions)||void 0===P?void 0:P.concepts)||void 0===x)&&x.length&&(F.concepts=JSON.parse(JSON.stringify(Ne.actions.concepts))),!(null===(u=null===(y=Ne?.actions)||void 0===y?void 0:y.connections)||void 0===u)&&u.length&&(F.connections=JSON.parse(JSON.stringify(Ne.actions.connections))),Ne.data}catch(Ne){console.log("CreateConnectionBetweenEntityLocal error sw: ",Ne),rn(Ne)}const J=p.userId,q=(null===(U=p.type)||void 0===U?void 0:U.characterValue)+"_"+k,de=yield(0,bt.$)(q,999,999,J,F);console.log(yield(0,no.F)(p.id,w.id,de.id,1e3,void 0,void 0,F)),Ue.V.logUpdate(j)})}var oo=g(4310);function er(D){for(;D.firstChild;)D.removeChild(D.firstChild)}var Es=g(490),Fs=g(276);function Os(D,d,i){const w={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:tn.b.sessionId||"unknown",description:d};Ue.V.logApplication("USER_EVENT",D,w)}class Ds extends gi{constructor(d,i,p,w="",k=10){super(),this.inpage=10,this.selector=i,this.mainType=d,this.filterType=w,this.inpage=k,this.parentDomElement=p,this.mount(this.parentDomElement)}before_render(){this.render()}addFilter(d){if(""!=d){let i=new yi;i.search=d,i.type=this.filterType,i.logicoperator="like",i.operateon="selector",i.name="selector_filter";let p="( selector_filter )";this.query.filters=[i],this.query.filterLogic=p}else this.query.filters=[],this.query.filterLogic="";console.log("this is the filters",this.query)}after_render(){let d=this.getElementById("selector"),i=this.getElementById("search-bar"),p=this;i.onchange=()=>{p.addFilter(i.value),p.mainDetails.update()};let w=new Vn;w.type=this.mainType,w.inpage=this.inpage;let k=new Vn;k.typeConnection=this.selector,k.name="selector",w.freeschemaQueries=[k],this.query=w,Ro(this.query,"").subscribe((F,P)=>{let x={};this.mainDetails=P;for(let y=0;y<F.length;y++){let u=F[y],U=u.id,j=u[this.mainType];if(console.log("this is the selected data myItem",j,F[y],this.mainType,u),j){let J=j[this.selector];if(J){const q=Object.values(J)[0];x[U]=q}}}er(d);for(const[y,u]of Object.entries(x)){const U=document.createElement("option");U.value=y,U.textContent=u,d.appendChild(U)}console.log("this is the output from selector",F)})}getHtml(){const d=document.createElement("style");return d.textContent="\n.search-select-wrapper {\n  width: 300px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  font-family: Arial, sans-serif;\n}\n\n#search-bar {\n  padding: 8px;\n  font-size: 14px;\n  border: 1px solid #ccc;\n  border-radius: 6px;\n}\n\n#selector {\n  padding: 6px;\n  font-size: 14px;\n  border: 1px solid #ccc;\n  border-radius: 6px;\n}\n",document.head.prepend(d),this.html='\n        <div class="search-select-wrapper">\n        <input type="text" placeholder="Select or type..." id=\'search-bar\'>\n        <select id=\'selector\'>\n        </div>',this.html}}const Bs='\n/* CKEditor content styles */\n.ck-content {\n  /* Container styles */\n  max-width: 100%;\n  margin: 0 auto;\n  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;\n  line-height: 1.5;\n  padding: 0.75rem;\n  background: #fff;\n  color: #333;\n  border: 1px solid #ccced1;\n}\n\n/* Headings */\n.ck-content h1, .ck-content h2, .ck-content h3, \n.ck-content h4, .ck-content h5, .ck-content h6 {\n  font-weight: 700;\n  line-height: 1.2;\n  margin: 1em 0 0.5em;\n}\n\n.ck-content h1 { font-size: 2.5em; }\n.ck-content h2 { font-size: 2em; }\n.ck-content h3 { font-size: 1.75em; }\n.ck-content h4 { font-size: 1.5em; }\n.ck-content h5 { font-size: 1.25em; }\n.ck-content h6 { font-size: 1em; }\n\n/* Paragraphs and spacing */\n.ck-content p {\n  margin: 1em 0;\n  line-height: 1.6;\n}\n\n/* Links */\n.ck-content a {\n  color: #1a73e8;\n  text-decoration: none;\n}\n\n.ck-content a:hover {\n  text-decoration: underline;\n}\n\n/* Lists */\n.ck-content ul,\n.ck-content ol {\n  padding-left: 2em;\n  margin: 1em 0;\n}\n\n.ck-content ul {\n  list-style: disc;\n}\n\n.ck-content ol {\n  list-style: decimal;\n}\n\n.ck-content li {\n  margin: 0.5em 0;\n}\n\n/* Blockquotes */\n.ck-content blockquote {\n  margin: 1em 0;\n  padding-left: 1em;\n  border-left: 5px solid #ccc;\n  font-style: italic;\n  color: #666;\n}\n\n/* Code blocks */\n.ck-content pre {\n  background: #f5f5f5;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  padding: 1em;\n  margin: 1em 0;\n  overflow-x: auto;\n  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;\n}\n\n.ck-content code {\n  background: #f5f5f5;\n  padding: 0.2em 0.4em;\n  border-radius: 3px;\n  font-size: 0.9em;\n  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;\n}\n\n/* Tables */\n.ck-content table {\n  border-collapse: collapse;\n  width: 100%;\n  margin: 1em 0;\n}\n\n.ck-content table th,\n.ck-content table td {\n  border: 1px solid #ddd;\n  padding: 0.75em;\n  text-align: left;\n}\n\n.ck-content table th {\n  background: #f5f5f5;\n  font-weight: bold;\n}\n\n/* Images */\n.ck-content img {\n  max-width: 100%;\n  height: auto;\n  margin: 1em 0;\n}\n\n.ck-content figure {\n  margin: 1em 0;\n  text-align: center;\n}\n\n.ck-content figure img {\n  margin: 0;\n}\n\n.ck-content figcaption {\n  color: #666;\n  font-size: 0.9em;\n  margin-top: 0.5em;\n}\n\n/* Dark mode */\n/*\n@media (prefers-color-scheme: dark) {\n  .ck-content {\n    background: #1a1a1a;\n    color: #e0e0e0;\n  }\n\n  .ck-content a {\n    color: #64b5f6;\n  }\n\n  .ck-content blockquote {\n    border-left-color: #404040;\n    color: #b0b0b0;\n  }\n\n  .ck-content pre,\n  .ck-content code {\n    background: #2d2d2d;\n    border-color: #404040;\n  }\n\n  .ck-content table th,\n  .ck-content table td {\n    border-color: #404040;\n  }\n\n  .ck-content table th {\n    background: #2d2d2d;\n  }\n\n  .ck-content figcaption {\n    color: #b0b0b0;\n  }\n}\n*/\n\n/* CUSTOM DOCUMENTATION CSS */\n\n#documentation-preview {\n  border: 1px solid #ccc;\n  padding: 1rem;\n}\n\n#documentation-preview h3 {\n  font-size: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.pre-wrapper {\n  background: #f2f5f9;\n  border: 1px solid #cecece;\n  display: block;\n  padding: 1rem;\n  border-radius: 0.25rem;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n\n.pre-wrapper pre {\n  margin: 0;\n  color: #e87aa2;\n}\n\n.widget-doc-section pre {\n  background-color: transparent;\n}\n\n.widget-doc-section p {\n  margin: 0;\n}\n\n.widget-doc-section code {\n  color: #e87aa2;\n  font-size: 0.875rem;\n}\n\n.mv-3 {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n\n.pv-3 {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n}\n\n  .widget-documentation-heading {\n    background-color: #6e757d;\n    color: #eee;\n    font-size: 1.5rem;\n    padding: 0.5rem 1rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .widget-documentation-heading h4 {\n    margin-bottom: 0;\n  }\n\n  .close-documentation-button {\n    border: none;\n    outline: none;\n    background-color: transparent;\n    line-height: 0;\n    margin: 0;\n    padding: 0;\n    cursor: pointer;\n  }\n\n  .close-documentation-button:hover,\n  .close-documentation-button:focus  {\n    background-color: transparent;\n  }\n\n  .documentation-creator {\n    text-align: right;\n    color: #666;\n    margin: 0;\n    padding-top: 0.5rem;\n    padding-bottom: 0.5rem;\n  }\n\n  .documentation-creator span {\n    font-style: italic;\n  }\n\n  .documentation-attachments {\n    display: flex;\n    flex-wrap: wrap;\n  }\n\n  .documentation-attachments img {\n    width: 25%;\n    height: auto;\n    border: 1px solid #ccc;\n    padding: 0.25rem;\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  .documentation-attachments iframe {\n    width: 50%;\n    border: 1px solid #ccc;\n    padding: 0.25rem;\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  .widget-documentation-footer {\n    text-align: right;\n    margin-top: 1rem;\n  }\n\n  .widget-documentation-footer button {\n    border-radius: 0;\n    border: none;\n    padding: 0.5rem 1.5rem;\n    text-align: center;\n    background: #6e757d;\n    color: #eee;\n  }\n\n  #widget-details {\n    position: absolute;\n    right: 0px;\n    top: 0px;\n    z-index: 9999;\n  }\n\n  #widget-details button {\n    background: #fff;\n    border: 1px solid #ccc;\n    border-radius: 0 0 0 0.25rem;\n    height: auto;\n    width: auto;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    gap: 0.25rem;\n  }\n\n  #widget-details button:hover, \n  #widget-details button:focus {\n    opacity: 0.75;\n  }\n\n  #widget-details button span {\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  #widget-details button svg {\n    pointer-events: none;\n    width: 16px;\n    height: 16px;\n    fill: #999;\n  }\n\n  #widget-documentation-preview-modal {\n    border: none;\n  }\n\n  @media (min-width: 768px) {\n    #widget-documentation-preview-modal {\n      flex: 0 0 auto;\n      width: 66.66666667%;\n    }\n  }\n\n',fo={PAGE_COMP_NAME:"page",WIDGET_COMP_NAME:"widget",PROJECT_COMP_NAME:"project"};var Ps=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};class un{static get(d,i){return Ps(this,void 0,void 0,function*(){if(un.cache.has(d))return un.cache.get(d);if(un.promises.has(d))return un.promises.get(d);const p=i().then(w=>(un.cache.set(d,w),un.promises.delete(d),w)).catch(w=>{throw un.promises.delete(d),w});return un.promises.set(d,p),p})}static has(d){return un.cache.has(d)}static peek(d){return un.cache.get(d)}static invalidate(d){un.cache.delete(d),un.promises.delete(d)}static clear(){un.cache.clear(),un.promises.clear()}static set(d,i){return Ps(this,void 0,void 0,function*(){return un.promises.delete(d),un.cache.set(d,i),i})}static stats(){return{cacheSize:un.cache.size,pendingRequests:un.promises.size,keys:Array.from(un.cache.keys())}}}un.cache=new Map,un.promises=new Map;const Nd=g(2895);var xd=g(2110),Ed=g.n(xd),Fd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Us(D){return Fd(this,void 0,void 0,function*(){try{return(yield Nd([Ed()()]).process(D,{from:void 0})).css}catch(d){return console.error("Error processing CSS:",d),null}})}var Ms=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Qo(D){const d=document.getElementById("fspage-properties");if(!d)return;let i=d?.textContent;i=i?i.replace(new RegExp(D,"g"),""):"",d.textContent=i}function Rs(D,d){let i=document.querySelector(`meta[name="${D}"]`);i||(i=document.createElement("meta"),i.setAttribute("name",D),document.head.appendChild(i)),i.setAttribute("content",d)}var Gs=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function mi(D){return Gs(this,void 0,void 0,function*(){var d,i,p,w;!(null===(i=null===(d=D?.library)||void 0===d?void 0:d.css)||void 0===i)&&i.length&&function(k){var F;const P=null===(F=k?.library)||void 0===F?void 0:F.css,x=`vde-css-${k?.origin?k?.origin:k?.widgetId}`;(function(y){const U=document.querySelectorAll(`link.${y}`);U?.length&&U?.forEach(j=>{j.remove()})})(x),P?.length&&P?.sort((y,u)=>Number(y?.order)-Number(u?.order)),P?.forEach(y=>{const u=document.createElement("link");u.classList.add(x),u.setAttribute("rel","stylesheet"),u.setAttribute("href",y.url),document.head.appendChild(u)})}(D),null!==(w=null===(p=D?.library)||void 0===p?void 0:p.js)&&void 0!==w&&w.length&&(yield function(k){return Gs(this,void 0,void 0,function*(){var F;const P=null===(F=k?.library)||void 0===F?void 0:F.js,x=`vde-js-${k?.origin?k?.origin:k?.widgetId}`;if(function(y){const U=document.querySelectorAll(`script.${y}`);U?.length&&U?.forEach(j=>{j.remove()})}(x),P?.length){P.sort((y,u)=>Number(y?.order)-Number(u?.order));for(const y of P)y?.url?document.querySelector(`script[src="${y.url}"]`)?console.log("Library already loaded:",y.url):yield new Promise((u,U)=>{const j=document.createElement("script");j.classList.add(x),j.setAttribute("type","text/javascript"),j.setAttribute("src",y.url),j.setAttribute("crossorigin","anonymous"),j.onload=()=>{u()},j.onerror=J=>{console.error("Failed to load script:",y.url,J),U(new Error(`Failed to load script: ${y.url}`))},document.head.appendChild(j)}):console.warn("Skipping library with invalid URL:",y);console.log("All JavaScript libraries loaded successfully")}})}(D))})}var Cn=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function Ws(D,d,i,p){return Cn(this,void 0,void 0,function*(){var w;const k=yield Mi(D,"the_page_body"),F=new Vn;F.conceptIds=[D],F.inpage=100,F.outputFormat=Vt.y0,F.selectors=["the_page_body","the_page_title","the_page_slug","the_page_font_family","the_page_font_size","the_page_width","the_page_type","the_page_meta_title","the_page_meta_description","the_page_meta_keywords"],Ro(F,"").subscribe(x=>Cn(this,void 0,void 0,function*(){var y,u;yield function(U){return Ms(this,void 0,void 0,function*(){var j,J,q,de,Ne,Ve,tt,De,ot,Lt,qt,Mt,lt,ln;[{key:"meta_title",value:null===(J=null===(j=U?.[`the_${fo.PAGE_COMP_NAME}_meta_title`])||void 0===j?void 0:j.data)||void 0===J?void 0:J.the_meta_title},{key:"meta_description",value:null===(de=null===(q=U?.[`the_${fo.PAGE_COMP_NAME}_meta_description`])||void 0===q?void 0:q.data)||void 0===de?void 0:de.the_meta_description},{key:"meta_keywords",value:null===(Ve=null===(Ne=U?.[`the_${fo.PAGE_COMP_NAME}_meta_keywords`])||void 0===Ne?void 0:Ne.data)||void 0===Ve?void 0:Ve.the_meta_keywords},{key:"width",value:null===(De=null===(tt=U?.[`the_${fo.PAGE_COMP_NAME}_width`])||void 0===tt?void 0:tt.data)||void 0===De?void 0:De.the_width},{key:"font_size",value:null===(Lt=null===(ot=U?.[`the_${fo.PAGE_COMP_NAME}_font_size`])||void 0===ot?void 0:ot.data)||void 0===Lt?void 0:Lt.the_font_size},{key:"font_family",value:null===(Mt=null===(qt=U?.[`the_${fo.PAGE_COMP_NAME}_font_family`])||void 0===qt?void 0:qt.data)||void 0===Mt?void 0:Mt.the_font_family},{key:"type",value:null===(ln=null===(lt=U?.[`the_${fo.PAGE_COMP_NAME}_type`])||void 0===lt?void 0:lt.data)||void 0===ln?void 0:ln.the_type}].forEach(In=>{In.value&&function(Dn,gn){Ms(this,void 0,void 0,function*(){const $n=document.getElementById("fspage-properties")||function(){const Bn=document.createElement("style");return Bn.id="fspage-properties",document.head.appendChild(Bn),Bn}();let wn="";switch(Dn){case"width":Qo(".fspage { width: [^;]+ !important; }"),wn=gn?`.fspage { width: ${gn} !important; }`:"";break;case"font_size":Qo(".fspage { font-size: [^;]+; }"),wn=gn?`.fspage { font-size: ${gn}px; }`:"";break;case"font_family":Qo(".fspage { font-family: [^;]+; }"),wn=gn?`.fspage { font-family: ${gn}; }`:"";break;case"type":Qo(".fspage { width: 1200px; margin: 0 auto; }"),Qo(".fspage { width: 100%; padding: 0; }"),wn="fixed"===gn?".fspage { width: 1200px; margin: 0 auto; }":"fluid"===gn?".fspage { width: 100%; padding: 0; }":"";break;case"meta_title":document.title=gn;break;case"meta_keywords":Rs(Dn.replace("meta_",""),gn);break;case"meta_description":return void Rs(Dn.replace("meta_",""),gn)}$n.textContent+=wn})}(In.key,In.value)})})}(null===(u=null===(y=x?.[0])||void 0===y?void 0:y.data)||void 0===u?void 0:u[`the_${fo.PAGE_COMP_NAME}`])})),document.getElementById("app").classList.add("fspage");const P=document.head.querySelectorAll("style#mystyleid");Array.from(P).forEach(x=>x.remove()),null!==(w=k?.[0])&&void 0!==w&&w.id?yield Ci(k[0].id,d,i,p):d.innerHTML="<h4>Invalid or Page doesn't exist</h4>"})}function js(D,d,i,p){return Cn(this,void 0,void 0,function*(){try{let w=yield(0,oo.qj)(D),k=w.mainId,F=w.data;const P=yield _i(F,k),x=yield ko(k,[],P);return un.cache.set(`wdgt_${k}`,x),console.log("DataCache after, widgetTree --\x3e",un.cache,x),x}catch(w){console.error(`Error Caught Rendering Widget: ${w}`)}})}function Vs(D,d,i,p){return Cn(this,void 0,void 0,function*(){try{let w=yield(0,oo.ml)(D),k=w.mainId,F=w.data;const P=yield _i(F,k);return yield ko(k,[],P)}catch(w){console.error(`Error Caught Rendering Widget: ${w}`)}})}function $s(D,d,i,p){return Cn(this,void 0,void 0,function*(){let w=(yield(0,oo.qj)(D)).mainId;console.log("renderImportedWidget latestWidgetId, DataCache.cache --\x3e",w,un.cache);const k=un.cache.get(`wdgt_${w}`);if(console.log("renderImportedWidget widgetTree --\x3e",k),!k.name)return void(d.innerHTML="<h4>Invalid or Widget doesn't exist</h4>");const F=d;yield mi(k);const P=yield Yo(k,F,void 0,i),x=Array.from({length:32},()=>"abcdef"[Math.floor(6*Math.random())]).join("");d.classList.add(`${x}`),d.style.position="relative";const y=document.createElement("style");y.id="mystyleid",y.classList.add("mftsccs-css");const u=`\n        .${x} {\n          ${k.css+P.css+Bs} \n        }\n      `,U=(yield Us(u))||"";if(y.innerHTML=U,document.head.appendChild(y),k.children.length&&k?.children.forEach(j=>{var J;const q=j?.library;(null!==(J=q?.css)&&void 0!==J&&J.length||q?.js.length)&&mi(j)}),p){const j=document.createElement("div");j.id="widget-details",j.innerHTML="",j.innerHTML=`\n        <button class="widget-documentation-btn" widget-id="${k?.origin||k?.widgetId}" class="d-flex align-items-center gap-1" title="Documentation">\n          <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 441 512.02"><path d="M324.87 279.77c32.01 0 61.01 13.01 82.03 34.02 21.09 21 34.1 50.05 34.1 82.1 0 32.06-13.01 61.11-34.02 82.11l-1.32 1.22c-20.92 20.29-49.41 32.8-80.79 32.8-32.06 0-61.1-13.01-82.1-34.02-21.01-21-34.02-50.05-34.02-82.11s13.01-61.1 34.02-82.1c21-21.01 50.04-34.02 82.1-34.02zM243.11 38.08v54.18c.99 12.93 5.5 23.09 13.42 29.85 8.2 7.01 20.46 10.94 36.69 11.23l37.92-.04-88.03-95.22zm91.21 120.49-41.3-.04c-22.49-.35-40.21-6.4-52.9-17.24-13.23-11.31-20.68-27.35-22.19-47.23l-.11-1.74V25.29H62.87c-10.34 0-19.75 4.23-26.55 11.03-6.8 6.8-11.03 16.21-11.03 26.55v336.49c0 10.3 4.25 19.71 11.06 26.52 6.8 6.8 16.22 11.05 26.52 11.05h119.41c2.54 8.79 5.87 17.25 9.92 25.29H62.87c-17.28 0-33.02-7.08-44.41-18.46C7.08 432.37 0 416.64 0 399.36V62.87c0-17.26 7.08-32.98 18.45-44.36C29.89 7.08 45.61 0 62.87 0h173.88c4.11 0 7.76 1.96 10.07 5l109.39 118.34c2.24 2.43 3.34 5.49 3.34 8.55l.03 119.72c-8.18-1.97-16.62-3.25-25.26-3.79v-89.25zm-229.76 54.49c-6.98 0-12.64-5.66-12.64-12.64 0-6.99 5.66-12.65 12.64-12.65h150.49c6.98 0 12.65 5.66 12.65 12.65 0 6.98-5.67 12.64-12.65 12.64H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h142.52c3.71 0 7.05 1.6 9.37 4.15a149.03 149.03 0 0 0-30.54 21.14H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h86.2c-3.82 8.05-6.95 16.51-9.29 25.29h-76.91zm239.61-18.85c7.41 7.43 4.68 18.9-3.05 25.23-7.46 6.01-20.97 8.92-28.68 1.83-7.77-7.23-4.68-18.87 2.76-25.24 7.18-6.05 21.39-9.37 28.97-1.82zm-43.88 95h6.34v-41.33H294.6c0-16.37 30.05-5.74 52.18-11.32v52.65h8.37v17.58h-54.86v-17.58z"/></svg>\n        </button>\n      `,F.appendChild(j);const J=document.createElement("dialog");J.id="widget-documentation-preview-modal",J.className="col-md-8",J.innerHTML="",J.innerHTML='\n        <div class="widget-documentation-heading">\n          <h4>Documentation</h4>\n          <button class="close-documentation-button document-preview-close-button" title="Close">\n            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>\n          </button>\n        </div>\n\n        <div id="documentation-view" class="ck-content"></div>\n\n        <div class="widget-documentation-footer">\n          <button class="document-preview-close-button">Close</button>\n        </div>\n      ',F.appendChild(J),F.querySelectorAll(".widget-documentation-btn")?.forEach(Ne=>{Ne.addEventListener("click",Ve=>{const tt=Ve?.target;Ys(tt?.getAttribute("widget-id"))})}),F.querySelectorAll(".document-preview-close-button")?.forEach(Ne=>{Ne.addEventListener("click",()=>{Ks("widget-documentation-preview-modal")})})}return F.querySelectorAll(".wb-initial-empty").forEach(j=>{j.classList.remove("wb-initial-empty")}),document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(j=>{j.removeAttribute("onclick")}),P})}function Ci(D,d,i,p){return Cn(this,void 0,void 0,function*(){try{let w=yield(0,oo.qj)(D),k=w.mainId,F=w.data;const P=yield _i(F,k);return yield qs(k,P,d,i,p)}catch(w){console.error(`Error Caught Rendering Widget: ${w}`),d.textContent=`Error: ${w.message}`}})}function Hs(D,d,i,p){return Cn(this,void 0,void 0,function*(){try{const w=yield(0,oo.Cp)(D);return yield qs(D,w,d,i,p)}catch(w){console.error(`Error Caught Rendering Widget: ${w}`)}})}function qs(D,d,i,p){return Cn(this,arguments,void 0,function*(w,k,F,P,x=!0){const y=yield ko(w,[],k);if(!y.name)return void(F.innerHTML="<h4>Invalid or Widget doesn't exist</h4>");const u=F;yield mi(y);const U=yield Yo(y,u,void 0,P),j=Array.from({length:32},()=>"abcdef"[Math.floor(6*Math.random())]).join("");F.classList.add(`${j}`),F.style.position="relative";const J=document.createElement("style");J.id="mystyleid",J.classList.add("mftsccs-css");const q=`\n        .${j} {\n          ${y.css+U.css+Bs} \n        }\n      `,de=(yield Us(q))||"";J.innerHTML=de,y.children.length&&y?.children.forEach(Ve=>{var tt;const De=Ve?.library;(null!==(tt=De?.css)&&void 0!==tt&&tt.length||De?.js.length)&&mi(Ve)}),document.head.appendChild(J);const Ne=document.createElement("script");if(Ne.innerHTML=y.js,u.appendChild(Ne),x){const Ve=document.createElement("div");Ve.id="widget-details",Ve.innerHTML="",Ve.innerHTML=`\n        <button class="widget-documentation-btn" widget-id="${y?.origin||y?.widgetId}" class="d-flex align-items-center gap-1" title="Documentation">\n          <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 441 512.02"><path d="M324.87 279.77c32.01 0 61.01 13.01 82.03 34.02 21.09 21 34.1 50.05 34.1 82.1 0 32.06-13.01 61.11-34.02 82.11l-1.32 1.22c-20.92 20.29-49.41 32.8-80.79 32.8-32.06 0-61.1-13.01-82.1-34.02-21.01-21-34.02-50.05-34.02-82.11s13.01-61.1 34.02-82.1c21-21.01 50.04-34.02 82.1-34.02zM243.11 38.08v54.18c.99 12.93 5.5 23.09 13.42 29.85 8.2 7.01 20.46 10.94 36.69 11.23l37.92-.04-88.03-95.22zm91.21 120.49-41.3-.04c-22.49-.35-40.21-6.4-52.9-17.24-13.23-11.31-20.68-27.35-22.19-47.23l-.11-1.74V25.29H62.87c-10.34 0-19.75 4.23-26.55 11.03-6.8 6.8-11.03 16.21-11.03 26.55v336.49c0 10.3 4.25 19.71 11.06 26.52 6.8 6.8 16.22 11.05 26.52 11.05h119.41c2.54 8.79 5.87 17.25 9.92 25.29H62.87c-17.28 0-33.02-7.08-44.41-18.46C7.08 432.37 0 416.64 0 399.36V62.87c0-17.26 7.08-32.98 18.45-44.36C29.89 7.08 45.61 0 62.87 0h173.88c4.11 0 7.76 1.96 10.07 5l109.39 118.34c2.24 2.43 3.34 5.49 3.34 8.55l.03 119.72c-8.18-1.97-16.62-3.25-25.26-3.79v-89.25zm-229.76 54.49c-6.98 0-12.64-5.66-12.64-12.64 0-6.99 5.66-12.65 12.64-12.65h150.49c6.98 0 12.65 5.66 12.65 12.65 0 6.98-5.67 12.64-12.65 12.64H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h142.52c3.71 0 7.05 1.6 9.37 4.15a149.03 149.03 0 0 0-30.54 21.14H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h86.2c-3.82 8.05-6.95 16.51-9.29 25.29h-76.91zm239.61-18.85c7.41 7.43 4.68 18.9-3.05 25.23-7.46 6.01-20.97 8.92-28.68 1.83-7.77-7.23-4.68-18.87 2.76-25.24 7.18-6.05 21.39-9.37 28.97-1.82zm-43.88 95h6.34v-41.33H294.6c0-16.37 30.05-5.74 52.18-11.32v52.65h8.37v17.58h-54.86v-17.58z"/></svg>\n        </button>\n      `,u.appendChild(Ve);const tt=document.createElement("dialog");tt.id="widget-documentation-preview-modal",tt.className="col-md-8",tt.innerHTML="",tt.innerHTML='\n        <div class="widget-documentation-heading">\n          <h4>Documentation</h4>\n          <button class="close-documentation-button document-preview-close-button" title="Close">\n            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>\n          </button>\n        </div>\n\n        \x3c!-- <div id="documentation-preview" class="ck-content"></div> --\x3e\n        <div id="documentation-view" class="ck-content"></div>\n\n        <div class="widget-documentation-footer">\n          <button class="document-preview-close-button">Close</button>\n        </div>\n      ',u.appendChild(tt),u.querySelectorAll(".widget-documentation-btn")?.forEach(Lt=>{Lt.addEventListener("click",qt=>{const Mt=qt?.target;Ys(Mt?.getAttribute("widget-id"))})}),u.querySelectorAll(".document-preview-close-button")?.forEach(Lt=>{Lt.addEventListener("click",()=>{Ks("widget-documentation-preview-modal")})})}return u.querySelectorAll(".wb-initial-empty").forEach(Ve=>{Ve.classList.remove("wb-initial-empty")}),document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(Ve=>{Ve.removeAttribute("onclick")}),U})}function zs(D,d){return Cn(this,void 0,void 0,function*(){var i,p,w,k,F,P,x,y,u,U,j;const J=null===(p=null===(i=D?.data)||void 0===i?void 0:i.the_widget)||void 0===p?void 0:p.the_widget_s_child;if(d.push(D),J&&J.length)for(let q=0;q<J.length;q++){const de=J[q];let Ne=null===(x=null===(P=null===(F=null===(k=null===(w=de?.data.the_child_widget)||void 0===w?void 0:w.the_child_widget_info)||void 0===k?void 0:k.data)||void 0===F?void 0:F.the_widget)||void 0===P?void 0:P.the_widget_root)||void 0===x?void 0:x.id;const Ve=!(null===(U=null===(u=null===(y=de?.data)||void 0===y?void 0:y.the_child_widget)||void 0===u?void 0:u.the_child_widget_use_latest)||void 0===U||!U.data);Ne=Number(Ne)||!1;let tt=null;Ve&&Ne&&(tt=(null===(j=(yield(0,oo.qj)(Ne))?.data)||void 0===j?void 0:j[0])||[],tt.useLatest=!0,de.data.the_child_widget.the_child_widget_info=tt),de.data.the_child_widget.the_child_widget_info.sChildId=de.id,yield zs(de.data.the_child_widget.the_child_widget_info,d)}})}function _i(D,d){return Cn(this,void 0,void 0,function*(){const i=[],p=[...D];try{const w=p.find(k=>k.id===d);yield zs(w,i)}catch(w){console.error("convert to real bulk error",w)}return i})}function Js(D){return Cn(this,arguments,void 0,function*(d,i=[],p=""){let w=yield(0,oo.Cp)(d);const k=yield _i(w,d);return yield ko(d,[],k)})}function ko(D){return Cn(this,arguments,void 0,function*(d,i=[],p,w=""){var k,F,P,x,y,u,U,j,J,q,de,Ne,Ve,tt,De,ot,Lt,qt,Mt,lt,ln,In,Dn,gn,$n,wn,Bn,En,Zn,Qn,Yn,Kn,ao,co,lo,kn,Hn,Gn,Pn,qn,Ao,Lo,No,xo,Eo,Fo,Oo,Do,$t,yo,Xo,ei,ti,ni,oi,ii,ri,si,ai,go,ci;try{const Kt=new Ki,Xn=(0,oo.ix)(p,d);i.push(d);const jt=null===(k=Xn?.data)||void 0===k?void 0:k.the_widget;Kt.name=null===(P=null===(F=jt?.the_widget_name)||void 0===F?void 0:F.data)||void 0===P?void 0:P.the_name,Kt.html=null===(y=null===(x=jt?.the_widget_html)||void 0===x?void 0:x.data)||void 0===y?void 0:y.the_html,Kt.css=null===(U=null===(u=jt?.the_widget_css)||void 0===u?void 0:u.data)||void 0===U?void 0:U.the_css,Kt.js=null===(J=null===(j=jt?.the_widget_js)||void 0===j?void 0:j.data)||void 0===J?void 0:J.the_js,Kt.root=Number(null!==(de=null===(q=jt?.the_widget_root)||void 0===q?void 0:q.id)&&void 0!==de?de:0),Kt.origin=0!=Kt.root?Kt.root:Number((null===(Ve=null===(Ne=jt?.the_widget_origin)||void 0===Ne?void 0:Ne.data)||void 0===Ve?void 0:Ve.the_origin)||(null===(De=null===(tt=jt?.the_widget_origin)||void 0===tt?void 0:tt.data)||void 0===De?void 0:De.the_originid)),Kt.version=null===(Lt=null===(ot=jt?.the_widget_version)||void 0===ot?void 0:ot.data)||void 0===Lt?void 0:Lt.the_version,Kt.clean=null===(Mt=null===(qt=jt?.the_widget_clean)||void 0===qt?void 0:qt.data)||void 0===Mt?void 0:Mt.the_clean,Kt.timestamp=null===(ln=null===(lt=jt?.the_widget_timestamp)||void 0===lt?void 0:lt.data)||void 0===ln?void 0:ln.the_timestamp,Kt.id=Xn?.id;const vo=null===(Dn=null===(In=jt?.the_widget_type)||void 0===In?void 0:In.data)||void 0===Dn?void 0:Dn.the_type;Kt.type="null"==vo||null==vo?"the_element_name":vo,Kt.after_render=null===($n=null===(gn=jt?.the_widget_after_render)||void 0===gn?void 0:gn.data)||void 0===$n?void 0:$n.the_after_render,Kt.before_render=null===(Bn=null===(wn=jt?.the_widget_before_render)||void 0===wn?void 0:wn.data)||void 0===Bn?void 0:Bn.the_before_render,Kt.dependency=null===(Zn=null===(En=jt?.the_widget_dependency)||void 0===En?void 0:En.data)||void 0===Zn?void 0:Zn.the_dependency,Kt.update=null===(Yn=null===(Qn=jt?.the_widget_update)||void 0===Qn?void 0:Qn.data)||void 0===Yn?void 0:Yn.the_update,Kt.widgetId=d,Kt.mount_child=null===(ao=null===(Kn=jt?.the_widget_mount_child)||void 0===Kn?void 0:Kn.data)||void 0===ao?void 0:ao.the_mount_child;const zn=jt?.the_widget_s_child;Xn?.useLatest&&(Kt.useLatest=!0),Xn?.sChildId&&(Kt.sChildId=Xn.sChildId);const Wo=null===(co=jt?.the_widget_s_css_library)||void 0===co?void 0:co.map(pn=>{var fn,Xt,Sn,Fn,Un,Mn,Rn,Ln;return{order:null===(Fn=null===(Sn=null===(Xt=null===(fn=pn?.data)||void 0===fn?void 0:fn.the_css_library)||void 0===Xt?void 0:Xt.the_css_library_order)||void 0===Sn?void 0:Sn.data)||void 0===Fn?void 0:Fn.the_order,url:null===(Ln=null===(Rn=null===(Mn=null===(Un=pn?.data)||void 0===Un?void 0:Un.the_css_library)||void 0===Mn?void 0:Mn.the_css_library_url)||void 0===Rn?void 0:Rn.data)||void 0===Ln?void 0:Ln.the_url}}),eo=null===(lo=jt?.the_widget_s_js_library)||void 0===lo?void 0:lo.map(pn=>{var fn,Xt,Sn,Fn,Un,Mn,Rn,Ln;return{order:null===(Fn=null===(Sn=null===(Xt=null===(fn=pn?.data)||void 0===fn?void 0:fn.the_js_library)||void 0===Xt?void 0:Xt.the_js_library_order)||void 0===Sn?void 0:Sn.data)||void 0===Fn?void 0:Fn.the_order,url:null===(Ln=null===(Rn=null===(Mn=null===(Un=pn?.data)||void 0===Un?void 0:Un.the_js_library)||void 0===Mn?void 0:Mn.the_js_library_url)||void 0===Rn?void 0:Rn.data)||void 0===Ln?void 0:Ln.the_url}});Kt.library={css:Wo||[],js:eo||[]};const uo=null===(Hn=null===(kn=jt?.the_widget_assistant)||void 0===kn?void 0:kn.data)||void 0===Hn?void 0:Hn.the_assistant;Kt.assistant={id:null===(Pn=null===(Gn=uo?.the_assistant_id)||void 0===Gn?void 0:Gn.data)||void 0===Pn?void 0:Pn.the_id,input:null===(Ao=null===(qn=uo?.the_assistant_input)||void 0===qn?void 0:qn.data)||void 0===Ao?void 0:Ao.the_input,type:null===(No=null===(Lo=uo?.the_assistant_type)||void 0===Lo?void 0:Lo.data)||void 0===No?void 0:No.the_type};const bi=null===(xo=jt?.the_widget_s_custom_function)||void 0===xo?void 0:xo.map(pn=>{var fn,Xt,Sn,Fn,Un,Mn,Rn;const Ln=null===(fn=pn?.data)||void 0===fn?void 0:fn.the_custom_function;return{id:pn?.id,name:null===(Sn=null===(Xt=Ln?.the_custom_function_name)||void 0===Xt?void 0:Xt.data)||void 0===Sn?void 0:Sn.the_name,slug:null===(Un=null===(Fn=Ln?.the_custom_function_slug)||void 0===Fn?void 0:Fn.data)||void 0===Un?void 0:Un.the_slug,code:null===(Rn=null===(Mn=Ln?.the_custom_function_code)||void 0===Mn?void 0:Mn.data)||void 0===Rn?void 0:Rn.the_code}});if(Kt.custom_functions=bi,zn?.length)for(let pn=0;pn<zn.length;pn++){const fn=(null===(Oo=null===(Fo=null===(Eo=zn[pn])||void 0===Eo?void 0:Eo.data.the_child_widget)||void 0===Fo?void 0:Fo.the_child_widget_info)||void 0===Oo?void 0:Oo.id)||(null===(Xo=null===(yo=null===($t=null===(Do=zn[pn])||void 0===Do?void 0:Do.data.the_child_widget)||void 0===$t?void 0:$t.the_child_widget_parent)||void 0===yo?void 0:yo.data)||void 0===Xo?void 0:Xo.the_parent),Xt=yield ko(fn,i,p,w),Sn=null===(ii=null===(oi=null===(ni=null===(ti=null===(ei=zn[pn])||void 0===ei?void 0:ei.data)||void 0===ti?void 0:ti.the_child_widget)||void 0===ni?void 0:ni.the_child_widget_type)||void 0===oi?void 0:oi.data)||void 0===ii?void 0:ii.the_type,Fn=null===(ci=null===(go=null===(ai=null===(si=null===(ri=zn[pn])||void 0===ri?void 0:ri.data)||void 0===si?void 0:si.the_child_widget)||void 0===ai?void 0:ai.the_child_widget_wrapper)||void 0===go?void 0:go.data)||void 0===ci?void 0:ci.the_wrapper;Xt.type="null"==Sn||null==Sn?"the_element_name":Sn,Xt.wrapper=Fn,Kt.children.push(Xt)}return Kt}catch(Kt){throw Kt instanceof Error&&console.error("error converting bulkwidget to widget tree",Kt.message),Kt}})}function Yo(D,d){return Cn(this,arguments,void 0,function*(i,p,w=!0,k,F,P=null){var x,y;const u=new Zo;u.html=i.html,P&&(u.parentWidget=Zs(P)),u.widgetType=i.type,u.componentDidMountFunction=i.before_render,u.addEventFunction=i.after_render,u.mountChildWidgetsFunction=i.mount_child,u.widgetState=Object.assign({},F),u.customFunctions=i.custom_functions,u.widgetDependenciesData=i.dependency,k&&(u.data=k),p.innerHTML="";const U=p;if(U&&(yield u.mount(U),i.widget=u,i.children.length>0&&(null===(x=u.childWidgetElement)||void 0===x?void 0:x.length)>0))for(let j=0;j<(null===(y=i.children)||void 0===y?void 0:y.length);j++){const J=i.children[j];for(let q=0;q<u.childWidgetElement.length;q++){const de=u.childWidgetElement[q];if(J.wrapper===de.id){const Ne=Qs(J);J.html=`<div id="${J.wrapper}">${J.html}</div>`;const Ve=yield Yo(Ne,de,!1,u.data,u.widgetState,u);u.childWidgets.push(Ve),u.css=u.css+Ve.css+`#${de.id} { ${J.css} }`,Ve.dataChange(tt=>{var De;const ot=null===(De=tt?.type)||void 0===De?void 0:De.characterValue;ot&&(u.childrenData[ot]=tt)})}}}return console.log("newWidget ->",u,i),yield nr(p,".widget_container"),u})}function Zs(D){const d={};for(const[i,p]of Object.entries(D))"object"==typeof p&&null!==p&&Array.isArray(p)||(d[i]=p);return d}function tr(D,d){return Cn(this,arguments,void 0,function*(i,p,w=!0,k,F,P=null){var x,y;let u=new Zo;u.html=i.html,P&&(u.parentWidget=Zs(P)),u.widgetState=Object.assign({},k),u.widgetType=i.type,u.componentDidMountFunction=i.before_render,u.addEventFunction=i.after_render,u.mountChildWidgetsFunction=i.mount_child,u.customFunctions=i.custom_functions,u.widgetDependenciesData=i.dependency,u.inDevelopment=!1!==F,p.innerHTML="";let U=p;if(U&&(yield u.mount(U),i.widget=u,i.children.length>0&&(null===(x=u.childWidgetElement)||void 0===x?void 0:x.length)>0))for(let j=0;j<(null===(y=i.children)||void 0===y?void 0:y.length);j++){let J=i.children[j];for(let q=0;q<u.childWidgetElement.length;q++){let de=u.childWidgetElement[q];if(J.wrapper===de.id){const Ne=Qs(J),Ve=yield tr(Ne,de,!1,u.widgetState,F,u);u.childWidgets.push(Ve),u.css=u.css+Ve.css+`#${de.id} { ${J.css} }`,Ve.dataChange(tt=>{var De;console.log("This is the data change in child",tt);let ot=null===(De=tt?.type)||void 0===De?void 0:De.characterValue;ot&&(u.childrenData[ot]=tt),console.log("new child data",u.childrenData)})}}}return console.log("newWidget ->",u,i),u})}function Qs(D){return D.html=D.html.replace(/<[^>]*\bclass=["'][^"']*\bwidget_container\b[^"']*["'][^>]*>/g,d=>d.replace(/\bwidget_container\b/g,"").trim()),D.html=D.html.replace(/<[^>]*\bdraggable=["'][^"']*\btrue\b[^"']*["'][^>]*>/g,d=>d.replace(/\btrue\b/g,"false").trim()),D.html=D.html.replace(/<[^>]*\bclass=["'][^"']*\bhover-element\b[^"']*["'][^>]*>/g,d=>d.replace(/\bhover-element\b/g,"").trim()),D.html=D.html.replace(/<[^>]*\bclass=["'][^"']*\bwb-block\b[^"']*["'][^>]*>/g,d=>d.replace(/\bwb-block\b/g,"").trim()),D.html=D.html.replace(/<[^>]*onclick="widgetSelected\(event\)"\s*,?\s*ondragover="_dragService\.dragOverWidgetElement\(event\)"\s*,?\s*ondrop="_dragService\.dropWidgetElement\(event\)"\s*,?\s*ondragstart="_dragService\.dragStartWidgetElement\(event\)"\s*,?\s*ondragend="_dragService\.dragEndWidgetElement\(event\)"[^>]*>/g,d=>d.replace(/onclick="widgetSelected\(event\)"/g,'onclick=""').replace(/ondragover="_dragService\.dragOverWidgetElement\(event\)"/g,'ondragover=""').replace(/ondrop="_dragService\.dropWidgetElement\(event\)"/g,'ondrop=""').replace(/ondragstart="_dragService\.dragStartWidgetElement\(event\)"/g,'ondragstart=""').replace(/ondragend="_dragService\.dragEndWidgetElement\(event\)"/g,'ondragend=""').trim()),D.html=D.html.replace(/<[^>]*\bondragstart=["'][^"']*\b_dragService\.onWidgetDragStart\(event\)\b[^"']*["'][^>]*>/g,d=>d.replace(/\b_dragService\.onWidgetDragStart\(event\)\b/g,"").trim()),D}function Od(D,d){return Cn(this,void 0,void 0,function*(){return D&&1===D.nodeType&&D.querySelectorAll(d).forEach(i=>{for(;i.firstChild;)i.parentNode.insertBefore(i.firstChild,i);i.remove()}),D})}function nr(D,d){return Cn(this,void 0,void 0,function*(){const i=D.querySelectorAll(d);for(const p of i){const w=p.parentElement;if(w){for(;p.firstChild;){const k=yield Od(p.firstChild,d);w.insertBefore(k,p)}w.removeChild(p)}}})}function Ys(D){return Cn(this,void 0,void 0,function*(){const d=new Vn;d.typeConnection="the_widget_documentation",d.name="documentationText",d.selectors=["the_documentation_text"];const i=new Vn;i.typeConnection="the_widget_s_documentation",i.name="documentationBlank",i.selectors=["the_documentation_text","the_documentation_content","the_documentation_language","the_documentation_doc_title","the_documentation_folder","the_documentation_creator_email","the_documentation_created_by","the_documentation_content","the_documentation_type","the_documentation_s_doc_url","the_documentation_s_image_url","the_documentation_s_video_link","the_documentation_auth_type","the_documentation_bearer_token","the_documentation_method","the_documentation_method_url","the_documentation_username","the_documentation_password","the_documentation_s_json_list","the_documentation_api_script","the_documentation_api_body","the_documentation_code_editor","the_documentation_return"];const p=new Vn;p.typeConnection="the_documentation_s_json_list",p.name="documentationJSON",p.selectors=["the_json_list_key","the_json_list_value"],i.freeschemaQueries=[p];const w=new Vn;w.conceptIds=[D],w.freeschemaQueries=[d,i],w.inpage=100,w.outputFormat=Vt.y0,yield Ro(w,"").subscribe(k=>Cn(this,void 0,void 0,function*(){var F,P,x,y,u,U,j,J,q,de,Ne;let Ve;const tt=(null===(J=null===(j=null===(U=null===(u=null===(y=null===(x=null===(P=null===(F=k?.[0])||void 0===F?void 0:F.data)||void 0===P?void 0:P.the_widget)||void 0===x?void 0:x.the_widget_documentation)||void 0===y?void 0:y.data)||void 0===u?void 0:u.the_documentation)||void 0===U?void 0:U.the_documentation_text)||void 0===j?void 0:j.data)||void 0===J?void 0:J.the_text)||"";tt&&(Ve=tt);const De=null===(Ne=null===(de=null===(q=k?.[0])||void 0===q?void 0:q.data)||void 0===de?void 0:de.the_widget)||void 0===Ne?void 0:Ne.the_widget_s_documentation;De?.length&&(Ve=De?.map(Lt=>{var qt,Mt,lt,ln,In,Dn,gn,$n,wn,Bn,En,Zn,Qn,Yn,Kn,ao,co,lo,kn,Hn,Gn,Pn,qn,Ao,Lo,No,xo,Eo,Fo,Oo,Do;const $t=null===(qt=Lt?.data)||void 0===qt?void 0:qt.the_documentation,yo=null===(lt=null===(Mt=$t?.the_documentation_type)||void 0===Mt?void 0:Mt.data)||void 0===lt?void 0:lt.the_type,Xo=null===(In=null===(ln=$t?.the_documentation_content)||void 0===ln?void 0:ln.data)||void 0===In?void 0:In.the_content,ei=null===(gn=null===(Dn=$t?.the_documentation_creator_email)||void 0===Dn?void 0:Dn.data)||void 0===gn?void 0:gn.the_creator_email,ti=null===(wn=null===($n=$t?.the_documentation_doc_title)||void 0===$n?void 0:$n.data)||void 0===wn?void 0:wn.the_doc_title,ni=null===(En=null===(Bn=$t?.the_documentation_method)||void 0===Bn?void 0:Bn.data)||void 0===En?void 0:En.the_method,oi=null===(Qn=null===(Zn=$t?.the_documentation_method_url)||void 0===Zn?void 0:Zn.data)||void 0===Qn?void 0:Qn.the_method_url,ii=null===(Kn=null===(Yn=$t?.the_documentation_bearer_token)||void 0===Yn?void 0:Yn.data)||void 0===Kn?void 0:Kn.the_bearer_token,ri=null===(co=null===(ao=$t?.the_documentation_username)||void 0===ao?void 0:ao.data)||void 0===co?void 0:co.the_username,si=null===(kn=null===(lo=$t?.the_documentation_password)||void 0===lo?void 0:lo.data)||void 0===kn?void 0:kn.the_password,ai=null===(Gn=null===(Hn=$t?.the_documentation_auth_type)||void 0===Hn?void 0:Hn.data)||void 0===Gn?void 0:Gn.the_auth_type,go=$t?.the_documentation_s_json_list,ci=null===(qn=null===(Pn=$t?.the_documentation_api_script)||void 0===Pn?void 0:Pn.data)||void 0===qn?void 0:qn.the_api_script,Kt=null===(Lo=null===(Ao=$t?.the_documentation_api_body)||void 0===Ao?void 0:Ao.data)||void 0===Lo?void 0:Lo.the_api_body,Xn=null===(xo=null===(No=$t?.the_documentation_language)||void 0===No?void 0:No.data)||void 0===xo?void 0:xo.the_language,jt=null===(Fo=null===(Eo=$t?.the_documentation_return)||void 0===Eo?void 0:Eo.data)||void 0===Fo?void 0:Fo.the_return,lr=null===(Do=null===(Oo=$t?.the_documentation_code_editor)||void 0===Oo?void 0:Oo.data)||void 0===Do?void 0:Do.the_code_editor,vo=$t?.the_documentation_s_doc_url,zn=$t?.the_documentation_s_image_url,Wo=$t?.the_documentation_s_video_link;let eo={type:yo,content:Xo,creatorEmail:ei,title:ti};if("blank"===yo)eo=Object.assign({},eo);else if("api"===yo){const fn=[];go?.length&&go?.forEach(Xt=>{var Sn,Fn,Un,Mn,Rn,Ln,dr,ur;fn.push({key:null===(Mn=null===(Un=null===(Fn=null===(Sn=Xt?.data)||void 0===Sn?void 0:Sn.the_json_list)||void 0===Fn?void 0:Fn.the_json_list_key)||void 0===Un?void 0:Un.data)||void 0===Mn?void 0:Mn.the_key,value:null===(ur=null===(dr=null===(Ln=null===(Rn=Xt?.data)||void 0===Rn?void 0:Rn.the_json_list)||void 0===Ln?void 0:Ln.the_json_list_value)||void 0===dr?void 0:dr.data)||void 0===ur?void 0:ur.the_value})}),eo=Object.assign(Object.assign({},eo),{method:ni,methodURL:oi,authType:ai,username:ri,password:si,bearerToken:ii,json:fn,script:ci,body:Kt})}else"function"===yo&&(eo=Object.assign(Object.assign({},eo),{language:Xn,return:jt,codeEditor:lr}));const uo=[],bi=[],pn=[];return zn?.length&&zn?.forEach(fn=>{var Xt;uo.push(null===(Xt=fn?.data)||void 0===Xt?void 0:Xt.the_image_url)}),Wo?.length&&Wo?.forEach(fn=>{var Xt;bi.push(null===(Xt=fn?.data)||void 0===Xt?void 0:Xt.the_video_link)}),vo?.length&&vo?.forEach(fn=>{var Xt;pn.push(null===(Xt=fn.data)||void 0===Xt?void 0:Xt.the_doc_url)}),eo=Object.assign(Object.assign({},eo),{imageList:uo,linkList:pn,videoList:bi}),eo})),yield function(){return Cn(this,void 0,void 0,function*(){document.getElementById("widget-documentation-preview-modal").showModal()})}(),function(ot,Lt){Cn(this,void 0,void 0,function*(){const qt=document.getElementById("documentation-view");if(0!=r.B.DOCUMENTATION_WIDGET)return void(yield Ci(r.B.DOCUMENTATION_WIDGET,qt,{currentWidgetId:Lt}));const Mt=document.getElementById("documentation-preview");Mt.innerHTML="",ot&&ot?.length&&"string"!=typeof ot?ot?.forEach(lt=>{var ln,In,Dn,gn;const $n=document.createElement("h3");let wn="";switch(lt?.type){case"api":wn="API";break;case"function":wn="Functions and Classes";break;case"imgAndLink":wn="Images and Links";break;default:wn=""}$n.innerHTML=`\n        ${lt?.title} ${wn?"("+wn+")":""}\n      `,Mt?.appendChild($n);const Bn=document.createElement("div");Bn.classList.add("widget-doc-content"),lt?.content&&(Bn.innerHTML=lt.content,Mt?.appendChild(Bn));const En=document.createElement("div");if(En.classList.add("widget-doc-section"),"api"===lt.type){let kn="";kn="basicAuth"===lt.authType?`\n            <p>username: <code>${lt?.username}</code></p>\n            <p>password: <code>${lt?.password}</code></p>\n          `:"bearerToken"===lt.authType?`\n          <h6>Token: <code>${lt?.bearerToken}</code></h6>\n          `:"None";const Hn=lt.json.map(qn=>`${qn?.key}: ${qn?.value}`).join(", "),Gn=document.createElement("pre");Gn.textContent=Hn,En.innerHTML=`\n          <div class="pv-3">\n            <h6>Method Type: <code>${lt?.method.toUpperCase()}</code></h6>\n            <h6>Endpoint: <code>${lt?.methodURL}</code></h6>\n          </div>\n          <div class="pv-3">\n            <h6>Auth Type: <code>${(null===(ln=lt?.authType)||void 0===ln?void 0:ln.toUpperCase())||""}</code></h6>\n            ${kn}\n          </div>\n          <div class="pv-3">\n            <h6>JSON</h6>\n            <code class="pre-wrapper" id="json-list-pre"></code>\n          </div>\n          <div class="pv-3">\n            <h6>Body</h6>\n            ${lt.body}\n          </div>\n          <div class="pv-3">\n            <h6>Scripts</h6>\n            ${lt.script}\n          </div>\n        `;const Pn=En.querySelector("#json-list-pre");Pn&&(Pn.appendChild(Gn),Pn.removeAttribute("id"))}else if("function"===lt.type){const kn=document.createElement("pre");kn.textContent=lt?.codeEditor;const Hn=document.createElement("pre");Hn.textContent=lt?.return,En.innerHTML=`\n          <div class="mv-3">\n            <h6>Parameter</h6>\n            <p>Language: ${lt?.language}</p>\n            <code class="pre-wrapper" id="editor-pre"></pre></code>\n            <h6>Returns</h6>\n            <code class="pre-wrapper" id="return-pre"></code>\n          </div>\n        `;const Gn=En.querySelector("#editor-pre");Gn&&(Gn.appendChild(kn),Gn.removeAttribute("id"));const Pn=En.querySelector("#return-pre");Pn&&(Pn.appendChild(Hn),Pn.removeAttribute("id"))}const Zn=document.createElement("div");Zn.classList.add("mv-3");const Qn=null===(In=lt?.linkList)||void 0===In?void 0:In.map(kn=>`\n            <p>${kn}</p>\n          `).join(""),Yn=null===(Dn=lt?.imageList)||void 0===Dn?void 0:Dn.map(kn=>`\n          <img src="${kn}">\n        `).join(""),Kn=null===(gn=lt?.videoList)||void 0===gn?void 0:gn.map(kn=>`\n            <iframe width="560" height="315" src="${kn}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>\n        `).join("");Zn.innerHTML=`\n        <div class="mv-3">\n          ${Qn?.length?`\n          <div class="mv-3">\n          <h6>Web links</h6>\n          ${Qn}\n          </div>\n        `:""}\n          ${Yn?.length?`\n          <h6>Attachments</h6>\n          <div class="documentation-attachments">\n            ${Yn}\n          </div>\n        `:""}\n          ${Kn?.length?`\n            <h6>Videos</h6>\n            <div class="documentation-attachments">\n              ${Kn}\n            </div>\n            `:""}\n        </div>\n        <p class="documentation-creator">- added by: <span>${lt?.creatorEmail}</span></p>\n      `,En?.appendChild(Zn),Mt?.appendChild(En)}):void 0!==ot&&(Mt.innerHTML=ot)})}(Ve,D)}))})}function Ks(D){return Cn(this,void 0,void 0,function*(){const d=document.getElementById(D),i=d?.querySelector("form");i?.reset(),d?.close()})}var Dd=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function wi(D){return Dd(this,arguments,void 0,function*(d,i=null,p="",w={concepts:[],connections:[]}){var k,F,P,x;if(Dt)try{const j=yield Yt("CreateData",{json:d,ofConcept:i,typeConcept:p,actions:w});return!(null===(F=null===(k=j?.actions)||void 0===k?void 0:k.concepts)||void 0===F)&&F.length&&(w.concepts=JSON.parse(JSON.stringify(j.actions.concepts))),!(null===(x=null===(P=j?.actions)||void 0===P?void 0:P.connections)||void 0===x)&&x.length&&(w.connections=JSON.parse(JSON.stringify(j.actions.connections))),j.data}catch(j){console.error("CreateTheComposition sw error: ",j),rn(j)}let y=999,u=999,U=(0,ie.o)();for(const j in d){let J=Bd(j);if("string"!=typeof d[j]&&"number"!=typeof d[j])if(null==i||0==i.id)U=yield(0,Pe.k)(J,"",!0,y,4,u,void 0,w),Array.isArray(d[j])&&(J=Xs(J)),yield wi(d[j],U,J,w);else{Array.isArray(d[j])&&(J=ea(J));let q=ea(j),de=yield(0,Pe.k)(J,"",!0,y,4,u,void 0,w);U=de;let Ne=ta(p,q),Ve=yield(0,bt.$)(Ne,u,y,y,w);yield(0,no.F)(i.id,de.id,Ve.id,1e3,Ve.characterValue,y,w),Array.isArray(d[j])&&(J=Xs(J)),yield wi(d[j],de,J,w)}else{let q=ta(p,j),de=yield(0,bt.$)(q,u,y,y,w),Ne=yield(0,Pe.k)(j,d[j].toString(),!1,y,4,u,void 0,w);console.log("this is the type concept in down",de,Ne),null!=i&&(yield(0,no.F)(i.id,Ne.id,de.id,1e3,q,y,w))}}return U})}function Bd(D){return D.startsWith("the_")?D:"the_"+D}function Xs(D){return D.endsWith("_s")?D:D+"_s"}function ea(D){return D.replace(/_s$/,"")}const Pd=D=>/^[+-]?\d+(\.\d+)?$/.test(D);function ta(D,d){return Pd(d)?D+"_":D+"_"+((i=d).startsWith("the_")?i.slice(4):i);var i}class na{constructor(){this.prototype="",this.required=[],this.optional=[],this.field="string",this.childPrototypes=[],this.isCompositional=!1,this.options=[],this.isQueryType=!1,this.querySelector=null,this.concepts=[],this.connections=[],this.addedConcepts=[],this.addedConnections=[]}}class or{static getValue(d){return d in this.environments?this.environments[d]:null}static setValue(d,i){return this.environments[d]=i,this}}function io(D,d){if(Array.isArray(D)&&Array.isArray(d))for(let i=0;i<d.length;i++)D.push(d[i]);return D}or.environments={};var So=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function ir(D){return So(this,arguments,void 0,function*(d,i=null){let p=[],w=[],k=[],F=(0,ie.o)();try{null==i&&(i=new Zi,yield i.initialize());let P=[];if(d.isCompositional){if(F=yield function(u,U,j,J){return So(this,void 0,void 0,function*(){let q=(0,ie.o)(),de=yield J.MakeTheInstanceConceptLocal("the_composition","",!0,999,999,999),Ne=yield J.MakeTheTypeConceptLocal("the_composition_type",999,999,999),Ve=yield J.MakeTheTypeConceptLocal(u,999,999,999),tt=yield J.CreateTheConnectionLocal(de.id,Ve.id,Ne.id,1e3,"the_composition_type");return q=de,U.push(Ne),U.push(Ve),j.push(tt),q})}(d.prototype,p,w,i),d.isQueryType){let u=yield function(j,J,q){return So(this,void 0,void 0,function*(){let de=[],Ne=[],Ve="the_composition_filter_type",tt="the_composition_selector",De=yield q.MakeTheTypeConceptLocal(Ve,999,999,999),ot=yield q.MakeTheTypeConceptLocal(tt,999,999,999);if(null!=j){let Lt=yield q.MakeTheTypeConceptLocal(j.selector,999,999,999);de.push(Lt);let qt=yield q.MakeTheTypeConceptLocal(j.filterType,999,999,999);de.push(Lt),de.push(qt);let Mt=yield q.CreateTheConnectionLocal(J.id,Lt.id,ot.id,1e3,tt,999);Ne.push(Mt);let lt=yield q.CreateTheConnectionLocal(J.id,qt.id,De.id,1e3,Ve,999);Ne.push(lt)}return{concepts:de,connections:Ne}})}(d.querySelector,F,i),U=u.concepts;io(k,u.connections),io(p,U)}if(d.options.length>0){let u=yield function(j,J,q){return So(this,void 0,void 0,function*(){let de=[],Ne=[],Ve="the_composition_s_option",tt=yield q.MakeTheTypeConceptLocal(Ve,999,999,999);for(let De=0;De<j.length;De++){let ot=j[De].type,Lt=j[De].value,qt=yield q.MakeTheInstanceConceptLocal(ot,Lt,!1,999,999,999);de.push(qt);let Mt=yield q.CreateTheConnectionLocal(J.id,qt.id,tt.id,1e3,Ve,999);Ne.push(Mt)}return{concepts:de,connections:Ne}})}(d.options,F,i),U=u.concepts;io(k,u.connections),io(p,U)}}else F=yield function(u,U){return So(this,void 0,void 0,function*(){let j=yield(0,Ee.A)(5124),J=yield U.MakeTheTypeConceptLocal(u,999,999,999);return yield function(de,Ne,Ve,tt){return So(this,void 0,void 0,function*(){let De=yield tt.CreateTheConceptLocal("",Ne.characterValue,999,de.id,Ne.id,4,!1);return De.characterValue=Ne.characterValue,De.typeCharacter=Ne.characterValue,De.isComposition=!0,De.type=Ne,De})}(j,J,0,U)})}(d.prototype,i),k=yield ia(d.required,F,p,i,!0),P=yield ia(d.optional,F,p,i),p.push(F);let x=oa(F,!0,!0),y=yield i.MakeTheTypeConceptLocal(x,999,999,999);if(p.push(y),d.childPrototypes.length>0)for(let u=0;u<d.childPrototypes.length;u++){let U=yield ir(d.childPrototypes[u]),j=U.mainConcept,J=U.connections,q=U.concepts,de=yield i.CreateTheConnectionLocal(F.id,j.id,y.id,1e3,x,999);k.push(de),io(k,J),io(p,q),p.push(j)}io(k,P),io(k,w),io(p,d.addedConcepts),io(k,d.addedConnections),d.concepts=p,d.connections=k,console.log("this is the connections",k)}catch{i?.rollbackTransaction()}return{concepts:p,connections:k,mainConcept:F}})}function oa(D,d=!0,i=!1){var p;let w="the_prototype_of_"+(null===(p=D.type)||void 0===p?void 0:p.characterValue);return w+=d?"_requires":"_optional",i&&(w+="_the_composition"),w}function ia(D,d,i,p){return So(this,arguments,void 0,function*(w,k,F,P,x=!1,y=!1){let u=[],U=[],j=oa(k,x,y),J=yield P.MakeTheTypeConceptLocal(j,999,999,999);F.push(J);for(let q=0;q<w.length;q++){let de=yield P.MakeTheTypeConceptLocal(w[q],999,999,999);u.push(de)}for(let q=0;q<u.length;q++){let de=yield P.CreateTheConnectionLocal(k.id,u[q].id,J.id,1e3,j,999);U.push(de)}for(let q=0;q<u.length;q++)F.push(u[q]);return U})}var Ud=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function rr(D){return Ud(this,void 0,void 0,function*(){let d;try{const i=yield fetch(r.B.GetCachedImage(D),{method:"GET"});return i.ok?d=i.body:(console.log("Error in Getting Image",i.status),(0,o.ry)(i)),d}catch(i){throw i instanceof Error?console.log("Error in Getting Local concept by character value error message: ",i):console.log("Error in Getting Local concept by character value unexpected error: ",i),d}})}var Md=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};function ra(D){return Md(this,arguments,void 0,function*(d,i="normal"){let p,w=d.split("/").pop();if("small"==i){let k=w?.split(".");k&&(w=k[0]+"_small."+k[1])}return w&&(p=yield rr(w)),p})}function sa(D,d="normal"){let i=D;try{if(D){let p=D.split("/").pop();if("small"==d){let w=p?.split(".");w&&(p=w[0]+"_small."+w[1])}p&&(i=r.B.GetCachedImage(p))}}catch{console.log("This url has error",D)}return i}var Dt,_n=function(D,d,i,p){return new(i||(i=Promise))(function(w,k){function F(y){try{x(p.next(y))}catch(u){k(u)}}function P(y){try{x(p.throw(y))}catch(u){k(u)}}function x(y){var u;y.done?w(y.value):(u=y.value,u instanceof i?u:new i(function(U){U(u)})).then(F,P)}x((p=p.apply(D,d||[])).next())})};const Rd=Date.now().toString(36)+Math.random().toString(36).substring(2);let sr=[],so=[],ar=!1;function aa(D){ar=D}function cr(D="",d){tn.b.BearerAccessToken=D,Dt&&Yt("updateAccessToken",{accessToken:D,session:tn.b.sessionId})}function ca(){return _n(this,arguments,void 0,function*(D="",d="",i="",p="",w=!0,k="",F,P={},x={}){var y;try{r.B.BASE_URL=D,r.B.AI_URL=d,r.B.NODE_URL=p,r.B.BASE_APPLICATION=k,r.B.LOG_SERVER=null!==(y=x.logserver)&&void 0!==y?y:"https://logdev.freeschema.com",console.log("setting the logserver",r.B.LOG_SERVER,x.logserver),cr(i);let u=Math.floor(1e8*Math.random());r.B.setRandomizer(u);const U={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1};if(r.B.FLAGS=U,r.B.FLAGS=Object.assign(Object.assign({},U),P),function(j){const J=Ue.V.logfunction("initializeFlags",arguments);try{j.logApplication&&(Ji.initialize(),Ue.V.logApplicationActivationStatus=!0,console.warn("Application log started.")),j.logPackage&&(Ue.V.logPackageActivationStatus=!0,console.warn("Package log started.")),j.accessTracker&&(Vo.J.activateStatus=!0,console.warn("Access Tracker Activated.")),j.isTest&&(n.B.isDataLoaded=!0,n.B.isCharacterLoaded=!0,n.B.isTypeLoaded=!0,n.B.isLocalDataLoaded=!0,n.B.isLocalTypeLoaded=!0,n.B.isLocalCharacterLoaded=!0,n.B.isConnectionLoaded=!0,n.B.isConnectionTypeLoaded=!0,n.B.isLocalConnectionLoaded=!0),Ue.V.logUpdate(J)}catch(q){throw(0,o.ey)(J,"initializeFlags",q),q}}(r.B.FLAGS),!("serviceWorker"in navigator))return yield Ko(),void console.warn("Service Worker not supported in this browser.");if(yield function(){return _n(this,void 0,void 0,function*(){var j;let J=r.B.BASE_APPLICATION+"_cacheServers",q=r.B.BASE_APPLICATION+"_config",de=r.B.BASE_APPLICATION+"_session",Ne=sessionStorage.getItem(J),Ve=sessionStorage.getItem(q),tt=null!==(j=sessionStorage.getItem(de))&&void 0!==j?j:"999",De=parseInt(tt);void 0!==Ne&&"undefined"!==Ne||(r.B.NODE_CACHE_URL=r.B.BASE_URL),Ne=JSON.parse(Ne);const ot=JSON.parse(Ve);Ne&&ot&&ot.documentationWidget&&999!=De?(r.B.NODE_CACHE_URL=Array.isArray(Ne)&&Ne.length?Ne[0]:r.B.BASE_URL,tn.b.setSession(De),r.B.DOCUMENTATION_WIDGET=ot.documentationWidget):yield function(){return _n(this,void 0,void 0,function*(){var Lt;let qt;try{let Mt=null!==(Lt=r.B.BASE_APPLICATION)&&void 0!==Lt?Lt:"boomconsole";if(qt=yield fetch(r.B.getAppConfig()+"?application="+Mt,{method:"POST"}),!qt.ok)throw new Error("Failed to sync data to the server.");const lt=yield qt.json();lt.success&&(sessionStorage.setItem(J,JSON.stringify(lt.servers)),sessionStorage.setItem(q,JSON.stringify(lt.config)),sessionStorage.setItem(de,lt.session),tn.b.setSession(lt.session),r.B.NODE_CACHE_URL=lt.servers?lt.servers[0]:r.B.BASE_URL,lt.config&&(r.B.DOCUMENTATION_WIDGET=lt.config.documentationWidget))}catch(Mt){console.error("error getting app config from server",Mt.message)}})}(),console.log("before the payload in app",tn.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&Yt("SESSION_DATA",{type:"SESSION_DATA",data:r.B.NODE_CACHE_URL,session:tn.b.sessionId})})}(),function(){navigator.serviceWorker.addEventListener("message",j=>_n(this,void 0,void 0,function*(){var J,q,de,Ne;try{if(j.data&&"API_401"===j.data.type){const{requestDetails:Ve}=j.data,tt={method:Ve.method,headers:new Headers(Ve.headers),body:Ve.body},De=yield fetch(Ve.url,tt),ot=yield De?.json();null===(q=null===(J=navigator?.serviceWorker)||void 0===J?void 0:J.controller)||void 0===q||q.postMessage({type:"API_RESPONSE",messageId:j.data.messageId,response:new Response(ot,{status:De.status,statusText:De.statusText,headers:De.headers})})}}catch(Ve){console.error("Error during listenPostMessage",Ve),null===(Ne=null===(de=navigator?.serviceWorker)||void 0===de?void 0:de.controller)||void 0===Ne||Ne.postMessage({type:"API_RESPONSE",messageId:j.data.messageId})}}))}(),function(){bs.x.addEventListener("message",j=>_n(this,void 0,void 0,function*(){const{type:J,payload:q}=j.data;J&&(la[J]?yield la[J](q):console.warn(`Unable to handle "${J}" case in BC service worker`))}))}(),F&&F.activate&&F.manual)yield new Promise((j,J)=>{navigator.serviceWorker.ready.then(q=>_n(this,void 0,void 0,function*(){console.log("registraions ready",q),Dt=q.active,yield Go(),j("done")})).catch(q=>{console.error("Error: Ready service worker",q),J(q)}).finally(()=>console.log("Finally service worker ready done")),setTimeout(()=>J("Timeout ready"),3e4)});else if(F&&F?.activate)try{console.log("service worker initialiing"),yield function(j){var J=arguments;return _n(this,void 0,void 0,function*(){const q=Ue.V.logfunction("handleRegisterServiceWorker",J);yield new Promise((de,Ne)=>{var Ve,tt;let De=!1;navigator.serviceWorker.register(null!==(Ve=j.pathToSW)&&void 0!==Ve?Ve:"./serviceWorker.bundle.js",{scope:null!==(tt=j.scope)&&void 0!==tt?tt:"/"}).then(ot=>_n(this,void 0,void 0,function*(){console.log("Service Worker registered:",ot),setInterval(()=>{so.length&&Ti()},2e3),console.log("update listen start"),ot.onupdatefound=()=>{const Lt=ot.installing;console.log("new worker",Lt),Lt&&(Lt.onstatechange=()=>_n(this,void 0,void 0,function*(){console.warn("on state change triggered",Lt.state,navigator.serviceWorker.controller),"installing"===Lt.state&&(console.log("Service Worker installing"),Dt=void 0),"activated"!==Lt.state&&"redundant"!==Lt.state||!navigator.serviceWorker.controller||(Dt=Lt,console.log("New Service Worker is active",ot),setTimeout(()=>{console.log("Message Processed after some time"),Ti()},5e3),yield Go(),De=!0,Ti(),de())}))},ot.addEventListener("controllerchange",()=>_n(this,void 0,void 0,function*(){console.warn("controller change triggered",navigator.serviceWorker.controller),navigator.serviceWorker.controller&&(Dt=navigator.serviceWorker.controller,console.warn("Service worker has been activated; controller change"),yield Go())})),(ot.installing||ot.waiting||ot.active)&&ot.addEventListener("statechange",Lt=>_n(this,void 0,void 0,function*(){var qt;"activating"===(null===(qt=Lt?.target)||void 0===qt?void 0:qt.state)&&(Dt=navigator.serviceWorker.controller,console.warn("Service Worker is activating statechange"),yield Go())})),ot.active?(console.log("active sw"),Dt=ot.active,yield Go(),Ti(),de()):setTimeout(()=>{De||Ne("Not Completed Initialization")},1e4)})).catch(ot=>_n(this,void 0,void 0,function*(){yield Ko(),Ne(ot),console.error("Service Worker registration failed:",ot),(0,o.ey)(q,"handleRegisterServiceWorker",ot)}))})})}(F)}catch(j){yield Ko(),console.error("Unable to start service worker",j)}else yield Ko(),console.warn("Service Worker not activated");return!0}catch(u){yield Ko(),console.warn("Cannot initialize the system",u)}})}function Yt(D,d){return _n(this,arguments,void 0,function*(i,p,w=0){let k=!1;const F=Math.random().toString(36).substring(2);p.messageId=F,p.TABID=Rd;const P=JSON.parse(JSON.stringify(p));let x;return"checkProcess"!=i&&0==w&&(x=setInterval(()=>_n(this,void 0,void 0,function*(){if(!k&&!(yield function(y,u){return _n(this,void 0,void 0,function*(){var U;try{const j=yield Yt("checkProcess",{checkMessageId:y});if(console.log("check interval data res for type ",u,y,j.data),null===(U=j?.data)||void 0===U?void 0:U.processing)return!0}catch(j){return console.error("error on checing executing process",u,y,j),!1}})}(F,i))&&(clearInterval(x),!k)){if(console.log("Failed to handle type "+i+" message not found "+F,"retrying: ",0==w,i),0==w&&"checkProcess"!=i)return console.log("retrying ",i,F),yield Yt(i,p,w+1);console.log("Failed to handle type "+i+" "+F)}}),2e3)),new Promise((y,u)=>{if(navigator.serviceWorker.controller||Dt||console.log("",navigator.serviceWorker.controller,Dt,i),navigator.serviceWorker.controller||Dt){const U=j=>{var J,q,de,Ne,Ve,tt;(null===(J=j?.data)||void 0===J?void 0:J.messageId)==F&&(k=!0,clearInterval(x),j.data.success||(401==(null===(q=j?.data)||void 0===q?void 0:q.status)?u((0,o.ry)(new Response("Unauthorized",{status:401,statusText:null===(de=j?.data)||void 0===de?void 0:de.statusText}))):500==(null===(Ne=j?.data)||void 0===Ne?void 0:Ne.status)?u((0,o.Mb)(new Response("Internal Server Error",{status:500,statusText:null===(Ve=j?.data)||void 0===Ve?void 0:Ve.statusText}))):(console.error("Error in the response from worker:",j),u(`Failed to handle action ${i} ${JSON.stringify(p)}, Response: ${JSON.stringify(j.data)}`))),!(null===(tt=j.data)||void 0===tt)&&tt.actions&&(p.actions=JSON.parse(JSON.stringify(j.data.actions))),y(j.data),navigator.serviceWorker.removeEventListener("message",U))};if(navigator.serviceWorker.addEventListener("message",U),navigator.serviceWorker.controller)"checkProcess"!=i&&console.log("sent to sw",i,F),navigator.serviceWorker.controller.postMessage({type:i,payload:P});else if(Dt){console.warn(`controller not found but serviceWorker is available. messageId: ${F}, type: ${i}`);try{Dt.postMessage({type:i,payload:P})}catch(j){console.log("Retrying again on catch service worker",j),Dt.postMessage({type:i,payload:P})}}else console.warn(`Service Worker hasn't loaded yet. messageId: ${F}, type: ${i}`),console.info("ready",navigator.serviceWorker.ready),setTimeout(()=>{console.warn(`Re-Trying after certain time. messageId: ${F}, type: ${i}`),Dt?(console.info("This is triggered "),Dt?.postMessage({type:i,payload:p})):(console.log("not ready",i),clearInterval(x),u("Service worker not ready"))},3e4);setTimeout(()=>{clearInterval(x),u(`No response from service worker after timeout: ${i}`),navigator.serviceWorker.removeEventListener("message",U)},21e4)}else so.push({message:{type:i,payload:P}}),"init"==i&&(clearInterval(x),y(null))})})}const la={GetLinkListener:D=>_n(void 0,void 0,void 0,function*(){return sr.find(i=>i.listenerId==D.listenerId)?.callback(D.data),{success:!0}}),dispatchEvent:D=>_n(void 0,void 0,void 0,function*(){if(Dt){let d=new CustomEvent(D.id||"",D.data);dispatchEvent(d)}return{success:!0}}),checkInit:D=>_n(void 0,void 0,void 0,function*(){return console.log("service worker init 0"),navigator.serviceWorker.controller&&(console.log("service worker init 1"),Dt=navigator.serviceWorker.controller),yield Go(),{success:!0}})};function Ko(){return _n(this,void 0,void 0,function*(){yield(0,bd.A)();const D=(new Date).getTime();yield(0,N.A)().then(()=>{let d=(new Date).getTime()-D;console.log("The time taken to prepare concept  data is  ",d)}).catch(d=>{throw d}),yield(0,Ts.Ay)().then(()=>{let d=(new Date).getTime()-D;console.log("The time taken to prepare local concept  ",d)}).catch(d=>{throw d}),yield(0,ws.p)().then(()=>{n.B.isLocalConnectionLoaded=!0}).catch(d=>{throw d}),yield(0,Ts.xd)().catch(d=>{throw console.log("This is the error in populating binary tree"),d}),yield(0,ws.a)().then(()=>{n.B.isConnectionLoaded=!0,n.B.isConnectionTypeLoaded=!0;let d=(new Date).getTime()-D;console.log("The time taken to prepare connections  ",d)}).catch(d=>{throw d})})}function da(D,d={}){if(Dt||typeof window<"u"){let i=new CustomEvent(`${D}`,d);dispatchEvent(i)}else bs.x.postMessage({type:"dispatchEvent",payload:{id:D,data:d}})}function Ti(){return _n(this,void 0,void 0,function*(){console.log("message queue",so);const D=so.find(d=>{var i;return"init"==(null===(i=d?.message)||void 0===i?void 0:i.type)});if(D){console.log("Processing Init Queue poped",D?.type,D);const d=so.indexOf(D);d>-1&&so.splice(d,1),yield Yt(D?.type,D?.payload)}for(console.log("message queue while",so);so.length>0;){const{message:d}=so.shift();console.log("Queue poped",d.type,d),yield Yt(d.type,d.payload)}})}const rn=D=>{if(D instanceof z.z)throw console.error("FreeSchemaResponse Error",D),D;console.error("Service Worker Error",D)};function Go(){return _n(this,void 0,void 0,function*(){yield Yt("init",{url:r.B.BASE_URL,aiurl:r.B.AI_URL,accessToken:tn.b.BearerAccessToken,nodeUrl:r.B.NODE_URL,enableAi:!1,applicationName:r.B.BASE_APPLICATION,flags:r.B.FLAGS})})}},5238:(X,E,g)=>{let S=g(3152);class N extends S{get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}constructor(h){h&&void 0!==h.value&&"string"!=typeof h.value&&(h={...h,value:String(h.value)}),super(h),this.type="decl"}}X.exports=N,N.default=N},5239:(X,E,g)=>{g.d(E,{O:()=>_});var S=g(205),N=g(5205);class n{constructor(r,e,o,l){this.leftNode=null,this.rightNode=null,this.variants=[],this.height=1,this.key=r,this.value=e,this.leftNode=o,this.rightNode=l,this.currentNode=null}addCurrentNode(r,e){return null==e?e=r:(r.value.typeId!=e.value.typeId&&(e.currentNode=this.addCurrentNode(r,e.currentNode)),e)}addCurrentNodeType(r,e){if(null==e)return r;let o=!1;r.value.id==e.value.id&&(o=!0);for(let l=0;l<e.variants.length;l++)e.variants[l].value.id==r.value.id&&(o=!0);return o||e.variants.push(r),e}getMax(r,e){return r>e?r:e}addNode(r,e,o){if(null==e)return(0,N.dispatchIdEvent)(r.value.ofTheConceptId),r;let f=e.rightNode;if(r.key<e.key)e.leftNode=this.addNode(r,e.leftNode,o);else{if(!(r.key>e.key))return e;e.rightNode=this.addNode(r,f,o)}e.height=1+this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(this.getBalanceFactor(e.leftNode)>=0)return this.rightRotate(e);if(this.getBalanceFactor(e.leftNode)<0)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(this.getBalanceFactor(e.rightNode)<=0)return this.leftRotate(e);if(this.getBalanceFactor(e.rightNode)>0)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}addTypeNode(r,e,o){if(0!=r.value.typeId){if(null==e)return r;let f=e.rightNode;if(e.key>r.key)e.leftNode=this.addTypeNode(r,e.leftNode,o);else{if(!(e.key<r.key))return e.key==r.key&&0!=e.key&&e.addCurrentNodeType(r,e),e;e.rightNode=this.addTypeNode(r,f,o)}e.height=1+this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(r.key<e.leftNode.key)return this.rightRotate(e);if(r.key>e.leftNode.key)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(r.key>e.rightNode.key)return this.leftRotate(e);if(r.key<e.rightNode.key)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}}return e}rightRotate(r){if(r){let e=r.leftNode;if(e)return r.leftNode=e.rightNode,e.rightNode=r,r.height=this.getMax(this.getHeight(r.leftNode),this.getHeight(r.rightNode))+1,e.height=this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,e;throw console.log("this is the error in right rotation",r,e),new Error("Cannot perform right rotation: left node is null.")}return r}leftRotate(r){if(r){let e=r.rightNode;if(e){let o=e.leftNode;return e.leftNode=r,r.rightNode=o,r.height=this.getMax(this.getHeight(r.leftNode),this.getHeight(r.rightNode))+1,e.height=this.getMax(this.getHeight(e.leftNode),this.getHeight(r.rightNode))+1,e}throw console.log("this is the error in left rotation",r,e),new Error("Cannot perform left rotation: right node is null.")}return r}getHeight(r){return r?r.height:0}getBalanceFactor(r){return null==r?0:this.getHeight(r.leftNode)-this.getHeight(r.rightNode)}getFromNode(r,e){try{if(e)return r==e.key?(e.value.count?e.value.count++:e.value.count=1,e):r<e.key?this.getFromNode(r,e.leftNode):r>e.key?this.getFromNode(r,e.rightNode):e}catch{console.log("this is the exception",r,e,e?.leftNode,e?.rightNode)}return e}getCharacterFromNode(r,e){return e&&(r==e.key?e:r<e.key?this.getCharacterFromNode(r,e.leftNode):r>e.key?this.getCharacterFromNode(r,e.rightNode):e)}checkIfIdsInNode(r,e,o,l){if(r){if(e.includes(r.key)){o.push(r.value);let f=e.indexOf(r.key);e.splice(f,1)}r.leftNode&&this.checkIfIdsInNode(r.leftNode,e,o,l),r.rightNode&&this.checkIfIdsInNode(r.rightNode,e,o,l)}}traverse(r){let e=0;return r&&(e+=1,r?.leftNode&&(e+=this.traverse(r.leftNode)),r.rightNode&&(e+=this.traverse(r.rightNode))),e}removeNode(r,e){if(null==r)return r;if(r.key>e)return r.leftNode=this.removeNode(r.leftNode,e),r;if(r.key<e)return r.rightNode=this.removeNode(r.rightNode,e),r;if(new Event(`${r.value.ofTheConceptId}`),(0,N.dispatchIdEvent)(r.value.ofTheConceptId),null==r.leftNode){let o=r.rightNode;return r=null,o}if(null==r.rightNode){let o=r.leftNode;return r=null,o}{let o=this.inOrderSuccessor(r.rightNode);return r.value=o.value,r.key=o.key,r.variants=o.variants,r.currentNode=o.currentNode,r.rightNode=this.removeNode(r.rightNode,o.key),r}}removeNodeWithVariants(r,e,o){if(null==r)return r;if(r.key>e)return r.leftNode=this.removeNodeWithVariants(r.leftNode,e,o),r;if(r.key<e)return r.rightNode=this.removeNodeWithVariants(r.rightNode,e,o),r;if(r.variants.length>0)if(r.value.id==o){let l=r.variants[0];if(l)return r.value=l.value,r.key=l.key,r.currentNode=l.currentNode,r.variants.splice(0,1),r}else for(let l=0;l<r.variants.length;l++)if(o==r.variants[l].value.id)return r.variants.splice(l,1),r;if(null==r.leftNode){let l=r.rightNode;return r=null,l}if(null==r.rightNode){let l=r.leftNode;return r=null,l}{let l=this.inOrderSuccessor(r.rightNode);return r.value=l.value,r.key=l.key,r.variants=l.variants,r.currentNode=l.currentNode,r.rightNode=this.removeNodeWithVariants(r.rightNode,l.key,o),r}}inOrderSuccessor(r){for(;null!=r.leftNode;)r=r.leftNode;return r}}var h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};let _=(()=>{class I{static addNodeToTree(e){try{if(null==this.connectionroot)return this.connectionroot=e,this.connectionroot;this.connectionroot=this.connectionroot.addNode(e,this.connectionroot,this.connectionroot.height)}catch(o){throw console.log("This is the error in making the tree",o),o}}static addConnectionToTree(e){let o=new n(e.id,e,null,null);this.addNodeToTree(o)}static traverse(){var e;return null===(e=this.connectionroot)||void 0===e?void 0:e.traverse(this.connectionroot)}static waitForDataToLoad(){return h(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(S.B.isConnectionLoaded)return e("done");setTimeout(I.checkFlag,1e3,e)}static removeNodeFromTree(e){return h(this,void 0,void 0,function*(){this.connectionroot&&(this.connectionroot=this.connectionroot.removeNode(this.connectionroot,e))})}static getNodeFromTree(e){return h(this,void 0,void 0,function*(){try{return this.connectionroot?this.connectionroot.getFromNode(e,this.connectionroot):this.connectionroot}catch{console.log("this is the getNodeFromTree",e,this.connectionroot)}})}static getConnectionListFromIds(e,o,l){return h(this,void 0,void 0,function*(){this.connectionroot&&this.connectionroot.checkIfIdsInNode(this.connectionroot,e,o,l)})}}return I.connectionroot=null,I})()},5257:(X,E,g)=>{g.d(E,{R:()=>h});var S=g(9003),N=g(3075),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};class h{static AddConceptId(I){this.localId=I.value,(0,S.kH)("localid",I)}static getConceptId(){return n(this,void 0,void 0,function*(){try{if(this.localId){if(this.ReservedLocalId.length<5){yield(0,N.EO)().then(()=>{let r=this.localId;for(let e=1;e<10;e++){let o=this.localId-e;this.ReservedLocalId.push(o),r=o}this.AddConceptId({id:0,value:r})}).catch(r=>(console.log(" getid: cannot get the id from indexdb"),-Math.floor(1e8*Math.random())));let I=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),I}{let I=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),I}}return yield(0,N.EO)().then(()=>{let I=this.localId;for(let r=1;r<10;r++){let e=this.localId-r;this.ReservedLocalId.push(e),I=e}this.AddConceptId({id:0,value:I})}),this.getConceptId()}catch(I){return console.log(" getid: this is the eror in concept",I),-Math.floor(1e8*Math.random())}})}static AddConnectionId(I){this.localConnectionId=I.value}static getConnectionId(){return n(this,void 0,void 0,function*(){try{if(this.localConnectionId){if(this.ReservedConnectionId.length<5){yield(0,N.xd)().then(()=>{let r=this.localConnectionId;for(let e=1;e<10;e++){let o=this.localConnectionId-e;this.ReservedConnectionId.push(o),r=o}}).catch(r=>(console.log("this is the new event",r),-Math.floor(1e8*Math.random())));let I=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),I}{let I=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),I}}return yield(0,N.xd)().then(()=>{let I=this.localConnectionId;for(let r=1;r<10;r++){let e=this.localConnectionId-r;this.ReservedConnectionId.push(e),I=e}this.AddConnectionId({id:1,value:I})}),this.getConnectionId()}catch{return-Math.floor(1e8*Math.random())}})}}h.ReservedLocalId=[],h.ReservedConnectionId=[]},5284:(X,E,g)=>{g.d(E,{B:()=>_});var S=g(5205),N=g(8286),n=g(1863),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(){return h(this,arguments,void 0,function*(I=[]){const r=S.Logger.logfunction("FindConnectionsOfCompositionsBulkInMemory",[I.length])||{};let e=[];try{if(S.serviceWorker){r.serviceWorker=!0;try{const o=yield(0,S.sendMessage)("FindConnectionsOfCompositionsBulkInMemory",{composition_ids:I});return S.Logger.logUpdate(r),o.data}catch(o){console.error("FindConnectionsOfCompositionsBulkInMemory sw error: ",o),(0,n.ey)(r,"FindConnectionsOfCompositionsBulkInMemory",o),(0,S.handleServiceWorkerException)(o)}}for(let o=0;o<I.length;o++){let l=yield N.d.GetConnectionsOfConcept(I[o]);e.push(...l)}return S.Logger.logUpdate(r),e}catch(o){return console.error("FindConnectionsOfCompositionsBulkInMemory error: ",o),(0,n.ey)(r,"FindConnectionsOfCompositionsBulkInMemory",o),e}})}},5286:(X,E)=>{function g(N){for(var n=N.toLowerCase(),h="",_=!1,I=0;I<6&&void 0!==n[I];I++){var r=n.charCodeAt(I);if(_=32===r,!(r>=97&&r<=102||r>=48&&r<=57))break;h+=n[I]}if(0!==h.length){var e=parseInt(h,16);return e>=55296&&e<=57343||0===e||e>1114111?["\ufffd",h.length+(_?1:0)]:[String.fromCodePoint(e),h.length+(_?1:0)]}}E.__esModule=!0,E.default=function(N){if(!S.test(N))return N;for(var n="",h=0;h<N.length;h++)if("\\"!==N[h])n+=N[h];else{var _=g(N.slice(h+1,h+7));if(void 0!==_){n+=_[0],h+=_[1];continue}if("\\"===N[h+1]){n+="\\",h++;continue}N.length===h+1&&(n+=N[h])}return n};var S=/\\/;X.exports=E.default},5312:(X,E,g)=>{g.d(E,{NK:()=>l,Ve:()=>f,cf:()=>e,vw:()=>v,y8:()=>o});var S=g(2832),N=g(3130),n=g(5205),h=g(1863),_=g(6687),I=g(1320),r=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};function e(T){var s=arguments;return r(this,arguments,void 0,function*(a,t="",c=null,C=N.y0){var b,m,L,A,O,B,G,R;const M=n.Logger.logfunction("SearchLinkMultipleAll",s)||{};try{try{if(n.serviceWorker){M.serviceWorker=!0;const xe=yield(0,n.sendMessage)("SearchLinkMultipleAll",{searchQuery:a,token:t,caller:c,format:C});return n.Logger.logUpdate(M),xe.data}}catch(xe){console.error("SearchLinkMultipleAll error sw: ",xe),(0,h.ey)(M,"SearchLinkMultipleAll",xe),(0,n.handleServiceWorkerException)(xe)}let W=[],V=[],Q=[],te=[],ne=a[0].composition,_e={},H={};c?.isDataLoaded?(_e.compositionIds=null===(b=c.conceptIds)||void 0===b?void 0:b.slice(),_e.internalConnections=null===(m=c.internalConnections)||void 0===m?void 0:m.slice(),_e.linkers=null===(L=c.linkers)||void 0===L?void 0:L.slice(),_e.reverse=null===(A=c.reverse)||void 0===A?void 0:A.slice(),H=_e,W=H.compositionIds,Q=H.internalConnections,V=H.linkers,te=H.reverse):(_e=yield(0,S.j)(a,t),c&&(c.conceptIds=null===(O=_e.compositionIds)||void 0===O?void 0:O.slice(),c.internalConnections=null===(B=_e.internalConnections)||void 0===B?void 0:B.slice(),c.linkers=null===(G=_e.linkers)||void 0===G?void 0:G.slice(),c.reverse=null===(R=_e.reverse)||void 0===R?void 0:R.slice(),c.isDataLoaded=!0),H=_e,W=H.compositionIds,Q=H.internalConnections,V=H.linkers,te=H.reverse);let ye=yield function(xe,oe,K,ie,pe,z){return r(this,arguments,void 0,function*(ge,ke,Te,Ee,He,Ye,je=N.y0){try{let et,ft,Pe=yield(0,_.QL)(ge);return je==N.ZJ?(et=yield(0,_.MT)(ke,Te),ft=yield v(ge,et,He,Ee)):je==N.yv?(et=yield(0,_.D)(ke,Te),ft=yield v(ge,et,He,Ee)):100==je?(et=yield(0,_.nr)(ke,Te),ft=yield o(Pe,et,He,Ee)):je==N.SL?ft=yield(0,I._W)(ge,ke,Te,Ye.ofCompositions,Ee):(et=yield(0,_.rv)(ke,Te),ft=yield o(Pe,et,He,Ee)),ft}catch(et){return void console.log("Error Occured in build layer",et)}})}(V,W,Q,te,ne,a[0],C);return n.Logger.logUpdate(M),ye}catch(W){throw console.log("this is the error in the search link multiple",W),(0,h.ey)(M,"SearchLinkMultipleAll",W),W}})}function o(T,s,a){return r(this,arguments,void 0,function*(t,c,C,b=[]){(new Date).getTime();let m={},L=[];for(let A=0;A<t.length;A++)L.push(t[A].toTheConceptId),L.push(t[A].ofTheConceptId),L.push(t[A].typeId);t.sort(function(A,O){return O.id-A.id});for(let A=0;A<t.length;A++){let O=!1;if(b.includes(t[A].id)&&(O=!0),1==O){if(c[t[A].ofTheConceptId]&&c[t[A].toTheConceptId]){let B=c[t[A].toTheConceptId],G=yield(0,n.GetTheConcept)(t[A].typeId),R=B?.data,M=Object.keys(R)[0];try{let W=G.characterValue+"_reverse";"string"==typeof R&&(R={}),Array.isArray(R[M][W])||("string"==typeof R[M]&&(R[M]={}),R[M][W]=[]),R[M][W].push(c[t[A].ofTheConceptId])}catch(W){console.log("this is error",W)}}}else if(c[t[A].ofTheConceptId]&&c[t[A].toTheConceptId]){let B=c[t[A].ofTheConceptId],G=yield(0,n.GetTheConcept)(t[A].typeId),R=B?.data,M=Object.keys(R)[0];try{"string"==typeof R&&(R={}),Array.isArray(R[M][G.characterValue])||("string"==typeof R[M]&&(R[M]={}),R[M][G.characterValue]=[]),R[M][G.characterValue].push(c[t[A].toTheConceptId])}catch(W){console.log("this is error",W)}}}return m=c[C],m})}function l(T,s,a){return r(this,arguments,void 0,function*(t,c,C,b=[]){let m=[],L=[];for(let A=0;A<t.length;A++)L.push(t[A].toTheConceptId),L.push(t[A].ofTheConceptId),L.push(t[A].typeId);t.sort(function(A,O){return O.id-A.id});for(let A=0;A<t.length;A++){let O=!1;if(b.includes(t[A].id)&&(O=!0),1==O){if(c[t[A].ofTheConceptId]&&c[t[A].toTheConceptId]){let B=c[t[A].toTheConceptId],G=yield(0,n.GetTheConcept)(t[A].typeId),R=Object.keys(B)[0];try{let M=G.characterValue+"_reverse";"string"==typeof B&&(B={}),Array.isArray(B[R][M])||("string"==typeof B[R]&&(B[R]={}),B[R][M]=[]),B[R][M].push(c[t[A].ofTheConceptId])}catch(M){console.log("this is error",M)}}}else if(c[t[A].ofTheConceptId]&&c[t[A].toTheConceptId]){let B=c[t[A].ofTheConceptId],G=yield(0,n.GetTheConcept)(t[A].typeId),R=Object.keys(B)[0];try{"string"==typeof B&&(B={}),Array.isArray(B[R][G.characterValue])||("string"==typeof B[R]&&(B[R]={}),B[R][G.characterValue]=[]),B[R][G.characterValue].push(c[t[A].toTheConceptId])}catch(M){console.log("this is error",M)}}}for(let A=0;A<C.length;A++){let O=c[C[A]];O&&m.push(O)}return m})}function f(T,s,a,t){return r(this,arguments,void 0,function*(c,C,b,m,L=[]){(new Date).getTime();let A=[],O=[];for(let B=0;B<c.length;B++)O.push(c[B].toTheConceptId),O.push(c[B].ofTheConceptId),O.push(c[B].typeId);c.sort(function(B,G){return G.id-B.id});for(let B=0;B<c.length;B++){let G=!1;if(L.includes(c[B].id)&&(G=!0),1==G){if(C[c[B].ofTheConceptId]&&C[c[B].toTheConceptId]){let R=C[c[B].toTheConceptId],M=yield(0,n.GetTheConcept)(c[B].typeId),W=R?.data,V=Object.keys(W)[0];try{let Q=M.characterValue+"_reverse";"string"==typeof W&&(W={}),Array.isArray(W[V][Q])||("string"==typeof W[V]&&(W[V]={}),W[V][Q]=[]),W[V][Q].push(C[c[B].ofTheConceptId])}catch(Q){console.log("this is error",Q)}}}else if(C[c[B].ofTheConceptId]&&C[c[B].toTheConceptId]){let R=C[c[B].ofTheConceptId],M=yield(0,n.GetTheConcept)(c[B].typeId),W=R?.data,V=Object.keys(W)[0];try{"string"==typeof W&&(W={}),Array.isArray(W[V][M.characterValue])||("string"==typeof W[V]&&(W[V]={}),W[V][M.characterValue]=[]),W[V][M.characterValue].push(C[c[B].toTheConceptId])}catch(Q){console.log("this is error",Q)}}}for(let B=0;B<m.length;B++){let G=C[m[B]];G&&A.push(G)}return A})}function v(T,s,a){return r(this,arguments,void 0,function*(t,c,C,b=[]){let m={},L=yield(0,n.GetConnectionBulk)(t),A=[];for(let O=0;O<L.length;O++)A.push(L[O].toTheConceptId),A.push(L[O].ofTheConceptId),A.push(L[O].typeId);yield(0,n.GetConceptBulk)(A),L.sort(function(O,B){return B.id-O.id});for(let O=0;O<L.length;O++){let B=!1;if(b.includes(L[O].id)&&(B=!0),1==B){if(c[L[O].ofTheConceptId]&&c[L[O].toTheConceptId]){let G=c[L[O].toTheConceptId],R=yield(0,n.GetTheConcept)(L[O].typeId),M=G,W=Object.keys(M)[0];try{let V=R.characterValue+"_reverse";"string"==typeof M&&(M={}),Array.isArray(M[W][V])||("string"==typeof M[W]&&(M[W]={}),M[W][V]=[]),M[W][V].push(c[L[O].ofTheConceptId])}catch(V){console.log("this is error",V)}}}else if(c[L[O].ofTheConceptId]&&c[L[O].toTheConceptId]){let G=c[L[O].ofTheConceptId],R=yield(0,n.GetTheConcept)(L[O].typeId),M=G,W=Object.keys(M)[0];try{"string"==typeof M&&(M={}),Array.isArray(M[W][R.characterValue])||("string"==typeof M[W]&&(M[W]={}),M[W][R.characterValue]=[]),M[W][R.characterValue].push(c[L[O].toTheConceptId])}catch(V){console.log("this is error",V)}}}return m=c[C],m})}},5328:(X,E,g)=>{g.d(E,{d:()=>r});var S=g(5205),N=g(3130),n=g(8939),h=g(4287),_=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};class I extends h.w{constructor(o,l,f,v,T){super(),this.connections=[],this.data=[],this.mainConcept=o,this.linker=l,this.inpage=f,this.page=v,this.format=T}bind(){return _(this,void 0,void 0,function*(){var o;if(!this.isDataLoaded){let v=yield(0,S.GetTheConcept)(this.mainConcept),T=(null===(o=v.type)||void 0===o?void 0:o.characterValue)+"_s_"+this.linker,s=yield(0,S.GetConceptByCharacterAndType)(T,16);if(s.id>0){let a=yield(0,S.GetConnectionOfTheConcept)(s.id,v.id,v.userId,this.inpage,this.page);this.connections=a;for(var l=[],f=0;f<this.connections.length;f++)l.push(this.connections[f].toTheConceptId),this.linkers.push(this.connections[f].id),this.listenToEvent(this.connections[f].toTheConceptId);yield(0,S.GetAllConnectionsOfCompositionBulk)(l)}this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return _(this,void 0,void 0,function*(){this.data=[],this.connections=yield(0,S.GetConnectionBulk)(this.linkers);for(var o=0;o<this.connections.length;o++){let l=this.connections[o].toTheConceptId,f=yield(0,S.GetTheConcept)(l);if(console.log("this is the format",this.format),this.format==N.yv){let v=yield(0,n.RW)(f.id);this.data.push(v)}else if(this.format==N.ZJ){let v=yield(0,n.kx)(f.id);this.data.push(v)}else if(this.format==N.iw){let v=yield(0,S.GetCompositionWithIdAndDateFromMemory)(f.id);this.data.push(v)}else{let v=yield(0,S.GetCompositionWithIdAndDateFromMemory)(f.id);this.data.push(v)}}return this.data})}}function r(e,o,l,f,v=N.yv){return new I(e,o,l,f,v)}},5457:(X,E,g)=>{g.d(E,{c:()=>I});var S=g(5205),N=g(7282),n=g(205);class h{constructor(e,o){this.value=[],this.height=1,this.key=e,this.value.push(o),this.leftNode=null,this.rightNode=null,this.currentNode=null}addType(e,o,l){var f,v,T,s;if(null==e)return(0,S.dispatchIdEvent)(o,{detail:l}),new h(o,l);if(o<e.key)e.leftNode=this.addType(e.leftNode,o,l);else{if(!(o>e.key))return e.value.includes(l)||((0,S.dispatchIdEvent)(o,{detail:l}),e.value.push(l)),e;e.rightNode=this.addType(e.rightNode,o,l)}e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1;const a=this.getBalanceFactor(e);return a>1&&o<(null===(f=e.leftNode)||void 0===f?void 0:f.key)?this.rightRotate(e):a<-1&&o>(null===(v=e.rightNode)||void 0===v?void 0:v.key)?this.leftRotate(e):a>1&&o>(null===(T=e.leftNode)||void 0===T?void 0:T.key)?(e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)):a<-1&&o<(null===(s=e.rightNode)||void 0===s?void 0:s.key)?(e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)):e}rightRotate(e){if(e){let o=e.leftNode;if(o)return e.leftNode=o.rightNode,o.rightNode=e,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(o.rightNode))+1,o}return e}leftRotate(e){if(e){let o=e.rightNode;if(o){let l=o.leftNode;return o.leftNode=e,e.rightNode=l,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(e.rightNode))+1,o}}return e}getHeight(e){return e?e.height:0}getBalanceFactor(e){return null==e?0:this.getHeight(e.leftNode)-this.getHeight(e.rightNode)}getFromNode(e,o){return o&&(e==o.key?o:e<o.key?this.getFromNode(e,o.leftNode):e>o.key?this.getFromNode(e,o.rightNode):o)}removeNodeWithVariants(e,o,l){if(null==e)return e;if(e.key>o)return e.leftNode=this.removeNodeWithVariants(e.leftNode,o,l),e;if(e.key<o)return e.rightNode=this.removeNodeWithVariants(e.rightNode,o,l),e;if(e.value.length>0)for(let f=0;f<e.value.length;f++)if(l==e.value[f])return e.value.splice(f,1),e;if(null==e.leftNode){let f=e.rightNode;return e=null,f}if(null==e.rightNode){let f=e.leftNode;return e=null,f}{let f=this.inOrderSuccessor(e.rightNode);return e.value=f.value,e.key=f.key,e.currentNode=f.currentNode,e.rightNode=this.removeNodeWithVariants(e.rightNode,f.key,l),e}}countNodeBelow(e){return null==e?0:1+this.countNodeBelow(e.leftNode)+this.countNodeBelow(e.rightNode)}inOrderSuccessor(e){for(;null!=e.leftNode;)e=e.leftNode;return e}}var _=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function T(t){try{a(l.next(t))}catch(c){v(c)}}function s(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(T,s)}a((l=l.apply(r,e||[])).next())})};class I{static addType(e){return _(this,void 0,void 0,function*(){return null==this.root?(this.root=e,new CustomEvent(`${e.key}`,{detail:e.value[0]}),(0,S.dispatchIdEvent)(e.key,{detail:e.value[0]}),this.root):(this.root=this.root.addType(this.root,e.key,e.value[0]),this.root)})}static addConceptToTree(e){if(0!=e.typeId){let o=new h(e.typeId,e.id);this.addType(o)}}static removeTypeConcept(e,o){this.root&&(this.root=this.root.removeNodeWithVariants(this.root,e,o))}static getNodeFromTreeNew(e){return this.root?this.root.getFromNode(e,this.root):this.root}static getTypeVariantsFromTreeNew(e){return _(this,void 0,void 0,function*(){let o=this.getNodeFromTreeNew(e),l=[],f=[];if(o){l=o.value;for(let v=0;v<l.length;v++){let T=!1;for(let s=0;s<f.length;s++)f[s].id==l[v]&&(T=!0);T||f.push(yield(0,S.GetTheConcept)(l[v]))}}return f})}static waitForDataToLoad(){return _(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isTypeLoaded)return e("done");setTimeout(I.checkFlag,1e3,e)}static getTypeVariantsFromTreeWithUserIdNew(e,o){return _(this,void 0,void 0,function*(){let l=[],f=yield this.getTypeVariantsFromTreeNew(e);console.log("these are all the concepts",f);for(let v=0;v<f.length;v++)f[v].userId==o&&l.push(f[v]);return l})}static getTypeVariantsWithCharacterValueNew(e,o){return _(this,void 0,void 0,function*(){let l=yield this.getTypeVariantsFromTreeNew(o);console.log("this is all the concepts for character",l);let f=(0,N.o)();for(let v=0;v<l.length;v++)l[v].characterValue==e&&(f=l[v]);return f})}static countNumberOfNodes(){return this.typeRoot?this.typeRoot.countNodeBelow(this.typeRoot):0}}I.typeRoot=null,I.root=null},5588:(X,E,g)=>{E.__esModule=!0,E.default=void 0,E.unescapeValue=s;var S,N=I(g(8937)),n=I(g(5286)),h=I(g(3295)),_=g(1581);function I(C){return C&&C.__esModule?C:{default:C}}function e(C,b){return(e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,L){return m.__proto__=L,m})(C,b)}var o=g(4643),l=/^('|")([^]*)\1$/,f=o(function(){},"Assigning an attribute a value containing characters that might need to be escaped is deprecated. Call attribute.setValue() instead."),v=o(function(){},"Assigning attr.quoted is deprecated and has no effect. Assign to attr.quoteMark instead."),T=o(function(){},"Constructing an Attribute selector with a value without specifying quoteMark is deprecated. Note: The value should be unescaped now.");function s(C){var b=!1,m=null,L=C,A=L.match(l);return A&&(m=A[1],L=A[2]),(L=(0,n.default)(L))!==C&&(b=!0),{deprecatedUsage:b,unescaped:L,quoteMark:m}}var a=function(C){var b,m;function L(G){var R;return void 0===G&&(G={}),(R=C.call(this,function(M){if(void 0!==M.quoteMark||void 0===M.value)return M;T();var W=s(M.value),V=W.quoteMark,Q=W.unescaped;return M.raws||(M.raws={}),void 0===M.raws.value&&(M.raws.value=M.value),M.value=Q,M.quoteMark=V,M}(G))||this).type=_.ATTRIBUTE,R.raws=R.raws||{},Object.defineProperty(R.raws,"unquoted",{get:o(function(){return R.value},"attr.raws.unquoted is deprecated. Call attr.value instead."),set:o(function(){return R.value},"Setting attr.raws.unquoted is deprecated and has no effect. attr.value is unescaped by default now.")}),R._constructed=!0,R}m=C,(b=L).prototype=Object.create(m.prototype),b.prototype.constructor=b,e(b,m);var A,O,B=L.prototype;return B.getQuotedValue=function(G){void 0===G&&(G={});var R=this._determineQuoteMark(G);return(0,N.default)(this._value,t[R])},B._determineQuoteMark=function(G){return G.smart?this.smartQuoteMark(G):this.preferredQuoteMark(G)},B.setValue=function(G,R){void 0===R&&(R={}),this._value=G,this._quoteMark=this._determineQuoteMark(R),this._syncRawValue()},B.smartQuoteMark=function(G){var R=this.value,M=R.replace(/[^']/g,"").length,W=R.replace(/[^"]/g,"").length;if(M+W===0){var V=(0,N.default)(R,{isIdentifier:!0});if(V===R)return L.NO_QUOTE;var Q=this.preferredQuoteMark(G);if(Q===L.NO_QUOTE){var te=this.quoteMark||G.quoteMark||L.DOUBLE_QUOTE;if((0,N.default)(R,t[te]).length<V.length)return te}return Q}return W===M?this.preferredQuoteMark(G):W<M?L.DOUBLE_QUOTE:L.SINGLE_QUOTE},B.preferredQuoteMark=function(G){var R=G.preferCurrentQuoteMark?this.quoteMark:G.quoteMark;return void 0===R&&(R=G.preferCurrentQuoteMark?G.quoteMark:this.quoteMark),void 0===R&&(R=L.DOUBLE_QUOTE),R},B._syncRawValue=function(){var G=(0,N.default)(this._value,t[this.quoteMark]);G===this._value?this.raws&&delete this.raws.value:this.raws.value=G},B._handleEscapes=function(G,R){if(this._constructed){var M=(0,N.default)(R,{isIdentifier:!0});M!==R?this.raws[G]=M:delete this.raws[G]}},B._spacesFor=function(G){return Object.assign({before:"",after:""},this.spaces[G]||{},this.raws.spaces&&this.raws.spaces[G]||{})},B._stringFor=function(G,R,M){void 0===R&&(R=G),void 0===M&&(M=c);var W=this._spacesFor(R);return M(this.stringifyProperty(G),W)},B.offsetOf=function(G){var R=1,M=this._spacesFor("attribute");if(R+=M.before.length,"namespace"===G||"ns"===G)return this.namespace?R:-1;if("attributeNS"===G||(R+=this.namespaceString.length,this.namespace&&(R+=1),"attribute"===G))return R;R+=this.stringifyProperty("attribute").length,R+=M.after.length;var W=this._spacesFor("operator");R+=W.before.length;var V=this.stringifyProperty("operator");if("operator"===G)return V?R:-1;R+=V.length,R+=W.after.length;var Q=this._spacesFor("value");R+=Q.before.length;var te=this.stringifyProperty("value");return"value"===G?te?R:-1:(R+=te.length,R+=Q.after.length,R+=this._spacesFor("insensitive").before.length,"insensitive"===G&&this.insensitive?R:-1)},B.toString=function(){var G=this,R=[this.rawSpaceBefore,"["];return R.push(this._stringFor("qualifiedAttribute","attribute")),this.operator&&(this.value||""===this.value)&&(R.push(this._stringFor("operator")),R.push(this._stringFor("value")),R.push(this._stringFor("insensitiveFlag","insensitive",function(M,W){return!(M.length>0)||G.quoted||0!==W.before.length||G.spaces.value&&G.spaces.value.after||(W.before=" "),c(M,W)}))),R.push("]"),R.push(this.rawSpaceAfter),R.join("")},A=L,(O=[{key:"quoted",get:function(){var G=this.quoteMark;return"'"===G||'"'===G},set:function(G){v()}},{key:"quoteMark",get:function(){return this._quoteMark},set:function(G){this._constructed?this._quoteMark!==G&&(this._quoteMark=G,this._syncRawValue()):this._quoteMark=G}},{key:"qualifiedAttribute",get:function(){return this.qualifiedName(this.raws.attribute||this.attribute)}},{key:"insensitiveFlag",get:function(){return this.insensitive?"i":""}},{key:"value",get:function(){return this._value},set:function(G){if(this._constructed){var R=s(G),W=R.unescaped,V=R.quoteMark;if(R.deprecatedUsage&&f(),W===this._value&&V===this._quoteMark)return;this._value=W,this._quoteMark=V,this._syncRawValue()}else this._value=G}},{key:"insensitive",get:function(){return this._insensitive},set:function(G){G||(this._insensitive=!1,!this.raws||"I"!==this.raws.insensitiveFlag&&"i"!==this.raws.insensitiveFlag||(this.raws.insensitiveFlag=void 0)),this._insensitive=G}},{key:"attribute",get:function(){return this._attribute},set:function(G){this._handleEscapes("attribute",G),this._attribute=G}}])&&function r(C,b){for(var m=0;m<b.length;m++){var L=b[m];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(C,L.key,L)}}(A.prototype,O),Object.defineProperty(A,"prototype",{writable:!1}),L}(h.default);E.default=a,a.NO_QUOTE=null,a.SINGLE_QUOTE="'",a.DOUBLE_QUOTE='"';var t=((S={"'":{quotes:"single",wrap:!0},'"':{quotes:"double",wrap:!0}}).null={isIdentifier:!0},S);function c(C,b){return""+b.before+C+b.after}},5644:(X,E,g)=>{let S,N,n=g(7793);class h extends n{constructor(I){super(I),this.type="root",this.nodes||(this.nodes=[])}normalize(I,r,e){let o=super.normalize(I);if(r)if("prepend"===e)this.nodes.length>1?r.raws.before=this.nodes[1].raws.before:delete r.raws.before;else if(this.first!==r)for(let l of o)l.raws.before=r.raws.before;return o}removeChild(I,r){let e=this.index(I);return!r&&0===e&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[e].raws.before),super.removeChild(I)}toResult(I={}){return new S(new N,this,I).stringify()}}h.registerLazyResult=_=>{S=_},h.registerProcessor=_=>{N=_},X.exports=h,h.default=h,n.registerRoot(h)},5781:X=>{const E="'".charCodeAt(0),g='"'.charCodeAt(0),S="\\".charCodeAt(0),N="/".charCodeAt(0),n="\n".charCodeAt(0),h=" ".charCodeAt(0),_="\f".charCodeAt(0),I="\t".charCodeAt(0),r="\r".charCodeAt(0),e="[".charCodeAt(0),o="]".charCodeAt(0),l="(".charCodeAt(0),f=")".charCodeAt(0),v="{".charCodeAt(0),T="}".charCodeAt(0),s=";".charCodeAt(0),a="*".charCodeAt(0),t=":".charCodeAt(0),c="@".charCodeAt(0),C=/[\t\n\f\r "#'()/;[\\\]{}]/g,b=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,m=/.[\r\n"'(/\\]/,L=/[\da-f]/i;X.exports=function(A,O={}){let B,G,R,M,W,V,Q,te,ne,_e,H=A.css.valueOf(),ye=O.ignoreErrors,xe=H.length,oe=0,K=[],ie=[];function pe(z){throw A.error("Unclosed "+z,oe)}return{back:function(z){ie.push(z)},endOfFile:function(){return 0===ie.length&&oe>=xe},nextToken:function(z){if(ie.length)return ie.pop();if(oe>=xe)return;let ge=!!z&&z.ignoreUnclosed;switch(B=H.charCodeAt(oe),B){case n:case h:case I:case r:case _:M=oe;do{M+=1,B=H.charCodeAt(M)}while(B===h||B===n||B===I||B===r||B===_);V=["space",H.slice(oe,M)],oe=M-1;break;case e:case o:case v:case T:case t:case s:case f:{let ke=String.fromCharCode(B);V=[ke,ke,oe];break}case l:if(_e=K.length?K.pop()[1]:"",ne=H.charCodeAt(oe+1),"url"===_e&&ne!==E&&ne!==g&&ne!==h&&ne!==n&&ne!==I&&ne!==_&&ne!==r){M=oe;do{if(Q=!1,M=H.indexOf(")",M+1),-1===M){if(ye||ge){M=oe;break}pe("bracket")}for(te=M;H.charCodeAt(te-1)===S;)te-=1,Q=!Q}while(Q);V=["brackets",H.slice(oe,M+1),oe,M],oe=M}else M=H.indexOf(")",oe+1),G=H.slice(oe,M+1),-1===M||m.test(G)?V=["(","(",oe]:(V=["brackets",G,oe,M],oe=M);break;case E:case g:W=B===E?"'":'"',M=oe;do{if(Q=!1,M=H.indexOf(W,M+1),-1===M){if(ye||ge){M=oe+1;break}pe("string")}for(te=M;H.charCodeAt(te-1)===S;)te-=1,Q=!Q}while(Q);V=["string",H.slice(oe,M+1),oe,M],oe=M;break;case c:C.lastIndex=oe+1,C.test(H),M=0===C.lastIndex?H.length-1:C.lastIndex-2,V=["at-word",H.slice(oe,M+1),oe,M],oe=M;break;case S:for(M=oe,R=!0;H.charCodeAt(M+1)===S;)M+=1,R=!R;if(B=H.charCodeAt(M+1),R&&B!==N&&B!==h&&B!==n&&B!==I&&B!==r&&B!==_&&(M+=1,L.test(H.charAt(M)))){for(;L.test(H.charAt(M+1));)M+=1;H.charCodeAt(M+1)===h&&(M+=1)}V=["word",H.slice(oe,M+1),oe,M],oe=M;break;default:B===N&&H.charCodeAt(oe+1)===a?(M=H.indexOf("*/",oe+2)+1,0===M&&(ye||ge?M=H.length:pe("comment")),V=["comment",H.slice(oe,M+1),oe,M],oe=M):(b.lastIndex=oe+1,b.test(H),M=0===b.lastIndex?H.length-1:b.lastIndex-2,V=["word",H.slice(oe,M+1),oe,M],K.push(V),oe=M)}return oe++,V},position:function(){return oe}}}},5799:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.STRING,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,X.exports=E.default},5868:(X,E,g)=>{g.d(E,{k:()=>r});var S=g(3077),N=g(8357),n=g(9736),h=g(5205),_=g(1863),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function r(e,o){var l=arguments;return I(this,arguments,void 0,function*(f,v,T=!1,s,a,t=999,c=0,C={concepts:[],connections:[]}){var b,m,L,A;const O=h.Logger.logfunction("MakeTheInstanceConceptLocal",l)||{};if(h.serviceWorker){O.serviceWorker=!0;try{const B=yield(0,h.sendMessage)("MakeTheInstanceConceptLocal",{type:f,referent:v,composition:T,userId:s,accessId:a,sessionInformationId:t,referentId:c,actions:C});return!(null===(m=null===(b=B?.actions)||void 0===b?void 0:b.concepts)||void 0===m)&&m.length&&(C.concepts=JSON.parse(JSON.stringify(B.actions.concepts))),!(null===(A=null===(L=B?.actions)||void 0===L?void 0:L.connections)||void 0===A)&&A.length&&(C.connections=JSON.parse(JSON.stringify(B.actions.connections))),h.Logger.logUpdate(O),B.data}catch(B){console.error("MakeTheInstanceConceptLocal error sw: ",B),(0,_.ey)(O,"MakeTheInstanceConceptLocal",B),(0,h.handleServiceWorkerException)(B)}}try{let B,G,R=999,M=4,W=s,V=4,Q="",te=v.length;if(Q=f.startsWith("the_")?f:"the_"+f,T)B=yield(0,N.$)(f,R,s,s,C),G=yield(0,S.A)(v,f,s,M,B.id,V,!0,c,C);else if(te>255)B=yield(0,N.$)(Q,R,W,s,C),G=yield(0,S.A)(v,Q,s,M,B.id,V,void 0,void 0,C);else{B=yield(0,N.$)(Q,R,W,s,C);let ne=yield n.v.GetConceptByCharacterAndTypeLocal(v,B.id);G=ne,0==ne.id&&0==ne.userId&&(G=yield(0,S.A)(v,Q,s,M,B.id,V,void 0,void 0,C))}return G.type=B,h.LocalSyncData.AddConcept(G),C.concepts.push(G),h.Logger.logUpdate(O),G}catch(B){throw(0,_.ey)(O,"MakeTheInstanceConceptLocal",B),B}})}},5976:(X,E,g)=>{g.d(E,{p:()=>r,B:()=>I});var S=g(9581),N=g(3518),n=g(1863),h=g(5205),_=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};let I=(()=>{class e{static getId(){return _(this,void 0,void 0,function*(){this.ids.length<5&&(yield function(){var f,T,s,a=arguments;return f=this,s=function*(){const t=h.Logger.logfunction("GetReservedIds",a);try{let c=(0,N.Xr)("application/x-www-form-urlencoded");const C=yield fetch(S.B.GetReservedIdUrl(),{method:"GET",headers:c});if(!C.ok)throw(0,n.ry)(C),new Error(`Error! status: ${C.status}`);const b=yield C.json();for(let m=0;m<b.length;m++)e.AddId(b[m]);h.Logger.logUpdate(t)}catch(c){c instanceof Error?console.log("get reserved ids error message: ",c.message):console.log("get reserved ids  unexpected error: ",c),(0,n.Mb)(c,S.B.GetReservedIdUrl()),(0,n.ey)(t,"GetReservedIds",c)}},new((T=void 0)||(T=Promise))(function(t,c){function C(L){try{m(s.next(L))}catch(A){c(A)}}function b(L){try{m(s.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof T?A:new T(function(O){O(A)})).then(C,b)}m((s=s.apply(f,[])).next())})}());var l=this.ids[0];return this.ids.shift(),l})}static AddId(l){this.ids.includes(l)||this.ids.push(l)}}return e.ids=[],e})(),r=(()=>{class e{static getId(){return _(this,void 0,void 0,function*(){this.connectionIds.length<5&&(yield function(){var f,T,s,a=arguments;return f=this,s=function*(){const t=h.Logger.logfunction("GetReservedConnectionIds",a);try{let c=(0,N.Xr)("application/x-www-form-urlencoded");const C=yield fetch(S.B.GetReservedConnectionIdUrl(),{method:"GET",headers:c});if(!C.ok)throw(0,n.ry)(C),new Error(`Error! status: ${C.status}`);const b=yield C.json();for(let m=0;m<b.length;m++)e.AddId(b[m]);h.Logger.logUpdate(t)}catch(c){c instanceof Error?console.log("get reserved connection ids error message: ",c.message):console.log("get reserved connection ids  unexpected error: ",c),(0,n.Mb)(c,S.B.GetReservedConnectionIdUrl()),(0,n.ey)(t,"GetReservedConnectionIds",c)}},new((T=void 0)||(T=Promise))(function(t,c){function C(L){try{m(s.next(L))}catch(A){c(A)}}function b(L){try{m(s.throw(L))}catch(A){c(A)}}function m(L){var A;L.done?t(L.value):(A=L.value,A instanceof T?A:new T(function(O){O(A)})).then(C,b)}m((s=s.apply(f,[])).next())})}());var l=this.connectionIds[0];return this.connectionIds.shift(),l})}static AddId(l){this.connectionIds.includes(l)||this.connectionIds.push(l)}}return e.connectionIds=[],e})()},6058:(X,E,g)=>{g.d(E,{W:()=>_});var S=g(1863),N=g(3518),n=g(5205),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(I){var r=arguments;return h(this,void 0,void 0,function*(){const e=n.Logger.logfunction("GetAllLinkerConnectionsToTheConcept",r);var o=[];try{(new Date).getTime();var l=(0,N.Xr)("application/x-www-form-urlencoded");const T=yield fetch(n.BaseUrl.GetAllLinkerConnectionToConceptUrl()+`?conceptId=${I}`,{method:"GET",headers:l});if(T.ok){const s=yield T.json();for(var f=0;f<s.length;f++)o.push(s[f]);n.Logger.logUpdate(e)}else console.log("Get all linker connection To the concepts error","cannot get respone"),(0,S.ry)(T)}catch(T){T instanceof Error?console.log("Get all linker connection To the concepts error: ",T.message):console.log("Get all linker connection To the concepts error(Unexpected): ",T),(0,S.Mb)(T,n.BaseUrl.GetAllLinkerConnectionToConceptUrl()),(0,S.ey)(e,"GetAllLinkerConnectionsToTheConcept",T)}return o})}},6156:X=>{let E={};X.exports=function(g){E[g]||(E[g]=!0,typeof console<"u"&&console.warn&&console.warn(g))}},6291:(X,E)=>{E.__esModule=!0,E.default=function(g){for(var S=arguments.length,N=new Array(S>1?S-1:0),n=1;n<S;n++)N[n-1]=arguments[n];for(;N.length>0;){var h=N.shift();if(!g[h])return;g=g[h]}return g},X.exports=E.default},6416:(X,E,g)=>{g.d(E,{u:()=>N});var S=g(2615);function N(){return new S.j(0,0,0,0,0,"0",0,!1,new Date,new Date,"0")}},6467:(X,E,g)=>{function S(N){const n=N.lastIndexOf("_");let h=[];return h=n>0?[N.substring(0,n),N.substring(n+1,N.length)]:[N],h}g.d(E,{f:()=>S})},6687:(X,E,g)=>{g.d(E,{D:()=>b,MT:()=>C,Nt:()=>v,QL:()=>a,as:()=>T,cw:()=>o,dF:()=>e,hG:()=>s,km:()=>f,nr:()=>c,p8:()=>l,rv:()=>t});var S=g(8642),N=g(7467),n=g(5205),h=g(1863),_=g(5284),I=g(8939),r=function(m,L,A,O){return new(A||(A=Promise))(function(B,G){function R(V){try{W(O.next(V))}catch(Q){G(Q)}}function M(V){try{W(O.throw(V))}catch(Q){G(Q)}}function W(V){var Q;V.done?B(V.value):(Q=V.value,Q instanceof A?Q:new A(function(te){te(Q)})).then(R,M)}W((O=O.apply(m,L||[])).next())})};function e(){return r(this,arguments,void 0,function*(m=[]){yield(0,S.Y)(m);let L=[];for(let A=0;A<m.length;A++){let O=yield(0,I.kx)(m[A]);L.push(O)}return L})}function o(){return r(this,arguments,void 0,function*(m=[]){yield(0,S.Y)(m);let L=[];for(let A=0;A<m.length;A++){let O=yield(0,I.RW)(m[A]);L.push(O)}return L})}function l(){return r(this,arguments,void 0,function*(m=[],L=[]){const A=n.Logger.logfunction("GetCompositionFromConnectionsWithDataId",[m])||{};if(n.serviceWorker){A.serviceWorker=!0;try{const B=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataId",{conceptIds:m,connectionIds:L});return n.Logger.logUpdate(A),B.data}catch(B){console.error("GetCompositionFromConnectionsWithDataId error sw: ",B),(0,h.ey)(A,"GetCompositionFromConnectionsWithDataId",B),(0,n.handleServiceWorkerException)(B)}}let O=[];for(let B=0;B<m.length;B++){let G=yield(0,I.RW)(m[B]);O.push(G)}return n.Logger.logUpdate(A),O})}function f(){var m=arguments;return r(this,arguments,void 0,function*(L=[],A=[]){const O=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdFromConnections",m)||{};if(n.serviceWorker){O.serviceWorker=!0;try{const R=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataIdFromConnections",{conceptIds:L,connectionIds:A});return n.Logger.logUpdate(O),R.data}catch(R){console.error("GetCompositionFromConnectionsWithDataIdFromConnections error sw: ",R),(0,h.ey)(O,"GetCompositionFromConnectionsWithDataIdFromConnections",R),(0,n.handleServiceWorkerException)(R)}}let B=yield(0,N.j)(A),G=[];for(let R=0;R<L.length;R++){let M=yield(0,I.PT)(L[R],B);G.push(M)}return n.Logger.logUpdate(O),G})}function v(){var m=arguments;return r(this,arguments,void 0,function*(L=[],A=[]){const O=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdIndex",m)||{};if(n.serviceWorker){O.serviceWorker=!0;try{const G=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataIdIndex",{conceptIds:L,connectionIds:A});return n.Logger.logUpdate(O),G.data}catch(G){console.error("GetCompositionFromConnectionsWithDataIdIndex error sw: ",G),(0,h.ey)(O,"GetCompositionFromConnectionsWithDataIdIndex",G),(0,n.handleServiceWorkerException)(G)}}yield(0,N.j)(A),yield(0,_.B)(L);let B={};for(let G=0;G<L.length;G++){let R=yield(0,I.RW)(L[G]);B[L[G]]=R}return n.Logger.logUpdate(O),B})}function T(){return r(this,arguments,void 0,function*(m=[],L=[]){yield(0,N.j)(L),yield(0,_.B)(m);let A={};for(let O=0;O<m.length;O++){let B=yield(0,I.kx)(m[O]);A[m[O]]=B}return A})}function s(){return r(this,arguments,void 0,function*(m=[],L=[]){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetCompositionFromConnectionsWithIndexFromConnections",{conceptIds:m,connectionIds:L})).data}catch(B){console.error("GetCompositionFromConnectionsWithIndexFromConnections error sw: ",B),(0,n.handleServiceWorkerException)(B)}let A=yield(0,N.j)(L),O=[];for(let B=0;B<m.length;B++){let G=yield(0,I.JA)(m[B],A);O[m[B]]=G}return O})}function a(m){var L=arguments;return r(this,void 0,void 0,function*(){const A=n.Logger.logfunction("GetConnectionDataPrefetch",L)||{};if(n.serviceWorker){A.serviceWorker=!0;try{const W=yield(0,n.sendMessage)("GetConnectionDataPrefetch",{connectionIds:m});return n.Logger.logUpdate(A),W.data}catch(W){console.error("GetConnectionDataPrefetch error sw: ",W),(0,h.ey)(A,"GetConnectionDataPrefetch",W),(0,n.handleServiceWorkerException)(W)}}let O=[],B=[],G={};for(let W=0;W<m.length;W++){let V=yield n.ConnectionData.GetConnection(m[W]);0==V.id?O.push(m[W]):B.push(V)}for(let W=0;W<O.length;W++)G[m[W]]=!1;let R=[],M=yield(0,N.j)(O);B=[...B,...M];for(let W=0;W<B.length;W++)R.push(B[W].ofTheConceptId),R.push(B[W].toTheConceptId),R.push(B[W].typeId);return yield(0,n.GetConceptBulk)(R),n.Logger.logUpdate(A),B})}function t(){var m=arguments;return r(this,arguments,void 0,function*(L=[],A=[]){const O=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdInObject",m);yield(0,N.j)(A);let B={};for(let G=0;G<L.length;G++){let R=yield(0,I.RW)(L[G]);B[L[G]]=R}return n.Logger.logUpdate(O),B})}function c(){return r(this,arguments,void 0,function*(m=[],L=[]){yield(0,N.j)(L);let A={};for(let O=0;O<m.length;O++){let B=yield(0,I.$N)(m[O]);A[m[O]]=B}return A})}function C(){return r(this,arguments,void 0,function*(m=[],L=[]){yield(0,N.j)(L);let A={};for(let O=0;O<m.length;O++){let B=yield(0,I.kx)(m[O]);A[m[O]]=B}return A})}function b(){return r(this,arguments,void 0,function*(m=[],L=[]){yield(0,N.j)(L);let A={};for(let O=0;O<m.length;O++){let B=yield(0,I.XI)(m[O]);A[m[O]]=B,console.log("this is the normal data",m[O],B)}return A})}},6731:(X,E,g)=>{g.d(E,{b:()=>S});class S{constructor(n,h,_,I){this.variants=[],this.height=1,this.key=n,this.value=h,this.leftNode=_,this.rightNode=I,this.currentNode=null}addCurrentNode(n,h){return null==h?h=n:(n.value.typeId!=h.value.typeId&&(h.currentNode=this.addCurrentNode(n,h.currentNode)),h)}addCurrentNodeType(n,h){if(null==h)return n;let _=!1;for(let I=0;I<h.variants.length;I++)h.variants[I].value.id==n.value.id&&(_=!0);return _||h.variants.push(n),h}addNode(n,h,_){if(null==h)return n;let r=h.rightNode;if(h.key>n.key)h.leftNode=this.addNode(n,h.leftNode,_);else{if(!(h.key<n.key))return h;h.rightNode=this.addNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}return h}checkIfIdsInNode(n,h,_,I){if(n){if(h.includes(n.key)){_.push(n.value);let r=h.indexOf(n.key);h.splice(r,1)}n.leftNode&&this.checkIfIdsInNode(n.leftNode,h,_,I),n.rightNode&&this.checkIfIdsInNode(n.rightNode,h,_,I)}}addCharacterNode(n,h,_){if(""!=n.value.characterValue){if(null==h)return n;let r=h.rightNode;if(h.key>n.key)h.leftNode=this.addCharacterNode(n,h.leftNode,_);else{if(!(h.key<n.key))return h.key==n.key&&""!=h.key&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),h;h.rightNode=this.addCharacterNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}addTypeNode(n,h,_){if(0!=n.value.typeId){if(null==h)return console.log("adding the type node to the tree",n),n;let r=h.rightNode;if(h.key>n.key)h.leftNode=this.addTypeNode(n,h.leftNode,_);else{if(!(h.key<n.key))return console.log("adding the type node to the tree down",n),h.key==n.key&&0!=h.key&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),console.log("adding the type node to the tree last",h),h;h.rightNode=this.addTypeNode(n,r,_)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}rightRotate(n){if(n){let h=n.leftNode;if(h)return n.leftNode=h.rightNode,h.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,h}return n}leftRotate(n){if(n){let h=n.rightNode;if(h){let _=h.leftNode;return h.leftNode=n,n.rightNode=_,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(n.rightNode))+1,h}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return null==n?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}getFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getFromNode(n,h.leftNode):n>h.key?this.getFromNode(n,h.rightNode):h)}getCharacterFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getCharacterFromNode(n,h.leftNode):n>h.key?this.getCharacterFromNode(n,h.rightNode):h)}getCharacterFromNodeUpdated(n,h){var _;return h&&(n==h.key||51==(null===(_=h.value)||void 0===_?void 0:_.typeId)?h:n<h.key?this.getCharacterFromNode(n,h.leftNode):n>h.key?this.getCharacterFromNode(n,h.rightNode):h)}getFromNodeWithCharacterAndType(n,h,_){if(n=`${n}`,_){if(n==_.key){if(n==_.value.characterValue&&h==_.value.typeId)return _;for(let I=0;I<_.variants.length;I++)if(_.variants[I].value.typeId==h)return _.variants[I]}else{if(n<_.key)return this.getFromNodeWithCharacterAndType(n,h,_.leftNode);if(n>_.key)return this.getFromNodeWithCharacterAndType(n,h,_.rightNode)}return null}return _}getFromNodeWithCharacterAndCategory(n,h,_){if(n=`${n}`,_){if(n==_.key){if(n==_.value.characterValue&&h==_.value.categoryId)return _;for(let I=0;I<_.variants.length;I++)if(_.variants[I].value.categoryId==h)return _.variants[I]}else{if(n<_.key)return this.getFromNodeWithCharacterAndCategory(n,h,_.leftNode);if(n>_.key)return this.getFromNodeWithCharacterAndCategory(n,h,_.rightNode)}return null}return _}removeNode(n,h){if(null==n)return n;if(n.key>h)return n.leftNode=this.removeNode(n.leftNode,h),n;if(n.key<h)return n.rightNode=this.removeNode(n.rightNode,h),n;if(null==n.leftNode){let _=n.rightNode;return n=null,_}if(null==n.rightNode){let _=n.leftNode;return n=null,_}{let _=this.inOrderSuccessor(n.rightNode);return n.value=_.value,n.key=_.key,n.variants=_.variants,n.currentNode=_.currentNode,n.rightNode=this.removeNode(n.rightNode,_.key),n}}removeNodeWithVariants(n,h,_){if(null==n)return n;if(n.key>h)return n.leftNode=this.removeNodeWithVariants(n.leftNode,h,_),n;if(n.key<h)return n.rightNode=this.removeNodeWithVariants(n.rightNode,h,_),n;if(n.variants.length>0)if(n.value.id==_){let I=n.variants[0];if(I)return n.value=I.value,n.key=I.key,n.currentNode=I.currentNode,n.variants.splice(0,1),n}else for(let I=0;I<n.variants.length;I++)if(_==n.variants[I].value.id)return n.variants.splice(I,1),n;if(null==n.leftNode){let I=n.rightNode;return n=null,I}if(null==n.rightNode){let I=n.leftNode;return n=null,I}{let I=this.inOrderSuccessor(n.rightNode);return n.value=I.value,n.key=I.key,n.variants=I.variants,n.currentNode=I.currentNode,n.rightNode=this.removeNodeWithVariants(n.rightNode,I.key,_),n}}countNodeBelow(n){return null==n?0:1+this.countNodeBelow(n.leftNode)+this.countNodeBelow(n.rightNode)}inOrderSuccessor(n){for(;null!=n.leftNode;)n=n.leftNode;return n}}},6846:(X,E,g)=>{let S=g(145),N=g(6966),n=g(4211),h=g(5644);class _{constructor(r=[]){this.version="8.5.6",this.plugins=this.normalize(r)}normalize(r){let e=[];for(let o of r)if(!0===o.postcss?o=o():o.postcss&&(o=o.postcss),"object"==typeof o&&Array.isArray(o.plugins))e=e.concat(o.plugins);else if("object"==typeof o&&o.postcssPlugin)e.push(o);else if("function"==typeof o)e.push(o);else if("object"!=typeof o||!o.parse&&!o.stringify)throw new Error(o+" is not a PostCSS plugin");return e}process(r,e={}){return this.plugins.length||e.parser||e.stringifier||e.syntax?new N(this,r,e):new n(this,r,e)}use(r){return this.plugins=this.plugins.concat(this.normalize([r])),this}}X.exports=_,_.default=_,h.registerProcessor(_),S.registerProcessor(_)},6915:(X,E,g)=>{function S(N,n="DESC"){return N.sort("ASC"==n?function(h,_){return h.id-_.id}:function(h,_){return _.id-h.id}),N}g.d(E,{X:()=>S})},6963:(X,E,g)=>{g.d(E,{f:()=>h});var S=g(205),N=g(6731),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};let h=(()=>{class _{static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((r,e)=>{this.checkFlag(r),setTimeout(()=>{e("not")},25e3)})})}static checkFlag(r){if(S.B.isCharacterLoaded)return r("done");setTimeout(_.checkFlag,1e3,r)}static addNodeToTree(r){return n(this,void 0,void 0,function*(){return null==this.characterRoot?(this.characterRoot=r,this.characterRoot):(this.characterRoot=this.characterRoot.addCharacterNode(r,this.characterRoot,this.characterRoot.height),this.characterRoot)})}static removeNodeByCharacter(r,e){return n(this,void 0,void 0,function*(){this.characterRoot&&this.characterRoot.removeNodeWithVariants(this.characterRoot,r,e)})}static countNumberOfNodes(){return this.characterRoot?this.characterRoot.countNodeBelow(this.characterRoot):0}static addConceptToTree(r){if(""!=r.characterValue){var e=new N.b(r.characterValue,r,null,null);this.addNodeToTree(e)}}static getNodeFromTree(r){return this.characterRoot?this.characterRoot.getCharacterFromNode(r,this.characterRoot):this.characterRoot}static getNodeFromTreeUpdated(r){return this.characterRoot?this.characterRoot.getCharacterFromNode(r,this.characterRoot):this.characterRoot}static getCharacterAndTypeFromTree(r,e){return n(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndType(r,e,this.characterRoot):this.characterRoot})}static getCharacterAndCategoryFromTree(r,e){return n(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndCategory(r,e,this.characterRoot):this.characterRoot})}static removeConceptCharacter(r){this.characterRoot&&(this.characterRoot=this.characterRoot.removeNode(this.characterRoot,r))}}return _.characterRoot=null,_})()},6966:(X,E,g)=>{let S=g(7793),N=g(145),n=g(3604),h=g(9577),_=g(3717),I=g(5644),r=g(3303),{isClean:e,my:o}=g(4151);g(6156);const l={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},f={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},v={Once:!0,postcssPlugin:!0,prepare:!0};function T(b){return"object"==typeof b&&"function"==typeof b.then}function s(b){let m=!1,L=l[b.type];return"decl"===b.type?m=b.prop.toLowerCase():"atrule"===b.type&&(m=b.name.toLowerCase()),m&&b.append?[L,L+"-"+m,0,L+"Exit",L+"Exit-"+m]:m?[L,L+"-"+m,L+"Exit",L+"Exit-"+m]:b.append?[L,0,L+"Exit"]:[L,L+"Exit"]}function a(b){let m;return m="document"===b.type?["Document",0,"DocumentExit"]:"root"===b.type?["Root",0,"RootExit"]:s(b),{eventIndex:0,events:m,iterator:0,node:b,visitorIndex:0,visitors:[]}}function t(b){return b[e]=!1,b.nodes&&b.nodes.forEach(m=>t(m)),b}let c={};class C{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(m,L,A){let O;if(this.stringified=!1,this.processed=!1,"object"!=typeof L||null===L||"root"!==L.type&&"document"!==L.type)if(L instanceof C||L instanceof _)O=t(L.root),L.map&&(void 0===A.map&&(A.map={}),A.map.inline||(A.map.inline=!1),A.map.prev=L.map);else{let B=h;A.syntax&&(B=A.syntax.parse),A.parser&&(B=A.parser),B.parse&&(B=B.parse);try{O=B(L,A)}catch(G){this.processed=!0,this.error=G}O&&!O[o]&&S.rebuild(O)}else O=t(L);this.result=new _(m,O,A),this.helpers={...c,postcss:c,result:this.result},this.plugins=this.processor.plugins.map(B=>"object"==typeof B&&B.prepare?{...B,...B.prepare(this.result)}:B)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(m){return this.async().catch(m)}finally(m){return this.async().then(m,m)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(m,L){let A=this.result.lastPlugin;try{L&&L.addToError(m),this.error=m,"CssSyntaxError"!==m.name||m.plugin||(m.plugin=A.postcssPlugin,m.setMessage())}catch(O){console&&console.error&&console.error(O)}return m}prepareVisitors(){this.listeners={};let m=(L,A,O)=>{this.listeners[A]||(this.listeners[A]=[]),this.listeners[A].push([L,O])};for(let L of this.plugins)if("object"==typeof L)for(let A in L){if(!f[A]&&/^[A-Z]/.test(A))throw new Error(`Unknown event ${A} in ${L.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!v[A])if("object"==typeof L[A])for(let O in L[A])m(L,"*"===O?A:A+"-"+O.toLowerCase(),L[A][O]);else"function"==typeof L[A]&&m(L,A,L[A])}this.hasListener=Object.keys(this.listeners).length>0}runAsync(){var m=this;return st(function*(){m.plugin=0;for(let L=0;L<m.plugins.length;L++){let O=m.runOnRoot(m.plugins[L]);if(T(O))try{yield O}catch(B){throw m.handleError(B)}}if(m.prepareVisitors(),m.hasListener){let L=m.result.root;for(;!L[e];){L[e]=!0;let A=[a(L)];for(;A.length>0;){let O=m.visitTick(A);if(T(O))try{yield O}catch(B){throw m.handleError(B,A[A.length-1].node)}}}if(m.listeners.OnceExit)for(let[A,O]of m.listeners.OnceExit){m.result.lastPlugin=A;try{if("document"===L.type){let B=L.nodes.map(G=>O(G,m.helpers));yield Promise.all(B)}else yield O(L,m.helpers)}catch(B){throw m.handleError(B)}}}return m.processed=!0,m.stringify()})()}runOnRoot(m){this.result.lastPlugin=m;try{if("object"==typeof m&&m.Once){if("document"===this.result.root.type){let L=this.result.root.nodes.map(A=>m.Once(A,this.helpers));return T(L[0])?Promise.all(L):L}return m.Once(this.result.root,this.helpers)}if("function"==typeof m)return m(this.result.root,this.result)}catch(L){throw this.handleError(L)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let m=this.result.opts,L=r;m.syntax&&(L=m.syntax.stringify),m.stringifier&&(L=m.stringifier),L.stringify&&(L=L.stringify);let A=new n(L,this.result.root,this.result.opts).generate();return this.result.css=A[0],this.result.map=A[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let m of this.plugins)if(T(this.runOnRoot(m)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let m=this.result.root;for(;!m[e];)m[e]=!0,this.walkSync(m);if(this.listeners.OnceExit)if("document"===m.type)for(let L of m.nodes)this.visitSync(this.listeners.OnceExit,L);else this.visitSync(this.listeners.OnceExit,m)}return this.result}then(m,L){return this.async().then(m,L)}toString(){return this.css}visitSync(m,L){for(let[A,O]of m){let B;this.result.lastPlugin=A;try{B=O(L,this.helpers)}catch(G){throw this.handleError(G,L.proxyOf)}if("root"!==L.type&&"document"!==L.type&&!L.parent)return!0;if(T(B))throw this.getAsyncError()}}visitTick(m){let L=m[m.length-1],{node:A,visitors:O}=L;if("root"!==A.type&&"document"!==A.type&&!A.parent)return void m.pop();if(O.length>0&&L.visitorIndex<O.length){let[G,R]=O[L.visitorIndex];L.visitorIndex+=1,L.visitorIndex===O.length&&(L.visitors=[],L.visitorIndex=0),this.result.lastPlugin=G;try{return R(A.toProxy(),this.helpers)}catch(M){throw this.handleError(M,A)}}if(0!==L.iterator){let G,R=L.iterator;for(;G=A.nodes[A.indexes[R]];)if(A.indexes[R]+=1,!G[e])return G[e]=!0,void m.push(a(G));L.iterator=0,delete A.indexes[R]}let B=L.events;for(;L.eventIndex<B.length;){let G=B[L.eventIndex];if(L.eventIndex+=1,0===G)return void(A.nodes&&A.nodes.length&&(A[e]=!0,L.iterator=A.getIterator()));if(this.listeners[G])return void(L.visitors=this.listeners[G])}m.pop()}walkSync(m){m[e]=!0;let L=s(m);for(let A of L)if(0===A)m.nodes&&m.each(O=>{O[e]||this.walkSync(O)});else{let O=this.listeners[A];if(O&&this.visitSync(O,m.toProxy()))return}}warnings(){return this.sync().warnings()}}C.registerPostcss=b=>{c=b},X.exports=C,C.default=C,I.registerLazyResult(C),N.registerLazyResult(C)},7071:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(4646))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.ID,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o.prototype.valueToString=function(){return"#"+I.prototype.valueToString.call(this)},o}(N.default);E.default=_,X.exports=E.default},7139:(X,E,g)=>{g.d(E,{r:()=>e});var S=g(3026),N=g(9581),n=g(5205),h=g(1863),_=g(1596),I=g(3278),r=function(o,l,f,v){return new(f||(f=Promise))(function(T,s){function a(C){try{c(v.next(C))}catch(b){s(b)}}function t(C){try{c(v.throw(C))}catch(b){s(b)}}function c(C){var b;C.done?T(C.value):(b=C.value,b instanceof f?b:new f(function(m){m(b)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function e(o){var l=arguments;return r(this,void 0,void 0,function*(){const f=n.Logger.logfunction("GetConcept",l)||{};let v=(0,n.CreateDefaultConcept)();const T=new FormData;T.append("id",o.toString());try{if(n.serviceWorker){f.serviceWorker=!0;try{const t=yield(0,n.sendMessage)("GetConcept",{id:o});return n.Logger.logUpdate(f),t.data}catch(t){console.error("GetConcept sw error: ",t),(0,h.ey)(f,"GetConcept",t),(0,n.handleServiceWorkerException)(t)}}if(0==o||null==o||null==o)return v;var s=yield S.I.GetConcept(o);let a=S.I.GetNpc(o);if(0!=s.id||a)return n.Logger.logUpdate(f),s;{let t;const c={method:"POST",body:T,headers:{Authorization:"Bearer "+I.b.BearerAccessToken}};try{console.log("this is the url",N.B.GetConceptUrl()),t=yield fetch(N.B.GetConceptUrl(),c)}catch{t=yield(0,_.g)(c,"/api/getConcept")}return yield function(C,b,m,L){return r(this,void 0,void 0,function*(){return C.ok?(b=yield C.json()).id>0?S.I.AddConcept(b):S.I.AddNpc(L):(console.log("Get the concept error",C.status),(0,h.ry)(C)),n.Logger.logUpdate(m),b})}(t,v,f,o)}}catch(a){a instanceof Error?console.log("Get the concept error message: ",a.message):console.log("Get the concept unexpected error: ",a),(0,h.Mb)(a,N.B.GetConceptUrl()),(0,h.ey)(f,"GetConcept",a)}})}},7149:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(8349))&&S.__esModule?S:{default:S},n=function(r,e){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var o=h(void 0);if(o&&o.has(r))return o.get(r);var l={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in r)if("default"!==v&&Object.prototype.hasOwnProperty.call(r,v)){var T=f?Object.getOwnPropertyDescriptor(r,v):null;T&&(T.get||T.set)?Object.defineProperty(l,v,T):l[v]=r[v]}return l.default=r,o&&o.set(r,l),l}(g(680));function h(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(h=function(l){return l?o:e})(r)}var _=function(r){return new N.default(r)};Object.assign(_,n),delete _.__esModule,E.default=_,X.exports=E.default},7273:(X,E,g)=>{g.d(E,{z:()=>N});var S=g(9581);class N{constructor(h,_,I,r){this.url=S.B.BASE_URL,this.message=h,this.ok=_,this.status=I,this.data=r}getMessage(){return this.message}setMessage(h){return this.message=h,this}getStatus(){return this.status}setStatus(h){return this.status=h,this}getData(){return this.data}setData(h){return this.data=h,this}getOk(){return this.ok}setOk(h){return this.ok=h,this}getUrl(){return this.url}setUrl(h){return this.url=h,this}}},7282:(X,E,g)=>{g.d(E,{Y:()=>n,o:()=>N});var S=g(2615);function N(){let h=n(new Date),_=n(new Date);return new S.j(0,0,0,0,0,"0",0,!1,h,_,"0")}function n(h){const _=h.getMonth()+1,I=h.getDate(),r=h.getFullYear();let e=h.getHours();const o=h.getMinutes(),l=h.getSeconds(),f=e>=12?"PM":"AM";e%=12,e=e||12;const v=T=>T.toString().padStart(2,"0");return`${_}/${I}/${r} ${e}:${v(o)}:${v(l)} ${f}`}},7324:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(3631))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.PSEUDO,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o.prototype.toString=function(){var l=this.length?"("+this.map(String).join(",")+")":"";return[this.rawSpaceBefore,this.stringifyProperty("value"),l,this.rawSpaceAfter].join("")},o}(N.default);E.default=_,X.exports=E.default},7467:(X,E,g)=>{g.d(E,{j:()=>o});var S=g(8286),N=g(9581),n=g(4364),h=g(3518),_=g(1863),I=g(5205),r=g(1596),e=function(l,f,v,T){return new(v||(v=Promise))(function(s,a){function t(b){try{C(T.next(b))}catch(m){a(m)}}function c(b){try{C(T.throw(b))}catch(m){a(m)}}function C(b){var m;b.done?s(b.value):(m=b.value,m instanceof v?m:new v(function(L){L(m)})).then(t,c)}C((T=T.apply(l,f||[])).next())})};function o(){return e(this,arguments,void 0,function*(l=[]){const f=I.Logger.logfunction("GetConnectionBulk",l.length)||{};let v=[];try{if(I.serviceWorker){f.serviceWorker=!0;try{const T=yield(0,I.sendMessage)("GetConnectionBulk",{connectionIds:l});return I.Logger.logUpdate(f),T.data}catch(T){console.error("GetConnectionBulk sw error: ",T),(0,_.ey)(f,"GetConnectionBulk",T),(0,I.handleServiceWorkerException)(T)}}if(l.length>0){let T=[];for(let s=0;s<l.length;s++)if(!S.d.GetNpConn(l[s])){let a=yield S.d.GetConnection(l[s]);0==a.id?T.push(l[s]):v.push(a)}if(0==T.length)return I.Logger.logUpdate(f),v;{let s;const a={method:"POST",headers:(0,h.Xr)(),body:JSON.stringify(T)};try{s=yield fetch(N.B.GetConnectionBulkUrl(),a)}catch{s=yield(0,r.g)(a,"/api/get_connection_bulk")}yield function(t,c,C){return e(this,void 0,void 0,function*(){if(t.ok){const b=yield t.json();if(b.length>0)for(let m=0;m<b.length;m++){let L=b[m];c.push(L),S.d.AddConnection(L)}}else(0,_.ey)(C,"GetConnectionBulk",t.status),(0,_.ry)(t),console.log("Get Connection Bulk error",t.status)})}(s,v,f),I.Logger.logUpdate(f)}}}catch(T){T instanceof Error?console.log("Get Connection Bulk error message: ",T):console.log("Get Connection Bulk unexpected error: ",T),(0,_.ey)(f,"GetConnectionBulk",T),(0,_.Mb)(T,N.B.GetConnectionBulkUrl())}return yield(0,n.s)(v),v})}},7668:X=>{const E={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class g{constructor(N){this.builder=N}atrule(N,n){let h="@"+N.name,_=N.params?this.rawValue(N,"params"):"";void 0!==N.raws.afterName?h+=N.raws.afterName:_&&(h+=" "),N.nodes?this.block(N,h+_):this.builder(h+_+((N.raws.between||"")+(n?";":"")),N)}beforeAfter(N,n){let h;h=this.raw(N,null,"decl"===N.type?"beforeDecl":"comment"===N.type?"beforeComment":"before"===n?"beforeRule":"beforeClose");let _=N.parent,I=0;for(;_&&"root"!==_.type;)I+=1,_=_.parent;if(h.includes("\n")){let r=this.raw(N,null,"indent");if(r.length)for(let e=0;e<I;e++)h+=r}return h}block(N,n){let h,_=this.raw(N,"between","beforeOpen");this.builder(n+_+"{",N,"start"),N.nodes&&N.nodes.length?(this.body(N),h=this.raw(N,"after")):h=this.raw(N,"after","emptyBody"),h&&this.builder(h),this.builder("}",N,"end")}body(N){let n=N.nodes.length-1;for(;n>0&&"comment"===N.nodes[n].type;)n-=1;let h=this.raw(N,"semicolon");for(let _=0;_<N.nodes.length;_++){let I=N.nodes[_],r=this.raw(I,"before");r&&this.builder(r),this.stringify(I,n!==_||h)}}comment(N){let n=this.raw(N,"left","commentLeft"),h=this.raw(N,"right","commentRight");this.builder("/*"+n+N.text+h+"*/",N)}decl(N,n){let h=this.raw(N,"between","colon"),_=N.prop+h+this.rawValue(N,"value");N.important&&(_+=N.raws.important||" !important"),n&&(_+=";"),this.builder(_,N)}document(N){this.body(N)}raw(N,n,h){let _;if(h||(h=n),n&&(_=N.raws[n],void 0!==_))return _;let I=N.parent;if("before"===h&&(!I||"root"===I.type&&I.first===N||I&&"document"===I.type))return"";if(!I)return E[h];let r=N.root();if(r.rawCache||(r.rawCache={}),void 0!==r.rawCache[h])return r.rawCache[h];if("before"===h||"after"===h)return this.beforeAfter(N,h);{let o="raw"+((e=h)[0].toUpperCase()+e.slice(1));this[o]?_=this[o](r,N):r.walk(l=>{if(_=l.raws[n],void 0!==_)return!1})}var e;return void 0===_&&(_=E[h]),r.rawCache[h]=_,_}rawBeforeClose(N){let n;return N.walk(h=>{if(h.nodes&&h.nodes.length>0&&void 0!==h.raws.after)return n=h.raws.after,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawBeforeComment(N,n){let h;return N.walkComments(_=>{if(void 0!==_.raws.before)return h=_.raws.before,h.includes("\n")&&(h=h.replace(/[^\n]+$/,"")),!1}),void 0===h?h=this.raw(n,null,"beforeDecl"):h&&(h=h.replace(/\S/g,"")),h}rawBeforeDecl(N,n){let h;return N.walkDecls(_=>{if(void 0!==_.raws.before)return h=_.raws.before,h.includes("\n")&&(h=h.replace(/[^\n]+$/,"")),!1}),void 0===h?h=this.raw(n,null,"beforeRule"):h&&(h=h.replace(/\S/g,"")),h}rawBeforeOpen(N){let n;return N.walk(h=>{if("decl"!==h.type&&(n=h.raws.between,void 0!==n))return!1}),n}rawBeforeRule(N){let n;return N.walk(h=>{if(h.nodes&&(h.parent!==N||N.first!==h)&&void 0!==h.raws.before)return n=h.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawColon(N){let n;return N.walkDecls(h=>{if(void 0!==h.raws.between)return n=h.raws.between.replace(/[^\s:]/g,""),!1}),n}rawEmptyBody(N){let n;return N.walk(h=>{if(h.nodes&&0===h.nodes.length&&(n=h.raws.after,void 0!==n))return!1}),n}rawIndent(N){if(N.raws.indent)return N.raws.indent;let n;return N.walk(h=>{let _=h.parent;if(_&&_!==N&&_.parent&&_.parent===N&&void 0!==h.raws.before){let I=h.raws.before.split("\n");return n=I[I.length-1],n=n.replace(/\S/g,""),!1}}),n}rawSemicolon(N){let n;return N.walk(h=>{if(h.nodes&&h.nodes.length&&"decl"===h.last.type&&(n=h.raws.semicolon,void 0!==n))return!1}),n}rawValue(N,n){let h=N[n],_=N.raws[n];return _&&_.value===h?_.raw:h}root(N){this.body(N),N.raws.after&&this.builder(N.raws.after)}rule(N){this.block(N,this.rawValue(N,"selector")),N.raws.ownSemicolon&&this.builder(N.raws.ownSemicolon,N,"end")}stringify(N,n){if(!this[N.type])throw new Error("Unknown AST node type "+N.type+". Maybe you need to change PostCSS stringifier.");this[N.type](N,n)}}X.exports=g,g.default=g},7793:(X,E,g)=>{let S,N,n,h,_=g(9371),I=g(5238),r=g(3152),{isClean:e,my:o}=g(4151);function l(T){return T.map(s=>(s.nodes&&(s.nodes=l(s.nodes)),delete s.source,s))}function f(T){if(T[e]=!1,T.proxyOf.nodes)for(let s of T.proxyOf.nodes)f(s)}class v extends r{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...s){for(let a of s){let t=this.normalize(a,this.last);for(let c of t)this.proxyOf.nodes.push(c)}return this.markDirty(),this}cleanRaws(s){if(super.cleanRaws(s),this.nodes)for(let a of this.nodes)a.cleanRaws(s)}each(s){if(!this.proxyOf.nodes)return;let a,t,c=this.getIterator();for(;this.indexes[c]<this.proxyOf.nodes.length&&(a=this.indexes[c],t=s(this.proxyOf.nodes[a],a),!1!==t);)this.indexes[c]+=1;return delete this.indexes[c],t}every(s){return this.nodes.every(s)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let s=this.lastEach;return this.indexes[s]=0,s}getProxyProcessor(){return{get:(s,a)=>"proxyOf"===a?s:s[a]?"each"===a||"string"==typeof a&&a.startsWith("walk")?(...t)=>s[a](...t.map(c=>"function"==typeof c?(C,b)=>c(C.toProxy(),b):c)):"every"===a||"some"===a?t=>s[a]((c,...C)=>t(c.toProxy(),...C)):"root"===a?()=>s.root().toProxy():"nodes"===a?s.nodes.map(t=>t.toProxy()):"first"===a||"last"===a?s[a].toProxy():s[a]:s[a],set:(s,a,t)=>(s[a]===t||(s[a]=t,"name"!==a&&"params"!==a&&"selector"!==a||s.markDirty()),!0)}}index(s){return"number"==typeof s?s:(s.proxyOf&&(s=s.proxyOf),this.proxyOf.nodes.indexOf(s))}insertAfter(s,a){let t,c=this.index(s),C=this.normalize(a,this.proxyOf.nodes[c]).reverse();c=this.index(s);for(let b of C)this.proxyOf.nodes.splice(c+1,0,b);for(let b in this.indexes)t=this.indexes[b],c<t&&(this.indexes[b]=t+C.length);return this.markDirty(),this}insertBefore(s,a){let t,c=this.index(s),b=this.normalize(a,this.proxyOf.nodes[c],0===c&&"prepend").reverse();c=this.index(s);for(let m of b)this.proxyOf.nodes.splice(c,0,m);for(let m in this.indexes)t=this.indexes[m],c<=t&&(this.indexes[m]=t+b.length);return this.markDirty(),this}normalize(s,a){if("string"==typeof s)s=l(N(s).nodes);else if(void 0===s)s=[];else if(Array.isArray(s)){s=s.slice(0);for(let t of s)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===s.type&&"document"!==this.type){s=s.nodes.slice(0);for(let t of s)t.parent&&t.parent.removeChild(t,"ignore")}else if(s.type)s=[s];else if(s.prop){if(void 0===s.value)throw new Error("Value field is missed in node creation");"string"!=typeof s.value&&(s.value=String(s.value)),s=[new I(s)]}else if(s.selector||s.selectors)s=[new h(s)];else if(s.name)s=[new S(s)];else{if(!s.text)throw new Error("Unknown node type in node creation");s=[new _(s)]}return s.map(t=>(t[o]||v.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[e]&&f(t),t.raws||(t.raws={}),void 0===t.raws.before&&a&&void 0!==a.raws.before&&(t.raws.before=a.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t))}prepend(...s){s=s.reverse();for(let a of s){let t=this.normalize(a,this.first,"prepend").reverse();for(let c of t)this.proxyOf.nodes.unshift(c);for(let c in this.indexes)this.indexes[c]=this.indexes[c]+t.length}return this.markDirty(),this}push(s){return s.parent=this,this.proxyOf.nodes.push(s),this}removeAll(){for(let s of this.proxyOf.nodes)s.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(s){let a;s=this.index(s),this.proxyOf.nodes[s].parent=void 0,this.proxyOf.nodes.splice(s,1);for(let t in this.indexes)a=this.indexes[t],a>=s&&(this.indexes[t]=a-1);return this.markDirty(),this}replaceValues(s,a,t){return t||(t=a,a={}),this.walkDecls(c=>{a.props&&!a.props.includes(c.prop)||a.fast&&!c.value.includes(a.fast)||(c.value=c.value.replace(s,t))}),this.markDirty(),this}some(s){return this.nodes.some(s)}walk(s){return this.each((a,t)=>{let c;try{c=s(a,t)}catch(C){throw a.addToError(C)}return!1!==c&&a.walk&&(c=a.walk(s)),c})}walkAtRules(s,a){return a?s instanceof RegExp?this.walk((t,c)=>{if("atrule"===t.type&&s.test(t.name))return a(t,c)}):this.walk((t,c)=>{if("atrule"===t.type&&t.name===s)return a(t,c)}):(a=s,this.walk((t,c)=>{if("atrule"===t.type)return a(t,c)}))}walkComments(s){return this.walk((a,t)=>{if("comment"===a.type)return s(a,t)})}walkDecls(s,a){return a?s instanceof RegExp?this.walk((t,c)=>{if("decl"===t.type&&s.test(t.prop))return a(t,c)}):this.walk((t,c)=>{if("decl"===t.type&&t.prop===s)return a(t,c)}):(a=s,this.walk((t,c)=>{if("decl"===t.type)return a(t,c)}))}walkRules(s,a){return a?s instanceof RegExp?this.walk((t,c)=>{if("rule"===t.type&&s.test(t.selector))return a(t,c)}):this.walk((t,c)=>{if("rule"===t.type&&t.selector===s)return a(t,c)}):(a=s,this.walk((t,c)=>{if("rule"===t.type)return a(t,c)}))}}v.registerParse=T=>{N=T},v.registerRule=T=>{h=T},v.registerAtRule=T=>{S=T},v.registerRoot=T=>{n=T},X.exports=v,v.default=v,v.rebuild=T=>{"atrule"===T.type?Object.setPrototypeOf(T,S.prototype):"rule"===T.type?Object.setPrototypeOf(T,h.prototype):"decl"===T.type?Object.setPrototypeOf(T,I.prototype):"comment"===T.type?Object.setPrototypeOf(T,_.prototype):"root"===T.type&&Object.setPrototypeOf(T,n.prototype),T[o]=!0,T.nodes&&T.nodes.forEach(s=>{v.rebuild(s)})}},7820:(X,E,g)=>{g.d(E,{G:()=>h});var S=g(205),N=g(2515),n=function(_,I,r,e){return new(r||(r=Promise))(function(o,l){function f(s){try{T(e.next(s))}catch(a){l(a)}}function v(s){try{T(e.throw(s))}catch(a){l(a)}}function T(s){var a;s.done?o(s.value):(a=s.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}T((e=e.apply(_,I||[])).next())})};let h=(()=>{class _{static addNodeToTree(r){if(null==this.root)return this.root=r,this.root;this.root=this.root.addNode(r,this.root,this.root.height)}static addConceptToTree(r){var e=new N.x(r.ghostId,r,null,null);this.addNodeToTree(e)}static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((r,e)=>{this.checkFlag(r),setTimeout(()=>{e("not")},25e3)})})}static checkFlag(r){if(S.B.isLocalDataLoaded)return r("done");setTimeout(_.checkFlag,1e3,r)}static getNodeFromTree(r){return n(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(r,this.root):null})}static removeNodeFromTree(r){return n(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,r))})}}return _.root=null,_})()},7869:(X,E,g)=>{g.d(E,{_:()=>T,A:()=>v});var S=g(9581),N=g(3026),n=g(1863),h=g(3518),_=g(5205),I=function(s,a,t,c){return new(t||(t=Promise))(function(C,b){function m(O){try{A(c.next(O))}catch(B){b(B)}}function L(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){var B;O.done?C(O.value):(B=O.value,B instanceof t?B:new t(function(G){G(B)})).then(m,L)}A((c=c.apply(s,a||[])).next())})},r=g(2299);class e{}e.isUpdated=!1,e.isOnlineSync=!1;var o=g(3655),l=g(9003),f=function(s,a,t,c){return new(t||(t=Promise))(function(C,b){function m(O){try{A(c.next(O))}catch(B){b(B)}}function L(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){var B;O.done?C(O.value):(B=O.value,B instanceof t?B:new t(function(G){G(B)})).then(m,L)}A((c=c.apply(s,a||[])).next())})};function v(){return f(this,arguments,void 0,function*(s=!0){try{if(yield(0,o.qI)("concepts"),yield(0,l.qI)("concepts"),s){if((yield(0,o.b8)()).isOnlineSync)return!0;yield function(){return I(this,void 0,void 0,function*(){const a=_.Logger.logfunction("GetAiData");try{const C=(new Date).getTime();var t=(0,h.ab)("application/x-www-form-urlencoded");const b=yield fetch(S.B.GetAllAiData(),{method:"GET",headers:t});b.ok||(console.log("Ai Error Message: ","Cannot get response"),(0,n.ry)(b));const m=yield b.json();for(var c=0;c<m.length;c++)N.I.AddConcept(m[c]);T();let L=(new Date).getTime()-C;console.log("The time taken is ",L),_.Logger.logUpdate(a)}catch(C){C instanceof Error?console.log("Ai Error Message: ",C.message):console.log("Ai Error Message: ",C),(0,n.Mb)(C,S.B.GetAllAiData())}})}()}return!0}catch(a){return console.log({message:"cannot initlize the AI system",ok:!1,status:400,data:a}),!0}})}function T(){return f(this,void 0,void 0,function*(){e.isOnlineSync=!0;var s=new r.B(e.isOnlineSync);(0,o.El)(s)})}},7876:(X,E,g)=>{g.d(E,{A:()=>e,K:()=>o});var S=g(1735),N=g(7139),n=g(5205),h=g(3026),_=g(7282),I=function(l,f,v,T){return new(v||(v=Promise))(function(s,a){function t(b){try{C(T.next(b))}catch(m){a(m)}}function c(b){try{C(T.throw(b))}catch(m){a(m)}}function C(b){var m;b.done?s(b.value):(m=b.value,m instanceof v?m:new v(function(L){L(m)})).then(t,c)}C((T=T.apply(l,f||[])).next())})};const r=new Map;function e(l){return I(this,arguments,void 0,function*(f,v=999){let T=performance.now();if(S.J.activateStatus)try{S.J.incrementConcept(f)}catch{console.error("Error adding connection in access tracker"),n.Logger.log("ERROR","Error Adding Connection")}if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetTheConcept",{id:f,userId:v})).data}catch(t){console.error("GetTheConcept sw error: ",t),(0,n.handleServiceWorkerException)(t)}let s=(0,_.o)();if(r.has(f))return r.get(f)||s;const a=(()=>I(this,void 0,void 0,function*(){try{if(f<0)return yield n.LocalConceptsData.GetConceptByGhostId(f);if(s=yield h.I.GetConcept(f),(null==s||0==s.id)&&null!=f&&null!=f&&(s=yield(0,N.r)(f)),0!=s.id&&null==s.type&&null==(yield h.I.GetConcept(s.typeId))&&null!=s.typeId&&null!=s.typeId){let t=yield(0,N.r)(s.typeId);s.type=t}return s}catch(t){throw console.error("this is the error in the getting concept",t),n.Logger.logError(T,v,"read","unknown",void 0,500,t,"GetTheConcept",[f,v],"unknown",void 0),t}finally{r.delete(f)}}))();return r.set(f,a),a})}function o(l){return I(this,void 0,void 0,function*(){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("AddTypeConcept",{concept:l})).data}catch(f){console.error("AddTypeConcept sw error: ",f),(0,n.handleServiceWorkerException)(f)}if(null==l.type){let f=yield h.I.GetConcept(l.typeId);if(0==f.id&&0!=l.typeId&&999!=l.typeId){let v=yield(0,N.r)(l.typeId);l.type=v}else l.type=f}})}},7887:(X,E,g)=>{g.d(E,{a:()=>h,p:()=>_});var S=g(8286),N=g(4864),n=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function h(){return n(this,void 0,void 0,function*(){try{let I=[];if(Array.isArray(I))for(let r=0;r<I.length;r++)S.d.AddConnectionToMemory(I[r])}catch(I){throw{message:"Cannot create Connection Binary Tree Concept",ok:!1,status:400,data:I}}})}function _(){return n(this,void 0,void 0,function*(){try{let I=[];if(Array.isArray(I))for(let r=0;r<I.length;r++)N.G.AddConnectionToMemory(I[r])}catch(I){throw{message:"Cannot create Local Connection Binary Tree Concept",ok:!1,status:400,data:I}}})}},8064:(X,E,g)=>{g.d(E,{$I:()=>_,Ay:()=>h});var S=g(9736),N=(g(9581),g(3518),g(5205));g(1863);var n=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function h(I){return n(this,void 0,void 0,function*(){return yield S.v.GetConceptByCharacterAndTypeLocal(I,51)})}function _(I){return n(this,void 0,void 0,function*(){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("GetConceptByCharacterAndCategoryLocal",{character:I})).data}catch(o){console.error("GetConceptByCharacterAndCategoryLocal error sw: ",o),(0,N.handleServiceWorkerException)(o)}let r=(0,N.CreateDefaultLConcept)();if("the"==I)return r.id=1,r.typeId=5,r.characterValue="the",r;let e=(0,N.SplitStrings)(I);if(e.length>1){let o=1,l=yield _(e[0]);0!=l.id&&(o=l.id),r=yield function(f,v){return n(this,void 0,void 0,function*(){return S.v.GetConceptByCharacterAndCategoryLocal(f,v)})}(I,o)}else e[0]==I&&(r=yield h(I));return r})}},8095:(X,E,g)=>{g.d(E,{h:()=>_});var S=g(5205),N=g(9700),n=g(1863),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(I,r,e){var o=arguments;return h(this,arguments,void 0,function*(l,f,v,T=!1,s={concepts:[],connections:[]}){var a,t,c,C,b,m;const L=N.V.logfunction("CreateConnectionBetweenTwoConceptsLocal",o)||{};let A=performance.now();try{if(S.serviceWorker){L.serviceWorker=!0;try{const M=yield(0,S.sendMessage)("CreateConnectionBetweenTwoConceptsLocal",{ofTheConcept:l,toTheConcept:f,linker:v,both:T,actions:s});return!(null===(t=null===(a=M?.actions)||void 0===a?void 0:a.concepts)||void 0===t)&&t.length&&(s.concepts=JSON.parse(JSON.stringify(M.actions.concepts))),!(null===(C=null===(c=M?.actions)||void 0===c?void 0:c.connections)||void 0===C)&&C.length&&(s.connections=JSON.parse(JSON.stringify(M.actions.connections))),N.V.logUpdate(L),M.data}catch(M){console.error("CreateConnectionBetweenTwoConceptsLocal sw error: ",M),(0,n.ey)(L,"CreateConnectionBetweenTwoConceptsLocal",M),(0,S.handleServiceWorkerException)(M)}}if(T){let M=(null===(b=f.type)||void 0===b?void 0:b.characterValue)+"_s_"+v+"_by";var O=yield(0,S.MakeTheInstanceConceptLocal)("connection",M,!1,999,999,999,0,s);yield(0,S.CreateTheConnectionLocal)(f.id,l.id,O.id,1e3,void 0,void 0,s)}let G=(null===(m=l.type)||void 0===m?void 0:m.characterValue)+"_s_"+v+"_s";var B=yield(0,S.MakeTheInstanceConceptLocal)("connection",G,!1,999,999,999,void 0,s);let R=yield(0,S.CreateTheConnectionLocal)(l.id,f.id,B.id,1e3,void 0,void 0,s);return N.V.logUpdate(L),R}catch(G){throw N.V.logError(A,l.userId,"create",void 0,void 0,500,G,"CreateConnectionBetweenTwoConceptsLocal",[l,f,v,T],void 0,void 0),(0,n.ey)(L,"CreateConnectionBetweenTwoConceptsLocal",G),G}})}},8146:(X,E,g)=>{g.d(E,{Y:()=>r});var S=g(3026),N=g(9581),n=g(5205),h=g(1863),_=g(7876),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};function r(e){var o=arguments;return I(this,void 0,void 0,function*(){const l=n.Logger.logfunction("GetConceptByCharacterValue",o);let f=(0,n.CreateDefaultConcept)();try{const v=new FormData;v.append("character_value",e);const T=yield fetch(N.B.GetConceptByCharacterValueUrl(),{method:"POST",body:v});T.ok?(f=yield T.json(),f.id>0&&(0,_.K)(f).then(s=>{S.I.AddConcept(f)}),n.Logger.logUpdate(l)):((0,h.ry)(T),console.log("Error in Getting concept by character value Error",T.status))}catch(v){v instanceof Error?console.log("Error in Getting concept by character value error message: ",v):console.log("Error in Getting concept by character value unexpected error: ",v),(0,h.Mb)(v,N.B.GetConceptByCharacterValueUrl()),(0,h.ey)(l,"GetConceptByCharacterValue",v)}return f})}},8286:(X,E,g)=>{g.d(E,{d:()=>v});var S=g(1735),N=g(5205),n=g(3655),h=g(1863),_=g(2155),I=g(5239),r=g(991),e=g(3996);class o extends e.i{constructor(s,a,t,c){super(s,a,t,c),this.key="",this.value=[],this.height=1,this.key=s,this.value=a,this.leftNode=t,this.rightNode=c}addNode(s,a,t){if(null==a)return s;let C=a.rightNode;if(a.key>s.key)a.leftNode=this.addNode(s,a.leftNode,t);else{if(!(a.key<s.key))return a;a.rightNode=this.addNode(s,C,t)}a.height=1+Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode));let b=this.getBalanceFactor(a);if(b>1&&a.leftNode){if(s.key<a.leftNode.key)return this.rightRotate(a);if(s.key>a.leftNode.key)return a.leftNode=this.leftRotate(a.leftNode),this.rightRotate(a)}if(b<-1&&a.rightNode){if(s.key>a.rightNode.key)return this.leftRotate(a);if(s.key<a.rightNode.key)return a.rightNode=this.rightRotate(a.rightNode),this.leftRotate(a)}return a}}let l=(()=>{class T{static CreateCompositionKey(a){return a}static addNodeToTree(a){return t=this,b=function*(){return null==this.connectionTypeRoot?(this.connectionTypeRoot=a,this.connectionTypeRoot):(this.connectionTypeRoot=this.connectionTypeRoot.addNode(a,this.connectionTypeRoot,this.connectionTypeRoot.height),this.connectionTypeRoot)},new((C=void 0)||(C=Promise))(function(m,L){function A(G){try{B(b.next(G))}catch(R){L(R)}}function O(G){try{B(b.throw(G))}catch(R){L(R)}}function B(G){var R;G.done?m(G.value):(R=G.value,R instanceof C?R:new C(function(M){M(R)})).then(A,O)}B((b=b.apply(t,[])).next())});var t,C,b}static addConnectionToTree(a){if(a.id>0){let t=this.CreateCompositionKey(a.typeId);if(this.connectionTypeRoot){let c=this.connectionTypeRoot.getFromNode(t,this.connectionTypeRoot);if(c){let C=c?.value;0==C.length&&(c.value=[]),C.includes(a.id)||C.push(a.id)}else{let C=[];C.push(a.id);let b=new o(t,C,null,null);this.addNodeToTree(b)}}else{let c=[];c.push(a.id);let C=new o(t,c,null,null);this.addNodeToTree(C)}}else console.log("cannot insert key id with  n 0 to the connection tree",a)}static GetConnectionByOfTheConceptAndTypeId(a,t){let c=this.CreateCompositionKey(t);if(this.connectionTypeRoot){let C=this.connectionTypeRoot.getFromNode(c,this.connectionTypeRoot);if(C)return C.value}return null}}return T.connectionTypeRoot=null,T})();var f=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};class v{constructor(){this.name="Connection Array"}static CheckContains(s){let a=!1;for(let t=0;t<this.connectionArray.length;t++)this.connectionArray[t].id==s.id&&(a=!0);return a}static AddConnectionToStorage(s){(0,n.kH)("connection",s)}static AddNpConn(s){this.deletedConnections.includes(s)||this.deletedConnections.push(s)}static GetNpConn(s){return!!this.deletedConnections.includes(s)}static AddConnection(s){try{I.O.addConnectionToTree(s),l.addConnectionToTree(s),r.H.addConnection(s)}catch(a){throw console.log("this is the error in making the connection"),a}}static AddConnectionToMemory(s){s.isTemp||(I.O.addConnectionToTree(s),l.addConnectionToTree(s),r.H.addConnection(s))}static AddToDictionary(s){this.connectionDictionary[s.id]=s}static RemoveConnection(s){0!=s.id&&((0,n.wh)("connection",s.id),I.O.removeNodeFromTree(s.id),r.H.removeNodeFromTree(s.id))}static GetConnectionTypeOfTree(){}static GetConnectionByOfTheConceptAndType(s,a){return f(this,void 0,void 0,function*(){try{if(N.serviceWorker)try{return(yield(0,N.sendMessage)("ConnectionData__GetConnectionByOfTheConceptAndType",{ofTheConceptId:s,typeId:a})).data}catch(t){console.error("GetConnectionByOfTheConceptAndType sw error: ",t),(0,N.handleServiceWorkerException)(t)}return r.H.GetConnectionByOfTheConceptAndTypeId(s,a)||[]}catch(t){return console.log("this is the error in GetConnectionByOfTheConceptAndType",t),[]}})}static GetConnectionByOfType(s,a){const t=N.Logger.logfunction("ConnectionData.GetConnectionByOfType",arguments);let c=l.GetConnectionByOfTheConceptAndTypeId(s,a);return c?(N.Logger.logUpdate(t),c):(N.Logger.logUpdate(t),[])}static GetConnectionTree(){return I.O.connectionroot}static GetConnectionTypeTree(){return l.connectionTypeRoot}static GetConnectionBulkData(s,a,t){return f(this,void 0,void 0,function*(){yield I.O.getConnectionListFromIds(s,a,t)})}static GetConnection(s){return f(this,void 0,void 0,function*(){S.J.incrementConnection(s);let a=new _.N(0,0,0,0,0,0,0);try{if(N.serviceWorker)try{return(yield(0,N.sendMessage)("ConnectionData__GetConnection",{id:s})).data}catch(c){console.error("GetConnection sw error: ",c),(0,N.handleServiceWorkerException)(c)}let t=yield I.O.getNodeFromTree(s);if(t?.value){let c=t.value;c&&(a=c)}return a}catch(t){return console.log("this is the error in GetConnection",t),a}})}static GetConnectionsOfCompositionLocal(s){var a=arguments;return f(this,void 0,void 0,function*(){const t=N.Logger.logfunction("ConnectionData.GetConnectionsOfCompositionLocal",a)||{};let c=[];try{if(N.serviceWorker){t.serviceWorker=!0;try{const b=yield(0,N.sendMessage)("ConnectionData__GetConnectionsOfCompositionLocal",{id:s});return N.Logger.logUpdate(t),b.data}catch(b){console.error("GetConnectionsOfCompositionLocal sw error: ",b),(0,h.ey)(t,"GetConnectionsOfCompositionLocal",b),(0,N.handleServiceWorkerException)(b)}}let C=[];C=v.GetConnectionByOfType(s,s);for(let b=0;b<C.length;b++){let m=yield I.O.getNodeFromTree(C[b]);m&&c.push(m.value),N.Logger.logUpdate(t)}}catch(C){console.log("this is the error GetConnectionsOfCompositionLocal",s,c),(0,h.ey)(t,"ConnectionData.GetConnectionsOfCompositionLocal",C)}return c})}static GetConnectionsOfConcept(s){return f(this,void 0,void 0,function*(){let a=[],t=[];try{if(N.serviceWorker)try{return(yield(0,N.sendMessage)("ConnectionData__GetConnectionsOfConcept",{id:s})).data}catch(c){console.error("GetConnectionsOfConcept sw error: ",c),(0,N.handleServiceWorkerException)(c)}a=yield v.GetConnectionByOfTheConceptAndType(s,s);for(let c=0;c<a.length;c++){let C=yield I.O.getNodeFromTree(a[c]);C&&t.push(C.value)}return t}catch(c){return console.log("this is the error in GetConnectionsOfConcept",c),t}})}getName(){return this.name}}v.deletedConnections=[],v.connectionArray=[],v.connectionDictionary=[]},8339:(X,E,g)=>{let S=g(396),N=g(9371),n=g(5238),h=g(5644),_=g(1534),I=g(5781);const r={empty:!0,space:!0};X.exports=class{constructor(e){this.input=e,this.root=new h,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let o,l,f,v=new S;v.name=e[1].slice(1),""===v.name&&this.unnamedAtrule(v,e),this.init(v,e[2]);let T=!1,s=!1,a=[],t=[];for(;!this.tokenizer.endOfFile();){if(o=(e=this.tokenizer.nextToken())[0],"("===o||"["===o?t.push("("===o?")":"]"):"{"===o&&t.length>0?t.push("}"):o===t[t.length-1]&&t.pop(),0===t.length){if(";"===o){v.source.end=this.getPosition(e[2]),v.source.end.offset++,this.semicolon=!0;break}if("{"===o){s=!0;break}if("}"===o){if(a.length>0){for(f=a.length-1,l=a[f];l&&"space"===l[0];)l=a[--f];l&&(v.source.end=this.getPosition(l[3]||l[2]),v.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){T=!0;break}}v.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(v.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(v,"params",a),T&&(v.source.end=this.getPosition((e=a[a.length-1])[3]||e[2]),v.source.end.offset++,this.spaces=v.raws.between,v.raws.between="")):(v.raws.afterName="",v.params=""),s&&(v.nodes=[],this.current=v)}checkMissedSemicolon(e){let o=this.colon(e);if(!1===o)return;let l,f=0;for(let v=o-1;v>=0&&(l=e[v],"space"===l[0]||(f+=1,2!==f));v--);throw this.input.error("Missed semicolon","word"===l[0]?l[3]+1:l[2])}colon(e){let o,l,f,v=0;for(let[T,s]of e.entries()){if(l=s,f=l[0],"("===f&&(v+=1),")"===f&&(v-=1),0===v&&":"===f){if(o){if("word"===o[0]&&"progid"===o[1])continue;return T}this.doubleColon(l)}o=l}return!1}comment(e){let o=new N;this.init(o,e[2]),o.source.end=this.getPosition(e[3]||e[2]),o.source.end.offset++;let l=e[1].slice(2,-2);if(/^\s*$/.test(l))o.text="",o.raws.left=l,o.raws.right="";else{let f=l.match(/^(\s*)([^]*\S)(\s*)$/);o.text=f[2],o.raws.left=f[1],o.raws.right=f[3]}}createTokenizer(){this.tokenizer=I(this.input)}decl(e,o){let l=new n;this.init(l,e[0][2]);let f,v=e[e.length-1];for(";"===v[0]&&(this.semicolon=!0,e.pop()),l.source.end=this.getPosition(v[3]||v[2]||function(a){for(let t=a.length-1;t>=0;t--){let c=a[t],C=c[3]||c[2];if(C)return C}}(e)),l.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),l.raws.before+=e.shift()[1];for(l.source.start=this.getPosition(e[0][2]),l.prop="";e.length;){let a=e[0][0];if(":"===a||"space"===a||"comment"===a)break;l.prop+=e.shift()[1]}for(l.raws.between="";e.length;){if(f=e.shift(),":"===f[0]){l.raws.between+=f[1];break}"word"===f[0]&&/\w/.test(f[1])&&this.unknownWord([f]),l.raws.between+=f[1]}"_"!==l.prop[0]&&"*"!==l.prop[0]||(l.raws.before+=l.prop[0],l.prop=l.prop.slice(1));let T,s=[];for(;e.length&&(T=e[0][0],"space"===T||"comment"===T);)s.push(e.shift());this.precheckMissedSemicolon(e);for(let a=e.length-1;a>=0;a--){if(f=e[a],"!important"===f[1].toLowerCase()){l.important=!0;let t=this.stringFrom(e,a);t=this.spacesFromEnd(e)+t," !important"!==t&&(l.raws.important=t);break}if("important"===f[1].toLowerCase()){let t=e.slice(0),c="";for(let C=a;C>0;C--){let b=t[C][0];if(c.trim().startsWith("!")&&"space"!==b)break;c=t.pop()[1]+c}c.trim().startsWith("!")&&(l.important=!0,l.raws.important=c,e=t)}if("space"!==f[0]&&"comment"!==f[0])break}e.some(a=>"space"!==a[0]&&"comment"!==a[0])&&(l.raws.between+=s.map(a=>a[1]).join(""),s=[]),this.raw(l,"value",s.concat(e),o),l.value.includes(":")&&!o&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let o=new _;this.init(o,e[2]),o.selector="",o.raws.between="",this.current=o}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let o=this.current.nodes[this.current.nodes.length-1];o&&"rule"===o.type&&!o.raws.ownSemicolon&&(o.raws.ownSemicolon=this.spaces,this.spaces="",o.source.end=this.getPosition(e[2]),o.source.end.offset+=o.raws.ownSemicolon.length)}}getPosition(e){let o=this.input.fromOffset(e);return{column:o.col,line:o.line,offset:e}}init(e,o){this.current.push(e),e.source={input:this.input,start:this.getPosition(o)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let o=!1,l=null,f=!1,v=null,T=[],s=e[1].startsWith("--"),a=[],t=e;for(;t;){if(l=t[0],a.push(t),"("===l||"["===l)v||(v=t),T.push("("===l?")":"]");else if(s&&f&&"{"===l)v||(v=t),T.push("}");else if(0===T.length){if(";"===l){if(f)return void this.decl(a,s);break}if("{"===l)return void this.rule(a);if("}"===l){this.tokenizer.back(a.pop()),o=!0;break}":"===l&&(f=!0)}else l===T[T.length-1]&&(T.pop(),0===T.length&&(v=null));t=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(o=!0),T.length>0&&this.unclosedBracket(v),o&&f){if(!s)for(;a.length&&(t=a[a.length-1][0],"space"===t||"comment"===t);)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,o,l,f){let v,T,s,a,t=l.length,c="",C=!0;for(let b=0;b<t;b+=1)v=l[b],T=v[0],"space"!==T||b!==t-1||f?"comment"===T?(a=l[b-1]?l[b-1][0]:"empty",s=l[b+1]?l[b+1][0]:"empty",r[a]||r[s]||","===c.slice(-1)?C=!1:c+=v[1]):c+=v[1]:C=!1;if(!C){let b=l.reduce((m,L)=>m+L[1],"");e.raws[o]={raw:b,value:c}}e[o]=c}rule(e){e.pop();let o=new _;this.init(o,e[0][2]),o.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(o,"selector",e),this.current=o}spacesAndCommentsFromEnd(e){let o,l="";for(;e.length&&(o=e[e.length-1][0],"space"===o||"comment"===o);)l=e.pop()[1]+l;return l}spacesAndCommentsFromStart(e){let o,l="";for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)l+=e.shift()[1];return l}spacesFromEnd(e){let o,l="";for(;e.length&&(o=e[e.length-1][0],"space"===o);)l=e.pop()[1]+l;return l}stringFrom(e,o){let l="";for(let f=o;f<e.length;f++)l+=e[f][1];return e.splice(o,e.length-o),l}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,o){throw this.input.error("At-rule without name",{offset:o[2]},{offset:o[2]+o[1].length})}}},8349:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(5170))&&S.__esModule?S:{default:S},n=function(){function h(I,r){this.func=I||function(){},this.funcRes=null,this.options=r}var _=h.prototype;return _._shouldUpdateSelector=function(I,r){return void 0===r&&(r={}),!1!==Object.assign({},this.options,r).updateSelector&&"string"!=typeof I},_._isLossy=function(I){return void 0===I&&(I={}),!1===Object.assign({},this.options,I).lossless},_._root=function(I,r){return void 0===r&&(r={}),new N.default(I,this._parseOptions(r)).root},_._parseOptions=function(I){return{lossy:this._isLossy(I)}},_._run=function(I,r){var e=this;return void 0===r&&(r={}),new Promise(function(o,l){try{var f=e._root(I,r);Promise.resolve(e.func(f)).then(function(v){var T=void 0;return e._shouldUpdateSelector(I,r)&&(T=f.toString(),I.selector=T),{transform:v,root:f,string:T}}).then(o,l)}catch(v){return void l(v)}})},_._runSync=function(I,r){void 0===r&&(r={});var e=this._root(I,r),o=this.func(e);if(o&&"function"==typeof o.then)throw new Error("Selector processor returned a promise to a synchronous call.");var l=void 0;return r.updateSelector&&"string"!=typeof I&&(l=e.toString(),I.selector=l),{transform:o,root:e,string:l}},_.ast=function(I,r){return this._run(I,r).then(function(e){return e.root})},_.astSync=function(I,r){return this._runSync(I,r).root},_.transform=function(I,r){return this._run(I,r).then(function(e){return e.transform})},_.transformSync=function(I,r){return this._runSync(I,r).transform},_.process=function(I,r){return this._run(I,r).then(function(e){return e.string||e.root.toString()})},_.processSync=function(I,r){var e=this._runSync(I,r);return e.string||e.root.toString()},h}();E.default=n,X.exports=E.default},8354:(X,E)=>{E.__esModule=!0,E.default=function(g){for(var S="",N=g.indexOf("/*"),n=0;N>=0;){S+=g.slice(n,N);var h=g.indexOf("*/",N+2);if(h<0)return S;N=g.indexOf("/*",n=h+2)}return S+g.slice(n)},X.exports=E.default},8357:(X,E,g)=>{g.d(E,{$:()=>e});var S=g(3077),N=g(8064),n=g(6467),h=g(9975),_=g(5205),I=g(1863),r=function(o,l,f,v){return new(f||(f=Promise))(function(T,s){function a(C){try{c(v.next(C))}catch(b){s(b)}}function t(C){try{c(v.throw(C))}catch(b){s(b)}}function c(C){var b;C.done?T(C.value):(b=C.value,b instanceof f?b:new f(function(m){m(b)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function e(o,l,f,v){var T=arguments;return r(this,arguments,void 0,function*(s,a,t,c,C={concepts:[],connections:[]}){var b,m,L,A;const O=_.Logger.logfunction("MakeTheTypeConceptLocal",T)||{};if(_.serviceWorker){O.serviceWorker=!0;try{const G=yield(0,_.sendMessage)("MakeTheTypeConceptLocal",{typeString:s,sessionId:a,sessionUserId:t,userId:c,actions:C});return!(null===(m=null===(b=G?.actions)||void 0===b?void 0:b.concepts)||void 0===m)&&m.length&&(C.concepts=JSON.parse(JSON.stringify(G.actions.concepts))),!(null===(A=null===(L=G?.actions)||void 0===L?void 0:L.connections)||void 0===A)&&A.length&&(C.connections=JSON.parse(JSON.stringify(G.actions.connections))),_.Logger.logUpdate(O),G.data}catch(G){console.error("MakeTheTypeConceptLocal error sw: ",G),(0,I.ey)(O,"MakeTheTypeConceptLocal",G),(0,_.handleServiceWorkerException)(G)}}let B=yield(0,N.$I)(s);if(B&&(0==B.id||0==B.userId)){let G=(0,n.f)(s);if(G[0]==s)B=yield(0,h.A)(s,"the",c,1,51,C);else{let R=yield e(G[0],a,t,c,C),M=yield e(G[1],a,t,c,C);B=yield(0,S.A)(s,G[1],c,R.id,M.id,4,void 0,null,C)}}return _.Logger.logUpdate(O),B})}},8407:(X,E,g)=>{g.d(E,{A:()=>v});var S=g(9581),N=g(3518),n=g(1863),h=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})},_=g(4402),I=g(5205),r=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};class e{constructor(s,a,t,c,C,b,m,L,A,O){this.id=0,this.userId=s,this.data=a,this.securityId=t,this.securityUserId=c,this.accessId=C,this.accessUserId=b,this.sessionId=m,this.sessionUserId=L,this.entryTimestamp=A,this.isNew=O}}var o=g(7282),l=g(2212),f=function(T,s,a,t){return new(a||(a=Promise))(function(c,C){function b(A){try{L(t.next(A))}catch(O){C(O)}}function m(A){try{L(t.throw(A))}catch(O){C(O)}}function L(A){var O;A.done?c(A.value):(O=A.value,O instanceof a?O:new a(function(B){B(O)})).then(b,m)}L((t=t.apply(T,s||[])).next())})};function v(T,s){var a=arguments;return f(this,arguments,void 0,function*(t,c,C=!1,b,m=4,L=999,A=0){const O=I.Logger.logfunction("MakeTheInstanceConcept",a)||{};if(I.serviceWorker){O.serviceWorker=!0;try{const _e=yield(0,I.sendMessage)("MakeTheInstanceConcept",{type:t,referent:c,composition:C,userId:b,passedAccessId:m,passedSessionId:L,referentId:A});return I.Logger.logUpdate(O),_e.data}catch(_e){console.error("MakeTheInstanceConcept sw error: ",_e),(0,n.ey)(O,"MakeTheInstanceConcept",_e),(0,I.handleServiceWorkerException)(_e)}}let B,G=L,R=b,M=b,W=m,V=b,Q="",te=c.length,ne=(0,o.o)();if(Q=t.startsWith("the_")?t:"the_"+t,C)ne=yield(0,I.MakeTheTypeConceptApi)(t,b),B=yield(0,l.Ay)(c,b,4,ne.id,A,W,t);else if(te>255)ne=yield(0,I.MakeTheTypeConceptApi)(Q,b),B=yield(0,l.Ay)(c,b,4,ne.id,A,W,Q),function(_e){h(this,void 0,void 0,function*(){try{var H=(0,N.Xr)();const ye=yield fetch(S.B.CreateTheTextDataUrl(),{method:"POST",headers:H,body:JSON.stringify(_e)});if(!ye.ok)throw(0,n.ry)(ye),new Error(`Error! status: ${ye.status}`);return yield ye.json()}catch(ye){throw ye instanceof Error?console.log("Create the text error message: ",ye.message):console.log("Create the text unexpected error: ",ye),ye}})}(new e(b,c,999,R,W,V,G,M,Date.now().toString(),!0));else{ne=yield(0,I.MakeTheTypeConceptApi)(Q,b);let _e=yield(0,_.A)(c,ne.id);B=_e,0==_e.id&&0==_e.userId&&(B=yield(0,l.N)(c,b,4,ne.id,12,W,Q),function(H,ye,xe,oe){var K=arguments;r(this,void 0,void 0,function*(){const ie=I.Logger.logfunction("MakeTheNameInBackend",K);try{let pe={newConceptId:H,referent:ye,typeId:xe,typeUserId:oe},z=(0,N.Xr)(),ge=JSON.stringify(pe);const ke=yield fetch(S.B.MakeTheNameInBackendUrl(),{method:"POST",headers:z,body:ge});I.Logger.logUpdate(ie),ke.ok||(0,n.ry)(ke)}catch(pe){pe instanceof Error?console.log("make the name in backend error message: ",pe.message):console.log("make the name in backend unexpected error: ",pe),(0,n.Mb)(pe,S.B.MakeTheNameInBackendUrl()),(0,n.ey)(ie,"MakeTheNameInBackend",pe)}})}(B.id,`${c}`,ne.id,b))}return B.type=ne,I.Logger.logUpdate(O),B})}},8500:(X,E,g)=>{E.__esModule=!0,E.isComment=E.isCombinator=E.isClassName=E.isAttribute=void 0,E.isContainer=function(b){return!(!h(b)||!b.walk)},E.isIdentifier=void 0,E.isNamespace=function(b){return I(b)||t(b)},E.isNesting=void 0,E.isNode=h,E.isPseudo=void 0,E.isPseudoClass=function(b){return v(b)&&!C(b)},E.isPseudoElement=C,E.isUniversal=E.isTag=E.isString=E.isSelector=E.isRoot=void 0;var S,N=g(1581),n=((S={})[N.ATTRIBUTE]=!0,S[N.CLASS]=!0,S[N.COMBINATOR]=!0,S[N.COMMENT]=!0,S[N.ID]=!0,S[N.NESTING]=!0,S[N.PSEUDO]=!0,S[N.ROOT]=!0,S[N.SELECTOR]=!0,S[N.STRING]=!0,S[N.TAG]=!0,S[N.UNIVERSAL]=!0,S);function h(b){return"object"==typeof b&&n[b.type]}function _(b,m){return h(m)&&m.type===b}var I=_.bind(null,N.ATTRIBUTE);E.isAttribute=I;var r=_.bind(null,N.CLASS);E.isClassName=r;var e=_.bind(null,N.COMBINATOR);E.isCombinator=e;var o=_.bind(null,N.COMMENT);E.isComment=o;var l=_.bind(null,N.ID);E.isIdentifier=l;var f=_.bind(null,N.NESTING);E.isNesting=f;var v=_.bind(null,N.PSEUDO);E.isPseudo=v;var T=_.bind(null,N.ROOT);E.isRoot=T;var s=_.bind(null,N.SELECTOR);E.isSelector=s;var a=_.bind(null,N.STRING);E.isString=a;var t=_.bind(null,N.TAG);E.isTag=t;var c=_.bind(null,N.UNIVERSAL);function C(b){return v(b)&&b.value&&(b.value.startsWith("::")||":before"===b.value.toLowerCase()||":after"===b.value.toLowerCase()||":first-letter"===b.value.toLowerCase()||":first-line"===b.value.toLowerCase())}E.isUniversal=c},8633:X=>{var E=String,g=function(){return{isColorSupported:!1,reset:E,bold:E,dim:E,italic:E,underline:E,inverse:E,hidden:E,strikethrough:E,black:E,red:E,green:E,yellow:E,blue:E,magenta:E,cyan:E,white:E,gray:E,bgBlack:E,bgRed:E,bgGreen:E,bgYellow:E,bgBlue:E,bgMagenta:E,bgCyan:E,bgWhite:E,blackBright:E,redBright:E,greenBright:E,yellowBright:E,blueBright:E,magentaBright:E,cyanBright:E,whiteBright:E,bgBlackBright:E,bgRedBright:E,bgGreenBright:E,bgYellowBright:E,bgBlueBright:E,bgMagentaBright:E,bgCyanBright:E,bgWhiteBright:E}};X.exports=g(),X.exports.createColors=g},8642:(X,E,g)=>{g.d(E,{Y:()=>l});var S=g(8286),N=g(9581),n=g(4364),h=g(5284),_=g(1412),I=g(3518),r=g(1863),e=g(5205),o=function(f,v,T,s){return new(T||(T=Promise))(function(a,t){function c(m){try{b(s.next(m))}catch(L){t(L)}}function C(m){try{b(s.throw(m))}catch(L){t(L)}}function b(m){var L;m.done?a(m.value):(L=m.value,L instanceof T?L:new T(function(A){A(L)})).then(c,C)}b((s=s.apply(f,v||[])).next())})};function l(){var f=arguments;return o(this,arguments,void 0,function*(v=[]){const T=e.Logger.logfunction("GetAllConnectionsOfCompositionBulk",f)||{};if(e.serviceWorker){T.serviceWorker=!0;try{const c=yield(0,e.sendMessage)("GetAllConnectionsOfCompositionBulk",{composition_ids:v});return e.Logger.logUpdate(T),c.data}catch(c){console.error("GetAllConnectionsOfCompositionBulk sw error: ",c),(0,r.ey)(T,"GetAllConnectionsOfCompositionBulk",c),(0,e.handleServiceWorkerException)(c)}}var s=[];if(v.length<=0)return s;var a=yield(0,h.B)(v),t=yield function(){var c=arguments;return o(this,arguments,void 0,function*(C=[]){const b=e.Logger.logfunction("GetAllConnectionsOfCompositionOnline",c);var m=[];try{var L=(0,I.Xr)();const O=yield fetch(N.B.GetAllConnectionsOfCompositionBulkUrl(),{method:"POST",headers:L,body:JSON.stringify(C)});if(O.ok){const B=yield O.json();for(var A=0;A<B.length;A++)S.d.AddConnection(B[A]),m.push(B[A])}else console.log("Get all connections of composition bulk error message: ","Cannot get response"),(0,r.ry)(O);return e.Logger.logUpdate(b),m}catch(O){O instanceof Error?console.log("Get all connections of composition bulk error message: ",O.message):console.log("Get all connections of composition bulk unexpected error: ",O),(0,r.Mb)(O,N.B.GetAllConnectionsOfCompositionBulkUrl()),(0,r.ey)(b,"GetAllConnectionsOfCompositionOnline",O)}})}(v);return(0,_.e)(s=t,a),yield(0,n.s)(s),e.Logger.logUpdate(T),s})}},8675:(X,E,g)=>{g.d(E,{l:()=>_});var S=g(1863),N=g(3518),n=g(5205),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(I){var r=arguments;return h(this,void 0,void 0,function*(){n.Logger.logfunction("GetAllLinkerConnectionsFromTheConcept",r);var e=[];try{(new Date).getTime();var o=(0,N.Xr)("application/x-www-form-urlencoded");const v=yield fetch(n.BaseUrl.GetAllLinkerConnectionOfConceptUrl()+`?conceptId=${I}`,{method:"GET",headers:o});if(v.ok){const T=yield v.json();for(var l=0;l<T.length;l++)e.push(T[l])}else console.log("Get all linker connection from the concepts error","cannot get respone"),(0,S.ry)(v)}catch(v){v instanceof Error?console.log("Get all linker connection from the concepts error: ",v.message):console.log("Get all linker connection from the concepts error(Unexpected): ",v),(0,S.Mb)(v,n.BaseUrl.GetAllLinkerConnectionOfConceptUrl())}return e})}},8937:X=>{var E={}.hasOwnProperty,g=/[ -,\.\/:-@\[-\^`\{-~]/,S=/[ -,\.\/:-@\[\]\^`\{-~]/,N=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,n=function h(_,I){"single"!=(I=function(c,C){if(!c)return C;var b={};for(var m in C)b[m]=E.call(c,m)?c[m]:C[m];return b}(I,h.options)).quotes&&"double"!=I.quotes&&(I.quotes="single");for(var r="double"==I.quotes?'"':"'",e=I.isIdentifier,o=_.charAt(0),l="",f=0,v=_.length;f<v;){var T=_.charAt(f++),s=T.charCodeAt(),a=void 0;if(s<32||s>126){if(s>=55296&&s<=56319&&f<v){var t=_.charCodeAt(f++);56320==(64512&t)?s=((1023&s)<<10)+(1023&t)+65536:f--}a="\\"+s.toString(16).toUpperCase()+" "}else a=I.escapeEverything?g.test(T)?"\\"+T:"\\"+s.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(T)?"\\"+s.toString(16).toUpperCase()+" ":"\\"==T||!e&&('"'==T&&r==T||"'"==T&&r==T)||e&&S.test(T)?"\\"+T:T;l+=a}return e&&(/^-[-\d]/.test(l)?l="\\-"+l.slice(1):/\d/.test(o)&&(l="\\3"+o+" "+l.slice(1))),l=l.replace(N,function(c,C,b){return C&&C.length%2?c:(C||"")+b}),!e&&I.wrap?r+l+r:l};n.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},n.version="3.0.0",X.exports=n},8939:(X,E,g)=>{g.d(E,{$N:()=>b,$V:()=>l,Ez:()=>m,JA:()=>c,Mb:()=>T,Nj:()=>v,PT:()=>C,RW:()=>t,XI:()=>a,ay:()=>o,hL:()=>e,kx:()=>s,re:()=>f,yz:()=>L,zN:()=>B});var S=g(7139),N=g(2),n=g(3026),h=g(8286),_=g(5205),I=g(1863),r=function(R,M,W,V){return new(W||(W=Promise))(function(Q,te){function ne(ye){try{H(V.next(ye))}catch(xe){te(xe)}}function _e(ye){try{H(V.throw(ye))}catch(xe){te(xe)}}function H(ye){var xe;ye.done?Q(ye.value):(xe=ye.value,xe instanceof W?xe:new W(function(oe){oe(xe)})).then(ne,_e)}H((V=V.apply(R,M||[])).next())})};function e(R){return r(this,void 0,void 0,function*(){let M={connectionList:[],compositionList:[]};try{if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetCompositionById",{id:R})).data}catch(V){console.error("GetCompositionById error sw: ",V),(0,_.handleServiceWorkerException)(V)}let W=yield(0,N.s)(R);M.connectionList=W;for(let V=0;V<M.connectionList.length;V++)M.compositionList.includes(M.connectionList[V].ofTheConceptId)||M.compositionList.push(M.connectionList[V].ofTheConceptId);return M}catch(W){return console.error("GetCompositionById error: ",W),M}})}function o(R,M,W){return r(this,void 0,void 0,function*(){var V,Q;let te={},ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let _e=yield B(R,M,W);return te[null!==(Q=null===(V=ne?.type)||void 0===V?void 0:V.characterValue)&&void 0!==Q?Q:""]=_e,te})}function l(R,M,W){return r(this,void 0,void 0,function*(){var V,Q;let te={},ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let _e=yield B(R,M,W);te[null!==(Q=null===(V=ne?.type)||void 0===V?void 0:V.characterValue)&&void 0!==Q?Q:""]=_e;let H={};return H.created_at=ne.entryTimeStamp,H.data=te,H.id=R,H})}function f(R,M,W){return r(this,void 0,void 0,function*(){var V,Q;let te={},ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let _e=yield O(ne,M,W);return te[null!==(Q=null===(V=ne?.type)||void 0===V?void 0:V.characterValue)&&void 0!==Q?Q:""]=_e,te})}function v(R){return r(this,void 0,void 0,function*(){var M,W;if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetComposition",{id:R})).data}catch(H){console.error("GetComposition error sw: ",H),(0,_.handleServiceWorkerException)(H)}let V=[],Q={};V=yield(0,N.s)(R);let te=[];for(let H=0;H<V.length;H++)te.includes(V[H].ofTheConceptId)||te.push(V[H].ofTheConceptId);let ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let _e=yield B(R,V,te);return Q[null!==(W=null===(M=ne?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:""]=_e,Q})}function T(R){return r(this,void 0,void 0,function*(){var M,W;let V=[],Q={};V=yield(0,N.s)(R);let te=[];for(let H=0;H<V.length;H++)te.includes(V[H].ofTheConceptId)||te.push(V[H].ofTheConceptId);let ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let _e=yield G(R,V,te);return Q[null!==(W=null===(M=ne?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:""]=_e,Q})}function s(R){return r(this,void 0,void 0,function*(){var M,W;if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetCompositionFromMemory",{id:R})).data}catch(H){console.error("GetCompositionFromMemory error sw: ",H),(0,_.handleServiceWorkerException)(H)}let V=[],Q={};V=yield h.d.GetConnectionsOfCompositionLocal(R);let te=[];for(let H=0;H<V.length;H++)te.includes(V[H].ofTheConceptId)||te.push(V[H].ofTheConceptId);let ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let _e=yield A(ne,V,te);return Q[null!==(W=null===(M=ne?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:""]=_e,Q})}function a(R){return r(this,void 0,void 0,function*(){var M,W;if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetCompositionFromMemoryNormal",{id:R})).data}catch(H){console.error("GetCompositionFromMemoryNormal error sw: ",H),(0,_.handleServiceWorkerException)(H)}let V=[],Q={};V=yield h.d.GetConnectionsOfCompositionLocal(R);let te=[];for(let H=0;H<V.length;H++)te.includes(V[H].ofTheConceptId)||te.push(V[H].ofTheConceptId);let ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let _e=yield O(ne,V,te);return Q[null!==(W=null===(M=ne?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:""]=_e,Q})}function t(R){var M=arguments;return r(this,void 0,void 0,function*(){var W,V;const Q=_.Logger.logfunction("GetCompositionWithIdFromMemory",M)||{};if(_.serviceWorker){Q.serviceWorker=!0;try{const H=yield(0,_.sendMessage)("GetCompositionWithIdFromMemory",{id:R});return _.Logger.logUpdate(Q),H.data}catch(H){console.error("GetCompositionWithIdFromMemory error sw: ",H),(0,I.ey)(Q,"GetCompositionWithIdFromMemory",H),(0,_.handleServiceWorkerException)(H)}}let te={},ne=[],_e={};try{ne=yield h.d.GetConnectionsOfCompositionLocal(R);let H=[];for(let oe=0;oe<ne.length;oe++)H.includes(ne[oe].ofTheConceptId)||H.push(ne[oe].ofTheConceptId);let ye=yield n.I.GetConcept(R);0==ye.id&&null!=R&&null!=R&&(ye=yield(0,S.r)(R));let xe=yield A(ye,ne,H);_e[null!==(V=null===(W=ye?.type)||void 0===W?void 0:W.characterValue)&&void 0!==V?V:""]=xe,te.created_at=ye.entryTimeStamp,te.data=_e,te.id=R}catch(H){console.log("this is the exception in GetCompositionWithIdFromMemory",R),(0,I.ey)(Q,"GetCompositionWithIdFromMemory",H)}return _.Logger.logUpdate(Q),te})}function c(R,M){var W=arguments;return r(this,void 0,void 0,function*(){var V,Q;const te=_.Logger.logfunction("GetCompositionFromMemoryWithConnections",W)||{};if(_.serviceWorker){te.serviceWorker=!0;try{const oe=yield(0,_.sendMessage)("GetCompositionFromMemoryWithConnections",{id:R,connectionList:M});return _.Logger.logUpdate(te),oe.data}catch(oe){console.error("GetCompositionFromMemoryWithConnections error sw: ",oe),(0,I.ey)(te,"GetCompositionFromMemoryWithConnections",oe),(0,_.handleServiceWorkerException)(oe)}}let ne={},_e=[];for(let oe=0;oe<M.length;oe++)_e.includes(M[oe].ofTheConceptId)||_e.push(M[oe].ofTheConceptId);let H=yield n.I.GetConcept(R);0==H.id&&null!=R&&null!=R&&(H=yield(0,S.r)(R));let ye=yield A(H,M,_e);ne[null!==(Q=null===(V=H?.type)||void 0===V?void 0:V.characterValue)&&void 0!==Q?Q:""]=ye;let xe={};return xe.created_at=H.entryTimeStamp,xe.data=ne,xe.id=R,_.Logger.logUpdate(te),xe})}function C(R,M){return r(this,void 0,void 0,function*(){var W,V;const Q=_.Logger.logfunction("GetCompositionWithIdFromMemoryFromConnection",[R])||{};if(_.serviceWorker){Q.serviceWorker=!0;try{const xe=yield(0,_.sendMessage)("GetCompositionWithIdFromMemory",{id:R});return _.Logger.logUpdate(Q),xe.data}catch(xe){console.error("GetCompositionWithIdFromMemory error sw: ",xe),(0,I.ey)(Q,"GetCompositionWithIdFromMemoryFromConnection",xe),(0,_.handleServiceWorkerException)(xe)}}let te={},ne=[];for(let xe=0;xe<M.length;xe++)ne.includes(M[xe].ofTheConceptId)||ne.push(M[xe].ofTheConceptId);let _e=yield n.I.GetConcept(R);0==_e.id&&null!=R&&null!=R&&(_e=yield(0,S.r)(R));let H=yield A(_e,M,ne);te[null!==(V=null===(W=_e?.type)||void 0===W?void 0:W.characterValue)&&void 0!==V?V:""]=H;let ye={};return ye.created_at=_e.entryTimeStamp,ye.data=te,ye.id=R,_.Logger.logUpdate(Q),ye})}function b(R){return r(this,void 0,void 0,function*(){if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetCompositionWithIdFromMemoryNew",{id:R})).data}catch(H){console.error("GetCompositionWithIdFromMemoryNew error sw: ",H),(0,_.handleServiceWorkerException)(H)}let W=[],V={};W=yield h.d.GetConnectionsOfCompositionLocal(R);let Q=[];for(let H=0;H<W.length;H++)Q.includes(W[H].ofTheConceptId)||Q.push(W[H].ofTheConceptId);let te=yield n.I.GetConcept(R);0==te.id&&null!=R&&null!=R&&(console.log("this concept you cannot find ",R),te=yield(0,S.r)(R)),(new Date).getTime();let ne=yield function(H,ye,xe){return r(this,arguments,void 0,function*(oe,K,ie,pe=[]){var z,ge,ke,Te,Ee,He,Ye,je;let et={},ft=oe.id,Pe=((new Date).getTime(),null!==(ge=null===(z=oe?.type)||void 0===z?void 0:z.characterValue)&&void 0!==ge?ge:"");if(!ie.includes(ft))return{[Pe]:oe?.characterValue};if(pe.includes(ft))return"";pe.push(ft);for(let rt=0;rt<K.length;rt++){let be=yield(0,_.GetTheConcept)(K[rt].ofTheConceptId),Xe=yield(0,_.GetTheConcept)(K[rt].toTheConceptId);K[rt].ofConcept=be,K[rt].toConcept=Xe;let mt=be.id,Oe=(null!==(Te=null===(ke=Xe?.type)||void 0===ke?void 0:ke.characterValue)&&void 0!==Te?Te:"").replace("the_","");null!=et[mt]&&null!=et[mt]||(et[mt]={}),et[mt][Oe]=Xe.characterValue}let yt={};for(let rt=0;rt<K.length;rt++){let be=K[rt].ofConcept,Xe=K[rt].toConcept,mt=null!==(He=null===(Ee=be?.type)||void 0===Ee?void 0:Ee.characterValue)&&void 0!==He?He:"",Oe=(null!==(je=null===(Ye=Xe?.type)||void 0===Ye?void 0:Ye.characterValue)&&void 0!==je?je:"").replace("the_","");null!=yt[be.id]&&null!=yt[be.id]||(yt[be.id]={});let Et=yt[be.id];null!=Et[mt]&&null!=Et[mt]||(Et[mt]={}),Et[mt][Oe]=null!=et[K[rt].ofTheConceptId]&&null!=et[K[rt].toTheConceptId]?et[Xe.id]:Xe.characterValue}return yt[oe.id]})}(te,W,Q);V=ne;let _e={};return _e.created_at=te.entryTimeStamp,_e.data=V,_e.id=R,_e})}function m(R){return r(this,void 0,void 0,function*(){var M,W;if(_.serviceWorker)try{return(yield(0,_.sendMessage)("GetCompositionWithIdAndDateFromMemory",{id:R})).data}catch(ye){console.error("GetCompositionWithIdAndDateFromMemory error sw: ",ye),(0,_.handleServiceWorkerException)(ye)}let V=[],Q={};V=yield h.d.GetConnectionsOfCompositionLocal(R);let te=[];for(let ye=0;ye<V.length;ye++)te.includes(V[ye].ofTheConceptId)||te.push(V[ye].ofTheConceptId);let ne=yield n.I.GetConcept(R);0==ne.id&&null!=R&&null!=R&&(ne=yield(0,S.r)(R));let _e=yield B(R,V,te);Q[null!==(W=null===(M=ne?.type)||void 0===M?void 0:M.characterValue)&&void 0!==W?W:""]=_e;let H={};return H.data=Q,H.id=R,H.created_at=ne.entryTimeStamp,H})}function L(R){var M=arguments;return r(this,void 0,void 0,function*(){var W,V;const Q=_.Logger.logfunction("GetCompositionWithId",M)||{};if(_.serviceWorker){Q.serviceWorker=!0;try{const oe=yield(0,_.sendMessage)("GetCompositionWithId",{id:R});return _.Logger.logUpdate(Q),oe.data}catch(oe){console.error("GetCompositionWithId error sw: ",oe),(0,I.ey)(Q,"GetCompositionWithId",oe),(0,_.handleServiceWorkerException)(oe)}}let te=[],ne={};te=yield(0,N.s)(R);let _e=[];for(let oe=0;oe<te.length;oe++)_e.includes(te[oe].ofTheConceptId)||_e.push(te[oe].ofTheConceptId);let H=yield n.I.GetConcept(R);0==H.id&&null!=R&&null!=R&&(H=yield(0,S.r)(R));let ye=yield B(R,te,_e);ne[null!==(V=null===(W=H?.type)||void 0===W?void 0:W.characterValue)&&void 0!==V?V:""]=ye;let xe={};return xe.data=ne,xe.id=R,_.Logger.logUpdate(Q),xe})}function A(R,M,W){return r(this,arguments,void 0,function*(V,Q,te,ne=[]){var H,ye;let xe={},oe=[],K=V.id;if(!te.includes(K))return V?.characterValue;if(ne.includes(K))return"";ne.push(K);for(let ie=0;ie<Q.length;ie++)if(Q[ie].ofTheConceptId==K)if(K!=Q[ie].toTheConceptId){let pe=Q[ie].toTheConceptId,z=yield n.I.GetConcept(pe);if(null!=z&&0!=z.id||null==pe||null==pe||(z=yield(0,S.r)(pe)),0!=z.id&&null==z?.type){let Te=z.typeId,Ee=yield n.I.GetConcept(Te);z.type=Ee,null==Ee&&null!=Te&&null!=Te&&(Ee=yield(0,S.r)(Te),z.type=Ee)}let ke=(null!==(ye=null===(H=z?.type)||void 0===H?void 0:H.characterValue)&&void 0!==ye?ye:"").replace("the_","");if(isNaN(Number(ke))){if(ke){const Te=yield A(z,Q,te,ne);xe[ke]=Te}}else{const Te=yield A(z,Q,te,ne);oe[ke]=Te,xe=oe}}else console.log("this is the faulty connection ",Q[ie]);return xe})}function O(R,M,W){return r(this,arguments,void 0,function*(V,Q,te,ne=[]){var H,ye;const xe=_.Logger.logfunction("recursiveFetchConceptNormal",[V]);(new Date).getTime();let oe={},K=[],ie=V.id;if(oe.id=ie,!te.includes(ie))return V?.characterValue;if(ne.includes(ie))return"";ne.push(ie);for(let pe=0;pe<Q.length;pe++)if(Q[pe].ofTheConceptId==ie)if(ie!=Q[pe].toTheConceptId){let z=Q[pe].toTheConceptId,ge=yield n.I.GetConcept(z);if(null!=ge&&0!=ge.id||null==z||null==z||(ge=yield(0,S.r)(z)),0!=ge.id&&null==ge?.type){let Ee=ge.typeId,He=yield n.I.GetConcept(Ee);ge.type=He,null==He&&null!=Ee&&null!=Ee&&(He=yield(0,S.r)(Ee),ge.type=He)}let Te=(null!==(ye=null===(H=ge?.type)||void 0===H?void 0:H.characterValue)&&void 0!==ye?ye:"").replace("the_","");if(isNaN(Number(Te))){if(Te){const Ee=yield A(ge,Q,te,ne);oe[Te]=Ee}}else{const Ee=yield A(ge,Q,te,ne);K[Te]=Ee,oe=K}}else console.log("this is the faulty connection ",Q[pe]);return _.Logger.logUpdate(xe),oe})}function B(R,M,W){return r(this,arguments,void 0,function*(V,Q,te,ne=[]){var H,ye;let xe={},oe=[];if(0==V)return null;let K=yield n.I.GetConcept(V);if(null!=K&&0!=K.id||null==V||null==V||(K=yield(0,S.r)(V)),0!=K.id&&null==K.type){let ie=K.typeId,pe=yield n.I.GetConcept(ie);K.type=pe,null==pe&&null!=ie&&null!=ie&&(pe=yield(0,S.r)(ie),K.type=pe)}if(!te.includes(V))return K?.characterValue;if(ne.includes(V))return"";ne.push(V);for(let ie=0;ie<Q.length;ie++)if((new Date).getTime(),Q[ie].ofTheConceptId==V)if(V!=Q[ie].toTheConceptId){let pe=Q[ie].toTheConceptId,z=yield n.I.GetConcept(pe);if(null!=z&&0!=z.id||null==pe||null==pe||(z=yield(0,S.r)(pe)),0!=z.id&&null==z?.type){let Te=z.typeId,Ee=yield n.I.GetConcept(Te);z.type=Ee,null==Ee&&null!=Te&&null!=Te&&(Ee=yield(0,S.r)(Te),z.type=Ee)}let ke=(null!==(ye=null===(H=z?.type)||void 0===H?void 0:H.characterValue)&&void 0!==ye?ye:"").replace("the_","");if(isNaN(Number(ke))){if(ke){const Te=yield B(pe,Q,te,ne);xe[ke]=Te}}else{const Te=yield B(pe,Q,te,ne);oe[ke]=Te,xe=oe}}else console.log("this is the faulty connection ",Q[ie]);return xe})}function G(R,M,W){return r(this,arguments,void 0,function*(V,Q,te,ne=[]){var H,ye;let xe={},oe=[];if(0==V)return null;let K=yield n.I.GetConcept(V);if(null!=K&&0!=K.id||null==V||null==V||(K=yield(0,S.r)(V)),0!=K.id&&null==K.type){let ie=K.typeId,pe=yield n.I.GetConcept(ie);K.type=pe,null==pe&&null!=ie&&null!=ie&&(pe=yield(0,S.r)(ie),K.type=pe)}if(!te.includes(V))return K?.characterValue;if(ne.includes(V))return"";ne.push(V),xe.id=V;for(let ie=0;ie<Q.length;ie++)if(Q[ie].ofTheConceptId==V){let pe=Q[ie].toTheConceptId,z=yield n.I.GetConcept(pe);if(null!=z&&0!=z.id||null==pe||null==pe||(z=yield(0,S.r)(pe)),z&&null==z?.type){let Te=z.typeId,Ee=yield n.I.GetConcept(Te);z.type=Ee,null==Ee&&null!=Te&&null!=Te&&(Ee=yield(0,S.r)(Te),z.type=Ee)}let ke=(null!==(ye=null===(H=z?.type)||void 0===H?void 0:H.characterValue)&&void 0!==ye?ye:"").replace("the_","");if(isNaN(Number(ke))){if(ke){const Te=yield G(pe,Q,te);xe[ke]=Te}}else{const Te=yield G(pe,Q,te);oe[ke]=Te,xe=oe}}return xe})}},9003:(X,E,g)=>{g.d(E,{S5:()=>r,kH:()=>o,qI:()=>I});var S=g(1863),N=g(5205),n=function(l,f,v,T){return new(v||(v=Promise))(function(s,a){function t(b){try{C(T.next(b))}catch(m){a(m)}}function c(b){try{C(T.throw(b))}catch(m){a(m)}}function C(b){var m;b.done?s(b.value):(m=b.value,m instanceof v?m:new v(function(L){L(m)})).then(t,c)}C((T=T.apply(l,f||[])).next())})};let h=10;class _{}function I(l){const f=N.Logger.logfunction("openDatabase",arguments);return new Promise(function(v,T){_.db&&(N.Logger.logUpdate(f),v(_.db));let s=N.BaseUrl.BASE_URL+"_FreeSchemaLocal"+N.BaseUrl.BASE_APPLICATION;const a=indexedDB.open(s,h);a.onupgradeneeded=t=>{var c=t.target.result,C="localconcept",b="localconnection",m="localid";console.log("this is the version upgrade",h),c.objectStoreNames.contains(C)&&c.deleteObjectStore(C),c.objectStoreNames.contains(b)&&c.deleteObjectStore(b),c.objectStoreNames.contains(m)&&c.deleteObjectStore(m),c.objectStoreNames.contains(C)||(c.createObjectStore(C,{keyPath:"id"}).transaction.oncomplete=L=>{}),c.objectStoreNames.contains(b)||(c.createObjectStore(b,{keyPath:"id"}).transaction.oncomplete=L=>{}),c.objectStoreNames.contains(m)||(c.createObjectStore(m,{keyPath:"id"}).transaction.oncomplete=L=>{e(m,{id:0,value:-100}),e(m,{id:1,value:-200}),e(m,{id:3,value:N.BaseUrl.getRandomizer()})}),v(c)},a.onerror=t=>{console.error("Why didn't you allow my web app to use IndexedDB?!",t),indexedDB.deleteDatabase(s),I(l),(0,S.ey)(f,"openDatabase",t),T(t)},a.onsuccess=function(t){_.db=t.target.result,N.Logger.logUpdate(f),v(_.db)}})}function r(l){var f=arguments;return n(this,void 0,void 0,function*(){const v=N.Logger.logfunction("getObjectsFromLocalIndexDb",f);return new Promise(function(T,s){I(l).then(a=>{var t=[],c=a.transaction(l,"readwrite").objectStore(l).getAll();c.onsuccess=()=>{const C=c.result;for(var b=0;b<C.length;b++)t.push(C[b]);N.Logger.logUpdate(v),T(t)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot get objects from database because you cannot open the Local database",data:a};(0,S.ey)(v,"getObjectsFromLocalIndexDb",t),s(t)})})})}function e(l,f){const v=N.Logger.logfunction("storeToDatabase",[l,"localindexdb"]);return new Promise(function(T,s){I(l).then(a=>{const t=a.transaction(l,"readwrite").objectStore(l).add(f);t.onsuccess=c=>{N.Logger.logUpdate(v),T(f)},t.onerror=c=>{let C={status:400,ok:!1,message:"Cannot store to the Local database "+l,data:c,body:f};(0,S.ey)(v,"storeToDatabase",C),s(C)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot store to database because you cannot open the Local database",data:a};(0,S.ey)(v,"storeToDatabase",t),s(t)})})}function o(l,f){const v=N.Logger.logfunction("UpdateToDatabase",arguments);return new Promise(function(T,s){I(l).then(a=>{const t=a.transaction(l,"readwrite").objectStore(l).put(f);t.onsuccess=c=>{N.Logger.logUpdate(v),T(f)},t.onerror=c=>{let C={status:400,ok:!1,message:"Cannot Update to the Local database"+l,data:c,body:f};(0,S.ey)(v,"UpdateToDatabase",C),s(C)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot update to database because you cannot open the Local database",data:a};(0,S.ey)(v,"UpdateToDatabase",t),s(t)})})}},9371:(X,E,g)=>{let S=g(3152);class N extends S{constructor(h){super(h),this.type="comment"}}X.exports=N,N.default=N},9577:(X,E,g)=>{let S=g(7793),N=g(1106),n=g(8339);function h(_,I){let r=new N(_,I),e=new n(r);try{e.parse()}catch(o){throw o}return e.root}X.exports=h,h.default=h,S.registerParse(h)},9581:(X,E,g)=>{g.d(E,{B:()=>S});class S{static setRandomizer(n){console.log("set randomizer",n),this.BASE_RANDOMIZER=n}static getRandomizer(){return this.BASE_RANDOMIZER}static GetConceptUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&"string"==typeof this.NODE_CACHE_URL&&""===this.NODE_CACHE_URL.trim()?this.BASE_URL+"/api/getConcept":this.NODE_CACHE_URL+"/api/getConcept"}static GetConnectionUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&"string"==typeof this.NODE_CACHE_URL&&""===this.NODE_CACHE_URL.trim()?this.BASE_URL+"/api/get-connection-by-id":this.NODE_CACHE_URL+"/api/get-connection-by-id"}static GetConceptBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&"string"==typeof this.NODE_CACHE_URL&&""===this.NODE_CACHE_URL.trim()?this.BASE_URL+"/api/get_concept_bulk":this.NODE_CACHE_URL+"/api/get_concept_bulk"}static GetConnectionBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&"string"==typeof this.NODE_CACHE_URL&&""===this.NODE_CACHE_URL.trim()?this.BASE_URL+"/api/get_connection_bulk":this.NODE_CACHE_URL+"/api/get_connection_bulk"}static GetAllConceptsOfUserUrl(){return this.BASE_URL+"/api/get_all_concepts_of_user"}static GetAllConnectionsOfUserUrl(){return this.BASE_URL+"/api/get_all_connections_of_user"}static GetAllConnectionsOfCompositionUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition"}static GetAllConnectionsOfCompositionBulkUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition_bulk"}static GetConceptByCharacterValueUrl(){return this.BASE_URL+"/api/get_concept_by_character_value"}static GetConceptByCharacterAndTypeUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_type"}static GetConceptByCharacterAndCategoryUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category"}static GetConceptByCharacterAndCategoryDirectUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category_direct"}static GetCharacterByCharacterUrl(){return this.BASE_URL+"/api/get_character_by_character"}static GetAllConceptsByTypeUrl(){return this.BASE_URL+"/api/get_all_concepts_by_type"}static GetAllConnectionsOfConceptUrl(){return this.BASE_URL+"/api/get-link-connections"}static GetAllConnectionsToConceptUrl(){return this.BASE_URL+"/api/get-link-reverse-connections"}static GetAllAiData(){return this.BASE_URL+"/api/get-preloaded-concepts"}static getAppConfig(){return this.NODE_URL+"/api/v1/config"}static PostPrefetchConceptConnections(){return this.NODE_URL+"/api/v1/access-tracker/sync-access-tracker"}static GetSuggestedConcepts(){return this.NODE_URL+"/api/v1/access-tracker/list-concepts-file"}static GetSuggestedConnections(){return this.NODE_URL+"/api/v1/access-tracker/list-connections-file"}static PostLogger(){return this.LOG_SERVER+"/api/logger"}static LogHealth(){return this.LOG_SERVER+"/api/check"}static GetAllPrefetchConnectionsUrl(){return this.BASE_URL+"/api/get_all_connections_of_user?inpage=500"}static GetAllLinkerConnectionOfConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-from-concept"}static GetAllLinkerConnectionToConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-to-concept"}static DeleteConceptUrl(){return this.BASE_URL+"/api/delete_concept"}static DeleteUserUrl(){return this.BASE_URL+"/api/deleteuser"}static RecursiveSearchUrl(){return this.BASE_URL+"/api/recursivesearch-concept-connection"}static SearchLinkMultipleAllApiUrl(){return this.BASE_URL+"/api/Connection/search-link-multiple-all-ccs"}static MakeTheNameInBackendUrl(){return this.BASE_URL+"/api/make-name-from-frontend"}static SearchAllTypeWithLinker(n=!0){return n?this.BASE_URL+"/api/search-all-with-linker-ccs":this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static LoginUrl(){return this.BASE_URL+"/api/auth/login"}static SignupUrl(){return this.BASE_URL+"/api/auth/signup"}static GetCompositionConnectionBetweenTwoConceptsUrl(){return this.BASE_URL+"/api/get-composition-connection-between-two-concepts"}static SearchCompositionsUrl(){return this.BASE_URL+"/api/search-compositions"}static SearchLinkMultipleAll(){return this.BASE_URL+"/api/Connection/search-link-multiple-all"}static CreateSessionId(){return this.BASE_URL+"/api/create-session-id-remote"}static CreateSessionVisitUrl(){return this.BASE_URL+"/api/create-remote-session-visit"}static ViewInternalDataUrl(){return this.BASE_URL+"/api/view-api-internal-data-ccs-id-bulk"}static SearchInternalWithAuthenticatedCcsUrl(){return this.BASE_URL+"/api/search-composition-internal-authenticated-ccs"}static SearchInternalWithCcsUrl(){return this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static CreateGhostConceptApiUrl(n=!0){return n?S.NODE_URL+"/api/v1/local-concepts":S.NODE_URL+"/api/v1/local-concepts-without-auth"}static CreateGhostConnectionApiUrl(){return S.NODE_URL+"/api/v1/local-connections"}static GetRealConceptById(){return S.NODE_URL+"/api/v1/local-concepts-translate"}static GetReservedIdUrl(){return this.BASE_URL+"/api/get_reserved_ids"}static GetReservedConnectionIdUrl(){return this.BASE_URL+"/api/get_reserved_connection_ids"}static CreateTheTextDataUrl(){return this.BASE_URL+"/api/create_text_data"}static CreateTheCharacterDataUrl(){return this.BASE_URL+"/api/create_character_data"}static CreateTheConceptUrl(){return this.BASE_URL+"/api/create_the_concept"}static CreateTheConnectionUrl(){return this.BASE_URL+"/api/create_the_connection"}static CreateTheConnectionNewUrl(){return this.BASE_URL+"/api/create_the_connection_new"}static MakeTheTypeConceptUrl(){return this.BASE_URL+"/api/make_the_type_concept"}static DeleteTheConnectionUrl(){return this.BASE_URL+"/api/delete_connection"}static DeleteTheConnectionBulkUrl(){return this.BASE_URL+"/api/delete_connection_bulk"}static GetTypeConceptBulk(){return this.BASE_URL+"/api/get_type_concept_by_character_bulk"}static UploadFileLimitUrl(){return this.BASE_URL+"/api/upload/limit"}static FreeschemaQueryUrl(){return this.BASE_URL+"/api/freeschema-query"}static uploadImageUrl(){return this.BASE_URL+"/api/Image/UploadImage"}static uploadImageUrlWithSmall(){return this.BASE_URL+"/api/Image/UploadImageV2"}static uploadFileUrl(){return this.BASE_URL+"/api/Image/UploadFile"}static sendMail(){return this.BASE_URL+"/api/sendmail"}static sendBulkMail(){return this.BASE_URL+"/api/sendmail/bulk"}static getWidgetData(){return this.BASE_URL+"/api/get-widget"}static getLatestWidgetData(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&"string"==typeof this.NODE_CACHE_URL&&""===this.NODE_CACHE_URL.trim()?this.BASE_URL+"/api/get-latest-widget":this.NODE_CACHE_URL+"/api/get-latest-widget"}static getRecentWidgetData(){return this.BASE_URL+"/api/get-recent-widget"}static getConnectionsByTypes(){return this.BASE_URL+"/api/get-connection-by-types"}static CreatePrototypeUrl(){return this.BASE_URL+"/api/create-prototype"}static GetCachedImage(n){return"https://cdn.boomconcole.com/freeschema/"+n}}S.BASE_URL="https://localhost:7053/",S.NODE_CACHE_URL="",S.AI_URL="https://ai.freeschema.com",S.MQTT_URL="192.168.1.249",S.NODE_URL="http://localhost:5001",S.LOG_SERVER="https://logdev.freeschema.com",S.BASE_APPLICATION="",S.DOCUMENTATION_WIDGET=0,S.isNearestCache=!0,S.FLAGS={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1},S.BASE_RANDOMIZER=999},9606:(X,E,g)=>{E.__esModule=!0,E.unesc=E.stripComments=E.getProp=E.ensureObject=void 0;var S=_(g(5286));E.unesc=S.default;var N=_(g(6291));E.getProp=N.default;var n=_(g(1557));E.ensureObject=n.default;var h=_(g(8354));function _(I){return I&&I.__esModule?I:{default:I}}E.stripComments=h.default},9635:(X,E,g)=>{g.d(E,{x:()=>S});const S=new BroadcastChannel("Freeschema_mftsccs_browser_channel")},9700:(X,E,g)=>{g.d(E,{V:()=>r});var S,N=g(5205),n=g(3278),h=g(1863),_=g(3518),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,T){function s(c){try{t(f.next(c))}catch(C){T(C)}}function a(c){try{t(f.throw(c))}catch(C){T(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof l?C:new l(function(b){b(C)})).then(s,a)}t((f=f.apply(e,o||[])).next())})};class r{static startAutoSync(){this.autoSyncInterval?console.warn("Auto-sync is already running."):(this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS,setInterval(()=>{const o=Date.now();this.nextSyncTime&&o>=this.nextSyncTime&&(this.nextSyncTime=o+this.SYNC_INTERVAL_MS,this.sendPackageLogsToServer(),this.sendApplicationLogsToServer())},3e4))}static stopAutoSync(){null!==this.autoSyncInterval&&(clearInterval(this.autoSyncInterval),this.autoSyncInterval=null,this.nextSyncTime=null)}static setLogLevel(o){this.logLevel=o}static shouldLog(o){return this.LOG_LEVELS.indexOf(o)>=this.LOG_LEVELS.indexOf(this.logLevel)}static formatLogData(o,l,f){const v=Object.assign({timestamp:(new Date).toISOString(),level:o,message:l},f);return this.packageLogsData.push(v),"ERROR"==o&&(this.sendPackageLogsToServer(),this.sendApplicationLogsToServer()),v}static log(o,l,f){if(this.logPackageActivationStatus)try{this.formatLogData(o,l,f||null)}catch(v){console.error("Error on Logger Log : ",v)}}static logUpdate(o){var l;try{if(!this.logPackageActivationStatus)return{};if(!o)return{};const f=Date.now();o.startTime=null!==(l=o.startTime)&&void 0!==l?l:f,o.responseTime=f-o.startTime+" ms",1==!o.serviceWorker&&(o.serviceWorker=!1)}catch(f){(0,h.ey)(o,"Logger.logUpdate",f)}}static logfunction(o,...l){if(!this.logPackageActivationStatus)return{};const f=Date.now();let v=l;const T=N.BaseUrl.getRandomizer();return this.formatLogData("INFO","function called",{startTime:f,functionName:o,functionParameters:v,requestFrom:N.BaseUrl.BASE_APPLICATION,sessionId:n.b.sessionId,applicationId:T})}static logError(o,l,f,v,T,s,a,t,c,C,b){try{const m=n.b.sessionId,L={startTime:o,userId:l,operationType:f,requestFrom:v,requestIP:T,responseStatus:s,responseTime:`${(performance.now()-o).toFixed(3)}ms`,responseSize:a?`${JSON.stringify(a).length}`:"0",sessionId:m?.toString(),functionName:t,functionParameters:c,userAgent:C,conceptsUsed:b};this.formatLogData("ERROR",`Information logged for ${t}`,L)}catch{console.error("Error on logError")}}static logApplication(o,l,f){if(this.logApplicationActivationStatus)try{const v={timestamp:(new Date).toISOString(),level:o,message:l,data:f||null};this.applicationLogsData.push(v),"ROUTE"!=o&&"USER_EVENT"!=o||(this.sendPackageLogsToServer(),this.sendApplicationLogsToServer())}catch(v){console.error("Failed to log application activity:",v)}}static checkLoggerServerStatus(){return I(this,void 0,void 0,function*(){let o=1e4+S.checkInterval;if(S.lastCheck&&(new Date).getTime()-S.lastCheck.getTime()<o)console.log("still cooling down");else{try{let f=N.BaseUrl.LogHealth();S.lastCheck=new Date,(yield fetch(f,{method:"GET"})).ok&&(S.isLoggerActive=!0,S.checkInterval=0)}catch{console.warn("This is error in the logger check")}S.checkInterval=S.checkInterval+500}})}static sendApplicationLogsToServer(){return I(this,void 0,void 0,function*(){const o=this.applicationLogsData;try{if(!S.isLoggerActive)return void S.checkLoggerServerStatus();if(0===o.length)return;this.applicationLogsData=[];const l=50;let f=(0,_.Xr)(),v=0;for(;0!=o.length;){const T=o.slice(0,l),s=yield fetch(N.BaseUrl.PostLogger(),{method:"POST",headers:f,body:JSON.stringify({logType:this.appLogs,logData:T})});s.ok||404===s.status&&(S.isLoggerActive=!1),o.splice(0,l),v+=l,v++}}catch{S.isLoggerActive=!1}})}static sendPackageLogsToServer(){return I(this,void 0,void 0,function*(){const o=this.packageLogsData;try{if(!S.isLoggerActive)return void S.checkLoggerServerStatus();if(0===o.length)return;this.packageLogsData=[];const l=300;let f=0;for(;0!=o.length;){const v=o.slice(0,l);let T=(0,_.Xr)();const s=yield fetch(N.BaseUrl.PostLogger(),{method:"POST",headers:T,body:JSON.stringify({logType:this.mftsccsBrowser,logData:v})});if(!s.ok)return void(404===s.status&&(S.isLoggerActive=!1));o.splice(0,l),f++}}catch{S.isLoggerActive=!1}})}static saveLogToLocalStorage(o,l){try{if(void 0===typeof localStorage)return void console.warn("Local Storage type undefined");{const f=JSON.parse((null==localStorage?void 0:localStorage.getItem(o))||"[]");f.push(l),localStorage?.setItem(o,JSON.stringify(f))}}catch{console.error("Error on saving log in localstorage"),this.log("ERROR","Error while saving log in local storage")}}static clearLogsFromLocalStorage(o){void 0!==typeof localStorage?localStorage?.removeItem(o):console.warn("localStorage is not available")}}S=r,r.isLoggerActive=!0,r.lastCheck=new Date,r.checkInterval=0,r.logLevel="INFO",r.packageLogsData=[],r.applicationLogsData=[],r.LOG_LEVELS=["DEBUG","INFO","WARNING","ERROR","ROUTE"],r.SYNC_INTERVAL_MS=6e4,r.nextSyncTime=null,r.appLogs="app",r.mftsccsBrowser="mftsccs",r.logApplicationActivationStatus=!1,r.logPackageActivationStatus=!1,r.autoSyncInterval=null,S.startAutoSync()},9720:(X,E,g)=>{E.__esModule=!0,E.default=void 0;var S,N=(S=g(3295))&&S.__esModule?S:{default:S},n=g(1581);function h(I,r){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(I,r)}var _=function(I){var r,e;function o(l){var f;return(f=I.call(this,l)||this).type=n.TAG,f}return e=I,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(N.default);E.default=_,X.exports=E.default},9736:(X,E,g)=>{g.d(E,{v:()=>c});var S=g(205),N=g(2515),n=function(C,b,m,L){return new(m||(m=Promise))(function(A,O){function B(M){try{R(L.next(M))}catch(W){O(W)}}function G(M){try{R(L.throw(M))}catch(W){O(W)}}function R(M){var W;M.done?A(M.value):(W=M.value,W instanceof m?W:new m(function(V){V(W)})).then(B,G)}R((L=L.apply(C,b||[])).next())})};let h=(()=>{class C{static addNodeToTree(m){if(null==this.root)return this.root=m,this.root;this.root=this.root.addNode(m,this.root,this.root.height)}static addConceptToTree(m){var L=new N.x(m.id,m,null,null);new N.x(m.characterValue,m,null,null),this.addNodeToTree(L)}static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((m,L)=>{this.checkFlag(m),setTimeout(()=>{L("not")},25e3)})})}static checkFlag(m){if(S.B.isLocalDataLoaded)return m("done");setTimeout(C.checkFlag,1e3,m)}static getNodeFromTree(m){return n(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(m,this.root):null})}static getCharacterAndTypeFromTree(m,L){return this.root?this.root.getFromNodeWithCharacterAndType(m,L,this.root):this.root}static updateSyncStatus(m){return this.root?this.root.updateNodeSyncStatus(m,!0,this.root):this.root}static removeNodeFromTree(m){return n(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,m))})}}return C.root=null,C})();var _=function(C,b,m,L){return new(m||(m=Promise))(function(A,O){function B(M){try{R(L.next(M))}catch(W){O(W)}}function G(M){try{R(L.throw(M))}catch(W){O(W)}}function R(M){var W;M.done?A(M.value):(W=M.value,W instanceof m?W:new m(function(V){V(W)})).then(B,G)}R((L=L.apply(C,b||[])).next())})};let I=(()=>{class C{static waitForDataToLoad(){return _(this,void 0,void 0,function*(){return new Promise((m,L)=>{this.checkFlag(m),setTimeout(()=>{L("not")},25e3)})})}static checkFlag(m){if(S.B.isLocalCharacterLoaded)return m("done");setTimeout(C.checkFlag,1e3,m)}static addNodeToTree(m){return _(this,void 0,void 0,function*(){return null==this.LocalCharacterRoot?(this.LocalCharacterRoot=m,this.LocalCharacterRoot):(this.LocalCharacterRoot=this.LocalCharacterRoot.addCharacterNode(m,this.LocalCharacterRoot,this.LocalCharacterRoot.height),this.LocalCharacterRoot)})}static addConceptToTree(m){if(""!=m.characterValue){var L=new N.x(m.characterValue,m,null,null);this.addNodeToTree(L)}}static getNodeFromTree(m){return this.LocalCharacterRoot?this.LocalCharacterRoot.getCharacterFromNode(m,this.LocalCharacterRoot):this.LocalCharacterRoot}static getCharacterAndTypeFromTree(m,L){return _(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndType(m,L,this.LocalCharacterRoot):this.LocalCharacterRoot})}static getCharacterAndCategoryFromTree(m,L){return _(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndCategory(m,L,this.LocalCharacterRoot):this.LocalCharacterRoot})}static removeConceptType(m,L){this.LocalCharacterRoot&&(this.LocalCharacterRoot=this.LocalCharacterRoot.removeNodeWithVariants(this.LocalCharacterRoot,m,L))}}return C.LocalCharacterRoot=null,C})();var r=function(C,b,m,L){return new(m||(m=Promise))(function(A,O){function B(M){try{R(L.next(M))}catch(W){O(W)}}function G(M){try{R(L.throw(M))}catch(W){O(W)}}function R(M){var W;M.done?A(M.value):(W=M.value,W instanceof m?W:new m(function(V){V(W)})).then(B,G)}R((L=L.apply(C,b||[])).next())})};let e=(()=>{class C{static addNodeToTree(m){return r(this,void 0,void 0,function*(){return null==this.LocalTypeRoot?(this.LocalTypeRoot=m,this.LocalTypeRoot):(this.LocalTypeRoot=this.LocalTypeRoot.addTypeNode(m,this.LocalTypeRoot,this.LocalTypeRoot.height),this.LocalTypeRoot)})}static addConceptToTree(m){if(0!=m.typeId){var L=new N.x(m.typeId,m,null,null);this.addNodeToTree(L)}}static removeConceptType(m,L){this.LocalTypeRoot&&(this.LocalTypeRoot=this.LocalTypeRoot.removeNodeWithVariants(this.LocalTypeRoot,m,L))}static getNodeFromTree(m){return this.LocalTypeRoot?this.LocalTypeRoot.getFromNode(m,this.LocalTypeRoot):this.LocalTypeRoot}static getTypeVariantsFromTree(m){var L=this.getNodeFromTree(m),A=[];if(L){A.push(L?.value);for(let O=0;O<L.variants.length;O++)A.push(L.variants[O].value);return A}}static waitForDataToLoad(){return r(this,void 0,void 0,function*(){return new Promise((m,L)=>{this.checkFlag(m),setTimeout(()=>{L("not")},25e3)})})}static checkFlag(m){if(S.B.isLocalTypeLoaded)return m("done");setTimeout(C.checkFlag,1e3,m)}static getTypeVariantsFromTreeWithUserId(m,L){return r(this,void 0,void 0,function*(){var A=[],O=this.getNodeFromTree(m);if(O){console.log("this is the node to type",O),O.value.userId!=L&&999!=O.value.userId||A.push(O?.value);for(let B=0;B<O.variants.length;B++)O.variants[B].value.userId!=L&&999!=O.value.userId||A.push(O.variants[B].value)}return A})}}return C.LocalTypeRoot=null,C})();var o=g(6416),l=g(3026),f=g(7820),v=g(4864),T=g(628),s=g(5205),a=g(3278),t=function(C,b,m,L){return new(m||(m=Promise))(function(A,O){function B(M){try{R(L.next(M))}catch(W){O(W)}}function G(M){try{R(L.throw(M))}catch(W){O(W)}}function R(M){var W;M.done?A(M.value):(W=M.value,W instanceof m?W:new m(function(V){V(W)})).then(B,G)}R((L=L.apply(C,b||[])).next())})};let c=(()=>{class C{constructor(){this.name="conceptsArray"}static AddConcept(m){0!=m.id&&(h.addConceptToTree(m),I.addConceptToTree(m),e.addConceptToTree(m),this.localconceptsArray.push(m))}static AddPermanentConcept(m){0!=m.id&&(h.removeNodeFromTree(m.ghostId),I.removeConceptType(m.characterValue,m.ghostId),e.removeConceptType(m.typeId,m.ghostId),f.G.addConceptToTree(m),l.I.AddConcept(m),(0,s.AddGhostConcept)(m,m.userId,a.b.sessionId))}static RemoveConcept(m){return t(this,void 0,void 0,function*(){try{0!=m.id&&(h.removeNodeFromTree(m.ghostId),I.removeConceptType(m.characterValue,m.ghostId),e.removeConceptType(m.typeId,m.ghostId))}catch(L){throw L}})}static RemoveConceptById(m){return t(this,void 0,void 0,function*(){try{let L=yield C.GetConcept(m);0!=L.id&&(h.removeNodeFromTree(m),I.removeConceptType(L.characterValue,L.ghostId),e.removeConceptType(L.typeId,L.ghostId),T.H.RemoveConcept(L))}catch(L){throw L}})}static AddConceptToMemory(m){0!=m.id&&(h.addConceptToTree(m),I.addConceptToTree(m),e.addConceptToTree(m))}static GetConcept(m){return t(this,void 0,void 0,function*(){var L=(0,o.u)(),A=yield h.getNodeFromTree(m);if(A?.value){var O=A.value;O&&(L=O)}return L})}static UpdateConceptSyncStatus(m){return t(this,void 0,void 0,function*(){h.updateSyncStatus(m)})}static GetConceptByGhostId(m){return t(this,void 0,void 0,function*(){var L=(0,o.u)(),A=yield f.G.getNodeFromTree(m);if(A?.value){var O=A.value;O&&(L=O)}return L})}static GetConceptByCharacter(m){return t(this,void 0,void 0,function*(){var L=(0,o.u)(),A=I.getNodeFromTree(m);return A&&(L=A.value),L})}static GetConceptByCharacterAndTypeLocal(m,L){return t(this,void 0,void 0,function*(){var A=(0,o.u)(),O=yield I.getCharacterAndTypeFromTree(m,L);return O&&(A=O.value),A})}static GetConceptByCharacterAndCategoryLocal(m,L){return t(this,void 0,void 0,function*(){var A=(0,o.u)(),O=yield I.getCharacterAndCategoryFromTree(m,L);return O&&(A=O.value),A})}static GetConceptsByTypeId(m){let L=[];for(var A=0;A<this.localconceptsArray.length;A++)this.localconceptsArray[A].typeId==m&&L.push(this.localconceptsArray[A]);return L}static GetConceptsByTypeIdAndUser(m,L){return t(this,void 0,void 0,function*(){let A=[];return A=yield e.getTypeVariantsFromTreeWithUserId(m,L),A})}static ClearData(){return t(this,void 0,void 0,function*(){this.localconceptsArray=[],v.G.connectionArray=[]})}getName(){return this.name}}return C.localconceptsArray=[],C})()},9746:()=>{},9934:(X,E,g)=>{function S(N,n){return-1===N.indexOf(n)&&N.push(n),N}g.d(E,{A:()=>S})},9975:(X,E,g)=>{g.d(E,{A:()=>_});var S=g(5205),N=g(9736),n=g(3077),h=function(I,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{s(o.next(a))}catch(t){f(t)}}function T(a){try{s(o.throw(a))}catch(t){f(t)}}function s(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,T)}s((o=o.apply(I,r||[])).next())})};function _(I,r,e,o,l){return h(this,arguments,void 0,function*(f,v,T,s,a,t={concepts:[],connections:[]}){var c,C,b,m;if(S.serviceWorker)try{const O=yield(0,S.sendMessage)("MakeTheConceptLocal",{referent:f,typeCharacter:v,userId:T,categoryId:s,typeId:a,actions:t});return!(null===(C=null===(c=O?.actions)||void 0===c?void 0:c.concepts)||void 0===C)&&C.length&&(t.concepts=JSON.parse(JSON.stringify(O.actions.concepts))),!(null===(m=null===(b=O?.actions)||void 0===b?void 0:b.connections)||void 0===m)&&m.length&&(t.connections=JSON.parse(JSON.stringify(O.actions.connections))),O.data}catch(O){console.error("MakeTheConceptLocal error sw: ",O),(0,S.handleServiceWorkerException)(O)}let L=yield N.v.GetConceptByCharacterAndTypeLocal(f,a),A=L;return"the"==v&&(s=1),0==A.id&&(L=yield(0,n.A)(f,v,T,s,a,4,void 0,null,t),A=L),A})}},9977:()=>{}},$={};function Le(X){var E=$[X];if(void 0!==E)return E.exports;var g=$[X]={exports:{}};return Rt[X](g,g.exports,Le),g.exports}Le.n=X=>{var E=X&&X.__esModule?()=>X.default:()=>X;return Le.d(E,{a:E}),E},Le.d=(X,E)=>{for(var g in E)Le.o(E,g)&&!Le.o(X,g)&&Object.defineProperty(X,g,{enumerable:!0,get:E[g]})},Le.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),Le.o=(X,E)=>Object.prototype.hasOwnProperty.call(X,E),Le.r=X=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(X,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(X,"__esModule",{value:!0})};var Y=Le(5205);const Bt=Y.ADMIN,ut=Y.ALLID,Pt=Y.AccessTracker,vt=Y.AddGhostConcept,Ft=Y.Anomaly,ue=Y.BaseUrl,Z=Y.BinaryTree,he=Y.BuildWidgetFromId,re=Y.BuilderStatefulWidget,ae=Y.Composition,ce=Y.CompositionBinaryTree,we=Y.CompositionNode,Ce=Y.Concept,Ge=Y.ConceptsData,Re=Y.Connection,Fe=Y.ConnectionData,ze=Y.CountInfo,ve=Y.CreateComposition,Je=Y.CreateConnection,nt=Y.CreateConnectionBetweenEntityLocal,wt=Y.CreateConnectionBetweenTwoConcepts,kt=Y.CreateConnectionBetweenTwoConceptsGeneral,sn=Y.CreateConnectionBetweenTwoConceptsLocal,xt=Y.CreateData,en=Y.CreateDefaultConcept,nn=Y.CreateDefaultLConcept,yn=Y.CreateSession,Nn=Y.CreateSessionVisit,xn=Y.CreateTheCompositionLocal,Tt=Y.CreateTheCompositionWithCache,Qe=Y.CreateTheConnection,Ke=Y.CreateTheConnectionGeneral,We=Y.CreateTheConnectionLocal,se=Y.DATAID,me=Y.DATAIDDATE,dt=Y.DATAV2,At=Y.DelayFunctionExecution,le=Y.DeleteConceptById,fe=Y.DeleteConceptLocal,Ae=Y.DeleteConnectionById,Ie=Y.DeleteConnectionByIdBulk,Se=Y.DeleteConnectionByType,$e=Y.DeleteConnectionByTypeBulk,ct=Y.DeleteUser,Ze=Y.DependencyObserver,Be=Y.Environments,qe=Y.FilterSearch,Ct=Y.FormatFromConnections,Ut=Y.FormatFromConnectionsAltered,Nt=Y.FreeschemaQuery,it=Y.FreeschemaQueryApi,Ot=Y.GetAllConnectionsOfComposition,Gt=Y.GetAllConnectionsOfCompositionBulk,on=Y.GetAllTheConnectionsByTypeAndOfTheConcept,Ht=Y.GetComposition,an=Y.GetCompositionBulk,Tn=Y.GetCompositionBulkWithDataId,On=Y.GetCompositionFromConnectionsWithDataId,Jt=Y.GetCompositionFromConnectionsWithDataIdFromConnections,vn=Y.GetCompositionFromConnectionsWithDataIdInObject,to=Y.GetCompositionFromConnectionsWithDataIdIndex,jo=Y.GetCompositionFromConnectionsWithIndex,Ii=Y.GetCompositionFromConnectionsWithIndexFromConnections,ki=Y.GetCompositionFromMemoryWithConnections,ua=Y.GetCompositionList,ha=Y.GetCompositionListAll,pa=Y.GetCompositionListAllWithId,fa=Y.GetCompositionListListener,ya=Y.GetCompositionListLocal,ga=Y.GetCompositionListLocalWithId,va=Y.GetCompositionListWithId,ma=Y.GetCompositionListWithIdUpdated,Ca=Y.GetCompositionListener,_a=Y.GetCompositionLocal,wa=Y.GetCompositionLocalWithId,Ta=Y.GetCompositionWithAllIds,ba=Y.GetCompositionWithCache,Ia=Y.GetCompositionWithDataIdBulk,ka=Y.GetCompositionWithDataIdWithCache,Sa=Y.GetCompositionWithId,Aa=Y.GetCompositionWithIdAndDateFromMemory,La=Y.GetConceptBulk,Na=Y.GetConceptByCharacter,xa=Y.GetConceptByCharacterAndCategoryLocal,Ea=Y.GetConceptByCharacterAndType,Fa=Y.GetConnectionBetweenTwoConceptsLinker,Oa=Y.GetConnectionBulk,Da=Y.GetConnectionById,Ba=Y.GetConnectionDataPrefetch,Pa=Y.GetConnectionOfTheConcept,Ua=Y.GetConnectionTypeForCount,Ma=Y.GetFreeschemaImage,Ra=Y.GetFreeschemaImageUrl,Ga=Y.GetImageApi,Wa=Y.GetLink,ja=Y.GetLinkListListener,Va=Y.GetLinkListener,$a=Y.GetLinkRaw,Ha=Y.GetLinkerConnectionFromConcepts,qa=Y.GetLinkerConnectionToConcepts,za=Y.GetRelation,Ja=Y.GetRelationLocal,Za=Y.GetRelationRaw,Qa=Y.GetTheConcept,Ya=Y.GetTheConceptLocal,Ka=Y.GetUserGhostId,Xa=Y.JUSTDATA,ec=Y.LConcept,tc=Y.LConnection,nc=Y.LISTNORMAL,oc=Y.LocalConceptsData,ic=Y.LocalSyncData,rc=Y.LocalTransaction,sc=Y.LogEvent,ac=Y.Logger,cc=Y.LoginToBackend,lc=Y.MakeTheInstanceConcept,dc=Y.MakeTheInstanceConceptLocal,uc=Y.MakeTheTimestamp,hc=Y.MakeTheTypeConceptApi,pc=Y.MakeTheTypeConceptLocal,fc=Y.NORMAL,yc=Y.PRIVATE,gc=Y.PUBLIC,vc=Y.PatcherStructure,mc=Y.Prototype,Cc=Y.RAW,_c=Y.RecursiveSearchApi,wc=Y.RecursiveSearchApiNewRawFullLinker,Tc=Y.RecursiveSearchApiRaw,bc=Y.RecursiveSearchApiRawFullLinker,Ic=Y.RecursiveSearchApiWithInternalConnections,kc=Y.RecursiveSearchListener,Sc=Y.SchemaQuery,Ac=Y.SchemaQueryListener,Lc=Y.SearchAllConcepts,Nc=Y.SearchLinkInternal,xc=Y.SearchLinkInternalAll,Ec=Y.SearchLinkMultipleAll,Fc=Y.SearchLinkMultipleAllObservable,Oc=Y.SearchLinkMultipleApi,Dc=Y.SearchQuery,Bc=Y.SearchStructure,Pc=Y.SearchWithLinker,Uc=Y.SearchWithTypeAndLinker,Mc=Y.SearchWithTypeAndLinkerApi,Rc=Y.Selector,Gc=Y.SessionData,Wc=Y.Signin,jc=Y.Signup,Vc=Y.SignupEntity,$c=Y.SplitStrings,Hc=Y.StatefulWidget,qc=Y.SyncData,zc=Y.TrashTheConcept,Jc=Y.UpdateComposition,Zc=Y.UpdateCompositionLocal,Qc=Y.UserBinaryTree,Yc=Y.Validator,Kc=Y.ViewInternalData,Xc=Y.ViewInternalDataApi,el=Y.WidgetTree,tl=Y.convertFromConceptToLConcept,nl=Y.convertFromLConceptToConcept,ol=Y.convertWidgetTreeToWidget,il=Y.convertWidgetTreeToWidgetWithWrapper,rl=Y.createFormFieldData,sl=Y.createPrototypeLocal,al=Y.dispatchIdEvent,cl=Y.getFromDatabaseWithType,ll=Y.getObjectsFromIndexDb,dl=Y.getUploadFileLimit,ul=Y.getUserDetails,hl=Y.getWidgetBulkFromId,pl=Y.getWidgetFromId,fl=Y.handleServiceWorkerException,yl=Y.hasActivatedSW,gl=Y.importLatestWidget,vl=Y.importRecentWidget,ml=Y.init,Cl=Y.orderTheConnections,_l=Y.recursiveFetch,wl=Y.recursiveFetchNew,Tl=Y.removeAllChildren,bl=Y.renderImportedWidget,Il=Y.renderLatestWidget,kl=Y.renderPage,Sl=Y.renderWidget,Al=Y.searchLinkMultipleListener,Ll=Y.sendEmail,Nl=Y.sendMessage,xl=Y.serviceWorker,El=Y.setHasActivatedSW,Fl=Y.storeToDatabase,Ol=Y.subscribedListeners,Dl=Y.unwrapContainers,Bl=Y.updateAccessToken,Pl=Y.uploadAttachment,Ul=Y.uploadFile,Ml=Y.uploadImage,Rl=Y.uploadImageV2,Gl=Y.validDocumentFormats,Wl=Y.validImageFormats},793:(zt,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.setConfiguration=ee.config=ee.myprefix=void 0,ee.myprefix="Boomconsole_FMS_2024_",ee.config={userToken:"",userId:0,userConcept:0,apiUrl:"",aiUrl:"",nodeUrl:"",icons:{}},ee.setConfiguration=function _t(Rt){ee.config=Object.assign({},Rt)}}},Me={};function Wt(zt){var ee=Me[zt];if(void 0!==ee)return ee.exports;var _t=Me[zt]={exports:{}};return Zt[zt].call(_t.exports,_t,_t.exports,Wt),_t.exports}return Wt.d=(zt,ee)=>{for(var _t in ee)Wt.o(ee,_t)&&!Wt.o(zt,_t)&&Object.defineProperty(zt,_t,{enumerable:!0,get:ee[_t]})},Wt.o=(zt,ee)=>Object.prototype.hasOwnProperty.call(zt,ee),Wt.r=zt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(zt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(zt,"__esModule",{value:!0})},Wt(156)})()},7156:Jn=>{function Wn(st,Zt,Me,Wt,at,zt,ee){try{var _t=st[zt](ee),Rt=_t.value}catch($){return void Me($)}_t.done?Zt(Rt):Promise.resolve(Rt).then(Wt,at)}Jn.exports=function St(st){return function(){var Zt=this,Me=arguments;return new Promise(function(Wt,at){var zt=st.apply(Zt,Me);function ee(Rt){Wn(zt,Wt,at,ee,_t,"next",Rt)}function _t(Rt){Wn(zt,Wt,at,ee,_t,"throw",Rt)}ee(void 0)})}},Jn.exports.__esModule=!0,Jn.exports.default=Jn.exports}}]);